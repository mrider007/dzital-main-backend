/*! For license information please see main.dfb09854.js.LICENSE.txt */
(()=>{var __webpack_modules__={5513:(t,n,r)=>{"use strict";r.d(n,{A:()=>oe});var i=function(){function t(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var n=t.prototype;return n.hydrate=function(e){e.forEach(this._insertTag)},n.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(n);try{r.insertRule(t,r.cssRules.length)}catch(e){0}}else n.appendChild(document.createTextNode(t));this.ctr++},n.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},t}(),o=Math.abs,s=String.fromCharCode,a=Object.assign;function c(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function d(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function h(e,t,n){return e.slice(t,n)}function p(e){return e.length}function f(e){return e.length}function m(e,t){return t.push(e),e}var g=1,y=1,v=0,_=0,E=0,S="";function T(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:g,column:y,length:s,return:""}}function b(e,t){return a(T("",null,null,"",null,null,0),e,{length:-e.length},t)}function I(){return E=_>0?u(S,--_):0,y--,10===E&&(y=1,g--),E}function N(){return E=_<v?u(S,_++):0,y++,10===E&&(y=1,g++),E}function C(){return u(S,_)}function w(){return _}function R(e,t){return h(S,e,t)}function A(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function O(e){return g=y=1,v=p(S=e),_=0,[]}function M(e){return S="",e}function D(e){return c(R(_-1,L(91===e?e+2:40===e?e+1:e)))}function k(e){for(;(E=C())&&E<33;)N();return A(e)>2||A(E)>3?"":" "}function x(e,t){for(;--t&&N()&&!(E<48||E>102||E>57&&E<65||E>70&&E<97););return R(e,w()+(t<6&&32==C()&&32==N()))}function L(e){for(;N();)switch(E){case e:return _;case 34:case 39:34!==e&&39!==e&&L(E);break;case 40:41===e&&L(e);break;case 92:N()}return _}function P(e,t){for(;N()&&e+E!==57&&(e+E!==84||47!==C()););return"/*"+R(t,_-1)+"*"+s(47===e?e:N())}function j(e){for(;!A(C());)N();return R(e,_)}var U="-ms-",F="-moz-",z="-webkit-",V="comm",B="rule",G="decl",H="@keyframes";function W(e,t){for(var n="",r=f(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function Y(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case G:return e.return=e.return||e.value;case V:return"";case H:return e.return=e.value+"{"+W(e.children,r)+"}";case B:e.value=e.props.join(",")}return p(n=W(e.children,r))?e.return=e.value+"{"+n+"}":""}function q(e){return M(K("",null,null,null,[""],e=O(e),0,[0],e))}function K(e,t,n,r,i,o,a,c,h){for(var f=0,g=0,y=a,v=0,_=0,E=0,S=1,T=1,b=1,R=0,A="",O=i,M=o,L=r,U=A;T;)switch(E=R,R=N()){case 40:if(108!=E&&58==u(U,y-1)){-1!=d(U+=l(D(R),"&","&\f"),"&\f")&&(b=-1);break}case 34:case 39:case 91:U+=D(R);break;case 9:case 10:case 13:case 32:U+=k(E);break;case 92:U+=x(w()-1,7);continue;case 47:switch(C()){case 42:case 47:m(J(P(N(),w()),t,n),h);break;default:U+="/"}break;case 123*S:c[f++]=p(U)*b;case 125*S:case 59:case 0:switch(R){case 0:case 125:T=0;case 59+g:-1==b&&(U=l(U,/\f/g,"")),_>0&&p(U)-y&&m(_>32?X(U+";",r,n,y-1):X(l(U," ","")+";",r,n,y-2),h);break;case 59:U+=";";default:if(m(L=Q(U,t,n,f,g,i,c,A,O=[],M=[],y),o),123===R)if(0===g)K(U,t,L,L,O,o,y,c,M);else switch(99===v&&110===u(U,3)?100:v){case 100:case 108:case 109:case 115:K(e,L,L,r&&m(Q(e,L,L,0,0,i,c,A,i,O=[],y),M),i,M,y,c,r?O:M);break;default:K(U,L,L,L,[""],M,0,c,M)}}f=g=_=0,S=b=1,A=U="",y=a;break;case 58:y=1+p(U),_=E;default:if(S<1)if(123==R)--S;else if(125==R&&0==S++&&125==I())continue;switch(U+=s(R),R*S){case 38:b=g>0?1:(U+="\f",-1);break;case 44:c[f++]=(p(U)-1)*b,b=1;break;case 64:45===C()&&(U+=D(N())),v=C(),g=y=p(A=U+=j(w())),R++;break;case 45:45===E&&2==p(U)&&(S=0)}}return o}function Q(e,t,n,r,i,s,a,d,u,p,m){for(var g=i-1,y=0===i?s:[""],v=f(y),_=0,E=0,S=0;_<r;++_)for(var b=0,I=h(e,g+1,g=o(E=a[_])),N=e;b<v;++b)(N=c(E>0?y[b]+" "+I:l(I,/&\f/g,y[b])))&&(u[S++]=N);return T(e,t,n,0===i?B:d,u,p,m)}function J(e,t,n){return T(e,t,n,V,s(E),h(e,2,-2),0)}function X(e,t,n,r){return T(e,t,n,G,h(e,0,r),h(e,r+1,-1),r)}var Z=function(e,t,n){for(var r=0,i=0;r=i,i=C(),38===r&&12===i&&(t[n]=1),!A(i);)N();return R(e,_)},$=function(e,t){return M(function(e,t){var n=-1,r=44;do{switch(A(r)){case 0:38===r&&12===C()&&(t[n]=1),e[n]+=Z(_-1,t,n);break;case 2:e[n]+=D(r);break;case 4:if(44===r){e[++n]=58===C()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=s(r)}}while(r=N());return e}(O(e),t))},ee=new WeakMap,te=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ee.get(n))&&!r){ee.set(e,!0);for(var i=[],o=$(t,i),s=n.props,a=0,c=0;a<o.length;a++)for(var l=0;l<s.length;l++,c++)e.props[c]=i[a]?o[a].replace(/&\f/g,s[l]):s[l]+" "+o[a]}}},ne=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function re(e,t){switch(function(e,t){return 45^u(e,0)?(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3):0}(e,t)){case 5103:return z+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return z+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return z+e+F+e+U+e+e;case 6828:case 4268:return z+e+U+e+e;case 6165:return z+e+U+"flex-"+e+e;case 5187:return z+e+l(e,/(\w+).+(:[^]+)/,z+"box-$1$2"+U+"flex-$1$2")+e;case 5443:return z+e+U+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return z+e+U+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return z+e+U+l(e,"shrink","negative")+e;case 5292:return z+e+U+l(e,"basis","preferred-size")+e;case 6060:return z+"box-"+l(e,"-grow","")+z+e+U+l(e,"grow","positive")+e;case 4554:return z+l(e,/([^-])(transform)/g,"$1"+z+"$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,z+"$1"),/(image-set)/,z+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,z+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,z+"box-pack:$3"+U+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+z+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,z+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(p(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1"+z+"$2-$3$1"+F+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~d(e,"stretch")?re(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,p(e)-3-(~d(e,"!important")&&10))){case 107:return l(e,":",":"+z)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+z+(45===u(e,14)?"inline-":"")+"box$3$1"+z+"$2$3$1"+U+"$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return z+e+U+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return z+e+U+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return z+e+U+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return z+e+U+e+e}return e}var ie=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case G:e.return=re(e.value,e.length);break;case H:return W([b(e,{value:l(e.value,"@","@"+z)})],r);case B:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return W([b(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return W([b(e,{props:[l(t,/:(plac\w+)/,":"+z+"input-$1")]}),b(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),b(e,{props:[l(t,/:(plac\w+)/,U+"input-$1")]})],r)}return""}))}}],oe=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||ie;var o,s,a={},c=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;c.push(e)}));var l,d,u=[Y,(d=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&d(e)})],h=function(e){var t=f(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}([te,ne].concat(r,u));s=function(e,t,n,r){l=n,W(q(e?e+"{"+t.styles+"}":t.styles),h),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new i({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:s};return p.sheet.hydrate(c),p}},918:(e,t,n)=>{"use strict";function r(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}n.d(t,{A:()=>r})},5756:(e,t,n)=>{"use strict";n.d(t,{C:()=>a,T:()=>l,i:()=>o,w:()=>c});var r=n(5043),i=n(5513),o=(n(2830),n(9436),!0),s=r.createContext("undefined"!==typeof HTMLElement?(0,i.A)({key:"css"}):null);var a=s.Provider,c=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(s);return e(t,i,n)}))};o||(c=function(e){return function(t){var n=(0,r.useContext)(s);return null===n?(n=(0,i.A)({key:"css"}),r.createElement(s.Provider,{value:n},e(t,n))):e(t,n)}});var l=r.createContext({})},3290:(e,t,n)=>{"use strict";n.d(t,{AH:()=>l,i7:()=>d,mL:()=>c});var r=n(5756),i=n(5043),o=n(1722),s=n(9436),a=n(2830),c=(n(5513),n(219),(0,r.w)((function(e,t){var n=e.styles,c=(0,a.J)([n],void 0,i.useContext(r.T));if(!r.i){for(var l,d=c.name,u=c.styles,h=c.next;void 0!==h;)d+=" "+h.name,u+=h.styles,h=h.next;var p=!0===t.compat,f=t.insert("",{name:d,styles:u},t.sheet,p);return p?null:i.createElement("style",((l={})["data-emotion"]=t.key+"-global "+d,l.dangerouslySetInnerHTML={__html:f},l.nonce=t.sheet.nonce,l))}var m=i.useRef();return(0,s.i)((function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+e+" "+c.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",e),n.hydrate([i])),m.current=[n,r],function(){n.flush()}}),[t]),(0,s.i)((function(){var e=m.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==c.next&&(0,o.sk)(t,c.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}t.insert("",c,n,!1)}}),[t,c.name]),null})));function l(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.J)(t)}var d=function(){var e=l.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},2830:(e,t,n)=>{"use strict";n.d(t,{J:()=>f});var r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i=n(918),o=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,a=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!==typeof e},l=(0,i.A)((function(e){return a(e)?e:e.replace(o,"-$&").toLowerCase()})),d=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return h={name:t,styles:n,next:h},t}))}return 1===r[e]||a(e)||"number"!==typeof t||0===t?t:t+"px"};function u(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return h={name:n.name,styles:n.styles,next:h},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)h={name:r.name,styles:r.styles,next:h},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=u(e,t,n[i])+";";else for(var o in n){var s=n[o];if("object"!==typeof s)null!=t&&void 0!==t[s]?r+=o+"{"+t[s]+"}":c(s)&&(r+=l(o)+":"+d(o,s)+";");else if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var a=u(e,t,s);switch(o){case"animation":case"animationName":r+=l(o)+":"+a+";";break;default:r+=o+"{"+a+"}"}}else for(var h=0;h<s.length;h++)c(s[h])&&(r+=l(o)+":"+d(o,s[h])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=h,o=n(e);return h=i,u(e,t,o)}}if(null==t)return n;var s=t[n];return void 0!==s?s:n}var h,p=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var f=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";h=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=u(n,t,o)):i+=o[0];for(var s=1;s<e.length;s++)i+=u(n,t,e[s]),r&&(i+=o[s]);p.lastIndex=0;for(var a,c="";null!==(a=p.exec(i));)c+="-"+a[1];var l=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+c;return{name:l,styles:i,next:h}}},9436:(e,t,n)=>{"use strict";var r;n.d(t,{i:()=>a,s:()=>s});var i=n(5043),o=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,s=o||function(e){return e()},a=o||i.useLayoutEffect},1722:(e,t,n)=>{"use strict";n.d(t,{Rk:()=>r,SF:()=>i,sk:()=>o});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var i=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},o=function(e,t,n){i(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}}},7713:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalStyles:()=>b,StyledEngineProvider:()=>T,ThemeContext:()=>c.T,css:()=>v.AH,default:()=>I,internal_processStyles:()=>N,keyframes:()=>v.i7});var r=n(8168),i=n(5043),o=n(918),s=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=(0,o.A)((function(e){return s.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),c=n(5756),l=n(1722),d=n(2830),u=n(9436),h=a,p=function(e){return"theme"!==e},f=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?h:p},m=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},g=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,l.SF)(t,n,r),(0,u.s)((function(){return(0,l.sk)(t,n,r)})),null},y=function e(t,n){var o,s,a=t.__emotion_real===t,u=a&&t.__emotion_base||t;void 0!==n&&(o=n.label,s=n.target);var h=m(t,n,a),p=h||f(u),y=!p("as");return function(){var v=arguments,_=a&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==o&&_.push("label:"+o+";"),null==v[0]||void 0===v[0].raw)_.push.apply(_,v);else{0,_.push(v[0][0]);for(var E=v.length,S=1;S<E;S++)_.push(v[S],v[0][S])}var T=(0,c.w)((function(e,t,n){var r=y&&e.as||u,o="",a=[],m=e;if(null==e.theme){for(var v in m={},e)m[v]=e[v];m.theme=i.useContext(c.T)}"string"===typeof e.className?o=(0,l.Rk)(t.registered,a,e.className):null!=e.className&&(o=e.className+" ");var E=(0,d.J)(_.concat(a),t.registered,m);o+=t.key+"-"+E.name,void 0!==s&&(o+=" "+s);var S=y&&void 0===h?f(r):p,T={};for(var b in e)y&&"as"===b||S(b)&&(T[b]=e[b]);return T.className=o,T.ref=n,i.createElement(i.Fragment,null,i.createElement(g,{cache:t,serialized:E,isStringTag:"string"===typeof r}),i.createElement(r,T))}));return T.displayName=void 0!==o?o:"Styled("+("string"===typeof u?u:u.displayName||u.name||"Component")+")",T.defaultProps=t.defaultProps,T.__emotion_real=T,T.__emotion_base=u,T.__emotion_styles=_,T.__emotion_forwardProp=h,Object.defineProperty(T,"toString",{value:function(){return"."+s}}),T.withComponent=function(t,i){return e(t,(0,r.A)({},n,i,{shouldForwardProp:m(T,i,!0)})).apply(void 0,_)},T}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){y[e]=y(e)}));var v=n(3290),_=n(5513),E=n(579);let S;function T(e){const{injectFirst:t,children:n}=e;return t&&S?(0,E.jsx)(c.C,{value:S,children:n}):n}function b(e){const{styles:t,defaultTheme:n={}}=e,r="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,E.jsx)(v.mL,{styles:r})}function I(e,t){return y(e,t)}"object"===typeof document&&(S=(0,_.A)({key:"css",prepend:!0}));const N=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},7266:(e,t,n)=>{"use strict";var r=n(4994);t.X4=p,t.e$=f,t.eM=function(e,t){const n=h(e),r=h(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},t.a=m;var i=r(n(7245)),o=r(n(1098));function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,o.default)(e,t,n)}function a(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", "),")"):""}function c(e){if(e.type)return e;if("#"===e.charAt(0))return c(a(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,i.default)(9,e));let r,o=e.substring(t+1,e.length-1);if("color"===n){if(o=o.split(" "),r=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,i.default)(10,r))}else o=o.split(",");return o=o.map((e=>parseFloat(e))),{type:n,values:o,colorSpace:r}}const l=e=>{const t=c(e);return t.values.slice(0,3).map(((e,n)=>-1!==t.type.indexOf("hsl")&&0!==n?"".concat(e,"%"):e)).join(" ")};function d(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function u(e){e=c(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)};let a="rgb";const l=[Math.round(255*s(0)),Math.round(255*s(8)),Math.round(255*s(4))];return"hsla"===e.type&&(a+="a",l.push(t[3])),d({type:a,values:l})}function h(e){let t="hsl"===(e=c(e)).type||"hsla"===e.type?c(u(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function p(e,t){return e=c(e),t=s(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,d(e)}function f(e,t){if(e=c(e),t=s(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return d(e)}function m(e,t){if(e=c(e),t=s(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return d(e)}},8052:(e,t,n)=>{"use strict";var r=n(4994);t.Ay=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=m,rootShouldForwardProp:r=f,slotShouldForwardProp:c=f}=e,d=e=>(0,l.default)((0,i.default)({},e,{theme:y((0,i.default)({},e,{defaultTheme:n,themeId:t}))}));return d.__mui_systemSx=!0,function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:u,slot:p,skipVariantsResolver:m,skipSx:E,overridesResolver:S=v(g(p))}=l,T=(0,o.default)(l,h),b=void 0!==m?m:p&&"Root"!==p&&"root"!==p||!1,I=E||!1;let N=f;"Root"===p||"root"===p?N=r:p?N=c:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(N=void 0);const C=(0,s.default)(e,(0,i.default)({shouldForwardProp:N,label:undefined},T)),w=e=>"function"===typeof e&&e.__emotion_real!==e||(0,a.isPlainObject)(e)?r=>_(e,(0,i.default)({},r,{theme:y({theme:r.theme,defaultTheme:n,themeId:t})})):e,R=function(r){let o=w(r);for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];const l=a?a.map(w):[];u&&S&&l.push((e=>{const r=y((0,i.default)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[u]||!r.components[u].styleOverrides)return null;const o=r.components[u].styleOverrides,s={};return Object.entries(o).forEach((t=>{let[n,o]=t;s[n]=_(o,(0,i.default)({},e,{theme:r}))})),S(e,s)})),u&&!b&&l.push((e=>{var r;const o=y((0,i.default)({},e,{defaultTheme:n,themeId:t}));return _({variants:null==o||null==(r=o.components)||null==(r=r[u])?void 0:r.variants},(0,i.default)({},e,{theme:o}))})),I||l.push(d);const h=l.length-a.length;if(Array.isArray(r)&&h>0){const e=new Array(h).fill("");o=[...r,...e],o.raw=[...r.raw,...e]}const p=C(o,...l);return e.muiName&&(p.muiName=e.muiName),p};return C.withConfig&&(R.withConfig=C.withConfig),R}};var i=r(n(4634)),o=r(n(4893)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(7713)),a=n(4534),c=(r(n(578)),r(n(2046)),r(n(4989))),l=r(n(3234));const d=["ownerState"],u=["variants"],h=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const m=(0,c.default)(),g=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function y(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function v(e){return e?(t,n)=>n[e]:null}function _(e,t){let{ownerState:n}=t,r=(0,o.default)(t,d);const s="function"===typeof e?e((0,i.default)({ownerState:n},r)):e;if(Array.isArray(s))return s.flatMap((e=>_(e,(0,i.default)({ownerState:n},r))));if(s&&"object"===typeof s&&Array.isArray(s.variants)){const{variants:e=[]}=s;let t=(0,o.default)(s,u);return e.forEach((e=>{let o=!0;"function"===typeof e.props?o=e.props((0,i.default)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(o=!1)})),o&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,i.default)({ownerState:n},r,n)):e.style))})),t}return s}},9751:(e,t,n)=>{"use strict";n.d(t,{EU:()=>a,NI:()=>s,iZ:()=>l,kW:()=>d,vf:()=>c,zu:()=>i});var r=n(3216);const i={xs:0,sm:600,md:900,lg:1200,xl:1536},o={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(i[e],"px)")};function s(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||o;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"===typeof t){const e=r.breakpoints||o;return Object.keys(t).reduce(((r,o)=>{if(-1!==Object.keys(e.values||i).indexOf(o)){r[e.up(o)]=n(t[o],o)}else{const e=o;r[e]=t[e]}return r}),{})}return n(t)}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return(null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}function c(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function l(e){const t=a(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];const s=[t,...i].reduce(((e,t)=>(0,r.A)(e,t)),{});return c(Object.keys(t),s)}function d(e){let{values:t,breakpoints:n,base:r}=e;const i=r||function(e,t){if("object"!==typeof e)return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach(((t,r)=>{r<e.length&&(n[t]=!0)})):r.forEach((t=>{null!=e[t]&&(n[t]=!0)})),n}(t,n),o=Object.keys(i);if(0===o.length)return t;let s;return o.reduce(((e,n,r)=>(Array.isArray(t)?(e[n]=null!=t[r]?t[r]:t[s],s=r):"object"===typeof t?(e[n]=null!=t[n]?t[n]:t[s],s=n):e[n]=t,e)),{})}},9703:(e,t,n)=>{"use strict";function r(e,t){const n=this;if(n.vars&&"function"===typeof n.getColorSchemeSelector){const r=n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)");return{[r]:t}}return n.palette.mode===e?t:{}}n.d(t,{A:()=>r})},4853:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(8587),i=n(8168);const o=["values","unit","step"],s=e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>(0,i.A)({},e,{[t.key]:t.val})),{})};function a(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5}=e,c=(0,r.A)(e,o),l=s(t),d=Object.keys(l);function u(e){const r="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(r).concat(n,")")}function h(e){const r="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(r-a/100).concat(n,")")}function p(e,r){const i=d.indexOf(r);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(n,") and ")+"(max-width:".concat((-1!==i&&"number"===typeof t[d[i]]?t[d[i]]:r)-a/100).concat(n,")")}return(0,i.A)({keys:d,values:l,up:u,down:h,between:p,only:function(e){return d.indexOf(e)+1<d.length?p(e,d[d.indexOf(e)+1]):u(e)},not:function(e){const t=d.indexOf(e);return 0===t?u(d[1]):t===d.length-1?h(d[t]):p(e,d[d.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},c)}},8280:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(8168),i=n(8587),o=n(3216),s=n(4853);const a={borderRadius:4};var c=n(8604);var l=n(8812),d=n(7758),u=n(9703);const h=["breakpoints","palette","spacing","shape"];const p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:p,shape:f={}}=e,m=(0,i.A)(e,h),g=(0,s.A)(t),y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=(0,c.LX)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(p);let v=(0,o.A)({breakpoints:g,direction:"ltr",components:{},palette:(0,r.A)({mode:"light"},n),spacing:y,shape:(0,r.A)({},a,f)},m);v.applyStyles=u.A;for(var _=arguments.length,E=new Array(_>1?_-1:0),S=1;S<_;S++)E[S-1]=arguments[S];return v=E.reduce(((e,t)=>(0,o.A)(e,t)),v),v.unstable_sxConfig=(0,r.A)({},d.A,null==m?void 0:m.unstable_sxConfig),v.unstable_sx=function(e){return(0,l.A)({sx:e,theme:this})},v}},4989:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,private_createBreakpoints:()=>i.A,unstable_applyStyles:()=>o.A});var r=n(8280),i=n(4853),o=n(9703)},3815:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(3216);const i=function(e,t){return t?(0,r.A)(e,t,{clone:!1}):e}},8604:(e,t,n)=>{"use strict";n.d(t,{LX:()=>f,MA:()=>p,_W:()=>m,Lc:()=>v,Ms:()=>_});var r=n(9751),i=n(7162),o=n(3815);const s={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},c={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},l=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!c[e])return[e];e=c[e]}const[t,n]=e.split(""),r=s[t],i=a[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),d=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],u=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],h=[...d,...u];function p(e,t,n,r){var o;const s=null!=(o=(0,i.Yn)(e,t,!1))?o:n;return"number"===typeof s?e=>"string"===typeof e?e:s*e:Array.isArray(s)?e=>"string"===typeof e?e:s[e]:"function"===typeof s?s:()=>{}}function f(e){return p(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function g(e,t,n,i){if(-1===t.indexOf(n))return null;const o=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=m(t,n),e)),{})}(l(n),i),s=e[n];return(0,r.NI)(e,s,o)}function y(e,t){const n=f(e.theme);return Object.keys(e).map((r=>g(e,t,r,n))).reduce(o.A,{})}function v(e){return y(e,d)}function _(e){return y(e,u)}function E(e){return y(e,h)}v.propTypes={},v.filterProps=d,_.propTypes={},_.filterProps=u,E.propTypes={},E.filterProps=h},7162:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>a,BO:()=>s,Yn:()=>o});var r=n(410),i=n(9751);function o(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n="vars.".concat(t).split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function s(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:o(e,n)||i,t&&(r=t(r,i,e)),r}const a=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:a,transform:c}=e,l=e=>{if(null==e[t])return null;const l=e[t],d=o(e.theme,a)||{};return(0,i.NI)(e,l,(e=>{let i=s(d,c,e);return e===i&&"string"===typeof e&&(i=s(d,c,"".concat(t).concat("default"===e?"":(0,r.A)(e)),e)),!1===n?i:{[n]:i}}))};return l.propTypes={},l.filterProps=[t],l}},7758:(e,t,n)=>{"use strict";n.d(t,{A:()=>x});var r=n(8604),i=n(7162),o=n(3815);const s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?(0,o.A)(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};var a=n(9751);function c(e){return"number"!==typeof e?e:"".concat(e,"px solid")}function l(e,t){return(0,i.Ay)({prop:e,themeKey:"borders",transform:t})}const d=l("border",c),u=l("borderTop",c),h=l("borderRight",c),p=l("borderBottom",c),f=l("borderLeft",c),m=l("borderColor"),g=l("borderTopColor"),y=l("borderRightColor"),v=l("borderBottomColor"),_=l("borderLeftColor"),E=l("outline",c),S=l("outlineColor"),T=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,r.MA)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,r._W)(t,e)});return(0,a.NI)(e,e.borderRadius,n)}return null};T.propTypes={},T.filterProps=["borderRadius"];s(d,u,h,p,f,m,g,y,v,_,T,E,S);const b=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,r.MA)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,r._W)(t,e)});return(0,a.NI)(e,e.gap,n)}return null};b.propTypes={},b.filterProps=["gap"];const I=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,r.MA)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.columnGap,n)}return null};I.propTypes={},I.filterProps=["columnGap"];const N=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,r.MA)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.rowGap,n)}return null};N.propTypes={},N.filterProps=["rowGap"];s(b,I,N,(0,i.Ay)({prop:"gridColumn"}),(0,i.Ay)({prop:"gridRow"}),(0,i.Ay)({prop:"gridAutoFlow"}),(0,i.Ay)({prop:"gridAutoColumns"}),(0,i.Ay)({prop:"gridAutoRows"}),(0,i.Ay)({prop:"gridTemplateColumns"}),(0,i.Ay)({prop:"gridTemplateRows"}),(0,i.Ay)({prop:"gridTemplateAreas"}),(0,i.Ay)({prop:"gridArea"}));function C(e,t){return"grey"===t?t:e}s((0,i.Ay)({prop:"color",themeKey:"palette",transform:C}),(0,i.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:C}),(0,i.Ay)({prop:"backgroundColor",themeKey:"palette",transform:C}));function w(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const R=(0,i.Ay)({prop:"width",transform:w}),A=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r;const i=(null==(n=e.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[t])||a.zu[t];return i?"px"!==(null==(r=e.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:"".concat(i).concat(e.theme.breakpoints.unit)}:{maxWidth:i}:{maxWidth:w(t)}};return(0,a.NI)(e,e.maxWidth,t)}return null};A.filterProps=["maxWidth"];const O=(0,i.Ay)({prop:"minWidth",transform:w}),M=(0,i.Ay)({prop:"height",transform:w}),D=(0,i.Ay)({prop:"maxHeight",transform:w}),k=(0,i.Ay)({prop:"minHeight",transform:w}),x=((0,i.Ay)({prop:"size",cssProperty:"width",transform:w}),(0,i.Ay)({prop:"size",cssProperty:"height",transform:w}),s(R,A,O,M,D,k,(0,i.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:c},borderTop:{themeKey:"borders",transform:c},borderRight:{themeKey:"borders",transform:c},borderBottom:{themeKey:"borders",transform:c},borderLeft:{themeKey:"borders",transform:c},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:c},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:T},color:{themeKey:"palette",transform:C},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:C},backgroundColor:{themeKey:"palette",transform:C},p:{style:r.Ms},pt:{style:r.Ms},pr:{style:r.Ms},pb:{style:r.Ms},pl:{style:r.Ms},px:{style:r.Ms},py:{style:r.Ms},padding:{style:r.Ms},paddingTop:{style:r.Ms},paddingRight:{style:r.Ms},paddingBottom:{style:r.Ms},paddingLeft:{style:r.Ms},paddingX:{style:r.Ms},paddingY:{style:r.Ms},paddingInline:{style:r.Ms},paddingInlineStart:{style:r.Ms},paddingInlineEnd:{style:r.Ms},paddingBlock:{style:r.Ms},paddingBlockStart:{style:r.Ms},paddingBlockEnd:{style:r.Ms},m:{style:r.Lc},mt:{style:r.Lc},mr:{style:r.Lc},mb:{style:r.Lc},ml:{style:r.Lc},mx:{style:r.Lc},my:{style:r.Lc},margin:{style:r.Lc},marginTop:{style:r.Lc},marginRight:{style:r.Lc},marginBottom:{style:r.Lc},marginLeft:{style:r.Lc},marginX:{style:r.Lc},marginY:{style:r.Lc},marginInline:{style:r.Lc},marginInlineStart:{style:r.Lc},marginInlineEnd:{style:r.Lc},marginBlock:{style:r.Lc},marginBlockStart:{style:r.Lc},marginBlockEnd:{style:r.Lc},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:b},rowGap:{style:N},columnGap:{style:I},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:w},maxWidth:{style:A},minWidth:{transform:w},height:{transform:w},maxHeight:{transform:w},minHeight:{transform:w},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},8698:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(8168),i=n(8587),o=n(3216),s=n(7758);const a=["sx"],c=e=>{var t,n;const r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:s.A;return Object.keys(e).forEach((t=>{i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r};function l(e){const{sx:t}=e,n=(0,i.A)(e,a),{systemProps:s,otherProps:l}=c(n);let d;return d=Array.isArray(t)?[s,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,o.Q)(e)?(0,r.A)({},s,e):s}:(0,r.A)({},s,t),(0,r.A)({},l,{sx:d})}},3234:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,extendSxProp:()=>i.A,unstable_createStyleFunctionSx:()=>r.k,unstable_defaultSxConfig:()=>o.A});var r=n(8812),i=n(8698),o=n(7758)},8812:(e,t,n)=>{"use strict";n.d(t,{A:()=>d,k:()=>c});var r=n(410),i=n(3815),o=n(7162),s=n(9751),a=n(7758);function c(){function e(e,t,n,i){const a={[e]:t,theme:n},c=i[e];if(!c)return{[e]:t};const{cssProperty:l=e,themeKey:d,transform:u,style:h}=c;if(null==t)return null;if("typography"===d&&"inherit"===t)return{[e]:t};const p=(0,o.Yn)(n,d)||{};if(h)return h(a);return(0,s.NI)(a,t,(t=>{let n=(0,o.BO)(p,u,t);return t===n&&"string"===typeof t&&(n=(0,o.BO)(p,u,"".concat(e).concat("default"===t?"":(0,r.A)(t)),t)),!1===l?n:{[l]:n}}))}return function t(n){var r;const{sx:o,theme:c={}}=n||{};if(!o)return null;const l=null!=(r=c.unstable_sxConfig)?r:a.A;function d(n){let r=n;if("function"===typeof n)r=n(c);else if("object"!==typeof n)return n;if(!r)return null;const o=(0,s.EU)(c.breakpoints),a=Object.keys(o);let d=o;return Object.keys(r).forEach((n=>{const o=(a=r[n],u=c,"function"===typeof a?a(u):a);var a,u;if(null!==o&&void 0!==o)if("object"===typeof o)if(l[n])d=(0,i.A)(d,e(n,o,c,l));else{const e=(0,s.NI)({theme:c},o,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,o)?d=(0,i.A)(d,e):d[n]=t({sx:o,theme:c})}else d=(0,i.A)(d,e(n,o,c,l))})),(0,s.vf)(a,d)}return Array.isArray(o)?o.map(d):d(o)}}const l=c();l.filterProps=["sx"];const d=l},410:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6632);function i(e){if("string"!==typeof e)throw new Error((0,r.A)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},578:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(410)},1098:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))}},3216:(e,t,n)=>{"use strict";n.d(t,{A:()=>s,Q:()=>i});var r=n(8168);function i(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function o(e){if(!i(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=o(e[n])})),t}function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const a=n.clone?(0,r.A)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((r=>{"__proto__"!==r&&(i(t[r])&&r in e&&i(e[r])?a[r]=s(e[r],t[r],n):n.clone?a[r]=i(t[r])?o(t[r]):t[r]:a[r]=t[r])})),a}},4534:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,isPlainObject:()=>r.Q});var r=n(3216)},6632:(e,t,n)=>{"use strict";function r(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{A:()=>r})},7245:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(6632)},2046:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c,getFunctionName:()=>o});var r=n(2086);const i=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function o(e){const t="".concat(e).match(i);return t&&t[1]||""}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.displayName||e.name||o(e)||t}function a(e,t,n){const r=s(t);return e.displayName||(""!==r?"".concat(n,"(").concat(r,")"):n)}function c(e){if(null!=e){if("string"===typeof e)return e;if("function"===typeof e)return s(e,"Component");if("object"===typeof e)switch(e.$$typeof){case r.ForwardRef:return a(e,e.render,"ForwardRef");case r.Memo:return a(e,e.type,"memo");default:return}}}},3393:function(t,n,r){!function(t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function c(e,t){if(null==e)return{};var n,r,i=a(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function l(e,t){return d(e)||u(e,t)||h(e,t)||f()}function d(e){if(Array.isArray(e))return e}function u(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(c){a=!0,i=c}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}function h(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var g,y,v,_,E={exports:{}};function S(){return y?g:(y=1,g="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}function T(){if(_)return v;_=1;var e=S();function t(){}function n(){}return n.resetWarningCache=t,v=function(){function r(t,n,r,i,o,s){if(s!==e){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function i(){return r}r.isRequired=r;var o={array:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return o.PropTypes=o,o}}E.exports=T()();var b=m(E.exports),I=function(e,t,r){var i=!!r,o=n.useRef(r);n.useEffect((function(){o.current=r}),[r]),n.useEffect((function(){if(!i||!e)return function(){};var n=function(){o.current&&o.current.apply(o,arguments)};return e.on(t,n),function(){e.off(t,n)}}),[i,t,e,o])},N=function(e){var t=n.useRef(e);return n.useEffect((function(){t.current=e}),[e]),t.current},C=function(e){return null!==e&&"object"===o(e)},w=function(e){return C(e)&&"function"===typeof e.then},R=function(e){return C(e)&&"function"===typeof e.elements&&"function"===typeof e.createToken&&"function"===typeof e.createPaymentMethod&&"function"===typeof e.confirmCardPayment},A="[object Object]",O=function e(t,n){if(!C(t)||!C(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var i=Object.prototype.toString.call(t)===A;if(i!==(Object.prototype.toString.call(n)===A))return!1;if(!i&&!r)return t===n;var o=Object.keys(t),s=Object.keys(n);if(o.length!==s.length)return!1;for(var a={},c=0;c<o.length;c+=1)a[o[c]]=!0;for(var l=0;l<s.length;l+=1)a[s[l]]=!0;var d=Object.keys(a);if(d.length!==o.length)return!1;var u=t,h=n,p=function(t){return e(u[t],h[t])};return d.every(p)},M=function(e,t,n){return C(e)?Object.keys(e).reduce((function(r,o){var a=!C(t)||!O(e[o],t[o]);return n.includes(o)?(a&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),r):a?i(i({},r||{}),{},s({},o,e[o])):r}),null):null},D="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D;if(null===e||R(e))return e;throw new Error(t)},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D;if(w(e))return{tag:"async",stripePromise:Promise.resolve(e).then((function(e){return k(e,t)}))};var n=k(e,t);return null===n?{tag:"empty"}:{tag:"sync",stripe:n}},L=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"2.7.0"}),e.registerAppInfo({name:"react-stripe-js",version:"2.7.0",url:"https://stripe.com/docs/stripe-js/react"}))},P=n.createContext(null);P.displayName="ElementsContext";var j=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},U=function(e){var t=e.stripe,r=e.options,i=e.children,o=n.useMemo((function(){return x(t)}),[t]),s=l(n.useState((function(){return{stripe:"sync"===o.tag?o.stripe:null,elements:"sync"===o.tag?o.stripe.elements(r):null}})),2),a=s[0],c=s[1];n.useEffect((function(){var e=!0,t=function(e){c((function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}}))};return"async"!==o.tag||a.stripe?"sync"!==o.tag||a.stripe||t(o.stripe):o.stripePromise.then((function(n){n&&e&&t(n)})),function(){e=!1}}),[o,a,r]);var d=N(t);n.useEffect((function(){null!==d&&d!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")}),[d,t]);var u=N(r);return n.useEffect((function(){if(a.elements){var e=M(r,u,["clientSecret","fonts"]);e&&a.elements.update(e)}}),[r,u,a.elements]),n.useEffect((function(){L(a.stripe)}),[a.stripe]),n.createElement(P.Provider,{value:a},i)};U.propTypes={stripe:b.any,options:b.object};var F=function(e){var t=n.useContext(P);return j(t,e)},z=function(){return F("calls useElements()").elements},V=function(e){return(0,e.children)(F("mounts <ElementsConsumer>"))};V.propTypes={children:b.func.isRequired};var B=["on","session"],G=n.createContext(null);G.displayName="CustomCheckoutSdkContext";var H=function(e,t){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CustomCheckoutProvider> provider."));return e},W=n.createContext(null);W.displayName="CustomCheckoutContext";var Y=function(e,t){if(!e)return null;e.on,e.session;var n=c(e,B);return i(i({},n),t||e.session())},q="Invalid prop `stripe` supplied to `CustomCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",K=function(e){var t=e.stripe,r=e.options,i=e.children,o=n.useMemo((function(){return x(t,q)}),[t]),s=l(n.useState(null),2),a=s[0],c=s[1],d=l(n.useState((function(){return{stripe:"sync"===o.tag?o.stripe:null,customCheckoutSdk:null}})),2),u=d[0],h=d[1],p=function(e,t){h((function(n){return n.stripe&&n.customCheckoutSdk?n:{stripe:e,customCheckoutSdk:t}}))},f=n.useRef(!1);n.useEffect((function(){var e=!0;return"async"!==o.tag||u.stripe?"sync"===o.tag&&o.stripe&&!f.current&&(f.current=!0,o.stripe.initCustomCheckout(r).then((function(e){e&&(p(o.stripe,e),e.on("change",c))}))):o.stripePromise.then((function(t){t&&e&&!f.current&&(f.current=!0,t.initCustomCheckout(r).then((function(e){e&&(p(t,e),e.on("change",c))})))})),function(){e=!1}}),[o,u,r,c]);var m=N(t);n.useEffect((function(){null!==m&&m!==t&&console.warn("Unsupported prop change on CustomCheckoutProvider: You cannot change the `stripe` prop after setting it.")}),[m,t]);var g=N(r);n.useEffect((function(){var e,t;if(u.customCheckoutSdk){!r.clientSecret||C(g)||O(r.clientSecret,g.clientSecret)||console.warn("Unsupported prop change: options.client_secret is not a mutable property.");var n=null===g||void 0===g||null===(e=g.elementsOptions)||void 0===e?void 0:e.appearance,i=null===r||void 0===r||null===(t=r.elementsOptions)||void 0===t?void 0:t.appearance;i&&!O(i,n)&&u.customCheckoutSdk.changeAppearance(i)}}),[r,g,u.customCheckoutSdk]),n.useEffect((function(){L(u.stripe)}),[u.stripe]);var y=n.useMemo((function(){return Y(u.customCheckoutSdk,a)}),[u.customCheckoutSdk,a]);return u.customCheckoutSdk?n.createElement(G.Provider,{value:u},n.createElement(W.Provider,{value:y},i)):null};K.propTypes={stripe:b.any,options:b.shape({clientSecret:b.string.isRequired,elementsOptions:b.object}).isRequired};var Q=function(e){var t=n.useContext(G);return H(t,e)},J=function(e){var t=n.useContext(G),r=n.useContext(P);if(t&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return t?H(t,e):j(r,e)},X=function(){Q("calls useCustomCheckout()");var e=n.useContext(W);if(!e)throw new Error("Could not find CustomCheckout Context; You need to wrap the part of your app that calls useCustomCheckout() in an <CustomCheckoutProvider> provider.");return e},Z=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},$=function(e,t){var r="".concat(Z(e),"Element"),i=t?function(e){J("mounts <".concat(r,">"));var t=e.id,i=e.className;return n.createElement("div",{id:t,className:i})}:function(t){var i,o=t.id,s=t.className,a=t.options,c=void 0===a?{}:a,d=t.onBlur,u=t.onFocus,h=t.onReady,p=t.onChange,f=t.onEscape,m=t.onClick,g=t.onLoadError,y=t.onLoaderStart,v=t.onNetworksChange,_=t.onConfirm,E=t.onCancel,S=t.onShippingAddressChange,T=t.onShippingRateChange,b=J("mounts <".concat(r,">")),C="elements"in b?b.elements:null,w="customCheckoutSdk"in b?b.customCheckoutSdk:null,R=l(n.useState(null),2),A=R[0],O=R[1],D=n.useRef(null),k=n.useRef(null);I(A,"blur",d),I(A,"focus",u),I(A,"escape",f),I(A,"click",m),I(A,"loaderror",g),I(A,"loaderstart",y),I(A,"networkschange",v),I(A,"confirm",_),I(A,"cancel",E),I(A,"shippingaddresschange",S),I(A,"shippingratechange",T),I(A,"change",p),h&&(i="expressCheckout"===e?h:function(){h(A)}),I(A,"ready",i),n.useLayoutEffect((function(){if(null===D.current&&null!==k.current&&(C||w)){var t=null;w?t=w.createElement(e,c):C&&(t=C.create(e,c)),D.current=t,O(t),t&&t.mount(k.current)}}),[C,w,c]);var x=N(c);return n.useEffect((function(){if(D.current){var e=M(c,x,["paymentRequest"]);e&&D.current.update(e)}}),[c,x]),n.useLayoutEffect((function(){return function(){if(D.current&&"function"===typeof D.current.destroy)try{D.current.destroy(),D.current=null}catch(e){}}}),[]),n.createElement("div",{id:o,className:s,ref:k})};return i.propTypes={id:b.string,className:b.string,onChange:b.func,onBlur:b.func,onFocus:b.func,onReady:b.func,onEscape:b.func,onClick:b.func,onLoadError:b.func,onLoaderStart:b.func,onNetworksChange:b.func,onConfirm:b.func,onCancel:b.func,onShippingAddressChange:b.func,onShippingRateChange:b.func,options:b.object},i.displayName=r,i.__elementType=e,i},ee="undefined"===typeof window,te=n.createContext(null);te.displayName="EmbeddedCheckoutProviderContext";var ne=function(){var e=n.useContext(te);if(!e)throw new Error("<EmbeddedCheckout> must be used within <EmbeddedCheckoutProvider>");return e},re="Invalid prop `stripe` supplied to `EmbeddedCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",ie=function(e){var t=e.stripe,r=e.options,i=e.children,o=n.useMemo((function(){return x(t,re)}),[t]),s=n.useRef(null),a=n.useRef(null),c=l(n.useState({embeddedCheckout:null}),2),d=c[0],u=c[1];n.useEffect((function(){if(!a.current&&!s.current){var e=function(e){a.current||s.current||(a.current=e,s.current=a.current.initEmbeddedCheckout(r).then((function(e){u({embeddedCheckout:e})})))};"async"!==o.tag||a.current||!r.clientSecret&&!r.fetchClientSecret?"sync"!==o.tag||a.current||!r.clientSecret&&!r.fetchClientSecret||e(o.stripe):o.stripePromise.then((function(t){t&&e(t)}))}}),[o,r,d,a]),n.useEffect((function(){return function(){d.embeddedCheckout?(s.current=null,d.embeddedCheckout.destroy()):s.current&&s.current.then((function(){s.current=null,d.embeddedCheckout&&d.embeddedCheckout.destroy()}))}}),[d.embeddedCheckout]),n.useEffect((function(){L(a)}),[a]);var h=N(t);n.useEffect((function(){null!==h&&h!==t&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the `stripe` prop after setting it.")}),[h,t]);var p=N(r);return n.useEffect((function(){null!=p&&(null!=r?(void 0===r.clientSecret&&void 0===r.fetchClientSecret&&console.warn("Invalid props passed to EmbeddedCheckoutProvider: You must provide one of either `options.fetchClientSecret` or `options.clientSecret`."),null!=p.clientSecret&&r.clientSecret!==p.clientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the client secret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=p.fetchClientSecret&&r.fetchClientSecret!==p.fetchClientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change fetchClientSecret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=p.onComplete&&r.onComplete!==p.onComplete&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onComplete option after setting it.")):console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot unset options after setting them."))}),[p,r]),n.createElement(te.Provider,{value:d},i)},oe=function(t){var r=t.id,i=t.className,o=ne().embeddedCheckout,s=n.useRef(!1),a=n.useRef(null);return n.useLayoutEffect((function(){return!s.current&&o&&null!==a.current&&(o.mount(a.current),s.current=!0),function(){if(s.current&&o)try{o.unmount(),s.current=!1}catch(e){}}}),[o]),n.createElement("div",{ref:a,id:r,className:i})},se=function(e){var t=e.id,r=e.className;return ne(),n.createElement("div",{id:t,className:r})},ae=ee?se:oe,ce=function(){return J("calls useStripe()").stripe},le=$("auBankAccount",ee),de=$("card",ee),ue=$("cardNumber",ee),he=$("cardExpiry",ee),pe=$("cardCvc",ee),fe=$("fpxBank",ee),me=$("iban",ee),ge=$("idealBank",ee),ye=$("p24Bank",ee),ve=$("epsBank",ee),_e=$("payment",ee),Ee=$("expressCheckout",ee),Se=$("paymentRequestButton",ee),Te=$("linkAuthentication",ee),be=$("address",ee),Ie=$("shippingAddress",ee),Ne=$("paymentMethodMessaging",ee),Ce=$("affirmMessage",ee),we=$("afterpayClearpayMessage",ee);t.AddressElement=be,t.AffirmMessageElement=Ce,t.AfterpayClearpayMessageElement=we,t.AuBankAccountElement=le,t.CardCvcElement=pe,t.CardElement=de,t.CardExpiryElement=he,t.CardNumberElement=ue,t.CustomCheckoutProvider=K,t.Elements=U,t.ElementsConsumer=V,t.EmbeddedCheckout=ae,t.EmbeddedCheckoutProvider=ie,t.EpsBankElement=ve,t.ExpressCheckoutElement=Ee,t.FpxBankElement=fe,t.IbanElement=me,t.IdealBankElement=ge,t.LinkAuthenticationElement=Te,t.P24BankElement=ye,t.PaymentElement=_e,t.PaymentMethodMessagingElement=Ne,t.PaymentRequestButtonElement=Se,t.ShippingAddressElement=Ie,t.useCustomCheckout=X,t.useElements=z,t.useStripe=ce}(n,r(5043))},9472:function(module){var t;t=function(){return function(){var __webpack_modules__={4537:function(e){"use strict";e.exports=function(e,t){for(var n=new Array(arguments.length-1),r=0,i=2,o=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,s){n[r]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,s(e))}}))}},7419:function(e,t){"use strict";var n=t;n.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var r=new Array(64),i=new Array(123),o=0;o<64;)i[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;n.encode=function(e,t,n){for(var i,o=null,s=[],a=0,c=0;t<n;){var l=e[t++];switch(c){case 0:s[a++]=r[l>>2],i=(3&l)<<4,c=1;break;case 1:s[a++]=r[i|l>>4],i=(15&l)<<2,c=2;break;case 2:s[a++]=r[i|l>>6],s[a++]=r[63&l],c=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=r[i],s[a++]=61,1===c&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";n.decode=function(e,t,n){for(var r,o=n,a=0,c=0;c<e.length;){var l=e.charCodeAt(c++);if(61===l&&a>1)break;if(void 0===(l=i[l]))throw Error(s);switch(a){case 0:r=l,a=1;break;case 1:t[n++]=r<<2|(48&l)>>4,r=l,a=2;break;case 2:t[n++]=(15&r)<<4|(60&l)>>2,r=l,a=3;break;case 3:t[n++]=(3&r)<<6|l,a=0}}if(1===a)throw Error(s);return n-o},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},5124:function(e){"use strict";function t(e,n){"string"==typeof e&&(n=e,e=void 0);var r=[];function i(e){if("string"!=typeof e){var n=o();if(t.verbose&&console.log("codegen: "+n),n="return "+n,e){for(var s=Object.keys(e),a=new Array(s.length+1),c=new Array(s.length),l=0;l<s.length;)a[l]=s[l],c[l]=e[s[l++]];return a[l]=n,Function.apply(null,a).apply(null,c)}return Function(n)()}for(var d=new Array(arguments.length-1),u=0;u<d.length;)d[u]=arguments[++u];if(u=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var n=d[u++];switch(t){case"d":case"f":return String(Number(n));case"i":return String(Math.floor(n));case"j":return JSON.stringify(n);case"s":return String(n)}return"%"})),u!==d.length)throw Error("parameter count mismatch");return r.push(e),i}function o(t){return"function "+(t||n||"")+"("+(e&&e.join(",")||"")+"){\n  "+r.join("\n  ")+"\n}"}return i.toString=o,i}e.exports=t,t.verbose=!1},9211:function(e){"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},9054:function(e,t,n){"use strict";e.exports=o;var r=n(4537),i=n(7199)("fs");function o(e,t,n){return"function"==typeof t?(n=t,t={}):t||(t={}),n?!t.xhr&&i&&i.readFile?i.readFile(e,(function(r,i){return r&&"undefined"!=typeof XMLHttpRequest?o.xhr(e,t,n):r?n(r):n(null,t.binary?i:i.toString("utf8"))})):o.xhr(e,t,n):r(o,this,e,t)}o.xhr=function(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){if(0!==r.status&&200!==r.status)return n(Error("status "+r.status));if(t.binary){var e=r.response;if(!e){e=[];for(var i=0;i<r.responseText.length;++i)e.push(255&r.responseText.charCodeAt(i))}return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return n(null,r.responseText)}},t.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",e),r.send()}},945:function(e){"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function o(e,r,i){t[0]=e,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function a(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?i:o,e.writeFloatBE=r?o:i,e.readFloatLE=r?s:a,e.readFloatBE=r?a:s}():function(){function t(e,t,n,r){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function s(e,t,n){var r=e(t,n),i=2*(r>>31)+1,o=r>>>23&255,s=8388607&r;return 255===o?s?NaN:i*(1/0):0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,r),e.readFloatLE=s.bind(null,i),e.readFloatBE=s.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function o(e,r,i){t[0]=e,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function a(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?i:o,e.writeDoubleBE=r?o:i,e.readDoubleLE=r?s:a,e.readDoubleBE=r?a:s}():function(){function t(e,t,n,r,i,o){var s=r<0?1:0;if(s&&(r=-r),0===r)e(0,i,o+t),e(1/r>0?0:2147483648,i,o+n);else if(isNaN(r))e(0,i,o+t),e(2146959360,i,o+n);else if(r>17976931348623157e292)e(0,i,o+t),e((s<<31|2146435072)>>>0,i,o+n);else{var a;if(r<22250738585072014e-324)e((a=r/5e-324)>>>0,i,o+t),e((s<<31|a/4294967296)>>>0,i,o+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=r*Math.pow(2,-c))>>>0,i,o+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,i,o+n)}}}function s(e,t,n,r,i){var o=e(r,i+t),s=e(r,i+n),a=2*(s>>31)+1,c=s>>>20&2047,l=4294967296*(1048575&s)+o;return 2047===c?l?NaN:a*(1/0):0===c?5e-324*a*l:a*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,r,4,0),e.readDoubleLE=s.bind(null,i,0,4),e.readDoubleBE=s.bind(null,o,4,0)}(),e}function n(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function r(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},7199:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},8626:function(e,t){"use strict";var n=t,r=n.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},i=n.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=r(e),i="";n&&(i=t.shift()+"/");for(var o=0;o<t.length;)".."===t[o]?o>0&&".."!==t[o-1]?t.splice(--o,2):n?t.splice(o,1):++o:"."===t[o]?t.splice(o,1):++o;return i+t.join("/")};n.resolve=function(e,t,n){return n||(t=i(t)),r(t)?t:(n||(e=i(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?i(e+"/"+t):t)}},6662:function(e){"use strict";e.exports=function(e,t,n){var r=n||8192,i=r>>>1,o=null,s=r;return function(n){if(n<1||n>i)return e(n);s+n>r&&(o=e(r),s=0);var a=t.call(o,s,s+=n);return 7&s&&(s=1+(7|s)),a}}},4997:function(e,t){"use strict";var n=t;n.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},n.read=function(e,t,n){if(n-t<1)return"";for(var r,i=null,o=[],s=0;t<n;)(r=e[t++])<128?o[s++]=r:r>191&&r<224?o[s++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(r>>10),o[s++]=56320+(1023&r)):o[s++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},n.write=function(e,t,n){for(var r,i,o=n,s=0;s<e.length;++s)(r=e.charCodeAt(s))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(s+1)))?(r=65536+((1023&r)<<10)+(1023&i),++s,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-o}},4188:function(e,t,n){var r,i,o;!function(s){"use strict";if(null!=t&&"number"!=typeof t.nodeType)e.exports=s();else if(null!=n.amdO)i=[],void 0===(o="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=o);else{var a=s(),c="undefined"!=typeof self?self:$.global;"function"!=typeof c.btoa&&(c.btoa=a.btoa),"function"!=typeof c.atob&&(c.atob=a.atob)}}((function(){"use strict";var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function t(e){this.message=e}return t.prototype=new Error,t.prototype.name="InvalidCharacterError",{btoa:function(n){for(var r,i,o=String(n),s=0,a=e,c="";o.charAt(0|s)||(a="=",s%1);c+=a.charAt(63&r>>8-s%1*8)){if((i=o.charCodeAt(s+=3/4))>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|i}return c},atob:function(n){var r=String(n).replace(/[=]+$/,"");if(r.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,o,s=0,a=0,c="";o=r.charAt(a++);~o&&(i=s%4?64*i+o:o,s++%4)?c+=String.fromCharCode(255&i>>(-2*s&6)):0)o=e.indexOf(o);return c}}}))},9667:function(e,t,n){"use strict";n.r(t),n.d(t,{addUsersToChatRoom:function(){return _},addUsersToChatRoomAllowlist:function(){return K},addUsersToChatRoomWhitelist:function(){return q},blockChatRoomMember:function(){return L},blockChatRoomMembers:function(){return j},chatRoomBlockMulti:function(){return P},chatRoomBlockSingle:function(){return x},createChatRoom:function(){return u},deleteChatRoomSharedFile:function(){return se},destroyChatRoom:function(){return h},disableSendChatRoomMsg:function(){return W},enableSendChatRoomMsg:function(){return Y},fetchChatRoomAnnouncement:function(){return re},fetchChatRoomSharedFileList:function(){return ae},getChatRoomAdmin:function(){return N},getChatRoomAllowlist:function(){return $},getChatRoomAttributes:function(){return le},getChatRoomBlacklist:function(){return G},getChatRoomBlacklistNew:function(){return B},getChatRoomBlocklist:function(){return H},getChatRoomDetails:function(){return p},getChatRoomMuteList:function(){return D},getChatRoomMuted:function(){return M},getChatRoomMutelist:function(){return k},getChatRoomSharedFilelist:function(){return ce},getChatRoomWhitelist:function(){return Z},getChatRooms:function(){return d},isChatRoomWhiteUser:function(){return ee},isInChatRoomAllowlist:function(){return te},isInChatRoomMutelist:function(){return ne},joinChatRoom:function(){return E},leaveChatRoom:function(){return T},listChatRoomMember:function(){return b},listChatRoomMembers:function(){return I},modifyChatRoom:function(){return f},muteChatRoomMember:function(){return R},quitChatRoom:function(){return S},removeChatRoomAdmin:function(){return w},removeChatRoomAllowlistMember:function(){return X},removeChatRoomAttribute:function(){return pe},removeChatRoomAttributes:function(){return he},removeChatRoomBlockMulti:function(){return z},removeChatRoomBlockSingle:function(){return U},removeChatRoomMember:function(){return g},removeChatRoomMembers:function(){return v},removeChatRoomWhitelistMember:function(){return J},removeMultiChatRoomMember:function(){return y},removeMuteChatRoomMember:function(){return A},removeSingleChatRoomMember:function(){return m},rmUsersFromChatRoomWhitelist:function(){return Q},setChatRoomAdmin:function(){return C},setChatRoomAttribute:function(){return ue},setChatRoomAttributes:function(){return de},unblockChatRoomMember:function(){return F},unblockChatRoomMembers:function(){return V},unmuteChatRoomMember:function(){return O},updateChatRoomAnnouncement:function(){return ie},uploadChatRoomSharedFile:function(){return oe}}),n(1539),n(8674),n(8309),n(2526),n(1817),n(2222),n(9753),n(9600),n(2165),n(6992),n(8783),n(3948);var r=n(5531),i=n(7252),o=n(4370),s=n(3246),a=n(7360),c=n(1595);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function d(e){var t=this;if("number"!=typeof e.pagenum||"number"!=typeof e.pagesize)throw Error("Invalid parameter");if(!s.XZ.call(this)){var n=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}var l={pagenum:e.pagenum||1,pagesize:e.pagesize||20},d=this.context,u=d.orgName,h=d.appName,p=d.accessToken,f={url:this.apiUrl+"/"+u+"/"+h+"/chatrooms",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+p},data:l,success:function(t){"function"==typeof e.success&&e.success(t)},error:function(n){n.error&&n.error_description&&t.onError&&t.onError({type:r.E.WEBIM_CONNCTION_LOAD_CHATROOM_ERROR,message:n.error_description,data:n}),"function"==typeof e.error&&e.error(n)}};return a.kg.debug("Call getChatRooms",e),o.hj.call(this,f,c.fI.GET_CHATROOM_LIST)}function u(e){if("string"!=typeof e.name)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n={name:e.name,description:e.description,maxusers:e.maxusers,owner:this.user,members:e.members},l=this.context,d=l.orgName,u=l.appName,h=(l.accessToken,l.jid),p={url:"".concat(this.apiUrl,"/").concat(d,"/").concat(u,"/chatrooms?resource=").concat(h.clientResource),dataType:"json",type:"POST",data:JSON.stringify(n),headers:{Authorization:"Bearer "+e.token||0,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call createChatRoom",e),o.hj.call(this,p,c.fI.CREATE_CHATROOM)}function h(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=(n.accessToken,n.jid),h={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(e.chatRoomId,"?resource=").concat(u.clientResource),dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+e.token||0},success:e.success,error:e.error};return a.kg.debug("Call destroyChatRoom",e),o.hj.call(this,h,c.fI.DESTROY_CHATROOM)}function p(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h={url:this.apiUrl+"/"+l+"/"+d+"/chatrooms/"+e.chatRoomId,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getChatRoomDetails",e),o.hj.call(this,h,c.fI.GET_CHATROOM_DETAIL)}function f(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f={groupname:e.chatRoomName,description:e.description,maxusers:e.maxusers},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"?resource=").concat(h.clientResource),type:"PUT",data:JSON.stringify(f),dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call modifyChatRoom",e),o.hj.call(this,m,c.fI.MODIFY_CHATROOM)}function m(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId||"string"!=typeof e.username)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/users/").concat(f,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeChatRoomMember",e),o.hj.call(this,m,c.fI.REMOVE_CHATROOM_MEMBER)}var g=m;function y(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId||!Array.isArray(e.users))throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=e.chatRoomId,l=e.users.join(","),d=this.context,u=d.orgName,h=d.appName,p=d.accessToken,f=d.jid,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(h,"/chatrooms/").concat(n,"/users/").concat(l,"?resource=").concat(f.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeChatRoomMembers",e),o.hj.call(this,m,c.fI.MULTI_REMOVE_CHATROOM_MEMBER)}var v=y;function _(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId||!Array.isArray(e.users))throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=e.chatRoomId,l={usernames:e.users},d=this.context,u=d.orgName,h=d.appName,p=d.accessToken,f=d.jid,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(h,"/chatrooms/").concat(n,"/users?resource=").concat(f.clientResource),type:"POST",data:JSON.stringify(l),dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call addUsersToChatRoom",e),o.hj.call(this,m,c.fI.ADD_USERS_TO_CHATROOM)}function E(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}return a.kg.debug("Call joinChatRoom",e),this.mSync.handleChatRoom(e,"join")}function S(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}return a.kg.debug("Call leaveChatRoom",e),this.mSync.handleChatRoom(e,"leave")}var T=S;function b(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(isNaN(e.pageNum)||e.pageNum<=0)throw Error('The parameter "pageNum" should be a positive number');if(isNaN(e.pageSize)||e.pageSize<=0)throw Error('The parameter "pageSize" should be a positive number');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n={pagenum:e.pageNum,pagesize:e.pageSize},l=this.context,d=l.orgName,u=l.appName,h=l.accessToken,p={url:this.apiUrl+"/"+d+"/"+u+"/chatrooms/"+e.chatRoomId+"/users",dataType:"json",type:"GET",data:n,headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call listChatRoomMembers",e),o.hj.call(this,p,c.fI.LIST_CHATROOM_MEMBERS)}var I=b;function N(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.chatRoomId,p={url:this.apiUrl+"/"+l+"/"+d+"/chatrooms/"+h+"/admin",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getChatRoomAdmin",e),o.hj.call(this,p,c.fI.GET_CHATROOM_ADMIN)}function C(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f={newadmin:e.username},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/admin?resource=").concat(h.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call setChatRoomAdmin",e),o.hj.call(this,m,c.fI.SET_CHATROOM_ADMIN)}function w(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/admin/").concat(f,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeChatRoomAdmin",e),o.hj.call(this,m,c.fI.REMOVE_CHATROOM_ADMIN)}function R(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if("number"!=typeof e.muteDuration)throw Error('Invalid parameter: "muteDuration"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f={usernames:[e.username],mute_duration:e.muteDuration},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/mute?resource=").concat(h.clientResource),dataType:"json",type:"POST",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},data:JSON.stringify(f),success:e.success,error:e.error};return a.kg.debug("Call muteChatRoomMember",e),o.hj.call(this,m,c.fI.MUTE_CHATROOM_MEMBER)}function A(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/mute/").concat(f,"?resource=").concat(h.clientResource),dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call unmuteChatRoomMember",e),o.hj.call(this,m,c.fI.REMOVE_MUTE_CHATROOM_MEMBER)}var O=A;function M(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.chatRoomId,p={url:this.apiUrl+"/"+l+"/"+d+"/chatrooms/"+h+"/mute",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getChatRoomMutelist",e),o.hj.call(this,p,c.fI.GET_MUTE_CHATROOM_MEMBERS)}var D=M,k=M;function x(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/blocks/users/").concat(f,"?resource=").concat(h.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call blockChatRoomMember",e),o.hj.call(this,m,c.fI.SET_CHATROOM_MEMBER_TO_BLACK)}var L=x;function P(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f={usernames:e.usernames},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/blocks/users?resource=").concat(h.clientResource),data:JSON.stringify(f),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Chat blockChatRoomMembers:",m),o.hj.call(this,m,c.fI.MULTI_SET_CHATROOM_MEMBER_TO_BLACK)}var j=P;function U(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/blocks/users/").concat(f,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call unblockChatRoomMember",e),o.hj.call(this,m,c.fI.REMOVE_CHATROOM_MEMBER_BLACK)}var F=U;function z(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f=e.usernames.join(","),m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/blocks/users/").concat(f,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call unblockChatRoomMembers",e),o.hj.call(this,m,c.fI.MULTI_REMOVE_CHATROOM_MEMBER_BLACK)}var V=z;function B(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.chatRoomId,p={url:this.apiUrl+"/"+l+"/"+d+"/chatrooms/"+h+"/blocks/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getChatRoomBlocklist",e),o.hj.call(this,p,c.fI.GET_CHATROOM_BLOCK_MEMBERS)}var G=B,H=B;function W(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/ban?resource=").concat(h.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call disableSendChatRoomMsg",e),o.hj.call(this,f,c.fI.DISABLED_CHATROOM_SEND_MSG)}function Y(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/ban?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call enableSendChatRoomMsg",e),o.hj.call(this,f,c.fI.ENABLE_CHATROOM_SEND_MSG)}function q(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f={usernames:e.users},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/white/users?resource=").concat(h.clientResource),type:"POST",data:JSON.stringify(f),dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call addUsersToChatRoomWhitelist",e),o.hj.call(this,m,c.fI.ADD_USERS_TO_CHATROOM)}var K=q;function Q(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/white/users/").concat(e.userName,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeChatRoomAllowlistMember",e),o.hj.call(this,f,c.fI.REMOVE_CHATROOM_WHITE_USERS)}var J=Q,X=Q;function Z(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.chatRoomId,p={url:this.apiUrl+"/"+l+"/"+d+"/chatrooms/"+h+"/white/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getChatRoomAllowlist",e),o.hj.call(this,p,c.fI.GET_CHATROOM_WHITE_USERS)}var $=Z;function ee(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.chatRoomId,p={url:this.apiUrl+"/"+l+"/"+d+"/chatrooms/"+h+"/white/users/"+e.userName,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call isInChatRoomAllowlist",e),o.hj.call(this,p,c.fI.CHECK_CHATROOM_WHITE_USER)}var te=ee;function ne(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.orgName,l=n.appName,d=n.accessToken,u=n.userId,h={url:this.apiUrl+"/"+c+"/"+l+"/sdk/chatrooms/"+e.chatRoomId+"/mute/"+u,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+d}};return a.kg.debug("Call isInChatRoomMutelist",e),o.hj.call(this,h).then((function(e){return e.data}))}function re(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.roomId,p={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(h,"/announcement"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call fetchChatRoomAnnouncement",e),o.hj.call(this,p,c.fI.GET_CHATROOM_ANN)}function ie(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if("string"!=typeof e.announcement)throw Error('Invalid parameter: "announcement"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.roomId,f={announcement:e.announcement},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/announcement?resource=").concat(h.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call updateChatRoomAnnouncement:",e),o.hj.call(this,m,c.fI.UPDATE_CHATROOM_ANN)}function oe(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if("object"!==l(e.file))throw Error('Invalid parameter: "file"');if(s.XZ.call(this)){var t=this.context,n=t.orgName,r=t.appName,i=t.accessToken,d=t.jid,u=e.roomId;o.cT.call(this,{uploadUrl:"".concat(this.apiUrl,"/").concat(n,"/").concat(r,"/chatrooms/").concat(u,"/share_files?resource=").concat(d.clientResource),onFileUploadProgress:e.onFileUploadProgress,onFileUploadComplete:e.onFileUploadComplete,onFileUploadError:e.onFileUploadError,onFileUploadCanceled:e.onFileUploadCanceled,accessToken:i,apiUrl:this.apiUrl,file:e.file,appKey:this.context.appKey},c.fI.UPLOAD_CHATROOM_FILE),a.kg.debug("Call uploadChatRoomSharedFile",e)}}function se(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if("string"!=typeof e.fileId||""===e.fileId)throw Error('Invalid parameter: "fileId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.roomId,f=e.fileId,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/share_files/").concat(f,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call deleteChatRoomSharedFile",e),o.hj.call(this,m,c.fI.DELETE_CHATROOM_FILE)}function ae(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.roomId,p={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(h,"/share_files"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json",accept:"application/json"},success:e.success,error:e.error};return a.kg.debug("Call fetchChatRoomSharedFileList",e),o.hj.call(this,p,c.fI.GET_CHATROOM_FILES)}var ce=ae;function le(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if(e.attributeKeys&&!Array.isArray(e.attributeKeys))throw Error('"Invalid parameter attributeKeys": '+e.attributeKeys);if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=(n.jid,e.chatRoomId),p={keys:e.attributeKeys},f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/metadata/chatroom/").concat(h),type:"POST",dataType:"json",data:JSON.stringify(p),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};return a.kg.debug("Call getChatRoomAttributes:",e),o.hj.call(this,f,c.fI.GET_CHATROOM_ATTR).then((function(e){return{data:e.data,type:e.type}}))}function de(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if("object"!==l(e.attributes))throw Error("Invalid parameter attributes: "+e.attributes);if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,d=n.orgName,u=n.appName,h=n.accessToken,p=n.userId,f=e.chatRoomId,m=e.attributes,g=e.autoDelete,y=void 0===g||g,v=e.isForced?"/forced":"",_={metaData:m,autoDelete:y?"DELETE":"NO_DELETE"},E={url:"".concat(this.apiUrl,"/").concat(d,"/").concat(u,"/metadata/chatroom/").concat(f,"/user/").concat(p)+v,type:"PUT",dataType:"json",data:JSON.stringify(_),headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"}};return a.kg.debug("Call setChatRoomAttributes:",e),o.hj.call(this,E,c.fI.SET_CHATROOM_ATTR).then((function(e){return(0,s._W)(e)}))}function ue(e){var t;if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if("string"!=typeof e.attributeKey||""===e.attributeKey)throw Error("Invalid parameter attributeKey: "+e.attributeKey);if("string"!=typeof e.attributeValue||""===e.attributeValue)throw Error("Invalid parameter attributeValue: "+e.attributeValue);if(!s.XZ.call(this)){var n=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}var l=this.context,d=l.orgName,u=l.appName,h=l.accessToken,p=l.userId,f=e.chatRoomId,m=e.attributeKey,g=e.attributeValue,y=e.autoDelete,v=void 0===y||y,_=e.isForced?"/forced":"",E={metaData:(t={},t[m]=g,t),autoDelete:v?"DELETE":"NO_DELETE"},S={url:"".concat(this.apiUrl,"/").concat(d,"/").concat(u,"/metadata/chatroom/").concat(f,"/user/").concat(p)+_,type:"PUT",dataType:"json",data:JSON.stringify(E),headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"}};return a.kg.debug("Call setChatRoomAttribute:",e),o.hj.call(this,S,c.fI.SET_CHATROOM_ATTR).then((function(e){var t=(0,s.H7)(e);if(t)throw t}))}function he(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if(!Array.isArray(e.attributeKeys))throw Error('"Invalid parameter attributes": '+e.attributeKeys);if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.userId,p=e.chatRoomId,f=e.attributeKeys,m=e.isForced?"/forced":"",g={keys:f},y={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/metadata/chatroom/").concat(p,"/user/").concat(h)+m,type:"DELETE",dataType:"json",data:JSON.stringify(g),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};return a.kg.debug("Call removeChatRoomAttributes:",e),o.hj.call(this,y,c.fI.DELETE_CHATROOM_ATTR).then((function(e){return(0,s._W)(e)}))}function pe(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if("string"!=typeof e.attributeKey||""===e.attributeKey)throw Error('"Invalid parameter attributeKey": '+e.attributeKey);if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.userId,p=e.chatRoomId,f=e.attributeKey,m=e.isForced?"/forced":"",g={keys:[f]},y={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/metadata/chatroom/").concat(p,"/user/").concat(h)+m,type:"DELETE",dataType:"json",data:JSON.stringify(g),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};return a.kg.debug("Call removeChatRoomAttribute:",e),o.hj.call(this,y,c.fI.DELETE_CHATROOM_ATTR).then((function(e){var t=(0,s.H7)(e);if(t)throw t}))}},4363:function(e,t,n){"use strict";n.d(t,{w:function(){return o}}),n(9601),n(2772);var r=n(7360),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};function o(e){var t,n,o,s=e.id,a=e.payload,c=e.timestamp,l=e.to,d=a.bodies&&a.bodies.length>0?a.bodies[0]:{},u={},h={},p=a.type?a.type:l.indexOf("@conference.easemob.com")>-1?"groupChat":"singleChat";switch(p="chat"===p?"singleChat":p,d.type){case"txt":var f=null===(t=null==a?void 0:a.meta)||void 0===t?void 0:t.edit_msg;if(u={id:s,type:"txt",chatType:p,msg:d.msg||"",to:a.to||"",from:a.from,time:c,ext:a.ext},f){var m=f.edit_time,g=f.operator,y=f.count;u.modifiedInfo={operationTime:m,operatorId:g,operationCount:y}}break;case"img":u={id:s,type:"img",chatType:p,to:a.to,from:a.from,time:c,ext:a.ext,width:(null===(n=d.size)||void 0===n?void 0:n.width)||0,height:(null===(o=d.size)||void 0===o?void 0:o.height)||0,secret:d.secret||"",url:(null==d?void 0:d.url)||"",file_length:d.file_length||0,file:{}};break;case"video":u={id:s,type:"video",chatType:p,from:a.from,to:a.to,url:(null==d?void 0:d.url)||"",secret:d.secret||"",filename:d.filename,length:d.length||0,file:{},file_length:d.file_length||0,filetype:a.ext.file_type||"",ext:a.ext,time:c};break;case"loc":u={id:s,type:"loc",chatType:p,from:a.from,to:a.to,buildingName:d.buildingName||"",addr:d.addr,lat:d.lat,lng:d.lng,ext:a.ext,time:c};break;case"audio":u={id:s,type:"audio",chatType:p,from:a.from,to:a.to,secret:d.secret||"",ext:a.ext,time:c,url:(null==d?void 0:d.url)||"",file:{},filename:d.filename,length:d.length||0,file_length:d.file_length||0,filetype:a.ext.file_type||""};break;case"file":u={id:s,type:"file",chatType:p,from:a.from,to:a.to,ext:a.ext,time:c,url:(null==d?void 0:d.url)||"",secret:d.secret||"",file:{},filename:d.filename||"",file_length:d.file_length||0,filetype:a.ext.file_type||""};break;case"cmd":u={id:s,type:"cmd",chatType:p,from:a.from,to:a.to,ext:a.ext,time:c,action:d.action||""};break;case"custom":u={id:s,type:"custom",chatType:p,from:a.from,to:a.to,ext:a.ext,time:c,customEvent:d.customEvent||"",customExts:d.customExts||""};break;case"combine":u={id:s,type:"combine",chatType:p,msg:d.msg||"",to:a.to||"",from:a.from,time:c,ext:a.ext,title:d.title||"",summary:d.summary||"",url:(null==d?void 0:d.url)||"",compatibleText:d.text,combineLevel:d.combineLevel||0,secret:d.secret||"",filename:d.filename||"",file_length:d.file_length||0};break;default:r.kg.error("unexpected message: ".concat(e))}if(a.msgConfig&&(h.msgConfig=a.msgConfig),null==a?void 0:a.meta){var v=a.meta;v.thread&&(h.chatThread={messageId:v.thread.msg_parent_id,parentId:v.thread.muc_parent_id,chatThreadName:v.thread.thread_name}),v.reactions&&(h.reactions=v.reactions),v.translations&&(h.translations=v.translations)}return i(i({},u),h)}},2856:function(e,t,n){"use strict";n.r(t),n.d(t,{acceptGroupInvite:function(){return G},acceptGroupJoinRequest:function(){return F},addUsersToGroupAllowlist:function(){return ye},addUsersToGroupWhitelist:function(){return ge},agreeInviteIntoGroup:function(){return B},agreeJoinGroup:function(){return U},blockGroup:function(){return f},blockGroupMember:function(){return ie},blockGroupMembers:function(){return se},blockGroupMessages:function(){return m},changeGroupOwner:function(){return S},changeOwner:function(){return E},createGroup:function(){return p},createGroupNew:function(){return h},deleteGroupSharedFile:function(){return Me},destroyGroup:function(){return D},disableSendGroupMsg:function(){return fe},dissolveGroup:function(){return M},downloadGroupSharedFile:function(){return xe},enableSendGroupMsg:function(){return me},fetchGroupAnnouncement:function(){return Re},fetchGroupSharedFileList:function(){return De},getGroup:function(){return v},getGroupAdmin:function(){return C},getGroupAllowlist:function(){return Te},getGroupBlacklist:function(){return he},getGroupBlacklistNew:function(){return ue},getGroupBlocklist:function(){return pe},getGroupInfo:function(){return T},getGroupMemberAttributes:function(){return Pe},getGroupMembersAttributes:function(){return je},getGroupMsgReadUser:function(){return we},getGroupMuteList:function(){return te},getGroupMutelist:function(){return ne},getGroupSharedFilelist:function(){return ke},getGroupWhitelist:function(){return Se},getJoinedGroups:function(){return _},getMuted:function(){return ee},getPublicGroups:function(){return y},groupBlockMulti:function(){return oe},groupBlockSingle:function(){return re},inviteToGroup:function(){return L},inviteUsersToGroup:function(){return P},isGroupWhiteUser:function(){return be},isInGroupAllowlist:function(){return Ne},isInGroupMutelist:function(){return Ce},isInGroupWhiteList:function(){return Ie},joinGroup:function(){return j},leaveGroup:function(){return x},listGroupMember:function(){return I},listGroupMembers:function(){return N},listGroups:function(){return g},modifyGroup:function(){return b},mute:function(){return J},muteGroupMember:function(){return X},quitGroup:function(){return k},rejectGroupInvite:function(){return W},rejectGroupJoinRequest:function(){return V},rejectInviteIntoGroup:function(){return H},rejectJoinGroup:function(){return z},removeAdmin:function(){return A},removeGroupAdmin:function(){return O},removeGroupAllowlistMember:function(){return Ee},removeGroupBlockMulti:function(){return le},removeGroupBlockSingle:function(){return ae},removeGroupMember:function(){return q},removeGroupMembers:function(){return Q},removeGroupWhitelistMember:function(){return _e},removeMultiGroupMember:function(){return K},removeMute:function(){return Z},removeSingleGroupMember:function(){return Y},rmUsersFromGroupWhitelist:function(){return ve},setAdmin:function(){return w},setGroupAdmin:function(){return R},setGroupMemberAttributes:function(){return Le},unblockGroupMember:function(){return ce},unblockGroupMembers:function(){return de},unmuteGroupMember:function(){return $},updateGroupAnnouncement:function(){return Ae},uploadGroupSharedFile:function(){return Oe}}),n(1539),n(8674),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948),n(2222),n(6699),n(2023),n(9554),n(4747),n(8309),n(9753),n(9600);var r=n(5531),i=n(7252),o=n(4370),s=n(3246),a=n(7360),c=n(1595);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}var d=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},u=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function h(e){if(!e||!e.data)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups?resource=").concat(h.clientResource),dataType:"json",type:"POST",data:JSON.stringify({owner:this.user,groupname:e.data.groupname,desc:e.data.desc,members:e.data.members,public:e.data.public,approval:e.data.approval,allowinvites:e.data.allowinvites,invite_need_confirm:e.data.inviteNeedConfirm,maxusers:e.data.maxusers,custom:e.data.ext}),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:function(t){e.success&&e.success(t)},error:e.error};return a.kg.debug("Call createGroup:",e),o.hj.call(this,p,c.fI.CREATE_GROUP)}var p=h;function f(e){var t;if("string"!=typeof e.groupId||""===e.groupId)throw Error("Invalid parameter");if(!s.XZ.call(this)){var n=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}var l=this.context,d=l.orgName,u=l.appName,h=l.accessToken,p=l.jid,f={entities:[(t={},t["notification_ignore_"+e.groupId]=!0,t)]},m={type:"PUT",url:"".concat(this.apiUrl,"/").concat(d,"/").concat(u,"/users/").concat(this.user,"?resource=").concat(p.clientResource),data:JSON.stringify(f),dataType:"json",headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call blockGroupMessages",e),o.hj.call(this,m,c.fI.BLOCK_GROUP)}var m=f;function g(e){if("number"!=typeof e.limit)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h={limit:e.limit,cursor:e.cursor};e.cursor||delete h.cursor;var p={url:this.apiUrl+"/"+l+"/"+d+"/publicchatgroups",type:"GET",dataType:"json",data:h,headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call listGroups",e),o.hj.call(this,p,c.fI.LIST_GROUP)}var y=g;function v(e){if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h={url:this.apiUrl+"/"+l+"/"+d+"/users/"+this.user+"/joined_chatgroups",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return a.kg.debug("Call getJoinedGroups",e),o.hj.call(this,h,c.fI.GET_USER_GROUP)}function _(e){if("number"!=typeof e.pageNum||"number"!=typeof e.pageSize)throw Error('Invalid parameter: "pageNum or pageSize"');if(e.pageNum<0||e.pageSize<0)throw Error('"pageNum" should >= 0 and "pageSize" should >= 0');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.needAffiliations||e.needRole?"/chatgroups/user/".concat(this.user,"?pagenum=").concat(e.pageNum,"&pagesize=").concat(e.pageSize,"&needAffiliations=").concat(e.needAffiliations,"&needRole=").concat(e.needRole):"/users/".concat(this.user,"/joined_chatgroups?pagenum=").concat(e.pageNum,"&pagesize=").concat(e.pageSize),p={url:this.apiUrl+"/"+l+"/"+d+h,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return a.kg.debug("Call getGroup",e),o.hj.call(this,p,c.fI.GET_USER_GROUP).then((function(e){var t=e.uri,n=e.entities,r=[];return t.includes("joined_chatgroups")||(n.forEach((function(e){var t={affiliationsCount:e.affiliations_count,groupName:e.name,groupId:e.groupId,role:e.permission,disabled:e.disabled,approval:e.membersonly,allowInvites:e.allowinvites,description:e.description,maxUsers:e.maxusers,public:e.public};r.push(t)})),e.entities=r),e}))}function E(e){if("string"!=typeof e.groupId||"string"!=typeof e.newOwner)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n={newowner:e.newOwner},l=this.context,d=l.orgName,u=l.appName,h=l.accessToken,p=l.jid,f={url:"".concat(this.apiUrl,"/").concat(d,"/").concat(u,"/chatgroups/").concat(e.groupId,"?resource=").concat(p.clientResource),type:"PUT",dataType:"json",headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},data:JSON.stringify(n),success:e.success,error:e.error};return a.kg.debug("Call changeOwner",e),o.hj.call(this,f,c.fI.CHANGE_OWNER)}var S=E;function T(e){if("string"!=typeof e.groupId&&!Array.isArray(e.groupId))throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h={url:this.apiUrl+"/"+l+"/"+d+"/chatgroups/"+e.groupId+"?joined_time=true",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getGroupInfo",e),o.hj.call(this,h,c.fI.GET_GROUP_INFO)}function b(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={groupname:e.groupName,description:e.description,custom:e.ext},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"?resource=").concat(h.clientResource),type:"PUT",data:JSON.stringify(f),dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call modifyGroup",e),o.hj.call(this,m,c.fI.MODIFY_GROUP)}function I(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(isNaN(e.pageNum)||e.pageNum<=0)throw Error('The parameter "pageNum" should be a positive number');if(isNaN(e.pageSize)||e.pageSize<=0)throw Error('The parameter "pageSize" should be a positive number');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n={pagenum:e.pageNum,pagesize:e.pageSize},l=this.context,d=l.orgName,u=l.appName,h=l.accessToken,p={url:this.apiUrl+"/"+d+"/"+u+"/chatgroups/"+e.groupId+"/users",dataType:"json",type:"GET",data:n,headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call listGroupMember",e),o.hj.call(this,p,c.fI.LIST_GROUP_MEMBER)}var N=I;function C(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.groupId,p={url:this.apiUrl+"/"+l+"/"+d+"/chatgroups/"+h+"/admin",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getGroupAdmin",e),o.hj.call(this,p,c.fI.GET_GROUP_ADMIN)}function w(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={newadmin:e.username},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/admin?resource=").concat(h.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call setGroupAdmin",e),o.hj.call(this,m,c.fI.SET_GROUP_ADMIN)}var R=w;function A(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/admin/").concat(f,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeAdmin",e),o.hj.call(this,m,c.fI.REMOVE_GROUP_ADMIN)}var O=A;function M(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"?version=v3&resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call destroyGroup",e),o.hj.call(this,f,c.fI.DISSOLVE_GROUP)}var D=M;function k(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/quit?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call quitGroup",e),o.hj.call(this,f,c.fI.QUIT_GROUP)}var x=k;function L(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=e.groupId,l={usernames:e.users},d=this.context,u=d.orgName,h=d.appName,p=d.accessToken,f=d.jid,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(h,"/chatgroups/").concat(n,"/invite?resource=").concat(f.clientResource),type:"POST",data:JSON.stringify(l),dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call inviteUsersToGroup",e),o.hj.call(this,m,c.fI.INVITE_TO_GROUP)}var P=L;function j(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(e.groupId,"/apply?resource=").concat(h.clientResource),type:"POST",dataType:"json",data:JSON.stringify({message:e.message||""}),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call joinGroup",e),o.hj.call(this,p,c.fI.JOIN_GROUP)}function U(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.applicant||""===e.applicant)throw Error('Invalid parameter: "applicant"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={applicant:e.applicant,verifyResult:!0,reason:"no clue"},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/apply_verify?resource=").concat(h.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call agreeJoinGroup",e),o.hj.call(this,m,c.fI.AGREE_JOIN_GROUP)}var F=U;function z(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.applicant||""===e.applicant)throw Error('Invalid parameter: "applicant"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={applicant:e.applicant,verifyResult:!1,reason:e.reason||""},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/apply_verify?resource=").concat(h.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call rejectGroupJoinRequest",e),o.hj.call(this,m,c.fI.REJECT_JOIN_GROUP)}var V=z;function B(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.invitee||""===e.invitee)throw Error('Invalid parameter: "invitee"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={invitee:e.invitee,verifyResult:!0},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/invite_verify?resource=").concat(h.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call acceptGroupInvite",e),o.hj.call(this,m,c.fI.AGREE_INVITE_GROUP)}var G=B;function H(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.invitee||""===e.invitee)throw Error('Invalid parameter: "invitee"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={invitee:e.invitee,verifyResult:!1},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/invite_verify?resource=").concat(h.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call rejectGroupInvite",e),o.hj.call(this,m,c.fI.REJECT_INVITE_GROUP)}var W=H;function Y(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=e.groupId,l=e.username,d=this.context,u=d.orgName,h=d.appName,p=d.accessToken,f=d.jid,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(h,"/chatgroups/").concat(n,"/users/").concat(l,"?resource=").concat(f.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeGroupMember",e),o.hj.call(this,m,c.fI.REMOVE_GROUP_MEMBER)}var q=Y;function K(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f=e.users.join(","),m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/users/").concat(f,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeGroupMembers",e),o.hj.call(this,m,c.fI.MULTI_REMOVE_GROUP_MEMBER)}var Q=K;function J(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!(Array.isArray(e.username)||"string"==typeof e.username&&""!==e.username))throw Error('Invalid parameter: "username"');if("number"!=typeof e.muteDuration)throw Error('Invalid parameter: "muteDuration"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={usernames:"string"==typeof e.username?[e.username]:e.username,mute_duration:e.muteDuration},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/mute?resource=").concat(h.clientResource),dataType:"json",type:"POST",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},data:JSON.stringify(f),success:e.success,error:e.error};return a.kg.debug("Call muteGroupMember",e),o.hj.call(this,m,c.fI.MUTE_GROUP_MEMBER)}var X=J;function Z(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!(Array.isArray(e.username)||"string"==typeof e.username&&""!==e.username))throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/mute/").concat(f,"?resource=").concat(h.clientResource),dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call unmuteGroupMember",e),o.hj.call(this,m,c.fI.UNMUTE_GROUP_MEMBER)}var $=Z;function ee(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.groupId,p={url:this.apiUrl+"/"+l+"/"+d+"/chatgroups/"+h+"/mute",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getGroupMuteList",e),o.hj.call(this,p,c.fI.GET_GROUP_MUTE_LIST)}var te=ee,ne=ee;function re(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/blocks/users/").concat(f,"?resource=").concat(h.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call blockGroupMember",e),o.hj.call(this,m,c.fI.BLOCK_GROUP_MEMBER)}var ie=re;function oe(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={usernames:e.usernames},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/blocks/users?resource=").concat(h.clientResource),data:JSON.stringify(f),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call blockGroupMembers",e),o.hj.call(this,m,c.fI.BLOCK_GROUP_MEMBERS)}var se=oe;function ae(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/blocks/users/").concat(f,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call unblockGroupMember",e),o.hj.call(this,m,c.fI.UNBLOCK_GROUP_MEMBER)}var ce=ae;function le(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f=e.usernames.join(","),m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/blocks/users/").concat(f,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call unblockGroupMembers",e),o.hj.call(this,m,c.fI.UNBLOCK_GROUP_MEMBERS)}var de=le;function ue(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.groupId,p={url:this.apiUrl+"/"+l+"/"+d+"/chatgroups/"+h+"/blocks/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getGroupBlacklist",e),o.hj.call(this,p,c.fI.GET_GROUP_BLACK_LIST)}var he=ue,pe=ue;function fe(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/ban?resource=").concat(h.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call disableSendGroupMsg",e),o.hj.call(this,f,c.fI.DISABLED_SEND_GROUP_MSG)}function me(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/ban?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call enableSendGroupMsg",e),o.hj.call(this,f,c.fI.ENABLE_SEND_GROUP_MSG)}function ge(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={usernames:e.users},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/white/users?resource=").concat(h.clientResource),type:"POST",data:JSON.stringify(f),dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call addUsersToGroupWhitelist",e),o.hj.call(this,m,c.fI.ADD_USERS_TO_GROUP_WHITE)}var ye=ge;function ve(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/white/users/").concat(e.userName,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeGroupAllowlistMember",e),o.hj.call(this,f,c.fI.REMOVE_GROUP_WHITE_MEMBER)}var _e=ve,Ee=ve;function Se(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.groupId,p={url:this.apiUrl+"/"+l+"/"+d+"/chatgroups/"+h+"/white/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getGroupAllowlist",e),o.hj.call(this,p,c.fI.GET_GROUP_WHITE_LIST)}var Te=Se;function be(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.groupId,p={url:this.apiUrl+"/"+l+"/"+d+"/chatgroups/"+h+"/white/users/"+e.userName,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call isInGroupAllowlist",e),o.hj.call(this,p,c.fI.IS_IN_GROUP_WHITE_LIST)}var Ie=be,Ne=be;function Ce(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "chatRoomId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.orgName,l=n.appName,d=n.accessToken,u=n.userId,h={url:this.apiUrl+"/"+c+"/"+l+"/sdk/group/"+e.groupId+"/mute/"+u,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+d}};return a.kg.debug("Call isInGroupMutelist",e),o.hj.call(this,h).then((function(e){return e.data}))}function we(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.msgId||""===e.msgId)throw Error('Invalid parameter: "msgId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h={url:this.apiUrl+"/"+l+"/"+d+"/chatgroups/"+e.groupId+"/acks/"+e.msgId,dataType:"json",type:"GET",data:{limit:500,key:void 0},headers:{Authorization:"Bearer "+u},success:e.success,error:e.error};return a.kg.debug("Call getGroupMsgReadUser",e),o.hj.call(this,h,c.fI.GET_GROUP_MSG_READ_USER)}function Re(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.groupId,p={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(h,"/announcement"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call fetchGroupAnnouncement",e),o.hj.call(this,p,c.fI.GET_GROUP_ANN)}function Ae(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.announcement)throw Error('Invalid parameter: "announcement"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={announcement:e.announcement},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/announcement?resource=").concat(h.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call updateGroupAnnouncement",e),o.hj.call(this,m,c.fI.UPDATE_GROUP_ANN)}function Oe(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("object"!==l(e.file))throw Error('Invalid parameter: "file"');if(s.XZ.call(this)){var t=this.context,n=t.orgName,r=t.appName,i=t.accessToken,d=t.jid,u=e.groupId;o.cT.call(this,{uploadUrl:"".concat(this.apiUrl,"/").concat(n,"/").concat(r,"/chatgroups/").concat(u,"/share_files?resource=").concat(d.clientResource),onFileUploadProgress:e.onFileUploadProgress,onFileUploadComplete:e.onFileUploadComplete,onFileUploadError:e.onFileUploadError,onFileUploadCanceled:e.onFileUploadCanceled,accessToken:i,apiUrl:this.apiUrl,file:e.file,appKey:this.context.appKey},c.fI.UPLOAD_GROUP_FILE),a.kg.debug("Call uploadGroupSharedFile",e)}}function Me(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.fileId||""===e.fileId)throw Error('Invalid parameter: "file"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f=e.fileId,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/share_files/").concat(f,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call deleteGroupSharedFile",e),o.hj.call(this,m,c.fI.DELETE_GROUP_FILE)}function De(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.pageNum||1,p=e.pageSize||10,f=e.groupId,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(f,"/share_files?pagenum=").concat(h,"&pagesize=").concat(p),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getGroupSharedFilelist",e),o.hj.call(this,m,c.fI.GET_GROUP_FILE_LIST)}var ke=De;function xe(e){var t=this.context,n=t.orgName,r=t.appName,i=t.accessToken,s=this.apiUrl,l=e.groupId,d=e.fileId;o.LR.call(this,{url:"".concat(s,"/").concat(n,"/").concat(r,"/chatgroups/").concat(l,"/share_files/").concat(d),onFileDownloadComplete:e.onFileDownloadComplete,onFileDownloadError:e.onFileDownloadError,accessToken:i,id:d,secret:e.secret},c.fI.DOWN_GROUP_FILE),a.kg.debug("Call downloadGroupSharedFile",e)}function Le(e){return d(this,void 0,void 0,(function(){var t,n,d,h,p,f,m,g,y,v,_;return u(this,(function(u){switch(u.label){case 0:if(t=e.groupId,n=e.userId,d=e.memberAttributes,"string"!=typeof t||""===t)throw Error('Invalid parameter: "groupId"');if("string"!=typeof n||""===n)throw Error('Invalid parameter: "userId"');if("object"!==l(d))throw Error('Invalid parameter: "memberAttributes"');return s.XZ.call(this)?(p=this.context,f=p.orgName,m=p.appName,g=p.accessToken,y=p.jid,v={metaData:d},_={url:"".concat(this.apiUrl,"/").concat(f,"/").concat(m,"/sdk/metadata/chatgroup/").concat(t,"/user/").concat(n,"?resource=").concat(y.clientResource),type:"PUT",dataType:"json",data:JSON.stringify(v),headers:{Authorization:"Bearer "+g,"Content-Type":"application/json"}},a.kg.debug("Call setGroupMemberAttributes",e),[4,o.hj.call(this,_,c.fI.SET_GROUP_MEMBER_ATTRS)]):(h=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(h)]);case 1:return u.sent(),[2]}}))}))}function Pe(e){var t=e.groupId,n=e.userId;return je.call(this,{groupId:t,userIds:[n]}).then((function(e){var t;return{type:e.type,data:null===(t=e.data)||void 0===t?void 0:t[n]}}))}function je(e){var t=e.groupId,n=e.userIds,l=e.keys,d=void 0===l?[]:l;if("string"!=typeof t||""===t)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(n)||(null==n?void 0:n.length)<=0)throw Error('Invalid parameter: "userIds"');if(!Array.isArray(d))throw Error('Invalid parameter: "keys"');if(!s.XZ.call(this)){var u=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(u)}var h=this.context,p=h.orgName,f=h.appName,m=h.accessToken,g={targets:n,properties:d},y={url:"".concat(this.apiUrl,"/").concat(p,"/").concat(f,"/sdk/metadata/chatgroup/").concat(t,"/get"),type:"POST",dataType:"json",data:JSON.stringify(g),headers:{Authorization:"Bearer "+m,"Content-Type":"application/json"}};return a.kg.debug("Call getGroupMembersAttributes",e),o.hj.call(this,y,c.fI.GET_GROUP_MEMBER_ATTR).then((function(e){return{type:e.type,data:(null==e?void 0:e.data)||{}}}))}},7479:function(e,t,n){"use strict";n.r(t),n.d(t,{acceptContactInvite:function(){return B},acceptInvitation:function(){return V},addContact:function(){return U},addReaction:function(){return $},addToBlackList:function(){return W},addUsersToBlacklist:function(){return Y},addUsersToBlocklist:function(){return q},declineContactInvite:function(){return H},declineInvitation:function(){return G},deleteContact:function(){return z},deleteConversation:function(){return A},deleteReaction:function(){return ee},deleteSession:function(){return R},fetchHistoryMessages:function(){return L},fetchUserInfoById:function(){return D},getBlacklist:function(){return E},getBlocklist:function(){return S},getChatToken:function(){return x},getContacts:function(){return b},getConversationlist:function(){return w},getHistoryMessages:function(){return j},getReactionDetail:function(){return re},getReactionList:function(){return te},getReactionlist:function(){return ne},getRoster:function(){return T},getServerConversations:function(){return se},getServerPinnedConversations:function(){return ce},getSessionList:function(){return C},modifyMessage:function(){return Z},pinConversation:function(){return le},recallMessage:function(){return X},removeFromBlackList:function(){return K},removeHistoryMessages:function(){return oe},removeRoster:function(){return F},removeUserFromBlackList:function(){return Q},removeUserFromBlocklist:function(){return J},reportMessage:function(){return ie},updateCurrentUserNick:function(){return k},updateOwnUserInfo:function(){return O},updateUserInfo:function(){return M},uploadPushToken:function(){return N},uploadToken:function(){return I}}),n(9601),n(1539),n(8674),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948),n(9554),n(4747),n(2222),n(7941),n(6699),n(3710),n(9714),n(9600),n(5069),n(561),n(9753),n(8309),n(1249);var r=n(3246),i=n(5531),o=n(7252),s=n(4370),a=n(8161),c=n(4968),l=n(4188),d=n.n(l),u=n(7360),h=n(1595),p=n(4363),f=n(7288),m=n(9743),g=function(){return g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},g.apply(this,arguments)},y=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},v=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},_={chat:"singleChat",chatroom:"chatRoom",groupchat:"groupChat",singleChat:"singleChat",chatRoom:"chatRoom",groupChat:"groupChat"};function E(e){if(!r.XZ.call(this)){var t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d={url:this.apiUrl+"/"+a+"/"+c+"/users/"+this.user+"/blocks/users",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+l},success:function(t){var n={};t.data.forEach((function(e){n[e]={name:e}})),"function"==typeof(null==e?void 0:e.success)&&e.success(t)},error:function(t){"function"==typeof(null==e?void 0:e.error)&&e.error(t)}};return u.kg.debug("Call getBlocklist"),s.hj.call(this,d,h.fI.GET_BLACK_LIST)}var S=E,T=b;function b(e){var t=this;if(!r.XZ.call(this)){var n=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}var a=this.context,c=a.orgName,l=a.appName,d=a.accessToken,p={url:this.apiUrl+"/"+c+"/"+l+"/users/"+this.user+"/contacts/users",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+d},success:function(n){var r=[];n.data.forEach((function(e){r.push({name:e,subscription:"both",jid:t.context.jid})})),"function"==typeof(null==e?void 0:e.success)&&e.success(r)},error:function(t){"function"==typeof(null==e?void 0:e.error)&&e.error(t)}};return u.kg.debug("Call getContacts"),s.hj.call(this,p,h.fI.GET_CONTACTS)}function I(e){if("string"!=typeof e.deviceId||""===e.deviceId)throw Error('Invalid parameter: "deviceId"');if("string"!=typeof e.deviceToken||""===e.deviceToken)throw Error('Invalid parameter: "deviceToken"');if("string"!=typeof e.notifierName||""===e.notifierName)throw Error('Invalid parameter: "notifierName"');if(!r.XZ.call(this)){var t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/users/").concat(this.user),type:"PUT",data:JSON.stringify({device_id:e.deviceId,device_token:e.deviceToken,notifier_name:e.notifierName}),dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"},success:e.success,error:e.error};return u.kg.debug("Call uploadPushToken",e),s.hj.call(this,d,h.fI.UPLOAD_PUSH_TOKEN)}var N=I;function C(e){if(!r.XZ.call(this)){var t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/users/").concat(this.user,"/user_channels"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return u.kg.debug("Call getSessionList"),s.hj.call(this,d,h.fI.GET_SESSION_LIST)}function w(e){if(!r.XZ.call(this)){var t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d=!!(e&&"number"==typeof e.pageNum&&"number"==typeof e.pageSize&&e.pageNum>0&&e.pageSize>0),f={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/users/").concat(this.user,"/user_channels").concat(d?"/page":""),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return d&&(f.data={pageNum:e.pageNum,pageSize:e.pageSize}),u.kg.debug("Call getConversationlist"),s.hj.call(this,f,h.fI.GET_SESSION_LIST).then((function(e){return function(e){var t=e.data.channel_infos;return null==t||t.forEach((function(e){e.meta&&"{}"!==JSON.stringify(e.meta)?(e.meta.payload=JSON.parse(e.meta.payload),e.lastMessage=(0,p.w)(e.meta)):e.lastMessage=e.meta,delete e.meta})),e}(e)}))}function R(e){if(e&&"string"!=typeof e.channel)throw Error("Invalid parameter channel: ".concat(e.channel));if(e&&"singleChat"!==e.chatType&&"groupChat"!==e.chatType)throw Error("Invalid parameter chatType: ".concat(e.chatType));if(e&&"boolean"!=typeof e.deleteRoam)throw Error("Invalid parameter deleteRoam: ".concat(e.deleteRoam));if(!r.XZ.call(this)){var t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n,a=this.context,c=a.orgName,l=a.appName,d=a.accessToken,p=a.jid;n="singleChat"===e.chatType?"chat":"groupChat";var f={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/user/").concat(this.user,"/user_channel?resource=").concat(p.clientResource),dataType:"json",type:"DELETE",data:JSON.stringify({channel:e.channel,type:n,delete_roam:e.deleteRoam}),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return u.kg.debug("Call deleteSession",e),s.hj.call(this,f,h.fI.DELETE_SESSION)}var A=R;function O(e,t){if(!r.XZ.call(this)){var n=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}var a=this.context,c=a.orgName,l=a.appName,d=a.accessToken,p=["nickname","avatarurl","mail","phone","gender","sign","birth","ext"],f={};if("wx"===s.P6.getEnvInfo().platform)if("string"==typeof e&&void 0!==t){if(!p.includes(e))throw new Error("illegal key, only these keys: nickname, avatarurl, mail, phone, gender, sign, birth, ext are allowed");f[e]=t}else{if("[object Object]"!==Object.prototype.toString.call(e))throw new Error("illegal params");p.forEach((function(t){p.includes(t)&&void 0!==e[t]&&(f[t]=e[t])}))}else if("string"==typeof e){if(!p.includes(e))throw new Error("illegal key, only these keys: nickname, avatarurl, mail, phone, gender, sign, birth, ext are allowed");f=e+"="+t}else{if("[object Object]"!==Object.prototype.toString.call(e))throw new Error("illegal params");var m=[];p.forEach((function(t){if(p.includes(t)&&void 0!==e[t]){var n=encodeURIComponent(t),r=encodeURIComponent(e[t]);m.push(n+"="+r)}})),f=m.join("&")}var g={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/metadata/user/").concat(this.user),type:"PUT",data:f,dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/x-www-form-urlencoded"}};return u.kg.debug("Call updateOwnUserInfo",e),s.hj.call(this,g,h.fI.UPDATE_USER_INFO)}var M=O;function D(e,t){if(!r.XZ.call(this)){var n=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}var a,c=this.context,l=c.orgName,d=c.appName,p=c.accessToken,f=[];if("string"==typeof e)f=[e];else{if("[object Array]"!==Object.prototype.toString.call(e))throw new Error("illegal params");f=e}a="string"==typeof t?[t]:t&&"[object Array]"===Object.prototype.toString.call(t)?t:["nickname","avatarurl","mail","phone","gender","sign","birth","ext"];var m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/metadata/user/get"),type:"POST",data:JSON.stringify({targets:f,properties:a}),dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"}};return u.kg.debug("Call fetchUserInfoById",e),s.hj.call(this,m,h.fI.GET_USER_INFO)}function k(e){if(!r.XZ.call(this)){var t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/users/").concat(this.user),type:"PUT",dataType:"json",data:JSON.stringify({nickname:e}),headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return u.kg.debug("Call updateCurrentUserNick",e),s.hj.call(this,d)}function x(e){if("string"!=typeof e||""===e)throw Error('Invalid parameter: "agoraToken"');var t=this.context,n=t.orgName,r=t.appName,i={url:this.apiUrl+"/"+n+"/"+r+"/token",dataType:"json",type:"POST",data:JSON.stringify({grant_type:"agora"}),headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}};return u.kg.debug("Call getChatToken",e),s.hj.call(this,i,h.fI.SDK_INTERNAL)}function L(e){var t=this;return new Promise((function(n,s){if(!e.queue)throw Error('Invalid parameter: "specified"');if(!r.XZ.call(t)){var a=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(a)}(function e(t){var r=this,i=t.count||20;P.call(this,{count:i,isGroup:!!t.isGroup,queue:t.queue,start:t.start,format:t.format,success:function(o){if(o.msgs.length>=i||o.is_last){var s=o.msgs.splice(0,i).reverse();t.success&&t.success(s),n(s)}else e.call(r,g(g({},t),{start:null}))},fail:function(e){s(e),t.fail&&t.fail(e)}})}).call(t,e),u.kg.debug("Call fetchHistoryMessages",e)}))}function P(e){var t=this,n=e.queue,r=this.mr_cache[n]||(this.mr_cache[n]={msgs:[]}),c=this.context.userId,l=e.start||-1,u=e.count||20;if(r.msgs.length>=u||r.is_last)"function"==typeof e.success&&e.success(r);else{r&&r.next_key&&(l=r.next_key),e.start&&(l=e.start);var p={queue:n+(e.isGroup?"@conference.easemob.com":"@easemob.com"),start:l,end:-1},f=this.context,m=f.orgName,g=f.appName,_={url:"".concat(this.apiUrl,"/").concat(m,"/").concat(g,"/users/").concat(c,"/messageroaming"),dataType:"json",type:"POST",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"},data:JSON.stringify(p),success:function(n){return y(t,void 0,void 0,(function(){var t,i,o,s,c,l,u=this;return v(this,(function(h){switch(h.label){case 0:if(t=null==n?void 0:n.data,!n.data.msgs)return"function"==typeof e.success&&e.success(r),r.is_last=!0,r.next_key="",[2];i=t.msgs,o=i.length,r.is_last=t.is_last,r.next_key=t.next_key,s=function(t){return y(u,void 0,void 0,(function(){var n,r,i,o,s;return v(this,(function(c){switch(c.label){case 0:for(n=[],t=d().atob(t),r=0,i=t.length;r<i;++r)n.push(t.charCodeAt(r));return o=(o=this.context.root.lookup("easemob.pb.Meta")).decode(n),s={errorCode:0,reason:""},1!==o.ns?[3,2]:[4,a.Z.call(this,o,s,!0,e.format)];case 1:return[2,c.sent()];case 2:return[2]}}))}))},c=0,h.label=1;case 1:return c<o?[4,s(i[c].msg)]:[3,4];case 2:(l=h.sent())&&r.msgs.push(l),h.label=3;case 3:return c++,[3,1];case 4:return"function"==typeof e.success&&e.success(r),[2]}}))}))},error:function(e){if(e.error&&e.error_description){var n=o.Z.create({type:i.E.WEBIM_CONNCTION_AJAX_ERROR,message:"fetch history messages error",data:e});t.onError&&t.onError(n)}}};s.hj.call(this,_,h.fI.GET_HISTORY_MSG).catch((function(t){"function"==typeof e.fail&&e.fail(t)}))}}function j(e){var t=this;return new Promise((function(n,c){var l=e.targetId,h=e.cursor,p=void 0===h?-1:h,f=e.pageSize,m=void 0===f?20:f,g=e.chatType,_=e.searchDirection,E=e.searchOptions,S=void 0===E?{}:E,T=S.msgTypes,b=void 0===T?[]:T,I=S.startTime,N=void 0===I?null:I,C=S.endTime,w=void 0===C?null:C,R=S.from,A=void 0===R?null:R;if("string"!=typeof l||""===l)throw Error('"Invalid parameter": "targetId"');if(A&&"string"!=typeof A)throw Error('"Invalid parameter": "searchOptions.from"');if(b&&!Array.isArray(b))throw Error('"Invalid parameter": "searchOptions.msgTypes"');if(N&&"number"!=typeof N)throw Error('"Invalid parameter": "searchOptions.startTime"');if(w&&"number"!=typeof N)throw Error('"Invalid parameter": "searchOptions.endTime"');if(!r.XZ.call(t)){var O=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return c(O)}var M=t.context,D=M.orgName,k=M.appName,x=M.userId,L="groupChat"===e.chatType?"@conference.easemob.com":"@easemob.com",P={queue:"".concat(l).concat(L),start:p,pull_number:m,is_positive:"down"===_,msgType:b.join(",")||"",end:-1,startTime:N,endTime:w,userId:"singleChat"===g?null:A},j={url:"".concat(t.apiUrl,"/").concat(D,"/").concat(k,"/users/").concat(x,"/messageroaming"),dataType:"json",type:"POST",headers:{Authorization:"Bearer "+t.token,"Content-Type":"application/json"},data:JSON.stringify(P),success:function(r){return y(t,void 0,void 0,(function(){var t,i,o,s,c,l,u,h,p=this;return v(this,(function(f){switch(f.label){case 0:t=null==r?void 0:r.data,i=t.msgs||[],o=function(e){return y(p,void 0,void 0,(function(){var t,n,r,i,o;return v(this,(function(s){switch(s.label){case 0:for(t=[],e=d().atob(e),n=0,r=e.length;n<r;++n)t.push(e.charCodeAt(n));return i=(i=this.context.root.lookup("easemob.pb.Meta")).decode(t),o={errorCode:0,reason:""},1!==i.ns?[3,2]:[4,a.Z.call(this,i,o,!0,!0)];case 1:return[2,s.sent()];case 2:return[2]}}))}))},s=[],c=0,f.label=1;case 1:return c<i.length?[4,o(i[c].msg)]:[3,4];case 2:(l=f.sent())&&s.push(l),f.label=3;case 3:return c++,[3,1];case 4:return t.msgs=s,u={cursor:t.next_key,messages:s,isLast:t.is_last},null===(h=e.success)||void 0===h||h.call(e,u),n(u),[2]}}))}))},error:e.fail};s.hj.call(t,j).catch((function(e){c(e)})),u.kg.debug("Call getHistoryMessages",e)}))}function U(e,t){var n=this;return new Promise((function(r,i){var o={id:n.getUniqueId(),to:e,message:t};c.Z.operatRoster.call(n,o,"add",r,i),u.kg.debug("Call addContact",o)}))}var F=z;function z(e){var t=this;return new Promise((function(n,r){var i={id:t.getUniqueId(),to:e};c.Z.operatRoster.call(t,i,"remove",n,r),u.kg.debug("Call deleteContact",i)}))}function V(e){var t=this;return new Promise((function(n,r){var i={id:t.getUniqueId(),to:e};c.Z.operatRoster.call(t,i,"accept",n,r),u.kg.debug("Call acceptInvitation",i)}))}var B=V;function G(e){var t=this;return new Promise((function(n,r){var i={id:t.getUniqueId(),to:e};c.Z.operatRoster.call(t,i,"decline",n,r),u.kg.debug("Call declineContactInvite",i)}))}var H=G;function W(e){var t=this;return new Promise((function(n,r){c.Z.operatRoster.call(t,{to:e.name},"ban",n,r),u.kg.debug("Call addUsersToBlocklist",e)}))}var Y=W,q=W;function K(e){var t=this;return new Promise((function(n,r){c.Z.operatRoster.call(t,{to:e.name},"allow",n,r),u.kg.debug("Call removeUserFromBlocklist",e)}))}var Q=K,J=K;function X(e){var t=this,n=this.getUniqueId(),r={id:n,to:e.to};this._msgHash[n]=g({},r);var i="";void 0!==e.chatType?i=e.chatType:void 0!==e.type&&(i="chat"===e.type?"singleChat":e.type);var o={id:n,type:"recall",chatType:i,ackId:e.mid,to:e.to,isChatThread:e.isChatThread||!1,success:function(n){return y(t,void 0,void 0,(function(){var t,r,o,s,a,c,l,d,u;return v(this,(function(h){switch(h.label){case 0:return h.trys.push([0,5,,6]),"singleChat"!==i&&"groupChat"!==i?[3,4]:[4,null===(o=null===(r=this._localCache)||void 0===r?void 0:r.getInstance())||void 0===o?void 0:o.removeMsgByServerMsgId(e.mid)];case 1:return h.sent(),[4,null===(a=null===(s=this._localCache)||void 0===s?void 0:s.getInstance())||void 0===a?void 0:a.getConversationLastMessage(e.to,i)];case 2:return t=h.sent(),[4,null===(l=null===(c=this._localCache)||void 0===c?void 0:c.getInstance())||void 0===l?void 0:l.updateLocalConversation((0,m.MQ)({conversationId:e.to,conversationType:i}),{lastMessageId:null==t?void 0:t.serverMsgId})];case 3:h.sent(),h.label=4;case 4:return null===(d=null==e?void 0:e.success)||void 0===d||d.call(e,n),[3,6];case 5:return h.sent(),null===(u=null==e?void 0:e.success)||void 0===u||u.call(e,n),[3,6];case 6:return[2]}}))}))},fail:e.fail};return u.kg.debug("Call recallMessage",e),this.mSync.send(o,this)}function Z(e){var t=e||{},n=t.messageId,r=t.modifiedMessage;if(u.kg.debug("Call modifyMessage",n,r),""===n)throw Error('Invalid parameter: "messageId"');if("txt"!==r.type)throw Error('Invalid parameter: "modifiedMessage.type"');return this.mSync.send(g({editMessageId:n},r))}function $(e){return y(this,void 0,void 0,(function(){var t,n,a,c,l,d,u,h,p;return v(this,(function(f){switch(f.label){case 0:if("string"!=typeof e.messageId||!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if("string"!=typeof e.reaction||!e.reaction)throw Error("Invalid parameter reaction: ".concat(e.reaction));return r.XZ.call(this)?(n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d=e.reaction,u=e.messageId,h={msgId:u,message:d},p={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/reaction/user/").concat(this.user),type:"POST",data:JSON.stringify(h),dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}},[4,s.hj.call(this,p)]):(t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return f.sent(),[2]}}))}))}function ee(e){return y(this,void 0,void 0,(function(){var t,n,a,c,l,d,u,h;return v(this,(function(p){switch(p.label){case 0:if("string"!=typeof e.reaction||!e.reaction)throw Error("Invalid parameter reactionId: ".concat(e.reaction));return r.XZ.call(this)?(n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d=e.messageId,u=e.reaction,h={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/reaction/user/").concat(this.user,"?msgId=").concat(d,"&message=").concat(u),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}},[4,s.hj.call(this,h)]):(t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return p.sent(),[2]}}))}))}function te(e){if("string"!=typeof e.chatType||!e.chatType)throw Error("Invalid parameter chatType: ".concat(e.chatType));if(!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if(!r.XZ.call(this)){var t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d=e.chatType,u=e.messageId,h={msgIdList:"string"==typeof u?[u]:u,msgType:"singleChat"===d?"chat":"groupchat",groupId:e.groupId||null},p={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/reaction/user/").concat(this.user),type:"GET",data:h,dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return s.hj.call(this,p).then((function(e){var t=e.data;return null==t||t.forEach((function(e){null==e||e.reactionList.forEach((function(e){e.isAddedBySelf=e.state,delete e.state,delete e.reactionId}))})),e}))}var ne=te;function re(e){if("string"!=typeof e.reaction||!e.reaction)throw Error("Invalid parameter reaction: ".concat(e.reaction));if("string"!=typeof e.messageId||!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if(!r.XZ.call(this)){var t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d=e.cursor,u=e.pageSize,h={msgId:e.messageId,message:e.reaction,currentPage:d||null,pageSize:u||20},p={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/reaction/user/").concat(this.user,"/detail"),type:"GET",data:h,dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return s.hj.call(this,p).then((function(e){return e.data.isAddedBySelf=e.data.state,delete e.data.state,delete e.data.reactionId,e}))}function ie(e){return y(this,void 0,void 0,(function(){var t,n,a,c,l,d,u,h,p,f,m;return v(this,(function(g){switch(g.label){case 0:if("string"!=typeof e.reportType||!e.reportType)throw Error("Invalid parameter reportType: ".concat(e.reportType));if("string"!=typeof e.messageId||!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if("string"!=typeof e.reportReason||!e.reportReason)throw Error("Invalid parameter messageId: ".concat(e.reportReason));return r.XZ.call(this)?(n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d=e.reportType,u=e.reportReason,h=e.messageId,p={username:this.user,reportType:d,reportReason:u},f="".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/user/").concat(this.user,"/moderation/report/message/").concat(h),m={url:f,type:"POST",data:JSON.stringify(p),dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}},[4,s.hj.call(this,m)]):(t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return g.sent(),[2]}}))}))}function oe(e){var t;return y(this,void 0,void 0,(function(){var n,a,c,l,d,h,p,f,m;return v(this,(function(g){switch(g.label){case 0:if("string"!=typeof e.targetId||""===e.targetId)throw Error('"Invalid parameter targetId": '+e.targetId);if(!["singleChat","groupChat"].includes(e.chatType))throw Error('"Invalid parameter chatType": '+e.chatType);if(e.beforeTimeStamp&&("number"!=typeof e.beforeTimeStamp||e.beforeTimeStamp<0||(null===(t=e.beforeTimeStamp)||void 0===t?void 0:t.toString().length)>18))throw Error('"Invalid parameter beforeTimeStamp": '+e.beforeTimeStamp);if(e.messageIds&&!(Array.isArray(e.messageIds)&&e.messageIds.length>0&&e.messageIds.length<=20))throw Error('"Invalid parameter messageIds": '+e.messageIds);if(!e.messageIds&&!e.beforeTimeStamp)throw Error("messageIds or beforeTimeStamp field is required.");return r.XZ.call(this)?(a=this.context,c=a.orgName,l=a.appName,d=a.userId,h="singleChat"===e.chatType?"userId":"groupId",p="singleChat"===e.chatType?"chat":"group",f=e.messageIds?"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/sdk/message/roaming/").concat(p,"/user/").concat(d,"?").concat(h,"=").concat(e.targetId,"&msgIdList=").concat(e.messageIds,"&resource=").concat(this.clientResource):"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/sdk/message/roaming/").concat(p,"/user/").concat(d,"/time?").concat(h,"=").concat(e.targetId,"&delTime=").concat(e.beforeTimeStamp,"&&resource=").concat(this.clientResource),m={url:f,dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}},u.kg.debug("Call removeHistoryMessages",e),[4,s.hj.call(this,m)]):(n=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(n)]);case 1:return g.sent(),[2]}}))}))}function se(e){var t=this;if(!r.XZ.call(this)){var n=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}if((null==e?void 0:e.pageSize)&&"number"!=typeof e.pageSize)throw Error("Invalid parameter pageSize: ".concat(e.pageSize));if((null==e?void 0:e.cursor)&&"string"!=typeof e.cursor)throw Error("Invalid parameter cursor: ".concat(e.cursor));var a=this.context,c=a.orgName,l=a.appName,d=a.accessToken,p={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/sdk/user/").concat(this.user,"/user_channels/list?"),type:"GET",dataType:"json",data:{limit:(null==e?void 0:e.pageSize)||20,cursor:(null==e?void 0:e.cursor)||""},headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};return u.kg.debug("Call getServerConversations",e),new Promise((function(e,n){s.hj.call(t,p,h.fI.GET_SESSION_LIST).then((function(n){return y(t,void 0,void 0,(function(){var t,r=this;return v(this,(function(i){switch(i.label){case 0:return t=ae(n),this._localCache?[4,Promise.all(t.data.conversations.map((function(e){return y(r,void 0,void 0,(function(){var t,n,r=this;return v(this,(function(i){return null===(n=null===(t=this._localCache)||void 0===t?void 0:t.getInstance())||void 0===n||n.storeMessage(e.lastMessage,f.r.SUCCESS,!0).then((function(){var t,n;null===(n=null===(t=r._localCache)||void 0===t?void 0:t.getInstance())||void 0===n||n.updateLocalConversation((0,m.MQ)({conversationId:e.conversationId,conversationType:e.conversationType}),{unReadCount:e.unReadCount})})),[2]}))}))})))]:[3,2];case 1:return i.sent(),e(t),[2];case 2:return e(t),[2]}}))}))})).catch((function(e){n(e)}))}))}function ae(e){var t=e.data,n=t.cursor,r=t.channel_infos,i=[];null==r||r.forEach((function(e){var t=null;(null==e?void 0:e.meta)&&"{}"!==JSON.stringify(e.meta)&&(e.meta.payload=JSON.parse(e.meta.payload),"delivery"!==(t=(0,p.w)(e.meta)).type&&"read"!==t.type&&"channel"!==t.type&&(t.chatType=_[t.chatType]));var n={conversationId:e.session_to,conversationType:"chat"===e.session_type?"singleChat":"groupChat",isPinned:e.is_top,pinnedTime:e.is_top?e.update_top_status_time:0,unReadCount:e.unread_num,lastMessage:t};i.push(n)}));var o={conversations:i,cursor:n||""};return{type:e.type,data:o}}function ce(e){if(!r.XZ.call(this)){var t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}if((null==e?void 0:e.pageSize)&&"number"!=typeof e.pageSize)throw Error("Invalid parameter pageSize: ".concat(e.pageSize));if((null==e?void 0:e.cursor)&&"string"!=typeof e.cursor)throw Error("Invalid parameter cursor: ".concat(e.cursor));var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/sdk/user/").concat(this.user,"/user_channels/list?"),type:"GET",dataType:"json",data:{limit:(null==e?void 0:e.pageSize)||20,cursor:(null==e?void 0:e.cursor)||"",is_top:!0},headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return u.kg.debug("Call getServerConversations",e),s.hj.call(this,d,h.fI.GET_SESSION_LIST).then((function(e){return ae(e)}))}function le(e){return y(this,void 0,void 0,(function(){var t,n,a,c,l,d,p,f,m,g,y,_,E,S;return v(this,(function(v){if(!r.XZ.call(this))return t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)];if(n=e.conversationId,a=e.conversationType,c=e.isPinned,l="singleChat"===a?"chat":"groupChat","string"!=typeof n||""===n)throw Error("Invalid parameter conversationId: ".concat(n));if(!["singleChat","groupChat"].includes(a))throw Error("Invalid parameter conversationType: ".concat(a));if("boolean"!=typeof c)throw Error("Invalid parameter isPinned: ".concat(c));return d=this.context,p=d.orgName,f=d.appName,m=d.accessToken,g=d.jid,y={type:l,to:n},_=c?"":"type=".concat(l,"&to=").concat(n,"&"),E="".concat(this.apiUrl,"/").concat(p,"/").concat(f,"/sdk/user/").concat(this.user,"/user_channel/top?").concat(_,"resource=").concat(g.clientResource),S={url:E,type:c?"POST":"DELETE",dataType:"json",headers:{Authorization:"Bearer "+m,"Content-Type":"application/json"}},c&&(S.data=JSON.stringify(y)),u.kg.debug("Call pinConversation",e),[2,s.hj.call(this,S,h.fI.PIN_CONVERSATION).then((function(e){var t=e.type,n=e.data;return{type:t,data:{isPinned:n.is_top||!1,pinnedTime:n.is_top?n.update_top_status_time:0}}}))]}))}))}},3770:function(e,t,n){"use strict";n.r(t),n.d(t,{getPresenceStatus:function(){return m},getSubscribedPresenceList:function(){return p},getSubscribedPresencelist:function(){return f},publishPresence:function(){return d},subscribePresence:function(){return u},unsubscribePresence:function(){return h}}),n(1539),n(8674),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948),n(2222),n(9753);var r=n(4370),i=n(3246),o=n(7252),s=n(5531),a=n(7360),c=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function d(e){return c(this,void 0,void 0,(function(){var t,n,c,d,u,h,p,f,m;return l(this,(function(l){switch(l.label){case 0:if("string"!=typeof e.description)throw Error('Invalid parameter: "description"');return i.XZ.call(this)?(n=this.context,c=n.accessToken,d=n.orgName,u=n.appName,h=n.userId,p=this.context.jid.clientResource,f={ext:e.description},m={url:"".concat(this.apiUrl,"/").concat(d,"/").concat(u,"/users/").concat(h,"/presence/").concat(p,"/1"),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:e.success,error:e.error},a.kg.debug("Call publishPresence:",e),[4,r.hj.call(this,m)]):(t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return l.sent(),[2]}}))}))}function u(e){if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!e.usernames.length)throw Error('"usernames" can not be empty');if("number"!=typeof e.expiry)throw Error('Invalid parameter: "expiry"');if(!i.XZ.call(this)){var t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.orgName,l=n.appName,d=n.userId,u=n.accessToken,h={usernames:e.usernames},p={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/users/").concat(d,"/presence/").concat(e.expiry),type:"POST",dataType:"json",data:JSON.stringify(h),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call subscribePresence:",e),r.hj.call(this,p).then((function(e){return e.data={result:null==e?void 0:e.result},e}))}function h(e){return c(this,void 0,void 0,(function(){var t,n,c,d,u,h,p;return l(this,(function(l){switch(l.label){case 0:if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!e.usernames.length)throw Error('"usernames" can not be empty');return i.XZ.call(this)?(n=this.context,c=n.orgName,d=n.appName,u=n.userId,h=n.accessToken,p={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(d,"/users/").concat(u,"/presence"),type:"DELETE",dataType:"json",data:JSON.stringify(e.usernames),headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error},a.kg.debug("Call unsubscribePresence:",e),[4,r.hj.call(this,p)]):(t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return l.sent(),[2]}}))}))}function p(e){if("number"!=typeof e.pageNum||"number"!=typeof e.pageSize)throw Error('Invalid parameter: "pageNum or pageSize"');if(e.pageNum<0||e.pageSize<0)throw Error('"pageNum" should >= 0 and "pageSize" should >= 0');if(!i.XZ.call(this)){var t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.orgName,l=n.appName,d=n.userId,u=n.accessToken,h={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/users/").concat(d,"/presence/sublist?pageNum=").concat(e.pageNum,"&pageSize=").concat(e.pageSize),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getSubscribedPresenceList:",e),r.hj.call(this,h).then((function(e){return e.data={result:null==e?void 0:e.result},e}))}var f=p;function m(e){if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!e.usernames.length)throw Error('"usernames" can not be empty');if(!i.XZ.call(this)){var t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n={usernames:e.usernames},c=this.context,l=c.orgName,d=c.appName,u=c.userId,h=c.accessToken,p={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/users/").concat(u,"/presence"),type:"POST",dataType:"json",data:JSON.stringify(n),headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getPresenceStatus:",e),r.hj.call(this,p).then((function(e){return e.data={result:null==e?void 0:e.result},e}))}},1735:function(e,t,n){"use strict";n.r(t),n.d(t,{clearRemindTypeForConversation:function(){return u},getPushPerformLanguage:function(){return m},getSilentModeForAll:function(){return l},getSilentModeForConversation:function(){return h},getSilentModeForConversations:function(){return p},setPushPerformLanguage:function(){return f},setSilentModeForAll:function(){return c},setSilentModeForConversation:function(){return d}}),n(7941),n(1539),n(8674),n(2222),n(9753),n(9554),n(4747),n(9600);var r=n(4370),i=n(3246),o=n(7252),s=n(5531),a=n(7360);function c(e){if(!(e.options instanceof Object))throw Error('Invalid parameter: "options"');var t=e.options.paramType;if("number"!=typeof t||t<0||t>2)throw Error('Invalid parameter: "options of paramType"');if(0===t){if("string"!=typeof e.options.remindType)throw Error('Invalid parameter: "options of remindType"')}else if(1===t){if("number"!=typeof e.options.duration)throw Error('Invalid parameter: "options of duration"')}else if(2===t){var n=e.options,c=n.startTime,l=n.endTime;if(!(c instanceof Object&&Object.keys(c).length))throw Error('Invalid parameter: "options of startTime"');if(!c.hours||"number"!=typeof c.hours||!c.minutes||"number"!=typeof c.minutes)throw Error('Invalid parameter: "options of startTime of hours or minutes"');if(!(l instanceof Object&&Object.keys(l).length))throw Error('Invalid parameter: "options of endTime"');if(!l.hours||"number"!=typeof l.hours||!l.minutes||"number"!=typeof l.minutes)throw Error('Invalid parameter: "options of endTime of hours or minutes"')}if(!i.XZ.call(this)){var d=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(d)}var u=this.context,h=u.accessToken,p=u.orgName,f=u.appName,m=u.userId,g={};switch(t){case 0:g={type:e.options.remindType};break;case 1:g={ignoreDuration:e.options.duration};break;case 2:var y=e.options;c=y.startTime,l=y.endTime,g={ignoreInterval:"".concat(c.hours,":").concat(c.minutes,"-").concat(l.hours,":").concat(l.minutes)}}var v={url:"".concat(this.apiUrl,"/").concat(p,"/").concat(f,"/users/").concat(m,"/notification/user/").concat(m),type:"PUT",dataType:"json",data:JSON.stringify(g),headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call setSilentModeForAll:",e),r.hj.call(this,v)}function l(e){if(!i.XZ.call(this)){var t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.accessToken,l=n.orgName,d=n.appName,u=n.userId,h={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/users/").concat(u,"/notification/user/").concat(u),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:null==e?void 0:e.success,error:null==e?void 0:e.error};return a.kg.debug("Call getSilentModeForAll:",e),r.hj.call(this,h)}function d(e){if("string"!=typeof e.conversationId||!e.conversationId)throw Error('Invalid parameter: "conversationId"');if("string"!=typeof e.type||!e.type)throw Error('Invalid parameter: "type"');if(!(e.options instanceof Object))throw Error('Invalid parameter: "options"');var t=e.options.paramType;if("number"!=typeof t||t<0||t>2)throw Error('Invalid parameter: "options of paramType"');if(0===t){if("string"!=typeof e.options.remindType)throw Error('Invalid parameter: "options of remindType"')}else if(1===t){if("number"!=typeof e.options.duration)throw Error('Invalid parameter: "options of duration"')}else if(2===t){var n=e.options,c=n.startTime,l=n.endTime;if(!(c instanceof Object&&Object.keys(c).length))throw Error('Invalid parameter: "options of startTime"');if(!c.hours||"number"!=typeof c.hours||!c.minutes||"number"!=typeof c.minutes)throw Error('Invalid parameter: "options of startTime of hours or minutes"');if(!(l instanceof Object&&Object.keys(l).length))throw Error('Invalid parameter: "options of endTime"');if(!l.hours||"number"!=typeof l.hours||!l.minutes||"number"!=typeof l.minutes)throw Error('Invalid parameter: "options of endTime of hours or minutes"')}if(!i.XZ.call(this)){var d=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(d)}var u=this.context,h=u.accessToken,p=u.orgName,f=u.appName,m=u.userId,g="chatgroup",y={};switch(t){case 0:y={type:e.options.remindType};break;case 1:y={ignoreDuration:e.options.duration};break;case 2:var v=e.options;c=v.startTime,l=v.endTime,y={ignoreInterval:"".concat(c.hours,":").concat(c.minutes,"-").concat(l.hours,":").concat(l.minutes)}}"singleChat"===e.type&&(g="user");var _={url:"".concat(this.apiUrl,"/").concat(p,"/").concat(f,"/users/").concat(m,"/notification/").concat(g,"/").concat(e.conversationId),type:"PUT",dataType:"json",data:JSON.stringify(y),headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call setSilentModeForConversation:",e),r.hj.call(this,_)}function u(e){if("string"!=typeof e.conversationId||!e.conversationId)throw Error('Invalid parameter: "conversationId"');if("string"!=typeof e.type||!e.type)throw Error('Invalid parameter: "type"');if(!i.XZ.call(this)){var t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.accessToken,l=n.orgName,d=n.appName,u=n.userId,h="chatgroup";"singleChat"===e.type&&(h="user");var p={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/users/").concat(u,"/notification/").concat(h,"/").concat(e.conversationId),type:"PUT",dataType:"json",data:JSON.stringify({type:"DEFAULT"}),headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call clearRemindTypeForConversation:",e),r.hj.call(this,p)}function h(e){if("string"!=typeof e.conversationId||!e.conversationId)throw Error('Invalid parameter: "conversationId"');if("string"!=typeof e.type||!e.type)throw Error('Invalid parameter: "type"');if(!i.XZ.call(this)){var t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.accessToken,l=n.orgName,d=n.appName,u=n.userId,h="chatgroup";"singleChat"===e.type&&(h="user");var p={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/users/").concat(u,"/notification/").concat(h,"/").concat(e.conversationId),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getSilentModeForConversation:",e),r.hj.call(this,p)}function p(e){if(!Array.isArray(e.conversationList))throw Error('Invalid parameter: "conversationList"');if(!i.XZ.call(this)){var t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.accessToken,l=n.orgName,d=n.appName,u=n.userId,h=[],p=[];e.conversationList.forEach((function(e){"singleChat"===e.type?h.push(e.id):p.push(e.id)}));var f=h.length?h.join(","):"",m=p.length?p.join(","):"",g={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/users/").concat(u,"/notification?user=").concat(f,"&group=").concat(m),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getSilentModeForConversations:",e),r.hj.call(this,g)}function f(e){if("string"!=typeof e.language||!e.language)throw Error('Invalid parameter: "language"');if(!i.XZ.call(this)){var t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n={translationLanguage:e.language},c=this.context,l=c.accessToken,d=c.orgName,u=c.appName,h=c.userId,p={url:"".concat(this.apiUrl,"/").concat(d,"/").concat(u,"/users/").concat(h,"/notification/language"),type:"PUT",dataType:"json",data:JSON.stringify(n),headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call setPushPerformLanguage:",e),r.hj.call(this,p)}function m(e){if(!i.XZ.call(this)){var t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.accessToken,l=n.orgName,d=n.appName,u=n.userId,h={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/users/").concat(u,"/notification/language"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:null==e?void 0:e.success,error:null==e?void 0:e.error};return a.kg.debug("Call getPushPerformLanguage:",e),r.hj.call(this,h)}},7384:function(e,t,n){"use strict";n.r(t),n.d(t,{changeChatThreadName:function(){return f},createChatThread:function(){return d},destroyChatThread:function(){return p},getChatThreadDetail:function(){return E},getChatThreadLastMessage:function(){return _},getChatThreadMembers:function(){return m},getChatThreads:function(){return v},getJoinedChatThreads:function(){return y},joinChatThread:function(){return u},leaveChatThread:function(){return h},removeChatThreadMember:function(){return g}}),n(1539),n(8674),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948),n(8309),n(2222),n(9554),n(4747),n(9753);var r=n(5531),i=n(7252),o=n(4370),s=n(3246),a=n(4363),c=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function d(e){if("string"!=typeof e.name||""===e.name)throw Error("Invalid parameter name: ".concat(e.name));if("string"!=typeof e.messageId||""===e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if("string"!=typeof e.parentId||""===e.parentId)throw Error("Invalid parameter parentId: ".concat(e.parentId));if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d=n.jid,u={name:e.name,msg_id:e.messageId,group_id:e.parentId,owner:this.user},h={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread?resource=").concat(d.clientResource),type:"POST",dataType:"json",data:JSON.stringify(u),headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return o.hj.call(this,h).then((function(e){var t=e.data.thread_id;return e.data={chatThreadId:t},e}))}function u(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d=n.jid,u={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread/").concat(e.chatThreadId,"/user/").concat(this.user,"/join?resource=").concat(d.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return o.hj.call(this,u).then((function(e){var t=e.data.detail;return t.messageId=t.msgId,t.parentId=t.groupId,delete t.msgId,delete t.groupId,e}))}function h(e){return c(this,void 0,void 0,(function(){var t,n,a,c,d,u,h;return l(this,(function(l){switch(l.label){case 0:if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));return s.XZ.call(this)?(n=this.context,a=n.orgName,c=n.appName,d=n.accessToken,u=n.jid,h={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread/").concat(e.chatThreadId,"/user/").concat(this.user,"/quit?resource=").concat(u.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}},[4,o.hj.call(this,h)]):(t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return l.sent(),[2]}}))}))}function p(e){return c(this,void 0,void 0,(function(){var t,n,a,c,d,u,h;return l(this,(function(l){switch(l.label){case 0:if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));return s.XZ.call(this)?(n=this.context,a=n.orgName,c=n.appName,d=n.accessToken,u=n.jid,h={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread/").concat(e.chatThreadId,"?resource=").concat(u.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}},[4,o.hj.call(this,h)]):(t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return l.sent(),[2]}}))}))}function f(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if("string"!=typeof e.name||""===e.name)throw Error("Invalid parameter name: ".concat(e.name));if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d=n.jid,u={name:e.name},h={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread/").concat(e.chatThreadId,"?resource=").concat(d.clientResource),type:"PUT",dataType:"json",data:JSON.stringify(u),headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return o.hj.call(this,h)}function m(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d={limit:e.pageSize||20,cursor:e.cursor||""},u={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread/").concat(e.chatThreadId,"/users"),type:"GET",dataType:"json",data:d,headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return o.hj.call(this,u)}function g(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if("string"!=typeof e.username||""===e.username)throw Error("Invalid parameter username: ".concat(e.username));if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d=n.jid,u={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread/").concat(e.chatThreadId,"/users/").concat(e.username,"?resource=").concat(d.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return o.hj.call(this,u)}function y(e){if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d={limit:e.pageSize||20,cursor:e.cursor||""},u={url:e.parentId?"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/threads/chatgroups/").concat(e.parentId,"/user/").concat(this.user):"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/threads/user/").concat(this.user),type:"GET",dataType:"json",data:d,headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return o.hj.call(this,u).then((function(e){var t=e.entities;return null==t||t.forEach((function(e){e.parentId=e.groupId,e.messageId=e.msgId,delete e.groupId,delete e.msgId})),e}))}function v(e){if("string"!=typeof e.parentId||""===e.parentId)throw Error("Invalid parameter parentId: ".concat(e.parentId));if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d={cursor:e.cursor||"",limit:e.pageSize||20},u={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/threads/chatgroups/").concat(e.parentId),type:"GET",dataType:"json",data:d,headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return o.hj.call(this,u).then((function(e){var t=e.entities;return null==t||t.forEach((function(e){e.parentId=e.groupId,e.messageId=e.msgId,delete e.groupId,delete e.msgId})),e}))}function _(e){if(!Array.isArray(e.chatThreadIds))throw Error("Invalid parameter chatThreadIds: ".concat(e.chatThreadIds));if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.orgName,l=n.appName,d=n.accessToken,u={threadIds:e.chatThreadIds},h={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/thread/message"),type:"POST",dataType:"json",data:JSON.stringify(u),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};return o.hj.call(this,h).then((function(e){return function(e){var t=e.entities;return null==t||t.forEach((function(e){e.chatThreadId=e.thread_id,e.last_message&&"{}"!==JSON.stringify(e.last_message)?e.lastMessage=(0,a.w)(e.last_message):e.lastMessage=e.last_message,delete e.thread_id,delete e.last_message})),e}(e)}))}function E(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread/").concat(e.chatThreadId),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return o.hj.call(this,d).then((function(e){return e.data.affiliationsCount=e.data.affiliations_count,e.data.messageId=e.data.msgId,e.data.parentId=e.data.groupId,delete e.data.affiliations_count,delete e.data.msgId,delete e.data.groupId,e}))}},70:function(e,t,n){"use strict";n.r(t),n.d(t,{getSupportedLanguages:function(){return c},translateMessage:function(){return l}}),n(1539),n(8674),n(2222),n(9753);var r=n(3246),i=n(5531),o=n(7252),s=n(7360),a=n(4370);function c(){if(!r.XZ.call(this)){var e=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(e)}var t=this.context,n=t.orgName,c=t.appName,l=t.accessToken,d={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(c,"/users/").concat(this.user,"/translate/support/language"),dataType:"json",type:"GET",headers:{Authorization:"Bearer "+l}};return s.kg.debug("Call getSupportedLanguages"),a.hj.call(this,d)}function l(e){if("string"!=typeof e.text||""===e.text)throw Error('Invalid parameter: "text"');if(!Array.isArray(e.languages))throw Error('Invalid parameter: "language"');if(!r.XZ.call(this)){var t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.orgName,l=n.appName,d=n.accessToken,u="".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/users/").concat(this.user,"/translate"),h={text:e.text,to:e.languages},p={url:u,dataType:"json",type:"POST",data:JSON.stringify(h),headers:{Authorization:"Bearer "+d}};return s.kg.debug("Call translateMessage"),a.hj.call(this,p)}},3246:function(e,t,n){"use strict";n.d(t,{H7:function(){return l},XZ:function(){return a},_W:function(){return c}}),n(7941),n(9554),n(1539),n(4747),n(6699),n(2023);var r=n(5531),i=n(7252);function o(){var e=this.context.appName,t=this.context.orgName;return!(!e||!t)||(this.onError&&this.onError({type:r.E.WEBIM_CONNCTION_AUTH_ERROR,message:"appName or orgName is illegal"}),!1)}function s(){var e;if(!this.context.accessToken){var t=i.Z.create({type:r.E.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR,message:"token not assign error"});return this.onError&&this.onError(t),null===(e=this.eventHandler)||void 0===e||e.dispatch("onError",t),!1}return!0}function a(){return s.call(this)&&o.call(this)}function c(e){var t=e.data,n=e.type;return{data:{status:Object.keys(t.errorKeys).length>0?"fail":"success",errorKeys:t.errorKeys,successKeys:t.successKeys},type:n}}function l(e){var t=e.data,n=void 0;return Object.keys(t.errorKeys).length>0&&Object.keys(t.errorKeys).forEach((function(e){var o=t.errorKeys[e];n=o.includes("is not part of you")?i.Z.create({type:r.E.NO_PERMISSION,message:o}):o.includes("size of metadata for this single chatroom exceeds the user defined limit")||o.includes("total size of chatroom metadata for this app exceeds the user defined limit")||o.includes("is exceeding maximum limit")?i.Z.create({type:r.E.MAX_LIMIT,message:o}):o.includes("is not Legal")?i.Z.create({type:r.E.REQUEST_PARAMETER_ERROR,message:o}):o.includes("Failed to update userMetadata. Concurrent updates not allowed")?i.Z.create({type:r.E.OPERATION_NOT_ALLOWED,message:o}):i.Z.create({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,message:o})})),n}},2071:function(e,t,n){"use strict";n.d(t,{$x:function(){return a},F3:function(){return c},Nl:function(){return i},TJ:function(){return o},Tp:function(){return u},Wc:function(){return r},el:function(){return s},iB:function(){return l},yK:function(){return d}}),n(6992),n(1532),n(1539),n(8783),n(3948);var r=7,i=new Map,o=new Map,s="im",a="32f24ab2ddb74f508aa9286c356cec84",c=1e3,l={INIT:9674,API:9675},d="direct",u=-1},1595:function(e,t,n){"use strict";var r,i,o,s,a,c;n.d(t,{C8:function(){return r},aC:function(){return c},c:function(){return o},dd:function(){return a},fI:function(){return i},td:function(){return s}}),function(e){e[e.UNKNOWOPERATION=-1]="UNKNOWOPERATION",e[e.REST_GET_SESSION_LIST=1]="REST_GET_SESSION_LIST",e[e.REST_DEL_SESSION=2]="REST_DEL_SESSION",e[e.REST_GET_HISTORY_MESSAGE=3]="REST_GET_HISTORY_MESSAGE",e[e.REST_PIN_CONVERSATION=4]="REST_PIN_CONVERSATION",e[e.REST_OPERATE=10]="REST_OPERATE",e[e.MSYNC_SENDMESSAGE=11]="MSYNC_SENDMESSAGE",e[e.MSYNC_RECALLMESSAGE=12]="MSYNC_RECALLMESSAGE",e[e.MSYNC_MODIFYMESSAGE=13]="MSYNC_MODIFYMESSAGE",e[e.MSYNC_OPERATE=20]="MSYNC_OPERATE",e[e.ROSTER_ADD=21]="ROSTER_ADD",e[e.ROSTER_REMOVE=22]="ROSTER_REMOVE",e[e.ROSTER_ACCEPT=23]="ROSTER_ACCEPT",e[e.ROSTER_DECLINE=24]="ROSTER_DECLINE",e[e.ROSTER_BAN=25]="ROSTER_BAN",e[e.ROSTER_ALLOW=26]="ROSTER_ALLOW",e[e.ROSTER_BLACKLIST=27]="ROSTER_BLACKLIST",e[e.ROSTER_CONTACTS=28]="ROSTER_CONTACTS",e[e.ROSTER_OPERATE=30]="ROSTER_OPERATE",e[e.USER_LOGIN=31]="USER_LOGIN",e[e.USER_CREATE=32]="USER_CREATE",e[e.USER_UPDATE_USERINFO=33]="USER_UPDATE_USERINFO",e[e.USER_FETCH_USERINFO=34]="USER_FETCH_USERINFO",e[e.USER_UPDATE_NICK=35]="USER_UPDATE_NICK",e[e.USER_UPLOAD_PUSH_TOKEN=36]="USER_UPLOAD_PUSH_TOKEN",e[e.USER_OPERATE=40]="USER_OPERATE",e[e.GROUP_CREATEGROUP=41]="GROUP_CREATEGROUP",e[e.GROUP_BLOCK_MESSAGE=42]="GROUP_BLOCK_MESSAGE",e[e.GROUP_FETCH_PUBLICGROUPS_WITHCURSOR=43]="GROUP_FETCH_PUBLICGROUPS_WITHCURSOR",e[e.GROUP_FETCH_USERS_GROUP=44]="GROUP_FETCH_USERS_GROUP",e[e.GROUP_CHANGE_OWNER=45]="GROUP_CHANGE_OWNER",e[e.GROUP_FETCH_SPECIFICATION=46]="GROUP_FETCH_SPECIFICATION",e[e.GROUP_CHANGE_GROUPATTRIBUTE=47]="GROUP_CHANGE_GROUPATTRIBUTE",e[e.GROUP_FETCH_MEMEBERS=48]="GROUP_FETCH_MEMEBERS",e[e.GROUP_GET_ADMIN=49]="GROUP_GET_ADMIN",e[e.GROUP_SET_ADMIN=50]="GROUP_SET_ADMIN",e[e.GROUP_REMOVE_ADMIN=51]="GROUP_REMOVE_ADMIN",e[e.GROUP_DESTOTYGROUP=52]="GROUP_DESTOTYGROUP",e[e.GROUP_LEAVEGROUP=53]="GROUP_LEAVEGROUP",e[e.GROUP_INVITE_TO_GROUP=54]="GROUP_INVITE_TO_GROUP",e[e.GROUP_JOIN_PUBLICGROUP=55]="GROUP_JOIN_PUBLICGROUP",e[e.GROUP_ACCEPT_JOINPUBLICGROUPAPPL=56]="GROUP_ACCEPT_JOINPUBLICGROUPAPPL",e[e.GROUP_DECLINE_JOINPUBLICGROUPAPPL=57]="GROUP_DECLINE_JOINPUBLICGROUPAPPL",e[e.GROUP_ACCEPT_INVITATION=58]="GROUP_ACCEPT_INVITATION",e[e.GROUP_DECLINE_INVITATION=59]="GROUP_DECLINE_INVITATION",e[e.GROUP_REMOVE_MEMBER=60]="GROUP_REMOVE_MEMBER",e[e.GROUP_REMOVE_MEMBERS=61]="GROUP_REMOVE_MEMBERS",e[e.GROUP_MUTE_MEMBERS=62]="GROUP_MUTE_MEMBERS",e[e.GROUP_UNMUTE_MEMBERS=63]="GROUP_UNMUTE_MEMBERS",e[e.GROUP_FETCH_MUTES=64]="GROUP_FETCH_MUTES",e[e.GROUP_BLOCK_MEMBER=65]="GROUP_BLOCK_MEMBER",e[e.GROUP_BLOCK_MEMBERS=66]="GROUP_BLOCK_MEMBERS",e[e.GROUP_UNBLOCK_MEMBER=67]="GROUP_UNBLOCK_MEMBER",e[e.GROUP_UNBLOCK_MEMBERS=68]="GROUP_UNBLOCK_MEMBERS",e[e.GROUP_GET_BLOCK_LIST=69]="GROUP_GET_BLOCK_LIST",e[e.GROUP_MUTE_ALLMEMBERS=70]="GROUP_MUTE_ALLMEMBERS",e[e.GROUP_UNMUTE_ALLMEMBERS=71]="GROUP_UNMUTE_ALLMEMBERS",e[e.GROUP_ADD_WHITELIST=72]="GROUP_ADD_WHITELIST",e[e.GROUP_REMOVE_WHITELIST=73]="GROUP_REMOVE_WHITELIST",e[e.GROUP_FETCH_WHITELIST=74]="GROUP_FETCH_WHITELIST",e[e.GROUP_IS_IN_WHITELIST=75]="GROUP_IS_IN_WHITELIST",e[e.GROUP_GET_READ_USERS=76]="GROUP_GET_READ_USERS",e[e.GROUP_FETCH_ANNOUNCEMENT=77]="GROUP_FETCH_ANNOUNCEMENT",e[e.GROUP_UPDATE_ANNOUNCEMENT=78]="GROUP_UPDATE_ANNOUNCEMENT",e[e.GROUP_UPLOAD_SHAREDFILE=79]="GROUP_UPLOAD_SHAREDFILE",e[e.GROUP_DELETE_SHAREDFILE=80]="GROUP_DELETE_SHAREDFILE",e[e.GROUP_FETCH_SHAREDFILE=81]="GROUP_FETCH_SHAREDFILE",e[e.GROUP_DOWNLOAD_SHAREDFILE=82]="GROUP_DOWNLOAD_SHAREDFILE",e[e.GROUP_MEMBER_SET_META_DATA=83]="GROUP_MEMBER_SET_META_DATA",e[e.GROUP_MEMBER_FETCH_META_DATA=84]="GROUP_MEMBER_FETCH_META_DATA",e[e.GROUP_OPERATE=100]="GROUP_OPERATE",e[e.CHATROOM_FETCH_CHATROOMSWITHPAGE=101]="CHATROOM_FETCH_CHATROOMSWITHPAGE",e[e.CHATROOM_CREATECHATROOM=102]="CHATROOM_CREATECHATROOM",e[e.CHATROOM_DESTORYCHATROOM=103]="CHATROOM_DESTORYCHATROOM",e[e.CHATROOM_FETCH_SPECIFICATION=104]="CHATROOM_FETCH_SPECIFICATION",e[e.CHATROOM_CHANGE_ATTRIBUTE=105]="CHATROOM_CHANGE_ATTRIBUTE",e[e.CHATROOM_REMOVE_MEMBER=106]="CHATROOM_REMOVE_MEMBER",e[e.CHATROOM_REMOVE_MEMBERS=107]="CHATROOM_REMOVE_MEMBERS",e[e.CHATROOM_ADD_MEMBERS=108]="CHATROOM_ADD_MEMBERS",e[e.CHATROOM_JOINCAHTROOM=109]="CHATROOM_JOINCAHTROOM",e[e.CHATROOM_LEAVECAHTROOM=110]="CHATROOM_LEAVECAHTROOM",e[e.CHATROOM_FETCH_MEMBERS=111]="CHATROOM_FETCH_MEMBERS",e[e.CHATROOM_GET_ADMIN=112]="CHATROOM_GET_ADMIN",e[e.CHATROOM_SET_ADMIN=113]="CHATROOM_SET_ADMIN",e[e.CHATROOM_REMOVE_ADMIN=114]="CHATROOM_REMOVE_ADMIN",e[e.CHATROOM_MUTE_USER=115]="CHATROOM_MUTE_USER",e[e.CHATROOM_UNMUTE_USER=116]="CHATROOM_UNMUTE_USER",e[e.CHATROOM_FETCH_MUTES=117]="CHATROOM_FETCH_MUTES",e[e.CHATROOM_BLOCK_USER=118]="CHATROOM_BLOCK_USER",e[e.CHATROOM_BLOCK_USERS=119]="CHATROOM_BLOCK_USERS",e[e.CHATROOM_UNBLOCK_USER=120]="CHATROOM_UNBLOCK_USER",e[e.CHATROOM_UNBLOCK_USERS=121]="CHATROOM_UNBLOCK_USERS",e[e.CHATROOM_FETCH_BANS=122]="CHATROOM_FETCH_BANS",e[e.CHATROOM_MUTE_ALLMEMEBERS=123]="CHATROOM_MUTE_ALLMEMEBERS",e[e.CHATROOM_UNMUTE_ALLMEMEBERS=124]="CHATROOM_UNMUTE_ALLMEMEBERS",e[e.CHATROOM_ADD_WHITELIST=125]="CHATROOM_ADD_WHITELIST",e[e.CHATROOM_REMOVE_WHITELIST=126]="CHATROOM_REMOVE_WHITELIST",e[e.CHATROOM_FETCH_WHITELIST=127]="CHATROOM_FETCH_WHITELIST",e[e.CHATROOM_FETCH_MEMBERIN_WHITELIST=128]="CHATROOM_FETCH_MEMBERIN_WHITELIST",e[e.CHATROOM_FETCH_ANNOUNCEMENT=129]="CHATROOM_FETCH_ANNOUNCEMENT",e[e.CHATROOM_UPDATE_ANNOUNCEMENT=130]="CHATROOM_UPDATE_ANNOUNCEMENT",e[e.CHATROOM_REMOVE_SHARE_FILE=131]="CHATROOM_REMOVE_SHARE_FILE",e[e.CHATROOM_GET_SHARE_FILE_LIST=132]="CHATROOM_GET_SHARE_FILE_LIST",e[e.CHATROOM_UPLOAD_FILE=133]="CHATROOM_UPLOAD_FILE",e[e.CHATROOM_SET_META_DATA=134]="CHATROOM_SET_META_DATA",e[e.CHATROOM_DELETE_META_DATA=135]="CHATROOM_DELETE_META_DATA",e[e.CHATROOM_FETCH_META_DATA=136]="CHATROOM_FETCH_META_DATA",e[e.CHATROOM_OPERATE=150]="CHATROOM_OPERATE"}(r||(r={})),function(e){e.SDK_INTERNAL="SDK_INTERNAL",e.LOGIN="USER_LOGIN",e.REGISTER="USER_CREATE",e.GET_CHATROOM_LIST="CHATROOM_FETCH_CHATROOMSWITHPAGE",e.CREATE_CHATROOM="CHATROOM_CREATECHATROOM",e.DESTROY_CHATROOM="CHATROOM_DESTORYCHATROOM",e.GET_CHATROOM_DETAIL="CHATROOM_FETCH_SPECIFICATION",e.MODIFY_CHATROOM="CHATROOM_CHANGE_ATTRIBUTE",e.REMOVE_CHATROOM_MEMBER="CHATROOM_REMOVE_MEMBER",e.MULTI_REMOVE_CHATROOM_MEMBER="CHATROOM_REMOVE_MEMBERS",e.ADD_USERS_TO_CHATROOM="CHATROOM_ADD_MEMBERS",e.JOIN_CHATROOM="CHATROOM_JOINCAHTROOM",e.QUIT_CHATROOM="CHATROOM_LEAVECAHTROOM",e.LIST_CHATROOM_MEMBERS="CHATROOM_FETCH_MEMBERS",e.GET_CHATROOM_ADMIN="CHATROOM_GET_ADMIN",e.SET_CHATROOM_ADMIN="CHATROOM_SET_ADMIN",e.REMOVE_CHATROOM_ADMIN="CHATROOM_REMOVE_ADMIN",e.MUTE_CHATROOM_MEMBER="CHATROOM_MUTE_USER",e.REMOVE_MUTE_CHATROOM_MEMBER="CHATROOM_UNMUTE_USER",e.GET_MUTE_CHATROOM_MEMBERS="CHATROOM_FETCH_MUTES",e.SET_CHATROOM_MEMBER_TO_BLACK="CHATROOM_BLOCK_USER",e.MULTI_SET_CHATROOM_MEMBER_TO_BLACK="CHATROOM_BLOCK_USERS",e.REMOVE_CHATROOM_MEMBER_BLACK="CHATROOM_UNBLOCK_USER",e.MULTI_REMOVE_CHATROOM_MEMBER_BLACK="CHATROOM_UNBLOCK_USERS",e.GET_CHATROOM_BLOCK_MEMBERS="CHATROOM_FETCH_BANS",e.DISABLED_CHATROOM_SEND_MSG="CHATROOM_MUTE_ALLMEMEBERS",e.ENABLE_CHATROOM_SEND_MSG="CHATROOM_UNMUTE_ALLMEMEBERS",e.ADD_CHATROOM_WHITE_USERS="CHATROOM_ADD_WHITELIST",e.REMOVE_CHATROOM_WHITE_USERS="CHATROOM_REMOVE_WHITELIST",e.GET_CHATROOM_WHITE_USERS="CHATROOM_FETCH_WHITELIST",e.CHECK_CHATROOM_WHITE_USER="CHATROOM_FETCH_MEMBERIN_WHITELIST",e.GET_CHATROOM_ANN="CHATROOM_FETCH_ANNOUNCEMENT",e.UPDATE_CHATROOM_ANN="CHATROOM_UPDATE_ANNOUNCEMENT",e.DELETE_CHATROOM_FILE="CHATROOM_REMOVE_SHARE_FILE",e.GET_CHATROOM_FILES="CHATROOM_GET_SHARE_FILE_LIST",e.UPLOAD_CHATROOM_FILE="CHATROOM_UPLOAD_FILE",e.SET_CHATROOM_ATTR="CHATROOM_SET_META_DATA",e.DELETE_CHATROOM_ATTR="CHATROOM_DELETE_META_DATA",e.GET_CHATROOM_ATTR="CHATROOM_FETCH_META_DATA",e.CREATE_GROUP="GROUP_CREATEGROUP",e.BLOCK_GROUP="GROUP_BLOCK_MESSAGE",e.LIST_GROUP="GROUP_FETCH_PUBLICGROUPS_WITHCURSOR",e.GET_USER_GROUP="GROUP_FETCH_USERS_GROUP",e.CHANGE_OWNER="GROUP_CHANGE_OWNER",e.GET_GROUP_INFO="GROUP_FETCH_SPECIFICATION",e.MODIFY_GROUP="GROUP_CHANGE_GROUPATTRIBUTE",e.LIST_GROUP_MEMBER="GROUP_FETCH_MEMEBERS",e.GET_GROUP_ADMIN="GROUP_GET_ADMIN",e.SET_GROUP_ADMIN="GROUP_SET_ADMIN",e.REMOVE_GROUP_ADMIN="GROUP_REMOVE_ADMIN",e.DISSOLVE_GROUP="GROUP_DESTOTYGROUP",e.QUIT_GROUP="GROUP_LEAVEGROUP",e.INVITE_TO_GROUP="GROUP_INVITE_TO_GROUP",e.JOIN_GROUP="GROUP_JOIN_PUBLICGROUP",e.AGREE_JOIN_GROUP="GROUP_ACCEPT_JOINPUBLICGROUPAPPL",e.REJECT_JOIN_GROUP="GROUP_DECLINE_JOINPUBLICGROUPAPPL",e.AGREE_INVITE_GROUP="GROUP_ACCEPT_INVITATION",e.REJECT_INVITE_GROUP="GROUP_DECLINE_INVITATION",e.REMOVE_GROUP_MEMBER="GROUP_REMOVE_MEMBER",e.MULTI_REMOVE_GROUP_MEMBER="GROUP_REMOVE_MEMBERS",e.MUTE_GROUP_MEMBER="GROUP_MUTE_MEMBERS",e.UNMUTE_GROUP_MEMBER="GROUP_UNMUTE_MEMBERS",e.GET_GROUP_MUTE_LIST="GROUP_FETCH_MUTES",e.BLOCK_GROUP_MEMBER="GROUP_BLOCK_MEMBER",e.BLOCK_GROUP_MEMBERS="GROUP_BLOCK_MEMBERS",e.UNBLOCK_GROUP_MEMBER="GROUP_UNBLOCK_MEMBER",e.UNBLOCK_GROUP_MEMBERS="GROUP_UNBLOCK_MEMBERS",e.GET_GROUP_BLACK_LIST="GROUP_GET_BLOCK_LIST",e.DISABLED_SEND_GROUP_MSG="GROUP_MUTE_ALLMEMBERS",e.ENABLE_SEND_GROUP_MSG="GROUP_UNMUTE_ALLMEMBERS",e.ADD_USERS_TO_GROUP_WHITE="GROUP_ADD_WHITELIST",e.REMOVE_GROUP_WHITE_MEMBER="GROUP_REMOVE_WHITELIST",e.GET_GROUP_WHITE_LIST="GROUP_FETCH_WHITELIST",e.IS_IN_GROUP_WHITE_LIST="GROUP_IS_IN_WHITELIST",e.GET_GROUP_MSG_READ_USER="GROUP_GET_READ_USERS",e.GET_GROUP_ANN="GROUP_FETCH_ANNOUNCEMENT",e.UPDATE_GROUP_ANN="GROUP_UPDATE_ANNOUNCEMENT",e.UPLOAD_GROUP_FILE="GROUP_UPLOAD_SHAREDFILE",e.DELETE_GROUP_FILE="GROUP_DELETE_SHAREDFILE",e.GET_GROUP_FILE_LIST="GROUP_FETCH_SHAREDFILE",e.DOWN_GROUP_FILE="GROUP_DOWNLOAD_SHAREDFILE",e.SET_GROUP_MEMBER_ATTRS="GROUP_MEMBER_SET_META_DATA",e.GET_GROUP_MEMBER_ATTR="GROUP_MEMBER_FETCH_META_DATA",e.GET_SESSION_LIST="REST_GET_SESSION_LIST",e.DELETE_SESSION="REST_DEL_SESSION",e.GET_HISTORY_MSG="REST_GET_HISTORY_MESSAGE",e.PIN_CONVERSATION="REST_PIN_CONVERSATION",e.UPDATE_USER_INFO="USER_UPDATE_USERINFO",e.GET_USER_INFO="USER_FETCH_USERINFO",e.UPDATE_USER_NICK="USER_UPDATE_NICK",e.UPLOAD_PUSH_TOKEN="USER_UPLOAD_PUSH_TOKEN",e.GET_BLACK_LIST="ROSTER_BLACKLIST",e.GET_CONTACTS="ROSTER_CONTACTS",e.add="ROSTER_ADD",e.remove="ROSTER_REMOVE",e.accept="ROSTER_ACCEPT",e.decline="ROSTER_DECLINE",e.ban="ROSTER_BAN",e.allow="ROSTER_ALLOW",e.SEND_MSG="MSYNC_SENDMESSAGE",e.UPLOAD_MSG_ATTACH="UPLOAD_MSG_ATTACH",e.SEND_RECALL_MSG="MSYNC_RECALLMESSAGE",e.MODIFY_MESSAGE="MSYNC_MODIFYMESSAGE"}(i||(i={})),function(e){e.GET_DNS="REST_DNSLIST",e.LOGIN_BY_AGORA_TOKEN="LOGIN_BY_AGORA_TOKEN",e.LOGIN_BY_PWD="LOGIN_BY_PWD",e.RESISTER="REGISTER"}(o||(o={})),function(e){e[e["5G"]=7]="5G",e[e["4G"]=7]="4G",e[e["3G"]=7]="3G",e[e["2G"]=7]="2G",e[e["SLOW-2G"]=7]="SLOW-2G",e[e.WIFI=2]="WIFI",e[e.LAN=1]="LAN",e[e.DISCONNECTED=0]="DISCONNECTED",e[e.NONE=0]="NONE",e[e.UNKNOWN=-1]="UNKNOWN",e[e["WEBIM UNABLE TO GET"]=-2]="WEBIM UNABLE TO GET"}(s||(s={})),function(e){e[e.success=200]="success",e[e.failed=500]="failed"}(a||(a={})),function(e){e[e.web=0]="web",e[e.native=1]="native"}(c||(c={}))},9335:function(e,t,n){"use strict";n.d(t,{g:function(){return M},Z:function(){return me}}),n(9601),n(1539),n(8674),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948),n(7042),n(2222),n(3710),n(9714),n(5212),n(8309),n(2772),n(9653),n(3843),n(1038),n(2564),n(7941),n(9753),n(8264),n(9575),n(2472),n(2990),n(8927),n(3105),n(5035),n(4345),n(7174),n(2846),n(4731),n(7209),n(6319),n(8867),n(7789),n(3739),n(9368),n(4483),n(2056),n(3462),n(678),n(7462),n(3824),n(5021),n(2974),n(5016),n(6699),n(2023),n(561),n(3161),n(9554),n(4747),n(285),n(1637),n(8145),n(1249),n(4812);var r=n(4188),i=n.n(r),o=n(3720),s=n.n(o),a=n(5531),c=n(8161),l=n(7360),d=["public","members_only","allow_user_invites","invite_need_confirm"],u={name:"name",title:"name",description:"description",public:"public",members_only:"approval",allow_user_invites:"allowInvites",max_users:"maxUsers",invite_need_confirm:"inviteNeedConfirm",custom:"ext",last_modified:"lastModified"};function h(e,t){var n,r,i,o,s,a,c=this,l=this.context,h=l.userId,p=l.jid,f=t.from.name===h&&p.clientResource!==t.from.clientResource;return t.isThread?(i={id:t.mucId.name,name:t.mucName,operation:"",parentId:t.mucParentId.name,operator:t.from.name,userName:t.to.length?t.to[0].name:""},o={chatThreadId:t.mucId.name,chatThreadName:t.mucName,operation:"",parentId:t.mucParentId.name}):(r={type:"",owner:t.from.name,gid:t.mucId.name,from:t.from.name,fromJid:t.from,to:t.to.length?t.to[0].name:"",toJid:t.to,chatroom:t.isChatroom,status:t.status},s={operation:"",id:t.mucId.name,from:t.from.name},t.isChatroom&&(null===(n=null==t?void 0:t.eventInfo)||void 0===n?void 0:n.ext)&&(a=JSON.parse(t.eventInfo.ext))),({45:function(){var e,n,r;s.operation="memberAttributesUpdate";var i=JSON.parse(null===(e=null==t?void 0:t.eventInfo)||void 0===e?void 0:e.ext)||{};s.attributes=i.properties||{},s.userId=i.username||"",f?null===(n=c.eventHandler)||void 0===n||n.dispatch("onMultiDeviceEvent",s):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupEvent",s)},44:function(){var e;s.operation="removeChatRoomAttributes",s.attributes=a.result.successKeys,a.result.successKeys.length>0&&(null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomEvent",s))},43:function(){var e;s.operation="updateChatRoomAttributes";var t={};a.result.successKeys.forEach((function(e){t[e]=a.properties[e]})),s.attributes=t,a.result.successKeys.length>0&&(null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomEvent",s))},42:function(){},41:function(){},40:function(){},39:function(){},38:function(){var e;o.operation="chatThreadNameUpdate",null===(e=c.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",o)},37:function(){var e;i.operation="userRemove",null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatThreadChange",i)},36:function(){var e;o.operation="chatThreadLeave",null===(e=c.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",o)},35:function(){var e;o.operation="chatThreadJoin",null===(e=c.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",o)},34:function(){var e;o.operation="chatThreadDestroy",null===(e=c.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",o)},33:function(){var e;o.operation="chatThreadCreate",null===(e=c.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",o)},32:function(){var e,n,i,o;r.type=t.isChatroom?"rmChatRoomMute":"rmGroupMute",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="unmuteAllMembers",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},31:function(){var e,n,i,o;r.type=t.isChatroom?"muteChatRoom":"muteGroup",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="muteAllMembers",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},30:function(){var e,n,i,o;r.type=t.isChatroom?"rmUserFromChatRoomWhiteList":"rmUserFromGroupWhiteList",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="removeAllowlistMember",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},29:function(){var e,n,i,o;r.type=t.isChatroom?"addUserToChatRoomWhiteList":"addUserToGroupWhiteList",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="addUserToAllowlist",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},28:function(){var e,n,i,o;r.type="deleteFile",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="deleteFile",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},27:function(){var e,n,i,o;r.type="uploadFile",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="uploadFile",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},26:function(){var e,n,i,o;r.type="deleteAnnouncement",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="deleteAnnouncement",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},25:function(){var e,n,i,o;r.type="updateAnnouncement",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="updateAnnouncement",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},24:function(){var e,n,i,o;r.type="removeMute",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="unmuteMember",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},23:function(){var e,n,i,o;r.type="addMute",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="muteMember",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},22:function(){var e,n,i,o;r.type="removeAdmin",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="removeAdmin",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},21:function(){var e,n,i,o;r.type="addAdmin",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="setAdmin",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},20:function(){var e,n,i,o;r.type="changeOwner",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="changeOwner",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},19:function(){var e,n,i,o;r.type="direct_joined",r.groupName=t.mucName,c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="directJoined",s.name=t.mucName,t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},18:function(){var e,n,i,o;r.type=t.isChatroom?"leaveChatRoom":"leaveGroup",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="memberAbsence",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},17:function(){var e,n,i,o;r.type=t.isChatroom?"memberJoinChatRoomSuccess":"memberJoinPublicGroupSuccess",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="memberPresence",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},16:function(){var e,n;r.type="unblock",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r)},15:function(){var e,n;r.type="block",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r)},14:function(){var e,n,i,o,a,l=t.isChatroom;if(!l){var h=JSON.parse((null===(e=null==t?void 0:t.eventInfo)||void 0===e?void 0:e.ext)||"{}",(function(e,t){return"last_modified"===e?Number(t):d.includes(e)?"true"===t||!0===t:t}));s.detail=r.detail={},Object.keys(h).forEach((function(e){var t=u[e];if(t){var n=h[e];s.detail&&(s.detail[t]=n),r.detail&&(r.detail[t]=n)}}))}r.type="update",c.onPresence&&c.onPresence(r),l?null===(n=c.eventHandler)||void 0===n||n.dispatch("onChatroomChange",r):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupChange",r),s.operation="updateInfo",l?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",s):null===(a=c.eventHandler)||void 0===a||a.dispatch("onGroupEvent",s)},13:function(){var e,n,i,o;r.type="allow",r.reason=t.reason,c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="unblockMember",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},12:function(){var e,n;r.type="ban",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r)},11:function(){var e,n;r.type="getBlackList",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r)},10:function(){var e,n,i,o;r.type="removedFromGroup",r.kicked=r.to,c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="removeMember",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},9:function(){var e,n,i,o;r.type="invite_decline",r.kicked=r.to,c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="rejectInvite",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},8:function(){var e,n,i,o;r.type="invite_accept",r.kicked=r.to,c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="acceptInvite",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},7:function(){var e,n,i,o;r.type="invite",r.kicked=r.to,r.groupName=t.mucName,c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="inviteToJoin",s.name=t.mucName,t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},6:function(){var e,n,i,o;r.type="joinPublicGroupDeclined",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="joinPublicGroupDeclined",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):(s.userId=t.to.length?t.to[0].name:"",null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s))},5:function(){var e,n,i,o;r.type="joinPublicGroupSuccess",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="acceptRequest",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},4:function(){var e,n,i,o;r.type="joinGroupNotifications",r.reason=t.reason,c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="requestToJoin",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},3:function(){var e,n;r.type="leave",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r)},2:function(){var e,n;r.type="join",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r)},1:function(){var e,n,i,o;r.type="deleteGroupChat",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="destroy",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},0:function(){var e,n;s.operation="create",t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomEvent",s):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupEvent",s)}}[e]||function(){console.error("No match operation ".concat(e))})()}var p=function(e){var t=this.root.lookup("easemob.pb.MUCBody").decode(e.payload),n=t.operation;l.kg.debug("onMucMessage",t),h.call(this,n,t)},f=n(4968),m=n(7252),g=function(e){var t,n,r,i,o,s,c=this.root.lookup("easemob.pb.StatisticsBody").decode(e.payload);switch(c.operation){case 0:this.onStatisticMessage&&this.onStatisticMessage(c),null===(t=this.eventHandler)||void 0===t||t.dispatch("onStatisticMessage",c);break;case 1:s=m.Z.create({type:a.E.WEBIM_CONNCTION_USER_REMOVED,message:"user has been removed"}),this.logOut=!0,this.onError&&this.onError(s),null===(n=this.eventHandler)||void 0===n||n.dispatch("onError",s);break;case 2:s=m.Z.create({type:a.E.WEBIM_CONNCTION_USER_LOGIN_ANOTHER_DEVICE,message:"the user is already logged on another device"}),this.logOut=!0,this.onError&&this.onError(s),null===(r=this.eventHandler)||void 0===r||r.dispatch("onError",s);break;case 3:s=m.Z.create({type:a.E.WEBIM_CONNCTION_USER_KICKED_BY_CHANGE_PASSWORD,message:"the user was kicked by changing password"}),this.logOut=!0,this.onError&&this.onError(s),null===(i=this.eventHandler)||void 0===i||i.dispatch("onError",s);break;case 4:s=m.Z.create({type:a.E.WEBIM_CONNCTION_USER_KICKED_BY_OTHER_DEVICE,message:"the user was kicked by other device"}),this.logOut=!0,this.onError&&this.onError(s),null===(o=this.eventHandler)||void 0===o||o.dispatch("onError",s);break;default:l.kg.error("handleStatisticsMsg:",c)}},y=(n(9720),n(4370)),v=n(4363);function _(e){var t,n=[],r=[],i=e.data;i&&i.values&&i.values.forEach((function(e){Object.entries(e.status).forEach((function(e){r.push({device:e[0],status:Number(e[1])})})),n.push({userId:e.uid,lastTime:Number(e.last_time),expire:Number(e.expiry),ext:e.ext,statusDetails:r})})),this.onPresenceStatusChange&&this.onPresenceStatusChange(n),null===(t=this.eventHandler)||void 0===t||t.dispatch("onPresenceStatusChange",n)}function E(e){var t=this;e.data.forEach((function(e){var n,r={from:e.from,to:e.to,chatType:"chat"===e.channel_type?"singleChat":"groupChat",messageId:e.messageId,reactions:e.reactions,ts:e.ts};null===(n=t.eventHandler)||void 0===n||n.dispatch("onReactionChange",r)}))}function S(e){var t,n,r,i;if(e.data){var o=e.data,s={id:o.id||"",name:o.name||"",parentId:o.muc_parent_id||"",messageId:o.msg_parent_id||"",timestamp:o.timestamp||0,operator:o.from||"",operation:""};switch(o.operation){case"create":s.operation="create",s.createTimestamp=s.timestamp,s.messageCount=0,null===(t=this.eventHandler)||void 0===t||t.dispatch("onChatThreadChange",s);break;case"update_msg":s.operation="update",s.messageCount=o.message_count,o.last_message&&"{}"!==JSON.stringify(o.last_message)?s.lastMessage=(0,v.w)(o.last_message):"{}"===JSON.stringify(o.last_message)&&(s.lastMessage={}),null===(n=this.eventHandler)||void 0===n||n.dispatch("onChatThreadChange",s);break;case"update":s.operation="update",s.messageCount=o.message_count,null===(r=this.eventHandler)||void 0===r||r.dispatch("onChatThreadChange",s);break;case"delete":s.operation="destroy",null===(i=this.eventHandler)||void 0===i||i.dispatch("onChatThreadChange",s)}}}function T(e){var t,n=e.data;if(n.resource!==this.clientResource){var r={operation:"deleteRoaming",conversationId:n.to,chatType:"chat"===n.chatType?"singleChat":"groupChat",resource:n.resource};null===(t=this.eventHandler)||void 0===t||t.dispatch("onMultiDeviceEvent",r)}}function b(e){var t,n=e.data,r={operation:"del"===n.op?"deleteConversation":"top"===n.op?"pinnedConversation":"unpinnedConversation",conversationId:n.id,conversationType:"chat"===n.type?"singleChat":"groupChat",timestamp:n.ts};this.clientResource!==n.res&&(null===(t=this.eventHandler)||void 0===t||t.dispatch("onMultiDeviceEvent",r))}var I=function(e){var t=y.P6.parseNotify(e.payload);switch(t.type){case"presence":_.call(this,t);break;case"reaction":E.call(this,t);break;case"thread":S.call(this,t);break;case"roaming_delete":T.call(this,t);break;case"conv":b.call(this,t);break;default:l.kg.error("unexpected notify type: ".concat(t.type))}},N=n(7288),C=n(9743),w=1,R=n(2071),A=n(1595);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}var M,D=function(){return D=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},D.apply(this,arguments)},k=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},x=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},L=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};!function(e){e[e.NORMAL=0]="NORMAL",e[e.SINGLECHAT=1]="SINGLECHAT",e[e.GROUPCHAT=2]="GROUPCHAT",e[e.CHATROOM=3]="CHATROOM",e[e.READ_ACK=4]="READ_ACK",e[e.DELIVER_ACK=5]="DELIVER_ACK",e[e.RECALL=6]="RECALL",e[e.CHANNEL_ACK=7]="CHANNEL_ACK",e[e.EDIT=8]="EDIT"}(M||(M={}));var P=y.P6.getEnvInfo();function j(){var e="webim",t="",n="",r=[],i=(new Date).valueOf();"webim"===this.deviceId?(n="random_"+i.toString(),e=this.deviceId+"_"+n,t=this.deviceId):e=t=n="webim_"+this.deviceId,this.context.jid&&(this.context.jid.clientResource=e);var o=this.root.lookup("easemob.pb.Provision"),s=o.decode(r);s.compressType=this.compressType,s.encryptType=this.encryptType,s.osType=this.osType,s.version=this.version,s.deviceName=t,s.resource=e,s.deviceUuid=n,s.auth="$t$"+this.token,s.actionVersion="v2.0",s=o.encode(s).finish();var a=this.root.lookup("easemob.pb.MSync"),c=a.decode(r);return c.version=this.version,c.guid=this.context.jid,c.auth="$t$"+this.token,c.command=3,c.deviceId=t,c.serviceId=this.dataReport.getServiceId(),c.encryptType=this.encryptType,c.payload=s,a.encode(c).finish()}function U(e,t){var n=this,r=y.P6.getEnvInfo();if("web"===r.platform||"zfb"===r.platform||"dd"===r.platform){for(var o="",s=0;s<e.length;s++)o+=String.fromCharCode(e[s]);return o=i().btoa(o),"web"===r.platform?o:{data:o,isBuffer:!1,complete:function(){},fail:function(e){"sendSocketMessage:fail taskID not exist"!==e.errMsg&&"SocketTast.send:fail SocketTask.readyState is not OPEN"!==e.errMsg||(l.kg.debug("send message fail and reconnect"),n.reconnecting||n.reconnect()),t&&n._msgHash&&n._msgHash[t]&&n._msgHash[t].fail({id:t})}}}var a=e;return{data:a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength),fail:function(e){"sendSocketMessage:fail taskID not exist"!==e.errMsg&&"SocketTast.send:fail SocketTask.readyState is not OPEN"!==e.errMsg||n.reconnecting||n.reconnect(),t&&n._msgHash&&n._msgHash[t]&&n._msgHash[t].fail({id:t})}}}function F(e,t){switch(e.ns){case 0:g.call(this,e);break;case 1:c.Z.call(this,e,t);break;case 2:p.call(this,e);break;case 3:f.Z.handleRosterMsg.call(this,e);break;case 4:this.registerConfrIQHandler&&this.registerConfrIQHandler(e,t,this);break;case 5:I.call(this,e);break;default:l.kg.error("distributeMeta",e)}}function z(e,t){for(var n=function(n){var i=new(s())(e[n].id.low,e[n].id.high,e[n].id.unsigned).toString();if(r._load_msg_cache.some((function(e){return e.msgId===i})))return"continue";var o=e[n].from.name,a=e[n].to?e[n].to.name:"",c=!!e[n].to&&-1!==e[n].to.domain.indexOf("conference");r._load_msg_cache.length<=r.max_cache_length||r._load_msg_cache.shift(),r._load_msg_cache.push({msgId:i,from:o,to:a,isGroup:c}),F.call(r,e[n],t)},r=this,i=0;i<e.length;i++)n(i)}function V(e){var t=this.root.lookup("easemob.pb.CommUnreadDL");if(t=t.decode(e.payload),"agoraToken"===this.grantType){var n=new(s())(t.timestamp.low,t.timestamp.high,t.timestamp.unsigned).toString();this.compareTokenExpireTime(Number(n),this.expirationTime)}if(0===t.unread.length)J.call(this);else for(var r=0;r<t.unread.length;r++)l.kg.debug("pull unread message",t.unread),H.call(this,t.unread[r].queue);J.call(this)}function B(){var e=[],t=this.root.lookup("easemob.pb.StatisticsBody"),n=t.decode(e);n.operation=0,n=t.encode(n).finish();var r=this.root.lookup("easemob.pb.Meta").decode(e);r.id=(new Date).valueOf(),r.ns=0,r.payload=n;var i=this.root.lookup("easemob.pb.CommSyncUL"),o=i.decode(e);o.meta=r,o=i.encode(o).finish();var s=this.root.lookup("easemob.pb.MSync"),a=s.decode(e);return a.version=this.version,a.encryptType=[0],a.command=0,a.payload=o,s.encode(a).finish()}function G(e){var t=[],n=this.root.lookup("easemob.pb.CommSyncUL"),r=n.decode(t);r.queue=e,r=n.encode(r).finish();var i=this.root.lookup("easemob.pb.MSync"),o=i.decode(t);return o.version=this.version,o.encryptType=this.encryptType,o.command=0,o.payload=r,i.encode(o).finish()}function H(e){l.kg.debug("sendBackqueue");var t=G.call(this,e);fe.call(this,t)}function W(e,t){var n=[],r=this.root.lookup("easemob.pb.CommSyncUL"),i=r.decode(n);i.queue=t,i.key=new(s())(e.low,e.high,e.unsigned).toString(),i=r.encode(i).finish();var o=this.root.lookup("easemob.pb.MSync"),a=o.decode(n);return a.version=this.version,a.encryptType=this.encryptType,a.command=0,a.payload=i,o.encode(a).finish()}function Y(){var e;if(this.times=1,this.autoReconnectNumTotal=0,this.onOpened&&this.onOpened(),null===(e=this.eventHandler)||void 0===e||e.dispatch("onConnected"),"agoraToken"===this.grantType){var t=Date.now();this.expiresIn=this.expirationTime-t,this.tokenExpireTimeCountDown(this.expiresIn)}Q.call(this),Z.call(this),X.call(this),J.call(this)}function q(e,t){l.kg.debug("sendLastSession");var n=W.call(this,e,t);fe.call(this,n)}function K(e){var t,n,r,i,o,s,c=this,d=this.root.lookup("easemob.pb.Provision").decode(e.payload);if(this.context.jid&&(this.context.jid.clientResource=d.resource),this.clientResource=d.resource,0===d.status.errorCode)this.reconnecting=!1,this.logOut=!1,"zfb"!==P.platform&&"dd"!==P.platform||(this.sock.readyState=1),this._localCache?(null===(t=this._localCache)||void 0===t?void 0:t.getInstance())?Y.call(this):this._localCache&&new this._localCache({user:this.user,dbName:"cache_".concat(Math.abs((0,C.un)(this.appKey)),"_").concat(this.user),version:w,onInit:function(){return k(c,void 0,void 0,(function(){return x(this,(function(e){return l.kg.debug("localCache init success"),Y.call(this),[2]}))}))}}):Y.call(this);else{var u=void 0,h=d.status.reason;switch(h){case"Sorry, the app day live count limit":u=m.Z.create({type:a.E.MAX_LIMIT,message:"Sorry, the daily active user limit for this app has been reached"}),null===(n=this.eventHandler)||void 0===n||n.dispatch("onError",u);break;case"Sorry, the app online count limit":u=m.Z.create({type:a.E.MAX_LIMIT,message:"Sorry, the maximum number limit of online users for this app has been reached"}),null===(r=this.eventHandler)||void 0===r||r.dispatch("onError",u);break;case"Sorry, the app month live count limit":u=m.Z.create({type:a.E.MAX_LIMIT,message:"Sorry, the monthly active user limit for this app has been reached"}),null===(i=this.eventHandler)||void 0===i||i.dispatch("onError",u);break;case"Sorry, who are you?":u=m.Z.create({type:a.E.WEBIM_CONNCTION_AUTH_ERROR,message:"Auth failed"}),null===(o=this.eventHandler)||void 0===o||o.dispatch("onError",u);break;default:u=m.Z.create({type:a.E.SERVER_UNKNOWN_ERROR,message:h}),null===(s=this.eventHandler)||void 0===s||s.dispatch("onError",u)}}}function Q(){var e,t;if((null===(e=this.unMSyncSendMsgMap)||void 0===e?void 0:e.size)>0){for(var n=Array.from(this.unMSyncSendMsgMap.keys()),r=0;r<n.length;r++){var i=this.unMSyncSendMsgMap.get(n[r]);fe.call(this,i,n[r])}null===(t=this.unMSyncSendMsgMap)||void 0===t||t.clear()}}function J(){var e=B.call(this);fe.call(this,e)}function X(){var e=ee.call(this);fe.call(this,e)}function Z(){var e=this;$.call(this),this.heartBeatID=setInterval((function(){X.call(e)}),this.heartBeatWait)}function $(){clearInterval(this.heartBeatID)}function ee(){var e=this.root.lookup("easemob.pb.MSync"),t=e.decode([]);return t.version=this.version,t.encryptType=this.encryptType,t.command=1,e.encode(t).finish()}function te(e,t){return e.some((function(e){return e.name===t.name}))}function ne(e){var t=this,n=this.root.lookup("easemob.pb.CommNotice"),r=n.decode(e.payload),i=te(this._queues,r.queue);l.kg.debug("receive notice",n,this._queues),i||this.clientResource===r.queue.clientResource&&r.queue.name===this.context.userId||(this.qTimer&&clearTimeout(this.qTimer),this.qTimer=setTimeout((function(){var e=r.queue;te(t._queues,e)&&(H.call(t,e),l.kg.debug("\u2b07q:",e))}),1e4),this._queues.push(r.queue),1===this._queues.length&&H.call(this,r.queue))}function re(e){if("string"==typeof e){var t=JSON.parse(e);if(Array.isArray(t)){var n=t[0],r=t[1];this.closeInfo={code:n,reason:r}}}}function ie(e){return k(this,void 0,void 0,(function(){var t,n,r,o,s,a,c,d;return x(this,(function(u){if(t=y.P6.getEnvInfo(),n=this.root.lookup("easemob.pb.MSync"),"miniCore"===this.name){try{e.data instanceof ArrayBuffer||(l.kg.debug("received message: ".concat(e.data)),re.call(this,e.data)),o=new Uint8Array(e.data),r=n.decode(o)}catch(e){throw new Error("decode message fail.")}return[2,r]}if("web"===t.platform||"zfb"===t.platform||"dd"===t.platform){for('[401,"normal closed"]'===e.data&&(l.kg.debug("received message: ".concat(e.data)),re.call(this,e.data)),s=i().atob(e.data),a=[],c=0,d=s.length;c<d;++c)a.push(s.charCodeAt(c));return[2,n.decode(a)]}try{e.data instanceof ArrayBuffer||(l.kg.debug("received message: ".concat(e.data)),re.call(this,e.data)),r=n.decode(e.data)}catch(e){throw new Error("decode message fail.")}return[2,r]}))}))}function oe(e){var t=this;e.then((function(e){if(e)switch(e.command){case 0:se.call(t,e);break;case 1:V.call(t,e);break;case 2:ne.call(t,e);break;case 3:K.call(t,e);break;default:l.kg.error("unexpected msync command: ".concat(e.command))}else l.kg.error("unexpected msync result: ".concat(e))}))}function se(e){var t,n,r,i,o,c,l,d,u,h,p,f,g,v,_,E,S,T,b,I,C,w,O,M,L,P,j,U,F,V,B,G,W,Y,K,Q,J,X,Z,$,ee;return k(this,void 0,void 0,(function(){var k,te,ne,re,ie,oe,se,ae,ce,le,de,ue,he,pe,fe,me,ge,ye,ve,_e,Ee,Se,Te,be,Ie,Ne,Ce,we,Re,Ae,Oe,Me,De=this;return x(this,(function(x){switch(x.label){case 0:if(k=(k=this.root.lookup("easemob.pb.CommSyncDL")).decode(e.payload),te=new(s())(k.serverId.low,k.serverId.high,k.serverId.unsigned).toString(),ne=new(s())(k.metaId.low,k.metaId.high,k.metaId.unsigned).toString(),!(Number(ne)>0))return[3,10];if(!k.status)return[3,9];if(0!==k.status.errorCode)return[3,8];if((Ce=R.Nl.get(ne))&&(we=Ce.rpt,Re=Ce.requestName,we({isEndApi:!0,data:{isSuccess:1,requestName:Re,requestMethod:"WEBSOCKET",requestUrl:this.url,code:A.dd.success}}),R.Nl.delete(ne)),null==(re=this._msgHash[ne])?void 0:re.isHandleChatroom){try{ie="join"===(null===(t=this._msgHash[ne])||void 0===t?void 0:t.operation),(null===(n=this._msgHash[ne])||void 0===n?void 0:n.resolve)instanceof Function&&ie&&this._msgHash[ne].resolve({type:0,data:{action:"apply",id:this._msgHash[ne].roomId,result:!0,user:this.context.userId}}),(null===(r=this._msgHash[ne])||void 0===r?void 0:r.success)instanceof Function&&ie&&this._msgHash[ne].success({type:0,data:{action:"apply",id:this._msgHash[ne].roomId,result:!0,user:this.context.userId}}),(null===(i=this._msgHash[ne])||void 0===i?void 0:i.resolve)instanceof Function&&!ie&&this._msgHash[ne].resolve({type:0,data:{result:!0}}),(null===(o=this._msgHash[ne])||void 0===o?void 0:o.success)instanceof Function&&!ie&&this._msgHash[ne].success({type:0,data:{result:!0}})}catch(e){Ae=m.Z.create({type:a.E.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"when executing success function error",data:e}),this.onError&&this.onError(Ae),null===(c=this.eventHandler)||void 0===c||c.dispatch("onError",Ae)}delete this._msgHash[ne]}if(!re||re.isHandleChatroom)return[3,7];if(oe=null,se="",ae=0,0!==k.metas.length)try{(ce=y.P6.parseNotify(k.metas[0].payload)).edit_msg&&(le=ce.edit_msg,de=le.count,ue=le.operator,he=le.edit_time,pe=le.sender,fe=le.send_time,oe={operationTime:he,operatorId:ue,operationCount:de},se=pe,ae=Number(fe))}catch(e){Ae=m.Z.create({type:a.E.WEBIM_LOAD_MSG_ERROR,message:"decode message error",data:e}),this.onError&&this.onError(Ae),null===(l=this.eventHandler)||void 0===l||l.dispatch("onError",Ae)}R.TJ.has(ne)&&(R.TJ.get(ne).rpt({isEndApi:!0,data:{isSuccess:1,requestMethod:"WEBSOCKET",requestUrl:this.url,code:A.dd.success,msgId:te}}),R.TJ.delete(ne)),x.label=1;case 1:return x.trys.push([1,5,,6]),me={localMsgId:ne,serverMsgId:te},oe&&(this._msgHash[ne].modifiedInfo=oe,ge=this._msgHash[ne],ye=ge.editMessageId,Ie=ge.type,ve=ge.chatType,_e=ge.msg,Ee=ge.to,Se=ge.translations,Te={id:ye,type:Ie,chatType:ve,msg:_e,modifiedInfo:oe,to:Ee,from:se,time:Number(ae)},Se&&(Te.translations=Se),me.message=Te,null===(h=null===(u=null===(d=this._localCache)||void 0===d?void 0:d.getInstance())||void 0===u?void 0:u.getMessageByServerMsgId(ye))||void 0===h||h.then((function(e){var t,n;e&&"txt"===e.type&&(null===(n=null===(t=De._localCache)||void 0===t?void 0:t.getInstance())||void 0===n||n.putMessageToDB(D(D({},e),{msg:Te.msg,modifiedInfo:Te.modifiedInfo,translations:Te.translations})))}))),[4,null===(f=null===(p=this._localCache)||void 0===p?void 0:p.getInstance())||void 0===f?void 0:f.updateLocalMessage(ne,{serverMsgId:te,status:N.r.SUCCESS})];case 2:return x.sent(),(null===(g=this._msgHash[ne])||void 0===g?void 0:g.success)instanceof Function?[4,this._msgHash[ne].success(ne,te)]:[3,4];case 3:x.sent(),x.label=4;case 4:return(null===(v=this._msgHash[ne])||void 0===v?void 0:v.resolve)instanceof Function&&this._msgHash[ne].resolve(me),[3,6];case 5:return be=x.sent(),Ae=m.Z.create({type:a.E.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"when executing success function error",data:be}),this.onError&&this.onError(Ae),null===(_=this.eventHandler)||void 0===_||_.dispatch("onError",Ae),[3,6];case 6:this.onReceivedMessage&&this.onReceivedMessage({id:ne,mid:te,to:this._msgHash[ne].to,time:0}),null===(E=this.eventHandler)||void 0===E||E.dispatch("onReceivedMessage",{id:ne,mid:te,to:this._msgHash[ne].to}),delete this._msgHash[ne],x.label=7;case 7:return[3,9];case 8:if(15===k.status.errorCode)(null===(S=this._msgHash[ne])||void 0===S?void 0:S.fail)instanceof Function&&this._msgHash[ne].fail({type:a.E.SERVICE_NOT_ALLOW_MESSAGING_MUTE,reason:"you were muted"}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject({type:a.E.SERVICE_NOT_ALLOW_MESSAGING_MUTE,reason:"you were muted"}),null===(b=null===(T=this._localCache)||void 0===T?void 0:T.getInstance())||void 0===b||b.updateLocalMessage(ne,{serverMsgId:te,status:N.r.FAIL});else if(1===k.status.errorCode){switch(Ie=void 0,k.status.reason){case"blocked":Ie=a.E.PERMISSION_DENIED;break;case"group not found":Ie=a.E.GROUP_NOT_EXIST;break;case"not in group or chatroom":Ie=a.E.GROUP_NOT_JOINED;break;case"exceed recall time limit":Ie=a.E.MESSAGE_RECALL_TIME_LIMIT;break;case"message recall disabled":Ie=a.E.SERVICE_NOT_ENABLED;break;case"not in group or chatroom white list":Ie=a.E.SERVICE_NOT_ALLOW_MESSAGING;break;case"nonroster":Ie=a.E.USER_NOT_FRIEND,k.status.reason="not contact";break;case"group is disabled":Ie=a.E.GROUP_IS_DISABLED,k.status.reason="group is disabled";break;case"limit directed users":Ie=a.E.MAX_LIMIT;break;case"Sorry, edit limit reached":Ie=a.E.MAX_LIMIT,k.status.reason="Modify message limit reached";break;case"Sorry, message does not exist":Ie=a.E.MODIFY_MESSAGE_NOT_EXIST,k.status.reason="The message does not exist.";break;case"Sorry, You do not have permission":Ie=a.E.PERMISSION_DENIED,k.status.reason="You do not have the modified permission.";break;case"Sorry, format is incorrect":Ie=a.E.MODIFY_MESSAGE_FORMAT_ERROR,k.status.reason="The modify messaged format error.";break;case"Sorry, edit is not available":Ie=a.E.SERVICE_NOT_ENABLED,k.status.reason="The message modify function is not activated.";break;case"Sorry, edit fail":Ie=a.E.MODIFY_MESSAGE_FAILED,k.status.reason="Modify message failed.";break;default:k.status.reason.includes("grpID")&&k.status.reason.includes("does not exist!")?(Ie=a.E.CHATROOM_NOT_EXIST,k.status.reason="The chat room dose not exist."):k.status.reason.includes("username")&&k.status.reason.includes("doesn't exist!")?Ie=a.E.USER_NOT_FOUND:"group member list is full!"===k.status.reason?Ie=a.E.CHATROOM_MEMBERS_FULL:k.status.reason.includes("can not join this group")&&k.status.reason.includes("is in the blacklist")?(Ie=a.E.PERMISSION_DENIED,k.status.reason="permission denied"):Ie="can not operate this group, reason: group is disabled"===k.status.reason?a.E.GROUP_IS_DISABLED:k.status.reason.includes("moderation")?a.E.MESSAGE_MODERATION_BLOCKED:a.E.SERVER_UNKNOWN_ERROR}this._msgHash[ne]&&((null===(I=this._msgHash[ne])||void 0===I?void 0:I.isHandleChatroom)?(Ne=m.Z.create({type:Ie,message:k.status.reason||"",data:""}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ne),this._msgHash[ne].error instanceof Function&&this._msgHash[ne].error(Ne)):(Ne=m.Z.create({type:Ie,message:k.status.reason||"",data:{id:ne,mid:te}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ne),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail({type:Ie,reason:k.status.reason?k.status.reason:"",data:{id:ne,mid:te}}),null===(w=null===(C=this._localCache)||void 0===C?void 0:C.getInstance())||void 0===w||w.updateLocalMessage(ne,{serverMsgId:te,status:N.r.FAIL})),delete this._msgHash[ne])}else if(7===k.status.errorCode)"sensitive words"===k.status.reason&&this._msgHash[ne]?(Ne=m.Z.create({type:a.E.MESSAGE_INCLUDE_ILLEGAL_CONTENT,message:"sensitive words",data:{id:ne,mid:te}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ne),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail({type:a.E.MESSAGE_INCLUDE_ILLEGAL_CONTENT,data:{id:ne,mid:te,reason:"sensitive words"}}),null===(M=null===(O=this._localCache)||void 0===O?void 0:O.getInstance())||void 0===M||M.updateLocalMessage(ne,{serverMsgId:te,status:N.r.FAIL})):"blocked by mod_antispam"===k.status.reason&&this._msgHash[ne]?(Ne=m.Z.create({type:a.E.MESSAGE_INCLUDE_ILLEGAL_CONTENT,message:"blocked by mod_antispam",data:{id:ne,mid:te}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ne),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail({type:a.E.MESSAGE_INCLUDE_ILLEGAL_CONTENT,data:{id:ne,mid:te,reason:"blocked by mod_antispam"}}),null===(P=null===(L=this._localCache)||void 0===L?void 0:L.getInstance())||void 0===P||P.updateLocalMessage(ne,{serverMsgId:te,status:N.r.FAIL})):"user is mute"===k.status.reason&&this._msgHash[ne]?(Ne=m.Z.create({type:a.E.USER_MUTED_BY_ADMIN,message:"user is mute",data:{id:ne,mid:te}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ne),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail(Ne),null===(U=null===(j=this._localCache)||void 0===j?void 0:j.getInstance())||void 0===U||U.updateLocalMessage(ne,{serverMsgId:te,status:N.r.FAIL})):"traffic limit"===k.status.reason&&this._msgHash[ne]?(Ne=m.Z.create({type:a.E.MESSAGE_CURRENT_LIMITING,message:"traffic limit",data:{id:ne,mid:te}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ne),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail(Ne),null===(V=null===(F=this._localCache)||void 0===F?void 0:F.getInstance())||void 0===V||V.updateLocalMessage(ne,{serverMsgId:te,status:N.r.FAIL})):"Sorry, data is too large"===k.status.reason&&this._msgHash[ne]&&(Ne=m.Z.create({type:a.E.MESSAGE_SIZE_LIMIT,message:"Sorry, data is too large",data:{id:ne,mid:te}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ne),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail(Ne),null===(G=null===(B=this._localCache)||void 0===B?void 0:B.getInstance())||void 0===G||G.updateLocalMessage(ne,{serverMsgId:te,status:N.r.FAIL}));else if(19===k.status.errorCode)this._msgHash[ne]&&(R.TJ.has(ne)&&(R.TJ.get(ne).rpt({isEndApi:!0,data:{isSuccess:0,requestMethod:"WEBSOCKET",requestUrl:this.url,code:a.E.MESSAGE_EXTERNAL_LOGIC_BLOCKED,codeDesc:k.status.reason||"",msgId:te}}),R.TJ.delete(ne)),Ne=m.Z.create({type:a.E.MESSAGE_EXTERNAL_LOGIC_BLOCKED,message:k.status.reason||"",data:{id:ne,mid:te}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ne),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail({type:a.E.MESSAGE_EXTERNAL_LOGIC_BLOCKED,data:{id:ne,mid:te,reason:k.status.reason}}),null===(Y=null===(W=this._localCache)||void 0===W?void 0:W.getInstance())||void 0===Y||Y.updateLocalMessage(ne,{serverMsgId:te,status:N.r.FAIL}));else if(this._msgHash[ne]){R.TJ.has(ne)&&(R.TJ.get(ne).rpt({isEndApi:!0,data:{isSuccess:0,requestMethod:"WEBSOCKET",requestUrl:this.url,code:a.E.WEBIM_LOAD_MSG_ERROR,codeDesc:(null===(K=k.status)||void 0===K?void 0:K.reason)||"",msgId:te}}),R.TJ.delete(ne));try{Ne=m.Z.create({type:a.E.WEBIM_LOAD_MSG_ERROR,message:(null===(Q=k.status)||void 0===Q?void 0:Q.reason)||"",data:{id:ne,mid:te,reason:k.status&&k.status.reason}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ne),null===(X=null===(J=this._localCache)||void 0===J?void 0:J.getInstance())||void 0===X||X.updateLocalMessage(ne,{serverMsgId:te,status:N.r.FAIL}),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail({type:a.E.WEBIM_LOAD_MSG_ERROR,data:{errorCode:k.status&&k.status.errorCode,reason:k.status&&k.status.reason}})}catch(e){Ae=m.Z.create({type:a.E.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"when executing fail function error",data:e}),this.onError&&this.onError(Ae),null===(Z=this.eventHandler)||void 0===Z||Z.dispatch("onError",Ae)}delete this._msgHash[ne]}else R.TJ.has(ne)&&(R.TJ.get(ne).rpt({isEndApi:!0,data:{isSuccess:0,requestMethod:"WEBSOCKET",requestUrl:this.url,code:a.E.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,codeDesc:"on message error",msgId:te}}),R.TJ.delete(ne)),(Ce=R.Nl.get(ne))&&(we=Ce.rpt,Re=Ce.requestName,we({isEndApi:!0,data:{isSuccess:0,requestName:Re,requestMethod:"WEBSOCKET",requestUrl:this.url,code:A.dd.failed,codeDesc:"on message error"}}),R.Nl.delete(ne)),Ae=m.Z.create({type:a.E.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"on message error"}),this.onError&&this.onError(Ae),null===($=this.eventHandler)||void 0===$||$.dispatch("onError",Ae);x.label=9;case 9:return[2];case 10:if(0!==k.metas.length)try{z.call(this,k.metas,k.status)}catch(e){Ae=m.Z.create({type:a.E.WEBIM_LOAD_MSG_ERROR,message:"decode message error",data:e}),this.onError&&this.onError(Ae),null===(ee=this.eventHandler)||void 0===ee||ee.dispatch("onError",Ae)}finally{k.isLast?(Oe=-1,this._queues.some((function(e,t){return e.name===k.name&&(Oe=t,!0)}))&&Oe>0&&this._queues.splice(Oe,1),this._queues.length>0&&(H.call(this,this._queues[0]),this.qTimer&&clearTimeout(this.qTimer))):q.call(this,k.nextKey,k.queue)}else k.isLast&&(Me=-1,this._queues.some((function(e,t){return e.name===k.queue.name&&(Me=t,!0)}))&&this._queues.splice(Me,1),this._queues.length>0&&(H.call(this,this._queues[0]),this.qTimer&&clearTimeout(this.qTimer)));return[2]}}))}))}function ae(e){var t=[],n=this.root.lookup("easemob.pb.KeyValue"),r=[];for(var i in e){var o=n.decode(t);o.key=i,"object"===O(e[i])?(o.type=8,o.stringValue=JSON.stringify(e[i])):"string"==typeof e[i]?(o.type=7,o.stringValue=e[i]):"boolean"==typeof e[i]?(o.type=1,o.varintValue=!0===e[i]?1:0):Number.isInteger(e[i])?(o.type=2,o.varintValue=e[i]):(o.type=6,o.doubleValue=e[i]),r.push(o)}return r}function ce(e){var t,n,r,i=[];if(this.root){var o,c=this.root.lookup("easemob.pb.MessageBody.Content").decode(i);switch(o=!e.group&&"groupchat"!==(null===(t=null==e?void 0:e.chatType)||void 0===t?void 0:t.toLowerCase())||e.roomType?e.group&&e.roomType||"chatroom"===(null===(n=null==e?void 0:e.chatType)||void 0===n?void 0:n.toLowerCase())?"chatRoom":"singleChat":"groupChat",e.type){case"txt":c.type=0,c.text=e.msg;break;case"img":c.type=1,e.body?(c.displayName=e.body.filename,c.remotePath=e.body.url,c.secretKey=e.body.secret,c.fileLength=e.body.file_length,c.size=e.body.size,c.thumbnailDisplayName=e.body.filename):e.file?(c.displayName=e.file.filename,c.remotePath=e.file.url,c.secretKey=e.file.secret,c.fileLength=e.file.file_length,c.size=e.file.size,c.thumbnailDisplayName=e.file.filename):(c.displayName=e.filename,c.remotePath=e.url,c.secretKey=e.secret,c.fileLength=e.file_length,c.size=e.size,c.thumbnailDisplayName=e.filename),e.isBuildCombinedMsg&&(c.size={height:e.height,width:e.width});break;case"video":c.type=2,e.body?(c.displayName=e.body.filename,c.remotePath=e.body.url,c.secretKey=e.body.secret,c.fileLength=e.body.file_length,c.duration=e.body.length,c.thumbnailDisplayName=e.body.filename):e.isBuildCombinedMsg&&(c.displayName=e.filename,c.remotePath=e.url,c.secretKey=e.secret,c.fileLength=e.file_length,c.duration=e.length,c.thumbnailDisplayName=e.filename);break;case"loc":c.type=3,c.latitude=e.lat,c.longitude=e.lng,c.address=e.addr,c.buildingName=e.buildingName,c.latitude=e.lat;break;case"audio":c.type=4,e.body?(c.displayName=e.body.filename,c.remotePath=e.body.url,c.secretKey=e.body.secret,c.fileLength=e.body.file_length,c.duration=e.body.length,c.thumbnailDisplayName=e.body.filename):e.isBuildCombinedMsg&&(c.displayName=e.filename,c.remotePath=e.url,c.secretKey=e.secret,c.fileLength=e.file_length,c.duration=e.length,c.thumbnailDisplayName=e.filename);break;case"file":c.type=5,e.body?(c.displayName=e.body.filename,c.remotePath=e.body.url,c.secretKey=e.body.secret,c.fileLength=e.body.file_length,c.thumbnailDisplayName=e.body.filename):e.isBuildCombinedMsg&&(c.displayName=e.filename,c.remotePath=e.url,c.secretKey=e.secret,c.fileLength=e.file_length,c.thumbnailDisplayName=e.filename);break;case"cmd":c.type=6,c.action=e.action;break;case"custom":c.type=7,c.customEvent=e.customEvent,c.customExts=ae.call(this,e.customExts);break;case"combine":c.type=0,c.subType=0,c.text=e.compatibleText,c.displayName=e.filename,c.remotePath=e.url,c.secretKey=e.secret,c.fileLength=e.file_length,c.title=e.title,c.summary=e.summary,c.combineLevel=e.combineLevel}var d=[];e.ext&&(d=ae.call(this,e.ext));var u=this.root.lookup("easemob.pb.MessageBody"),h=u.decode(i),p=e.from||this.context.jid.name;h.from={name:e.isBuildCombinedMsg?p:this.context.jid.name},h.to={name:e.to},"channel"===e.type?h.type=M.CHANNEL_ACK:"recall"===e.type?(h.type=M.RECALL,h.ackMessageId=e.ackId):"delivery"===e.type?(h.type=M.DELIVER_ACK,h.ackMessageId=e.ackId):"read"===e.type?(h.type=M.READ_ACK,h.ackMessageId=e.ackId,"groupChat"===o&&(h.msgConfig={allowGroupAck:!0},h.ackContent=e.ackContent)):"chatRoom"===o?h.type=M.CHATROOM:"groupChat"===o?(h.type=M.GROUPCHAT,e.msgConfig&&(h.msgConfig={allowGroupAck:!0})):"singleChat"===o&&(h.type=M.SINGLECHAT),e.editMessageId&&(h.type=M.EDIT,h.editMessageId=e.editMessageId),h.contents=[c],h.ext=d;var f=function(e){var t={};return"translations"in e&&(t.translations=e.translations),"isChatThread"in e&&e.isChatThread&&(t.thread={}),Object.keys(t).length>0?JSON.stringify(t):""}(e);f&&(h.meta=f),h=u.encode(h).finish();var m=this.root.lookup("easemob.pb.Meta"),g=m.decode(i);g.id=e.id;var y="easemob.com";if("chatRoom"!==o&&"groupChat"!==o||(y="conference.easemob.com"),g.to={appKey:this.appKey,name:e.to,domain:y},"chatRoom"===o&&(g.ext=ae.call(this,function(e){return{chatroom_msg_tag:"high"===e.priority?0:"low"===e.priority?2:1}}(e))[0]),g.ns=1,g.payload=h,g.routetype=e.deliverOnlineOnly?1:0,"singleChat"!==o&&Array.isArray(e.receiverList)&&(null===(r=e.receiverList)||void 0===r?void 0:r.length)>0&&(g.directedUsers=e.receiverList,g.routetype=2,l.kg.debug("receiverList:",e.receiverList,"thirdMessage",g)),e.isBuildCombinedMsg)return g.timestamp=s().fromValue(e.time),m.encode(g).finish();var v=this.root.lookup("easemob.pb.CommSyncUL"),_=v.decode(i);_.meta=g,_=v.encode(_).finish();var E=this.root.lookup("easemob.pb.MSync"),S=E.decode(i);return S.version=this.version,S.encryptType=this.encryptType,S.command=0,S.payload=_,E.encode(S).finish()}e.fail&&e.fail({type:a.E.WEBIM_CONNCTION_CLIENT_OFFLINE,message:"Not logged in"})}function le(e){var t,n,r=this,i=D({},e);if(e.file)return i.accessToken=this.token,i.appKey=this.appKey,i.apiUrl=this.apiUrl,i.body&&i.body.url?ce.call(this,i):new Promise((function(t,n){var o=i.onFileUploadComplete;i.onFileUploadComplete=function(t){var n,s,a,c;if(t.entities[0]["file-metadata"]){var l=t.entities[0]["file-metadata"]["content-length"];i.file_length=l,i.filetype=t.entities[0]["file-metadata"]["content-type"],l>204800&&(i.thumbnail=!0)}i.body={type:i.type||"file",secret:t.entities[0]["share-secret"],filename:i.file.filename||i.filename,url:(r.isHttpDNS?r.apiUrl+t.uri.substr(t.uri.indexOf("/",9)):t.uri)+"/"+t.entities[0].uuid,length:i.length||0,filetype:i.filetype||i.file.filetype,file_length:(null===(s=null===(n=i.file)||void 0===n?void 0:n.data)||void 0===s?void 0:s.size)||0,size:{width:i.width||0,height:i.height||0}},i.file.url=t.uri,e.secret=t.entities[0]["share-secret"];var d=(r.isHttpDNS?r.apiUrl+t.uri.substr(t.uri.indexOf("/",9)):t.uri)+"/"+t.entities[0].uuid;e.url=d,t.url=d,"img"===i.type&&(e.thumb="".concat(d,"?thumbnail=true"),t.thumb="".concat(d,"?thumbnail=true")),o instanceof Function&&o(t,i.id);var u=ce.call(r,i);R.TJ.size<=R.F3&&R.TJ.set(i.id,{rpt:r.dataReport.geOperateFun({operationName:A.fI.SEND_MSG})}),null===(c=null===(a=r._localCache)||void 0===a?void 0:a.getInstance())||void 0===c||c.storeMessage(e,N.r.INPROGRESS),fe.call(r,u)},y.P6.uploadFile.call(r,i,A.fI.UPLOAD_MSG_ATTACH)}));if("combine"===e.type){i.accessToken=this.token,i.appKey=this.appKey,i.apiUrl=this.apiUrl;var o=i.onFileUploadComplete,s=i.onFileUploadError;return new Promise((function(t,n){var c,d,u,h;if((null===(c=e.messageList)||void 0===c?void 0:c.length)>300||0===(null===(d=e.messageList)||void 0===d?void 0:d.length))return r._msgHash[i.id].reject({type:a.E.MAX_LIMIT,message:"The number of combined messages exceeded the limit."});var p=L([],e.messageList,!0),f=0;if(p.forEach((function(e){(null==e?void 0:e.combineLevel)>f&&(f=null==e?void 0:e.combineLevel)})),i.combineLevel=f+1,i.combineLevel>10)return r._msgHash[i.id].reject({type:a.E.MAX_LIMIT,message:"The level of the merged message exceeded the limit."});var m=de.call(r,p),g=function(t,n){var s,a,c,l,d,u,h=(r.isHttpDNS?r.apiUrl+t.uri.substr(t.uri.indexOf("/",9)):t.uri)+"/"+t.entities[0].uuid,p=null===(s=t.entities[0])||void 0===s?void 0:s["share-secret"],f=h+"?em-redirect=true";p&&(f="".concat(f,"&share-secret=").concat(p)),o instanceof Function&&o({url:f,secret:p}),e.url=f,e.secret=p,i.url=h,i.secret=t.entities[0]["share-secret"],i.filename=(null===(a=i.file)||void 0===a?void 0:a.filename)||(null==n?void 0:n.fileName),i.file_length=(null===(l=null===(c=i.file)||void 0===c?void 0:c.data)||void 0===l?void 0:l.size)||(null==n?void 0:n.fileLength)||0,null===(u=null===(d=r._localCache)||void 0===d?void 0:d.getInstance())||void 0===u||u.storeMessage(e,N.r.INPROGRESS);var m=ce.call(r,i);fe.call(r,m)},v=y.P6.getEnvInfo();if("web"!==v.platform&&"node"!==v.platform&&"quick_app"!==v.platform&&(null===(h=null===(u=v.global)||void 0===u?void 0:u.canIUse)||void 0===h?void 0:h.call(u,"getFileSystemManager"))){var _=v.global.getFileSystemManager(),E=r.apiUrl+"/"+r.orgName+"/"+r.appName+"/chatfiles";_.writeFile({filePath:"".concat(v.global.env.USER_DATA_PATH,"/combine"),data:m.buffer,encoding:"binary",success:function(e){v.global.uploadFile({url:E,filePath:"".concat(v.global.env.USER_DATA_PATH,"/combine"),name:"file",header:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+i.accessToken},success:function(e){if(200===e.statusCode){l.kg.debug("upload success",e);var t=JSON.parse(e.data);g(t,{fileName:"combine",fileLength:m.length})}else l.kg.debug("upload fail"),i.onFileUploadError instanceof Function&&i.onFileUploadError(e),this._msgHash[i.id].reject({type:a.E.WEBIM_UPLOADFILE_ERROR,message:"Failed to upload the merge message.Please try again",data:e})},fail:function(t){l.kg.debug("upload fail"),i.onFileUploadError instanceof Function&&i.onFileUploadError(e),this._msgHash[i.id].reject({type:a.E.WEBIM_UPLOADFILE_ERROR,message:"Failed to upload the merge message.Please try again",data:t})}})},fail:function(e){l.kg.debug("write file fail",e),this._msgHash[i.id].reject({type:a.E.WEBIM_UPLOADFILE_ERROR,message:"Failed to upload the merge message.Please try again",data:e})}})}else{var S=new File([m],"combine",{type:"application/octet-stream"}),T={url:URL.createObjectURL(S),filename:i.id,data:S};i.file=T,i.onFileUploadComplete=function(e){g(e)},i.onFileUploadError=function(e){s instanceof Function&&s(e),r._msgHash[i.id].reject({type:a.E.WEBIM_UPLOADFILE_ERROR,message:"Failed to upload the merge message.Please try again",data:e})},y.P6.uploadFile.call(r,i,A.fI.UPLOAD_MSG_ATTACH)}}))}"img"===e.type&&(i.body||(i.body=D(D({},i),{size:{width:i.width||0,height:i.height||0}}))),null===(n=null===(t=this._localCache)||void 0===t?void 0:t.getInstance())||void 0===n||n.storeMessage(e,N.r.INPROGRESS);var c=ce.call(this,i);fe.call(this,c)}function de(e){for(var t=Uint8Array.from("cm",(function(e){return e.charCodeAt(0)})),n=0;n<e.length;n++){for(var r=e[n],i=D(D({},r),{isBuildCombinedMsg:!0}),o=this.mSync.encodeChatMsg.call(this,i),s=o.length,a=new Uint8Array(4),c=0;c<4;c++)a[c]=s>>8*(3-c)&255;l.kg.debug("message length:",a);var d=new Uint8Array(t.length+a.length+o.length);d.set(t),d.set(a,t.length),d.set(o,t.length+a.length),t=d}var u=new Uint8Array(t.length+1),h=0;for(n=2;n<t.length;n++)n%2==1&&(h^=t[n]);return u.set(t),l.kg.debug("checkResult:",h),u[t.length]=h,u}function ue(e,t,n){var r=[],i=this.root.lookup("easemob.pb.MUCBody"),o=i.decode(r);o.mucId={appKey:this.appKey,name:e,domain:"conference.easemob.com"},o.operation="join"===n?2:3,o.from={name:this.context.userId},o.isChatroom=!0,o=i.encode(o).finish();var s=this.root.lookup("easemob.pb.Meta").decode(r);s.id=t,s.from={appKey:this.appKey,name:this.context.userId,domain:"easemob.com",client_resource:this.context.jid.clientResource},s.to={domain:"easemob.com"},s.ns=2,s.payload=o;var a=this.root.lookup("easemob.pb.CommSyncUL"),c=a.decode(r);c.meta=s,c=a.encode(c).finish();var l=this.root.lookup("easemob.pb.MSync"),d=l.decode(r);return d.version=this.version,d.encryptType=this.encryptType,d.command=0,d.payload=c,l.encode(d).finish()}function he(e,t){var n=y.P6.getUniqueId(),r=ue.call(this,e.roomId,n,t);return fe.call(this,D(D({},e),{isHandleChatroom:!0,joinMsg:r,id:n,operation:t}),n)}function pe(e){var t=this;return new Promise((function(n,r){var i,o,s,c,l,d;if(t.logOut)return r({type:a.E.WEBIM_CONNECTION_CLOSED,message:"not login"});if(!e.id||"string"!=typeof e.id||""===e.id)return r({type:a.E.MESSAGE_PARAMETER_ERROR,message:'Missing required parameter: "id"'});if(!e.to||"string"!=typeof e.to||""===e.to)return r({type:a.E.MESSAGE_PARAMETER_ERROR,message:'Missing required parameter: "to"'});var u="file"===e.type||"img"===e.type||"audio"===e.type||"video"===e.type,h="delivery"===e.type||"read"===e.type||"channel"===e.type,p="cmd"===e.type,f="recall"===e.type,m=null==e?void 0:e.editMessageId,g=!(h||f||p||m);if(e.id){if(!u&&!h||u&&t.useOwnUploadFun){var y="recall"===e.type?A.fI.SEND_RECALL_MSG:A.fI.SEND_MSG;m&&(y=A.fI.MODIFY_MESSAGE),R.TJ.size<=R.F3&&R.TJ.set(e.id,{rpt:t.dataReport.geOperateFun({operationName:y})})}g&&(null===(o=null===(i=t._localCache)||void 0===i?void 0:i.getInstance())||void 0===o||o.storeMessage(e,N.r.CREATE)),t._msgHash[e.id]=D(D({},e),{resolve:n,reject:r})}if(u||"combine"===e.type)return le.call(t,e);if("txt"===e.type&&(null===(s=e.msgConfig)||void 0===s?void 0:s.languages)&&Array.isArray(null===(c=e.msgConfig)||void 0===c?void 0:c.languages)&&e.msgConfig.languages.length>0){var v=t.translateMessage||t.translation.translateMessage;if(!v)throw new Error("there is no method to translate message");v.call(t,{text:e.msg,languages:e.msgConfig.languages}).then((function(n){var r,i,o,s=null===(r=n.data[0])||void 0===r?void 0:r.translations;s=s.map((function(e){return{code:e.to,text:e.text}})),e.translations=s,t._msgHash[e.id].translations=s,null===(o=null===(i=t._localCache)||void 0===i?void 0:i.getInstance())||void 0===o||o.storeMessage(e,N.r.INPROGRESS);var a=ce.call(t,e);fe.call(t,a,e.id)})).catch((function(e){r(e)}))}else{g&&(null===(d=null===(l=t._localCache)||void 0===l?void 0:l.getInstance())||void 0===d||d.storeMessage(e,N.r.INPROGRESS));var _=ce.call(t,e);fe.call(t,_,e.id)}}))}function fe(e,t){var n,r,i=this;if(e.isHandleChatroom){if(!this.isOpened()){var o={data:"",type:a.E.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"};return Promise.reject(o)}return new Promise((function(n,r){var o;i._msgHash[e.id]=D(D({},e),{resolve:n,reject:r}),o="miniCore"===i.name?e.joinMsg:U.call(i,e.joinMsg,t),i.sock.send(o)}))}if(!this.isOpened())return null===(n=this.unMSyncSendMsgMap)||void 0===n||n.set(t,e),!this.logOut&&this.autoReconnectNumTotal<this.autoReconnectNumMax&&(this.autoReconnectNumTotal<=this.socketHost.length&&this.isHttpDNS||!this.isHttpDNS)&&(l.kg.debug("need to reconnect",this.autoReconnectNumTotal,this.autoReconnectNumMax),this.offLineSendConnecting=!0,this.reconnecting||this.reconnect()),void(this.onError&&this.onError({type:a.E.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"}));r="miniCore"===this.name?e:U.call(this,e,t),this.sock.send(r)}var me=function(e,t){return e.send=pe,e.sendMsg=pe,l.kg.debug("init Msync by ".concat(e.name)),{generateProvision:j.bind(e),base64transform:U.bind(e),distributeMeta:F.bind(e),decodeMeta:z.bind(e),decodeUnreadDL:V.bind(e),_rebuild:B.bind(e),_lastsession:W.bind(e),receiveProvision:K.bind(e),isInQueue:te.bind(e),decodeNotice:ne.bind(e),decodeMSync:ie.bind(e),distributeMSync:oe.bind(e),encodeChatMsg:ce.bind(e),upLoadFile:le.bind(e),send:pe.bind(e),stopHeartBeat:$.bind(e),handleChatRoom:he.bind(e)}}},7252:function(e,t){"use strict";var n=function(){function e(e){this.type=e.type,this.message=e.message,this.data=e.data}return e.create=function(t){return new e(t)},e}();t.Z=n},8161:function(e,t,n){"use strict";n(9601),n(1539),n(8674),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948),n(7941),n(3710),n(9714),n(9653),n(9554),n(4747),n(8309),n(2772),n(2222);var r=n(3720),i=n.n(r),o=n(4363),s=n(4370),a=n(9335),c=n(9743),l=n(7360),d=n(2449),u=n(7288),h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},h.apply(this,arguments)},p=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},f=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},m={0:"TEXT",1:"IMAGE",2:"VIDEO",3:"LOCATION",4:"VOICE",5:"FILE",6:"COMMAND",7:"CUSTOM",8:"COMBINE"};function g(e){for(var t={},n=0;n<e.length;n++)if(8===e[n].type)t[e[n].key]=JSON.parse(e[n].stringValue);else if(7===e[n].type)t[e[n].key]=e[n].stringValue;else if(6===e[n].type)t[e[n].key]=e[n].doubleValue;else if(5===e[n].type)t[e[n].key]=e[n].floatValue;else if(1===e[n].type){var r=e[n].varintValue,o=new(i())(r.low,r.high,r.unsigned).toString();t[e[n].key]=0!==Number(o)}else 2!==e[n].type&&3!==e[n].type&&4!==e[n].type||(r=e[n].varintValue,o=new(i())(r.low,r.high,r.unsigned).toString(),t[e[n].key]=Number(o));return t}function y(e){var t,n,r,i,s,c,d,h,y,v,_,E,S,T,b,I,N,C,w,R,A,O,M,D,k,x,L;return p(this,void 0,void 0,(function(){var p,P,j,U,F,z,V,B,G,H,W,Y,q,K,Q,J,X,Z,$,ee,te,ne,re,ie,oe,se,ae,ce,le,de,ue,he,pe,fe,me,ge,ye,ve,_e,Ee,Se,Te,be,Ie,Ne,Ce,we,Re;return f(this,(function(f){switch(f.label){case 0:switch(p=e.status,P=e.thirdMessage,j=e.msgBody,U=e.msgId,F=e.type,z=e.from,V=e.to,B=e.time,G=e.onlineState,H=e.chatType,W=e.ignoreCallback,Y=e.priority,q=e.format,K={},Q={},J=p.errorCode>0,X=p.errorCode,Z=p.reason,$={},ee=[],te=[],ne={},re="",ie=0,oe=null,se=null,P.ext&&($=g(P.ext)),P.meta&&"string"==typeof P.meta&&((ce=JSON.parse(P.meta)).reaction&&(ee=ce.reaction).forEach((function(e){e.isAddedBySelf=e.state,delete e.state})),ce.translations&&(te=ce.translations),ce.edit_msg&&(le=ce.edit_msg,de=le.count,ue=le.operator,he=le.edit_time,pe=le.sender,fe=le.send_time,ne={operationTime:he,operatorId:ue,operationCount:de},re=pe,ie=fe),ce.thread&&"{}"!==JSON.stringify(ce.thread)&&(oe={messageId:ce.thread.msg_parent_id,parentId:ce.thread.muc_parent_id,chatThreadName:ce.thread.thread_name}),ce.thread_overview&&"{}"!==JSON.stringify(ce.thread_overview)&&(se={id:ce.thread_overview.id,parentId:ce.thread_overview.muc_parent_id,name:ce.thread_overview.name,lastMessage:ce.thread_overview.last_message&&"{}"!==JSON.stringify(ce.thread_overview.last_message)?(0,o.w)(ce.thread_overview.last_message):null,createTimestamp:ce.thread_overview.create_timestamp,updateTimestamp:ce.thread_overview.update_timestamp,messageCount:ce.thread_overview.message_count||0})),j.type){case 0:return[3,1];case 1:return[3,7];case 2:return[3,10];case 3:return[3,13];case 4:return[3,16];case 5:return[3,19];case 6:return[3,22];case 7:return[3,23];case 8:return[3,26]}return[3,27];case 1:return Object.prototype.hasOwnProperty.call(j,"subType")&&0===j.subType?(ae=(j.remotePath&&this.apiUrl+j.remotePath.substr(j.remotePath.indexOf("/",9)))+"?em-redirect=true",j.secretKey&&(ae="".concat(ae,"&share-secret=").concat(j.secretKey)),me={id:U,type:"combine",chatType:H,to:V,from:z,ext:$,time:Number(B),onlineState:G,title:j.title||"",summary:j.summary||"",url:ae||"",secret:j.secretKey||"",file_length:j.fileLength||0,filename:j.displayName||"",compatibleText:j.text,combineLevel:j.combineLevel||0},K.msgConfig&&(me.msgConfig=K.msgConfig),ee.length>0&&(me.reactions=ee),oe&&(me.chatThread=oe),se&&(me.chatThreadOverview=se),"chatRoom"===H&&(me.priority=Y),Q=me,W?[3,3]:[4,null===(n=null===(t=this._localCache)||void 0===t?void 0:t.getInstance())||void 0===n?void 0:n.storeMessage(me,u.r.SUCCESS)]):[3,4];case 2:f.sent(),null===(r=this.eventHandler)||void 0===r||r.dispatch("onCombineMessage",me),f.label=3;case 3:return[3,28];case 4:return!(K={id:U,type:F,contentsType:m[j.type],from:z,to:V,data:j.text,ext:$,sourceMsg:j.text,time:B,msgConfig:P.msgConfig,onlineState:G}).msgConfig&&delete P.msgConfig,K.error=J,K.errorText=Z,K.errorCode=X,!W&&this.onTextMessage&&this.onTextMessage(K),ge={id:U,type:"txt",chatType:H,msg:j.text,to:V,from:z,ext:$,time:Number(B),onlineState:G},K.msgConfig&&(ge.msgConfig=K.msgConfig),ee.length>0&&(ge.reactions=ee),oe&&(ge.chatThread=oe),se&&(ge.chatThreadOverview=se),te.length>0&&(ge.translations=te),ne.operationCount>0&&(ge.modifiedInfo=ne,P.type===a.g.EDIT&&(ge.from=re,ge.time=ie)),"chatRoom"===H&&(ge.priority=Y),Q=ge,W?[3,6]:[4,null===(s=null===(i=this._localCache)||void 0===i?void 0:i.getInstance())||void 0===s?void 0:s.storeMessage(ge,u.r.SUCCESS)];case 5:f.sent(),null===(c=this.eventHandler)||void 0===c||c.dispatch("onTextMessage",ge),f.label=6;case 6:return[3,28];case 7:return ye=(null===(d=null==j?void 0:j.size)||void 0===d?void 0:d.width)||0,ve=(null===(h=null==j?void 0:j.size)||void 0===h?void 0:h.height)||0,ae=this.useOwnUploadFun?j.remotePath:(j.remotePath&&this.apiUrl+j.remotePath.substr(j.remotePath.indexOf("/",9)))+"?em-redirect=true",j.secretKey&&!this.useOwnUploadFun&&(ae="".concat(ae,"&share-secret=").concat(j.secretKey)),!(K={id:U,type:F,contentsType:m[j.type],from:z,to:V,url:ae,secret:j.secretKey,filename:j.displayName,thumb:this.useOwnUploadFun?"":"".concat(ae,"&thumbnail=true"),thumb_secret:j.secretKey,file_length:j.fileLength||"",width:ye,height:ve,filetype:j.filetype||"",accessToken:this.token,ext:$,time:B,msgConfig:P.msgConfig,onlineState:G}).delay&&delete K.delay,!K.msgConfig&&delete P.msgConfig,K.error=J,K.errorText=Z,K.errorCode=X,!W&&this.onPictureMessage&&this.onPictureMessage(K),_e={id:U,type:"img",chatType:H,from:z,to:V,url:ae||"",width:ye,height:ve,secret:j.secretKey||"",thumb:this.useOwnUploadFun?"":"".concat(ae,"&thumbnail=true"),thumb_secret:j.secretKey,file_length:j.fileLength||0,ext:$,time:Number(B),onlineState:G},K.msgConfig&&(_e.msgConfig=K.msgConfig),ee.length>0&&(_e.reactions=ee),oe&&(_e.chatThread=oe),se&&(_e.chatThreadOverview=se),"chatRoom"===H&&(_e.priority=Y),Q=_e,W?[3,9]:[4,null===(v=null===(y=this._localCache)||void 0===y?void 0:y.getInstance())||void 0===v?void 0:v.storeMessage(_e,u.r.SUCCESS)];case 8:f.sent(),null===(_=this.eventHandler)||void 0===_||_.dispatch("onImageMessage",_e),f.label=9;case 9:return[3,28];case 10:return ae=this.useOwnUploadFun?j.remotePath:(j.remotePath&&this.apiUrl+j.remotePath.substr(j.remotePath.indexOf("/",9)))+"?em-redirect=true",j.secretKey&&!this.useOwnUploadFun&&(ae="".concat(ae,"&share-secret=").concat(j.secretKey)),!(K={id:U,type:F,contentsType:m[j.type],from:z,to:V,url:ae,secret:j.secretKey,filename:j.displayName,length:j.duration||"",file_length:j.fileLength||"",filetype:j.filetype||"",accessToken:this.token||"",ext:$,time:B,msgConfig:P.msgConfig,onlineState:G}).delay&&delete K.delay,!K.msgConfig&&delete P.msgConfig,K.error=J,K.errorText=Z,K.errorCode=X,!W&&this.onVideoMessage&&this.onVideoMessage(K),Ee={id:U,type:"video",chatType:H,from:z,to:V,url:ae,secret:j.secretKey,filename:j.displayName,length:j.duration||0,file:{},file_length:j.fileLength||0,filetype:j.filetype||"",accessToken:this.token||"",ext:$,time:Number(B),onlineState:G},K.msgConfig&&(Ee.msgConfig=K.msgConfig),ee.length>0&&(Ee.reactions=ee),oe&&(Ee.chatThread=oe),se&&(Ee.chatThreadOverview=se),"chatRoom"===H&&(Ee.priority=Y),Q=Ee,W?[3,12]:[4,null===(S=null===(E=this._localCache)||void 0===E?void 0:E.getInstance())||void 0===S?void 0:S.storeMessage(Ee,u.r.SUCCESS)];case 11:f.sent(),null===(T=this.eventHandler)||void 0===T||T.dispatch("onVideoMessage",Ee),f.label=12;case 12:return[3,28];case 13:return!(K={id:U,type:F,contentsType:m[j.type],from:z,to:V,addr:j.address,buildingName:j.buildingName,lat:j.latitude,lng:j.longitude,ext:$,time:B,msgConfig:P.msgConfig,onlineState:G}).delay&&delete K.delay,!K.msgConfig&&delete P.msgConfig,K.error=J,K.errorText=Z,K.errorCode=X,!W&&this.onLocationMessage&&this.onLocationMessage(K),Se={id:U,type:"loc",chatType:H,from:z,to:V,buildingName:j.buildingName,addr:j.address,lat:j.latitude,lng:j.longitude,ext:$,time:Number(B),onlineState:G},K.msgConfig&&(Se.msgConfig=K.msgConfig),ee.length>0&&(Se.reactions=ee),oe&&(Se.chatThread=oe),se&&(Se.chatThreadOverview=se),"chatRoom"===H&&(Se.priority=Y),Q=Se,W?[3,15]:[4,null===(I=null===(b=this._localCache)||void 0===b?void 0:b.getInstance())||void 0===I?void 0:I.storeMessage(Se,u.r.SUCCESS)];case 14:f.sent(),null===(N=this.eventHandler)||void 0===N||N.dispatch("onLocationMessage",Se),f.label=15;case 15:return[3,28];case 16:return ae=this.useOwnUploadFun?j.remotePath:(j.remotePath&&this.apiUrl+j.remotePath.substr(j.remotePath.indexOf("/",9)))+"?em-redirect=true",j.secretKey&&!this.useOwnUploadFun&&(ae="".concat(ae,"&share-secret=").concat(j.secretKey)),!(K={id:U,type:F,contentsType:m[j.type],from:z,to:V,url:ae,secret:j.secretKey,filename:j.displayName,file_length:j.fileLength||"",accessToken:this.token||"",ext:$,length:j.duration,time:B,msgConfig:P.msgConfig,onlineState:G}).delay&&delete K.delay,!K.msgConfig&&delete P.msgConfig,K.error=J,K.errorText=Z,K.errorCode=X,!W&&this.onAudioMessage&&this.onAudioMessage(K),Te={id:U,type:"audio",chatType:H,from:z,to:V,url:ae,secret:j.secretKey,file:{},filename:j.displayName,length:j.duration||0,file_length:j.fileLength||0,filetype:j.filetype||"",accessToken:this.token||"",ext:$,time:Number(B),onlineState:G},K.msgConfig&&(Te.msgConfig=K.msgConfig),ee.length>0&&(Te.reactions=ee),oe&&(Te.chatThread=oe),se&&(Te.chatThreadOverview=se),"chatRoom"===H&&(Te.priority=Y),Q=Te,W?[3,18]:[4,null===(w=null===(C=this._localCache)||void 0===C?void 0:C.getInstance())||void 0===w?void 0:w.storeMessage(Te,u.r.SUCCESS)];case 17:f.sent(),null===(R=this.eventHandler)||void 0===R||R.dispatch("onAudioMessage",Te),f.label=18;case 18:return[3,28];case 19:return ae=this.useOwnUploadFun?j.remotePath:(j.remotePath&&this.apiUrl+j.remotePath.substr(j.remotePath.indexOf("/",9)))+"?em-redirect=true",j.secretKey&&!this.useOwnUploadFun&&(ae="".concat(ae,"&share-secret=").concat(j.secretKey)),!(K={id:U,type:F,contentsType:m[j.type],from:z,to:V,url:ae,secret:j.secretKey,filename:j.displayName,file_length:j.fileLength,accessToken:this.token||"",ext:$,time:B,msgConfig:P.msgConfig,onlineState:G}).delay&&delete K.delay,!K.msgConfig&&delete P.msgConfig,K.error=J,K.errorText=Z,K.errorCode=X,!W&&this.onFileMessage&&this.onFileMessage(K),be={id:U,type:"file",chatType:H,from:z,to:V,url:ae,secret:j.secretKey,file:{},filename:j.displayName,length:j.duration||0,file_length:j.fileLength||0,filetype:j.filetype||"",accessToken:this.token||"",ext:$,time:Number(B),onlineState:G},K.msgConfig&&(be.msgConfig=K.msgConfig),ee.length>0&&(be.reactions=ee),oe&&(be.chatThread=oe),se&&(be.chatThreadOverview=se),"chatRoom"===H&&(be.priority=Y),Q=be,W?[3,21]:[4,null===(O=null===(A=this._localCache)||void 0===A?void 0:A.getInstance())||void 0===O?void 0:O.storeMessage(be,u.r.SUCCESS)];case 20:f.sent(),null===(M=this.eventHandler)||void 0===M||M.dispatch("onFileMessage",be),f.label=21;case 21:return[3,28];case 22:return!(K={id:U,type:F,contentsType:m[j.type],from:z,to:V,action:j.action,ext:$,time:B,msgConfig:P.msgConfig,onlineState:G}).msgConfig&&delete P.msgConfig,K.error=J,K.errorText=Z,K.errorCode=X,!W&&this.onCmdMessage&&this.onCmdMessage(K),Ie={id:U,type:"cmd",chatType:H,from:z,to:V,action:j.action,ext:$,time:Number(B),onlineState:G},K.msgConfig&&(Ie.msgConfig=K.msgConfig),ee.length>0&&(Ie.reactions=ee),oe&&(Ie.chatThread=oe),se&&(Ie.chatThreadOverview=se),"chatRoom"===H&&(Ie.priority=Y),Q=Ie,W||null===(D=this.eventHandler)||void 0===D||D.dispatch("onCmdMessage",Ie),[3,28];case 23:return Ne={},Ce={},P.contents[0].customExts&&(Ne=g(P.contents[0].customExts)),P.contents[0].params&&(Ce=g(P.contents[0].params)),K={id:U,type:F,contentsType:m[j.type],from:z,to:V,customEvent:j.customEvent,params:Ce,customExts:Ne,ext:$,time:B,onlineState:G},!W&&this.onCustomMessage&&this.onCustomMessage(K),we={id:U,type:"custom",chatType:H,from:z,to:V,customEvent:j.customEvent,params:Ce,customExts:Ne,ext:$,time:Number(B),onlineState:G},K.msgConfig&&(we.msgConfig=K.msgConfig),ee.length>0&&(we.reactions=ee),oe&&(we.chatThread=oe),se&&(we.chatThreadOverview=se),"chatRoom"===H&&(we.priority=Y),Q=we,W?[3,25]:[4,null===(x=null===(k=this._localCache)||void 0===k?void 0:k.getInstance())||void 0===x?void 0:x.storeMessage(we,u.r.SUCCESS)];case 24:f.sent(),null===(L=this.eventHandler)||void 0===L||L.dispatch("onCustomMessage",we),f.label=25;case 25:return[3,28];case 26:return ae=(j.remotePath&&this.apiUrl+j.remotePath.substr(j.remotePath.indexOf("/",9)))+"?em-redirect=true",j.secretKey&&(ae="".concat(ae,"&share-secret=").concat(j.secretKey)),Re={id:U,type:"combine",chatType:H,to:V,from:z,ext:$,time:Number(B),onlineState:G,title:j.title||"",summary:j.summary||"",url:ae||"",secret:j.secretKey||"",file_length:j.fileLength||0,filename:j.displayName||"",compatibleText:j.text,combineLevel:j.combineLevel||0},K.msgConfig&&(Re.msgConfig=K.msgConfig),ee.length>0&&(Re.reactions=ee),oe&&(Re.chatThread=oe),se&&(Re.chatThreadOverview=se),"chatRoom"===H&&(Re.priority=Y),Q=Re,!W&&this.eventHandler&&this.eventHandler.dispatch("onCombineMessage",Re),[3,28];case 27:return l.kg.error("Unknow message type, message:",j),[3,28];case 28:return q?[2,Q]:[2,K]}}))}))}function v(e,t,n){if(this.delivery&&e!==t){var r=this.getUniqueId(),i=new d.Message("delivery",r);i.set({ackId:n,to:e}),l.kg.debug("send delivery ack"),this.send(i.body)}}t.Z=function(e,t,n,r){var o,d,u,m,_,E,S,T,b,I,N,C,w,R,A,O,M,D,k,x;return p(this,void 0,void 0,(function(){var p,L,P,j,U,F,z,V,B,G,H,W,Y,q,K,Q,J,X,Z,$,ee,te,ne,re,ie,oe,se,ae;return f(this,(function(f){switch(f.label){case 0:if(p=new(i())(e.timestamp.low,e.timestamp.high,e.timestamp.unsigned).toString(),L=this.root.lookup("easemob.pb.MessageBody"),P=L.decode(e.payload),j=1,e.meta&&e.meta.length)switch(s.P6.parseNotify(e.meta).is_online){case 0:j=0;break;case 1:j=1;break;default:j=2}else j=3;switch(U=new(i())(e.id.low,e.id.high,e.id.unsigned).toString(),F=P.ackMessageId?new(i())(P.ackMessageId.low,P.ackMessageId.high,P.ackMessageId.unsigned).toString():"",z="",V=P.from&&P.from.name,B=P.to&&P.to.name,l.kg.debug("thirdMessage:",P),P.type){case a.g.SINGLECHAT:return[3,1];case a.g.GROUPCHAT:return[3,2];case a.g.CHATROOM:return[3,3];case a.g.READ_ACK:return[3,4];case a.g.DELIVER_ACK:return[3,5];case a.g.RECALL:return[3,6];case a.g.CHANNEL_ACK:return[3,15];case a.g.EDIT:return[3,16]}return[3,19];case 1:return z="chat","agoraToken"===this.grantType&&(z="singleChat"),this.delivery&&!n&&V!==this.context.userId&&v.call(this,V,B,U),[3,20];case 2:return z="groupchat","agoraToken"===this.grantType&&(z="groupChat"),[3,20];case 3:return z="chatroom","agoraToken"===this.grantType&&(z="chatRoom"),j=1,[3,20];case 4:return z="read_ack",G=void 0,P.ext[0]&&JSON.parse(P.ext[0].stringValue)?(G={id:U,type:"read",from:V,to:B,mid:F,groupReadCount:P.ext[0]&&JSON.parse(P.ext[0].stringValue),ackContent:P.ackContent,onlineState:j},this.onReadMessage&&this.onReadMessage(G),null===(o=this.eventHandler)||void 0===o||o.dispatch("onReadMessage",G),[2]):(G={id:U,type:"read",from:V,to:B,mid:F,onlineState:j},this.onReadMessage&&this.onReadMessage(G),null===(d=this.eventHandler)||void 0===d||d.dispatch("onReadMessage",G),[2]);case 5:return z="deliver_ack",this.onDeliveredMessage&&this.onDeliveredMessage({id:U,type:"delivery",from:V,to:B,mid:F,onlineState:j}),H={id:U,type:"delivery",from:V,to:B,mid:F,onlineState:j},null===(u=this.eventHandler)||void 0===u||u.dispatch("onDeliveredMessage",H),[2];case 6:return z="recall",W={id:U,from:V||"admin",to:B,mid:F,onlineState:j},Y=B===this.user?V:B,[4,null===(_=null===(m=this._localCache)||void 0===m?void 0:m.getInstance())||void 0===_?void 0:_.getMessageByServerMsgId(W.mid)];case 7:return(q=f.sent())?[4,null===(S=null===(E=this._localCache)||void 0===E?void 0:E.getInstance())||void 0===S?void 0:S.removeMsgByServerMsgId(W.mid)]:[3,9];case 8:f.sent(),f.label=9;case 9:return"singleChat"!==(null==q?void 0:q.chatType)&&"groupChat"!==(null==q?void 0:q.chatType)?[3,14]:(K=(null==q?void 0:q.from)===this.user||""===(null==q?void 0:q.from),[4,null===(b=null===(T=this._localCache)||void 0===T?void 0:T.getInstance())||void 0===b?void 0:b.getConversationLastMessage(Y,q.chatType)]);case 10:return Q=f.sent(),[4,null===(N=null===(I=this._localCache)||void 0===I?void 0:I.getInstance())||void 0===N?void 0:N.getConversationBySessionId((0,c.MQ)({conversationId:Y,conversationType:q.chatType}))];case 11:return(J=f.sent())?[4,null===(w=null===(C=this._localCache)||void 0===C?void 0:C.getInstance())||void 0===w?void 0:w.updateLocalConversation((0,c.MQ)({conversationId:Y,conversationType:q.chatType}),{lastMessageId:null==Q?void 0:Q.serverMsgId,unReadCount:(0,c.E7)({conversation:J,isRecallSelfMsg:K,recalledMsgTime:q.time})})]:[3,13];case 12:f.sent(),f.label=13;case 13:f.label=14;case 14:return this.onRecallMessage&&this.onRecallMessage(W),null===(R=this.eventHandler)||void 0===R||R.dispatch("onRecallMessage",W),[2];case 15:return this.onChannelMessage&&this.onChannelMessage({id:U,type:"channel",chatType:"singleChat",from:V,to:B,time:Number(p),onlineState:j}),X={id:U,type:"channel",chatType:"singleChat",from:V,to:B,time:Number(p),onlineState:j},null===(A=this.eventHandler)||void 0===A||A.dispatch("onChannelMessage",X),[2];case 16:return Z={errorCode:0,reason:""},[4,y.call(this,{status:Z,thirdMessage:P,msgBody:P.contents[0],msgId:U,type:z,from:V,to:B,time:p,onlineState:j,ignoreCallback:!0,format:!0})];case 17:return $=f.sent(),ee=!!e.to&&-1!==e.to.domain.indexOf("conference"),$.chatType=ee?"groupChat":"singleChat",te=P.editMessageId&&new(i())(P.editMessageId.low,P.editMessageId.high,P.editMessageId.unsigned).toString(),ne={id:te,type:$.type,chatType:$.chatType,msg:$.msg,to:$.to,from:$.from,time:$.time,modifiedInfo:$.modifiedInfo},$.translations&&(ne.translations=$.translations),[4,null===(M=null===(O=this._localCache)||void 0===O?void 0:O.getInstance())||void 0===M?void 0:M.getMessageByServerMsgId(te)];case 18:return"txt"===(null==(re=f.sent())?void 0:re.type)&&(null===(k=null===(D=this._localCache)||void 0===D?void 0:D.getInstance())||void 0===k||k.putMessageToDB(h(h({},re),{msg:ne.msg,modifiedInfo:ne.modifiedInfo,translations:ne.translations}))),"txt"===$.type&&(null===(x=this.eventHandler)||void 0===x||x.dispatch("onModifiedMessage",ne)),[2];case 19:return l.kg.error("unexpected message type: ".concat(P.type)),[2];case 20:ie="normal","chat"===z.toLowerCase()||"singleChat"===z?oe="singleChat":"groupchat"===z.toLowerCase()||"groupChat"===z?oe="groupChat":(oe="chatRoom",j=1,e.ext&&(se=g([e.ext]),ie=0===se.chatroom_msg_tag?"high":2===se.chatroom_msg_tag?"low":"normal")),ae=0,f.label=21;case 21:return ae<P.contents.length?[4,y.call(this,{status:t,thirdMessage:P,msgBody:P.contents[ae],msgId:U,type:z,from:V,to:B,time:p,onlineState:j,chatType:oe,ignoreCallback:n,priority:ie,format:r})]:[3,24];case 22:return[2,f.sent()];case 23:return ae++,[3,21];case 24:return[2]}}))}))}},4968:function(e,t,n){"use strict";n(8309);var r,i=n(7360),o=n(2071),s=n(1595);!function(e){e[e.Add=2]="Add",e[e.Remove=3]="Remove",e[e.Accept=4]="Accept",e[e.Decline=5]="Decline",e[e.Ban=6]="Ban",e[e.Allow=7]="Allow"}(r||(r={}));var a={operatRoster:function(e,t,n,a){var c=[],l=this.root.lookup("easemob.pb.RosterBody"),d=l.decode(c);switch(t){case"add":d.operation=r.Add;break;case"remove":d.operation=r.Remove;break;case"accept":d.operation=r.Accept;break;case"decline":d.operation=r.Decline;break;case"ban":d.operation=r.Ban;break;case"allow":d.operation=r.Allow;break;default:i.kg.error("operatRoster:",t)}d.from=this.context.jid;var u=[];if("string"==typeof e.to)u.push({appKey:this.appKey||this.context.appKey,name:e.to,domain:"easemob.com"});else if(e.to instanceof Array)for(var h=0;h<e.to.length;h++)u.push({appKey:this.appKey,name:e.to[h],domain:"easemob.com"});d.to=u,d.reason=e.message||"",d=l.encode(d).finish();var p=this.root.lookup("easemob.pb.Meta").decode(c);p.id=e.id||this.getUniqueId();var f=this.dataReport.geOperateFun({operationName:s.fI[t]});o.Nl.size<=o.F3&&o.Nl.set(p.id,{rpt:f,requestName:s.fI[t],resolve:n,reject:a}),p.from=this.context.jid,p.to={domain:"@easemob.com"},p.ns=3,p.payload=d;var m=this.root.lookup("easemob.pb.CommSyncUL"),g=m.decode(c);g.meta=p,g=m.encode(g).finish();var y=this.root.lookup("easemob.pb.MSync"),v=y.decode(c);if(v.version=this.version,v.encryptType=[0],v.command=0,v.guid=this.jid,v.payload=g,v=y.encode(v).finish(),"miniCore"===this.name)this.sock.send(v);else{var _=this.mSync.base64transform(v);this.sock.send(_)}},handleRosterMsg:function(e){var t,n,r,o,s,a,c=this.root.lookup("easemob.pb.RosterBody").decode(e.payload),l={type:"",to:c.to[0].name,from:c.from.name,status:c.reason};switch(c.operation){case 2:l.type="subscribe",this.onContactInvited&&this.onContactInvited(l),null===(t=this.eventHandler)||void 0===t||t.dispatch("onContactInvited",l);break;case 3:l.type="unsubscribed",this.onContactDeleted&&this.onContactDeleted(l),null===(n=this.eventHandler)||void 0===n||n.dispatch("onContactDeleted",l);break;case 4:l.type="subscribed",this.onContactAdded&&this.onContactAdded(l),null===(r=this.eventHandler)||void 0===r||r.dispatch("onContactAdded",l);break;case 5:l.type="unsubscribed",this.onContactRefuse&&this.onContactRefuse(l),null===(o=this.eventHandler)||void 0===o||o.dispatch("onContactRefuse",l);break;case 6:case 7:break;case 8:l.type="subscribed",this.onContactAgreed&&this.onContactAgreed(l),null===(s=this.eventHandler)||void 0===s||s.dispatch("onContactAgreed",l);break;case 9:l.type="unsubscribed",this.onContactRefuse&&this.onContactRefuse(l),null===(a=this.eventHandler)||void 0===a||a.dispatch("onContactRefuse",l);break;default:i.kg.error("handleRosterMsg:",c)}this.onPresence&&l.type&&this.onPresence(l)}};t.Z=a},7288:function(e,t,n){"use strict";var r;n.d(t,{r:function(){return r}}),function(e){e[e.CREATE=0]="CREATE",e[e.FAIL=1]="FAIL",e[e.INPROGRESS=2]="INPROGRESS",e[e.SUCCESS=3]="SUCCESS"}(r||(r={}))},9743:function(e,t,n){"use strict";n.d(t,{E7:function(){return i},MQ:function(){return r},un:function(){return o}}),n(2222);var r=function(e){return"".concat(e.conversationType,"-").concat(e.conversationId)},i=function(e){var t=e.isRecallSelfMsg,n=e.conversation,r=e.recalledMsgTime,i=n.unReadCount,o=void 0===i?0:i,s=n.unreadCountClearTimestamp;return t||(void 0===s?0:s)>r?o:o&&o>0?o-1:0},o=function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n}},7360:function(e,t,n){"use strict";function r(){console.log&&(console.log.apply?console.log.apply(console,Array.prototype.slice.call(arguments)):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}n.d(t,{kg:function(){return p}}),n(7042),n(2222),n(8309),n(9600),n(6992),n(1539),n(8783),n(3948),n(285),n(1637),n(4812),n(3710),n(9554),n(2772),n(4916),n(2526),n(1817),n(2165);var i="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var s,a=function(){},c={};!function(e){e[e.TRACE=0]="TRACE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(s||(s={}));var l=function(){function e(e,t,n){this.name=e||"defaultLogger",this.currentLevel=0,this.useCookiePersist=!1,this.storageLogLevelKey="loglevel",this.levels=s,this.logMethods=["trace","debug","info","warn","error"],this.methodFactory=n||this.defaultMethodFactory;var r=this._getPersistedLevel();null==r&&(r=null===t?"WARN":t),this.logs=[],this.config={useCache:!1,maxCache:3145728,color:"",background:""},this.logBytes=0,this.setLevel(r,!1,"")}return e.prototype.setConfig=function(e){this.config=e},e.prototype.getLevel=function(){return this.currentLevel},e.prototype.setLevel=function(e,t,n){if("string"==typeof e&&(e=s[e]),void 0===e&&(e=0),!("number"==typeof e&&e>=0&&e<=this.levels.SILENT))throw Error("log.setLevel() called with invalid level: "+e);if(this.currentLevel=e,!1!==t&&this._persistLevel(e),this.replaceLoggingMethods(e,n),"undefined"==typeof console&&e<s.SILENT)throw Error("No console available for logging")},e.prototype.setDefaultLevel=function(e){this._getPersistedLevel()||this.setLevel(e,!1,"")},e.prototype.enableAll=function(e){this.setLevel(this.levels.TRACE,!0,"")},e.prototype.disableAll=function(e){this.setLevel(this.levels.SILENT,!0,"")},e.prototype.getLogs=function(){return this.logs},e.prototype.download=function(){if("undefined"!=typeof window&&"undefined"!=typeof document){var e=this.getLogs().join("\n"),t=new Blob([e],{type:"text/plain;charset=UTF-8"}),n=window.URL.createObjectURL(t),r=document.createElement("a");r.style.display="none",r.href=n,r.setAttribute("download","sdklog"),document.body.appendChild(r),r.click()}},e.prototype._bindMethod=function(e,t,n){var r=this,i=e[t],o=this.getTime();if(n)return this._cacheLog;if("function"==typeof i.bind)return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var s=r.getTime();i.call.apply(i,function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([e,"".concat(s," IM SDK [").concat("log"===t?"debug":t,"]: ")],n,!1)),r.onLog&&r.onLog({time:s,level:"log"===t?"debug":t,logs:n})};try{return Function.prototype.bind.call(i,e,"".concat(o," IM SDK [").concat("log"===t?"debug":t,"]: "))}catch(t){return function(){return Function.prototype.apply.apply(i,[e,arguments])}}},e.prototype.getTime=function(){var e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()},e.prototype._cacheLog=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(new Date).toLocaleString()+": ",r="";e.forEach((function(e){"object"===o(e)?r+=JSON.stringify(e)+" ":r+=e+" "})),this._cacheLogCall(n+r)},e.prototype._cacheLogCall=function(e){var t=d(e),n=this.logBytes+t,r=this.config.maxCache;if(!(t>=r)){if(n<r)this.logBytes+=t;else for(var i=n-r,o=0;o<i;){var s=this.logs.shift();void 0!==s&&(o+=d(s))}this.logs.push(e)}},e.prototype._getPersistedLevel=function(){var e;if("undefined"==typeof window)return 5;if("undefined"===(e=window&&window.localStorage&&window.localStorage[this.storageLogLevelKey])){var t=window.document.cookie,n=t.indexOf(encodeURIComponent(this.storageLogLevelKey));-1!==n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}return e||5},e.prototype._persistLevel=function(e){var t=this.logMethods[e]||"SILENT";"undefined"!=typeof window&&(window.localStorage&&(window.localStorage[this.storageLogLevelKey]=t),this.useCookiePersist&&(window.document.cookie=encodeURIComponent(this.storageLogLevelKey)+"="+t+";"))},e.prototype.replaceLoggingMethods=function(e,t){for(var n=0;n<this.logMethods.length;n++){var r=this.logMethods[n];this[r]=n<e?a:this.methodFactory(r,e,t)}this.log=this.debug},e.prototype.defaultMethodFactory=function(e,t,n){return this.realMethod(e)||this.enableLoggingWhenConsoleArrives.apply(this,[e,t,n])},e.prototype.realMethod=function(e){return"debug"===e&&(e="log"),"undefined"!=typeof console&&("trace"===e&&i?r:void 0!==console[e]?this._bindMethod(console,e,this.config.useCache):void 0!==console.log?this._bindMethod(console,"log",this.config.useCache):a)},e.prototype.enableLoggingWhenConsoleArrives=function(e,t,n){return function(){"undefined"!=typeof console&&(this.replaceLoggingMethods.call(this,t,n),this[e].apply(this,arguments))}.bind(this)},e}();function d(e){for(var t=e.length,n=0;n<e.length;n++)e.charCodeAt(n)>255&&t++;return t}var u=new l;u.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");return this};var h="undefined"!=typeof window?window.log:void 0;u.noConflict=function(){return"undefined"!=typeof window&&window.log===u&&(window.log=h),u},u.getLoggers=function(){return c};var p=u},2449:function(e,t,n){"use strict";n.d(t,{Message:function(){return g}});var r=n(4370),i=function(){function e(e){var t=e.id;this.id=t,this.type=e.type}return e.prototype.set=function(e){this.body={id:this.id,ackId:e.id,type:"read",to:e.to,from:e.from||"",chatType:e.chatType}},e.create=function(e){return{id:r.P6.getUniqueId(),chatType:e.chatType,ackId:e.id,type:"read",to:e.to,from:e.from||"",ackContent:e.ackContent,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly}},e}(),o=function(){function e(e){this.id=e.id,this.type=e.type}return e.prototype.set=function(e){this.body={id:this.id,ackId:e.ackId,type:"delivery",to:e.to,from:e.from||""}},e.create=function(e){return{id:r.P6.getUniqueId(),ackId:e.ackId,type:"delivery",to:e.to,from:e.from||"",isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly}},e}(),s=(n(3843),n(3710),function(){function e(e){var t=e.type,n=e.id;this.id=n,this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"channel",to:e.to,from:e.from||"",time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),type:"channel",chatType:e.chatType||"singleChat",to:e.to,from:e.from||"",time:Date.now(),isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly}},e}()),a=(n(9753),function(){function e(e){var t=e.type,n=e.id||r.P6.getUniqueId();this.id=n,this.type=t,this.value=""}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"txt",to:e.to,msg:e.msg,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),isChatThread:e.isChatThread},this.value=e.msg},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){var t,n;return(null===(t=e.msgConfig)||void 0===t?void 0:t.languages)&&Array.isArray(null===(n=e.msgConfig)||void 0===n?void 0:n.languages),{type:"txt",id:r.P6.getUniqueId(),msg:e.msg,to:e.to,from:e.from||"",chatType:e.chatType,ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}()),c=function(){function e(e){var t=e.type,n=e.id;this.id=n||r.P6.getUniqueId(),this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"cmd",to:e.to,action:e.action,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),type:"cmd",to:e.to,from:e.from||"",chatType:e.chatType||"singleChat",action:e.action,time:Date.now(),ext:e.ext,msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),l=function(){function e(e){var t=e.type,n=e.id||r.P6.getUniqueId();this.id=n,this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"custom",to:e.to,customEvent:e.customEvent,customExts:e.customExts,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),chatType:e.chatType||"singleChat",type:"custom",to:e.to,customEvent:e.customEvent,customExts:e.customExts,from:e.from||"",ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),d=function(){function e(e){var t=e.type,n=e.id;this.id=n||r.P6.getUniqueId(),this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"loc",to:e.to,addr:e.addr,buildingName:e.buildingName,lat:e.lat,lng:e.lng,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),chatType:e.chatType||"singleChat",type:"loc",to:e.to,addr:e.addr,buildingName:e.buildingName,lat:e.lat,lng:e.lng,from:e.from||"",ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),u=function(){function e(e){var t=e.type,n=e.id||r.P6.getUniqueId();this.id=n,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&r.P6.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"img",file:e.file,width:e.width,height:e.height,to:e.to,from:e.from||"",roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,isChatThread:e.isChatThread}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),chatType:e.chatType,type:"img",url:e.url,width:e.width,height:e.height,file:e.file,to:e.to,from:e.from||"",ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,file_length:e.file_length,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList,thumbnailWidth:e.thumbnailWidth,thumbnailHeight:e.thumbnailHeight}},e}(),h=function(){function e(e){var t=e.type,n=e.id||r.P6.getUniqueId();this.id=n,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&r.P6.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"audio",file:e.file,filename:e.filename,length:e.length,file_length:e.file_length,fileInputId:e.fileInputId,to:e.to,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,isChatThread:e.isChatThread}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),chatType:e.chatType,type:"audio",filename:e.filename,length:e.length,file:e.file,to:e.to,from:e.from||"",ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,file_length:e.file_length,msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),p=function(){function e(e){var t=e.type,n=e.id;this.id=n,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&r.P6.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"video",file:e.file,filename:e.filename,length:e.length,file_length:e.file_length,fileInputId:e.fileInputId,to:e.to,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),apiUrl:e.apiUrl,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,isChatThread:e.isChatThread}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),chatType:e.chatType||"singleChat",type:"video",file:e.file,filename:e.filename,length:e.length,file_length:e.file_length,fileInputId:e.fileInputId,to:e.to,from:e.from||"",ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),f=function(){function e(e){var t=e.type,n=e.id;this.id=n,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&r.P6.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"file",file:e.file,filename:e.filename,fileInputId:e.fileInputId,to:e.to,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,isChatThread:e.isChatThread}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),chatType:e.chatType||"singleChat",type:"file",file:e.file,filename:e.filename,fileInputId:e.fileInputId,file_length:e.file_length,to:e.to,from:e.from||"",ext:e.ext,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),m=function(){function e(e){var t=e.type,n=e.id||r.P6.getUniqueId();this.id=n,this.type=t,this.value=""}return e.create=function(e){return{type:"combine",id:r.P6.getUniqueId(),to:e.to,from:e.from||"",chatType:e.chatType,ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList,compatibleText:e.compatibleText,title:e.title,summary:e.summary,messageList:e.messageList,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete}},e}(),g=function(){function e(t,n){return this.type=t,this.id=n||r.P6.getUniqueId(),e.createOldMsg({type:t,id:this.id})}return e.createOldMsg=function(e){switch(e.type){case"read":return new i({type:"read",id:e.id});case"delivery":return new o({type:"delivery",id:e.id});case"channel":return new s({type:"channel",id:e.id});case"txt":return new a({type:"txt",id:e.id});case"cmd":return new c({type:"cmd",id:e.id});case"custom":return new l({type:"custom",id:e.id});case"loc":return new d({type:"loc",id:e.id});case"img":return new u({type:"img",id:e.id});case"audio":return new h({type:"audio",id:e.id});case"video":return new p({type:"video",id:e.id});case"file":return new f({type:"file",id:e.id})}},e.create=function(e){return"txt"!==(t=e).type||"version"in t?function(e){return"img"===e.type&&!("version"in e)}(e)?u.create(e):function(e){return"cmd"===e.type&&!("version"in e)}(e)?c.create(e):function(e){return"file"===e.type&&!("version"in e)}(e)?f.create(e):function(e){return"audio"===e.type&&!("version"in e)}(e)?h.create(e):function(e){return"video"===e.type&&!("version"in e)}(e)?p.create(e):function(e){return"custom"===e.type&&!("version"in e)}(e)?l.create(e):function(e){return"loc"===e.type&&!("version"in e)}(e)?d.create(e):function(e){return"channel"===e.type&&!("version"in e)}(e)?s.create(e):function(e){return"delivery"===e.type&&!("version"in e)}(e)?o.create(e):function(e){return"read"===e.type&&!("version"in e)}(e)?i.create(e):function(e){return"combine"===e.type&&!("version"in e)}(e)?m.create(e):{}:a.create(e);var t},e.prototype.set=function(e){},e}()},5531:function(e,t,n){"use strict";var r;n.d(t,{E:function(){return r}}),function(e){e[e.REQUEST_SUCCESS=0]="REQUEST_SUCCESS",e[e.REQUEST_TIMEOUT=-1]="REQUEST_TIMEOUT",e[e.REQUEST_UNKNOWN=-2]="REQUEST_UNKNOWN",e[e.REQUEST_PARAMETER_ERROR=-3]="REQUEST_PARAMETER_ERROR",e[e.REQUEST_ABORT=-4]="REQUEST_ABORT",e[e.WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR=0]="WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_OPEN_ERROR=1]="WEBIM_CONNCTION_OPEN_ERROR",e[e.WEBIM_CONNCTION_AUTH_ERROR=2]="WEBIM_CONNCTION_AUTH_ERROR",e[e.WEBIM_CONNCTION_OPEN_USERGRID_ERROR=3]="WEBIM_CONNCTION_OPEN_USERGRID_ERROR",e[e.WEBIM_CONNCTION_ATTACH_ERROR=4]="WEBIM_CONNCTION_ATTACH_ERROR",e[e.WEBIM_CONNCTION_ATTACH_USERGRID_ERROR=5]="WEBIM_CONNCTION_ATTACH_USERGRID_ERROR",e[e.WEBIM_CONNCTION_REOPEN_ERROR=6]="WEBIM_CONNCTION_REOPEN_ERROR",e[e.WEBIM_CONNCTION_SERVER_CLOSE_ERROR=7]="WEBIM_CONNCTION_SERVER_CLOSE_ERROR",e[e.WEBIM_CONNCTION_SERVER_ERROR=8]="WEBIM_CONNCTION_SERVER_ERROR",e[e.WEBIM_CONNCTION_IQ_ERROR=9]="WEBIM_CONNCTION_IQ_ERROR",e[e.WEBIM_CONNCTION_PING_ERROR=10]="WEBIM_CONNCTION_PING_ERROR",e[e.WEBIM_CONNCTION_NOTIFYVERSION_ERROR=11]="WEBIM_CONNCTION_NOTIFYVERSION_ERROR",e[e.WEBIM_CONNCTION_GETROSTER_ERROR=12]="WEBIM_CONNCTION_GETROSTER_ERROR",e[e.WEBIM_CONNCTION_CROSSDOMAIN_ERROR=13]="WEBIM_CONNCTION_CROSSDOMAIN_ERROR",e[e.WEBIM_CONNCTION_LISTENING_OUTOF_MAXRETRIES=14]="WEBIM_CONNCTION_LISTENING_OUTOF_MAXRETRIES",e[e.WEBIM_CONNCTION_RECEIVEMSG_CONTENTERROR=15]="WEBIM_CONNCTION_RECEIVEMSG_CONTENTERROR",e[e.WEBIM_CONNCTION_DISCONNECTED=16]="WEBIM_CONNCTION_DISCONNECTED",e[e.WEBIM_CONNCTION_AJAX_ERROR=17]="WEBIM_CONNCTION_AJAX_ERROR",e[e.WEBIM_CONNCTION_JOINROOM_ERROR=18]="WEBIM_CONNCTION_JOINROOM_ERROR",e[e.WEBIM_CONNCTION_GETROOM_ERROR=19]="WEBIM_CONNCTION_GETROOM_ERROR",e[e.WEBIM_CONNCTION_GETROOMINFO_ERROR=20]="WEBIM_CONNCTION_GETROOMINFO_ERROR",e[e.WEBIM_CONNCTION_GETROOMMEMBER_ERROR=21]="WEBIM_CONNCTION_GETROOMMEMBER_ERROR",e[e.WEBIM_CONNCTION_GETROOMOCCUPANTS_ERROR=22]="WEBIM_CONNCTION_GETROOMOCCUPANTS_ERROR",e[e.WEBIM_CONNCTION_LOAD_CHATROOM_ERROR=23]="WEBIM_CONNCTION_LOAD_CHATROOM_ERROR",e[e.WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR=24]="WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR",e[e.WEBIM_CONNCTION_JOINCHATROOM_ERROR=25]="WEBIM_CONNCTION_JOINCHATROOM_ERROR",e[e.WEBIM_CONNCTION_QUITCHATROOM_ERROR=26]="WEBIM_CONNCTION_QUITCHATROOM_ERROR",e[e.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR=27]="WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR=28]="WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_SESSIONID_NOT_ASSIGN_ERROR=29]="WEBIM_CONNCTION_SESSIONID_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_RID_NOT_ASSIGN_ERROR=30]="WEBIM_CONNCTION_RID_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_CALLBACK_INNER_ERROR=31]="WEBIM_CONNCTION_CALLBACK_INNER_ERROR",e[e.WEBIM_CONNCTION_CLIENT_OFFLINE=32]="WEBIM_CONNCTION_CLIENT_OFFLINE",e[e.WEBIM_CONNCTION_CLIENT_LOGOUT=33]="WEBIM_CONNCTION_CLIENT_LOGOUT",e[e.WEBIM_CONNCTION_CLIENT_TOO_MUCH_ERROR=34]="WEBIM_CONNCTION_CLIENT_TOO_MUCH_ERROR",e[e.WEBIM_CONNECTION_ACCEPT_INVITATION_FROM_GROUP=35]="WEBIM_CONNECTION_ACCEPT_INVITATION_FROM_GROUP",e[e.WEBIM_CONNECTION_DECLINE_INVITATION_FROM_GROUP=36]="WEBIM_CONNECTION_DECLINE_INVITATION_FROM_GROUP",e[e.WEBIM_CONNECTION_ACCEPT_JOIN_GROUP=37]="WEBIM_CONNECTION_ACCEPT_JOIN_GROUP",e[e.WEBIM_CONNECTION_DECLINE_JOIN_GROUP=38]="WEBIM_CONNECTION_DECLINE_JOIN_GROUP",e[e.WEBIM_CONNECTION_CLOSED=39]="WEBIM_CONNECTION_CLOSED",e[e.WEBIM_CONNECTION_ERROR=40]="WEBIM_CONNECTION_ERROR",e[e.MAX_LIMIT=50]="MAX_LIMIT",e[e.MESSAGE_NOT_FOUND=51]="MESSAGE_NOT_FOUND",e[e.NO_PERMISSION=52]="NO_PERMISSION",e[e.OPERATION_UNSUPPORTED=53]="OPERATION_UNSUPPORTED",e[e.OPERATION_NOT_ALLOWED=54]="OPERATION_NOT_ALLOWED",e[e.LOCAL_DB_OPERATION_FAILED=55]="LOCAL_DB_OPERATION_FAILED",e[e.WEBIM_UPLOADFILE_BROWSER_ERROR=100]="WEBIM_UPLOADFILE_BROWSER_ERROR",e[e.WEBIM_UPLOADFILE_ERROR=101]="WEBIM_UPLOADFILE_ERROR",e[e.WEBIM_UPLOADFILE_NO_LOGIN=102]="WEBIM_UPLOADFILE_NO_LOGIN",e[e.WEBIM_UPLOADFILE_NO_FILE=103]="WEBIM_UPLOADFILE_NO_FILE",e[e.WEBIM_DOWNLOADFILE_ERROR=200]="WEBIM_DOWNLOADFILE_ERROR",e[e.WEBIM_DOWNLOADFILE_NO_LOGIN=201]="WEBIM_DOWNLOADFILE_NO_LOGIN",e[e.WEBIM_DOWNLOADFILE_BROWSER_ERROR=202]="WEBIM_DOWNLOADFILE_BROWSER_ERROR",e[e.PARSE_FILE_ERROR=203]="PARSE_FILE_ERROR",e[e.USER_NOT_FOUND=204]="USER_NOT_FOUND",e[e.MESSAGE_PARAMETER_ERROR=205]="MESSAGE_PARAMETER_ERROR",e[e.WEBIM_CONNCTION_USER_LOGIN_ANOTHER_DEVICE=206]="WEBIM_CONNCTION_USER_LOGIN_ANOTHER_DEVICE",e[e.WEBIM_CONNCTION_USER_REMOVED=207]="WEBIM_CONNCTION_USER_REMOVED",e[e.WEBIM_CONNCTION_USER_KICKED_BY_CHANGE_PASSWORD=216]="WEBIM_CONNCTION_USER_KICKED_BY_CHANGE_PASSWORD",e[e.WEBIM_CONNCTION_USER_KICKED_BY_OTHER_DEVICE=217]="WEBIM_CONNCTION_USER_KICKED_BY_OTHER_DEVICE",e[e.USER_MUTED_BY_ADMIN=219]="USER_MUTED_BY_ADMIN",e[e.USER_NOT_FRIEND=221]="USER_NOT_FRIEND",e[e.WEBIM_MESSAGE_REC_TEXT=300]="WEBIM_MESSAGE_REC_TEXT",e[e.WEBIM_MESSAGE_REC_TEXT_ERROR=301]="WEBIM_MESSAGE_REC_TEXT_ERROR",e[e.WEBIM_MESSAGE_REC_EMOTION=302]="WEBIM_MESSAGE_REC_EMOTION",e[e.WEBIM_MESSAGE_REC_PHOTO=303]="WEBIM_MESSAGE_REC_PHOTO",e[e.WEBIM_MESSAGE_REC_AUDIO=304]="WEBIM_MESSAGE_REC_AUDIO",e[e.WEBIM_MESSAGE_REC_AUDIO_FILE=305]="WEBIM_MESSAGE_REC_AUDIO_FILE",e[e.WEBIM_MESSAGE_REC_VEDIO=306]="WEBIM_MESSAGE_REC_VEDIO",e[e.WEBIM_MESSAGE_REC_VEDIO_FILE=307]="WEBIM_MESSAGE_REC_VEDIO_FILE",e[e.WEBIM_MESSAGE_REC_FILE=308]="WEBIM_MESSAGE_REC_FILE",e[e.WEBIM_MESSAGE_SED_TEXT=309]="WEBIM_MESSAGE_SED_TEXT",e[e.WEBIM_MESSAGE_SED_EMOTION=310]="WEBIM_MESSAGE_SED_EMOTION",e[e.WEBIM_MESSAGE_SED_PHOTO=311]="WEBIM_MESSAGE_SED_PHOTO",e[e.WEBIM_MESSAGE_SED_AUDIO=312]="WEBIM_MESSAGE_SED_AUDIO",e[e.WEBIM_MESSAGE_SED_AUDIO_FILE=313]="WEBIM_MESSAGE_SED_AUDIO_FILE",e[e.WEBIM_MESSAGE_SED_VEDIO=314]="WEBIM_MESSAGE_SED_VEDIO",e[e.WEBIM_MESSAGE_SED_VEDIO_FILE=315]="WEBIM_MESSAGE_SED_VEDIO_FILE",e[e.WEBIM_MESSAGE_SED_FILE=316]="WEBIM_MESSAGE_SED_FILE",e[e.WEBIM_MESSAGE_SED_ERROR=317]="WEBIM_MESSAGE_SED_ERROR",e[e.STATUS_INIT=400]="STATUS_INIT",e[e.STATUS_DOLOGIN_USERGRID=401]="STATUS_DOLOGIN_USERGRID",e[e.STATUS_DOLOGIN_IM=402]="STATUS_DOLOGIN_IM",e[e.STATUS_OPENED=403]="STATUS_OPENED",e[e.STATUS_CLOSING=404]="STATUS_CLOSING",e[e.STATUS_CLOSED=405]="STATUS_CLOSED",e[e.STATUS_ERROR=406]="STATUS_ERROR",e[e.SERVER_BUSY=500]="SERVER_BUSY",e[e.MESSAGE_INCLUDE_ILLEGAL_CONTENT=501]="MESSAGE_INCLUDE_ILLEGAL_CONTENT",e[e.MESSAGE_EXTERNAL_LOGIC_BLOCKED=502]="MESSAGE_EXTERNAL_LOGIC_BLOCKED",e[e.SERVER_UNKNOWN_ERROR=503]="SERVER_UNKNOWN_ERROR",e[e.MESSAGE_RECALL_TIME_LIMIT=504]="MESSAGE_RECALL_TIME_LIMIT",e[e.SERVICE_NOT_ENABLED=505]="SERVICE_NOT_ENABLED",e[e.SERVICE_NOT_ALLOW_MESSAGING=506]="SERVICE_NOT_ALLOW_MESSAGING",e[e.SERVICE_NOT_ALLOW_MESSAGING_MUTE=507]="SERVICE_NOT_ALLOW_MESSAGING_MUTE",e[e.MESSAGE_MODERATION_BLOCKED=508]="MESSAGE_MODERATION_BLOCKED",e[e.MESSAGE_CURRENT_LIMITING=509]="MESSAGE_CURRENT_LIMITING",e[e.MESSAGE_WEBSOCKET_DISCONNECTED=510]="MESSAGE_WEBSOCKET_DISCONNECTED",e[e.MESSAGE_SIZE_LIMIT=511]="MESSAGE_SIZE_LIMIT",e[e.GROUP_NOT_EXIST=605]="GROUP_NOT_EXIST",e[e.GROUP_NOT_JOINED=602]="GROUP_NOT_JOINED",e[e.GROUP_MEMBERS_FULL=606]="GROUP_MEMBERS_FULL",e[e.PERMISSION_DENIED=603]="PERMISSION_DENIED",e[e.WEBIM_LOAD_MSG_ERROR=604]="WEBIM_LOAD_MSG_ERROR",e[e.GROUP_ALREADY_JOINED=601]="GROUP_ALREADY_JOINED",e[e.GROUP_MEMBERS_LIMIT=607]="GROUP_MEMBERS_LIMIT",e[e.GROUP_IS_DISABLED=608]="GROUP_IS_DISABLED",e[e.GROUP_MEMBER_ATTRIBUTES_SET_FAILED=609]="GROUP_MEMBER_ATTRIBUTES_SET_FAILED",e[e.REST_PARAMS_STATUS=700]="REST_PARAMS_STATUS",e[e.CHATROOM_NOT_JOINED=702]="CHATROOM_NOT_JOINED",e[e.CHATROOM_MEMBERS_FULL=704]="CHATROOM_MEMBERS_FULL",e[e.CHATROOM_NOT_EXIST=705]="CHATROOM_NOT_EXIST",e[e.SDK_RUNTIME_ERROR=999]="SDK_RUNTIME_ERROR",e[e.PRESENCE_PARAM_EXCEED=1100]="PRESENCE_PARAM_EXCEED",e[e.REACTION_ALREADY_ADDED=1101]="REACTION_ALREADY_ADDED",e[e.REACTION_CREATING=1102]="REACTION_CREATING",e[e.REACTION_OPERATION_IS_ILLEGAL=1103]="REACTION_OPERATION_IS_ILLEGAL",e[e.TRANSLATION_NOT_VALID=1200]="TRANSLATION_NOT_VALID",e[e.TRANSLATION_TEXT_TOO_LONG=1201]="TRANSLATION_TEXT_TOO_LONG",e[e.TRANSLATION_FAILED=1204]="TRANSLATION_FAILED",e[e.THREAD_NOT_EXIST=1300]="THREAD_NOT_EXIST",e[e.THREAD_ALREADY_EXIST=1301]="THREAD_ALREADY_EXIST",e[e.MODIFY_MESSAGE_NOT_EXIST=1302]="MODIFY_MESSAGE_NOT_EXIST",e[e.MODIFY_MESSAGE_FORMAT_ERROR=1303]="MODIFY_MESSAGE_FORMAT_ERROR",e[e.MODIFY_MESSAGE_FAILED=1304]="MODIFY_MESSAGE_FAILED",e[e.CONVERSATION_NOT_EXIST=1400]="CONVERSATION_NOT_EXIST"}(r||(r={}))},4370:function(e,t,n){"use strict";n.d(t,{iw:function(){return g},hj:function(){return u},LR:function(){return S},cT:function(){return E},P6:function(){return b}}),n(9601),n(1539),n(8674),n(3710),n(7941),n(6699),n(7042),n(2772),n(9714),n(9653),n(6992),n(8783),n(3948),n(285),n(1637),n(8309),n(4986),n(2023);var r=n(5531),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},o=function(e,t,n,o){var s,a,c,l,d,u,h,p,f,m,g,y,v,_,E,S,T,b,I,N,C=e.response;C&&"string"==typeof C&&(C=JSON.parse(C));var w=e.status,R={elapse:o,httpCode:w,errDesc:null==C?void 0:C.error_description};if(400===w){if(40002===C.error_code)return void t({type:r.E.THREAD_ALREADY_EXIST,message:null==C?void 0:C.error_description,extraInfo:R});if(40009===C.error_code)return void t({type:r.E.OPERATION_UNSUPPORTED,message:null==C?void 0:C.error_description,extraInfo:R});if(60005===C.error_code)return void t({type:r.E.GROUP_MEMBER_ATTRIBUTES_SET_FAILED,message:(null==C?void 0:C.desc)||(null==C?void 0:C.error_description),extraInfo:R});if(60010===C.error_code)return void((null==C?void 0:C.error_description.includes("exceeds chatgroup user metadata single value limit"))?t({type:r.E.MAX_LIMIT,message:(null==C?void 0:C.desc)||C.error_description,extraInfo:R}):t({type:r.E.NO_PERMISSION,message:(null==C?void 0:C.desc)||C.error_description,extraInfo:R}));if(60011===C.error_code)return void t({type:r.E.CHATROOM_NOT_JOINED,message:null==C?void 0:C.desc,extraInfo:R});if(60006===C.error_code||60007===C.error_code||60009===C.error_code||60012===C.error_code)return void t({type:r.E.MAX_LIMIT,message:(null==C?void 0:C.desc)||(null==C?void 0:C.error_description),extraInfo:R});if(null===(s=C.error_description)||void 0===s?void 0:s.includes("are not members of this group"))return(null===(a=e.responseURL)||void 0===a?void 0:a.includes("chatgroups"))?t({type:r.E.GROUP_NOT_JOINED,data:e.response||e.responseText,message:C.error_description,extraInfo:R}):t({type:r.E.CHATROOM_NOT_JOINED,data:e.response||e.responseText,message:C.error_description,extraInfo:R}),void n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,message:null==C?void 0:C.error_description,data:e.responseText,extraInfo:R});if("the app not open presence"===(null==C?void 0:C.result))return void t({type:r.E.SERVICE_NOT_ENABLED,message:null==C?void 0:C.result,extraInfo:R});switch(null==C?void 0:C.error_description){case"the user is already operation this message":t({type:r.E.REACTION_ALREADY_ADDED,message:null==C?void 0:C.error_description,extraInfo:R});break;case"The quantity has exceeded the limit!":t({type:r.E.MAX_LIMIT,message:null==C?void 0:C.error_description,extraInfo:R});break;case"The user not in this group!":t({type:r.E.GROUP_NOT_JOINED,message:null==C?void 0:C.error_description,extraInfo:R});break;case"the user operation is illegal!":t({type:r.E.REACTION_OPERATION_IS_ILLEGAL,message:null==C?void 0:C.error_description,extraInfo:R});break;case"this appKey is not open reaction service!":case"this appKey not open message roaming":t({type:r.E.SERVICE_NOT_ENABLED,message:null==C?void 0:C.error_description,extraInfo:R});break;case"this message is creating reaction, please try again.":t({type:r.E.REACTION_CREATING,message:null==C?void 0:C.error_description,extraInfo:R});break;case"groupId can not be null!":t({type:r.E.GROUP_NOT_EXIST,message:null==C?void 0:C.error_description,extraInfo:R});break;case"The input text is too long.":t({type:r.E.TRANSLATION_TEXT_TOO_LONG,message:null==C?void 0:C.error_description,extraInfo:R});break;case"The target language is not valid.":t({type:r.E.TRANSLATION_NOT_VALID,message:null==C?void 0:C.error_description,extraInfo:R});break;case"report failed, get message by id failed":t({type:r.E.MESSAGE_NOT_FOUND,message:null==C?void 0:C.error_description,extraInfo:R});break;case"ext is too big ":t({type:r.E.PRESENCE_PARAM_EXCEED,message:null==C?void 0:C.error_description,extraInfo:R});break;case"Request body not readable.Please check content type is correct!":t({type:r.E.REQUEST_PARAMETER_ERROR,message:null==C?void 0:C.error_description,extraInfo:R});break;default:t({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,message:null==C?void 0:C.error_description,data:e.responseText,extraInfo:R}),n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,message:null==C?void 0:C.error_description,data:e.responseText,extraInfo:R})}}else if(401===w)40001===C.error_code||60001===C.error_code||"Unable to authenticate (OAuth)"===C.error_description?t({type:r.E.NO_PERMISSION,message:null==C?void 0:C.error_description,extraInfo:R}):(n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:R}),t({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:R}));else if(403===w)4e4===C.error_code||60004===C.error_code||15002===C.error_code?t({type:r.E.SERVICE_NOT_ENABLED,message:null==C?void 0:C.error_description,extraInfo:R}):40003===C.error_code||40004===C.error_code?t({type:r.E.THREAD_ALREADY_EXIST,message:null==C?void 0:C.error_description,extraInfo:R}):40005===C.error_code||40007===C.error_code||91002===C.error_code?t({type:r.E.MAX_LIMIT,message:null==C?void 0:C.error_description,extraInfo:R}):60002===C.error_code&&t({type:r.E.PERMISSION_DENIED,message:null==C?void 0:C.error_description,extraInfo:R}),"group member list is full!"===C.error_description?(null===(c=e.responseURL)||void 0===c?void 0:c.includes("chatgroups"))?t({type:r.E.GROUP_MEMBERS_FULL,data:e.response||e.responseText,message:C.error_description,extraInfo:R}):t({type:r.E.CHATROOM_MEMBERS_FULL,data:e.response||e.responseText,message:C.error_description,extraInfo:R}):(null===(l=C.error_description)||void 0===l?void 0:l.includes(C.error_description.includes("already in group")))?(null===(d=e.responseURL)||void 0===d?void 0:d.includes("chatgroups"))&&t({type:r.E.GROUP_ALREADY_JOINED,data:e.response||e.responseText,message:C.error_description,extraInfo:R}):(null===(u=C.error_description)||void 0===u?void 0:u.includes("are not members of this group"))?(null===(h=e.responseURL)||void 0===h?void 0:h.includes("chatgroups"))?t({type:r.E.GROUP_NOT_JOINED,data:e.response||e.responseText,message:C.error_description,extraInfo:R}):t({type:r.E.CHATROOM_NOT_JOINED,data:e.response||e.responseText,message:C.error_description,extraInfo:R}):(null===(p=C.error_description)||void 0===p?void 0:p.includes("service not open!"))||(null===(f=C.error_description)||void 0===f?void 0:f.includes("message report not open"))||(null===(m=C.error_description)||void 0===m?void 0:m.includes("messageroaming function not open"))?t({type:r.E.SERVICE_NOT_ENABLED,data:e.response||e.responseText,message:C.error_description,extraInfo:R}):(null===(g=C.error_description)||void 0===g?void 0:g.includes("members size is greater than max user size !"))?t({type:r.E.GROUP_MEMBERS_LIMIT,data:e.response||e.responseText,message:C.error_description,extraInfo:R}):(null===(y=C.error_description)||void 0===y?void 0:y.includes("can not operate this group, reason: group is disabled"))?t({type:r.E.GROUP_IS_DISABLED,data:e.response||e.responseText,message:C.error_description,extraInfo:R}):t({type:r.E.PERMISSION_DENIED,data:e.response||e.responseText,message:"permission denied",extraInfo:i(i({},R),{errDesc:"permission denied"})}),n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:R});else if(404===w)40011===C.error_code?t({type:r.E.THREAD_NOT_EXIST,message:null==C?void 0:C.error_description,extraInfo:R}):40012===C.error_code?t({type:r.E.NO_PERMISSION,message:null==C?void 0:C.error_description,extraInfo:R}):60003===C.error_code||20004===C.error_code?t({type:r.E.GROUP_NOT_JOINED,message:null==C?void 0:C.error_description,extraInfo:R}):91001===C.error_code&&t({type:r.E.CONVERSATION_NOT_EXIST,message:null==C?void 0:C.error_description,extraInfo:R}),(null===(v=C.error_description)||void 0===v?void 0:v.includes("do not find this group"))||(null===(_=C.error_description)||void 0===_?void 0:_.includes("does not exist"))?(null===(E=e.responseURL)||void 0===E?void 0:E.includes("chatgroups"))?t({type:r.E.GROUP_NOT_EXIST,data:e.response||e.responseText,message:"The chat room dose not exist.",extraInfo:i(i({},R),{errDesc:"The chat room dose not exist."})}):t({type:r.E.CHATROOM_NOT_EXIST,data:e.response||e.responseText,message:"The chat room dose not exist.",extraInfo:i(i({},R),{errDesc:"The chat room dose not exist."})}):(null===(S=C.error_description)||void 0===S?void 0:S.includes("username"))&&(null===(T=C.error_description)||void 0===T?void 0:T.includes("doesn't exist!'"))||(null===(b=C.error_description)||void 0===b?void 0:b.includes("user not found"))?t({type:r.E.USER_NOT_FOUND,data:e.response||e.responseText,message:C.error_description,extraInfo:R}):t({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.response||e.responseText,message:e.responseText,extraInfo:R}),n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.response||e.responseText,message:e.responseText,extraInfo:R});else if(406===w)90004===C.error_code&&t({type:r.E.OPERATION_NOT_ALLOWED,message:null==C?void 0:C.error_description,extraInfo:R});else if(429===w||503===w){if(null===(I=C.error_description)||void 0===I?void 0:I.includes("The request has reached the maximum limit"))return void t({type:r.E.MAX_LIMIT,message:e.responseText,extraInfo:R});t({type:r.E.SERVER_BUSY,data:e.response||e.responseText,message:"Server is busy.",extraInfo:i(i({},R),{errDesc:"Server is busy."})}),n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:"Server is busy.",extraInfo:i(i({},R),{errDesc:"Server is busy."})})}else if(500===w){if(40006===C.error_code||40008===C.error_code||40010===C.error_code)return void t({type:r.E.SERVER_UNKNOWN_ERROR,message:null==C?void 0:C.error_description,extraInfo:R});if(90005===C.error_code||99999===C.error_code)return void t({type:r.E.REQUEST_UNKNOWN,message:null==C?void 0:C.error_description,extraInfo:R});if(null===(N=C.error_description)||void 0===N?void 0:N.includes("translte failed!"))return void t({type:r.E.TRANSLATION_FAILED,message:e.responseText,extraInfo:R});t({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:"",extraInfo:R}),n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:"",extraInfo:R})}else t({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:i(i({},R),{errDesc:"ajax error"})}),n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:i(i({},R),{errDesc:"ajax error"})})},s=n(1595),a=n(2071),c=n(7360),l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},l.apply(this,arguments)},d=function(){};function u(e,t){var n,i=this;return v().platform===g.WEB?new Promise((function(t,i){var s=e.dataType||"text",a=e.success||d,l=e.error||d,u=new XMLHttpRequest;u.ontimeout=function(){i({type:r.E.REQUEST_TIMEOUT,message:"Request Timeout",errorType:"timeout_error",xhr:u})},u.onerror=function(){i({type:r.E.REQUEST_UNKNOWN,message:"Request Unknow Error",errorType:"onerror",xhr:u})},u.onabort=function(){i({type:r.E.REQUEST_ABORT,message:"Request Abort",errorType:"onabort",xhr:u})},u.onreadystatechange=function(){if(4===u.readyState){var e=(new Date).getTime()-n,d=u.status||0,h={elapse:e,httpCode:d};if(200===d){b.ajaxUnconventionalErrorTimes=0;try{switch(s){case"text":return a(u.responseText),void t(u.responseText);case"json":var p=JSON.parse(u.responseText);return p.extraInfo=h,a(p),void t(p);case"xml":return u.responseXML&&u.responseXML.documentElement?(a(u.responseXML.documentElement),void t(u.responseXML.documentElement)):(l({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:u.responseText,message:"XHR.responseXML is null or XHR.responseXML.documentElement is null"}),void i({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:u.responseText,message:"XHR.responseXML is null or XHR.responseXML.documentElement is null"}));default:l({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:u.responseText,message:"Invalid dataType"}),i({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:u.responseText,message:"Invalid dataType"})}return t(u.response||u.responseText),void a(u.response||u.responseText,u)}catch(e){i(e)}return}[400,401,403,404,429,500,503].includes(d)||(c.kg.debug("rest api request fail status:",d),b.ajaxUnconventionalErrorTimes++),o(u,i,l,e)}0===u.readyState&&(l({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:u.responseText,message:"Request not initialized"}),i({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:u.responseText,message:"Request not initialized"}))},e.responseType&&u.responseType&&(u.responseType=e.responseType),e.mimeType&&u.overrideMimeType(e.mimeType);var h=e.type||"POST",p=e.data||null,f="";if("get"===h.toLowerCase()&&p){for(var m in p)p.hasOwnProperty(m)&&(f+=m+"="+p[m]+"&");f=f?f.slice(0,-1):f,e.url+=(e.url.indexOf("?")>0?"&":"?")+(f?f+"&":f)+"_v="+(new Date).getTime(),p=null,f=""}n=(new Date).getTime(),u.open(h,e.url);var g=e.headers||{};for(var y in g["Content-Type"]||(g["Content-Type"]="application/json"),g)g.hasOwnProperty(y)&&u.setRequestHeader(y,g[y]);u.send(p)})).then((function(n){return i.dataReport&&t&&t!==s.fI.SDK_INTERNAL&&i.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:l({isSuccess:1,requestUrl:e.url,requestName:t,requestMethod:e.type},T(n.extraInfo))}),t!==s.fI.SDK_INTERNAL&&delete n.extraInfo,"Object"===h(n)?l(l({},n),{type:r.E.REQUEST_SUCCESS}):{data:n,type:r.E.REQUEST_SUCCESS}})).catch((function(n){throw i.dataReport&&t&&t!==s.fI.SDK_INTERNAL&&i.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:l({isSuccess:0,requestUrl:e.url,requestName:t,requestMethod:e.type},T(n.extraInfo))}),t!==s.fI.SDK_INTERNAL&&delete n.extraInfo,n})):p.call(this,e,t)}function h(e){return Object.prototype.toString.call(e).slice(8,-1)}function p(e,t){var n=this;return new Promise((function(t,n){var r=e.success||d,i=e.error||d,o=e.type||"POST",s=e.data||null,c="",l=(new Date).getTime(),u=b.getEnvInfo();if("get"===o.toLowerCase()&&s){for(var h in s)s.hasOwnProperty(h)&&(c+=h+"="+s[h]+"&");c=c?c.slice(0,-1):c,e.url+=(e.url.indexOf("?")>0?"&":"?")+(c?c+"&":c)+"_v="+(new Date).getTime(),s=null,c=""}var p={url:e.url,data:e.data,method:o,headers:{},success:function(e){var o,s,a,c,d,u={elapse:(new Date).getTime()-l,httpCode:Number((null===(o=e.statusCode)||void 0===o?void 0:o.toString())||(null===(s=e.status)||void 0===s?void 0:s.toString())),errDesc:(null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.error_description)||""};if("200"===(null===(c=e.statusCode)||void 0===c?void 0:c.toString())||"200"===(null===(d=e.status)||void 0===d?void 0:d.toString())){e.data.extraInfo=u;var h=e.data;r(h),t(h)}else e.extraInfo=u,i(h=e),n(h)},complete:function(){},fail:function(e){var t={elapse:(new Date).getTime()-l,httpCode:a.Tp,errDesc:"request:fail"};e.extraInfo=t,e.data={error:"request:fail",error_description:"request:fail"},i(e),n(e)}};if("zfb"===u.platform||"dd"===u.platform?p.headers=e.headers:p.header=e.headers,"dd"===u.platform)return dd.httpRequest(p);u.global.request(p)})).then((function(i){return n.dataReport&&t&&t!==s.fI.SDK_INTERNAL&&n.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:l({isSuccess:1,requestUrl:e.url,requestName:t,requestMethod:e.type},T(i.extraInfo))}),t!==s.fI.SDK_INTERNAL&&delete i.extraInfo,"Object"===h(i)?l(l({},i),{type:r.E.REQUEST_SUCCESS}):{data:i,type:r.E.REQUEST_SUCCESS}})).catch((function(r){throw n.dataReport&&t&&t!==s.fI.SDK_INTERNAL&&n.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:l({isSuccess:0,requestUrl:e.url,requestName:t,requestMethod:e.type},T(r.extraInfo))}),t!==s.fI.SDK_INTERNAL&&delete r.extraInfo,r}))}var f,m,g,y=(f=function(e,t){var n=v();if(n.platform!==g.WEB){var r=n.global,i=function(n){n.isConnected?e():t()};r.offNetworkStatusChange&&r.offNetworkStatusChange(i),r.onNetworkStatusChange&&r.onNetworkStatusChange(i)}else"undefined"!=typeof addEventListener&&(window.addEventListener("online",e),window.addEventListener("offline",t))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!f)return m;m=f.apply(void 0,e),f=null});function v(){return"undefined"!=typeof swan&&_(swan)?{platform:g.BAIDU,global:swan}:"undefined"!=typeof tt&&_(tt)?{platform:g.TT,global:tt}:"undefined"!=typeof dd&&_(dd)?{platform:g.DD,global:dd}:"undefined"!=typeof my&&_(my)?{platform:g.ZFB,global:my}:"undefined"!=typeof wx&&_(wx)?{platform:g.WX,global:wx}:"undefined"!=typeof uni&&_(uni)?{platform:g.UNI,global:uni}:"undefined"!=typeof window&&window.WebSocket?{platform:g.WEB,global:window}:{platform:g.NODE,global:n.g||{}}}function _(e){for(var t=["canIUse","getSystemInfo"],n=0,r=t.length;n<r;n++)if(!e[t[n]])return!1;return!0}function E(e,t){var n,i,o=this,a=(new Date).getTime(),c=e.accessToken;if(c){var l=e.appKey,u=[],h="",p="";if(l&&(h=(u=l.split("#"))[0],p=u[1]),h||p){var f=e.apiUrl,m=e.uploadUrl||f+"/"+h+"/"+p+"/chatfiles";if((null===(i=null===(n=null==e?void 0:e.file)||void 0===n?void 0:n.data)||void 0===i?void 0:i.size)<=0)e.onFileUploadError&&e.onFileUploadError({type:r.E.WEBIM_UPLOADFILE_ERROR,message:"fileSize must be greater than 0"});else{var g=new XMLHttpRequest;g.upload&&g.upload.addEventListener("progress",e.onFileUploadProgress||d,!1),g.addEventListener("abort",e.onFileUploadCanceled||d,!1),g.addEventListener("error",(function(e){v({type:r.E.WEBIM_UPLOADFILE_ERROR,data:g})}),!1),g.addEventListener("load",(function(n){try{var i=JSON.parse(g.responseText);if(400===g.status)return v({type:r.E.WEBIM_UPLOADFILE_ERROR,data:i}),!1;try{!function(n){var r=(new Date).getTime()-a;o.dataReport&&t&&[s.fI.UPLOAD_MSG_ATTACH,s.fI.UPLOAD_CHATROOM_FILE,s.fI.UPLOAD_GROUP_FILE].includes(t)&&o.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:{isSuccess:(null==n?void 0:n.error)?0:1,requestMethod:"POST",requestName:t,requestElapse:r,requestUrl:m,code:g.status,codeDesc:(null==n?void 0:n.error_description)||""}}),e.onFileUploadComplete&&e.onFileUploadComplete(n)}(i)}catch(n){v({type:r.E.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,data:n})}}catch(n){v({type:r.E.WEBIM_UPLOADFILE_ERROR,data:g.responseText})}}),!1),g.open("POST",m),g.setRequestHeader("restrict-access","true"),g.setRequestHeader("Accept","*/*"),g.setRequestHeader("Authorization","Bearer "+c);var y=new FormData;y.append("file",e.file.data),e.thumbnailWidth&&y.append("thumbnail-width",e.thumbnailWidth+""),e.thumbnailHeight&&y.append("thumbnail-height",e.thumbnailHeight+""),g.send(y)}}else e.onFileUploadError&&e.onFileUploadError({type:r.E.WEBIM_UPLOADFILE_ERROR,message:"AppKey illegal"})}else e.onFileUploadError&&e.onFileUploadError({type:r.E.WEBIM_UPLOADFILE_NO_LOGIN,message:"AccessToken cannot be empty"});function v(n){var r=(new Date).getTime()-a;o.dataReport&&t&&[s.fI.UPLOAD_MSG_ATTACH,s.fI.UPLOAD_CHATROOM_FILE,s.fI.UPLOAD_GROUP_FILE].includes(t)&&o.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:{isSuccess:0,requestMethod:"POST",requestName:t,requestElapse:r,requestUrl:m,code:(null==g?void 0:g.status)||0,codeDesc:"upload file error"}}),e.onFileUploadError&&e.onFileUploadError(n)}}function S(e,t){e.onFileDownloadComplete=e.onFileDownloadComplete||d,e.onFileDownloadError=e.onFileDownloadError||d;var n=(new Date).getTime(),i=new XMLHttpRequest,o=this;i.addEventListener("load",(function(r){var a=(new Date).getTime()-n;o.dataReport&&t&&t===s.fI.DOWN_GROUP_FILE&&o.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:{isSuccess:200===i.status?1:0,requestMethod:"POST",requestName:t,requestElapse:a,requestUrl:null==e?void 0:e.url,code:i.status,codeDesc:200===i.status?"":"download file error"}}),e.onFileDownloadComplete&&e.onFileDownloadComplete(i.response)}),!1),i.addEventListener("error",(function(a){var c=(new Date).getTime()-n;o.dataReport&&t&&t===s.fI.DOWN_GROUP_FILE&&o.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:{isSuccess:0,requestMethod:"POST",requestName:t,requestElapse:c,requestUrl:null==e?void 0:e.url,code:(null==i?void 0:i.status)||0,codeDesc:"download file error"}}),e.onFileDownloadError&&e.onFileDownloadError({type:r.E.WEBIM_DOWNLOADFILE_ERROR,id:e.id,xhr:i})}),!1);var a=e.method||"GET",c=e.responseType||"blob",l=e.mimeType||"text/plain; charset=x-user-defined";i.open(a,e.url),"undefined"!=typeof Blob?i.responseType=c:i.overrideMimeType(l);var u={"X-Requested-With":"XMLHttpRequest",Accept:"application/octet-stream","share-secret":e.secret,Authorization:"Bearer "+this.context.accessToken},h=e.headers||{};for(var p in h)u[p]=h[p];for(var p in u)u[p]&&i.setRequestHeader(p,u[p]);i.send(null)}function T(e){void 0===e&&(e={});var t=e.elapse,n=void 0===t?0:t,r=e.httpCode,i=void 0===r?0:r,o=e.errDesc;return{requestElapse:n,code:i,codeDesc:void 0===o?"":o}}!function(e){e.WEB="web",e.WX="wx",e.ZFB="zfb",e.DD="dd",e.TT="tt",e.BAIDU="baidu",e.QUICK_APP="quick_app",e.UNI="uni",e.NODE="node"}(g||(g={}));var b={autoIncrement:0,ajaxUnconventionalErrorTimes:0,ajax:u,getUniqueId:function(){this.autoIncrement?this.autoIncrement++:this.autoIncrement=1;var e=new Date,t=new Date(2010,1,1);return(e.getTime()-t.getTime()+this.autoIncrement).toString()},getFileUrl:function(e){var t={url:"",filename:"",filetype:"",data:{}},n="string"==typeof e?document.getElementById(e):e;if(window.URL.createObjectURL){if(!n.files)throw Error("this is not HTMLInputElement");var r=n.files;if(r.length>0){var i=r.item(0);t.data=i,t.url=window.URL.createObjectURL(i),t.filename=(null==i?void 0:i.name)||""}}else{if("string"!=typeof e)throw Error("in IE fileInputId must be string");i=document.getElementById(e).value,t.url=i;var o=i.lastIndexOf("/"),s=i.lastIndexOf("\\"),a=Math.max(o,s);t.filename=a<0?i:i.substring(a+1)}var c=t.filename.lastIndexOf(".");return-1!==c&&(t.filetype=t.filename.substring(c+1).toLowerCase()),t},uploadFile:E,flow:function(e){for(var t=e.length,n=t;n--;)if("function"!=typeof e[n])throw new TypeError("Expected a function");return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=0,o=t?e[i].apply(this,n):n[0];++i<t;)o=e[i].call(this,o);return o}},listenNetwork:y,getEnvInfo:v,wxRequest:p,parseDownloadResponse:function(e){if(!window||!window.URL)throw Error("parseDownloadResponse can be used in broswer only");return e&&e.type&&"application/json"===e.type||0>Object.prototype.toString.call(e).indexOf("Blob")?this.url+"?token=":window.URL.createObjectURL(e)},download:S,parseNotify:function(e){for(var t="",n=0;n<e.length;n++)t+="%"+e[n].toString(16);return JSON.parse(decodeURIComponent(t))},getExtraData:T,Uint8ArrayToString:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}}},9662:function(e,t,n){var r=n(614),i=n(6330),o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not a function")}},9483:function(e,t,n){var r=n(4411),i=n(6330),o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not a constructor")}},6077:function(e,t,n){var r=n(614),i=String,o=TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw o("Can't set "+i(e)+" as a prototype")}},1223:function(e,t,n){var r=n(5112),i=n(30),o=n(3070).f,s=r("unscopables"),a=Array.prototype;null==a[s]&&o(a,s,{configurable:!0,value:i(null)}),e.exports=function(e){a[s][e]=!0}},5787:function(e,t,n){var r=n(7976),i=TypeError;e.exports=function(e,t){if(r(t,e))return e;throw i("Incorrect invocation")}},9670:function(e,t,n){var r=n(111),i=String,o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not an object")}},3013:function(e){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7556:function(e,t,n){var r=n(7293);e.exports=r((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},260:function(e,t,n){"use strict";var r,i,o,s=n(3013),a=n(9781),c=n(7854),l=n(614),d=n(111),u=n(2597),h=n(648),p=n(6330),f=n(8880),m=n(8052),g=n(7045),y=n(7976),v=n(9518),_=n(7674),E=n(5112),S=n(9711),T=n(9909),b=T.enforce,I=T.get,N=c.Int8Array,C=N&&N.prototype,w=c.Uint8ClampedArray,R=w&&w.prototype,A=N&&v(N),O=C&&v(C),M=Object.prototype,D=c.TypeError,k=E("toStringTag"),x=S("TYPED_ARRAY_TAG"),L="TypedArrayConstructor",P=s&&!!_&&"Opera"!==h(c.opera),j=!1,U={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},F={BigInt64Array:8,BigUint64Array:8},z=function(e){var t=v(e);if(d(t)){var n=I(t);return n&&u(n,L)?n[L]:z(t)}},V=function(e){if(!d(e))return!1;var t=h(e);return u(U,t)||u(F,t)};for(r in U)(o=(i=c[r])&&i.prototype)?b(o)[L]=i:P=!1;for(r in F)(o=(i=c[r])&&i.prototype)&&(b(o)[L]=i);if((!P||!l(A)||A===Function.prototype)&&(A=function(){throw D("Incorrect invocation")},P))for(r in U)c[r]&&_(c[r],A);if((!P||!O||O===M)&&(O=A.prototype,P))for(r in U)c[r]&&_(c[r].prototype,O);if(P&&v(R)!==O&&_(R,O),a&&!u(O,k))for(r in j=!0,g(O,k,{configurable:!0,get:function(){return d(this)?this[x]:void 0}}),U)c[r]&&f(c[r],x,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:P,TYPED_ARRAY_TAG:j&&x,aTypedArray:function(e){if(V(e))return e;throw D("Target is not a typed array")},aTypedArrayConstructor:function(e){if(l(e)&&(!_||y(A,e)))return e;throw D(p(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,r){if(a){if(n)for(var i in U){var o=c[i];if(o&&u(o.prototype,e))try{delete o.prototype[e]}catch(n){try{o.prototype[e]=t}catch(e){}}}O[e]&&!n||m(O,e,n?t:P&&C[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(a){if(_){if(n)for(r in U)if((i=c[r])&&u(i,e))try{delete i[e]}catch(e){}if(A[e]&&!n)return;try{return m(A,e,n?t:P&&A[e]||t)}catch(e){}}for(r in U)!(i=c[r])||i[e]&&!n||m(i,e,t)}},getTypedArrayConstructor:z,isView:function(e){if(!d(e))return!1;var t=h(e);return"DataView"===t||u(U,t)||u(F,t)},isTypedArray:V,TypedArray:A,TypedArrayPrototype:O}},3331:function(e,t,n){"use strict";var r=n(7854),i=n(1702),o=n(9781),s=n(3013),a=n(6530),c=n(8880),l=n(7045),d=n(9190),u=n(7293),h=n(5787),p=n(9303),f=n(7466),m=n(7067),g=n(1179),y=n(9518),v=n(7674),_=n(8006).f,E=n(1285),S=n(1589),T=n(8003),b=n(9909),I=a.PROPER,N=a.CONFIGURABLE,C="ArrayBuffer",w="DataView",R="prototype",A="Wrong index",O=b.getterFor(C),M=b.getterFor(w),D=b.set,k=r[C],x=k,L=x&&x[R],P=r[w],j=P&&P[R],U=Object.prototype,F=r.Array,z=r.RangeError,V=i(E),B=i([].reverse),G=g.pack,H=g.unpack,W=function(e){return[255&e]},Y=function(e){return[255&e,e>>8&255]},q=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},K=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},Q=function(e){return G(e,23,4)},J=function(e){return G(e,52,8)},X=function(e,t,n){l(e[R],t,{configurable:!0,get:function(){return n(this)[t]}})},Z=function(e,t,n,r){var i=m(n),o=M(e);if(i+t>o.byteLength)throw z(A);var s=o.bytes,a=i+o.byteOffset,c=S(s,a,a+t);return r?c:B(c)},$=function(e,t,n,r,i,o){var s=m(n),a=M(e);if(s+t>a.byteLength)throw z(A);for(var c=a.bytes,l=s+a.byteOffset,d=r(+i),u=0;u<t;u++)c[l+u]=d[o?u:t-u-1]};if(s){var ee=I&&k.name!==C;if(u((function(){k(1)}))&&u((function(){new k(-1)}))&&!u((function(){return new k,new k(1.5),new k(NaN),1!=k.length||ee&&!N})))ee&&N&&c(k,"name",C);else{(x=function(e){return h(this,L),new k(m(e))})[R]=L;for(var te,ne=_(k),re=0;ne.length>re;)(te=ne[re++])in x||c(x,te,k[te]);L.constructor=x}v&&y(j)!==U&&v(j,U);var ie=new P(new x(2)),oe=i(j.setInt8);ie.setInt8(0,2147483648),ie.setInt8(1,2147483649),!ie.getInt8(0)&&ie.getInt8(1)||d(j,{setInt8:function(e,t){oe(this,e,t<<24>>24)},setUint8:function(e,t){oe(this,e,t<<24>>24)}},{unsafe:!0})}else L=(x=function(e){h(this,L);var t=m(e);D(this,{type:C,bytes:V(F(t),0),byteLength:t}),o||(this.byteLength=t,this.detached=!1)})[R],j=(P=function(e,t,n){h(this,j),h(e,L);var r=O(e),i=r.byteLength,s=p(t);if(s<0||s>i)throw z("Wrong offset");if(s+(n=void 0===n?i-s:f(n))>i)throw z("Wrong length");D(this,{type:w,buffer:e,byteLength:n,byteOffset:s,bytes:r.bytes}),o||(this.buffer=e,this.byteLength=n,this.byteOffset=s)})[R],o&&(X(x,"byteLength",O),X(P,"buffer",M),X(P,"byteLength",M),X(P,"byteOffset",M)),d(j,{getInt8:function(e){return Z(this,1,e)[0]<<24>>24},getUint8:function(e){return Z(this,1,e)[0]},getInt16:function(e){var t=Z(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Z(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return K(Z(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return K(Z(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return H(Z(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return H(Z(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){$(this,1,e,W,t)},setUint8:function(e,t){$(this,1,e,W,t)},setInt16:function(e,t){$(this,2,e,Y,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){$(this,2,e,Y,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){$(this,4,e,q,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){$(this,4,e,q,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){$(this,4,e,Q,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){$(this,8,e,J,t,arguments.length>2?arguments[2]:void 0)}});T(x,C),T(P,w),e.exports={ArrayBuffer:x,DataView:P}},1048:function(e,t,n){"use strict";var r=n(7908),i=n(1400),o=n(6244),s=n(5117),a=Math.min;e.exports=[].copyWithin||function(e,t){var n=r(this),c=o(n),l=i(e,c),d=i(t,c),u=arguments.length>2?arguments[2]:void 0,h=a((void 0===u?c:i(u,c))-d,c-l),p=1;for(d<l&&l<d+h&&(p=-1,d+=h-1,l+=h-1);h-- >0;)d in n?n[l]=n[d]:s(n,l),l+=p,d+=p;return n}},1285:function(e,t,n){"use strict";var r=n(7908),i=n(1400),o=n(6244);e.exports=function(e){for(var t=r(this),n=o(t),s=arguments.length,a=i(s>1?arguments[1]:void 0,n),c=s>2?arguments[2]:void 0,l=void 0===c?n:i(c,n);l>a;)t[a++]=e;return t}},8533:function(e,t,n){"use strict";var r=n(2092).forEach,i=n(9341)("forEach");e.exports=i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},7745:function(e,t,n){var r=n(6244);e.exports=function(e,t){for(var n=0,i=r(t),o=new e(i);i>n;)o[n]=t[n++];return o}},8457:function(e,t,n){"use strict";var r=n(9974),i=n(6916),o=n(7908),s=n(3411),a=n(7659),c=n(4411),l=n(6244),d=n(6135),u=n(4121),h=n(1246),p=Array;e.exports=function(e){var t=o(e),n=c(this),f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m;g&&(m=r(m,f>2?arguments[2]:void 0));var y,v,_,E,S,T,b=h(t),I=0;if(!b||this===p&&a(b))for(y=l(t),v=n?new this(y):p(y);y>I;I++)T=g?m(t[I],I):t[I],d(v,I,T);else for(S=(E=u(t,b)).next,v=n?new this:[];!(_=i(S,E)).done;I++)T=g?s(E,m,[_.value,I],!0):_.value,d(v,I,T);return v.length=I,v}},1318:function(e,t,n){var r=n(5656),i=n(1400),o=n(6244),s=function(e){return function(t,n,s){var a,c=r(t),l=o(c),d=i(s,l);if(e&&n!=n){for(;l>d;)if((a=c[d++])!=a)return!0}else for(;l>d;d++)if((e||d in c)&&c[d]===n)return e||d||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},2092:function(e,t,n){var r=n(9974),i=n(1702),o=n(8361),s=n(7908),a=n(6244),c=n(5417),l=i([].push),d=function(e){var t=1==e,n=2==e,i=3==e,d=4==e,u=6==e,h=7==e,p=5==e||u;return function(f,m,g,y){for(var v,_,E=s(f),S=o(E),T=r(m,g),b=a(S),I=0,N=y||c,C=t?N(f,b):n||h?N(f,0):void 0;b>I;I++)if((p||I in S)&&(_=T(v=S[I],I,E),e))if(t)C[I]=_;else if(_)switch(e){case 3:return!0;case 5:return v;case 6:return I;case 2:l(C,v)}else switch(e){case 4:return!1;case 7:l(C,v)}return u?-1:i||d?d:C}};e.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterReject:d(7)}},6583:function(e,t,n){"use strict";var r=n(2104),i=n(5656),o=n(9303),s=n(6244),a=n(9341),c=Math.min,l=[].lastIndexOf,d=!!l&&1/[1].lastIndexOf(1,-0)<0,u=a("lastIndexOf"),h=d||!u;e.exports=h?function(e){if(d)return r(l,this,arguments)||0;var t=i(this),n=s(t),a=n-1;for(arguments.length>1&&(a=c(a,o(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in t&&t[a]===e)return a||0;return-1}:l},1194:function(e,t,n){var r=n(7293),i=n(5112),o=n(7392),s=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},9341:function(e,t,n){"use strict";var r=n(7293);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){return 1},1)}))}},3671:function(e,t,n){var r=n(9662),i=n(7908),o=n(8361),s=n(6244),a=TypeError,c=function(e){return function(t,n,c,l){r(n);var d=i(t),u=o(d),h=s(d),p=e?h-1:0,f=e?-1:1;if(c<2)for(;;){if(p in u){l=u[p],p+=f;break}if(p+=f,e?p<0:h<=p)throw a("Reduce of empty array with no initial value")}for(;e?p>=0:h>p;p+=f)p in u&&(l=n(l,u[p],p,d));return l}};e.exports={left:c(!1),right:c(!0)}},3658:function(e,t,n){"use strict";var r=n(9781),i=n(3157),o=TypeError,s=Object.getOwnPropertyDescriptor,a=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=a?function(e,t){if(i(e)&&!s(e,"length").writable)throw o("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},1589:function(e,t,n){var r=n(1400),i=n(6244),o=n(6135),s=Array,a=Math.max;e.exports=function(e,t,n){for(var c=i(e),l=r(t,c),d=r(void 0===n?c:n,c),u=s(a(d-l,0)),h=0;l<d;l++,h++)o(u,h,e[l]);return u.length=h,u}},206:function(e,t,n){var r=n(1702);e.exports=r([].slice)},4362:function(e,t,n){var r=n(1589),i=Math.floor,o=function(e,t){var n=e.length,c=i(n/2);return n<8?s(e,t):a(e,o(r(e,0,c),t),o(r(e,c),t),t)},s=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},a=function(e,t,n,r){for(var i=t.length,o=n.length,s=0,a=0;s<i||a<o;)e[s+a]=s<i&&a<o?r(t[s],n[a])<=0?t[s++]:n[a++]:s<i?t[s++]:n[a++];return e};e.exports=o},7475:function(e,t,n){var r=n(3157),i=n(4411),o=n(111),s=n(5112)("species"),a=Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,(i(t)&&(t===a||r(t.prototype))||o(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?a:t}},5417:function(e,t,n){var r=n(7475);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},3411:function(e,t,n){var r=n(9670),i=n(9212);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){i(e,"throw",t)}}},7072:function(e,t,n){var r=n(5112)("iterator"),i=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){i=!0}};s[r]=function(){return this},Array.from(s,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},4326:function(e,t,n){var r=n(1702),i=r({}.toString),o=r("".slice);e.exports=function(e){return o(i(e),8,-1)}},648:function(e,t,n){var r=n(1694),i=n(614),o=n(4326),s=n(5112)("toStringTag"),a=Object,c="Arguments"==o(function(){return arguments}());e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=a(e),s))?n:c?o(t):"Object"==(r=o(t))&&i(t.callee)?"Arguments":r}},5631:function(e,t,n){"use strict";var r=n(30),i=n(7045),o=n(9190),s=n(9974),a=n(5787),c=n(8554),l=n(408),d=n(1656),u=n(6178),h=n(6340),p=n(9781),f=n(2423).fastKey,m=n(9909),g=m.set,y=m.getterFor;e.exports={getConstructor:function(e,t,n,d){var u=e((function(e,i){a(e,h),g(e,{type:t,index:r(null),first:void 0,last:void 0,size:0}),p||(e.size=0),c(i)||l(i,e[d],{that:e,AS_ENTRIES:n})})),h=u.prototype,m=y(t),v=function(e,t,n){var r,i,o=m(e),s=_(e,t);return s?s.value=n:(o.last=s={index:i=f(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),p?o.size++:e.size++,"F"!==i&&(o.index[i]=s)),e},_=function(e,t){var n,r=m(e),i=f(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return o(h,{clear:function(){for(var e=m(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,p?e.size=0:this.size=0},delete:function(e){var t=this,n=m(t),r=_(t,e);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),p?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=m(this),r=s(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!_(this,e)}}),o(h,n?{get:function(e){var t=_(this,e);return t&&t.value},set:function(e,t){return v(this,0===e?0:e,t)}}:{add:function(e){return v(this,e=0===e?0:e,e)}}),p&&i(h,"size",{configurable:!0,get:function(){return m(this).size}}),u},setStrong:function(e,t,n){var r=t+" Iterator",i=y(t),o=y(r);d(e,t,(function(e,t){g(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?u("keys"==t?n.key:"values"==t?n.value:[n.key,n.value],!1):(e.target=void 0,u(void 0,!0))}),n?"entries":"values",!n,!0),h(t)}}},7710:function(e,t,n){"use strict";var r=n(2109),i=n(7854),o=n(1702),s=n(4705),a=n(8052),c=n(2423),l=n(408),d=n(5787),u=n(614),h=n(8554),p=n(111),f=n(7293),m=n(7072),g=n(8003),y=n(9587);e.exports=function(e,t,n){var v=-1!==e.indexOf("Map"),_=-1!==e.indexOf("Weak"),E=v?"set":"add",S=i[e],T=S&&S.prototype,b=S,I={},N=function(e){var t=o(T[e]);a(T,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(_&&!p(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return _&&!p(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(_&&!p(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(s(e,!u(S)||!(_||T.forEach&&!f((function(){(new S).entries().next()})))))b=n.getConstructor(t,e,v,E),c.enable();else if(s(e,!0)){var C=new b,w=C[E](_?{}:-0,1)!=C,R=f((function(){C.has(1)})),A=m((function(e){new S(e)})),O=!_&&f((function(){for(var e=new S,t=5;t--;)e[E](t,t);return!e.has(-0)}));A||((b=t((function(e,t){d(e,T);var n=y(new S,e,b);return h(t)||l(t,n[E],{that:n,AS_ENTRIES:v}),n}))).prototype=T,T.constructor=b),(R||O)&&(N("delete"),N("has"),v&&N("get")),(O||w)&&N(E),_&&T.clear&&delete T.clear}return I[e]=b,r({global:!0,constructor:!0,forced:b!=S},I),g(b,e),_||n.setStrong(b,e,v),b}},9920:function(e,t,n){var r=n(2597),i=n(3887),o=n(1236),s=n(3070);e.exports=function(e,t,n){for(var a=i(t),c=s.f,l=o.f,d=0;d<a.length;d++){var u=a[d];r(e,u)||n&&r(n,u)||c(e,u,l(t,u))}}},4964:function(e,t,n){var r=n(5112)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},8544:function(e,t,n){var r=n(7293);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},6178:function(e){e.exports=function(e,t){return{value:e,done:t}}},8880:function(e,t,n){var r=n(9781),i=n(3070),o=n(9114);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6135:function(e,t,n){"use strict";var r=n(4948),i=n(3070),o=n(9114);e.exports=function(e,t,n){var s=r(t);s in e?i.f(e,s,o(0,n)):e[s]=n}},7045:function(e,t,n){var r=n(6339),i=n(3070);e.exports=function(e,t,n){return n.get&&r(n.get,t,{getter:!0}),n.set&&r(n.set,t,{setter:!0}),i.f(e,t,n)}},8052:function(e,t,n){var r=n(614),i=n(3070),o=n(6339),s=n(3072);e.exports=function(e,t,n,a){a||(a={});var c=a.enumerable,l=void 0!==a.name?a.name:t;if(r(n)&&o(n,l,a),a.global)c?e[t]=n:s(t,n);else{try{a.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=n:i.f(e,t,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},9190:function(e,t,n){var r=n(8052);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},3072:function(e,t,n){var r=n(7854),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},5117:function(e,t,n){"use strict";var r=n(6330),i=TypeError;e.exports=function(e,t){if(!delete e[t])throw i("Cannot delete property "+r(t)+" of "+r(e))}},9781:function(e,t,n){var r=n(7293);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(e){var t="object"==typeof document&&document.all,n=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:n}},317:function(e,t,n){var r=n(7854),i=n(111),o=r.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},7207:function(e){var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},8324:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:function(e,t,n){var r=n(317)("span").classList,i=r&&r.constructor&&r.constructor.prototype;e.exports=i===Object.prototype?void 0:i},8886:function(e,t,n){var r=n(8113).match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},7871:function(e,t,n){var r=n(3823),i=n(5268);e.exports=!r&&!i&&"object"==typeof window&&"object"==typeof document},9363:function(e){e.exports="function"==typeof Bun&&Bun&&"string"==typeof Bun.version},3823:function(e){e.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},256:function(e,t,n){var r=n(8113);e.exports=/MSIE|Trident/.test(r)},1528:function(e,t,n){var r=n(8113);e.exports=/ipad|iphone|ipod/i.test(r)&&"undefined"!=typeof Pebble},6833:function(e,t,n){var r=n(8113);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},5268:function(e,t,n){var r=n(4326);e.exports="undefined"!=typeof process&&"process"==r(process)},1036:function(e,t,n){var r=n(8113);e.exports=/web0s(?!.*chrome)/i.test(r)},8113:function(e){e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(e,t,n){var r,i,o=n(7854),s=n(8113),a=o.process,c=o.Deno,l=a&&a.versions||c&&c.version,d=l&&l.v8;d&&(i=(r=d.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(i=+r[1]),e.exports=i},8008:function(e,t,n){var r=n(8113).match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(e,t,n){var r=n(7854),i=n(1236).f,o=n(8880),s=n(8052),a=n(3072),c=n(9920),l=n(4705);e.exports=function(e,t){var n,d,u,h,p,f=e.target,m=e.global,g=e.stat;if(n=m?r:g?r[f]||a(f,{}):(r[f]||{}).prototype)for(d in t){if(h=t[d],u=e.dontCallGetSet?(p=i(n,d))&&p.value:n[d],!l(m?d:f+(g?".":"#")+d,e.forced)&&void 0!==u){if(typeof h==typeof u)continue;c(h,u)}(e.sham||u&&u.sham)&&o(h,"sham",!0),s(n,d,h,e)}}},7293:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},6677:function(e,t,n){var r=n(7293);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},2104:function(e,t,n){var r=n(4374),i=Function.prototype,o=i.apply,s=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?s.bind(o):function(){return s.apply(o,arguments)})},9974:function(e,t,n){var r=n(1470),i=n(9662),o=n(4374),s=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?s(e,t):function(){return e.apply(t,arguments)}}},4374:function(e,t,n){var r=n(7293);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},7065:function(e,t,n){"use strict";var r=n(1702),i=n(9662),o=n(111),s=n(2597),a=n(206),c=n(4374),l=Function,d=r([].concat),u=r([].join),h={};e.exports=c?l.bind:function(e){var t=i(this),n=t.prototype,r=a(arguments,1),c=function(){var n=d(r,a(arguments));return this instanceof c?function(e,t,n){if(!s(h,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";h[t]=l("C,a","return new C("+u(r,",")+")")}return h[t](e,n)}(t,n.length,n):t.apply(e,n)};return o(n)&&(c.prototype=n),c}},6916:function(e,t,n){var r=n(4374),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},6530:function(e,t,n){var r=n(9781),i=n(2597),o=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=i(o,"name"),c=a&&"something"===function(){}.name,l=a&&(!r||r&&s(o,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},5668:function(e,t,n){var r=n(1702),i=n(9662);e.exports=function(e,t,n){try{return r(i(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}}},1470:function(e,t,n){var r=n(4326),i=n(1702);e.exports=function(e){if("Function"===r(e))return i(e)}},1702:function(e,t,n){var r=n(4374),i=Function.prototype,o=i.call,s=r&&i.bind.bind(o,o);e.exports=r?s:function(e){return function(){return o.apply(e,arguments)}}},5005:function(e,t,n){var r=n(7854),i=n(614);e.exports=function(e,t){return arguments.length<2?(n=r[e],i(n)?n:void 0):r[e]&&r[e][t];var n}},1246:function(e,t,n){var r=n(648),i=n(8173),o=n(8554),s=n(7497),a=n(5112)("iterator");e.exports=function(e){if(!o(e))return i(e,a)||i(e,"@@iterator")||s[r(e)]}},4121:function(e,t,n){var r=n(6916),i=n(9662),o=n(9670),s=n(6330),a=n(1246),c=TypeError;e.exports=function(e,t){var n=arguments.length<2?a(e):t;if(i(n))return o(r(n,e));throw c(s(e)+" is not iterable")}},8044:function(e,t,n){var r=n(1702),i=n(3157),o=n(614),s=n(4326),a=n(1340),c=r([].push);e.exports=function(e){if(o(e))return e;if(i(e)){for(var t=e.length,n=[],r=0;r<t;r++){var l=e[r];"string"==typeof l?c(n,l):"number"!=typeof l&&"Number"!=s(l)&&"String"!=s(l)||c(n,a(l))}var d=n.length,u=!0;return function(e,t){if(u)return u=!1,t;if(i(this))return t;for(var r=0;r<d;r++)if(n[r]===e)return t}}}},8173:function(e,t,n){var r=n(9662),i=n(8554);e.exports=function(e,t){var n=e[t];return i(n)?void 0:r(n)}},7854:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||this||Function("return this")()},2597:function(e,t,n){var r=n(1702),i=n(7908),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},3501:function(e){e.exports={}},842:function(e){e.exports=function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(e){}}},490:function(e,t,n){var r=n(5005);e.exports=r("document","documentElement")},4664:function(e,t,n){var r=n(9781),i=n(7293),o=n(317);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},1179:function(e){var t=Array,n=Math.abs,r=Math.pow,i=Math.floor,o=Math.log,s=Math.LN2;e.exports={pack:function(e,a,c){var l,d,u,h=t(c),p=8*c-a-1,f=(1<<p)-1,m=f>>1,g=23===a?r(2,-24)-r(2,-77):0,y=e<0||0===e&&1/e<0?1:0,v=0;for((e=n(e))!=e||e===1/0?(d=e!=e?1:0,l=f):(l=i(o(e)/s),e*(u=r(2,-l))<1&&(l--,u*=2),(e+=l+m>=1?g/u:g*r(2,1-m))*u>=2&&(l++,u/=2),l+m>=f?(d=0,l=f):l+m>=1?(d=(e*u-1)*r(2,a),l+=m):(d=e*r(2,m-1)*r(2,a),l=0));a>=8;)h[v++]=255&d,d/=256,a-=8;for(l=l<<a|d,p+=a;p>0;)h[v++]=255&l,l/=256,p-=8;return h[--v]|=128*y,h},unpack:function(e,t){var n,i=e.length,o=8*i-t-1,s=(1<<o)-1,a=s>>1,c=o-7,l=i-1,d=e[l--],u=127&d;for(d>>=7;c>0;)u=256*u+e[l--],c-=8;for(n=u&(1<<-c)-1,u>>=-c,c+=t;c>0;)n=256*n+e[l--],c-=8;if(0===u)u=1-a;else{if(u===s)return n?NaN:d?-1/0:1/0;n+=r(2,t),u-=a}return(d?-1:1)*n*r(2,u-t)}}},8361:function(e,t,n){var r=n(1702),i=n(7293),o=n(4326),s=Object,a=r("".split);e.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?a(e,""):s(e)}:s},9587:function(e,t,n){var r=n(614),i=n(111),o=n(7674);e.exports=function(e,t,n){var s,a;return o&&r(s=t.constructor)&&s!==n&&i(a=s.prototype)&&a!==n.prototype&&o(e,a),e}},2788:function(e,t,n){var r=n(1702),i=n(614),o=n(5465),s=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return s(e)}),e.exports=o.inspectSource},2423:function(e,t,n){var r=n(2109),i=n(1702),o=n(3501),s=n(111),a=n(2597),c=n(3070).f,l=n(8006),d=n(1156),u=n(2050),h=n(9711),p=n(6677),f=!1,m=h("meta"),g=0,y=function(e){c(e,m,{value:{objectID:"O"+g++,weakData:{}}})},v=e.exports={enable:function(){v.enable=function(){},f=!0;var e=l.f,t=i([].splice),n={};n[m]=1,e(n).length&&(l.f=function(n){for(var r=e(n),i=0,o=r.length;i<o;i++)if(r[i]===m){t(r,i,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:d.f}))},fastKey:function(e,t){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,m)){if(!u(e))return"F";if(!t)return"E";y(e)}return e[m].objectID},getWeakData:function(e,t){if(!a(e,m)){if(!u(e))return!0;if(!t)return!1;y(e)}return e[m].weakData},onFreeze:function(e){return p&&f&&u(e)&&!a(e,m)&&y(e),e}};o[m]=!0},9909:function(e,t,n){var r,i,o,s=n(4811),a=n(7854),c=n(111),l=n(8880),d=n(2597),u=n(5465),h=n(6200),p=n(3501),f="Object already initialized",m=a.TypeError,g=a.WeakMap;if(s||u.state){var y=u.state||(u.state=new g);y.get=y.get,y.has=y.has,y.set=y.set,r=function(e,t){if(y.has(e))throw m(f);return t.facade=e,y.set(e,t),t},i=function(e){return y.get(e)||{}},o=function(e){return y.has(e)}}else{var v=h("state");p[v]=!0,r=function(e,t){if(d(e,v))throw m(f);return t.facade=e,l(e,v,t),t},i=function(e){return d(e,v)?e[v]:{}},o=function(e){return d(e,v)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return n}}}},7659:function(e,t,n){var r=n(5112),i=n(7497),o=r("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[o]===e)}},3157:function(e,t,n){var r=n(4326);e.exports=Array.isArray||function(e){return"Array"==r(e)}},4067:function(e,t,n){var r=n(648);e.exports=function(e){var t=r(e);return"BigInt64Array"==t||"BigUint64Array"==t}},614:function(e,t,n){var r=n(4154),i=r.all;e.exports=r.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},4411:function(e,t,n){var r=n(1702),i=n(7293),o=n(614),s=n(648),a=n(5005),c=n(2788),l=function(){},d=[],u=a("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=r(h.exec),f=!h.exec(l),m=function(e){if(!o(e))return!1;try{return u(l,d,e),!0}catch(e){return!1}},g=function(e){if(!o(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(h,c(e))}catch(e){return!0}};g.sham=!0,e.exports=!u||i((function(){var e;return m(m.call)||!m(Object)||!m((function(){e=!0}))||e}))?g:m},4705:function(e,t,n){var r=n(7293),i=n(614),o=/#|\.prototype\./,s=function(e,t){var n=c[a(e)];return n==d||n!=l&&(i(t)?r(t):!!t)},a=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=s.data={},l=s.NATIVE="N",d=s.POLYFILL="P";e.exports=s},5988:function(e,t,n){var r=n(111),i=Math.floor;e.exports=Number.isInteger||function(e){return!r(e)&&isFinite(e)&&i(e)===e}},8554:function(e){e.exports=function(e){return null==e}},111:function(e,t,n){var r=n(614),i=n(4154),o=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:r(e)||e===o}:function(e){return"object"==typeof e?null!==e:r(e)}},1913:function(e){e.exports=!1},7850:function(e,t,n){var r=n(111),i=n(4326),o=n(5112)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},2190:function(e,t,n){var r=n(5005),i=n(614),o=n(7976),s=n(3307),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return i(t)&&o(t.prototype,a(e))}},408:function(e,t,n){var r=n(9974),i=n(6916),o=n(9670),s=n(6330),a=n(7659),c=n(6244),l=n(7976),d=n(4121),u=n(1246),h=n(9212),p=TypeError,f=function(e,t){this.stopped=e,this.result=t},m=f.prototype;e.exports=function(e,t,n){var g,y,v,_,E,S,T,b=n&&n.that,I=!(!n||!n.AS_ENTRIES),N=!(!n||!n.IS_RECORD),C=!(!n||!n.IS_ITERATOR),w=!(!n||!n.INTERRUPTED),R=r(t,b),A=function(e){return g&&h(g,"normal",e),new f(!0,e)},O=function(e){return I?(o(e),w?R(e[0],e[1],A):R(e[0],e[1])):w?R(e,A):R(e)};if(N)g=e.iterator;else if(C)g=e;else{if(!(y=u(e)))throw p(s(e)+" is not iterable");if(a(y)){for(v=0,_=c(e);_>v;v++)if((E=O(e[v]))&&l(m,E))return E;return new f(!1)}g=d(e,y)}for(S=N?e.next:g.next;!(T=i(S,g)).done;){try{E=O(T.value)}catch(e){h(g,"throw",e)}if("object"==typeof E&&E&&l(m,E))return E}return new f(!1)}},9212:function(e,t,n){var r=n(6916),i=n(9670),o=n(8173);e.exports=function(e,t,n){var s,a;i(e);try{if(!(s=o(e,"return"))){if("throw"===t)throw n;return n}s=r(s,e)}catch(e){a=!0,s=e}if("throw"===t)throw n;if(a)throw s;return i(s),n}},3061:function(e,t,n){"use strict";var r=n(3383).IteratorPrototype,i=n(30),o=n(9114),s=n(8003),a=n(7497),c=function(){return this};e.exports=function(e,t,n,l){var d=t+" Iterator";return e.prototype=i(r,{next:o(+!l,n)}),s(e,d,!1,!0),a[d]=c,e}},1656:function(e,t,n){"use strict";var r=n(2109),i=n(6916),o=n(1913),s=n(6530),a=n(614),c=n(3061),l=n(9518),d=n(7674),u=n(8003),h=n(8880),p=n(8052),f=n(5112),m=n(7497),g=n(3383),y=s.PROPER,v=s.CONFIGURABLE,_=g.IteratorPrototype,E=g.BUGGY_SAFARI_ITERATORS,S=f("iterator"),T="keys",b="values",I="entries",N=function(){return this};e.exports=function(e,t,n,s,f,g,C){c(n,t,s);var w,R,A,O=function(e){if(e===f&&L)return L;if(!E&&e in k)return k[e];switch(e){case T:case b:case I:return function(){return new n(this,e)}}return function(){return new n(this)}},M=t+" Iterator",D=!1,k=e.prototype,x=k[S]||k["@@iterator"]||f&&k[f],L=!E&&x||O(f),P="Array"==t&&k.entries||x;if(P&&(w=l(P.call(new e)))!==Object.prototype&&w.next&&(o||l(w)===_||(d?d(w,_):a(w[S])||p(w,S,N)),u(w,M,!0,!0),o&&(m[M]=N)),y&&f==b&&x&&x.name!==b&&(!o&&v?h(k,"name",b):(D=!0,L=function(){return i(x,this)})),f)if(R={values:O(b),keys:g?L:O(T),entries:O(I)},C)for(A in R)(E||D||!(A in k))&&p(k,A,R[A]);else r({target:t,proto:!0,forced:E||D},R);return o&&!C||k[S]===L||p(k,S,L,{name:f}),m[t]=L,R}},3383:function(e,t,n){"use strict";var r,i,o,s=n(7293),a=n(614),c=n(111),l=n(30),d=n(9518),u=n(8052),h=n(5112),p=n(1913),f=h("iterator"),m=!1;[].keys&&("next"in(o=[].keys())?(i=d(d(o)))!==Object.prototype&&(r=i):m=!0),!c(r)||s((function(){var e={};return r[f].call(e)!==e}))?r={}:p&&(r=l(r)),a(r[f])||u(r,f,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:m}},7497:function(e){e.exports={}},6244:function(e,t,n){var r=n(7466);e.exports=function(e){return r(e.length)}},6339:function(e,t,n){var r=n(1702),i=n(7293),o=n(614),s=n(2597),a=n(9781),c=n(6530).CONFIGURABLE,l=n(2788),d=n(9909),u=d.enforce,h=d.get,p=String,f=Object.defineProperty,m=r("".slice),g=r("".replace),y=r([].join),v=a&&!i((function(){return 8!==f((function(){}),"length",{value:8}).length})),_=String(String).split("String"),E=e.exports=function(e,t,n){"Symbol("===m(p(t),0,7)&&(t="["+g(p(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!s(e,"name")||c&&e.name!==t)&&(a?f(e,"name",{value:t,configurable:!0}):e.name=t),v&&n&&s(n,"arity")&&e.length!==n.arity&&f(e,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=u(e);return s(r,"source")||(r.source=y(_,"string"==typeof t?t:"")),e};Function.prototype.toString=E((function(){return o(this)&&h(this).source||l(this)}),"toString")},4758:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},5948:function(e,t,n){var r,i,o,s,a,c=n(7854),l=n(9974),d=n(1236).f,u=n(261).set,h=n(8572),p=n(6833),f=n(1528),m=n(1036),g=n(5268),y=c.MutationObserver||c.WebKitMutationObserver,v=c.document,_=c.process,E=c.Promise,S=d(c,"queueMicrotask"),T=S&&S.value;if(!T){var b=new h,I=function(){var e,t;for(g&&(e=_.domain)&&e.exit();t=b.get();)try{t()}catch(e){throw b.head&&r(),e}e&&e.enter()};p||g||m||!y||!v?!f&&E&&E.resolve?((s=E.resolve(void 0)).constructor=E,a=l(s.then,s),r=function(){a(I)}):g?r=function(){_.nextTick(I)}:(u=l(u,c),r=function(){u(I)}):(i=!0,o=v.createTextNode(""),new y(I).observe(o,{characterData:!0}),r=function(){o.data=i=!i}),T=function(e){b.head||r(),b.add(e)}}e.exports=T},8523:function(e,t,n){"use strict";var r=n(9662),i=TypeError,o=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw i("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new o(e)}},3929:function(e,t,n){var r=n(7850),i=TypeError;e.exports=function(e){if(r(e))throw i("The method doesn't accept regular expressions");return e}},1574:function(e,t,n){"use strict";var r=n(9781),i=n(1702),o=n(6916),s=n(7293),a=n(1956),c=n(5181),l=n(5296),d=n(7908),u=n(8361),h=Object.assign,p=Object.defineProperty,f=i([].concat);e.exports=!h||s((function(){if(r&&1!==h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=h({},e)[n]||a(h({},t)).join("")!=i}))?function(e,t){for(var n=d(e),i=arguments.length,s=1,h=c.f,p=l.f;i>s;)for(var m,g=u(arguments[s++]),y=h?f(a(g),h(g)):a(g),v=y.length,_=0;v>_;)m=y[_++],r&&!o(p,g,m)||(n[m]=g[m]);return n}:h},30:function(e,t,n){var r,i=n(9670),o=n(6048),s=n(748),a=n(3501),c=n(490),l=n(317),d=n(6200),u="prototype",h="script",p=d("IE_PROTO"),f=function(){},m=function(e){return"<"+h+">"+e+"</"+h+">"},g=function(e){e.write(m("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;y="undefined"!=typeof document?document.domain&&r?g(r):(t=l("iframe"),n="java"+h+":",t.style.display="none",c.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(m("document.F=Object")),e.close(),e.F):g(r);for(var i=s.length;i--;)delete y[u][s[i]];return y()};a[p]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f[u]=i(e),n=new f,f[u]=null,n[p]=e):n=y(),void 0===t?n:o.f(n,t)}},6048:function(e,t,n){var r=n(9781),i=n(3353),o=n(3070),s=n(9670),a=n(5656),c=n(1956);t.f=r&&!i?Object.defineProperties:function(e,t){s(e);for(var n,r=a(t),i=c(t),l=i.length,d=0;l>d;)o.f(e,n=i[d++],r[n]);return e}},3070:function(e,t,n){var r=n(9781),i=n(4664),o=n(3353),s=n(9670),a=n(4948),c=TypeError,l=Object.defineProperty,d=Object.getOwnPropertyDescriptor,u="enumerable",h="configurable",p="writable";t.f=r?o?function(e,t,n){if(s(e),t=a(t),s(n),"function"==typeof e&&"prototype"===t&&"value"in n&&p in n&&!n[p]){var r=d(e,t);r&&r[p]&&(e[t]=n.value,n={configurable:h in n?n[h]:r[h],enumerable:u in n?n[u]:r[u],writable:!1})}return l(e,t,n)}:l:function(e,t,n){if(s(e),t=a(t),s(n),i)try{return l(e,t,n)}catch(e){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:function(e,t,n){var r=n(9781),i=n(6916),o=n(5296),s=n(9114),a=n(5656),c=n(4948),l=n(2597),d=n(4664),u=Object.getOwnPropertyDescriptor;t.f=r?u:function(e,t){if(e=a(e),t=c(t),d)try{return u(e,t)}catch(e){}if(l(e,t))return s(!i(o.f,e,t),e[t])}},1156:function(e,t,n){var r=n(4326),i=n(5656),o=n(8006).f,s=n(1589),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"Window"==r(e)?function(e){try{return o(e)}catch(e){return s(a)}}(e):o(i(e))}},8006:function(e,t,n){var r=n(6324),i=n(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},5181:function(e,t){t.f=Object.getOwnPropertySymbols},9518:function(e,t,n){var r=n(2597),i=n(614),o=n(7908),s=n(6200),a=n(8544),c=s("IE_PROTO"),l=Object,d=l.prototype;e.exports=a?l.getPrototypeOf:function(e){var t=o(e);if(r(t,c))return t[c];var n=t.constructor;return i(n)&&t instanceof n?n.prototype:t instanceof l?d:null}},2050:function(e,t,n){var r=n(7293),i=n(111),o=n(4326),s=n(7556),a=Object.isExtensible,c=r((function(){a(1)}));e.exports=c||s?function(e){return!!i(e)&&(!s||"ArrayBuffer"!=o(e))&&(!a||a(e))}:a},7976:function(e,t,n){var r=n(1702);e.exports=r({}.isPrototypeOf)},6324:function(e,t,n){var r=n(1702),i=n(2597),o=n(5656),s=n(1318).indexOf,a=n(3501),c=r([].push);e.exports=function(e,t){var n,r=o(e),l=0,d=[];for(n in r)!i(a,n)&&i(r,n)&&c(d,n);for(;t.length>l;)i(r,n=t[l++])&&(~s(d,n)||c(d,n));return d}},1956:function(e,t,n){var r=n(6324),i=n(748);e.exports=Object.keys||function(e){return r(e,i)}},5296:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},7674:function(e,t,n){var r=n(5668),i=n(9670),o=n(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=r(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return i(n),o(r),t?e(n,r):n.__proto__=r,n}}():void 0)},4699:function(e,t,n){var r=n(9781),i=n(1702),o=n(1956),s=n(5656),a=i(n(5296).f),c=i([].push),l=function(e){return function(t){for(var n,i=s(t),l=o(i),d=l.length,u=0,h=[];d>u;)n=l[u++],r&&!a(i,n)||c(h,e?[n,i[n]]:i[n]);return h}};e.exports={entries:l(!0),values:l(!1)}},288:function(e,t,n){"use strict";var r=n(1694),i=n(648);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},2140:function(e,t,n){var r=n(6916),i=n(614),o=n(111),s=TypeError;e.exports=function(e,t){var n,a;if("string"===t&&i(n=e.toString)&&!o(a=r(n,e)))return a;if(i(n=e.valueOf)&&!o(a=r(n,e)))return a;if("string"!==t&&i(n=e.toString)&&!o(a=r(n,e)))return a;throw s("Can't convert object to primitive value")}},3887:function(e,t,n){var r=n(5005),i=n(1702),o=n(8006),s=n(5181),a=n(9670),c=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(a(e)),n=s.f;return n?c(t,n(e)):t}},857:function(e,t,n){var r=n(7854);e.exports=r},2534:function(e){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},3702:function(e,t,n){var r=n(7854),i=n(2492),o=n(614),s=n(4705),a=n(2788),c=n(5112),l=n(7871),d=n(3823),u=n(1913),h=n(7392),p=i&&i.prototype,f=c("species"),m=!1,g=o(r.PromiseRejectionEvent),y=s("Promise",(function(){var e=a(i),t=e!==String(i);if(!t&&66===h)return!0;if(u&&(!p.catch||!p.finally))return!0;if(!h||h<51||!/native code/.test(e)){var n=new i((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[f]=r,!(m=n.then((function(){}))instanceof r))return!0}return!t&&(l||d)&&!g}));e.exports={CONSTRUCTOR:y,REJECTION_EVENT:g,SUBCLASSING:m}},2492:function(e,t,n){var r=n(7854);e.exports=r.Promise},9478:function(e,t,n){var r=n(9670),i=n(111),o=n(8523);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},612:function(e,t,n){var r=n(2492),i=n(7072),o=n(3702).CONSTRUCTOR;e.exports=o||!i((function(e){r.all(e).then(void 0,(function(){}))}))},8572:function(e){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}},e.exports=t},2261:function(e,t,n){"use strict";var r,i,o=n(6916),s=n(1702),a=n(1340),c=n(7066),l=n(2999),d=n(2309),u=n(30),h=n(9909).get,p=n(9441),f=n(7168),m=d("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,y=g,v=s("".charAt),_=s("".indexOf),E=s("".replace),S=s("".slice),T=(i=/b*/g,o(g,r=/a/,"a"),o(g,i,"a"),0!==r.lastIndex||0!==i.lastIndex),b=l.BROKEN_CARET,I=void 0!==/()??/.exec("")[1];(T||I||b||p||f)&&(y=function(e){var t,n,r,i,s,l,d,p=this,f=h(p),N=a(e),C=f.raw;if(C)return C.lastIndex=p.lastIndex,t=o(y,C,N),p.lastIndex=C.lastIndex,t;var w=f.groups,R=b&&p.sticky,A=o(c,p),O=p.source,M=0,D=N;if(R&&(A=E(A,"y",""),-1===_(A,"g")&&(A+="g"),D=S(N,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==v(N,p.lastIndex-1))&&(O="(?: "+O+")",D=" "+D,M++),n=new RegExp("^(?:"+O+")",A)),I&&(n=new RegExp("^"+O+"$(?!\\s)",A)),T&&(r=p.lastIndex),i=o(g,R?n:p,D),R?i?(i.input=S(i.input,M),i[0]=S(i[0],M),i.index=p.lastIndex,p.lastIndex+=i[0].length):p.lastIndex=0:T&&i&&(p.lastIndex=p.global?i.index+i[0].length:r),I&&i&&i.length>1&&o(m,i[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i&&w)for(i.groups=l=u(null),s=0;s<w.length;s++)l[(d=w[s])[0]]=i[d[1]];return i}),e.exports=y},7066:function(e,t,n){"use strict";var r=n(9670);e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},4706:function(e,t,n){var r=n(6916),i=n(2597),o=n(7976),s=n(7066),a=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in a||i(e,"flags")||!o(a,e)?t:r(s,e)}},2999:function(e,t,n){var r=n(7293),i=n(7854).RegExp,o=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),s=o||r((function(){return!i("a","y").sticky})),a=o||r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:o}},9441:function(e,t,n){var r=n(7293),i=n(7854).RegExp;e.exports=r((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},7168:function(e,t,n){var r=n(7293),i=n(7854).RegExp;e.exports=r((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},4488:function(e,t,n){var r=n(8554),i=TypeError;e.exports=function(e){if(r(e))throw i("Can't call method on "+e);return e}},7152:function(e,t,n){"use strict";var r,i=n(7854),o=n(2104),s=n(614),a=n(9363),c=n(8113),l=n(206),d=n(8053),u=i.Function,h=/MSIE .\./.test(c)||a&&((r=i.Bun.version.split(".")).length<3||0==r[0]&&(r[1]<3||3==r[1]&&0==r[2]));e.exports=function(e,t){var n=t?2:1;return h?function(r,i){var a=d(arguments.length,1)>n,c=s(r)?r:u(r),h=a?l(arguments,n):[],p=a?function(){o(c,this,h)}:c;return t?e(p,i):e(p)}:e}},6340:function(e,t,n){"use strict";var r=n(5005),i=n(7045),o=n(5112),s=n(9781),a=o("species");e.exports=function(e){var t=r(e);s&&t&&!t[a]&&i(t,a,{configurable:!0,get:function(){return this}})}},8003:function(e,t,n){var r=n(3070).f,i=n(2597),o=n(5112)("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!i(e,o)&&r(e,o,{configurable:!0,value:t})}},6200:function(e,t,n){var r=n(2309),i=n(9711),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},5465:function(e,t,n){var r=n(7854),i=n(3072),o="__core-js_shared__",s=r[o]||i(o,{});e.exports=s},2309:function(e,t,n){var r=n(1913),i=n(5465);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.30.2",mode:r?"pure":"global",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.2/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:function(e,t,n){var r=n(9670),i=n(9483),o=n(8554),s=n(5112)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||o(n=r(a)[s])?t:i(n)}},8710:function(e,t,n){var r=n(1702),i=n(9303),o=n(1340),s=n(4488),a=r("".charAt),c=r("".charCodeAt),l=r("".slice),d=function(e){return function(t,n){var r,d,u=o(s(t)),h=i(n),p=u.length;return h<0||h>=p?e?"":void 0:(r=c(u,h))<55296||r>56319||h+1===p||(d=c(u,h+1))<56320||d>57343?e?a(u,h):r:e?l(u,h,h+2):d-56320+(r-55296<<10)+65536}};e.exports={codeAt:d(!1),charAt:d(!0)}},3197:function(e,t,n){var r=n(1702),i=2147483647,o=/[^\0-\u007E]/,s=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",c=RangeError,l=r(s.exec),d=Math.floor,u=String.fromCharCode,h=r("".charCodeAt),p=r([].join),f=r([].push),m=r("".replace),g=r("".split),y=r("".toLowerCase),v=function(e){return e+22+75*(e<26)},_=function(e,t,n){var r=0;for(e=n?d(e/700):e>>1,e+=d(e/t);e>455;)e=d(e/35),r+=36;return d(r+36*e/(e+38))},E=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=h(e,n++);if(i>=55296&&i<=56319&&n<r){var o=h(e,n++);56320==(64512&o)?f(t,((1023&i)<<10)+(1023&o)+65536):(f(t,i),n--)}else f(t,i)}return t}(e);var n,r,o=e.length,s=128,l=0,m=72;for(n=0;n<e.length;n++)(r=e[n])<128&&f(t,u(r));var g=t.length,y=g;for(g&&f(t,"-");y<o;){var E=i;for(n=0;n<e.length;n++)(r=e[n])>=s&&r<E&&(E=r);var S=y+1;if(E-s>d((i-l)/S))throw c(a);for(l+=(E-s)*S,s=E,n=0;n<e.length;n++){if((r=e[n])<s&&++l>i)throw c(a);if(r==s){for(var T=l,b=36;;){var I=b<=m?1:b>=m+26?26:b-m;if(T<I)break;var N=T-I,C=36-I;f(t,u(v(I+N%C))),T=d(N/C),b+=36}f(t,u(v(T))),m=_(l,S,y==g),l=0,y++}}l++,s++}return p(t,"")};e.exports=function(e){var t,n,r=[],i=g(m(y(e),s,"."),".");for(t=0;t<i.length;t++)n=i[t],f(r,l(o,n)?"xn--"+E(n):n);return p(r,".")}},3111:function(e,t,n){var r=n(1702),i=n(4488),o=n(1340),s=n(1361),a=r("".replace),c=RegExp("^["+s+"]+"),l=RegExp("(^|[^"+s+"])["+s+"]+$"),d=function(e){return function(t){var n=o(i(t));return 1&e&&(n=a(n,c,"")),2&e&&(n=a(n,l,"$1")),n}};e.exports={start:d(1),end:d(2),trim:d(3)}},6293:function(e,t,n){var r=n(7392),i=n(7293),o=n(7854).String;e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!o(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},6532:function(e,t,n){var r=n(6916),i=n(5005),o=n(5112),s=n(8052);e.exports=function(){var e=i("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,a=o("toPrimitive");t&&!t[a]&&s(t,a,(function(e){return r(n,this)}),{arity:1})}},2015:function(e,t,n){var r=n(6293);e.exports=r&&!!Symbol.for&&!!Symbol.keyFor},261:function(e,t,n){var r,i,o,s,a=n(7854),c=n(2104),l=n(9974),d=n(614),u=n(2597),h=n(7293),p=n(490),f=n(206),m=n(317),g=n(8053),y=n(6833),v=n(5268),_=a.setImmediate,E=a.clearImmediate,S=a.process,T=a.Dispatch,b=a.Function,I=a.MessageChannel,N=a.String,C=0,w={},R="onreadystatechange";h((function(){r=a.location}));var A=function(e){if(u(w,e)){var t=w[e];delete w[e],t()}},O=function(e){return function(){A(e)}},M=function(e){A(e.data)},D=function(e){a.postMessage(N(e),r.protocol+"//"+r.host)};_&&E||(_=function(e){g(arguments.length,1);var t=d(e)?e:b(e),n=f(arguments,1);return w[++C]=function(){c(t,void 0,n)},i(C),C},E=function(e){delete w[e]},v?i=function(e){S.nextTick(O(e))}:T&&T.now?i=function(e){T.now(O(e))}:I&&!y?(s=(o=new I).port2,o.port1.onmessage=M,i=l(s.postMessage,s)):a.addEventListener&&d(a.postMessage)&&!a.importScripts&&r&&"file:"!==r.protocol&&!h(D)?(i=D,a.addEventListener("message",M,!1)):i=R in m("script")?function(e){p.appendChild(m("script"))[R]=function(){p.removeChild(this),A(e)}}:function(e){setTimeout(O(e),0)}),e.exports={set:_,clear:E}},863:function(e,t,n){var r=n(1702);e.exports=r(1..valueOf)},1400:function(e,t,n){var r=n(9303),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},4599:function(e,t,n){var r=n(7593),i=TypeError;e.exports=function(e){var t=r(e,"number");if("number"==typeof t)throw i("Can't convert number to bigint");return BigInt(t)}},7067:function(e,t,n){var r=n(9303),i=n(7466),o=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw o("Wrong length or index");return n}},5656:function(e,t,n){var r=n(8361),i=n(4488);e.exports=function(e){return r(i(e))}},9303:function(e,t,n){var r=n(4758);e.exports=function(e){var t=+e;return t!=t||0===t?0:r(t)}},7466:function(e,t,n){var r=n(9303),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},7908:function(e,t,n){var r=n(4488),i=Object;e.exports=function(e){return i(r(e))}},4590:function(e,t,n){var r=n(3002),i=RangeError;e.exports=function(e,t){var n=r(e);if(n%t)throw i("Wrong offset");return n}},3002:function(e,t,n){var r=n(9303),i=RangeError;e.exports=function(e){var t=r(e);if(t<0)throw i("The argument can't be less than 0");return t}},7593:function(e,t,n){var r=n(6916),i=n(111),o=n(2190),s=n(8173),a=n(2140),c=n(5112),l=TypeError,d=c("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var n,c=s(e,d);if(c){if(void 0===t&&(t="default"),n=r(c,e,t),!i(n)||o(n))return n;throw l("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},4948:function(e,t,n){var r=n(7593),i=n(2190);e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},1694:function(e,t,n){var r={};r[n(5112)("toStringTag")]="z",e.exports="[object z]"===String(r)},1340:function(e,t,n){var r=n(648),i=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},6330:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},9843:function(e,t,n){"use strict";var r=n(2109),i=n(7854),o=n(6916),s=n(9781),a=n(3832),c=n(260),l=n(3331),d=n(5787),u=n(9114),h=n(8880),p=n(5988),f=n(7466),m=n(7067),g=n(4590),y=n(4948),v=n(2597),_=n(648),E=n(111),S=n(2190),T=n(30),b=n(7976),I=n(7674),N=n(8006).f,C=n(7321),w=n(2092).forEach,R=n(6340),A=n(7045),O=n(3070),M=n(1236),D=n(9909),k=n(9587),x=D.get,L=D.set,P=D.enforce,j=O.f,U=M.f,F=Math.round,z=i.RangeError,V=l.ArrayBuffer,B=V.prototype,G=l.DataView,H=c.NATIVE_ARRAY_BUFFER_VIEWS,W=c.TYPED_ARRAY_TAG,Y=c.TypedArray,q=c.TypedArrayPrototype,K=c.aTypedArrayConstructor,Q=c.isTypedArray,J="BYTES_PER_ELEMENT",X="Wrong length",Z=function(e,t){K(e);for(var n=0,r=t.length,i=new e(r);r>n;)i[n]=t[n++];return i},$=function(e,t){A(e,t,{configurable:!0,get:function(){return x(this)[t]}})},ee=function(e){var t;return b(B,e)||"ArrayBuffer"==(t=_(e))||"SharedArrayBuffer"==t},te=function(e,t){return Q(e)&&!S(t)&&t in e&&p(+t)&&t>=0},ne=function(e,t){return t=y(t),te(e,t)?u(2,e[t]):U(e,t)},re=function(e,t,n){return t=y(t),!(te(e,t)&&E(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?j(e,t,n):(e[t]=n.value,e)};s?(H||(M.f=ne,O.f=re,$(q,"buffer"),$(q,"byteOffset"),$(q,"byteLength"),$(q,"length")),r({target:"Object",stat:!0,forced:!H},{getOwnPropertyDescriptor:ne,defineProperty:re}),e.exports=function(e,t,n){var s=e.match(/\d+/)[0]/8,c=e+(n?"Clamped":"")+"Array",l="get"+e,u="set"+e,p=i[c],y=p,v=y&&y.prototype,_={},S=function(e,t){j(e,t,{get:function(){return function(e,t){var n=x(e);return n.view[l](t*s+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var i=x(e);n&&(r=(r=F(r))<0?0:r>255?255:255&r),i.view[u](t*s+i.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};H?a&&(y=t((function(e,t,n,r){return d(e,v),k(E(t)?ee(t)?void 0!==r?new p(t,g(n,s),r):void 0!==n?new p(t,g(n,s)):new p(t):Q(t)?Z(y,t):o(C,y,t):new p(m(t)),e,y)})),I&&I(y,Y),w(N(p),(function(e){e in y||h(y,e,p[e])})),y.prototype=v):(y=t((function(e,t,n,r){d(e,v);var i,a,c,l=0,u=0;if(E(t)){if(!ee(t))return Q(t)?Z(y,t):o(C,y,t);i=t,u=g(n,s);var h=t.byteLength;if(void 0===r){if(h%s)throw z(X);if((a=h-u)<0)throw z(X)}else if((a=f(r)*s)+u>h)throw z(X);c=a/s}else c=m(t),i=new V(a=c*s);for(L(e,{buffer:i,byteOffset:u,byteLength:a,length:c,view:new G(i)});l<c;)S(e,l++)})),I&&I(y,Y),v=y.prototype=T(q)),v.constructor!==y&&h(v,"constructor",y),P(v).TypedArrayConstructor=y,W&&h(v,W,c);var b=y!=p;_[c]=y,r({global:!0,constructor:!0,forced:b,sham:!H},_),J in y||h(y,J,s),J in v||h(v,J,s),R(c)}):e.exports=function(){}},3832:function(e,t,n){var r=n(7854),i=n(7293),o=n(7072),s=n(260).NATIVE_ARRAY_BUFFER_VIEWS,a=r.ArrayBuffer,c=r.Int8Array;e.exports=!s||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!o((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||i((function(){return 1!==new c(new a(2),1,void 0).length}))},3074:function(e,t,n){var r=n(7745),i=n(6304);e.exports=function(e,t){return r(i(e),t)}},7321:function(e,t,n){var r=n(9974),i=n(6916),o=n(9483),s=n(7908),a=n(6244),c=n(4121),l=n(1246),d=n(7659),u=n(4067),h=n(260).aTypedArrayConstructor,p=n(4599);e.exports=function(e){var t,n,f,m,g,y,v,_,E=o(this),S=s(e),T=arguments.length,b=T>1?arguments[1]:void 0,I=void 0!==b,N=l(S);if(N&&!d(N))for(_=(v=c(S,N)).next,S=[];!(y=i(_,v)).done;)S.push(y.value);for(I&&T>2&&(b=r(b,arguments[2])),n=a(S),f=new(h(E))(n),m=u(f),t=0;n>t;t++)g=I?b(S[t],t):S[t],f[t]=m?p(g):+g;return f}},6304:function(e,t,n){var r=n(260),i=n(6707),o=r.aTypedArrayConstructor,s=r.getTypedArrayConstructor;e.exports=function(e){return o(i(e,s(e)))}},9711:function(e,t,n){var r=n(1702),i=0,o=Math.random(),s=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++i+o,36)}},5143:function(e,t,n){var r=n(7293),i=n(5112),o=n(9781),s=n(1913),a=i("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),s&&!e.toJSON||!t.size&&(s||!o)||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},3307:function(e,t,n){var r=n(6293);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(e,t,n){var r=n(9781),i=n(7293);e.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:function(e){var t=TypeError;e.exports=function(e,n){if(e<n)throw t("Not enough arguments");return e}},4811:function(e,t,n){var r=n(7854),i=n(614),o=r.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},6800:function(e,t,n){var r=n(857),i=n(2597),o=n(6061),s=n(3070).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||s(t,e,{value:o.f(e)})}},6061:function(e,t,n){var r=n(5112);t.f=r},5112:function(e,t,n){var r=n(7854),i=n(2309),o=n(2597),s=n(9711),a=n(6293),c=n(3307),l=r.Symbol,d=i("wks"),u=c?l.for||l:l&&l.withoutSetter||s;e.exports=function(e){return o(d,e)||(d[e]=a&&o(l,e)?l[e]:u("Symbol."+e)),d[e]}},1361:function(e){e.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},8264:function(e,t,n){"use strict";var r=n(2109),i=n(7854),o=n(3331),s=n(6340),a="ArrayBuffer",c=o[a];r({global:!0,constructor:!0,forced:i[a]!==c},{ArrayBuffer:c}),s(a)},9575:function(e,t,n){"use strict";var r=n(2109),i=n(1470),o=n(7293),s=n(3331),a=n(9670),c=n(1400),l=n(7466),d=n(6707),u=s.ArrayBuffer,h=s.DataView,p=h.prototype,f=i(u.prototype.slice),m=i(p.getUint8),g=i(p.setUint8);r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:o((function(){return!new u(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(f&&void 0===t)return f(a(this),e);for(var n=a(this).byteLength,r=c(e,n),i=c(void 0===t?n:t,n),o=new(d(this,u))(l(i-r)),s=new h(this),p=new h(o),y=0;r<i;)g(p,y++,m(s,r++));return o}})},2222:function(e,t,n){"use strict";var r=n(2109),i=n(7293),o=n(3157),s=n(111),a=n(7908),c=n(6244),l=n(7207),d=n(6135),u=n(5417),h=n(1194),p=n(5112),f=n(7392),m=p("isConcatSpreadable"),g=f>=51||!i((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),y=function(e){if(!s(e))return!1;var t=e[m];return void 0!==t?!!t:o(e)};r({target:"Array",proto:!0,arity:1,forced:!g||!h("concat")},{concat:function(e){var t,n,r,i,o,s=a(this),h=u(s,0),p=0;for(t=-1,r=arguments.length;t<r;t++)if(y(o=-1===t?s:arguments[t]))for(i=c(o),l(p+i),n=0;n<i;n++,p++)n in o&&d(h,p,o[n]);else l(p+1),d(h,p++,o);return h.length=p,h}})},7327:function(e,t,n){"use strict";var r=n(2109),i=n(2092).filter;r({target:"Array",proto:!0,forced:!n(1194)("filter")},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},9554:function(e,t,n){"use strict";var r=n(2109),i=n(8533);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},1038:function(e,t,n){var r=n(2109),i=n(8457);r({target:"Array",stat:!0,forced:!n(7072)((function(e){Array.from(e)}))},{from:i})},6699:function(e,t,n){"use strict";var r=n(2109),i=n(1318).includes,o=n(7293),s=n(1223);r({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},2772:function(e,t,n){"use strict";var r=n(2109),i=n(1470),o=n(1318).indexOf,s=n(9341),a=i([].indexOf),c=!!a&&1/a([1],1,-0)<0;r({target:"Array",proto:!0,forced:c||!s("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return c?a(this,e,t)||0:o(this,e,t)}})},9753:function(e,t,n){n(2109)({target:"Array",stat:!0},{isArray:n(3157)})},6992:function(e,t,n){"use strict";var r=n(5656),i=n(1223),o=n(7497),s=n(9909),a=n(3070).f,c=n(1656),l=n(6178),d=n(1913),u=n(9781),h="Array Iterator",p=s.set,f=s.getterFor(h);e.exports=c(Array,"Array",(function(e,t){p(this,{type:h,target:r(e),index:0,kind:t})}),(function(){var e=f(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,l(void 0,!0)):l("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)}),"values");var m=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!d&&u&&"values"!==m.name)try{a(m,"name",{value:"values"})}catch(e){}},9600:function(e,t,n){"use strict";var r=n(2109),i=n(1702),o=n(8361),s=n(5656),a=n(9341),c=i([].join);r({target:"Array",proto:!0,forced:o!=Object||!a("join",",")},{join:function(e){return c(s(this),void 0===e?",":e)}})},4986:function(e,t,n){var r=n(2109),i=n(6583);r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},1249:function(e,t,n){"use strict";var r=n(2109),i=n(2092).map;r({target:"Array",proto:!0,forced:!n(1194)("map")},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},5827:function(e,t,n){"use strict";var r=n(2109),i=n(3671).left,o=n(9341),s=n(7392);r({target:"Array",proto:!0,forced:!n(5268)&&s>79&&s<83||!o("reduce")},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},5069:function(e,t,n){"use strict";var r=n(2109),i=n(1702),o=n(3157),s=i([].reverse),a=[1,2];r({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return o(this)&&(this.length=this.length),s(this)}})},7042:function(e,t,n){"use strict";var r=n(2109),i=n(3157),o=n(4411),s=n(111),a=n(1400),c=n(6244),l=n(5656),d=n(6135),u=n(5112),h=n(1194),p=n(206),f=h("slice"),m=u("species"),g=Array,y=Math.max;r({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var n,r,u,h=l(this),f=c(h),v=a(e,f),_=a(void 0===t?f:t,f);if(i(h)&&(n=h.constructor,(o(n)&&(n===g||i(n.prototype))||s(n)&&null===(n=n[m]))&&(n=void 0),n===g||void 0===n))return p(h,v,_);for(r=new(void 0===n?g:n)(y(_-v,0)),u=0;v<_;v++,u++)v in h&&d(r,u,h[v]);return r.length=u,r}})},5212:function(e,t,n){"use strict";var r=n(2109),i=n(2092).some;r({target:"Array",proto:!0,forced:!n(9341)("some")},{some:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},561:function(e,t,n){"use strict";var r=n(2109),i=n(7908),o=n(1400),s=n(9303),a=n(6244),c=n(3658),l=n(7207),d=n(5417),u=n(6135),h=n(5117),p=n(1194)("splice"),f=Math.max,m=Math.min;r({target:"Array",proto:!0,forced:!p},{splice:function(e,t){var n,r,p,g,y,v,_=i(this),E=a(_),S=o(e,E),T=arguments.length;for(0===T?n=r=0:1===T?(n=0,r=E-S):(n=T-2,r=m(f(s(t),0),E-S)),l(E+n-r),p=d(_,r),g=0;g<r;g++)(y=S+g)in _&&u(p,g,_[y]);if(p.length=r,n<r){for(g=S;g<E-r;g++)v=g+n,(y=g+r)in _?_[v]=_[y]:h(_,v);for(g=E;g>E-r+n;g--)h(_,g-1)}else if(n>r)for(g=E-r;g>S;g--)v=g+n-1,(y=g+r-1)in _?_[v]=_[y]:h(_,v);for(g=0;g<n;g++)_[g+S]=arguments[g+2];return c(_,E-r+n),p}})},3843:function(e,t,n){var r=n(2109),i=n(1702),o=Date,s=i(o.prototype.getTime);r({target:"Date",stat:!0},{now:function(){return s(new o)}})},3710:function(e,t,n){var r=n(1702),i=n(8052),o=Date.prototype,s="Invalid Date",a="toString",c=r(o[a]),l=r(o.getTime);String(new Date(NaN))!=s&&i(o,a,(function(){var e=l(this);return e==e?c(this):s}))},4812:function(e,t,n){var r=n(2109),i=n(7065);r({target:"Function",proto:!0,forced:Function.bind!==i},{bind:i})},8309:function(e,t,n){var r=n(9781),i=n(6530).EXISTS,o=n(1702),s=n(7045),a=Function.prototype,c=o(a.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=o(l.exec);r&&!i&&s(a,"name",{configurable:!0,get:function(){try{return d(l,c(this))[1]}catch(e){return""}}})},8862:function(e,t,n){var r=n(2109),i=n(5005),o=n(2104),s=n(6916),a=n(1702),c=n(7293),l=n(614),d=n(2190),u=n(206),h=n(8044),p=n(6293),f=String,m=i("JSON","stringify"),g=a(/./.exec),y=a("".charAt),v=a("".charCodeAt),_=a("".replace),E=a(1..toString),S=/[\uD800-\uDFFF]/g,T=/^[\uD800-\uDBFF]$/,b=/^[\uDC00-\uDFFF]$/,I=!p||c((function(){var e=i("Symbol")();return"[null]"!=m([e])||"{}"!=m({a:e})||"{}"!=m(Object(e))})),N=c((function(){return'"\\udf06\\ud834"'!==m("\udf06\ud834")||'"\\udead"'!==m("\udead")})),C=function(e,t){var n=u(arguments),r=h(t);if(l(r)||void 0!==e&&!d(e))return n[1]=function(e,t){if(l(r)&&(t=s(r,this,f(e),t)),!d(t))return t},o(m,null,n)},w=function(e,t,n){var r=y(n,t-1),i=y(n,t+1);return g(T,e)&&!g(b,i)||g(b,e)&&!g(T,r)?"\\u"+E(v(e,0),16):e};m&&r({target:"JSON",stat:!0,arity:3,forced:I||N},{stringify:function(e,t,n){var r=u(arguments),i=o(I?C:m,null,r);return N&&"string"==typeof i?_(i,S,w):i}})},9098:function(e,t,n){"use strict";n(7710)("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(5631))},1532:function(e,t,n){n(9098)},9653:function(e,t,n){"use strict";var r=n(2109),i=n(1913),o=n(9781),s=n(7854),a=n(857),c=n(1702),l=n(4705),d=n(2597),u=n(9587),h=n(7976),p=n(2190),f=n(7593),m=n(7293),g=n(8006).f,y=n(1236).f,v=n(3070).f,_=n(863),E=n(3111).trim,S="Number",T=s[S],b=a[S],I=T.prototype,N=s.TypeError,C=c("".slice),w=c("".charCodeAt),R=l(S,!T(" 0o1")||!T("0b1")||T("+0x1")),A=function(e){var t,n=arguments.length<1?0:T(function(e){var t=f(e,"number");return"bigint"==typeof t?t:function(e){var t,n,r,i,o,s,a,c,l=f(e,"number");if(p(l))throw N("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=E(l),43===(t=w(l,0))||45===t){if(88===(n=w(l,2))||120===n)return NaN}else if(48===t){switch(w(l,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(s=(o=C(l,2)).length,a=0;a<s;a++)if((c=w(o,a))<48||c>i)return NaN;return parseInt(o,r)}return+l}(t)}(e));return h(I,t=this)&&m((function(){_(t)}))?u(Object(n),this,A):n};A.prototype=I,R&&!i&&(I.constructor=A),r({global:!0,constructor:!0,wrap:!0,forced:R},{Number:A});var O=function(e,t){for(var n,r=o?g(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),i=0;r.length>i;i++)d(t,n=r[i])&&!d(e,n)&&v(e,n,y(t,n))};i&&b&&O(a[S],b),(R||i)&&O(a[S],T)},3161:function(e,t,n){n(2109)({target:"Number",stat:!0},{isInteger:n(5988)})},9601:function(e,t,n){var r=n(2109),i=n(1574);r({target:"Object",stat:!0,arity:2,forced:Object.assign!==i},{assign:i})},9070:function(e,t,n){var r=n(2109),i=n(9781),o=n(3070).f;r({target:"Object",stat:!0,forced:Object.defineProperty!==o,sham:!i},{defineProperty:o})},9720:function(e,t,n){var r=n(2109),i=n(4699).entries;r({target:"Object",stat:!0},{entries:function(e){return i(e)}})},9660:function(e,t,n){var r=n(2109),i=n(6293),o=n(7293),s=n(5181),a=n(7908);r({target:"Object",stat:!0,forced:!i||o((function(){s.f(1)}))},{getOwnPropertySymbols:function(e){var t=s.f;return t?t(a(e)):[]}})},7941:function(e,t,n){var r=n(2109),i=n(7908),o=n(1956);r({target:"Object",stat:!0,forced:n(7293)((function(){o(1)}))},{keys:function(e){return o(i(e))}})},1539:function(e,t,n){var r=n(1694),i=n(8052),o=n(288);r||i(Object.prototype,"toString",o,{unsafe:!0})},821:function(e,t,n){"use strict";var r=n(2109),i=n(6916),o=n(9662),s=n(8523),a=n(2534),c=n(408);r({target:"Promise",stat:!0,forced:n(612)},{all:function(e){var t=this,n=s.f(t),r=n.resolve,l=n.reject,d=a((function(){var n=o(t.resolve),s=[],a=0,d=1;c(e,(function(e){var o=a++,c=!1;d++,i(n,t,e).then((function(e){c||(c=!0,s[o]=e,--d||r(s))}),l)})),--d||r(s)}));return d.error&&l(d.value),n.promise}})},4164:function(e,t,n){"use strict";var r=n(2109),i=n(1913),o=n(3702).CONSTRUCTOR,s=n(2492),a=n(5005),c=n(614),l=n(8052),d=s&&s.prototype;if(r({target:"Promise",proto:!0,forced:o,real:!0},{catch:function(e){return this.then(void 0,e)}}),!i&&c(s)){var u=a("Promise").prototype.catch;d.catch!==u&&l(d,"catch",u,{unsafe:!0})}},3401:function(e,t,n){"use strict";var r,i,o,s=n(2109),a=n(1913),c=n(5268),l=n(7854),d=n(6916),u=n(8052),h=n(7674),p=n(8003),f=n(6340),m=n(9662),g=n(614),y=n(111),v=n(5787),_=n(6707),E=n(261).set,S=n(5948),T=n(842),b=n(2534),I=n(8572),N=n(9909),C=n(2492),w=n(3702),R=n(8523),A="Promise",O=w.CONSTRUCTOR,M=w.REJECTION_EVENT,D=w.SUBCLASSING,k=N.getterFor(A),x=N.set,L=C&&C.prototype,P=C,j=L,U=l.TypeError,F=l.document,z=l.process,V=R.f,B=V,G=!!(F&&F.createEvent&&l.dispatchEvent),H="unhandledrejection",W=function(e){var t;return!(!y(e)||!g(t=e.then))&&t},Y=function(e,t){var n,r,i,o=t.value,s=1==t.state,a=s?e.ok:e.fail,c=e.resolve,l=e.reject,u=e.domain;try{a?(s||(2===t.rejection&&X(t),t.rejection=1),!0===a?n=o:(u&&u.enter(),n=a(o),u&&(u.exit(),i=!0)),n===e.promise?l(U("Promise-chain cycle")):(r=W(n))?d(r,n,c,l):c(n)):l(o)}catch(e){u&&!i&&u.exit(),l(e)}},q=function(e,t){e.notified||(e.notified=!0,S((function(){for(var n,r=e.reactions;n=r.get();)Y(n,e);e.notified=!1,t&&!e.rejection&&Q(e)})))},K=function(e,t,n){var r,i;G?((r=F.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),l.dispatchEvent(r)):r={promise:t,reason:n},!M&&(i=l["on"+e])?i(r):e===H&&T("Unhandled promise rejection",n)},Q=function(e){d(E,l,(function(){var t,n=e.facade,r=e.value;if(J(e)&&(t=b((function(){c?z.emit("unhandledRejection",r,n):K(H,n,r)})),e.rejection=c||J(e)?2:1,t.error))throw t.value}))},J=function(e){return 1!==e.rejection&&!e.parent},X=function(e){d(E,l,(function(){var t=e.facade;c?z.emit("rejectionHandled",t):K("rejectionhandled",t,e.value)}))},Z=function(e,t,n){return function(r){e(t,r,n)}},$=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,q(e,!0))},ee=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw U("Promise can't be resolved itself");var r=W(t);r?S((function(){var n={done:!1};try{d(r,t,Z(ee,n,e),Z($,n,e))}catch(t){$(n,t,e)}})):(e.value=t,e.state=1,q(e,!1))}catch(t){$({done:!1},t,e)}}};if(O&&(j=(P=function(e){v(this,j),m(e),d(r,this);var t=k(this);try{e(Z(ee,t),Z($,t))}catch(e){$(t,e)}}).prototype,(r=function(e){x(this,{type:A,done:!1,notified:!1,parent:!1,reactions:new I,rejection:!1,state:0,value:void 0})}).prototype=u(j,"then",(function(e,t){var n=k(this),r=V(_(this,P));return n.parent=!0,r.ok=!g(e)||e,r.fail=g(t)&&t,r.domain=c?z.domain:void 0,0==n.state?n.reactions.add(r):S((function(){Y(r,n)})),r.promise})),i=function(){var e=new r,t=k(e);this.promise=e,this.resolve=Z(ee,t),this.reject=Z($,t)},R.f=V=function(e){return e===P||void 0===e?new i(e):B(e)},!a&&g(C)&&L!==Object.prototype)){o=L.then,D||u(L,"then",(function(e,t){var n=this;return new P((function(e,t){d(o,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete L.constructor}catch(e){}h&&h(L,j)}s({global:!0,constructor:!0,wrap:!0,forced:O},{Promise:P}),p(P,A,!1,!0),f(A)},8674:function(e,t,n){n(3401),n(821),n(4164),n(6027),n(683),n(6294)},6027:function(e,t,n){"use strict";var r=n(2109),i=n(6916),o=n(9662),s=n(8523),a=n(2534),c=n(408);r({target:"Promise",stat:!0,forced:n(612)},{race:function(e){var t=this,n=s.f(t),r=n.reject,l=a((function(){var s=o(t.resolve);c(e,(function(e){i(s,t,e).then(n.resolve,r)}))}));return l.error&&r(l.value),n.promise}})},683:function(e,t,n){"use strict";var r=n(2109),i=n(6916),o=n(8523);r({target:"Promise",stat:!0,forced:n(3702).CONSTRUCTOR},{reject:function(e){var t=o.f(this);return i(t.reject,void 0,e),t.promise}})},6294:function(e,t,n){"use strict";var r=n(2109),i=n(5005),o=n(1913),s=n(2492),a=n(3702).CONSTRUCTOR,c=n(9478),l=i("Promise"),d=o&&!a;r({target:"Promise",stat:!0,forced:o||a},{resolve:function(e){return c(d&&this===l?s:this,e)}})},4916:function(e,t,n){"use strict";var r=n(2109),i=n(2261);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},9714:function(e,t,n){"use strict";var r=n(6530).PROPER,i=n(8052),o=n(9670),s=n(1340),a=n(7293),c=n(4706),l="toString",d=RegExp.prototype[l],u=a((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),h=r&&d.name!=l;(u||h)&&i(RegExp.prototype,l,(function(){var e=o(this);return"/"+s(e.source)+"/"+s(c(e))}),{unsafe:!0})},2023:function(e,t,n){"use strict";var r=n(2109),i=n(1702),o=n(3929),s=n(4488),a=n(1340),c=n(4964),l=i("".indexOf);r({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~l(a(s(this)),a(o(e)),arguments.length>1?arguments[1]:void 0)}})},8783:function(e,t,n){"use strict";var r=n(8710).charAt,i=n(1340),o=n(9909),s=n(1656),a=n(6178),c="String Iterator",l=o.set,d=o.getterFor(c);s(String,"String",(function(e){l(this,{type:c,string:i(e),index:0})}),(function(){var e,t=d(this),n=t.string,i=t.index;return i>=n.length?a(void 0,!0):(e=r(n,i),t.index+=e.length,a(e,!1))}))},4032:function(e,t,n){"use strict";var r=n(2109),i=n(7854),o=n(6916),s=n(1702),a=n(1913),c=n(9781),l=n(6293),d=n(7293),u=n(2597),h=n(7976),p=n(9670),f=n(5656),m=n(4948),g=n(1340),y=n(9114),v=n(30),_=n(1956),E=n(8006),S=n(1156),T=n(5181),b=n(1236),I=n(3070),N=n(6048),C=n(5296),w=n(8052),R=n(7045),A=n(2309),O=n(6200),M=n(3501),D=n(9711),k=n(5112),x=n(6061),L=n(6800),P=n(6532),j=n(8003),U=n(9909),F=n(2092).forEach,z=O("hidden"),V="Symbol",B="prototype",G=U.set,H=U.getterFor(V),W=Object[B],Y=i.Symbol,q=Y&&Y[B],K=i.TypeError,Q=i.QObject,J=b.f,X=I.f,Z=S.f,$=C.f,ee=s([].push),te=A("symbols"),ne=A("op-symbols"),re=A("wks"),ie=!Q||!Q[B]||!Q[B].findChild,oe=c&&d((function(){return 7!=v(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=J(W,t);r&&delete W[t],X(e,t,n),r&&e!==W&&X(W,t,r)}:X,se=function(e,t){var n=te[e]=v(q);return G(n,{type:V,tag:e,description:t}),c||(n.description=t),n},ae=function(e,t,n){e===W&&ae(ne,t,n),p(e);var r=m(t);return p(n),u(te,r)?(n.enumerable?(u(e,z)&&e[z][r]&&(e[z][r]=!1),n=v(n,{enumerable:y(0,!1)})):(u(e,z)||X(e,z,y(1,{})),e[z][r]=!0),oe(e,r,n)):X(e,r,n)},ce=function(e,t){p(e);var n=f(t),r=_(n).concat(he(n));return F(r,(function(t){c&&!o(le,n,t)||ae(e,t,n[t])})),e},le=function(e){var t=m(e),n=o($,this,t);return!(this===W&&u(te,t)&&!u(ne,t))&&(!(n||!u(this,t)||!u(te,t)||u(this,z)&&this[z][t])||n)},de=function(e,t){var n=f(e),r=m(t);if(n!==W||!u(te,r)||u(ne,r)){var i=J(n,r);return!i||!u(te,r)||u(n,z)&&n[z][r]||(i.enumerable=!0),i}},ue=function(e){var t=Z(f(e)),n=[];return F(t,(function(e){u(te,e)||u(M,e)||ee(n,e)})),n},he=function(e){var t=e===W,n=Z(t?ne:f(e)),r=[];return F(n,(function(e){!u(te,e)||t&&!u(W,e)||ee(r,te[e])})),r};l||(Y=function(){if(h(q,this))throw K("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?g(arguments[0]):void 0,t=D(e),n=function(e){this===W&&o(n,ne,e),u(this,z)&&u(this[z],t)&&(this[z][t]=!1),oe(this,t,y(1,e))};return c&&ie&&oe(W,t,{configurable:!0,set:n}),se(t,e)},w(q=Y[B],"toString",(function(){return H(this).tag})),w(Y,"withoutSetter",(function(e){return se(D(e),e)})),C.f=le,I.f=ae,N.f=ce,b.f=de,E.f=S.f=ue,T.f=he,x.f=function(e){return se(k(e),e)},c&&(R(q,"description",{configurable:!0,get:function(){return H(this).description}}),a||w(W,"propertyIsEnumerable",le,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!l,sham:!l},{Symbol:Y}),F(_(re),(function(e){L(e)})),r({target:V,stat:!0,forced:!l},{useSetter:function(){ie=!0},useSimple:function(){ie=!1}}),r({target:"Object",stat:!0,forced:!l,sham:!c},{create:function(e,t){return void 0===t?v(e):ce(v(e),t)},defineProperty:ae,defineProperties:ce,getOwnPropertyDescriptor:de}),r({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:ue}),P(),j(Y,V),M[z]=!0},1817:function(e,t,n){"use strict";var r=n(2109),i=n(9781),o=n(7854),s=n(1702),a=n(2597),c=n(614),l=n(7976),d=n(1340),u=n(7045),h=n(9920),p=o.Symbol,f=p&&p.prototype;if(i&&c(p)&&(!("description"in f)||void 0!==p().description)){var m={},g=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:d(arguments[0]),t=l(f,this)?new p(e):void 0===e?p():p(e);return""===e&&(m[t]=!0),t};h(g,p),g.prototype=f,f.constructor=g;var y="Symbol(test)"==String(p("test")),v=s(f.valueOf),_=s(f.toString),E=/^Symbol\((.*)\)[^)]+$/,S=s("".replace),T=s("".slice);u(f,"description",{configurable:!0,get:function(){var e=v(this);if(a(m,e))return"";var t=_(e),n=y?T(t,7,-1):S(t,E,"$1");return""===n?void 0:n}}),r({global:!0,constructor:!0,forced:!0},{Symbol:g})}},763:function(e,t,n){var r=n(2109),i=n(5005),o=n(2597),s=n(1340),a=n(2309),c=n(2015),l=a("string-to-symbol-registry"),d=a("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!c},{for:function(e){var t=s(e);if(o(l,t))return l[t];var n=i("Symbol")(t);return l[t]=n,d[n]=t,n}})},2165:function(e,t,n){n(6800)("iterator")},2526:function(e,t,n){n(4032),n(763),n(6620),n(8862),n(9660)},6620:function(e,t,n){var r=n(2109),i=n(2597),o=n(2190),s=n(6330),a=n(2309),c=n(2015),l=a("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!c},{keyFor:function(e){if(!o(e))throw TypeError(s(e)+" is not a symbol");if(i(l,e))return l[e]}})},2990:function(e,t,n){"use strict";var r=n(1702),i=n(260),o=r(n(1048)),s=i.aTypedArray;(0,i.exportTypedArrayMethod)("copyWithin",(function(e,t){return o(s(this),e,t,arguments.length>2?arguments[2]:void 0)}))},8927:function(e,t,n){"use strict";var r=n(260),i=n(2092).every,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},3105:function(e,t,n){"use strict";var r=n(260),i=n(1285),o=n(4599),s=n(648),a=n(6916),c=n(1702),l=n(7293),d=r.aTypedArray,u=r.exportTypedArrayMethod,h=c("".slice);u("fill",(function(e){var t=arguments.length;d(this);var n="Big"===h(s(this),0,3)?o(e):+e;return a(i,this,n,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),l((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e})))},5035:function(e,t,n){"use strict";var r=n(260),i=n(2092).filter,o=n(3074),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",(function(e){var t=i(s(this),e,arguments.length>1?arguments[1]:void 0);return o(this,t)}))},7174:function(e,t,n){"use strict";var r=n(260),i=n(2092).findIndex,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},4345:function(e,t,n){"use strict";var r=n(260),i=n(2092).find,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},2846:function(e,t,n){"use strict";var r=n(260),i=n(2092).forEach,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e){i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},8145:function(e,t,n){"use strict";var r=n(3832);(0,n(260).exportTypedArrayStaticMethod)("from",n(7321),r)},4731:function(e,t,n){"use strict";var r=n(260),i=n(1318).includes,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},7209:function(e,t,n){"use strict";var r=n(260),i=n(1318).indexOf,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},6319:function(e,t,n){"use strict";var r=n(7854),i=n(7293),o=n(1702),s=n(260),a=n(6992),c=n(5112)("iterator"),l=r.Uint8Array,d=o(a.values),u=o(a.keys),h=o(a.entries),p=s.aTypedArray,f=s.exportTypedArrayMethod,m=l&&l.prototype,g=!i((function(){m[c].call([1])})),y=!!m&&m.values&&m[c]===m.values&&"values"===m.values.name,v=function(){return d(p(this))};f("entries",(function(){return h(p(this))}),g),f("keys",(function(){return u(p(this))}),g),f("values",v,g||!y,{name:"values"}),f(c,v,g||!y,{name:"values"})},8867:function(e,t,n){"use strict";var r=n(260),i=n(1702),o=r.aTypedArray,s=r.exportTypedArrayMethod,a=i([].join);s("join",(function(e){return a(o(this),e)}))},7789:function(e,t,n){"use strict";var r=n(260),i=n(2104),o=n(6583),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){var t=arguments.length;return i(o,s(this),t>1?[e,arguments[1]]:[e])}))},3739:function(e,t,n){"use strict";var r=n(260),i=n(2092).map,o=n(6304),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("map",(function(e){return i(s(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(o(e))(t)}))}))},4483:function(e,t,n){"use strict";var r=n(260),i=n(3671).right,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){var t=arguments.length;return i(o(this),e,t,t>1?arguments[1]:void 0)}))},9368:function(e,t,n){"use strict";var r=n(260),i=n(3671).left,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e){var t=arguments.length;return i(o(this),e,t,t>1?arguments[1]:void 0)}))},2056:function(e,t,n){"use strict";var r=n(260),i=r.aTypedArray,o=r.exportTypedArrayMethod,s=Math.floor;o("reverse",(function(){for(var e,t=this,n=i(t).length,r=s(n/2),o=0;o<r;)e=t[o],t[o++]=t[--n],t[n]=e;return t}))},3462:function(e,t,n){"use strict";var r=n(7854),i=n(6916),o=n(260),s=n(6244),a=n(4590),c=n(7908),l=n(7293),d=r.RangeError,u=r.Int8Array,h=u&&u.prototype,p=h&&h.set,f=o.aTypedArray,m=o.exportTypedArrayMethod,g=!l((function(){var e=new Uint8ClampedArray(2);return i(p,e,{length:1,0:3},1),3!==e[1]})),y=g&&o.NATIVE_ARRAY_BUFFER_VIEWS&&l((function(){var e=new u(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));m("set",(function(e){f(this);var t=a(arguments.length>1?arguments[1]:void 0,1),n=c(e);if(g)return i(p,this,n,t);var r=this.length,o=s(n),l=0;if(o+t>r)throw d("Wrong length");for(;l<o;)this[t+l]=n[l++]}),!g||y)},678:function(e,t,n){"use strict";var r=n(260),i=n(6304),o=n(7293),s=n(206),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("slice",(function(e,t){for(var n=s(a(this),e,t),r=i(this),o=0,c=n.length,l=new r(c);c>o;)l[o]=n[o++];return l}),o((function(){new Int8Array(1).slice()})))},7462:function(e,t,n){"use strict";var r=n(260),i=n(2092).some,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},3824:function(e,t,n){"use strict";var r=n(7854),i=n(1470),o=n(7293),s=n(9662),a=n(4362),c=n(260),l=n(8886),d=n(256),u=n(7392),h=n(8008),p=c.aTypedArray,f=c.exportTypedArrayMethod,m=r.Uint16Array,g=m&&i(m.prototype.sort),y=!(!g||o((function(){g(new m(2),null)}))&&o((function(){g(new m(2),{})}))),v=!!g&&!o((function(){if(u)return u<74;if(l)return l<67;if(d)return!0;if(h)return h<602;var e,t,n=new m(516),r=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(g(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0}));f("sort",(function(e){return void 0!==e&&s(e),v?g(this,e):a(p(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!v||y)},5021:function(e,t,n){"use strict";var r=n(260),i=n(7466),o=n(1400),s=n(6304),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(e,t){var n=a(this),r=n.length,c=o(e,r);return new(s(n))(n.buffer,n.byteOffset+c*n.BYTES_PER_ELEMENT,i((void 0===t?r:o(t,r))-c))}))},2974:function(e,t,n){"use strict";var r=n(7854),i=n(2104),o=n(260),s=n(7293),a=n(206),c=r.Int8Array,l=o.aTypedArray,d=o.exportTypedArrayMethod,u=[].toLocaleString,h=!!c&&s((function(){u.call(new c(1))}));d("toLocaleString",(function(){return i(u,h?a(l(this)):l(this),a(arguments))}),s((function(){return[1,2].toLocaleString()!=new c([1,2]).toLocaleString()}))||!s((function(){c.prototype.toLocaleString.call([1,2])})))},5016:function(e,t,n){"use strict";var r=n(260).exportTypedArrayMethod,i=n(7293),o=n(7854),s=n(1702),a=o.Uint8Array,c=a&&a.prototype||{},l=[].toString,d=s([].join);i((function(){l.call({})}))&&(l=function(){return d(this)});var u=c.toString!=l;r("toString",l,u)},2472:function(e,t,n){n(9843)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},4747:function(e,t,n){var r=n(7854),i=n(8324),o=n(8509),s=n(8533),a=n(8880),c=function(e){if(e&&e.forEach!==s)try{a(e,"forEach",s)}catch(t){e.forEach=s}};for(var l in i)i[l]&&c(r[l]&&r[l].prototype);c(o)},3948:function(e,t,n){var r=n(7854),i=n(8324),o=n(8509),s=n(6992),a=n(8880),c=n(5112),l=c("iterator"),d=c("toStringTag"),u=s.values,h=function(e,t){if(e){if(e[l]!==u)try{a(e,l,u)}catch(t){e[l]=u}if(e[d]||a(e,d,t),i[t])for(var n in s)if(e[n]!==s[n])try{a(e,n,s[n])}catch(t){e[n]=s[n]}}};for(var p in i)h(r[p]&&r[p].prototype,p);h(o,"DOMTokenList")},6815:function(e,t,n){var r=n(2109),i=n(7854),o=n(7152)(i.setInterval,!0);r({global:!0,bind:!0,forced:i.setInterval!==o},{setInterval:o})},8417:function(e,t,n){var r=n(2109),i=n(7854),o=n(7152)(i.setTimeout,!0);r({global:!0,bind:!0,forced:i.setTimeout!==o},{setTimeout:o})},2564:function(e,t,n){n(6815),n(8417)},5556:function(e,t,n){"use strict";n(6992);var r=n(2109),i=n(7854),o=n(6916),s=n(1702),a=n(9781),c=n(5143),l=n(8052),d=n(7045),u=n(9190),h=n(8003),p=n(3061),f=n(9909),m=n(5787),g=n(614),y=n(2597),v=n(9974),_=n(648),E=n(9670),S=n(111),T=n(1340),b=n(30),I=n(9114),N=n(4121),C=n(1246),w=n(8053),R=n(5112),A=n(4362),O=R("iterator"),M="URLSearchParams",D=M+"Iterator",k=f.set,x=f.getterFor(M),L=f.getterFor(D),P=Object.getOwnPropertyDescriptor,j=function(e){if(!a)return i[e];var t=P(i,e);return t&&t.value},U=j("fetch"),F=j("Request"),z=j("Headers"),V=F&&F.prototype,B=z&&z.prototype,G=i.RegExp,H=i.TypeError,W=i.decodeURIComponent,Y=i.encodeURIComponent,q=s("".charAt),K=s([].join),Q=s([].push),J=s("".replace),X=s([].shift),Z=s([].splice),$=s("".split),ee=s("".slice),te=/\+/g,ne=Array(4),re=function(e){return ne[e-1]||(ne[e-1]=G("((?:%[\\da-f]{2}){"+e+"})","gi"))},ie=function(e){try{return W(e)}catch(t){return e}},oe=function(e){var t=J(e,te," "),n=4;try{return W(t)}catch(e){for(;n;)t=J(t,re(n--),ie);return t}},se=/[!'()~]|%20/g,ae={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ce=function(e){return ae[e]},le=function(e){return J(Y(e),se,ce)},de=p((function(e,t){k(this,{type:D,iterator:N(x(e).entries),kind:t})}),"Iterator",(function(){var e=L(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),ue=function(e){this.entries=[],this.url=null,void 0!==e&&(S(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===q(e,0)?ee(e,1):e:T(e)))};ue.prototype={type:M,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,s,a,c,l=C(e);if(l)for(n=(t=N(e,l)).next;!(r=o(n,t)).done;){if(s=(i=N(E(r.value))).next,(a=o(s,i)).done||(c=o(s,i)).done||!o(s,i).done)throw H("Expected sequence with length 2");Q(this.entries,{key:T(a.value),value:T(c.value)})}else for(var d in e)y(e,d)&&Q(this.entries,{key:d,value:T(e[d])})},parseQuery:function(e){if(e)for(var t,n,r=$(e,"&"),i=0;i<r.length;)(t=r[i++]).length&&(n=$(t,"="),Q(this.entries,{key:oe(X(n)),value:oe(K(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],Q(n,le(e.key)+"="+le(e.value));return K(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var he=function(){m(this,pe);var e=k(this,new ue(arguments.length>0?arguments[0]:void 0));a||(this.length=e.entries.length)},pe=he.prototype;if(u(pe,{append:function(e,t){w(arguments.length,2);var n=x(this);Q(n.entries,{key:T(e),value:T(t)}),a||this.length++,n.updateURL()},delete:function(e){w(arguments.length,1);for(var t=x(this),n=t.entries,r=T(e),i=0;i<n.length;)n[i].key===r?Z(n,i,1):i++;a||(this.length=n.length),t.updateURL()},get:function(e){w(arguments.length,1);for(var t=x(this).entries,n=T(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){w(arguments.length,1);for(var t=x(this).entries,n=T(e),r=[],i=0;i<t.length;i++)t[i].key===n&&Q(r,t[i].value);return r},has:function(e){w(arguments.length,1);for(var t=x(this).entries,n=T(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){w(arguments.length,1);for(var n,r=x(this),i=r.entries,o=!1,s=T(e),c=T(t),l=0;l<i.length;l++)(n=i[l]).key===s&&(o?Z(i,l--,1):(o=!0,n.value=c));o||Q(i,{key:s,value:c}),a||(this.length=i.length),r.updateURL()},sort:function(){var e=x(this);A(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=x(this).entries,r=v(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new de(this,"keys")},values:function(){return new de(this,"values")},entries:function(){return new de(this,"entries")}},{enumerable:!0}),l(pe,O,pe.entries,{name:"entries"}),l(pe,"toString",(function(){return x(this).serialize()}),{enumerable:!0}),a&&d(pe,"size",{get:function(){return x(this).entries.length},configurable:!0,enumerable:!0}),h(he,M),r({global:!0,constructor:!0,forced:!c},{URLSearchParams:he}),!c&&g(z)){var fe=s(B.has),me=s(B.set),ge=function(e){if(S(e)){var t,n=e.body;if(_(n)===M)return t=e.headers?new z(e.headers):new z,fe(t,"content-type")||me(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),b(e,{body:I(0,T(n)),headers:I(0,t)})}return e};if(g(U)&&r({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return U(e,arguments.length>1?ge(arguments[1]):{})}}),g(F)){var ye=function(e){return m(this,V),new F(e,arguments.length>1?ge(arguments[1]):{})};V.constructor=ye,ye.prototype=V,r({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:ye})}}e.exports={URLSearchParams:he,getState:x}},1637:function(e,t,n){n(5556)},8789:function(e,t,n){"use strict";n(8783);var r,i=n(2109),o=n(9781),s=n(5143),a=n(7854),c=n(9974),l=n(1702),d=n(8052),u=n(7045),h=n(5787),p=n(2597),f=n(1574),m=n(8457),g=n(1589),y=n(8710).codeAt,v=n(3197),_=n(1340),E=n(8003),S=n(8053),T=n(5556),b=n(9909),I=b.set,N=b.getterFor("URL"),C=T.URLSearchParams,w=T.getState,R=a.URL,A=a.TypeError,O=a.parseInt,M=Math.floor,D=Math.pow,k=l("".charAt),x=l(/./.exec),L=l([].join),P=l(1..toString),j=l([].pop),U=l([].push),F=l("".replace),z=l([].shift),V=l("".split),B=l("".slice),G=l("".toLowerCase),H=l([].unshift),W="Invalid scheme",Y="Invalid host",q="Invalid port",K=/[a-z]/i,Q=/[\d+-.a-z]/i,J=/\d/,X=/^0x/i,Z=/^[0-7]+$/,$=/^\d+$/,ee=/^[\da-f]+$/i,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ne=/[\0\t\n\r #/:<>?@[\\\]^|]/,re=/^[\u0000-\u0020]+/,ie=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,oe=/[\t\n\r]/g,se=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)H(t,e%256),e=M(e/256);return L(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=P(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},ae={},ce=f({},ae,{" ":1,'"':1,"<":1,">":1,"`":1}),le=f({},ce,{"#":1,"?":1,"{":1,"}":1}),de=f({},le,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ue=function(e,t){var n=y(e,0);return n>32&&n<127&&!p(t,e)?e:encodeURIComponent(e)},he={ftp:21,file:null,http:80,https:443,ws:80,wss:443},pe=function(e,t){var n;return 2==e.length&&x(K,k(e,0))&&(":"==(n=k(e,1))||!t&&"|"==n)},fe=function(e){var t;return e.length>1&&pe(B(e,0,2))&&(2==e.length||"/"===(t=k(e,2))||"\\"===t||"?"===t||"#"===t)},me=function(e){return"."===e||"%2e"===G(e)},ge={},ye={},ve={},_e={},Ee={},Se={},Te={},be={},Ie={},Ne={},Ce={},we={},Re={},Ae={},Oe={},Me={},De={},ke={},xe={},Le={},Pe={},je=function(e,t,n){var r,i,o,s=_(e);if(t){if(i=this.parse(s))throw A(i);this.searchParams=null}else{if(void 0!==n&&(r=new je(n,!0)),i=this.parse(s,null,r))throw A(i);(o=w(new C)).bindURL(this),this.searchParams=o}};je.prototype={type:"URL",parse:function(e,t,n){var i,o,s,a,c,l=this,d=t||ge,u=0,h="",f=!1,y=!1,v=!1;for(e=_(e),t||(l.scheme="",l.username="",l.password="",l.host=null,l.port=null,l.path=[],l.query=null,l.fragment=null,l.cannotBeABaseURL=!1,e=F(e,re,""),e=F(e,ie,"$1")),e=F(e,oe,""),i=m(e);u<=i.length;){switch(o=i[u],d){case ge:if(!o||!x(K,o)){if(t)return W;d=ve;continue}h+=G(o),d=ye;break;case ye:if(o&&(x(Q,o)||"+"==o||"-"==o||"."==o))h+=G(o);else{if(":"!=o){if(t)return W;h="",d=ve,u=0;continue}if(t&&(l.isSpecial()!=p(he,h)||"file"==h&&(l.includesCredentials()||null!==l.port)||"file"==l.scheme&&!l.host))return;if(l.scheme=h,t)return void(l.isSpecial()&&he[l.scheme]==l.port&&(l.port=null));h="","file"==l.scheme?d=Ae:l.isSpecial()&&n&&n.scheme==l.scheme?d=_e:l.isSpecial()?d=be:"/"==i[u+1]?(d=Ee,u++):(l.cannotBeABaseURL=!0,U(l.path,""),d=xe)}break;case ve:if(!n||n.cannotBeABaseURL&&"#"!=o)return W;if(n.cannotBeABaseURL&&"#"==o){l.scheme=n.scheme,l.path=g(n.path),l.query=n.query,l.fragment="",l.cannotBeABaseURL=!0,d=Pe;break}d="file"==n.scheme?Ae:Se;continue;case _e:if("/"!=o||"/"!=i[u+1]){d=Se;continue}d=Ie,u++;break;case Ee:if("/"==o){d=Ne;break}d=ke;continue;case Se:if(l.scheme=n.scheme,o==r)l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=g(n.path),l.query=n.query;else if("/"==o||"\\"==o&&l.isSpecial())d=Te;else if("?"==o)l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=g(n.path),l.query="",d=Le;else{if("#"!=o){l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=g(n.path),l.path.length--,d=ke;continue}l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=g(n.path),l.query=n.query,l.fragment="",d=Pe}break;case Te:if(!l.isSpecial()||"/"!=o&&"\\"!=o){if("/"!=o){l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,d=ke;continue}d=Ne}else d=Ie;break;case be:if(d=Ie,"/"!=o||"/"!=k(h,u+1))continue;u++;break;case Ie:if("/"!=o&&"\\"!=o){d=Ne;continue}break;case Ne:if("@"==o){f&&(h="%40"+h),f=!0,s=m(h);for(var E=0;E<s.length;E++){var S=s[E];if(":"!=S||v){var T=ue(S,de);v?l.password+=T:l.username+=T}else v=!0}h=""}else if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&l.isSpecial()){if(f&&""==h)return"Invalid authority";u-=m(h).length+1,h="",d=Ce}else h+=o;break;case Ce:case we:if(t&&"file"==l.scheme){d=Me;continue}if(":"!=o||y){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&l.isSpecial()){if(l.isSpecial()&&""==h)return Y;if(t&&""==h&&(l.includesCredentials()||null!==l.port))return;if(a=l.parseHost(h))return a;if(h="",d=De,t)return;continue}"["==o?y=!0:"]"==o&&(y=!1),h+=o}else{if(""==h)return Y;if(a=l.parseHost(h))return a;if(h="",d=Re,t==we)return}break;case Re:if(!x(J,o)){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&l.isSpecial()||t){if(""!=h){var b=O(h,10);if(b>65535)return q;l.port=l.isSpecial()&&b===he[l.scheme]?null:b,h=""}if(t)return;d=De;continue}return q}h+=o;break;case Ae:if(l.scheme="file","/"==o||"\\"==o)d=Oe;else{if(!n||"file"!=n.scheme){d=ke;continue}if(o==r)l.host=n.host,l.path=g(n.path),l.query=n.query;else if("?"==o)l.host=n.host,l.path=g(n.path),l.query="",d=Le;else{if("#"!=o){fe(L(g(i,u),""))||(l.host=n.host,l.path=g(n.path),l.shortenPath()),d=ke;continue}l.host=n.host,l.path=g(n.path),l.query=n.query,l.fragment="",d=Pe}}break;case Oe:if("/"==o||"\\"==o){d=Me;break}n&&"file"==n.scheme&&!fe(L(g(i,u),""))&&(pe(n.path[0],!0)?U(l.path,n.path[0]):l.host=n.host),d=ke;continue;case Me:if(o==r||"/"==o||"\\"==o||"?"==o||"#"==o){if(!t&&pe(h))d=ke;else if(""==h){if(l.host="",t)return;d=De}else{if(a=l.parseHost(h))return a;if("localhost"==l.host&&(l.host=""),t)return;h="",d=De}continue}h+=o;break;case De:if(l.isSpecial()){if(d=ke,"/"!=o&&"\\"!=o)continue}else if(t||"?"!=o)if(t||"#"!=o){if(o!=r&&(d=ke,"/"!=o))continue}else l.fragment="",d=Pe;else l.query="",d=Le;break;case ke:if(o==r||"/"==o||"\\"==o&&l.isSpecial()||!t&&("?"==o||"#"==o)){if(".."===(c=G(c=h))||"%2e."===c||".%2e"===c||"%2e%2e"===c?(l.shortenPath(),"/"==o||"\\"==o&&l.isSpecial()||U(l.path,"")):me(h)?"/"==o||"\\"==o&&l.isSpecial()||U(l.path,""):("file"==l.scheme&&!l.path.length&&pe(h)&&(l.host&&(l.host=""),h=k(h,0)+":"),U(l.path,h)),h="","file"==l.scheme&&(o==r||"?"==o||"#"==o))for(;l.path.length>1&&""===l.path[0];)z(l.path);"?"==o?(l.query="",d=Le):"#"==o&&(l.fragment="",d=Pe)}else h+=ue(o,le);break;case xe:"?"==o?(l.query="",d=Le):"#"==o?(l.fragment="",d=Pe):o!=r&&(l.path[0]+=ue(o,ae));break;case Le:t||"#"!=o?o!=r&&("'"==o&&l.isSpecial()?l.query+="%27":l.query+="#"==o?"%23":ue(o,ae)):(l.fragment="",d=Pe);break;case Pe:o!=r&&(l.fragment+=ue(o,ce))}u++}},parseHost:function(e){var t,n,r;if("["==k(e,0)){if("]"!=k(e,e.length-1))return Y;if(t=function(e){var t,n,r,i,o,s,a,c=[0,0,0,0,0,0,0,0],l=0,d=null,u=0,h=function(){return k(e,u)};if(":"==h()){if(":"!=k(e,1))return;u+=2,d=++l}for(;h();){if(8==l)return;if(":"!=h()){for(t=n=0;n<4&&x(ee,h());)t=16*t+O(h(),16),u++,n++;if("."==h()){if(0==n)return;if(u-=n,l>6)return;for(r=0;h();){if(i=null,r>0){if(!("."==h()&&r<4))return;u++}if(!x(J,h()))return;for(;x(J,h());){if(o=O(h(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;u++}c[l]=256*c[l]+i,2!=++r&&4!=r||l++}if(4!=r)return;break}if(":"==h()){if(u++,!h())return}else if(h())return;c[l++]=t}else{if(null!==d)return;u++,d=++l}}if(null!==d)for(s=l-d,l=7;0!=l&&s>0;)a=c[l],c[l--]=c[d+s-1],c[d+--s]=a;else if(8!=l)return;return c}(B(e,1,-1)),!t)return Y;this.host=t}else if(this.isSpecial()){if(e=v(e),x(te,e))return Y;if(t=function(e){var t,n,r,i,o,s,a,c=V(e,".");if(c.length&&""==c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=c[r]))return e;if(o=10,i.length>1&&"0"==k(i,0)&&(o=x(X,i)?16:8,i=B(i,8==o?1:2)),""===i)s=0;else{if(!x(10==o?$:8==o?Z:ee,i))return e;s=O(i,o)}U(n,s)}for(r=0;r<t;r++)if(s=n[r],r==t-1){if(s>=D(256,5-t))return null}else if(s>255)return null;for(a=j(n),r=0;r<n.length;r++)a+=n[r]*D(256,3-r);return a}(e),null===t)return Y;this.host=t}else{if(x(ne,e))return Y;for(t="",n=m(e),r=0;r<n.length;r++)t+=ue(n[r],ae);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return p(he,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&pe(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,s=e.path,a=e.query,c=e.fragment,l=t+":";return null!==i?(l+="//",e.includesCredentials()&&(l+=n+(r?":"+r:"")+"@"),l+=se(i),null!==o&&(l+=":"+o)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?s[0]:s.length?"/"+L(s,"/"):"",null!==a&&(l+="?"+a),null!==c&&(l+="#"+c),l},setHref:function(e){var t=this.parse(e);if(t)throw A(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new Ue(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+se(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(_(e)+":",ge)},getUsername:function(){return this.username},setUsername:function(e){var t=m(_(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=ue(t[n],de)}},getPassword:function(){return this.password},setPassword:function(e){var t=m(_(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=ue(t[n],de)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?se(e):se(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Ce)},getHostname:function(){var e=this.host;return null===e?"":se(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,we)},getPort:function(){var e=this.port;return null===e?"":_(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=_(e))?this.port=null:this.parse(e,Re))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+L(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,De))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=_(e))?this.query=null:("?"==k(e,0)&&(e=B(e,1)),this.query="",this.parse(e,Le)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=_(e))?("#"==k(e,0)&&(e=B(e,1)),this.fragment="",this.parse(e,Pe)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Ue=function(e){var t=h(this,Fe),n=S(arguments.length,1)>1?arguments[1]:void 0,r=I(t,new je(e,!1,n));o||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},Fe=Ue.prototype,ze=function(e,t){return{get:function(){return N(this)[e]()},set:t&&function(e){return N(this)[t](e)},configurable:!0,enumerable:!0}};if(o&&(u(Fe,"href",ze("serialize","setHref")),u(Fe,"origin",ze("getOrigin")),u(Fe,"protocol",ze("getProtocol","setProtocol")),u(Fe,"username",ze("getUsername","setUsername")),u(Fe,"password",ze("getPassword","setPassword")),u(Fe,"host",ze("getHost","setHost")),u(Fe,"hostname",ze("getHostname","setHostname")),u(Fe,"port",ze("getPort","setPort")),u(Fe,"pathname",ze("getPathname","setPathname")),u(Fe,"search",ze("getSearch","setSearch")),u(Fe,"searchParams",ze("getSearchParams")),u(Fe,"hash",ze("getHash","setHash"))),d(Fe,"toJSON",(function(){return N(this).serialize()}),{enumerable:!0}),d(Fe,"toString",(function(){return N(this).serialize()}),{enumerable:!0}),R){var Ve=R.createObjectURL,Be=R.revokeObjectURL;Ve&&d(Ue,"createObjectURL",c(Ve,R)),Be&&d(Ue,"revokeObjectURL",c(Be,R))}E(Ue,"URL"),i({global:!0,constructor:!0,forced:!s,sham:!o},{URL:Ue})},285:function(e,t,n){n(8789)},5717:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},3720:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},o={};function s(e,t){var n,r,s;return t?(s=0<=(e>>>=0)&&e<256)&&(r=o[e])?r:(n=c(e,(0|e)<0?-1:0,!0),s&&(o[e]=n),n):(s=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=c(e,e<0?-1:0,!1),s&&(i[e]=n),n)}function a(e,t){if(isNaN(e))return t?y:g;if(t){if(e<0)return y;if(e>=p)return T}else{if(e<=-f)return b;if(e+1>=f)return S}return e<0?a(-e,t).neg():c(e%h|0,e/h|0,t)}function c(e,t,r){return new n(e,t,r)}n.fromInt=s,n.fromNumber=a,n.fromBits=c;var l=Math.pow;function d(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return d(e.substring(1),t,n).neg();for(var i=a(l(n,8)),o=g,s=0;s<e.length;s+=8){var c=Math.min(8,e.length-s),u=parseInt(e.substring(s,s+c),n);if(c<8){var h=a(l(n,c));o=o.mul(h).add(a(u))}else o=(o=o.mul(i)).add(a(u))}return o.unsigned=t,o}function u(e,t){return"number"==typeof e?a(e,t):"string"==typeof e?d(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=d,n.fromValue=u;var h=4294967296,p=h*h,f=p/2,m=s(1<<24),g=s(0);n.ZERO=g;var y=s(0,!0);n.UZERO=y;var v=s(1);n.ONE=v;var _=s(1,!0);n.UONE=_;var E=s(-1);n.NEG_ONE=E;var S=c(-1,2147483647,!1);n.MAX_VALUE=S;var T=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=T;var b=c(0,-2147483648,!1);n.MIN_VALUE=b;var I=n.prototype;I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},I.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(b)){var t=a(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=a(l(e,6),this.unsigned),o=this,s="";;){var c=o.div(i),d=(o.sub(c.mul(i)).toInt()>>>0).toString(e);if((o=c).isZero())return d+s;for(;d.length<6;)d="0"+d;s=""+d+s}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(b)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},I.isZero=function(){return 0===this.high&&0===this.low},I.eqz=I.isZero,I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return 1==(1&this.low)},I.isEven=function(){return 0==(1&this.low)},I.equals=function(e){return r(e)||(e=u(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},I.eq=I.equals,I.notEquals=function(e){return!this.eq(e)},I.neq=I.notEquals,I.ne=I.notEquals,I.lessThan=function(e){return this.comp(e)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(e){return this.comp(e)<=0},I.lte=I.lessThanOrEqual,I.le=I.lessThanOrEqual,I.greaterThan=function(e){return this.comp(e)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(e){return this.comp(e)>=0},I.gte=I.greaterThanOrEqual,I.ge=I.greaterThanOrEqual,I.compare=function(e){if(r(e)||(e=u(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(b)?b:this.not().add(v)},I.neg=I.negate,I.add=function(e){r(e)||(e=u(e));var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,l=e.low>>>16,d=0,h=0,p=0,f=0;return p+=(f+=o+(65535&e.low))>>>16,h+=(p+=i+l)>>>16,d+=(h+=n+a)>>>16,d+=t+s,c((p&=65535)<<16|(f&=65535),(d&=65535)<<16|(h&=65535),this.unsigned)},I.subtract=function(e){return r(e)||(e=u(e)),this.add(e.neg())},I.sub=I.subtract,I.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=u(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(b))return e.isOdd()?b:g;if(e.eq(b))return this.isOdd()?b:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return a(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,s=65535&this.low,l=e.high>>>16,d=65535&e.high,h=e.low>>>16,p=65535&e.low,f=0,y=0,v=0,_=0;return v+=(_+=s*p)>>>16,y+=(v+=o*p)>>>16,v&=65535,y+=(v+=s*h)>>>16,f+=(y+=i*p)>>>16,y&=65535,f+=(y+=o*h)>>>16,y&=65535,f+=(y+=s*d)>>>16,f+=n*p+i*h+o*d+s*l,c((v&=65535)<<16|(_&=65535),(f&=65535)<<16|(y&=65535),this.unsigned)},I.mul=I.multiply,I.divide=function(e){if(r(e)||(e=u(e)),e.isZero())throw Error("division by zero");var n,i,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return _;o=y}else{if(this.eq(b))return e.eq(v)||e.eq(E)?b:e.eq(b)?v:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?v:E:(i=this.sub(e.mul(n)),o=n.add(i.div(e)));if(e.eq(b))return this.unsigned?y:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=g}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),d=s<=48?1:l(2,s-48),h=a(n),p=h.mul(e);p.isNegative()||p.gt(i);)p=(h=a(n-=d,this.unsigned)).mul(e);h.isZero()&&(h=v),o=o.add(h),i=i.sub(p)}return o},I.div=I.divide,I.modulo=function(e){return r(e)||(e=u(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},I.mod=I.modulo,I.rem=I.modulo,I.not=function(){return c(~this.low,~this.high,this.unsigned)},I.and=function(e){return r(e)||(e=u(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},I.or=function(e){return r(e)||(e=u(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},I.xor=function(e){return r(e)||(e=u(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},I.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.shr_u=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},I.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},I.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},3281:function(e,t,n){"use strict";e.exports=n(9050)},2967:function(e){"use strict";e.exports=r;var t,n=/\/|\./;function r(e,t){n.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),r[e]=t}r("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),r("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),r("timestamp",{Timestamp:t}),r("empty",{Empty:{fields:{}}}),r("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),r("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),r("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),r.get=function(e){return r[e]||null}},3996:function(e,t,n){"use strict";var r=t,i=n(7025),o=n(9935);function s(e,t,n,r){if(t.resolvedType)if(t.resolvedType instanceof i){e("switch(d%s){",r);for(var o=t.resolvedType.values,s=Object.keys(o),a=0;a<s.length;++a)t.repeated&&o[s[a]]===t.typeDefault&&e("default:"),e("case%j:",s[a])("case %i:",o[s[a]])("m%s=%j",r,o[s[a]])("break");e("}")}else e('if(typeof d%s!=="object")',r)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,n,r);else{var c=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",r,r);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,c)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length)",r)("m%s=d%s",r,r);break;case"string":e("m%s=String(d%s)",r,r);break;case"bool":e("m%s=Boolean(d%s)",r,r)}}return e}function a(e,t,n,r){if(t.resolvedType)t.resolvedType instanceof i?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",r,n,r,r):e("d%s=types[%i].toObject(m%s,o)",r,n,r);else{var o=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,o?"true":"",r);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:e("d%s=m%s",r,r)}}return e}r.fromObject=function(e){var t=e.fieldsArray,n=o.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return n("return new this.ctor");n("var m=new this.ctor");for(var r=0;r<t.length;++r){var a=t[r].resolve(),c=o.safeProp(a.name);a.map?(n("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),s(n,a,r,c+"[ks[i]]")("}")("}")):a.repeated?(n("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),s(n,a,r,c+"[i]")("}")("}")):(a.resolvedType instanceof i||n("if(d%s!=null){",c),s(n,a,r,c),a.resolvedType instanceof i||n("}"))}return n("return m")},r.toObject=function(e){var t=e.fieldsArray.slice().sort(o.compareFieldsById);if(!t.length)return o.codegen()("return {}");for(var n=o.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],s=[],c=[],l=0;l<t.length;++l)t[l].partOf||(t[l].resolve().repeated?r:t[l].map?s:c).push(t[l]);if(r.length){for(n("if(o.arrays||o.defaults){"),l=0;l<r.length;++l)n("d%s=[]",o.safeProp(r[l].name));n("}")}if(s.length){for(n("if(o.objects||o.defaults){"),l=0;l<s.length;++l)n("d%s={}",o.safeProp(s[l].name));n("}")}if(c.length){for(n("if(o.defaults){"),l=0;l<c.length;++l){var d=c[l],u=o.safeProp(d.name);if(d.resolvedType instanceof i)n("d%s=o.enums===String?%j:%j",u,d.resolvedType.valuesById[d.typeDefault],d.typeDefault);else if(d.long)n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",d.typeDefault.low,d.typeDefault.high,d.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",u)("}else")("d%s=o.longs===String?%j:%i",u,d.typeDefault.toString(),d.typeDefault.toNumber());else if(d.bytes){var h="["+Array.prototype.slice.call(d.typeDefault).join(",")+"]";n("if(o.bytes===String)d%s=%j",u,String.fromCharCode.apply(String,d.typeDefault))("else{")("d%s=%s",u,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",u,u)("}")}else n("d%s=%j",u,d.typeDefault)}n("}")}var p=!1;for(l=0;l<t.length;++l){d=t[l];var f=e._fieldsArray.indexOf(d);u=o.safeProp(d.name),d.map?(p||(p=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",u,u)("d%s={}",u)("for(var j=0;j<ks2.length;++j){"),a(n,d,f,u+"[ks2[j]]")("}")):d.repeated?(n("if(m%s&&m%s.length){",u,u)("d%s=[]",u)("for(var j=0;j<m%s.length;++j){",u),a(n,d,f,u+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",u,d.name),a(n,d,f,u),d.partOf&&n("if(o.oneofs)")("d%s=%j",o.safeProp(d.partOf.name),d.name)),n("}")}return n("return d")}},5305:function(e,t,n){"use strict";e.exports=function(e){var t=o.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var n=0;n<e.fieldsArray.length;++n){var a=e._fieldsArray[n].resolve(),c=a.resolvedType instanceof r?"int32":a.type,l="m"+o.safeProp(a.name);t("case %i:",a.id),a.map?(t("if(%s===util.emptyObject)",l)("%s={}",l)("var c2 = r.uint32()+r.pos"),void 0!==i.defaults[a.keyType]?t("k=%j",i.defaults[a.keyType]):t("k=null"),void 0!==i.defaults[c]?t("value=%j",i.defaults[c]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===i.basic[c]?t("value=types[%i].decode(r,r.uint32())",n):t("value=r.%s()",c),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==i.long[a.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',l):t("%s[k]=value",l)):a.repeated?(t("if(!(%s&&%s.length))",l,l)("%s=[]",l),void 0!==i.packed[c]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",l,c)("}else"),void 0===i.basic[c]?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",l,n):t("%s.push(r.%s())",l,c)):void 0===i.basic[c]?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",l,n):t("%s=r.%s()",l,c),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),n=0;n<e._fieldsArray.length;++n){var d=e._fieldsArray[n];d.required&&t("if(!m.hasOwnProperty(%j))",d.name)("throw util.ProtocolError(%j,{instance:m})",s(d))}return t("return m")};var r=n(7025),i=n(7063),o=n(9935);function s(e){return"missing required '"+e.name+"'"}},4928:function(e,t,n){"use strict";e.exports=function(e){for(var t,n=o.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(o.compareFieldsById),c=0;c<a.length;++c){var l=a[c].resolve(),d=e._fieldsArray.indexOf(l),u=l.resolvedType instanceof r?"int32":l.type,h=i.basic[u];t="m"+o.safeProp(l.name),l.map?(n("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,l.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(l.id<<3|2)>>>0,8|i.mapKey[l.keyType],l.keyType),void 0===h?n("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",d,t):n(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,u,t),n("}")("}")):l.repeated?(n("if(%s!=null&&%s.length){",t,t),l.packed&&void 0!==i.packed[u]?n("w.uint32(%i).fork()",(l.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",u,t)("w.ldelim()"):(n("for(var i=0;i<%s.length;++i)",t),void 0===h?s(n,l,d,t+"[i]"):n("w.uint32(%i).%s(%s[i])",(l.id<<3|h)>>>0,u,t)),n("}")):(l.optional&&n("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,l.name),void 0===h?s(n,l,d,t):n("w.uint32(%i).%s(%s)",(l.id<<3|h)>>>0,u,t))}return n("return w")};var r=n(7025),i=n(7063),o=n(9935);function s(e,t,n,r){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,r,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,r,(t.id<<3|2)>>>0)}},7025:function(e,t,n){"use strict";e.exports=s;var r=n(3243);((s.prototype=Object.create(r.prototype)).constructor=s).className="Enum";var i=n(9313),o=n(9935);function s(e,t,n,i,o){if(r.call(this,e,n),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=o||{},this.reserved=void 0,t)for(var s=Object.keys(t),a=0;a<s.length;++a)"number"==typeof t[s[a]]&&(this.valuesById[this.values[s[a]]=t[s[a]]]=s[a])}s.fromJSON=function(e,t){var n=new s(e,t.values,t.options,t.comment,t.comments);return n.reserved=t.reserved,n},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},s.prototype.add=function(e,t,n){if(!o.isString(e))throw TypeError("name must be a string");if(!o.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=n||null,this},s.prototype.remove=function(e){if(!o.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},s.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},s.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)}},3548:function(e,t,n){"use strict";e.exports=l;var r=n(3243);((l.prototype=Object.create(r.prototype)).constructor=l).className="Field";var i,o=n(7025),s=n(7063),a=n(9935),c=/^required|optional|repeated$/;function l(e,t,n,i,o,l,d){if(a.isObject(i)?(d=o,l=i,i=o=void 0):a.isObject(o)&&(d=l,l=o,o=void 0),r.call(this,e,l),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(n))throw TypeError("type must be a string");if(void 0!==i&&!c.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==o&&!a.isString(o))throw TypeError("extend must be a string");"proto3_optional"===i&&(i="optional"),this.rule=i&&"optional"!==i?i:void 0,this.type=n,this.id=t,this.extend=o||void 0,this.required="required"===i,this.optional=!this.required,this.repeated="repeated"===i,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==s.long[n],this.bytes="bytes"===n,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=d}l.fromJSON=function(e,t){return new l(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(l.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),l.prototype.setOption=function(e,t,n){return"packed"===e&&(this._packed=null),r.prototype.setOption.call(this,e,t,n)},l.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},l.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=s.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof i?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof o&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof o)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof i&&(this.parent.ctor.prototype[this.name]=this.defaultValue),r.prototype.resolve.call(this)},l.d=function(e,t,n,r){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==typeof t&&(t=a.decorateEnum(t).name),function(i,o){a.decorateType(i.constructor).add(new l(o,e,t,n,{default:r}))}},l._configure=function(e){i=e}},8836:function(e,t,n){"use strict";var r=e.exports=n(9482);r.build="light",r.load=function(e,t,n){return"function"==typeof t?(n=t,t=new r.Root):t||(t=new r.Root),t.load(e,n)},r.loadSync=function(e,t){return t||(t=new r.Root),t.loadSync(e)},r.encoder=n(4928),r.decoder=n(5305),r.verifier=n(4497),r.converter=n(3996),r.ReflectionObject=n(3243),r.Namespace=n(9313),r.Root=n(9424),r.Enum=n(7025),r.Type=n(7645),r.Field=n(3548),r.OneOf=n(7598),r.MapField=n(6039),r.Service=n(7513),r.Method=n(4429),r.Message=n(8368),r.wrappers=n(1667),r.types=n(7063),r.util=n(9935),r.ReflectionObject._configure(r.Root),r.Namespace._configure(r.Type,r.Service,r.Enum),r.Root._configure(r.Type),r.Field._configure(r.Type)},9482:function(e,t,n){"use strict";var r=t;function i(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(1173),r.BufferWriter=n(3155),r.Reader=n(1408),r.BufferReader=n(593),r.util=n(9693),r.rpc=n(5994),r.roots=n(5054),r.configure=i,i()},9050:function(e,t,n){"use strict";var r=e.exports=n(8836);r.build="full",r.tokenize=n(626),r.parse=n(2228),r.common=n(2967),r.Root._configure(r.Type,r.parse,r.common)},6039:function(e,t,n){"use strict";e.exports=s;var r=n(3548);((s.prototype=Object.create(r.prototype)).constructor=s).className="MapField";var i=n(7063),o=n(9935);function s(e,t,n,i,s,a){if(r.call(this,e,t,i,void 0,void 0,s,a),!o.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0}s.fromJSON=function(e,t){return new s(e,t.id,t.keyType,t.type,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},s.prototype.resolve=function(){if(this.resolved)return this;if(void 0===i.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return r.prototype.resolve.call(this)},s.d=function(e,t,n){return"function"==typeof n?n=o.decorateType(n).name:n&&"object"==typeof n&&(n=o.decorateEnum(n).name),function(r,i){o.decorateType(r.constructor).add(new s(i,e,t,n))}}},8368:function(e,t,n){"use strict";e.exports=i;var r=n(9693);function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)this[t[n]]=e[t[n]]}i.create=function(e){return this.$type.create(e)},i.encode=function(e,t){return this.$type.encode(e,t)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions)}},4429:function(e,t,n){"use strict";e.exports=o;var r=n(3243);((o.prototype=Object.create(r.prototype)).constructor=o).className="Method";var i=n(9935);function o(e,t,n,o,s,a,c,l,d){if(i.isObject(s)?(c=s,s=a=void 0):i.isObject(a)&&(c=a,a=void 0),void 0!==t&&!i.isString(t))throw TypeError("type must be a string");if(!i.isString(n))throw TypeError("requestType must be a string");if(!i.isString(o))throw TypeError("responseType must be a string");r.call(this,e,c),this.type=t||"rpc",this.requestType=n,this.requestStream=!!s||void 0,this.responseType=o,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=l,this.parsedOptions=d}o.fromJSON=function(e,t){return new o(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},o.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),r.prototype.resolve.call(this))}},9313:function(e,t,n){"use strict";e.exports=u;var r=n(3243);((u.prototype=Object.create(r.prototype)).constructor=u).className="Namespace";var i,o,s,a=n(3548),c=n(7598),l=n(9935);function d(e,t){if(e&&e.length){for(var n={},r=0;r<e.length;++r)n[e[r].name]=e[r].toJSON(t);return n}}function u(e,t){r.call(this,e,t),this.nested=void 0,this._nestedArray=null}function h(e){return e._nestedArray=null,e}u.fromJSON=function(e,t){return new u(e,t.options).addJSON(t.nested)},u.arrayToJSON=d,u.isReservedId=function(e,t){if(e)for(var n=0;n<e.length;++n)if("string"!=typeof e[n]&&e[n][0]<=t&&e[n][1]>t)return!0;return!1},u.isReservedName=function(e,t){if(e)for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1},Object.defineProperty(u.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=l.toArray(this.nested))}}),u.prototype.toJSON=function(e){return l.toObject(["options",this.options,"nested",d(this.nestedArray,e)])},u.prototype.addJSON=function(e){if(e)for(var t,n=Object.keys(e),r=0;r<n.length;++r)t=e[n[r]],this.add((void 0!==t.fields?i.fromJSON:void 0!==t.values?s.fromJSON:void 0!==t.methods?o.fromJSON:void 0!==t.id?a.fromJSON:u.fromJSON)(n[r],t));return this},u.prototype.get=function(e){return this.nested&&this.nested[e]||null},u.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof s)return this.nested[e].values;throw Error("no such enum: "+e)},u.prototype.add=function(e){if(!(e instanceof a&&void 0!==e.extend||e instanceof i||e instanceof s||e instanceof o||e instanceof u||e instanceof c))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof u&&e instanceof u)||t instanceof i||t instanceof o)throw Error("duplicate name '"+e.name+"' in "+this);for(var n=t.nestedArray,r=0;r<n.length;++r)e.add(n[r]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),h(this)},u.prototype.remove=function(e){if(!(e instanceof r))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),h(this)},u.prototype.define=function(e,t){if(l.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var n=this;e.length>0;){var r=e.shift();if(n.nested&&n.nested[r]){if(!((n=n.nested[r])instanceof u))throw Error("path conflicts with non-namespace objects")}else n.add(n=new u(r))}return t&&n.addJSON(t),n},u.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof u?e[t++].resolveAll():e[t++].resolve();return this.resolve()},u.prototype.lookup=function(e,t,n){if("boolean"==typeof t?(n=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),l.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var r=this.get(e[0]);if(r){if(1===e.length){if(!t||t.indexOf(r.constructor)>-1)return r}else if(r instanceof u&&(r=r.lookup(e.slice(1),t,!0)))return r}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof u&&(r=this._nestedArray[i].lookup(e,t,!0)))return r;return null===this.parent||n?null:this.parent.lookup(e,t)},u.prototype.lookupType=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such type: "+e);return t},u.prototype.lookupEnum=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},u.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[i,s]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},u.prototype.lookupService=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},u._configure=function(e,t,n){i=e,o=t,s=n}},3243:function(e,t,n){"use strict";e.exports=o,o.className="ReflectionObject";var r,i=n(9935);function o(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(o.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),o.prototype.toJSON=function(){throw Error()},o.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof r&&t._handleAdd(this)},o.prototype.onRemove=function(e){var t=e.root;t instanceof r&&t._handleRemove(this),this.parent=null,this.resolved=!1},o.prototype.resolve=function(){return this.resolved||this.root instanceof r&&(this.resolved=!0),this},o.prototype.getOption=function(e){if(this.options)return this.options[e]},o.prototype.setOption=function(e,t,n){return n&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},o.prototype.setParsedOption=function(e,t,n){this.parsedOptions||(this.parsedOptions=[]);var r=this.parsedOptions;if(n){var o=r.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(o){var s=o[e];i.setProperty(s,n,t)}else(o={})[e]=i.setProperty({},n,t),r.push(o)}else{var a={};a[e]=t,r.push(a)}return this},o.prototype.setOptions=function(e,t){if(e)for(var n=Object.keys(e),r=0;r<n.length;++r)this.setOption(n[r],e[n[r]],t);return this},o.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},o._configure=function(e){r=e}},7598:function(e,t,n){"use strict";e.exports=s;var r=n(3243);((s.prototype=Object.create(r.prototype)).constructor=s).className="OneOf";var i=n(3548),o=n(9935);function s(e,t,n,i){if(Array.isArray(t)||(n=t,t=void 0),r.call(this,e,n),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}s.fromJSON=function(e,t){return new s(e,t.oneof,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},s.prototype.add=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},s.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},s.prototype.onAdd=function(e){r.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var n=e.get(this.oneof[t]);n&&!n.partOf&&(n.partOf=this,this.fieldsArray.push(n))}a(this)},s.prototype.onRemove=function(e){for(var t,n=0;n<this.fieldsArray.length;++n)(t=this.fieldsArray[n]).parent&&t.parent.remove(t);r.prototype.onRemove.call(this,e)},s.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,n){o.decorateType(t.constructor).add(new s(n,e)),Object.defineProperty(t,n,{get:o.oneOfGetter(e),set:o.oneOfSetter(e)})}}},2228:function(e,t,n){"use strict";e.exports=I,I.filename=null,I.defaults={keepCase:!1};var r=n(626),i=n(9424),o=n(7645),s=n(3548),a=n(6039),c=n(7598),l=n(7025),d=n(7513),u=n(4429),h=n(7063),p=n(9935),f=/^[1-9][0-9]*$/,m=/^-?[1-9][0-9]*$/,g=/^0[x][0-9a-fA-F]+$/,y=/^-?0[x][0-9a-fA-F]+$/,v=/^0[0-7]+$/,_=/^-?0[0-7]+$/,E=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,S=/^[a-zA-Z_][a-zA-Z_0-9]*$/,T=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,b=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function I(e,t,n){t instanceof i||(n=t,t=new i),n||(n=I.defaults);var N,C,w,R,A,O=n.preferTrailingComment||!1,M=r(e,n.alternateCommentMode||!1),D=M.next,k=M.push,x=M.peek,L=M.skip,P=M.cmnt,j=!0,U=!1,F=t,z=n.keepCase?function(e){return e}:p.camelCase;function V(e,t,n){var r=I.filename;return n||(I.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(r?r+", ":"")+"line "+M.line+")")}function B(){var e,t=[];do{if('"'!==(e=D())&&"'"!==e)throw V(e);t.push(D()),L(e),e=x()}while('"'===e||"'"===e);return t.join("")}function G(e){var t=D();switch(t){case"'":case'"':return k(t),B();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(e,t){var n=1;switch("-"===e.charAt(0)&&(n=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return n*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(f.test(e))return n*parseInt(e,10);if(g.test(e))return n*parseInt(e,16);if(v.test(e))return n*parseInt(e,8);if(E.test(e))return n*parseFloat(e);throw V(e,"number",!0)}(t)}catch(n){if(e&&T.test(t))return t;throw V(t,"value")}}function H(e,t){var n,r;do{!t||'"'!==(n=x())&&"'"!==n?e.push([r=W(D()),L("to",!0)?W(D()):r]):e.push(B())}while(L(",",!0));L(";")}function W(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw V(e,"id");if(m.test(e))return parseInt(e,10);if(y.test(e))return parseInt(e,16);if(_.test(e))return parseInt(e,8);throw V(e,"id")}function Y(){if(void 0!==N)throw V("package");if(N=D(),!T.test(N))throw V(N,"name");F=F.define(N),L(";")}function q(){var e,t=x();switch(t){case"weak":e=w||(w=[]),D();break;case"public":D();default:e=C||(C=[])}t=B(),L(";"),e.push(t)}function K(){if(L("="),R=B(),!(U="proto3"===R)&&"proto2"!==R)throw V(R,"syntax");L(";")}function Q(e,t){switch(t){case"option":return Z(e,t),L(";"),!0;case"message":return function(e,t){if(!S.test(t=D()))throw V(t,"type name");var n=new o(t);J(n,(function(e){if(!Q(n,e))switch(e){case"map":!function(e){L("<");var t=D();if(void 0===h.mapKey[t])throw V(t,"type");L(",");var n=D();if(!T.test(n))throw V(n,"type");L(">");var r=D();if(!S.test(r))throw V(r,"name");L("=");var i=new a(z(r),W(D()),t,n);J(i,(function(e){if("option"!==e)throw V(e);Z(i,e),L(";")}),(function(){te(i)})),e.add(i)}(n);break;case"required":case"repeated":X(n,e);break;case"optional":X(n,U?"proto3_optional":"optional");break;case"oneof":!function(e,t){if(!S.test(t=D()))throw V(t,"name");var n=new c(z(t));J(n,(function(e){"option"===e?(Z(n,e),L(";")):(k(e),X(n,"optional"))})),e.add(n)}(n,e);break;case"extensions":H(n.extensions||(n.extensions=[]));break;case"reserved":H(n.reserved||(n.reserved=[]),!0);break;default:if(!U||!T.test(e))throw V(e);k(e),X(n,"optional")}})),e.add(n)}(e,t),!0;case"enum":return function(e,t){if(!S.test(t=D()))throw V(t,"name");var n=new l(t);J(n,(function(e){switch(e){case"option":Z(n,e),L(";");break;case"reserved":H(n.reserved||(n.reserved=[]),!0);break;default:!function(e,t){if(!S.test(t))throw V(t,"name");L("=");var n=W(D(),!0),r={};J(r,(function(e){if("option"!==e)throw V(e);Z(r,e),L(";")}),(function(){te(r)})),e.add(t,n,r.comment)}(n,e)}})),e.add(n)}(e,t),!0;case"service":return function(e,t){if(!S.test(t=D()))throw V(t,"service name");var n=new d(t);J(n,(function(e){if(!Q(n,e)){if("rpc"!==e)throw V(e);!function(e,t){var n=P(),r=t;if(!S.test(t=D()))throw V(t,"name");var i,o,s,a,c=t;if(L("("),L("stream",!0)&&(o=!0),!T.test(t=D()))throw V(t);if(i=t,L(")"),L("returns"),L("("),L("stream",!0)&&(a=!0),!T.test(t=D()))throw V(t);s=t,L(")");var l=new u(c,r,i,s,o,a);l.comment=n,J(l,(function(e){if("option"!==e)throw V(e);Z(l,e),L(";")})),e.add(l)}(n,e)}})),e.add(n)}(e,t),!0;case"extend":return function(e,t){if(!T.test(t=D()))throw V(t,"reference");var n=t;J(null,(function(t){switch(t){case"required":case"repeated":X(e,t,n);break;case"optional":X(e,U?"proto3_optional":"optional",n);break;default:if(!U||!T.test(t))throw V(t);k(t),X(e,"optional",n)}}))}(e,t),!0}return!1}function J(e,t,n){var r=M.line;if(e&&("string"!=typeof e.comment&&(e.comment=P()),e.filename=I.filename),L("{",!0)){for(var i;"}"!==(i=D());)t(i);L(";",!0)}else n&&n(),L(";"),e&&("string"!=typeof e.comment||O)&&(e.comment=P(r)||e.comment)}function X(e,t,n){var r=D();if("group"!==r){if(!T.test(r))throw V(r,"type");var i=D();if(!S.test(i))throw V(i,"name");i=z(i),L("=");var a=new s(i,W(D()),r,t,n);if(J(a,(function(e){if("option"!==e)throw V(e);Z(a,e),L(";")}),(function(){te(a)})),"proto3_optional"===t){var l=new c("_"+i);a.setOption("proto3_optional",!0),l.add(a),e.add(l)}else e.add(a);U||!a.repeated||void 0===h.packed[r]&&void 0!==h.basic[r]||a.setOption("packed",!1,!0)}else!function(e,t){var n=D();if(!S.test(n))throw V(n,"name");var r=p.lcFirst(n);n===r&&(n=p.ucFirst(n)),L("=");var i=W(D()),a=new o(n);a.group=!0;var c=new s(r,i,n,t);c.filename=I.filename,J(a,(function(e){switch(e){case"option":Z(a,e),L(";");break;case"required":case"repeated":X(a,e);break;case"optional":X(a,U?"proto3_optional":"optional");break;default:throw V(e)}})),e.add(a).add(c)}(e,t)}function Z(e,t){var n=L("(",!0);if(!T.test(t=D()))throw V(t,"name");var r,i=t,o=i;n&&(L(")"),o=i="("+i+")",t=x(),b.test(t)&&(r=t.substr(1),i+=t,D())),L("="),function(e,t,n,r){e.setParsedOption&&e.setParsedOption(t,n,r)}(e,o,$(e,i),r)}function $(e,t){if(L("{",!0)){for(var n={};!L("}",!0);){if(!S.test(A=D()))throw V(A,"name");var r,i=A;"{"===x()?r=$(e,t+"."+A):(L(":"),"{"===x()?r=$(e,t+"."+A):(r=G(!0),ee(e,t+"."+A,r)));var o=n[i];o&&(r=[].concat(o).concat(r)),n[i]=r,L(",",!0)}return n}var s=G(!0);return ee(e,t,s),s}function ee(e,t,n){e.setOption&&e.setOption(t,n)}function te(e){if(L("[",!0)){do{Z(e,"option")}while(L(",",!0));L("]")}return e}for(;null!==(A=D());)switch(A){case"package":if(!j)throw V(A);Y();break;case"import":if(!j)throw V(A);q();break;case"syntax":if(!j)throw V(A);K();break;case"option":Z(F,A),L(";");break;default:if(Q(F,A)){j=!1;continue}throw V(A)}return I.filename=null,{package:N,imports:C,weakImports:w,syntax:R,root:t}}},1408:function(e,t,n){"use strict";e.exports=c;var r,i=n(9693),o=i.LongBits,s=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l,d="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},u=function(){return i.Buffer?function(e){return(c.create=function(e){return i.Buffer.isBuffer(e)?new r(e):d(e)})(e)}:d};function h(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new o(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=u(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return l}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e,c.create=u(),r._configure();var t=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},593:function(e,t,n){"use strict";e.exports=o;var r=n(1408);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(9693);function o(e){r.call(this,e)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},9424:function(e,t,n){"use strict";e.exports=u;var r=n(9313);((u.prototype=Object.create(r.prototype)).constructor=u).className="Root";var i,o,s,a=n(3548),c=n(7025),l=n(7598),d=n(9935);function u(e){r.call(this,"",e),this.deferred=[],this.files=[]}function h(){}u.fromJSON=function(e,t){return t||(t=new u),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},u.prototype.resolvePath=d.path.resolve,u.prototype.fetch=d.fetch,u.prototype.load=function e(t,n,r){"function"==typeof n&&(r=n,n=void 0);var i=this;if(!r)return d.asPromise(e,i,t,n);var a=r===h;function c(e,t){if(r){var n=r;if(r=null,a)throw e;n(e,t)}}function l(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var n=e.substring(t);if(n in s)return n}return null}function u(e,t){try{if(d.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),d.isString(t)){o.filename=e;var r,s=o(t,i,n),u=0;if(s.imports)for(;u<s.imports.length;++u)(r=l(s.imports[u])||i.resolvePath(e,s.imports[u]))&&p(r);if(s.weakImports)for(u=0;u<s.weakImports.length;++u)(r=l(s.weakImports[u])||i.resolvePath(e,s.weakImports[u]))&&p(r,!0)}else i.setOptions(t.options).addJSON(t.nested)}catch(e){c(e)}a||f||c(null,i)}function p(e,t){if(!(i.files.indexOf(e)>-1))if(i.files.push(e),e in s)a?u(e,s[e]):(++f,setTimeout((function(){--f,u(e,s[e])})));else if(a){var n;try{n=d.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||c(e))}u(e,n)}else++f,i.fetch(e,(function(n,o){--f,r&&(n?t?f||c(null,i):c(n):u(e,o))}))}var f=0;d.isString(t)&&(t=[t]);for(var m,g=0;g<t.length;++g)(m=i.resolvePath("",t[g]))&&p(m);if(a)return i;f||c(null,i)},u.prototype.loadSync=function(e,t){if(!d.isNode)throw Error("not supported");return this.load(e,t,h)},u.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return r.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function f(e,t){var n=t.parent.lookup(t.extend);if(n){var r=new a(t.fullName,t.id,t.type,t.rule,void 0,t.options);return r.declaringField=t,t.extensionField=r,n.add(r),!0}return!1}u.prototype._handleAdd=function(e){if(e instanceof a)void 0===e.extend||e.extensionField||f(0,e)||this.deferred.push(e);else if(e instanceof c)p.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof l)){if(e instanceof i)for(var t=0;t<this.deferred.length;)f(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);p.test(e.name)&&(e.parent[e.name]=e)}},u.prototype._handleRemove=function(e){if(e instanceof a){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof c)p.test(e.name)&&delete e.parent[e.name];else if(e instanceof r){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);p.test(e.name)&&delete e.parent[e.name]}},u._configure=function(e,t,n){i=e,o=t,s=n}},5054:function(e){"use strict";e.exports={}},5994:function(e,t,n){"use strict";t.Service=n(7948)},7948:function(e,t,n){"use strict";e.exports=i;var r=n(9693);function i(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,n,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return r.asPromise(e,a,t,n,i,o);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return a.emit("error",e,t),s(e);if(null!==n){if(!(n instanceof i))try{n=i[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",n,t),s(null,n)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},7513:function(e,t,n){"use strict";e.exports=a;var r=n(9313);((a.prototype=Object.create(r.prototype)).constructor=a).className="Service";var i=n(4429),o=n(9935),s=n(5994);function a(e,t){r.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var n=new a(e,t.options);if(t.methods)for(var r=Object.keys(t.methods),o=0;o<r.length;++o)n.add(i.fromJSON(r[o],t.methods[r[o]]));return t.nested&&n.addJSON(t.nested),n.comment=t.comment,n},a.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return o.toObject(["options",t&&t.options||void 0,"methods",r.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=o.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||r.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return r.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof i?(this.methods[e.name]=e,e.parent=this,c(this)):r.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return r.prototype.remove.call(this,e)},a.prototype.create=function(e,t,n){for(var r,i=new s.Service(e,t,n),a=0;a<this.methodsArray.length;++a){var c=o.lcFirst((r=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");i[c]=o.codegen(["r","c"],o.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return i}},626:function(e){"use strict";e.exports=u;var t=/[\s{}=;:[\],'"()<>]/g,n=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,r=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,i=/^ *[*/]+ */,o=/^\s*\*?\/*/,s=/\n/g,a=/\s/,c=/\\(.?)/g,l={0:"\0",r:"\r",n:"\n",t:"\t"};function d(e){return e.replace(c,(function(e,t){switch(t){case"\\":case"":return t;default:return l[t]||""}}))}function u(e,c){e=e.toString();var l=0,u=e.length,h=1,p=null,f=null,m=0,g=!1,y=!1,v=[],_=null;function E(e){return Error("illegal "+e+" (line "+h+")")}function S(t){return e.charAt(t)}function T(t,n,r){p=e.charAt(t++),m=h,g=!1,y=r;var a,l=t-(c?2:3);do{if(--l<0||"\n"===(a=e.charAt(l))){g=!0;break}}while(" "===a||"\t"===a);for(var d=e.substring(t,n).split(s),u=0;u<d.length;++u)d[u]=d[u].replace(c?o:i,"").trim();f=d.join("\n").trim()}function b(t){var n=I(t),r=e.substring(t,n);return/^\s*\/{1,2}/.test(r)}function I(e){for(var t=e;t<u&&"\n"!==S(t);)t++;return t}function N(){if(v.length>0)return v.shift();if(_)return function(){var t="'"===_?r:n;t.lastIndex=l-1;var i=t.exec(e);if(!i)throw E("string");return l=t.lastIndex,C(_),_=null,d(i[1])}();var i,o,s,p,f,m=0===l;do{if(l===u)return null;for(i=!1;a.test(s=S(l));)if("\n"===s&&(m=!0,++h),++l===u)return null;if("/"===S(l)){if(++l===u)throw E("comment");if("/"===S(l))if(c){if(p=l,f=!1,b(l)){f=!0;do{if((l=I(l))===u)break;l++}while(b(l))}else l=Math.min(u,I(l)+1);f&&T(p,l,m),h++,i=!0}else{for(f="/"===S(p=l+1);"\n"!==S(++l);)if(l===u)return null;++l,f&&T(p,l-1,m),++h,i=!0}else{if("*"!==(s=S(l)))return"/";p=l+1,f=c||"*"===S(p);do{if("\n"===s&&++h,++l===u)throw E("comment");o=s,s=S(l)}while("*"!==o||"/"!==s);++l,f&&T(p,l-2,m),i=!0}}}while(i);var g=l;if(t.lastIndex=0,!t.test(S(g++)))for(;g<u&&!t.test(S(g));)++g;var y=e.substring(l,l=g);return'"'!==y&&"'"!==y||(_=y),y}function C(e){v.push(e)}function w(){if(!v.length){var e=N();if(null===e)return null;C(e)}return v[0]}return Object.defineProperty({next:N,peek:w,push:C,skip:function(e,t){var n=w();if(n===e)return N(),!0;if(!t)throw E("token '"+n+"', '"+e+"' expected");return!1},cmnt:function(e){var t=null;return void 0===e?m===h-1&&(c||"*"===p||g)&&(t=y?f:null):(m<e&&w(),m!==e||g||!c&&"/"!==p||(t=y?null:f)),t}},"line",{get:function(){return h}})}u.unescape=d},7645:function(e,t,n){"use strict";e.exports=v;var r=n(9313);((v.prototype=Object.create(r.prototype)).constructor=v).className="Type";var i=n(7025),o=n(7598),s=n(3548),a=n(6039),c=n(7513),l=n(8368),d=n(1408),u=n(1173),h=n(9935),p=n(4928),f=n(5305),m=n(4497),g=n(3996),y=n(1667);function v(e,t){r.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function _(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(v.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var n=this.fields[e[t]],r=n.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=n}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=h.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=h.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=v.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof l||((e.prototype=new l).constructor=e,h.merge(e.prototype,t)),e.$type=e.prototype.$type=this,h.merge(e,l,!0),this._ctor=e;for(var n=0;n<this.fieldsArray.length;++n)this._fieldsArray[n].resolve();var r={};for(n=0;n<this.oneofsArray.length;++n)r[this._oneofsArray[n].resolve().name]={get:h.oneOfGetter(this._oneofsArray[n].oneof),set:h.oneOfSetter(this._oneofsArray[n].oneof)};n&&Object.defineProperties(e.prototype,r)}}}),v.generateConstructor=function(e){for(var t,n=h.codegen(["p"],e.name),r=0;r<e.fieldsArray.length;++r)(t=e._fieldsArray[r]).map?n("this%s={}",h.safeProp(t.name)):t.repeated&&n("this%s=[]",h.safeProp(t.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},v.fromJSON=function(e,t){var n=new v(e,t.options);n.extensions=t.extensions,n.reserved=t.reserved;for(var l=Object.keys(t.fields),d=0;d<l.length;++d)n.add((void 0!==t.fields[l[d]].keyType?a.fromJSON:s.fromJSON)(l[d],t.fields[l[d]]));if(t.oneofs)for(l=Object.keys(t.oneofs),d=0;d<l.length;++d)n.add(o.fromJSON(l[d],t.oneofs[l[d]]));if(t.nested)for(l=Object.keys(t.nested),d=0;d<l.length;++d){var u=t.nested[l[d]];n.add((void 0!==u.id?s.fromJSON:void 0!==u.fields?v.fromJSON:void 0!==u.values?i.fromJSON:void 0!==u.methods?c.fromJSON:r.fromJSON)(l[d],u))}return t.extensions&&t.extensions.length&&(n.extensions=t.extensions),t.reserved&&t.reserved.length&&(n.reserved=t.reserved),t.group&&(n.group=!0),t.comment&&(n.comment=t.comment),n},v.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return h.toObject(["options",t&&t.options||void 0,"oneofs",r.arrayToJSON(this.oneofsArray,e),"fields",r.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},v.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var n=this.oneofsArray;for(t=0;t<n.length;)n[t++].resolve();return r.prototype.resolveAll.call(this)},v.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},v.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof s&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),_(this)}return e instanceof o?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),_(this)):r.prototype.add.call(this,e)},v.prototype.remove=function(e){if(e instanceof s&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),_(this)}if(e instanceof o){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),_(this)}return r.prototype.remove.call(this,e)},v.prototype.isReservedId=function(e){return r.isReservedId(this.reserved,e)},v.prototype.isReservedName=function(e){return r.isReservedName(this.reserved,e)},v.prototype.create=function(e){return new this.ctor(e)},v.prototype.setup=function(){for(var e=this.fullName,t=[],n=0;n<this.fieldsArray.length;++n)t.push(this._fieldsArray[n].resolve().resolvedType);this.encode=p(this)({Writer:u,types:t,util:h}),this.decode=f(this)({Reader:d,types:t,util:h}),this.verify=m(this)({types:t,util:h}),this.fromObject=g.fromObject(this)({types:t,util:h}),this.toObject=g.toObject(this)({types:t,util:h});var r=y[e];if(r){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=r.fromObject.bind(i),i.toObject=this.toObject,this.toObject=r.toObject.bind(i)}return this},v.prototype.encode=function(e,t){return this.setup().encode(e,t)},v.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},v.prototype.decode=function(e,t){return this.setup().decode(e,t)},v.prototype.decodeDelimited=function(e){return e instanceof d||(e=d.create(e)),this.decode(e,e.uint32())},v.prototype.verify=function(e){return this.setup().verify(e)},v.prototype.fromObject=function(e){return this.setup().fromObject(e)},v.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},v.d=function(e){return function(t){h.decorateType(t,e)}}},7063:function(e,t,n){"use strict";var r=t,i=n(9935),o=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function s(e,t){var n=0,r={};for(t|=0;n<e.length;)r[o[n+t]]=e[n++];return r}r.basic=s([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=s([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),r.long=s([0,0,0,1,1],7),r.mapKey=s([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=s([1,5,0,0,0,5,5,0,0,0,1,1,0])},9935:function(e,t,n){"use strict";var r,i,o=e.exports=n(9693),s=n(5054);o.codegen=n(5124),o.fetch=n(9054),o.path=n(8626),o.fs=o.inquire("fs"),o.toArray=function(e){if(e){for(var t=Object.keys(e),n=new Array(t.length),r=0;r<t.length;)n[r]=e[t[r++]];return n}return[]},o.toObject=function(e){for(var t={},n=0;n<e.length;){var r=e[n++],i=e[n++];void 0!==i&&(t[r]=i)}return t};var a=/\\/g,c=/"/g;o.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},o.safeProp=function(e){return!/^[$\w_]+$/.test(e)||o.isReserved(e)?'["'+e.replace(a,"\\\\").replace(c,'\\"')+'"]':"."+e},o.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var l=/_([a-z])/g;o.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(l,(function(e,t){return t.toUpperCase()}))},o.compareFieldsById=function(e,t){return e.id-t.id},o.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(o.decorateRoot.remove(e.$type),e.$type.name=t,o.decorateRoot.add(e.$type)),e.$type;r||(r=n(7645));var i=new r(t||e.name);return o.decorateRoot.add(i),i.ctor=e,Object.defineProperty(e,"$type",{value:i,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:i,enumerable:!1}),i};var d=0;o.decorateEnum=function(e){if(e.$type)return e.$type;i||(i=n(7025));var t=new i("Enum"+d++,e);return o.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},o.setProperty=function(e,t,n){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,n,r){var i=n.shift();if("__proto__"===i)return t;if(n.length>0)t[i]=e(t[i]||{},n,r);else{var o=t[i];o&&(r=[].concat(o).concat(r)),t[i]=r}return t}(e,t=t.split("."),n)},Object.defineProperty(o,"decorateRoot",{get:function(){return s.decorated||(s.decorated=new(n(9424)))}})},1945:function(e,t,n){"use strict";e.exports=i;var r=n(9693);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(r.isString(e)){if(!r.Long)return i.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):o},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===s?o:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},9693:function(e,t,n){"use strict";var r=t;function i(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)void 0!==e[r[i]]&&n||(e[r[i]]=t[r[i]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=n(4537),r.base64=n(7419),r.EventEmitter=n(9211),r.float=n(945),r.inquire=n(7199),r.utf8=n(4997),r.pool=n(6662),r.LongBits=n(1945),r.isNode=Boolean(void 0!==n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),r.global=r.isNode&&n.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=i,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},4497:function(e,t,n){"use strict";e.exports=function(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n={};e.oneofsArray.length&&t("var p={}");for(var r=0;r<e.fieldsArray.length;++r){var c=e._fieldsArray[r].resolve(),l="m"+i.safeProp(c.name);if(c.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",l,c.name),c.map)t("if(!util.isObject(%s))",l)("return%j",o(c,"object"))("var k=Object.keys(%s)",l)("for(var i=0;i<k.length;++i){"),a(t,c,"k[i]"),s(t,c,r,l+"[k[i]]")("}");else if(c.repeated)t("if(!Array.isArray(%s))",l)("return%j",o(c,"array"))("for(var i=0;i<%s.length;++i){",l),s(t,c,r,l+"[i]")("}");else{if(c.partOf){var d=i.safeProp(c.partOf.name);1===n[c.partOf.name]&&t("if(p%s===1)",d)("return%j",c.partOf.name+": multiple values"),n[c.partOf.name]=1,t("p%s=1",d)}s(t,c,r,l)}c.optional&&t("}")}return t("return null")};var r=n(7025),i=n(9935);function o(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function s(e,t,n,i){if(t.resolvedType)if(t.resolvedType instanceof r){e("switch(%s){",i)("default:")("return%j",o(t,"enum value"));for(var s=Object.keys(t.resolvedType.values),a=0;a<s.length;++a)e("case %i:",t.resolvedType.values[s[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",n,i)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",o(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",o(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",o(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",o(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",o(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",o(t,"buffer"))}return e}function a(e,t,n){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",n)("return%j",o(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",n)("return%j",o(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",n)("return%j",o(t,"boolean key"))}return e}},1667:function(e,t,n){"use strict";var r=t,i=n(8368);r[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),n=this.lookup(t);if(n){var r="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return-1===r.indexOf("/")&&(r="/"+r),this.create({type_url:r,value:n.encode(n.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var n="",r="";if(t&&t.json&&e.type_url&&e.value){r=e.type_url.substring(e.type_url.lastIndexOf("/")+1),n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var o=this.lookup(r);o&&(e=o.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof i){var s=e.$type.toObject(e,t);return""===n&&(n="type.googleapis.com/"),r=n+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),s["@type"]=r,s}return this.toObject(e,t)}}},1173:function(e,t,n){"use strict";e.exports=u;var r,i=n(9693),o=i.LongBits,s=i.base64,a=i.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function l(){}function d(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function u(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var h=function(){return i.Buffer?function(){return(u.create=function(){return new r})()}:function(){return new u}};function p(e,t,n){t[n]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function m(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function g(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}u.create=h(),u.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(u.alloc=i.pool(u.alloc,i.Array.prototype.subarray)),u.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},u.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},u.prototype.int32=function(e){return e<0?this._push(m,10,o.fromNumber(e)):this.uint32(e)},u.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},u.prototype.uint64=function(e){var t=o.from(e);return this._push(m,t.length(),t)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(m,t.length(),t)},u.prototype.bool=function(e){return this._push(p,1,e?1:0)},u.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(e){var t=o.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},u.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var y=i.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};u.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(i.isString(e)){var n=u.alloc(t=s.length(e));s.decode(e,n,0),e=n}return this.uint32(t)._push(y,t,e)},u.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},u.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new c(l,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},u.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},u.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},u._configure=function(e){r=e,u.create=h(),r._configure()}},3155:function(e,t,n){"use strict";e.exports=o;var r=n(1173);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(9693);function o(){r.call(this)}function s(e,t,n){e.length<40?i.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},o.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},o._configure()},8e3:function(e,t,n){"use strict";var r=n(7581);e.exports=n(3626)(r),"_sockjs_onload"in n.g&&setTimeout(n.g._sockjs_onload,1)},2530:function(e,t,n){"use strict";var r=n(5717),i=n(685);function o(){i.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}r(o,i),e.exports=o},3212:function(e,t,n){"use strict";var r=n(5717),i=n(3184);function o(){i.call(this)}r(o,i),o.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},o.prototype.once=function(e,t){var n=this,r=!1;this.on(e,(function i(){n.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}))},o.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var n=arguments.length,r=new Array(n-1),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0;o<t.length;o++)t[o].apply(this,r)}},o.prototype.on=o.prototype.addListener=i.prototype.addEventListener,o.prototype.removeListener=i.prototype.removeEventListener,e.exports.v=o},685:function(e){"use strict";function t(e){this.type=e}t.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this},t.prototype.stopPropagation=function(){},t.prototype.preventDefault=function(){},t.CAPTURING_PHASE=1,t.AT_TARGET=2,t.BUBBLING_PHASE=3,e.exports=t},3184:function(e){"use strict";function t(){this._listeners={}}t.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];-1===n.indexOf(t)&&(n=n.concat([t])),this._listeners[e]=n},t.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var r=n.indexOf(t);-1===r||(n.length>1?this._listeners[e]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[e])}},t.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,n=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var r=this._listeners[t],i=0;i<r.length;i++)r[i].apply(this,n)},e.exports=t},3326:function(e,t,n){"use strict";var r=n(5717),i=n(685);function o(e){i.call(this),this.initEvent("message",!1,!1),this.data=e}r(o,i),e.exports=o},691:function(e,t,n){"use strict";var r=n(3683);function i(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}i.prototype._transportClose=function(e,t){r.postMessage("c",JSON.stringify([e,t]))},i.prototype._transportMessage=function(e){r.postMessage("t",e)},i.prototype._send=function(e){this._transport.send(e)},i.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},e.exports=i},551:function(e,t,n){"use strict";var r=n(273),i=n(7705),o=n(691),s=n(6311),a=n(3683),c=n(7486);e.exports=function(e,t){var n,l={};t.forEach((function(e){e.facadeTransport&&(l[e.facadeTransport.transportName]=e.facadeTransport)})),l[s.transportName]=s,e.bootstrap_iframe=function(){var t;a.currentWindowId=c.hash.slice(1),i.attachEvent("message",(function(i){if(i.source===parent&&(void 0===n&&(n=i.origin),i.origin===n)){var s;try{s=JSON.parse(i.data)}catch(e){return void i.data}if(s.windowId===a.currentWindowId)switch(s.type){case"s":var d;try{d=JSON.parse(s.data)}catch(e){s.data;break}var u=d[0],h=d[1],p=d[2],f=d[3];if(u!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+u+'", the iframe: "'+e.version+'".');if(!r.isOriginEqual(p,c.href)||!r.isOriginEqual(f,c.href))throw new Error("Can't connect to different domain from within an iframe. ("+c.href+", "+p+", "+f+")");t=new o(new l[h](p,f));break;case"m":t._send(s.data);break;case"c":t&&t._close(),t=null}}})),a.postMessage("s")}}},2550:function(e,t,n){"use strict";var r=n(3212).v,i=n(5717),o=n(2217);function s(e,t){r.call(this);var n=this,i=+new Date;this.xo=new t("GET",e),this.xo.once("finish",(function(e,t){var r,s;if(200===e){if(s=+new Date-i,t)try{r=JSON.parse(t)}catch(e){}o.isObject(r)||(r={})}n.emit("finish",r,s),n.removeAllListeners()}))}i(s,r),s.prototype.close=function(){this.removeAllListeners(),this.xo.close()},e.exports=s},6311:function(e,t,n){"use strict";var r=n(5717),i=n(3212).v,o=n(3515),s=n(2550);function a(e){var t=this;i.call(this),this.ir=new s(e,o),this.ir.once("finish",(function(e,n){t.ir=null,t.emit("message",JSON.stringify([e,n]))}))}r(a,i),a.transportName="iframe-info-receiver",a.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},e.exports=a},3616:function(e,t,n){"use strict";var r=n(3212).v,i=n(5717),o=n(7705),s=n(5088),a=n(6311);function c(e,t){var i=this;r.call(this);var c=function(){var n=i.ifr=new s(a.transportName,t,e);n.once("message",(function(e){if(e){var t;try{t=JSON.parse(e)}catch(e){return i.emit("finish"),void i.close()}var n=t[0],r=t[1];i.emit("finish",n,r)}i.close()})),n.once("close",(function(){i.emit("finish"),i.close()}))};n.g.document.body?c():o.attachEvent("load",c)}i(c,r),c.enabled=function(){return s.enabled()},c.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},e.exports=c},5172:function(e,t,n){"use strict";var r=n(3212).v,i=n(5717),o=n(273),s=n(6073),a=n(9033),c=n(3515),l=n(7103),d=n(3616),u=n(2550);function h(e,t){var n=this;r.call(this),setTimeout((function(){n.doXhr(e,t)}),0)}i(h,r),h._getReceiver=function(e,t,n){return n.sameOrigin?new u(t,c):a.enabled?new u(t,a):s.enabled&&n.sameScheme?new u(t,s):d.enabled()?new d(e,t):new u(t,l)},h.prototype.doXhr=function(e,t){var n=this,r=o.addPath(e,"/info");this.xo=h._getReceiver(e,r,t),this.timeoutRef=setTimeout((function(){n._cleanup(!1),n.emit("finish")}),h.timeout),this.xo.once("finish",(function(e,t){n._cleanup(!0),n.emit("finish",e,t)}))},h.prototype._cleanup=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},h.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},h.timeout=8e3,e.exports=h},7486:function(e,t,n){"use strict";e.exports=n.g.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}},3626:function(e,t,n){"use strict";n(1247);var r,i=n(4564),o=n(5717),s=n(8915),a=n(8028),c=n(273),l=n(7705),d=n(5581),u=n(2217),h=n(8510),p=n(4886),f=n(685),m=n(3184),g=n(7486),y=n(2530),v=n(3326),_=n(5172);function E(e,t,n){if(!(this instanceof E))return new E(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");m.call(this),this.readyState=E.CONNECTING,this.extensions="",this.protocol="",(n=n||{}).protocols_whitelist&&p.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{},this._timeout=n.timeout||0;var r=n.sessionId||8;if("function"==typeof r)this._generateSessionId=r;else{if("number"!=typeof r)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return s.string(r)}}this._server=n.server||s.numberString(1e3);var o=new i(e);if(!o.host||!o.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(o.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==o.protocol&&"https:"!==o.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+o.protocol+"' is not allowed.");var a="https:"===o.protocol;if("https:"===g.protocol&&!a&&!c.isLoopbackAddr(o.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var l=t.sort();l.forEach((function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<l.length-1&&e===l[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")}));var d=c.getOrigin(g.href);this._origin=d?d.toLowerCase():null,o.set("pathname",o.pathname.replace(/\/+$/,"")),this.url=o.href,this.url,this._urlInfo={nullOrigin:!h.hasDomain(),sameOrigin:c.isOriginEqual(this.url,g.href),sameScheme:c.isSchemeEqual(this.url,g.href)},this._ir=new _(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function S(e){return 1e3===e||e>=3e3&&e<=4999}o(E,m),E.prototype.close=function(e,t){if(e&&!S(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");this.readyState!==E.CLOSING&&this.readyState!==E.CLOSED&&this._close(e||1e3,t||"Normal closure",!0)},E.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===E.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===E.OPEN&&this._transport.send(a.quote(e))},E.version=n(2828),E.CONNECTING=0,E.OPEN=1,E.CLOSING=2,E.CLOSED=3,E.prototype._receiveInfo=function(e,t){if(this._ir=null,e){this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=u.extend(e,this._urlInfo);var n=r.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,this._transports.length,this._connect()}else this._close(1002,"Cannot connect to server")},E.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(e.transportName,e.needBody&&(!n.g.document.body||void 0!==n.g.document.readyState&&"complete"!==n.g.document.readyState&&"interactive"!==n.g.document.readyState))return this._transports.unshift(e),void l.attachEvent("load",this._connect.bind(this));var t=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t);var r=c.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),i=this._transportOptions[e.transportName],o=new e(r,this._transUrl,i);return o.on("message",this._transportMessage.bind(this)),o.once("close",this._transportClose.bind(this)),o.transportName=e.transportName,void(this._transport=o)}this._close(2e3,"All transports failed",!1)},E.prototype._transportTimeout=function(){this.readyState===E.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},E.prototype._transportMessage=function(e){var t,n=this,r=e.slice(0,1),i=e.slice(1);switch(r){case"o":return void this._open();case"h":return this.dispatchEvent(new f("heartbeat")),void this.transport}if(i)try{t=JSON.parse(i)}catch(e){}if(void 0!==t)switch(r){case"a":Array.isArray(t)&&t.forEach((function(e){n.transport,n.dispatchEvent(new v(e))}));break;case"m":this.transport,this.dispatchEvent(new v(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}},E.prototype._transportClose=function(e,t){this.transport,this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),S(e)||2e3===e||this.readyState!==E.CONNECTING?this._close(e,t):this._connect()},E.prototype._open=function(){this._transport&&this._transport.transportName,this.readyState,this.readyState===E.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=E.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new f("open")),this.transport):this._close(1006,"Server lost session")},E.prototype._close=function(e,t,n){this.transport,this.readyState;var r=!1;if(this._ir&&(r=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===E.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=E.CLOSING,setTimeout(function(){this.readyState=E.CLOSED,r&&this.dispatchEvent(new f("error"));var i=new y("close");i.wasClean=n||!1,i.code=e||1e3,i.reason=t,this.dispatchEvent(i),this.onmessage=this.onclose=this.onerror=null}.bind(this),0)},E.prototype.countRTO=function(e){return e>100?4*e:300+e},e.exports=function(e){return r=d(e),n(551)(E,e),E}},1247:function(){"use strict";var e,t=Array.prototype,n=Object.prototype,r=Function.prototype,i=String.prototype,o=t.slice,s=n.toString,a=function(e){return"[object Function]"===n.toString.call(e)},c=function(e){return"[object String]"===s.call(e)},l=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();e=l?function(e,t,n,r){!r&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,r){!r&&t in e||(e[t]=n)};var d=function(t,r,i){for(var o in r)n.hasOwnProperty.call(r,o)&&e(t,o,r[o],i)},u=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};function h(){}d(r,{bind:function(e){var t=this;if(!a(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n=o.call(arguments,1),r=Math.max(0,t.length-n.length),i=[],s=0;s<r;s++)i.push("$"+s);var c=Function("binder","return function ("+i.join(",")+"){ return binder.apply(this, arguments); }")((function(){if(this instanceof c){var r=t.apply(this,n.concat(o.call(arguments)));return Object(r)===r?r:this}return t.apply(e,n.concat(o.call(arguments)))}));return t.prototype&&(h.prototype=t.prototype,c.prototype=new h,h.prototype=null),c}}),d(Array,{isArray:function(e){return"[object Array]"===s.call(e)}});var p,f,m,g=Object("a"),y="a"!==g[0]||!(0 in g);d(t,{forEach:function(e){var t=u(this),n=y&&c(this)?this.split(""):t,r=arguments[1],i=-1,o=n.length>>>0;if(!a(e))throw new TypeError;for(;++i<o;)i in n&&e.call(r,n[i],i,t)}},(p=t.forEach,f=!0,m=!0,p&&(p.call("foo",(function(e,t,n){"object"!=typeof n&&(f=!1)})),p.call([1],(function(){m="string"==typeof this}),"x")),!(p&&f&&m)));var v=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);d(t,{indexOf:function(e){var t=y&&c(this)?this.split(""):u(this),n=t.length>>>0;if(!n)return-1;var r,i=0;for(arguments.length>1&&((r=+arguments[1])!=r?r=0:0!==r&&r!==1/0&&r!==-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r))),i=r),i=i>=0?i:Math.max(0,n+i);i<n;i++)if(i in t&&t[i]===e)return i;return-1}},v);var _,E=i.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(_=void 0===/()??/.exec("")[1],i.split=function(e,n){var r=this;if(void 0===e&&0===n)return[];if("[object RegExp]"!==s.call(e))return E.call(this,e,n);var i,o,a,c,l=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),u=0;for(e=new RegExp(e.source,d+"g"),r+="",_||(i=new RegExp("^"+e.source+"$(?!\\s)",d)),n=void 0===n?-1>>>0:n>>>0;(o=e.exec(r))&&!((a=o.index+o[0].length)>u&&(l.push(r.slice(u,o.index)),!_&&o.length>1&&o[0].replace(i,(function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(o[e]=void 0)})),o.length>1&&o.index<r.length&&t.push.apply(l,o.slice(1)),c=o[0].length,u=a,l.length>=n));)e.lastIndex===o.index&&e.lastIndex++;return u===r.length?!c&&e.test("")||l.push(""):l.push(r.slice(u)),l.length>n?l.slice(0,n):l}):"0".split(void 0,0).length&&(i.split=function(e,t){return void 0===e&&0===t?[]:E.call(this,e,t)});var S=i.substr;d(i,{substr:function(e,t){return S.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},"".substr&&"b"!=="0b".substr(-1))},7581:function(e,t,n){"use strict";e.exports=[n(2412),n(9842),n(4620),n(3004),n(882)(n(3004)),n(5616),n(882)(n(5616)),n(2387),n(9998),n(882)(n(2387)),n(5375)]},2940:function(e,t,n){"use strict";var r=n(3212).v,i=n(5717),o=n(7705),s=n(273),a=n.g.XMLHttpRequest;function c(e,t,n,i){var o=this;r.call(this),setTimeout((function(){o._start(e,t,n,i)}),0)}i(c,r),c.prototype._start=function(e,t,n,r){var i=this;try{this.xhr=new a}catch(e){}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();t=s.addQuery(t,"t="+ +new Date),this.unloadRef=o.unloadAdd((function(){i._cleanup(!0)}));try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){i.emit("finish",0,""),i._cleanup(!1)})}catch(e){return this.emit("finish",0,""),void this._cleanup(!1)}if(r&&r.noCredentials||!c.supportsCORS||(this.xhr.withCredentials=!0),r&&r.headers)for(var l in r.headers)this.xhr.setRequestHeader(l,r.headers[l]);this.xhr.onreadystatechange=function(){if(i.xhr){var e,t,n=i.xhr;switch(n.readyState,n.readyState){case 3:try{t=n.status,e=n.responseText}catch(e){}1223===t&&(t=204),200===t&&e&&e.length>0&&i.emit("chunk",t,e);break;case 4:1223===(t=n.status)&&(t=204),12005!==t&&12029!==t||(t=0),n.responseText,i.emit("finish",t,n.responseText),i._cleanup(!1)}}};try{i.xhr.send(n)}catch(e){i.emit("finish",0,""),i._cleanup(!1)}},c.prototype._cleanup=function(e){if(this.xhr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(e){}this.unloadRef=this.xhr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!!a;var l=["Active"].concat("Object").join("X");!c.enabled&&l in n.g&&(a=function(){try{return new n.g[l]("Microsoft.XMLHTTP")}catch(e){return null}},c.enabled=!!new a);var d=!1;try{d="withCredentials"in new a}catch(e){}c.supportsCORS=d,e.exports=c},3759:function(e,t,n){e.exports=n.g.EventSource},9334:function(e,t,n){"use strict";var r=n.g.WebSocket||n.g.MozWebSocket;e.exports=r?function(e){return new r(e)}:void 0},3004:function(e,t,n){"use strict";var r=n(5717),i=n(9395),o=n(6709),s=n(9033),a=n(3759);function c(e){if(!c.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/eventsource",o,s)}r(c,i),c.enabled=function(){return!!a},c.transportName="eventsource",c.roundTrips=2,e.exports=c},5616:function(e,t,n){"use strict";var r=n(5717),i=n(3608),o=n(3515),s=n(9395);function a(e){if(!i.enabled)throw new Error("Transport created when disabled");s.call(this,e,"/htmlfile",i,o)}r(a,s),a.enabled=function(e){return i.enabled&&e.sameOrigin},a.transportName="htmlfile",a.roundTrips=2,e.exports=a},5088:function(e,t,n){"use strict";var r=n(5717),i=n(3212).v,o=n(2828),s=n(273),a=n(3683),c=n(7705),l=n(8915);function d(e,t,n){if(!d.enabled())throw new Error("Transport created when disabled");i.call(this);var r=this;this.origin=s.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=l.string(8);var o=s.addPath(n,"/iframe.html")+"#"+this.windowId;this.iframeObj=a.createIframe(o,(function(e){r.emit("close",1006,"Unable to load an iframe ("+e+")"),r.close()})),this.onmessageCallback=this._message.bind(this),c.attachEvent("message",this.onmessageCallback)}r(d,i),d.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){c.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},d.prototype._message=function(e){if(e.data,!s.isOriginEqual(e.origin,this.origin))return e.origin,void this.origin;var t;try{t=JSON.parse(e.data)}catch(t){return void e.data}if(t.windowId!==this.windowId)return t.windowId,void this.windowId;switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([o,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var n;try{n=JSON.parse(t.data)}catch(e){return void t.data}this.emit("close",n[0],n[1]),this.close()}},d.prototype.postMessage=function(e,t){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},d.prototype.send=function(e){this.postMessage("m",e)},d.enabled=function(){return a.iframeEnabled},d.transportName="iframe",d.roundTrips=2,e.exports=d},5375:function(e,t,n){"use strict";var r=n(5717),i=n(8347),o=n(514),s=n(771);function a(e){if(!a.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/jsonp",s,o)}r(a,i),a.enabled=function(){return!!n.g.document},a.transportName="jsonp-polling",a.roundTrips=1,a.needBody=!0,e.exports=a},9395:function(e,t,n){"use strict";var r=n(5717),i=n(273),o=n(8347);function s(e,t,n,r){o.call(this,e,t,function(e){return function(t,n,r){var o={};"string"==typeof n&&(o.headers={"Content-type":"text/plain"});var s=i.addPath(t,"/xhr_send"),a=new e("POST",s,n,o);return a.once("finish",(function(e){if(a=null,200!==e&&204!==e)return r(new Error("http status "+e));r()})),function(){a.close(),a=null;var e=new Error("Aborted");e.code=1e3,r(e)}}}(r),n,r)}r(s,o),e.exports=s},1851:function(e,t,n){"use strict";var r=n(5717),i=n(3212).v;function o(e,t){i.call(this),this.sendBuffer=[],this.sender=t,this.url=e}r(o,i),o.prototype.send=function(e){this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},o.prototype.sendScheduleWait=function(){var e,t=this;this.sendStop=function(){t.sendStop=null,clearTimeout(e)},e=setTimeout((function(){t.sendStop=null,t.sendSchedule()}),25)},o.prototype.sendSchedule=function(){this.sendBuffer.length;var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,(function(t){e.sendStop=null,t?(e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()})),this.sendBuffer=[]}},o.prototype._cleanup=function(){this.removeAllListeners()},o.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},e.exports=o},882:function(e,t,n){"use strict";var r=n(5717),i=n(5088),o=n(2217);e.exports=function(e){function t(t,n){i.call(this,e.transportName,t,n)}return r(t,i),t.enabled=function(t,r){if(!n.g.document)return!1;var s=o.extend({},r);return s.sameOrigin=!0,e.enabled(s)&&i.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=i.roundTrips+e.roundTrips-1,t.facadeTransport=e,t}},1265:function(e,t,n){"use strict";var r=n(5717),i=n(3212).v;function o(e,t,n){i.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}r(o,i),o.prototype._scheduleReceiver=function(){var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",(function(t){e.emit("message",t)})),t.once("close",(function(n,r){e.pollIsClosing,e.poll=t=null,e.pollIsClosing||("network"===r?e._scheduleReceiver():(e.emit("close",n||1006,r),e.removeAllListeners()))}))},o.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},e.exports=o},8347:function(e,t,n){"use strict";var r=n(5717),i=n(273),o=n(1851),s=n(1265);function a(e,t,n,r,a){var c=i.addPath(e,t),l=this;o.call(this,e,n),this.poll=new s(r,c,a),this.poll.on("message",(function(e){l.emit("message",e)})),this.poll.once("close",(function(e,t){l.poll=null,l.emit("close",e,t),l.close()}))}r(a,o),a.prototype.close=function(){o.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},e.exports=a},6709:function(e,t,n){"use strict";var r=n(5717),i=n(3212).v,o=n(3759);function s(e){i.call(this);var t=this,n=this.es=new o(e);n.onmessage=function(e){e.data,t.emit("message",decodeURI(e.data))},n.onerror=function(e){n.readyState;var r=2!==n.readyState?"network":"permanent";t._cleanup(),t._close(r)}}r(s,i),s.prototype.abort=function(){this._cleanup(),this._close("user")},s.prototype._cleanup=function(){var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},s.prototype._close=function(e){var t=this;setTimeout((function(){t.emit("close",null,e),t.removeAllListeners()}),200)},e.exports=s},3608:function(e,t,n){"use strict";var r=n(5717),i=n(3683),o=n(273),s=n(3212).v,a=n(8915);function c(e){s.call(this);var t=this;i.polluteGlobalNamespace(),this.id="a"+a.string(6),e=o.addQuery(e,"c="+decodeURIComponent(i.WPrefix+"."+this.id)),c.htmlfileEnabled;var r=c.htmlfileEnabled?i.createHtmlfile:i.createIframe;n.g[i.WPrefix][this.id]={start:function(){t.iframeObj.loaded()},message:function(e){t.emit("message",e)},stop:function(){t._cleanup(),t._close("network")}},this.iframeObj=r(e,(function(){t._cleanup(),t._close("permanent")}))}r(c,s),c.prototype.abort=function(){this._cleanup(),this._close("user")},c.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete n.g[i.WPrefix][this.id]},c.prototype._close=function(e){this.emit("close",null,e),this.removeAllListeners()},c.htmlfileEnabled=!1;var l=["Active"].concat("Object").join("X");if(l in n.g)try{c.htmlfileEnabled=!!new n.g[l]("htmlfile")}catch(e){}c.enabled=c.htmlfileEnabled||i.iframeEnabled,e.exports=c},514:function(e,t,n){"use strict";var r=n(3683),i=n(8915),o=n(8510),s=n(273),a=n(5717),c=n(3212).v;function l(e){var t=this;c.call(this),r.polluteGlobalNamespace(),this.id="a"+i.string(6);var o=s.addQuery(e,"c="+encodeURIComponent(r.WPrefix+"."+this.id));n.g[r.WPrefix][this.id]=this._callback.bind(this),this._createScript(o),this.timeoutId=setTimeout((function(){t._abort(new Error("JSONP script loaded abnormally (timeout)"))}),l.timeout)}a(l,c),l.prototype.abort=function(){if(n.g[r.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},l.timeout=35e3,l.scriptErrorTimeout=1e3,l.prototype._callback=function(e){this._cleanup(),this.aborting||(e&&this.emit("message",e),this.emit("close",null,"network"),this.removeAllListeners())},l.prototype._abort=function(e){this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},l.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete n.g[r.WPrefix][this.id]},l.prototype._scriptError=function(){var e=this;this.errorTimer||(this.errorTimer=setTimeout((function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))}),l.scriptErrorTimeout))},l.prototype._createScript=function(e){var t,r=this,s=this.script=n.g.document.createElement("script");if(s.id="a"+i.string(8),s.src=e,s.type="text/javascript",s.charset="UTF-8",s.onerror=this._scriptError.bind(this),s.onload=function(){r._abort(new Error("JSONP script loaded abnormally (onload)"))},s.onreadystatechange=function(){if(s.readyState,/loaded|closed/.test(s.readyState)){if(s&&s.htmlFor&&s.onclick){r.loadedOkay=!0;try{s.onclick()}catch(e){}}s&&r._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===s.async&&n.g.document.attachEvent)if(o.isOpera())(t=this.script2=n.g.document.createElement("script")).text="try{var a = document.getElementById('"+s.id+"'); if(a)a.onerror();}catch(x){};",s.async=t.async=!1;else{try{s.htmlFor=s.id,s.event="onclick"}catch(e){}s.async=!0}void 0!==s.async&&(s.async=!0);var a=n.g.document.getElementsByTagName("head")[0];a.insertBefore(s,a.firstChild),t&&a.insertBefore(t,a.firstChild)},e.exports=l},1044:function(e,t,n){"use strict";var r=n(5717),i=n(3212).v;function o(e,t){i.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",(function(e,t){n._chunkHandler(e,t),n.xo=null;var r=200===e?"network":"permanent";n.emit("close",null,r),n._cleanup()}))}r(o,i),o.prototype._chunkHandler=function(e,t){if(200===e&&t)for(var n=-1;;this.bufferPosition+=n+1){var r=t.slice(this.bufferPosition);if(-1===(n=r.indexOf("\n")))break;var i=r.slice(0,n);i&&this.emit("message",i)}},o.prototype._cleanup=function(){this.removeAllListeners()},o.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},e.exports=o},771:function(e,t,n){"use strict";var r,i,o=n(8915),s=n(273);e.exports=function(e,t,a){r||((r=n.g.document.createElement("form")).style.display="none",r.style.position="absolute",r.method="POST",r.enctype="application/x-www-form-urlencoded",r.acceptCharset="UTF-8",(i=n.g.document.createElement("textarea")).name="d",r.appendChild(i),n.g.document.body.appendChild(r));var c="a"+o.string(8);r.target=c,r.action=s.addQuery(s.addPath(e,"/jsonp_send"),"i="+c);var l=function(e){try{return n.g.document.createElement('<iframe name="'+e+'">')}catch(r){var t=n.g.document.createElement("iframe");return t.name=e,t}}(c);l.id=c,l.style.display="none",r.appendChild(l);try{i.value=t}catch(e){}r.submit();var d=function(e){l.onerror&&(l.onreadystatechange=l.onerror=l.onload=null,setTimeout((function(){l.parentNode.removeChild(l),l=null}),500),i.value="",a(e))};return l.onerror=function(){d()},l.onload=function(){d()},l.onreadystatechange=function(e){l.readyState,"complete"===l.readyState&&d()},function(){d(new Error("Aborted"))}}},6073:function(e,t,n){"use strict";var r=n(3212).v,i=n(5717),o=n(7705),s=n(8510),a=n(273);function c(e,t,n){var i=this;r.call(this),setTimeout((function(){i._start(e,t,n)}),0)}i(c,r),c.prototype._start=function(e,t,r){var i=this,s=new n.g.XDomainRequest;t=a.addQuery(t,"t="+ +new Date),s.onerror=function(){i._error()},s.ontimeout=function(){i._error()},s.onprogress=function(){s.responseText,i.emit("chunk",200,s.responseText)},s.onload=function(){i.emit("finish",200,s.responseText),i._cleanup(!1)},this.xdr=s,this.unloadRef=o.unloadAdd((function(){i._cleanup(!0)}));try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(r)}catch(e){this._error()}},c.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},c.prototype._cleanup=function(e){if(this.xdr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(e){}this.unloadRef=this.xdr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!(!n.g.XDomainRequest||!s.hasDomain()),e.exports=c},9033:function(e,t,n){"use strict";var r=n(5717),i=n(2940);function o(e,t,n,r){i.call(this,e,t,n,r)}r(o,i),o.enabled=i.enabled&&i.supportsCORS,e.exports=o},7103:function(e,t,n){"use strict";var r=n(3212).v;function i(){var e=this;r.call(this),this.to=setTimeout((function(){e.emit("finish",200,"{}")}),i.timeout)}n(5717)(i,r),i.prototype.close=function(){clearTimeout(this.to)},i.timeout=2e3,e.exports=i},3515:function(e,t,n){"use strict";var r=n(5717),i=n(2940);function o(e,t,n){i.call(this,e,t,n,{noCredentials:!0})}r(o,i),o.enabled=i.enabled,e.exports=o},2412:function(e,t,n){"use strict";var r=n(7705),i=n(273),o=n(5717),s=n(3212).v,a=n(9334);function c(e,t,n){if(!c.enabled())throw new Error("Transport created when disabled");s.call(this);var o=this,l=i.addPath(e,"/websocket");l="https"===l.slice(0,5)?"wss"+l.slice(5):"ws"+l.slice(4),this.url=l,this.ws=new a(this.url,[],n),this.ws.onmessage=function(e){e.data,o.emit("message",e.data)},this.unloadRef=r.unloadAdd((function(){o.ws.close()})),this.ws.onclose=function(e){e.code,e.reason,o.emit("close",e.code,e.reason),o._cleanup()},this.ws.onerror=function(e){o.emit("close",1006,"WebSocket connection broken"),o._cleanup()}}o(c,s),c.prototype.send=function(e){var t="["+e+"]";this.ws.send(t)},c.prototype.close=function(){var e=this.ws;this._cleanup(),e&&e.close()},c.prototype._cleanup=function(){var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),r.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},c.enabled=function(){return!!a},c.transportName="websocket",c.roundTrips=2,e.exports=c},9998:function(e,t,n){"use strict";var r=n(5717),i=n(9395),o=n(4620),s=n(1044),a=n(6073);function c(e){if(!a.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",s,a)}r(c,i),c.enabled=o.enabled,c.transportName="xdr-polling",c.roundTrips=2,e.exports=c},4620:function(e,t,n){"use strict";var r=n(5717),i=n(9395),o=n(1044),s=n(6073);function a(e){if(!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",o,s)}r(a,i),a.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&s.enabled&&e.sameScheme},a.transportName="xdr-streaming",a.roundTrips=2,e.exports=a},2387:function(e,t,n){"use strict";var r=n(5717),i=n(9395),o=n(1044),s=n(9033),a=n(3515);function c(e){if(!a.enabled&&!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",o,s)}r(c,i),c.enabled=function(e){return!e.nullOrigin&&(!(!a.enabled||!e.sameOrigin)||s.enabled)},c.transportName="xhr-polling",c.roundTrips=2,e.exports=c},9842:function(e,t,n){"use strict";var r=n(5717),i=n(9395),o=n(1044),s=n(9033),a=n(3515),c=n(8510);function l(e){if(!a.enabled&&!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",o,s)}r(l,i),l.enabled=function(e){return!e.nullOrigin&&!c.isOpera()&&s.enabled},l.transportName="xhr-streaming",l.roundTrips=2,l.needBody=!!n.g.document,e.exports=l},2017:function(e,t,n){"use strict";n.g.crypto&&n.g.crypto.getRandomValues?e.exports.randomBytes=function(e){var t=new Uint8Array(e);return n.g.crypto.getRandomValues(t),t}:e.exports.randomBytes=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(256*Math.random());return t}},8510:function(e,t,n){"use strict";e.exports={isOpera:function(){return n.g.navigator&&/opera/i.test(n.g.navigator.userAgent)},isKonqueror:function(){return n.g.navigator&&/konqueror/i.test(n.g.navigator.userAgent)},hasDomain:function(){if(!n.g.document)return!0;try{return!!n.g.document.domain}catch(e){return!1}}}},8028:function(e){"use strict";var t,n=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;e.exports={quote:function(e){var r=JSON.stringify(e);return n.lastIndex=0,n.test(r)?(t||(t=function(e){var t,n={},r=[];for(t=0;t<65536;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,(function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""})),e.lastIndex=0,n}(n)),r.replace(n,(function(e){return t[e]}))):r}}},7705:function(e,t,n){"use strict";var r=n(8915),i={},o=!1,s=n.g.chrome&&n.g.chrome.app&&n.g.chrome.app.runtime;e.exports={attachEvent:function(e,t){void 0!==n.g.addEventListener?n.g.addEventListener(e,t,!1):n.g.document&&n.g.attachEvent&&(n.g.document.attachEvent("on"+e,t),n.g.attachEvent("on"+e,t))},detachEvent:function(e,t){void 0!==n.g.addEventListener?n.g.removeEventListener(e,t,!1):n.g.document&&n.g.detachEvent&&(n.g.document.detachEvent("on"+e,t),n.g.detachEvent("on"+e,t))},unloadAdd:function(e){if(s)return null;var t=r.string(8);return i[t]=e,o&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in i&&delete i[e]},triggerUnloadCallbacks:function(){for(var e in i)i[e](),delete i[e]}},s||e.exports.attachEvent("unload",(function(){o||(o=!0,e.exports.triggerUnloadCallbacks())}))},3683:function(e,t,n){"use strict";var r=n(7705),i=n(8510);e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in n.g||(n.g[e.exports.WPrefix]={})},postMessage:function(t,r){n.g.parent!==n.g&&n.g.parent.postMessage(JSON.stringify({windowId:e.exports.currentWindowId,type:t,data:r||""}),"*")},createIframe:function(e,t){var i,o,s=n.g.document.createElement("iframe"),a=function(){clearTimeout(i);try{s.onload=null}catch(e){}s.onerror=null},c=function(){s&&(a(),setTimeout((function(){s&&s.parentNode.removeChild(s),s=null}),0),r.unloadDel(o))},l=function(e){s&&(c(),t(e))};return s.src=e,s.style.display="none",s.style.position="absolute",s.onerror=function(){l("onerror")},s.onload=function(){clearTimeout(i),i=setTimeout((function(){l("onload timeout")}),2e3)},n.g.document.body.appendChild(s),i=setTimeout((function(){l("timeout")}),15e3),o=r.unloadAdd(c),{post:function(e,t){setTimeout((function(){try{s&&s.contentWindow&&s.contentWindow.postMessage(e,t)}catch(e){}}),0)},cleanup:c,loaded:a}},createHtmlfile:function(t,i){var o,s,a,c=["Active"].concat("Object").join("X"),l=new n.g[c]("htmlfile"),d=function(){clearTimeout(o),a.onerror=null},u=function(){l&&(d(),r.unloadDel(s),a.parentNode.removeChild(a),a=l=null,CollectGarbage())},h=function(e){l&&(u(),i(e))};l.open(),l.write('<html><script>document.domain="'+n.g.document.domain+'";<\/script></html>'),l.close(),l.parentWindow[e.exports.WPrefix]=n.g[e.exports.WPrefix];var p=l.createElement("div");return l.body.appendChild(p),a=l.createElement("iframe"),p.appendChild(a),a.src=t,a.onerror=function(){h("onerror")},o=setTimeout((function(){h("timeout")}),15e3),s=r.unloadAdd(u),{post:function(e,t){try{setTimeout((function(){a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}),0)}catch(e){}},cleanup:u,loaded:d}}},e.exports.iframeEnabled=!1,n.g.document&&(e.exports.iframeEnabled=("function"==typeof n.g.postMessage||"object"==typeof n.g.postMessage)&&!i.isKonqueror())},4886:function(e,t,n){"use strict";var r={};["log","debug","warn"].forEach((function(e){var t;try{t=n.g.console&&n.g.console[e]&&n.g.console[e].apply}catch(e){}r[e]=t?function(){return n.g.console[e].apply(n.g.console,arguments)}:"log"===e?function(){}:r.log})),e.exports=r},2217:function(e){"use strict";e.exports={isObject:function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,r=1,i=arguments.length;r<i;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}}},8915:function(e,t,n){"use strict";var r=n(2017);e.exports={string:function(e){for(var t=r.randomBytes(e),n=[],i=0;i<e;i++)n.push("abcdefghijklmnopqrstuvwxyz012345".substr(t[i]%32,1));return n.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},5581:function(e){"use strict";e.exports=function(e){return{filterToEnabled:function(t,n){var r={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach((function(e){e&&("websocket"===e.transportName&&!1===n.websocket||(t.length&&-1===t.indexOf(e.transportName)?e.transportName:e.enabled(n)?(e.transportName,r.main.push(e),e.facadeTransport&&r.facade.push(e.facadeTransport)):e.transportName))})),r}}}},273:function(e,t,n){"use strict";var r=n(4564);e.exports={getOrigin:function(e){if(!e)return null;var t=new r(e);if("file:"===t.protocol)return null;var n=t.port;return n||(n="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){return this.getOrigin(e)===this.getOrigin(t)},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}}},2828:function(e){e.exports="1.6.1"},4564:function(e,t,n){"use strict";var r=n(4058),i=n(8188),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,d=/^[a-zA-Z]:/;function u(e){return(e||"").toString().replace(o,"")}var h=[["#","hash"],["?","query"],function(e,t){return m(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};function f(e){var t,r=("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).location||{},i={},o=typeof(e=e||r);if("blob:"===e.protocol)i=new y(unescape(e.pathname),{});else if("string"===o)for(t in i=new y(e,{}),p)delete i[t];else if("object"===o){for(t in e)t in p||(i[t]=e[t]);void 0===i.slashes&&(i.slashes=a.test(e.href))}return i}function m(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function g(e,t){e=(e=u(e)).replace(s,""),t=t||{};var n,r=l.exec(e),i=r[1]?r[1].toLowerCase():"",o=!!r[2],a=!!r[3],c=0;return o?a?(n=r[2]+r[3]+r[4],c=r[2].length+r[3].length):(n=r[2]+r[4],c=r[2].length):a?(n=r[3]+r[4],c=r[3].length):n=r[4],"file:"===i?c>=2&&(n=n.slice(2)):m(i)?n=r[4]:i?o&&(n=n.slice(2)):c>=2&&m(t.protocol)&&(n=r[4]),{protocol:i,slashes:o||m(i),slashesCount:c,rest:n}}function y(e,t,n){if(e=(e=u(e)).replace(s,""),!(this instanceof y))return new y(e,t,n);var o,a,c,l,p,v,_=h.slice(),E=typeof t,S=this,T=0;for("object"!==E&&"string"!==E&&(n=t,t=null),n&&"function"!=typeof n&&(n=i.parse),o=!(a=g(e||"",t=f(t))).protocol&&!a.slashes,S.slashes=a.slashes||o&&t.slashes,S.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||d.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!m(S.protocol)))&&(_[3]=[/(.*)/,"pathname"]);T<_.length;T++)"function"!=typeof(l=_[T])?(c=l[0],v=l[1],c!=c?S[v]=e:"string"==typeof c?~(p="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof l[2]?(S[v]=e.slice(0,p),e=e.slice(p+l[2])):(S[v]=e.slice(p),e=e.slice(0,p))):(p=c.exec(e))&&(S[v]=p[1],e=e.slice(0,p.index)),S[v]=S[v]||o&&l[3]&&t[v]||"",l[4]&&(S[v]=S[v].toLowerCase())):e=l(e,S);n&&(S.query=n(S.query)),o&&t.slashes&&"/"!==S.pathname.charAt(0)&&(""!==S.pathname||""!==t.pathname)&&(S.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,s=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),s++):s&&(0===r&&(o=!0),n.splice(r,1),s--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(S.pathname,t.pathname)),"/"!==S.pathname.charAt(0)&&m(S.protocol)&&(S.pathname="/"+S.pathname),r(S.port,S.protocol)||(S.host=S.hostname,S.port=""),S.username=S.password="",S.auth&&(~(p=S.auth.indexOf(":"))?(S.username=S.auth.slice(0,p),S.username=encodeURIComponent(decodeURIComponent(S.username)),S.password=S.auth.slice(p+1),S.password=encodeURIComponent(decodeURIComponent(S.password))):S.username=encodeURIComponent(decodeURIComponent(S.auth)),S.auth=S.password?S.username+":"+S.password:S.username),S.origin="file:"!==S.protocol&&m(S.protocol)&&S.host?S.protocol+"//"+S.host:"null",S.href=S.toString()}y.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||i.parse)(t)),o[e]=t;break;case"port":o[e]=t,r(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,c.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";o[e]=t.charAt(0)!==s?s+t:t}else o[e]=t;break;case"username":case"password":o[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(o.username=t.slice(0,a),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=t.slice(a+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<h.length;l++){var d=h[l];d[4]&&(o[d[1]]=o[d[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin="file:"!==o.protocol&&m(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=i.stringify);var t,n=this,r=n.host,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var s=o+(n.protocol&&n.slashes||m(n.protocol)?"//":"");return n.username?(s+=n.username,n.password&&(s+=":"+n.password),s+="@"):n.password?(s+=":"+n.password,s+="@"):"file:"!==n.protocol&&m(n.protocol)&&!r&&"/"!==n.pathname&&(s+="@"),(":"===r[r.length-1]||c.test(n.hostname)&&!n.port)&&(r+=":"),s+=r+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(s+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(s+=n.hash),s}},y.extractProtocol=g,y.location=f,y.trimLeft=u,y.qs=i,e.exports=y},8188:function(e,t){"use strict";var n=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function i(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var r,o,s=[];for(o in"string"!=typeof t&&(t="?"),e)if(n.call(e,o)){if((r=e[o])||null!=r&&!isNaN(r)||(r=""),o=i(o),r=i(r),null===o||null===r)continue;s.push(o+"="+r)}return s.length?t+s.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,i={};t=n.exec(e);){var o=r(t[1]),s=r(t[2]);null===o||null===s||o in i||(i[o]=s)}return i}},4058:function(e){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}}},__webpack_module_cache__={};function __nested_webpack_require_895763__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__nested_webpack_require_895763__),n.exports}__nested_webpack_require_895763__.amdO={},__nested_webpack_require_895763__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __nested_webpack_require_895763__.d(t,{a:t}),t},__nested_webpack_require_895763__.d=function(e,t){for(var n in t)__nested_webpack_require_895763__.o(t,n)&&!__nested_webpack_require_895763__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__nested_webpack_require_895763__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__nested_webpack_require_895763__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__nested_webpack_require_895763__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __nested_webpack_exports__={};return function(){"use strict";__nested_webpack_require_895763__.r(__nested_webpack_exports__),__nested_webpack_require_895763__.d(__nested_webpack_exports__,{default:function(){return ae}});var e=__nested_webpack_require_895763__(8e3),t=__nested_webpack_require_895763__.n(e),n=__nested_webpack_require_895763__(3281),r=__nested_webpack_require_895763__.n(n),i=__nested_webpack_require_895763__(3720),o=__nested_webpack_require_895763__.n(i),s=(__nested_webpack_require_895763__(9601),__nested_webpack_require_895763__(1539),__nested_webpack_require_895763__(8674),__nested_webpack_require_895763__(2526),__nested_webpack_require_895763__(1817),__nested_webpack_require_895763__(2165),__nested_webpack_require_895763__(6992),__nested_webpack_require_895763__(8783),__nested_webpack_require_895763__(3948),__nested_webpack_require_895763__(8309),__nested_webpack_require_895763__(1532),__nested_webpack_require_895763__(4812),__nested_webpack_require_895763__(9070),__nested_webpack_require_895763__(9575),__nested_webpack_require_895763__(2472),__nested_webpack_require_895763__(2990),__nested_webpack_require_895763__(8927),__nested_webpack_require_895763__(3105),__nested_webpack_require_895763__(5035),__nested_webpack_require_895763__(4345),__nested_webpack_require_895763__(7174),__nested_webpack_require_895763__(2846),__nested_webpack_require_895763__(4731),__nested_webpack_require_895763__(7209),__nested_webpack_require_895763__(6319),__nested_webpack_require_895763__(8867),__nested_webpack_require_895763__(7789),__nested_webpack_require_895763__(3739),__nested_webpack_require_895763__(9368),__nested_webpack_require_895763__(4483),__nested_webpack_require_895763__(2056),__nested_webpack_require_895763__(3462),__nested_webpack_require_895763__(678),__nested_webpack_require_895763__(7462),__nested_webpack_require_895763__(3824),__nested_webpack_require_895763__(5021),__nested_webpack_require_895763__(2974),__nested_webpack_require_895763__(5016),__nested_webpack_require_895763__(5827),__nested_webpack_require_895763__(3843),__nested_webpack_require_895763__(3710),__nested_webpack_require_895763__(2564),__nested_webpack_require_895763__(9653),__nested_webpack_require_895763__(7941),__nested_webpack_require_895763__(9554),__nested_webpack_require_895763__(4747),__nested_webpack_require_895763__(1038),__nested_webpack_require_895763__(7327),__nested_webpack_require_895763__(561),__nested_webpack_require_895763__(7252)),a=__nested_webpack_require_895763__(4370),c=__nested_webpack_require_895763__(5531),l=__nested_webpack_require_895763__(9335),d=__nested_webpack_require_895763__(7360),u=function(){function e(e,t,n){this.handlerData={},this.handlerData={},e.addEventHandler=this.addEventHandler.bind(this),e.removeEventHandler=this.removeEventHandler.bind(this)}return e.prototype.addEventHandler=function(e,t){this.handlerData[e]=t},e.prototype.removeEventHandler=function(e){delete this.handlerData[e]},e.prototype.dispatch=function(e,t){for(var n in d.kg.debug("dispatch event: "+e,t||""),this.handlerData){var r=this.handlerData[n][e];r&&r(t)}},e}(),h=function(){};function p(e){this.onOpened=e.onOpened||h,this.onPresence=e.onPresence||h,this.onTextMessage=e.onTextMessage||h,this.onPictureMessage=e.onPictureMessage||h,this.onAudioMessage=e.onAudioMessage||h,this.onVideoMessage=e.onVideoMessage||h,this.onFileMessage=e.onFileMessage||h,this.onLocationMessage=e.onLocationMessage||h,this.onCmdMessage=e.onCmdMessage||h,this.onCustomMessage=e.onCustomMessage||h,this.onReceivedMessage=e.onReceivedMessage||h,this.onDeliveredMessage=e.onDeliveredMessage||h,this.onReadMessage=e.onReadMessage||h,this.onRecallMessage=e.onRecallMessage||h,this.onChannelMessage=e.onChannelMessage||h,this.onError=e.onError||h,this.onOffline=e.onOffline||h,this.onOnline=e.onOnline||h,this.onStatisticMessage=e.onStatisticMessage||h,this.onContactInvited=e.onContactInvited||h,this.onContactAgreed=e.onContactAgreed||h,this.onContactRefuse=e.onContactRefuse||h,this.onContactDeleted=e.onContactDeleted||h,this.onContactAdded=e.onContactAdded||h,this.onTokenWillExpire=e.onTokenWillExpire||h,this.onTokenExpired=e.onTokenExpired||h,this.onClosed=e.onClosed||h,this.onPresenceStatusChange=e.onPresenceStatusChange||h}__nested_webpack_require_895763__(2222),__nested_webpack_require_895763__(2772);var f={biz:"",debug:!1,token:""},m="https://data-reporting.agora.io/report",g="https://data-reporting.sh.agoralab.co/report",y=(__nested_webpack_require_895763__(6699),__nested_webpack_require_895763__(2023),__nested_webpack_require_895763__(2071)),v=__nested_webpack_require_895763__(1595),_=function(e){var t=Number(v.C8[e]);return t===v.C8.USER_LOGIN?"MANUALLOGIN":t===v.C8.MSYNC_SENDMESSAGE?"SENDMESSAGE":t>v.C8.UNKNOWOPERATION&&t<v.C8.REST_OPERATE?"REST":t>v.C8.REST_OPERATE&&t<v.C8.MSYNC_OPERATE?"MESSAGE":t>v.C8.MSYNC_OPERATE&&t<v.C8.ROSTER_OPERATE?"ROSTER":t>v.C8.ROSTER_OPERATE&&t<v.C8.USER_OPERATE?"USER":t>v.C8.USER_OPERATE&&t<v.C8.GROUP_OPERATE?"GROUP":t>v.C8.GROUP_OPERATE&&t<v.C8.CHATROOM_OPERATE?"CHATROOM":"OPERATION"},E=function(){return(new Date).getTime()},S=function(e){return[a.iw.BAIDU,a.iw.WX,a.iw.DD,a.iw.ZFB,a.iw.TT,a.iw.QUICK_APP,a.iw.UNI].includes(e.platform)},T=function(){return e=1,t=99999,e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e;var e,t},b={},I=(__nested_webpack_require_895763__(1249),function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}),N=1e3,C=function(){function e(e){this.eventQueue=[],this.stock=N,this.config=e,this.governor()}return e.prototype.add=function(e){this.stock<=0?console.warn("Event Report limit ".concat(N," per minute")):(this.eventQueue.push(e),this.consume(),this.stock-=1)},e.prototype.consume=function(){var e=this;0!==this.eventQueue.length&&(this.timer&&this.eventQueue.length<=10&&clearTimeout(this.timer),this.timer=setTimeout((function(){var t,n=e.eventQueue.splice(0,10),r=n.filter((function(e){return e.appId===n[0].appId})),i=n.filter((function(e){return e.appId!==n[0].appId}));(t=e.eventQueue).unshift.apply(t,i),e.batchSend(r)}),1e3))},e.prototype.governor=function(){var e=this,t=setInterval((function(){e.stock=N}),6e4);"undefined"!=typeof addEventListener&&addEventListener("beforeunload",(function(){clearInterval(t)}))},e.prototype.batchSend=function(e){var t,n;if(void 0===e&&(e=[]),0!==e.length)try{var r=e.map((function(e){e.biz,e.appId;var t=e.eventId,n=I(e,["biz","appId","eventId"]);return{eventId:Number(t),body:n}}));!function(e,t){try{var n=t.biz,r=t.appId,i=t.data,o=t.debug,s=t.onSuccess;if(!n)throw new Error("biz is not defined");b.global||(b=a.P6.getEnvInfo());var c=b;if(S(c)){var l={url:o?g:m,data:i,method:"POST",success:function(){null==s||s()},fail:function(){},complete:function(){}},d={token:e,appid:null!=r?r:"",sendts:"".concat(Math.floor((new Date).getTime()/1e3)),biz:n,debug:"".concat(o)};if("zfb"===c.platform||"dd"===c.platform?l.headers=d:l.header=d,"dd"===c.platform)return c.global.httpRequest(l);c.global.request(l)}else{var u=new XMLHttpRequest;u.onreadystatechange=function(){2===u.readyState&&(null==s||s())},u.open("POST",o?g:m),u.setRequestHeader("Content-Type","application/json"),u.setRequestHeader("token",e),u.setRequestHeader("appid",null!=r?r:""),u.setRequestHeader("sendts","".concat(Math.floor((new Date).getTime()/1e3))),u.setRequestHeader("biz",n),u.setRequestHeader("debug","".concat(o)),u.send(JSON.stringify(i))}}catch(e){console.error(e)}}(this.config.token,{biz:null===(t=e[0])||void 0===t?void 0:t.biz,appId:null===(n=e[0])||void 0===n?void 0:n.appId,data:r,debug:this.config.debug,onSuccess:this.consume.bind(this)})}catch(e){console.error(e)}},e}(),w=function(){return w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},w.apply(this,arguments)},R=new(function(){function e(e){this.inited=!1,this.appId="",this.biz="",this.eventQueue={},this.config=f,e&&this.init(e)}return e.prototype.init=function(e){var t;if(void 0===e&&(e={}),!e.biz||!e.token)throw new Error("Event Report: biz or token is not defined");try{this.appId=null!==(t=e.appId)&&void 0!==t?t:"",this.biz=e.biz,this.config=w(w({},f),e),this.eventQueue=new C(this.config),this.log(e),this.inited=!0}catch(e){console.error(e)}},e.prototype.send=function(e,t,n){var r;if(void 0===t&&(t={}),this.inited){var i=w(w({},t),{eventId:Number(e),biz:this.biz,appId:null!==(r=null==n?void 0:n.appId)&&void 0!==r?r:this.appId});this.eventQueue.add(i),this.log(i)}else console.error("Event Report: init is not called")},e.prototype.log=function(e){try{if(this.config.debug){var t=e.payload,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["payload"]);console.log("%c Event Report: ".concat(this.config.biz," "),"background: #8A97FC; color: #fff"),console.table(n),t&&(console.info("payload:"),console.table(t))}}catch(e){console.error(e)}},e}()),A=function(){return A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},A.apply(this,arguments)},O={requestName:"",subrequestid:"1",requestMethod:"GET",requestUrl:"",requestElapse:0,code:0,codeDesc:"",isLastApi:0,isSuccess:1},M=function(){function e(e){this.platform=a.P6.getEnvInfo(),this.isReportDt=e.isReport||!1,this.isCollectDt=!0,S(this.platform)&&!this.isReportDt&&(this.isCollectDt=!1),this.eventQueue=[],this.accessChannel=y.yK,this.options=function(e,t){t.platform||(t=a.P6.getEnvInfo());var n=e.org,r=e.appkey,i=e.deviceId,o=e.sdkVersion,s=(null===navigator||void 0===navigator?void 0:navigator.userAgent)||"".concat(t.platform,"_mini_program");return{org:n,appkey:r,deviceId:i,sdkServiceId:"sid_".concat(a.P6.getUniqueId(),"_").concat(T()),did:s,sdkVersion:o,os:y.Wc,sdkProduct:v.aC.web}}(e,this.platform),this.sid=this.options.sdkServiceId,this.init(e)}return e.getInstance=function(){return e.instance},e.prototype.getServiceId=function(){return this.sid||"sid_0"},e.prototype.setIsReportDt=function(e){this.isReportDt=e,e&&this.rptEventQueue()},e.prototype.setIsCollectDt=function(e){this.isCollectDt=e,e||(this.eventQueue=[])},e.prototype.rptEventQueue=function(){var e=this;this.eventQueue.length&&this.eventQueue.forEach((function(t,n){R.send(t.eventId,t.dt),n>=e.eventQueue.length-1&&(e.eventQueue=[])}))},e.prototype.init=function(t){e.instance||(e.instance=this,R.init({biz:y.el,token:y.$x,appId:t.appkey,debug:!1}),this.reportInit())},e.prototype.reportInit=function(){if(this.isCollectDt){var e=this.options,t=e.did,n=e.os,r=e.sdkVersion,i=e.deviceId;this.reportData(y.iB.INIT,{did:t,os:n,sdkVersion:r,deviceId:i})}},e.prototype.geOperateFun=function(e){var t=this;if(!this.isCollectDt)return function(){};var n=1,r=0,i="",o=E(),s=e.uid,c=e.operationName;s&&(this.uid=s);var l={uid:this.uid,operationId:"opr_".concat(a.P6.getUniqueId(),"_").concat(T()),requestid:"req_".concat(a.P6.getUniqueId(),"_").concat(T()),operationName:c};return function(e){var s,d,u,h;if(e.data.isSuccess?(r=0,i=""):(0===e.data.code&&(e.data.code=y.Tp),r=null!==(s=e.data.code)&&void 0!==s?s:r,i=null!==(d=e.data.codeDesc)&&void 0!==d?d:i),(null===(u=e.data)||void 0===u?void 0:u.accessChannel)&&(t.accessChannel=null===(h=e.data)||void 0===h?void 0:h.accessChannel),e.isRetry?(n++,e.data.subrequestid="".concat(n)):(l.requestid="req_".concat(a.P6.getUniqueId(),"_").concat(T()),n=1),e.data.isLastApi){var p=E();e.data.requestElapse=p-o,e.data.requestMethod="",e.data.subrequestid="0",e.data.code=200===r?0:r,e.data.codeDesc=i}else e.data.requestName||(e.data.requestName=c);e.data.requestElapse||(e.data.requestElapse=E()-o),t.reportData.call(t,y.iB.API,A(A(A(A({},O),l),e.data),{accessChannel:t.accessChannel,operationType:_(c)})),e.isEndApi&&t.reportData.call(t,y.iB.API,A(A(A({},l),O),{isSuccess:e.data.isSuccess,isLastApi:1,subrequestid:"0",requestMethod:"",code:200===r?0:r,codeDesc:i,requestElapse:e.data.requestElapse,accessChannel:t.accessChannel,operationType:_(c)}))}},e.prototype.reportData=function(e,t){return n=this,i=function(){var n,r,i,o,s,c,l,d;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),n=E(),r=0,e!==y.iB.API?[3,2]:[4,(h=this.platform,new Promise((function(e){var t;h.platform||(h=a.P6.getEnvInfo());var n="";if(h.platform===a.iw.WEB){var r=navigator.connection;(null==r?void 0:r.type)?(null==r||r.type,n=v.td.WIFI):(null==r?void 0:r.effectiveType)&&(n=v.td[r.effectiveType.toLocaleUpperCase()]),e(n)}else h.platform===a.iw.NODE?(n=v.td.UNKNOWN,e(n)):null===(t=h.global)||void 0===t||t.getNetworkType({success:function(t){n=v.td[t.networkType.toLocaleUpperCase()],e(n)}})})))];case 1:r=u.sent(),u.label=2;case 2:return i=this.options,o=i.appkey,s=i.sdkServiceId,c=i.sdkProduct,l=A({lts:n,net:r,appkey:o,sdkServiceId:s,sdkProduct:c},t),this.isReportDt?R.send(e,l):this.isCollectDt&&this.eventQueue.push({eventId:e,dt:l}),[3,4];case 3:return d=u.sent(),console.warn(d),[3,4];case 4:return[2]}var h}))},new((r=void 0)||(r=Promise))((function(e,t){function o(e){try{a(i.next(e))}catch(e){t(e)}}function s(e){try{a(i.throw(e))}catch(e){t(e)}}function a(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(o,s)}a((i=i.apply(n,[])).next())}));var n,r,i},e}(),D=__nested_webpack_require_895763__(7288),k=__nested_webpack_require_895763__(7479),x=__nested_webpack_require_895763__(2856),L=__nested_webpack_require_895763__(9667),P=__nested_webpack_require_895763__(3770),j=__nested_webpack_require_895763__(1735),U=__nested_webpack_require_895763__(7384),F=__nested_webpack_require_895763__(70),z=__nested_webpack_require_895763__(8161),V=function(){return V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},V.apply(this,arguments)},B=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},G=a.P6.getEnvInfo(),H="web"===G.platform,W=function(){},Y={CLOSED:3,CLOSING:2,CONNECTING:0,OPEN:1},q=function(){function e(t){var n;if(this.name="connection",this.max_cache_length=100,this.isDebug=t.isDebug||!1,this.isReport=!1,this.isHttpDNS=void 0===t.isHttpDNS?H:t.isHttpDNS,this.heartBeatWait=t.heartBeatWait||3e4,this.autoReconnectNumMax=t.autoReconnectNumMax||5,this.refreshDNSIntervals=this.autoReconnectNumMax<5?this.autoReconnectNumMax:5,this.delivery=t.delivery||!1,this.dnsArr=["https://rs.easemob.com","https://rs.chat.agora.io","http://59.110.89.59","http://39.97.193.190","http://39.97.193.187"],this.dnsIndex=0,this.dnsTotal=this.dnsArr.length,this.restHosts=[],this.restTotal=0,this.restIndex=0,this.hostIndex=0,this.socketHost=[],this.hostTotal=0,this.times=1,this.autoReconnectNumTotal=0,this.domain="easemob.com",this.appKey=t.appKey,this.appName="",this.orgName="",this.token="",this.grantType="",this.apiUrl=t.apiUrl||"",this.url=t.url||"",this.https=t.https||"undefined"!=typeof window&&"https:"===(null===(n=window.location)||void 0===n?void 0:n.protocol),this.version="1.2.1",this.deviceId=t.deviceId||"webim",this.osType=16,this.useOwnUploadFun=t.useOwnUploadFun||!1,this.compressType=[0],this.encryptType=[0],this.clientResource="",this.expiresIn=0,this.expirationTime=0,this.logOut=!0,this.context={jid:{appKey:"",clientResource:"",domain:"easemob.com",name:""},userId:"",appKey:"",status:0,restTokenData:"",appName:"",orgName:"",root:{},accessToken:""},this._msgHash={},this._msgPromiseHash={},this._queues=[],this._load_msg_cache=[],this.unMSyncSendMsgMap=new Map,this.mr_cache={},this.closeInfo=null,this.reconnecting=!1,"string"!=typeof this.appKey||2!==this.appKey.split("#").length)throw Error("Illegal appKey: ".concat(this.appKey));var r=this.appKey.split("#");this.orgName=r[0],this.appName=r[1],this.listen=p.bind(this),this.mSync=this.usePlugin(l.Z),this.eventHandler=this.usePlugin(u),Object.assign(e.prototype,k),Object.assign(e.prototype,x),Object.assign(e.prototype,L),Object.assign(e.prototype,P),Object.assign(e.prototype,j),Object.assign(e.prototype,U),Object.assign(e.prototype,F),this.dataReport=new M({appkey:this.appKey,org:this.orgName,sdkVersion:this.version,deviceId:this.deviceId,isReport:this.isReport});var i=0,o=this;Object.defineProperty(a.P6,"ajaxUnconventionalErrorTimes",{set:function(e){0!==e&&(d.kg.debug("rest api request fail times: ".concat(e)),(i=e)%5==0&&this.isHttpDNS&&(d.kg.debug("refresh dns config when rest request fail."),te.call(o,"refresh",{},{})))},get:function(){return i}})}return e.prototype.usePlugin=function(e,t){if(!t)return new e(this);this[t]=new e(this)},e.prototype.listen=function(e){},e.prototype.addEventHandler=function(e,t){},e.prototype.removeEventHandler=function(e){},e.prototype.registerUser=function(e){var t=this;return new Promise((function(n,r){var i=t.dataReport.geOperateFun({uid:e.username,operationName:v.fI.REGISTER});if(t.isHttpDNS){t.dnsIndex=0;var o=V(V({},e),{user:e.username,pwd:e.password,promise:{resolve:n,reject:r}});te.call(t,"signup",o,{rpt:i})}else o=V(V({},e),{promise:{resolve:n,reject:r}}),K.call(t,o,{rpt:i})}))},e.prototype.open=function(e){var t=this;return d.kg.debug("open"),new Promise((function(n,r){if($.call(t,e)){e.accessToken&&(t.token=e.accessToken);var i=V(V({},e),{promise:{resolve:n,reject:r}}),o=t.dataReport.geOperateFun({uid:e.user,operationName:v.fI.LOGIN});t.isHttpDNS?te.call(t,"login",i,{rpt:o}):Q.call(t,i,{rpt:o})}}))},e.prototype.isOpened=function(){return this.sock&&this.sock.readyState===Y.OPEN||!1},e.prototype.close=function(){var e,t,n;this.logOut=!0,this.reconnecting=!1,this.context.status=c.E.STATUS_CLOSING,this.sock&&this.sock.close(),null===(e=this.unMSyncSendMsgMap)||void 0===e||e.clear(),this.stopHeartBeat(),this.rejectMessage(),this.rejectContactsOperate(),this.context.status=c.E.STATUS_CLOSED,this._load_msg_cache=[],this._queues=[],this._msgHash={},this.mr_cache={},this.token="",this.context.accessToken="",null===(n=null===(t=null==this?void 0:this._localCache)||void 0===t?void 0:t.getInstance())||void 0===n||n.close()},e.prototype.downloadAndParseCombineMessage=function(e){var t=this,n=e.url,r=e.secret;return new Promise((function(e,i){var o,s,l=a.P6.getEnvInfo(),u="web"!==l.platform&&"node"!==l.platform&&"quick_app"!==l.platform&&(null===(s=null===(o=l.global)||void 0===o?void 0:o.canIUse)||void 0===s?void 0:s.call(o,"getFileSystemManager")),h=function(n){var r=function(e){i({type:c.E.PARSE_FILE_ERROR,message:"Read file failed",data:e})},o=function(n){return r=t,s=function(){var t,r,o,s,l,h,p,f,m,g,y,v,_;return B(this,(function(E){switch(E.label){case 0:for(t=u?new Uint8Array(n.data):new Uint8Array(n.target.result),r=0,o=0,s=2,l=t.subarray(r,r+s),h=a.P6.Uint8ArrayToString(l),d.kg.debug("file header:",h),o+=s,p=0,f=2;f<t.length-1;f++)f%2==1&&(p^=t[f]);if(m=t.subarray(t.length-1,t.length),d.kg.debug("checkResult:",p,m[0]===p),m[0]!==p)return[2,i({type:c.E.PARSE_FILE_ERROR,message:"File verification failed"})];if("cm"!==h)return[3,7];E.label=1;case 1:E.trys.push([1,5,,6]),g=[],y=function(){var e,n,i,a;return B(this,(function(c){switch(c.label){case 0:return r+=s,o+=s=4,e=t.subarray(r,r+s),r+=s,s=e.reduce((function(t,n,r){return t+(n<<8*(e.length-r-1))}),0),o+=s,n=t.subarray(r,r+s),i=(i=v.root.lookup("easemob.pb.Meta")).decode(n),[4,z.Z.call(v,i,0,!0,!0)];case 1:return a=c.sent(),g.push(a),[2]}}))},v=this,E.label=2;case 2:return o<t.length-1?[5,y()]:[3,4];case 3:return E.sent(),[3,2];case 4:return[2,e(g)];case 5:return _=E.sent(),i({type:c.E.PARSE_FILE_ERROR,message:"Parse file failed",data:_}),[3,6];case 6:return[3,8];case 7:return[2,i({type:c.E.PARSE_FILE_ERROR,message:"File verification failed"})];case 8:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{a(s.next(e))}catch(e){t(e)}}function i(e){try{a(s.throw(e))}catch(e){t(e)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(n,i)}a((s=s.apply(r,[])).next())}));var r,o,s};if(u){var s=l.global.getFileSystemManager(),h=n.tempFilePath;s.readFile({filePath:h,success:o,fail:r})}else if(n instanceof Blob){var p=new FileReader;p.readAsArrayBuffer(n),p.onerror=r,p.onload=o}},p=function(e){i({type:c.E.WEBIM_DOWNLOADFILE_ERROR,message:"Download failed, please try again",data:e})};u?l.global.downloadFile({url:n,success:h,fail:p}):a.P6.download.call(t,{url:n,headers:{Accept:"application/json"},onFileDownloadComplete:h,onFileDownloadError:p,secret:r,accessToken:t.context.accessToken})}))},e.prototype.stopHeartBeat=function(){clearInterval(this.heartBeatID)},e.prototype.clear=function(){this.restTotal=0,this.restIndex=0,this.hostIndex=0,this.hostTotal=0},e.prototype.heartBeat=function(){},e.prototype.renewToken=function(e){var t=this;return this.isOpened()?this.getChatToken(e).then((function(e){var n=Date.now();return t.expirationTime=e.expire_timestamp,t.expiresIn=e.expire_timestamp-n,t.token=e.access_token,t.context.accessToken=e.access_token,t.clearTokenTimeout(),t.tokenExpireTimeCountDown(t.expiresIn),{status:!0,token:e.access_token,expire:e.expire_timestamp}})):Promise.reject({status:!1})},e.prototype.clearTokenTimeout=function(){d.kg.debug("clearTokenTimeout"),this.tokenWillExpireTimer&&clearTimeout(this.tokenWillExpireTimer),this.tokenExpiredTimer&&clearTimeout(this.tokenExpiredTimer)},e.prototype.tokenExpireTimeCountDown=function(e){var t=this;e>Math.pow(2,31)-1&&(e=Math.pow(2,31)-1),this.tokenWillExpireTimer=setTimeout((function(){var n;t.onTokenWillExpire&&t.onTokenWillExpire(),null===(n=t.eventHandler)||void 0===n||n.dispatch("onTokenWillExpire"),d.kg.info("onTokenWillExpire",e)}),e/2),this.tokenExpiredTimer=setTimeout((function(){var n;d.kg.info("onTokenExpired",e),t.onTokenExpired&&t.onTokenExpired(),null===(n=t.eventHandler)||void 0===n||n.dispatch("onTokenExpired"),t.close()}),e)},e.prototype.compareTokenExpireTime=function(e,t){var n,r=Number(t)-Number(e);d.kg.debug("compareTokenExpireTime",r),r<=this.expiresIn/2&&r>0?(this.onTokenWillExpire&&this.onTokenWillExpire(),null===(n=this.eventHandler)||void 0===n||n.dispatch("onTokenWillExpire"),d.kg.info("onTokenWillExpire",r)):r<=0&&(this.closeByTokenExpired(),d.kg.info("closeByTokenExpired",r))},e.prototype.closeByTokenExpired=function(){var e;d.kg.info("closed By TokenExpired"),this.onTokenExpired&&this.onTokenExpired(),null===(e=this.eventHandler)||void 0===e||e.dispatch("onTokenExpired"),this.close()},e.prototype.rejectMessage=function(){var e=this,t=Object.keys(this._msgHash);if(t.length>0){var n=s.Z.create({type:c.E.MESSAGE_WEBSOCKET_DISCONNECTED,message:"websocket disconnected"});t.forEach((function(t){var r,i,o;(null===(r=e.unMSyncSendMsgMap)||void 0===r?void 0:r.has(t))||(e._msgHash[t].reject instanceof Function&&e._msgHash[t].reject(n),null===(o=null===(i=e._localCache)||void 0===i?void 0:i.getInstance())||void 0===o||o.updateLocalMessage(t,{serverMsgId:t,status:D.r.FAIL}),e._msgHash[t].fail instanceof Function&&e._msgHash[t].fail(n),delete e._msgHash[t])}))}},e.prototype.rejectContactsOperate=function(){Array.from(y.Nl.values()).forEach((function(e){null==e||e.reject()})),y.Nl.clear()},e.prototype.resetConnState=function(){this.mSync.stopHeartBeat(),this.times=1,this.autoReconnectNumTotal=0,this.hostIndex=0},e.prototype.reconnect=function(){var e,t=this;this.sock.readyState!==Y.CONNECTING&&this.sock.readyState!==Y.OPEN&&(d.kg.info("reconnect: time",this.times),d.kg.info("reconnect sock.readyState: ",this.sock.readyState),!1===this.reconnecting&&(this.reconnecting=!0),null===(e=this.eventHandler)||void 0===e||e.dispatch("onReconnecting"),this.rejectMessage(),this.rejectContactsOperate(),this.isHttpDNS&&(this.hostIndex<this.socketHost.length-1?this.hostIndex++:this.hostIndex=this.socketHost.length-1),setTimeout((function(){t.sock.readyState!==Y.OPEN&&(d.kg.info("login sock.readyState: ",t.sock.readyState),t.sock.close(),Z.call(t,{access_token:t.context.accessToken}),t.times++)}),500*this.times),this.autoReconnectNumTotal++)},e.prototype.send=function(e){return Promise.resolve(null)},e._getSock=function(){},e}();function K(e,t){var n=this,r=t.rpt,i=t.isRetry,o=e.promise,l=this.apiUrl+"/"+this.orgName+"/"+this.appName+"/users",d={requestName:v.c.RESISTER,requestUrl:l},u=e.error||W;if(!this.orgName&&!this.appName){var h=s.Z.create({type:c.E.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR,message:"signup error"});u(h)}var p={headers:{"Content-type":"application/json"},url:l,dataType:"json",data:JSON.stringify({username:e.username,password:e.password,nickname:e.nickname||""}),success:function(t){e.success&&e.success(t);var n=V(V({},t),{type:c.E.REQUEST_SUCCESS});o.resolve&&o.resolve(n);var s=t.extraInfo,a=s.httpCode,l=s.elapse;r({isEndApi:!0,isRetry:i,data:V(V({},{requestElapse:l,isSuccess:1,code:a}),d)})},error:function(t){var s=t.extraInfo,a=s.elapse,c=s.httpCode,l=s.errDesc;return r({isRetry:i,data:V(V({},{requestElapse:a,isSuccess:0,code:c,codeDesc:l}),d)}),n.isHttpDNS&&n.restIndex+1<n.restTotal?(n.restIndex++,ne.call(n),K.call(n,e,{rpt:r,isRetry:i}),Promise.reject(t)):(r({data:{isLastApi:1,isSuccess:0}}),n.clear(),o.reject&&o.reject(t),u(t))}};return a.P6.ajax(p).catch((function(e){o.reject&&o.reject(e)}))}function Q(e,t){var n=this;if($.call(this,e)&&!this.isOpened()){var r=t.rpt,i=t.isRetry;ee.call(this,e),this.user=e.user;var o=e.promise,l=this.context.appName,u=this.context.orgName,h=this.apiUrl+"/"+u+"/"+l+"/token";if(e.agoraToken)this.grantType="agoraToken",this.getChatToken(e.agoraToken).then((function(t){d.kg.info("getChatToken result:",t),n.expirationTime=t.expire_timestamp,n.token=t.access_token,n.context.accessToken=t.access_token,n.context.restTokenData=t.access_token;var i=t.extraInfo,s=i.httpCode,a=i.elapse;o.resolve({accessToken:t.access_token,expireTimestamp:t.expire_timestamp});var c={requestName:v.c.LOGIN_BY_AGORA_TOKEN,requestUrl:h,requestElapse:a,isSuccess:1,code:s};r({data:c}),Z.call(n,V(V({},e),{access_token:t.access_token}),r)})).catch((function(e){var t,i=s.Z.create({type:c.E.WEBIM_CONNCTION_GETROSTER_ERROR,message:"get chat token fail",data:e});o.reject(i),n.onError&&n.onError(i),null===(t=n.eventHandler)||void 0===t||t.dispatch("onError",i);var a=e.extraInfo,l=a.elapse,d=a.httpCode,u=a.errDesc,p={requestName:v.c.LOGIN_BY_AGORA_TOKEN,requestUrl:h,requestElapse:l,isSuccess:0,code:d,codeDesc:u};r({data:p}),r({data:{isLastApi:1,isSuccess:0}})}));else if(e.accessToken)this.grantType="accessToken",this.token=e.accessToken,this.context.accessToken=e.accessToken,this.context.restTokenData=e.accessToken,o.resolve({accessToken:e.accessToken}),Z.call(this,e,r);else{this.grantType="password";var p={grant_type:"password",username:e.user,password:e.pwd,timestamp:+new Date},f=JSON.stringify(p),m={headers:{"Content-type":"application/json"},url:h,dataType:"json",data:f,success:function(t){"function"==typeof e.success&&e.success(t),n.token=t.access_token,n.context.restTokenData=t.access_token,n.context.accessToken=t.access_token,n.expiresIn=t.expires_in,n.clearTokenTimeout(),n.tokenExpireTimeCountDown(1e3*n.expiresIn),o.resolve({accessToken:t.access_token,duration:t.expires_in});var s=t.extraInfo,a=s.httpCode,c=s.elapse,l={requestName:v.c.LOGIN_BY_PWD,requestElapse:c,requestUrl:h,isSuccess:1,code:a};r({isRetry:i,data:l}),Z.call(n,t,r)}||W,error:function(t){var a,l=t.extraInfo,d=l.elapse,u=l.httpCode,p=l.errDesc,f={requestName:v.c.LOGIN_BY_PWD,requestElapse:d,requestUrl:h,isSuccess:0,code:u,codeDesc:p};if(r({isRetry:i,data:f}),n.isHttpDNS&&n.restIndex+1<n.restTotal)return n.restIndex++,ne.call(n),void Q.call(n,e,{rpt:r,isRetry:!0});r({data:{isLastApi:1,isSuccess:0}}),n.clear(),t.error&&t.error_description?(a=s.Z.create({type:c.E.WEBIM_CONNCTION_OPEN_USERGRID_ERROR,message:t.error_description,data:t}),n.onError&&n.onError(a)):(a=s.Z.create({type:c.E.WEBIM_CONNCTION_OPEN_ERROR,message:t.error_description,data:t}),n.onError&&n.onError(a)),"function"==typeof e.error&&e.error(a),o.reject(a)}||W,version:"4.2.0"};a.P6.ajax(m).catch((function(e){console.warn(e)}))}a.P6.listenNetwork(J.bind(this),X.bind(this))}}function J(){var e;d.kg.debug("online"),this.onOnline&&this.onOnline(),null===(e=this.eventHandler)||void 0===e||e.dispatch("onOnline"),this.sock&&1!==this.sock.readyState&&(d.kg.debug("sock.readyState:",this.sock.readyState),this.logOut||this.reconnecting||this.reconnect())}function X(){var e;d.kg.debug("offline"),this.onOffline&&this.onOffline(),null===(e=this.eventHandler)||void 0===e||e.dispatch("onOffline")}function Z(e,t){var n=this,r=this._getSock();this.sock=r;var i=function(){var e;d.kg.debug("websockt onOpen"),t&&t({data:{isLastApi:1,isSuccess:1,accessChannel:null===(e=n.socketHost[n.hostIndex])||void 0===e?void 0:e.channel}});var i=a.P6.flow([n.mSync.generateProvision,n.mSync.base64transform])();try{r.send(i)}catch(e){var o=s.Z.create({type:c.E.SDK_RUNTIME_ERROR,message:"send message error",data:e});n.onError&&n.onError(o)}},o=function(e){setTimeout((function(){var t,r,i,o,s,a,l,u,h,p,f,m;d.kg.debug("websocket onClose"),"zfb"!==G.platform&&"dd"!==G.platform||(n.sock.readyState=Y.CLOSED);var g=401===(null==e?void 0:e.code)||401===(null===(t=n.closeInfo)||void 0===t?void 0:t.code);if(n.logOut)n.clear(),n.resetConnState(),g&&(d.kg.debug("websocket provision error"),n.closeInfo=null),null===(i=null===(r=null==n?void 0:n._localCache)||void 0===r?void 0:r.getInstance())||void 0===i||i.close(),n.onClosed&&n.onClosed(),null===(o=n.eventHandler)||void 0===o||o.dispatch("onDisconnected");else if(g){d.kg.debug("websocket provision error");var y={type:c.E.WEBIM_CONNECTION_ERROR,message:"provision error",data:e};n.closeInfo=null,n.onError&&n.onError(y),null===(s=n.eventHandler)||void 0===s||s.dispatch("onError",y),null===(l=null===(a=null==n?void 0:n._localCache)||void 0===a?void 0:a.getInstance())||void 0===l||l.close(),n.onClosed&&n.onClosed(),null===(u=n.eventHandler)||void 0===u||u.dispatch("onDisconnected"),n.resetConnState()}else if(n.autoReconnectNumTotal<n.autoReconnectNumMax){n.reconnect();var v={type:c.E.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"};n.onError&&n.onError(v),n.autoReconnectNumTotal%n.refreshDNSIntervals==0&&"web"===G.platform&&n.isHttpDNS&&(d.kg.debug("refresh dns config when websocket close"),te.call(n,"refresh",{},{}))}else null===(h=n.unMSyncSendMsgMap)||void 0===h||h.clear(),n.rejectMessage(),v={type:c.E.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"},n.onError&&n.onError(v),null===(f=null===(p=null==n?void 0:n._localCache)||void 0===p?void 0:p.getInstance())||void 0===f||f.close(),n.onClosed&&n.onClosed(),null===(m=n.eventHandler)||void 0===m||m.dispatch("onDisconnected"),n.resetConnState(),n.reconnecting=!1,d.kg.debug("reconnect fail")}),0)},l=function(e){var t=n.mSync,r=t.decodeMSync,i=t.distributeMSync;a.P6.flow([r,i])(e)};"web"===G.platform?(r.onopen=i,r.onclose=o,r.onmessage=l):(r.onOpen(i),r.onMessage(l),r.onClose(o),"undefined"!=typeof window&&window.WebSocket||r.onError((function(e){var r,i,o,s,a;if(d.kg.debug("mini program sock on error",e),n.onError&&n.onError({type:c.E.WEBIM_CONNECTION_ERROR,message:"on socket error",data:e}),!n.logOut)if(n.autoReconnectNumTotal<n.autoReconnectNumMax)d.kg.debug("sock.onError reconnect",n.autoReconnectNumTotal,n.autoReconnectNumMax),n.reconnect(),n.autoReconnectNumTotal%n.refreshDNSIntervals==0&&"web"===G.platform&&n.isHttpDNS&&(d.kg.debug("refresh dns config when websocket error"),te.call(n,"refresh",{},{}));else{var l={type:c.E.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"};null===(r=n.unMSyncSendMsgMap)||void 0===r||r.clear(),n.rejectMessage(),n.onError&&n.onError(l),null===(o=null===(i=null==n?void 0:n._localCache)||void 0===i?void 0:i.getInstance())||void 0===o||o.close(),n.onClosed&&n.onClosed(),null===(s=n.eventHandler)||void 0===s||s.dispatch("onDisconnected"),n.resetConnState(),n.reconnecting=!1,d.kg.debug("reconnect fail")}t&&t({data:{isLastApi:1,isSuccess:0,accessChannel:null===(a=n.socketHost[n.hostIndex])||void 0===a?void 0:a.channel}})})))}function $(e){if(""===e.user){var t=s.Z.create({type:c.E.WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR,message:"the user cannot be empty"});return d.kg.debug("open params error",t),this.onError&&this.onError(t),!1}var n=this.appKey.split("#");return!(2!==n.length||!n[0]||!n[1])||(t=s.Z.create({type:c.E.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR,message:"the appKey is illegal"}),d.kg.debug("open params error",t),this.onError&&this.onError(t),!1)}function ee(e){this.context.jid={appKey:this.appKey,name:e.user,domain:this.domain,clientResource:this.clientResource};var t=this.appKey.split("#"),n=t[0],r=t[1];this.context.root=this.root,this.context.userId=e.user,this.context.appKey=this.appKey,this.context.appName=r,this.context.orgName=n}function te(e,t,n){var r=this,i=n.rpt,o=n.isRetry,s=this.dnsArr[this.dnsIndex]+"/easemob/server.json",c={url:s,dataType:"json",type:"GET",data:{app_key:encodeURIComponent(this.appKey)},success:function(n){var a=n.extraInfo,c=a.elapse,l=a.httpCode,u={requestUrl:s,requestName:v.c.GET_DNS,requestElapse:c,isSuccess:1,code:l};"true"===(null==n?void 0:n.enableDataReport)?(r.dataReport.setIsCollectDt(!0),r.dataReport.setIsReportDt(!0)):(r.dataReport.setIsReportDt(!1),r.dataReport.setIsCollectDt(!1)),i&&i({isRetry:o,data:u});var h=n.rest.hosts,p=r.https?"https":"http";if(d.kg.info("httpType: "+p),!h)return Promise.reject(!1);for(var f=h.filter((function(e){if(e.protocol===p)return e})),m=0;m<f.length;m++)if(f[m].protocol===p){var g=f[m];f.splice(m,1),f.unshift(g)}r.restHosts=f,r.restTotal=f.length;var y=n["msync-ws"].hosts;if(!y)return Promise.reject(!1);var _=y.filter((function(e){return e.protocol===p&&e}));r.socketHost=_,r.hostTotal=_.length,ne.call(r),"refresh"!==e&&("login"===e?Q.call(r,t,{rpt:i}):K.call(r,t,{rpt:i}))}||W,error:function(n){var a=n.extraInfo,c=a.elapse,l=a.httpCode,u=a.errDesc,h={requestUrl:s,requestName:v.c.GET_DNS,isSuccess:0,code:l,codeDesc:u,requestElapse:c};i&&i({isRetry:o,data:h}),d.kg.debug("getHttpDNS fail: "+r.dnsIndex),r.dnsIndex++,r.dnsIndex<r.dnsTotal&&te.call(r,e,t,{rpt:i,isRetry:!0})}||W};return a.P6.ajax(c).catch((function(e){console.warn(e)}))}function ne(){var e,t;if(this.restIndex>this.restTotal)return d.kg.debug("restIndex > restTotal"),"";var n="",r=this.restHosts[this.restIndex],i=r.domain,o=r.ip,s=r.port,a=this.https?"https:":"http:";return o&&"undefined"!=typeof window&&"http:"===(null===(e=null===window||void 0===window?void 0:window.location)||void 0===e?void 0:e.protocol)?n=a+"//"+o+":"+s:(n=a+"//"+i,s&&"80"!==s&&"443"!==s&&(n+=":".concat(s)),"undefined"==typeof window||window.location||(n="https://"+i),"undefined"!=typeof window&&window.location&&"file:"===(null===(t=window.location)||void 0===t?void 0:t.protocol)&&(n="https://"+i)),"undefined"==typeof window&&(n=a+"//"+i),this.apiUrl=n,n}var re=__nested_webpack_require_895763__(2449);r().util.Long=o(),r().configure();var ie=r().Root.fromJSON({nested:{easemob:{nested:{pb:{nested:{MessageBody:{fields:{type:{type:"Type",id:1},from:{type:"JID",id:2},to:{type:"JID",id:3},contents:{rule:"repeated",type:"Content",id:4},ext:{rule:"repeated",type:"KeyValue",id:5},ackMessageId:{type:"uint64",id:6},msgConfig:{type:"MessageConfig",id:7},ackContent:{type:"string",id:8},meta:{type:"string",id:9},editMessageId:{type:"uint64",id:11}},nested:{Content:{fields:{type:{type:"Type",id:1},text:{type:"string",id:2},latitude:{type:"double",id:3},longitude:{type:"double",id:4},address:{type:"string",id:5},displayName:{type:"string",id:6},remotePath:{type:"string",id:7},secretKey:{type:"string",id:8},fileLength:{type:"int32",id:9},action:{type:"string",id:10},params:{rule:"repeated",type:"KeyValue",id:11},duration:{type:"int32",id:12},size:{type:"Size",id:13},thumbnailRemotePath:{type:"string",id:14},thumbnailSecretKey:{type:"string",id:15},thumbnailDisplayName:{type:"string",id:16},thumbnailFileLength:{type:"int32",id:17},thumbnailSize:{type:"Size",id:18},customEvent:{type:"string",id:19},customExts:{rule:"repeated",type:"KeyValue",id:20},buildingName:{type:"string",id:21},subType:{type:"SubType",id:22},title:{type:"string",id:23},summary:{type:"string",id:24},combineLevel:{type:"int32",id:25}},nested:{Type:{values:{TEXT:0,IMAGE:1,VIDEO:2,LOCATION:3,VOICE:4,FILE:5,COMMAND:6,CUSTOM:7,COMBINE:8}},Size:{fields:{width:{type:"double",id:1},height:{type:"double",id:2}}},SubType:{values:{COMBINE:0}}}},Type:{values:{NORMAL:0,CHAT:1,GROUPCHAT:2,CHATROOM:3,READ_ACK:4,DELIVER_ACK:5,RECALL:6,CHANNEL_ACK:7,EDIT:8}},MessageConfig:{fields:{allowGroupAck:{type:"bool",id:1}}}}},KeyValue:{oneofs:{value:{oneof:["varintValue","floatValue","doubleValue","stringValue"]}},fields:{key:{type:"string",id:1},type:{type:"ValueType",id:2},varintValue:{type:"int64",id:3},floatValue:{type:"float",id:4},doubleValue:{type:"double",id:5},stringValue:{type:"string",id:6}},nested:{ValueType:{values:{BOOL:1,INT:2,UINT:3,LLINT:4,FLOAT:5,DOUBLE:6,STRING:7,JSON_STRING:8}}}},JID:{fields:{appKey:{type:"string",id:1},name:{type:"string",id:2},domain:{type:"string",id:3},clientResource:{type:"string",id:4}}},ConferenceBody:{fields:{sessionId:{type:"string",id:1},operation:{type:"Operation",id:2},conferenceId:{type:"string",id:3},type:{type:"Type",id:4},content:{type:"string",id:5},network:{type:"string",id:6},version:{type:"string",id:7},identity:{type:"Identity",id:8},duration:{type:"string",id:9},peerName:{type:"string",id:10},endReason:{type:"EndReason",id:11},status:{type:"Status",id:12},isDirect:{type:"bool",id:13},controlType:{type:"StreamControlType",id:14},routeFlag:{type:"int32",id:15},routeKey:{type:"string",id:16}},nested:{Status:{fields:{errorCode:{type:"int32",id:1}}},Operation:{values:{JOIN:0,INITIATE:1,ACCEPT_INITIATE:2,ANSWER:3,TERMINATE:4,REMOVE:5,STREAM_CONTROL:6,MEDIA_REQUEST:7}},Type:{values:{VOICE:0,VIDEO:1}},Identity:{values:{CALLER:0,CALLEE:1}},EndReason:{values:{HANGUP:0,NORESPONSE:1,REJECT:2,BUSY:3,FAIL:4,UNSUPPORTED:5,OFFLINE:6}},StreamControlType:{values:{PAUSE_VOICE:0,RESUME_VOICE:1,PAUSE_VIDEO:2,RESUME_VIDEO:3}}}},MSync:{fields:{version:{type:"Version",id:1,options:{default:"MSYNC_V1"}},guid:{type:"JID",id:2},auth:{type:"string",id:3},compressAlgorimth:{type:"uint32",id:4},crypto:{type:"uint32",id:5},userAgent:{type:"string",id:6},pov:{type:"uint64",id:7},command:{type:"Command",id:8},deviceId:{type:"uint32",id:10},encryptType:{rule:"repeated",type:"EncryptType",id:11,options:{packed:!1}},encryptKey:{type:"string",id:12},payload:{type:"bytes",id:9}},nested:{Version:{values:{MSYNC_V1:0,MSYNC_V2:1}},Command:{values:{SYNC:0,UNREAD:1,NOTICE:2,PROVISION:3}}}},EncryptType:{values:{ENCRYPT_NONE:0,ENCRYPT_AES_128_CBC:1,ENCRYPT_AES_256_CBC:2}},CommSyncUL:{fields:{meta:{type:"Meta",id:1},key:{type:"uint64",id:2},queue:{type:"JID",id:3},isRoam:{type:"bool",id:4},lastFullRoamKey:{type:"uint64",id:5}}},CommSyncDL:{fields:{status:{type:"Status",id:1},metaId:{type:"uint64",id:2},serverId:{type:"uint64",id:3},metas:{rule:"repeated",type:"Meta",id:4},nextKey:{type:"uint64",id:5},queue:{type:"JID",id:6},isLast:{type:"bool",id:7},timestamp:{type:"uint64",id:8},isRoam:{type:"bool",id:9}}},CommNotice:{fields:{queue:{type:"JID",id:1}}},CommUnreadUL:{fields:{}},CommUnreadDL:{fields:{status:{type:"Status",id:1},unread:{rule:"repeated",type:"MetaQueue",id:2},timestamp:{type:"uint64",id:3}}},MetaQueue:{fields:{queue:{type:"JID",id:1},n:{type:"uint32",id:2}}},Meta:{fields:{id:{type:"uint64",id:1},from:{type:"JID",id:2},to:{type:"JID",id:3},timestamp:{type:"uint64",id:4},ns:{type:"NameSpace",id:5},payload:{type:"bytes",id:6},routetype:{type:"RouteType",id:7},ext:{type:"KeyValue",id:8},meta:{type:"bytes",id:9},directedUsers:{rule:"repeated",type:"string",id:10}},nested:{NameSpace:{values:{STATISTIC:0,CHAT:1,MUC:2,ROSTER:3,CONFERENCE:4,NOTIFY:5,QUERY:6}},RouteType:{values:{ROUTE_ALL:0,ROUTE_ONLINE:1,ROUTE_DIRECT:2}}}},Status:{fields:{errorCode:{type:"ErrorCode",id:1},reason:{type:"string",id:2},redirectInfo:{rule:"repeated",type:"RedirectInfo",id:3}},nested:{ErrorCode:{values:{OK:0,FAIL:1,UNAUTHORIZED:2,MISSING_PARAMETER:3,WRONG_PARAMETER:4,REDIRECT:5,TOKEN_EXPIRED:6,PERMISSION_DENIED:7,NO_ROUTE:8,UNKNOWN_COMMAND:9,PB_PARSER_ERROR:10,BIND_ANOTHER_DEVICE:11,IM_FORBIDDEN:12,TOO_MANY_DEVICES:13,PLATFORM_LIMIT:14,USER_MUTED:15,ENCRYPT_DISABLE:16,ENCRYPT_ENABLE:17,DECRYPT_FAILURE:18,PERMISSION_DENIED_EXTERNAL:19}}}},RedirectInfo:{fields:{host:{type:"string",id:1},port:{type:"uint32",id:2}}},Provision:{fields:{osType:{type:"OsType",id:1},version:{type:"string",id:2},networkType:{type:"NetworkType",id:3},appSign:{type:"string",id:4},compressType:{rule:"repeated",type:"CompressType",id:5,options:{packed:!1}},encryptType:{rule:"repeated",type:"EncryptType",id:6,options:{packed:!1}},encryptKey:{type:"string",id:7},status:{type:"Status",id:8},deviceUuid:{type:"string",id:9},isManualLogin:{type:"bool",id:10},password:{type:"string",id:11},deviceName:{type:"string",id:12},resource:{type:"string",id:13},auth:{type:"string",id:14},serviceId:{type:"string",id:16},actionVersion:{type:"string",id:17}},nested:{OsType:{values:{OS_IOS:0,OS_ANDROID:1,OS_LINUX:2,OS_OSX:3,OS_WIN:4,OS_OTHER:16}},NetworkType:{values:{NETWORK_NONE:0,NETWORK_WIFI:1,NETWORK_4G:2,NETWORK_3G:3,NETWORK_2G:4,NETWORK_WIRE:5}},CompressType:{values:{COMPRESS_NONE:0,COMPRESS_ZLIB:1}}}},MUCBody:{fields:{mucId:{type:"JID",id:1},operation:{type:"Operation",id:2},from:{type:"JID",id:3},to:{rule:"repeated",type:"JID",id:4},setting:{type:"Setting",id:5},reason:{type:"string",id:6},isChatroom:{type:"bool",id:7},status:{type:"Status",id:8},isThread:{type:"bool",id:9},mucParentId:{type:"JID",id:10},mucName:{type:"string",id:11},eventInfo:{type:"EventInfo",id:12}},nested:{Operation:{values:{CREATE:0,DESTROY:1,JOIN:2,LEAVE:3,APPLY:4,APPLY_ACCEPT:5,APPLY_DECLINE:6,INVITE:7,INVITE_ACCEPT:8,INVITE_DECLINE:9,KICK:10,GET_BLACKLIST:11,BAN:12,ALLOW:13,UPDATE:14,BLOCK:15,UNBLOCK:16,PRESENCE:17,ABSENCE:18,DIRECT_JOINED:19,ASSIGN_OWNER:20,ADD_ADMIN:21,REMOVE_ADMIN:22,ADD_MUTE:23,REMOVE_MUTE:24,UPDATE_ANNOUNCEMENT:25,DELETE_ANNOUNCEMENT:26,UPLOAD_FILE:27,DELETE_FILE:28,ADD_USER_WHITE_LIST:29,REMOVE_USER_WHITE_LIST:30,BAN_GROUP:31,REMOVE_BAN_GROUP:32,THREAD_CREATE:33,THREAD_DESTROY:34,THREAD_JOIN:35,THREAD_LEAVE:36,THREAD_KICK:37,THREAD_UPDATE:38,THREAD_PRESENCE:39,THREAD_ABSENCE:40,DISABLE_GROUP:41,ABLE_GROUP:42,SET_METADATA:43,DELETE_METADATA:44,GROUP_MEMBER_METADATA_UPDATE:45}},Setting:{fields:{name:{type:"string",id:1},desc:{type:"string",id:2},type:{type:"Type",id:3},maxUsers:{type:"int32",id:4},owner:{type:"string",id:5}},nested:{Type:{values:{PRIVATE_OWNER_INVITE:0,PRIVATE_MEMBER_INVITE:1,PUBLIC_JOIN_APPROVAL:2,PUBLIC_JOIN_OPEN:3,PUBLIC_ANONYMOUS:4}}}},Status:{fields:{errorCode:{type:"ErrorCode",id:1},description:{type:"string",id:2}},nested:{ErrorCode:{values:{OK:0,PERMISSION_DENIED:1,WRONG_PARAMETER:2,MUC_NOT_EXIST:3,USER_NOT_EXIST:4,UNKNOWN:5}}}},EventInfo:{fields:{eventType:{type:"EventType",id:1,options:{default:"EVENT_NONE"}},ext:{type:"string",id:2}},nested:{EventType:{values:{EVENT_NONE:0,CIRCLE_CHANNEL:1}}}}}},RosterBody:{fields:{operation:{type:"Operation",id:1},status:{type:"Status",id:2},from:{type:"JID",id:3},to:{rule:"repeated",type:"JID",id:4},reason:{type:"string",id:5},rosterVer:{type:"string",id:6},biDirection:{type:"bool",id:7}},nested:{Operation:{values:{GET_ROSTER:0,GET_BLACKLIST:1,ADD:2,REMOVE:3,ACCEPT:4,DECLINE:5,BAN:6,ALLOW:7,REMOTE_ACCEPT:8,REMOTE_DECLINE:9}},Status:{fields:{errorCode:{type:"ErrorCode",id:1},description:{type:"string",id:2}},nested:{ErrorCode:{values:{OK:0,USER_NOT_EXIST:1,USER_ALREADY_FRIEND:2,USER_ALREADY_BLACKLIST:3}}}}}},StatisticsBody:{fields:{operation:{type:"Operation",id:1},os:{type:"OsType",id:2},version:{type:"string",id:3},network:{type:"NetworkType",id:4},imTime:{type:"uint32",id:5},chatTime:{type:"uint32",id:6},location:{type:"string",id:7}},nested:{Operation:{values:{INFORMATION:0,USER_REMOVED:1,USER_LOGIN_ANOTHER_DEVICE:2,USER_KICKED_BY_CHANGE_PASSWORD:3,USER_KICKED_BY_OTHER_DEVICE:4}},OsType:{values:{OS_IOS:0,OS_ANDROID:1,OS_LINUX:2,OS_OSX:3,OS_WIN:4,OS_OTHER:16}},NetworkType:{values:{NETWORK_NONE:0,NETWORK_WIFI:1,NETWORK_4G:2,NETWORK_3G:3,NETWORK_2G:4,NETWORK_WIRE:5}}}}}}}}}});q.prototype.root=ie;var oe=d.kg.getLogger("defaultLogger");oe.setConfig({useCache:!1,maxCache:3145728,color:"",background:""}),oe.enableAll(),q.prototype._getSock=function(){if(this.isHttpDNS){var e=this.socketHost[this.hostIndex];if(!e)throw this.times=1,this.autoReconnectNumTotal=0,this.hostIndex=0,this.onClosed&&this.onClosed(),new Error("No connected domain name when get websocket.");var n=e.domain,r=e.ip,i="",o=e.port;i=n||r,o&&"80"!==o&&"443"!==o&&(i+=":"+o),i&&(this.url="//"+i+"/ws");var s=this.https?"https:":"http:";this.url=s+this.url}return new(t())(this.url)},q.prototype.getUniqueId=a.P6.getUniqueId;var se={connection:q,message:re.Message,utils:a.P6,logger:oe,statusCode:c.E};"undefined"!=typeof window&&(window.WebIM=se);var ae=se}(),__nested_webpack_exports__}()},module.exports=t()},1635:function(e,t,n){e.exports=function(){"use strict";function e(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i=function(e){try{return!!e()}catch(e){return!0}},o=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),s=o,a=Function.prototype,c=a.call,l=s&&a.bind.bind(c,c),d=s?l:function(e){return function(){return c.apply(e,arguments)}},u=d({}.isPrototypeOf),h=function(e){return e&&e.Math==Math&&e},p=h("object"==typeof globalThis&&globalThis)||h("object"==typeof window&&window)||h("object"==typeof self&&self)||h("object"==typeof t&&t)||function(){return this}()||t||Function("return this")(),f=o,m=Function.prototype,g=m.apply,y=m.call,v="object"==typeof Reflect&&Reflect.apply||(f?y.bind(g):function(){return y.apply(g,arguments)}),_=d,E=_({}.toString),S=_("".slice),T=function(e){return S(E(e),8,-1)},b=T,I=d,N=function(e){if("Function"===b(e))return I(e)},C="object"==typeof document&&document.all,w={all:C,IS_HTMLDDA:void 0===C&&void 0!==C},R=w.all,A=w.IS_HTMLDDA?function(e){return"function"==typeof e||e===R}:function(e){return"function"==typeof e},O={},M=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),D=o,k=Function.prototype.call,x=D?k.bind(k):function(){return k.apply(k,arguments)},L={},P={}.propertyIsEnumerable,j=Object.getOwnPropertyDescriptor,U=j&&!P.call({1:2},1);L.f=U?function(e){var t=j(this,e);return!!t&&t.enumerable}:P;var F,z,V=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},B=i,G=T,H=Object,W=d("".split),Y=B((function(){return!H("z").propertyIsEnumerable(0)}))?function(e){return"String"==G(e)?W(e,""):H(e)}:H,q=function(e){return null==e},K=q,Q=TypeError,J=function(e){if(K(e))throw Q("Can't call method on "+e);return e},X=Y,Z=J,$=function(e){return X(Z(e))},ee=A,te=w.all,ne=w.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:ee(e)||e===te}:function(e){return"object"==typeof e?null!==e:ee(e)},re={},ie=re,oe=p,se=A,ae=function(e){return se(e)?e:void 0},ce=function(e,t){return arguments.length<2?ae(ie[e])||ae(oe[e]):ie[e]&&ie[e][t]||oe[e]&&oe[e][t]},le="undefined"!=typeof navigator&&String(navigator.userAgent)||"",de=p,ue=le,he=de.process,pe=de.Deno,fe=he&&he.versions||pe&&pe.version,me=fe&&fe.v8;me&&(z=(F=me.split("."))[0]>0&&F[0]<4?1:+(F[0]+F[1])),!z&&ue&&(!(F=ue.match(/Edge\/(\d+)/))||F[1]>=74)&&(F=ue.match(/Chrome\/(\d+)/))&&(z=+F[1]);var ge=z,ye=ge,ve=i,_e=p.String,Ee=!!Object.getOwnPropertySymbols&&!ve((function(){var e=Symbol();return!_e(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ye&&ye<41})),Se=Ee&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Te=ce,be=A,Ie=u,Ne=Object,Ce=Se?function(e){return"symbol"==typeof e}:function(e){var t=Te("Symbol");return be(t)&&Ie(t.prototype,Ne(e))},we=String,Re=function(e){try{return we(e)}catch(e){return"Object"}},Ae=A,Oe=Re,Me=TypeError,De=function(e){if(Ae(e))return e;throw Me(Oe(e)+" is not a function")},ke=De,xe=q,Le=function(e,t){var n=e[t];return xe(n)?void 0:ke(n)},Pe=x,je=A,Ue=ne,Fe=TypeError,ze={exports:{}},Ve=p,Be=Object.defineProperty,Ge=function(e,t){try{Be(Ve,e,{value:t,configurable:!0,writable:!0})}catch(r){Ve[e]=t}return t},He="__core-js_shared__",We=p[He]||Ge(He,{}),Ye=We;(ze.exports=function(e,t){return Ye[e]||(Ye[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.31.1",mode:"pure",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE",source:"https://github.com/zloirock/core-js"});var qe=ze.exports,Ke=J,Qe=Object,Je=function(e){return Qe(Ke(e))},Xe=Je,Ze=d({}.hasOwnProperty),$e=Object.hasOwn||function(e,t){return Ze(Xe(e),t)},et=d,tt=0,nt=Math.random(),rt=et(1..toString),it=function(e){return"Symbol("+(void 0===e?"":e)+")_"+rt(++tt+nt,36)},ot=qe,st=$e,at=it,ct=Ee,lt=Se,dt=p.Symbol,ut=ot("wks"),ht=lt?dt.for||dt:dt&&dt.withoutSetter||at,pt=function(e){return st(ut,e)||(ut[e]=ct&&st(dt,e)?dt[e]:ht("Symbol."+e)),ut[e]},ft=x,mt=ne,gt=Ce,yt=Le,vt=function(e,t){var n,r;if("string"===t&&je(n=e.toString)&&!Ue(r=Pe(n,e)))return r;if(je(n=e.valueOf)&&!Ue(r=Pe(n,e)))return r;if("string"!==t&&je(n=e.toString)&&!Ue(r=Pe(n,e)))return r;throw Fe("Can't convert object to primitive value")},_t=TypeError,Et=pt("toPrimitive"),St=function(e,t){if(!mt(e)||gt(e))return e;var n,r=yt(e,Et);if(r){if(void 0===t&&(t="default"),n=ft(r,e,t),!mt(n)||gt(n))return n;throw _t("Can't convert object to primitive value")}return void 0===t&&(t="number"),vt(e,t)},Tt=Ce,bt=function(e){var t=St(e,"string");return Tt(t)?t:t+""},It=ne,Nt=p.document,Ct=It(Nt)&&It(Nt.createElement),wt=function(e){return Ct?Nt.createElement(e):{}},Rt=wt,At=!M&&!i((function(){return 7!=Object.defineProperty(Rt("div"),"a",{get:function(){return 7}}).a})),Ot=M,Mt=x,Dt=L,kt=V,xt=$,Lt=bt,Pt=$e,jt=At,Ut=Object.getOwnPropertyDescriptor;O.f=Ot?Ut:function(e,t){if(e=xt(e),t=Lt(t),jt)try{return Ut(e,t)}catch(e){}if(Pt(e,t))return kt(!Mt(Dt.f,e,t),e[t])};var Ft=i,zt=A,Vt=/#|\.prototype\./,Bt=function(e,t){var n=Ht[Gt(e)];return n==Yt||n!=Wt&&(zt(t)?Ft(t):!!t)},Gt=Bt.normalize=function(e){return String(e).replace(Vt,".").toLowerCase()},Ht=Bt.data={},Wt=Bt.NATIVE="N",Yt=Bt.POLYFILL="P",qt=Bt,Kt=De,Qt=o,Jt=N(N.bind),Xt=function(e,t){return Kt(e),void 0===t?e:Qt?Jt(e,t):function(){return e.apply(t,arguments)}},Zt={},$t=M&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),en=ne,tn=String,nn=TypeError,rn=function(e){if(en(e))return e;throw nn(tn(e)+" is not an object")},on=M,sn=At,an=$t,cn=rn,ln=bt,dn=TypeError,un=Object.defineProperty,hn=Object.getOwnPropertyDescriptor,pn="enumerable",fn="configurable",mn="writable";Zt.f=on?an?function(e,t,n){if(cn(e),t=ln(t),cn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&mn in n&&!n[mn]){var r=hn(e,t);r&&r[mn]&&(e[t]=n.value,n={configurable:fn in n?n[fn]:r[fn],enumerable:pn in n?n[pn]:r[pn],writable:!1})}return un(e,t,n)}:un:function(e,t,n){if(cn(e),t=ln(t),cn(n),sn)try{return un(e,t,n)}catch(e){}if("get"in n||"set"in n)throw dn("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var gn=Zt,yn=V,vn=M?function(e,t,n){return gn.f(e,t,yn(1,n))}:function(e,t,n){return e[t]=n,e},_n=p,En=v,Sn=N,Tn=A,bn=O.f,In=qt,Nn=re,Cn=Xt,wn=vn,Rn=$e,An=function(e){var t=function(n,r,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,i)}return En(e,this,arguments)};return t.prototype=e.prototype,t},On=function(e,t){var n,r,i,o,s,a,c,l,d,u=e.target,h=e.global,p=e.stat,f=e.proto,m=h?_n:p?_n[u]:(_n[u]||{}).prototype,g=h?Nn:Nn[u]||wn(Nn,u,{})[u],y=g.prototype;for(o in t)r=!(n=In(h?o:u+(p?".":"#")+o,e.forced))&&m&&Rn(m,o),a=g[o],r&&(c=e.dontCallGetSet?(d=bn(m,o))&&d.value:m[o]),s=r&&c?c:t[o],r&&typeof a==typeof s||(l=e.bind&&r?Cn(s,_n):e.wrap&&r?An(s):f&&Tn(s)?Sn(s):s,(e.sham||s&&s.sham||a&&a.sham)&&wn(l,"sham",!0),wn(g,o,l),f&&(Rn(Nn,i=u+"Prototype")||wn(Nn,i,{}),wn(Nn[i],o,s),e.real&&y&&(n||!y[o])&&wn(y,o,s)))},Mn=Math.ceil,Dn=Math.floor,kn=Math.trunc||function(e){var t=+e;return(t>0?Dn:Mn)(t)},xn=function(e){var t=+e;return t!=t||0===t?0:kn(t)},Ln=xn,Pn=Math.max,jn=Math.min,Un=function(e,t){var n=Ln(e);return n<0?Pn(n+t,0):jn(n,t)},Fn=xn,zn=Math.min,Vn=function(e){return e>0?zn(Fn(e),9007199254740991):0},Bn=function(e){return Vn(e.length)},Gn=$,Hn=Un,Wn=Bn,Yn=function(e){return function(t,n,r){var i,o=Gn(t),s=Wn(o),a=Hn(r,s);if(e&&n!=n){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===n)return e||a||0;return!e&&-1}},qn={includes:Yn(!0),indexOf:Yn(!1)},Kn=qn.includes;On({target:"Array",proto:!0,forced:i((function(){return!Array(1).includes()}))},{includes:function(e){return Kn(this,e,arguments.length>1?arguments[1]:void 0)}});var Qn=re,Jn=function(e){return Qn[e+"Prototype"]},Xn=Jn("Array").includes,Zn=ne,$n=T,er=pt("match"),tr=function(e){var t;return Zn(e)&&(void 0!==(t=e[er])?!!t:"RegExp"==$n(e))},nr=TypeError,rr={};rr[pt("toStringTag")]="z";var ir="[object z]"===String(rr),or=ir,sr=A,ar=T,cr=pt("toStringTag"),lr=Object,dr="Arguments"==ar(function(){return arguments}()),ur=or?ar:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=lr(e),cr))?n:dr?ar(t):"Object"==(r=ar(t))&&sr(t.callee)?"Arguments":r},hr=ur,pr=String,fr=function(e){if("Symbol"===hr(e))throw TypeError("Cannot convert a Symbol value to a string");return pr(e)},mr=pt("match"),gr=On,yr=function(e){if(tr(e))throw nr("The method doesn't accept regular expressions");return e},vr=J,_r=fr,Er=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[mr]=!1,"/./"[e](t)}catch(e){}}return!1},Sr=d("".indexOf);gr({target:"String",proto:!0,forced:!Er("includes")},{includes:function(e){return!!~Sr(_r(vr(this)),_r(yr(e)),arguments.length>1?arguments[1]:void 0)}});var Tr=Jn("String").includes,br=u,Ir=Xn,Nr=Tr,Cr=Array.prototype,wr=String.prototype,Rr=r((function(e){var t=e.includes;return e===Cr||br(Cr,e)&&t===Cr.includes?Ir:"string"==typeof e||e===wr||br(wr,e)&&t===wr.includes?Nr:t}));let Ar=!0,Or=!0;function Mr(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function Dr(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);const o=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};const o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function kr(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Ar=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function xr(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Or=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Lr(){if("object"==typeof window){if(Ar)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function Pr(e,t){Or&&console.warn(e+" is deprecated, please use "+t+" instead.")}function jr(e){return"[object Object]"===Object.prototype.toString.call(e)}function Ur(e){return jr(e)?Object.keys(e).reduce((function(t,n){const r=jr(e[n]),i=r?Ur(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,{[n]:i})}),{}):e}function Fr(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((r=>{r.endsWith("Id")?Fr(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((t=>{Fr(e,e.get(t),n)}))})))}function zr(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const o=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((t=>{e.forEach((n=>{n.type===r&&n.trackId===t.id&&Fr(e,n,i)}))})),i}const Vr=Lr;function Br(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[i("min",n)]=r.ideal,t.optional.push(e),e={},e[i("max",n)]=r.ideal,t.optional.push(e)):(e[i("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const s=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||s)){let t;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?t=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{let s=(n=n.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!s&&n.length&&t.includes("back")&&(s=n[n.length-1]),s&&(e.video.deviceId=o.exact?{exact:s.deviceId}:{ideal:s.deviceId}),e.video=r(e.video),Vr("chrome: "+JSON.stringify(e)),i(e)}))}e.video=r(e.video)}return Vr("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{r&&r(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return i(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(o(e))))))}}}function Gr(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Hr(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})),t.stream.getTracks().forEach((n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Dr(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function Wr(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Yr(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const i=function(e){const t={};return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t[n.id]=n})),t},o=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const r=function(e){n(o(i(e)))};return t.apply(this,[r,e])}return new Promise(((e,n)=>{t.apply(this,[function(t){e(o(i(t)))},n])})).then(n,r)}}function qr(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>zr(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Dr(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>zr(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach((n=>{n.track===e&&(t?r=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?r=!0:n=t),t.track===e))),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Kr(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),i.apply(this,arguments)}}function Qr(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Kr(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const i=this._streams[n.id];if(i)i.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=o(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>o(this,e)))}};e.RTCPeerConnection.prototype[t]=r[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=a.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Jr(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}))}function Xr(e,t){Dr(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var Zr=Object.freeze({__proto__:null,fixNegotiationNeeded:Xr,shimAddTrackRemoveTrack:Qr,shimAddTrackRemoveTrackWithNative:Kr,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{const r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:Wr,shimGetStats:Yr,shimGetUserMedia:Br,shimMediaStream:Gr,shimOnTrack:Hr,shimPeerConnection:Jr,shimSenderReceiverGetStats:qr});function $r(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){Pr("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function ei(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ti(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,o]=arguments;return r.apply(this,[e||null]).then((e=>{if(t.version<53&&!i)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach(((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(i,o)}}function ni(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function ri(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Dr(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ii(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){Pr("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function oi(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function si(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const n=e.length>0;n&&e.forEach((e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return r})}function ai(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function ci(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function li(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var di=Object.freeze({__proto__:null,shimAddTransceiver:si,shimCreateAnswer:li,shimCreateOffer:ci,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})},shimGetParameters:ai,shimGetUserMedia:$r,shimOnTrack:ei,shimPeerConnection:ti,shimRTCDataChannel:oi,shimReceiverGetStats:ri,shimRemoveStream:ii,shimSenderGetStats:ni});function ui(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r&&r.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{n.includes(e.track)&&this.removeTrack(e)}))})}}function hi(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function pi(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};let a=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=a,a=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=a,a=function(e,t,n){const r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=a}function fi(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(mi(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function mi(e){return e&&void 0!==e.video?Object.assign({},e,{video:Ur(e.video)}):e}function gi(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(Pr("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function yi(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function vi(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function _i(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Ei=Object.freeze({__proto__:null,shimAudioContext:_i,shimCallbacksAPI:pi,shimConstraints:mi,shimCreateOfferLegacy:vi,shimGetUserMedia:fi,shimLocalStreamsAPI:ui,shimRTCIceServerUrls:gi,shimRemoteStreamsAPI:hi,shimTrackEventTransceiver:yi}),Si={exports:{}};!function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((e=>0===e.indexOf(n)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let n;const r=e.substring(e.indexOf(" ")+1).split(";");for(let i=0;i<r.length;i++)n=r[i].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const r=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substring(t+1,r),n.value=e.substring(r+1)):n.attribute=e.substring(t+1),n},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substring(12),password:i.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" ");n.profile=r[2];for(let o=3;o<r.length;o++){const i=r[o],s=t.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(s){const r=t.parseRtpMap(s),o=t.matchPrefix(e,"a=fmtp:"+i+" ");switch(r.parameters=o.length?t.parseFmtp(o[0]):{},r.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(t.parseRtcpFb),n.codecs.push(r),r.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(r.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((e=>{n.headerExtensions.push(t.parseExtmap(e))}));const i=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach((e=>{i.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),n},t.writeRtpDescription=function(e,n){let r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=n.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((e=>{r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));let i=0;return n.codecs.forEach((e=>{e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((e=>{r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){const n=[],r=t.parseRtpParameters(e),i=-1!==r.fecMechanisms.indexOf("RED"),o=-1!==r.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),a=s.length>0&&s[0].ssrc;let c;const l=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substring(17).split(" ").map((e=>parseInt(e,10)))));l.length>0&&l[0].length>1&&l[0][0]===a&&(c=l[0][1]),r.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&c&&(t.rtx={ssrc:c}),n.push(t),i&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:a,mechanism:o?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&a&&n.push({ssrc:a});let d=t.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substring(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substring(5),10)*.95-16e3:void 0,n.forEach((e=>{e.maxBitrate=d}))),n},t.parseRtcpParameters=function(e){const n={},r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);const i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;const o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const r=t.matchPrefix(e,"a=msid:");if(1===r.length)return n=r[0].substring(7).split(" "),{stream:n[0],track:n[1]};const i=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return i.length>0?(n=i[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");let i;r.length>0&&(i=parseInt(r[0].substring(19),10)),isNaN(i)&&(i=65536);const o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:n.fmt,maxMessageSize:i};const s=t.matchPrefix(e,"a=sctpmap:");if(s.length>0){const e=s[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:i}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,r){let i;const o=void 0!==n?n:2;return i=e||t.generateSessionId(),"v=0\r\no="+(r||"thisisadapterortc")+" "+i+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const r=t.splitLines(e);for(let t=0;t<r.length;t++)switch(r[t]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[t].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let t=0;t<n.length;t++)if(n[t].length<2||"="!==n[t].charAt(1))return!1;return!0},e.exports=t}(Si);var Ti=Si.exports,bi=r(Ti),Ii=e({__proto__:null,default:bi},[Ti]);function Ni(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=bi.parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Dr(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function Ci(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Dr(e,"icecandidate",(e=>{if(e.candidate){const t=bi.parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function wi(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(e){if(!e||!e.sdp)return!1;const t=bi.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=bi.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n},i=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=bi.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const e=r(arguments[0]),t=i(e),n=o(arguments[0],e);let s;s=0===t&&0===n?Number.POSITIVE_INFINITY:0===t||0===n?Math.max(t,n):Math.min(t,n);const a={};Object.defineProperty(a,"maxMessageSize",{get:()=>s}),this._sctp=a}return s.apply(this,arguments)}}function Ri(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},Dr(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function Ai(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function Oi(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function Mi(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Di(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}return e.sdp||"offer"!==e.type&&"answer"!==e.type?n.apply(this,[e]):("offer"===e.type?this.createOffer:this.createAnswer).apply(this).then((e=>n.apply(this,[e])))})}var ki=Object.freeze({__proto__:null,removeExtmapAllowMixed:Oi,shimAddIceCandidateNullOrEmpty:Mi,shimConnectionState:Ai,shimMaxMessageSize:wi,shimParameterlessSetLocalDescription:Di,shimRTCIceCandidate:Ni,shimRTCIceCandidateRelayProtocol:Ci,shimSendThrowTypeError:Ri});!function(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=Lr,r=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=Mr(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=Mr(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=Mr(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),i={browserDetails:r,commonShim:ki,extractVersion:Mr,disableLog:kr,disableWarnings:xr,sdp:Ii};switch(r.browser){case"chrome":if(!Zr||!Jr||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=Zr,Mi(e,r),Di(e),Br(e,r),Gr(e),Jr(e,r),Hr(e),Qr(e,r),Wr(e),Yr(e),qr(e),Xr(e,r),Ni(e),Ci(e),Ai(e),wi(e,r),Ri(e),Oi(e,r);break;case"firefox":if(!di||!ti||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=di,Mi(e,r),Di(e),$r(e,r),ti(e,r),ei(e),ii(e),ni(e),ri(e),oi(e),si(e),ai(e),ci(e),li(e),Ni(e),Ai(e),wi(e,r),Ri(e);break;case"safari":if(!Ei||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=Ei,Mi(e,r),Di(e),gi(e),vi(e),pi(e),ui(e),hi(e),yi(e),fi(e),_i(e),Ni(e),Ci(e),wi(e,r),Ri(e),Oi(e,r);break;default:n("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var xi={exports:{}},Li=On,Pi=M,ji=Zt.f;Li({target:"Object",stat:!0,forced:Object.defineProperty!==ji,sham:!Pi},{defineProperty:ji});var Ui=re.Object,Fi=xi.exports=function(e,t,n){return Ui.defineProperty(e,t,n)};Ui.defineProperty.sham&&(Fi.sham=!0);var zi=r(xi.exports),Vi=T,Bi=Array.isArray||function(e){return"Array"==Vi(e)},Gi=TypeError,Hi=bt,Wi=Zt,Yi=V,qi=function(e,t,n){var r=Hi(t);r in e?Wi.f(e,r,Yi(0,n)):e[r]=n},Ki=A,Qi=We,Ji=d(Function.toString);Ki(Qi.inspectSource)||(Qi.inspectSource=function(e){return Ji(e)});var Xi=Qi.inspectSource,Zi=d,$i=i,eo=A,to=ur,no=Xi,ro=function(){},io=[],oo=ce("Reflect","construct"),so=/^\s*(?:class|function)\b/,ao=Zi(so.exec),co=!so.exec(ro),lo=function(e){if(!eo(e))return!1;try{return oo(ro,io,e),!0}catch(e){return!1}},uo=function(e){if(!eo(e))return!1;switch(to(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return co||!!ao(so,no(e))}catch(e){return!0}};uo.sham=!0;var ho=!oo||$i((function(){var e;return lo(lo.call)||!lo(Object)||!lo((function(){e=!0}))||e}))?uo:lo,po=Bi,fo=ho,mo=ne,go=pt("species"),yo=Array,vo=function(e){var t;return po(e)&&(t=e.constructor,(fo(t)&&(t===yo||po(t.prototype))||mo(t)&&null===(t=t[go]))&&(t=void 0)),void 0===t?yo:t},_o=function(e,t){return new(vo(e))(0===t?0:t)},Eo=i,So=ge,To=pt("species"),bo=On,Io=i,No=Bi,Co=ne,wo=Je,Ro=Bn,Ao=function(e){if(e>9007199254740991)throw Gi("Maximum allowed index exceeded");return e},Oo=qi,Mo=_o,Do=function(e){return So>=51||!Eo((function(){var t=[];return(t.constructor={})[To]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},ko=ge,xo=pt("isConcatSpreadable"),Lo=ko>=51||!Io((function(){var e=[];return e[xo]=!1,e.concat()[0]!==e})),Po=function(e){if(!Co(e))return!1;var t=e[xo];return void 0!==t?!!t:No(e)};bo({target:"Array",proto:!0,arity:1,forced:!Lo||!Do("concat")},{concat:function(e){var t,n,r,i,o,s=wo(this),a=Mo(s,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(Po(o=-1===t?s:arguments[t]))for(i=Ro(o),Ao(c+i),n=0;n<i;n++,c++)n in o&&Oo(a,c,o[n]);else Ao(c+1),Oo(a,c++,o);return a.length=c,a}});var jo={},Uo={},Fo=$e,zo=$,Vo=qn.indexOf,Bo=Uo,Go=d([].push),Ho=function(e,t){var n,r=zo(e),i=0,o=[];for(n in r)!Fo(Bo,n)&&Fo(r,n)&&Go(o,n);for(;t.length>i;)Fo(r,n=t[i++])&&(~Vo(o,n)||Go(o,n));return o},Wo=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Yo=Ho,qo=Wo,Ko=Object.keys||function(e){return Yo(e,qo)},Qo=M,Jo=$t,Xo=Zt,Zo=rn,$o=$,es=Ko;jo.f=Qo&&!Jo?Object.defineProperties:function(e,t){Zo(e);for(var n,r=$o(t),i=es(t),o=i.length,s=0;o>s;)Xo.f(e,n=i[s++],r[n]);return e};var ts,ns=ce("document","documentElement"),rs=it,is=qe("keys"),os=function(e){return is[e]||(is[e]=rs(e))},ss=rn,as=jo,cs=Wo,ls=Uo,ds=ns,us=wt,hs="prototype",ps="script",fs=os("IE_PROTO"),ms=function(){},gs=function(e){return"<"+ps+">"+e+"</"+ps+">"},ys=function(e){e.write(gs("")),e.close();var t=e.parentWindow.Object;return e=null,t},vs=function(){try{ts=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;vs="undefined"!=typeof document?document.domain&&ts?ys(ts):(t=us("iframe"),n="java"+ps+":",t.style.display="none",ds.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(gs("document.F=Object")),e.close(),e.F):ys(ts);for(var r=cs.length;r--;)delete vs[hs][cs[r]];return vs()};ls[fs]=!0;var _s=Object.create||function(e,t){var n;return null!==e?(ms[hs]=ss(e),n=new ms,ms[hs]=null,n[fs]=e):n=vs(),void 0===t?n:as.f(n,t)},Es={},Ss=Ho,Ts=Wo.concat("length","prototype");Es.f=Object.getOwnPropertyNames||function(e){return Ss(e,Ts)};var bs={},Is=Un,Ns=Bn,Cs=qi,ws=Array,Rs=Math.max,As=function(e,t,n){for(var r=Ns(e),i=Is(t,r),o=Is(void 0===n?r:n,r),s=ws(Rs(o-i,0)),a=0;i<o;i++,a++)Cs(s,a,e[i]);return s.length=a,s},Os=T,Ms=$,Ds=Es.f,ks=As,xs="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];bs.f=function(e){return xs&&"Window"==Os(e)?function(e){try{return Ds(e)}catch(e){return ks(xs)}}(e):Ds(Ms(e))};var Ls={};Ls.f=Object.getOwnPropertySymbols;var Ps=vn,js=function(e,t,n,r){return r&&r.enumerable?e[t]=n:Ps(e,t,n),e},Us=Zt,Fs=function(e,t,n){return Us.f(e,t,n)},zs={},Vs=pt;zs.f=Vs;var Bs,Gs,Hs,Ws=re,Ys=$e,qs=zs,Ks=Zt.f,Qs=function(e){var t=Ws.Symbol||(Ws.Symbol={});Ys(t,e)||Ks(t,e,{value:qs.f(e)})},Js=x,Xs=ce,Zs=pt,$s=js,ea=function(){var e=Xs("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,r=Zs("toPrimitive");t&&!t[r]&&$s(t,r,(function(e){return Js(n,this)}),{arity:1})},ta=ur,na=ir?{}.toString:function(){return"[object "+ta(this)+"]"},ra=ir,ia=Zt.f,oa=vn,sa=$e,aa=na,ca=pt("toStringTag"),la=function(e,t,n,r){if(e){var i=n?e:e.prototype;sa(i,ca)||ia(i,ca,{configurable:!0,value:t}),r&&!ra&&oa(i,"toString",aa)}},da=A,ua=p.WeakMap,ha=da(ua)&&/native code/.test(String(ua)),pa=p,fa=ne,ma=vn,ga=$e,ya=We,va=os,_a=Uo,Ea="Object already initialized",Sa=pa.TypeError,Ta=pa.WeakMap;if(ha||ya.state){var ba=ya.state||(ya.state=new Ta);ba.get=ba.get,ba.has=ba.has,ba.set=ba.set,Bs=function(e,t){if(ba.has(e))throw Sa(Ea);return t.facade=e,ba.set(e,t),t},Gs=function(e){return ba.get(e)||{}},Hs=function(e){return ba.has(e)}}else{var Ia=va("state");_a[Ia]=!0,Bs=function(e,t){if(ga(e,Ia))throw Sa(Ea);return t.facade=e,ma(e,Ia,t),t},Gs=function(e){return ga(e,Ia)?e[Ia]:{}},Hs=function(e){return ga(e,Ia)}}var Na={set:Bs,get:Gs,has:Hs,enforce:function(e){return Hs(e)?Gs(e):Bs(e,{})},getterFor:function(e){return function(t){var n;if(!fa(t)||(n=Gs(t)).type!==e)throw Sa("Incompatible receiver, "+e+" required");return n}}},Ca=Xt,wa=Y,Ra=Je,Aa=Bn,Oa=_o,Ma=d([].push),Da=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,s=7==e,a=5==e||o;return function(c,l,d,u){for(var h,p,f=Ra(c),m=wa(f),g=Ca(l,d),y=Aa(m),v=0,_=u||Oa,E=t?_(c,y):n||s?_(c,0):void 0;y>v;v++)if((a||v in m)&&(p=g(h=m[v],v,f),e))if(t)E[v]=p;else if(p)switch(e){case 3:return!0;case 5:return h;case 6:return v;case 2:Ma(E,h)}else switch(e){case 4:return!1;case 7:Ma(E,h)}return o?-1:r||i?i:E}},ka={forEach:Da(0),map:Da(1),filter:Da(2),some:Da(3),every:Da(4),find:Da(5),findIndex:Da(6),filterReject:Da(7)},xa=On,La=p,Pa=x,ja=d,Ua=M,Fa=Ee,za=i,Va=$e,Ba=u,Ga=rn,Ha=$,Wa=bt,Ya=fr,qa=V,Ka=_s,Qa=Ko,Ja=Es,Xa=bs,Za=Ls,$a=O,ec=Zt,tc=jo,nc=L,rc=js,ic=Fs,oc=qe,sc=Uo,ac=it,cc=pt,lc=zs,dc=Qs,uc=ea,hc=la,pc=Na,fc=ka.forEach,mc=os("hidden"),gc="Symbol",yc="prototype",vc=pc.set,_c=pc.getterFor(gc),Ec=Object[yc],Sc=La.Symbol,Tc=Sc&&Sc[yc],bc=La.TypeError,Ic=La.QObject,Nc=$a.f,Cc=ec.f,wc=Xa.f,Rc=nc.f,Ac=ja([].push),Oc=oc("symbols"),Mc=oc("op-symbols"),Dc=oc("wks"),kc=!Ic||!Ic[yc]||!Ic[yc].findChild,xc=Ua&&za((function(){return 7!=Ka(Cc({},"a",{get:function(){return Cc(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=Nc(Ec,t);r&&delete Ec[t],Cc(e,t,n),r&&e!==Ec&&Cc(Ec,t,r)}:Cc,Lc=function(e,t){var n=Oc[e]=Ka(Tc);return vc(n,{type:gc,tag:e,description:t}),Ua||(n.description=t),n},Pc=function(e,t,n){e===Ec&&Pc(Mc,t,n),Ga(e);var r=Wa(t);return Ga(n),Va(Oc,r)?(n.enumerable?(Va(e,mc)&&e[mc][r]&&(e[mc][r]=!1),n=Ka(n,{enumerable:qa(0,!1)})):(Va(e,mc)||Cc(e,mc,qa(1,{})),e[mc][r]=!0),xc(e,r,n)):Cc(e,r,n)},jc=function(e,t){Ga(e);var n=Ha(t),r=Qa(n).concat(Vc(n));return fc(r,(function(t){Ua&&!Pa(Uc,n,t)||Pc(e,t,n[t])})),e},Uc=function(e){var t=Wa(e),n=Pa(Rc,this,t);return!(this===Ec&&Va(Oc,t)&&!Va(Mc,t))&&(!(n||!Va(this,t)||!Va(Oc,t)||Va(this,mc)&&this[mc][t])||n)},Fc=function(e,t){var n=Ha(e),r=Wa(t);if(n!==Ec||!Va(Oc,r)||Va(Mc,r)){var i=Nc(n,r);return!i||!Va(Oc,r)||Va(n,mc)&&n[mc][r]||(i.enumerable=!0),i}},zc=function(e){var t=wc(Ha(e)),n=[];return fc(t,(function(e){Va(Oc,e)||Va(sc,e)||Ac(n,e)})),n},Vc=function(e){var t=e===Ec,n=wc(t?Mc:Ha(e)),r=[];return fc(n,(function(e){!Va(Oc,e)||t&&!Va(Ec,e)||Ac(r,Oc[e])})),r};Fa||(Sc=function(){if(Ba(Tc,this))throw bc("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?Ya(arguments[0]):void 0,t=ac(e),n=function(e){this===Ec&&Pa(n,Mc,e),Va(this,mc)&&Va(this[mc],t)&&(this[mc][t]=!1),xc(this,t,qa(1,e))};return Ua&&kc&&xc(Ec,t,{configurable:!0,set:n}),Lc(t,e)},rc(Tc=Sc[yc],"toString",(function(){return _c(this).tag})),rc(Sc,"withoutSetter",(function(e){return Lc(ac(e),e)})),nc.f=Uc,ec.f=Pc,tc.f=jc,$a.f=Fc,Ja.f=Xa.f=zc,Za.f=Vc,lc.f=function(e){return Lc(cc(e),e)},Ua&&ic(Tc,"description",{configurable:!0,get:function(){return _c(this).description}})),xa({global:!0,constructor:!0,wrap:!0,forced:!Fa,sham:!Fa},{Symbol:Sc}),fc(Qa(Dc),(function(e){dc(e)})),xa({target:gc,stat:!0,forced:!Fa},{useSetter:function(){kc=!0},useSimple:function(){kc=!1}}),xa({target:"Object",stat:!0,forced:!Fa,sham:!Ua},{create:function(e,t){return void 0===t?Ka(e):jc(Ka(e),t)},defineProperty:Pc,defineProperties:jc,getOwnPropertyDescriptor:Fc}),xa({target:"Object",stat:!0,forced:!Fa},{getOwnPropertyNames:zc}),uc(),hc(Sc,gc),sc[mc]=!0;var Bc=Ee&&!!Symbol.for&&!!Symbol.keyFor,Gc=On,Hc=ce,Wc=$e,Yc=fr,qc=qe,Kc=Bc,Qc=qc("string-to-symbol-registry"),Jc=qc("symbol-to-string-registry");Gc({target:"Symbol",stat:!0,forced:!Kc},{for:function(e){var t=Yc(e);if(Wc(Qc,t))return Qc[t];var n=Hc("Symbol")(t);return Qc[t]=n,Jc[n]=t,n}});var Xc=On,Zc=$e,$c=Ce,el=Re,tl=Bc,nl=qe("symbol-to-string-registry");Xc({target:"Symbol",stat:!0,forced:!tl},{keyFor:function(e){if(!$c(e))throw TypeError(el(e)+" is not a symbol");if(Zc(nl,e))return nl[e]}});var rl=d([].slice),il=Bi,ol=A,sl=T,al=fr,cl=d([].push),ll=On,dl=ce,ul=v,hl=x,pl=d,fl=i,ml=A,gl=Ce,yl=rl,vl=function(e){if(ol(e))return e;if(il(e)){for(var t=e.length,n=[],r=0;r<t;r++){var i=e[r];"string"==typeof i?cl(n,i):"number"!=typeof i&&"Number"!=sl(i)&&"String"!=sl(i)||cl(n,al(i))}var o=n.length,s=!0;return function(e,t){if(s)return s=!1,t;if(il(this))return t;for(var r=0;r<o;r++)if(n[r]===e)return t}}},_l=Ee,El=String,Sl=dl("JSON","stringify"),Tl=pl(/./.exec),bl=pl("".charAt),Il=pl("".charCodeAt),Nl=pl("".replace),Cl=pl(1..toString),wl=/[\uD800-\uDFFF]/g,Rl=/^[\uD800-\uDBFF]$/,Al=/^[\uDC00-\uDFFF]$/,Ol=!_l||fl((function(){var e=dl("Symbol")();return"[null]"!=Sl([e])||"{}"!=Sl({a:e})||"{}"!=Sl(Object(e))})),Ml=fl((function(){return'"\\udf06\\ud834"'!==Sl("\udf06\ud834")||'"\\udead"'!==Sl("\udead")})),Dl=function(e,t){var n=yl(arguments),r=vl(t);if(ml(r)||void 0!==e&&!gl(e))return n[1]=function(e,t){if(ml(r)&&(t=hl(r,this,El(e),t)),!gl(t))return t},ul(Sl,null,n)},kl=function(e,t,n){var r=bl(n,t-1),i=bl(n,t+1);return Tl(Rl,e)&&!Tl(Al,i)||Tl(Al,e)&&!Tl(Rl,r)?"\\u"+Cl(Il(e,0),16):e};Sl&&ll({target:"JSON",stat:!0,arity:3,forced:Ol||Ml},{stringify:function(e,t,n){var r=yl(arguments),i=ul(Ol?Dl:Sl,null,r);return Ml&&"string"==typeof i?Nl(i,wl,kl):i}});var xl=Ls,Ll=Je;On({target:"Object",stat:!0,forced:!Ee||i((function(){xl.f(1)}))},{getOwnPropertySymbols:function(e){var t=xl.f;return t?t(Ll(e)):[]}}),Qs("asyncIterator"),Qs("hasInstance"),Qs("isConcatSpreadable"),Qs("iterator"),Qs("match"),Qs("matchAll"),Qs("replace"),Qs("search"),Qs("species"),Qs("split");var Pl=ea;Qs("toPrimitive"),Pl();var jl=ce,Ul=la;Qs("toStringTag"),Ul(jl("Symbol"),"Symbol"),Qs("unscopables"),la(p.JSON,"JSON",!0);var Fl,zl,Vl,Bl=re.Symbol,Gl={},Hl=M,Wl=$e,Yl=Function.prototype,ql=Hl&&Object.getOwnPropertyDescriptor,Kl=Wl(Yl,"name"),Ql={EXISTS:Kl,PROPER:Kl&&"something"===function(){}.name,CONFIGURABLE:Kl&&(!Hl||Hl&&ql(Yl,"name").configurable)},Jl=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Xl=$e,Zl=A,$l=Je,ed=Jl,td=os("IE_PROTO"),nd=Object,rd=nd.prototype,id=ed?nd.getPrototypeOf:function(e){var t=$l(e);if(Xl(t,td))return t[td];var n=t.constructor;return Zl(n)&&t instanceof n?n.prototype:t instanceof nd?rd:null},od=i,sd=A,ad=ne,cd=_s,ld=id,dd=js,ud=pt("iterator"),hd=!1;[].keys&&("next"in(Vl=[].keys())?(zl=ld(ld(Vl)))!==Object.prototype&&(Fl=zl):hd=!0);var pd=!ad(Fl)||od((function(){var e={};return Fl[ud].call(e)!==e}));sd((Fl=pd?{}:cd(Fl))[ud])||dd(Fl,ud,(function(){return this}));var fd={IteratorPrototype:Fl,BUGGY_SAFARI_ITERATORS:hd},md=fd.IteratorPrototype,gd=_s,yd=V,vd=la,_d=Gl,Ed=function(){return this},Sd=function(e,t,n,r){var i=t+" Iterator";return e.prototype=gd(md,{next:yd(+!r,n)}),vd(e,i,!1,!0),_d[i]=Ed,e},Td=d,bd=De,Id=A,Nd=String,Cd=TypeError,wd=function(e,t,n){try{return Td(bd(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}},Rd=rn,Ad=function(e){if("object"==typeof e||Id(e))return e;throw Cd("Can't set "+Nd(e)+" as a prototype")},Od=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=wd(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Rd(n),Ad(r),t?e(n,r):n.__proto__=r,n}}():void 0),Md=On,Dd=x,kd=Sd,xd=id,Ld=la,Pd=js,jd=Gl,Ud=fd,Fd=Ql.PROPER,zd=Ud.BUGGY_SAFARI_ITERATORS,Vd=pt("iterator"),Bd="keys",Gd="values",Hd="entries",Wd=function(){return this},Yd=function(e,t,n,r,i,o,s){kd(n,t,r);var a,c,l,d=function(e){if(e===i&&m)return m;if(!zd&&e in p)return p[e];switch(e){case Bd:case Gd:case Hd:return function(){return new n(this,e)}}return function(){return new n(this)}},u=t+" Iterator",h=!1,p=e.prototype,f=p[Vd]||p["@@iterator"]||i&&p[i],m=!zd&&f||d(i),g="Array"==t&&p.entries||f;if(g&&(a=xd(g.call(new e)))!==Object.prototype&&a.next&&(Ld(a,u,!0,!0),jd[u]=Wd),Fd&&i==Gd&&f&&f.name!==Gd&&(h=!0,m=function(){return Dd(f,this)}),i)if(c={values:d(Gd),keys:o?m:d(Bd),entries:d(Hd)},s)for(l in c)(zd||h||!(l in p))&&Pd(p,l,c[l]);else Md({target:t,proto:!0,forced:zd||h},c);return s&&p[Vd]!==m&&Pd(p,Vd,m,{name:i}),jd[t]=m,c},qd=function(e,t){return{value:e,done:t}},Kd=$,Qd=Gl,Jd=Na;Zt.f;var Xd=Yd,Zd=qd,$d="Array Iterator",eu=Jd.set,tu=Jd.getterFor($d);Xd(Array,"Array",(function(e,t){eu(this,{type:$d,target:Kd(e),index:0,kind:t})}),(function(){var e=tu(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,Zd(void 0,!0)):Zd("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)}),"values"),Qd.Arguments=Qd.Array;var nu={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},ru=p,iu=ur,ou=vn,su=Gl,au=pt("toStringTag");for(var cu in nu){var lu=ru[cu],du=lu&&lu.prototype;du&&iu(du)!==au&&ou(du,au,cu),su[cu]=su.Array}var uu=Bl,hu=pt,pu=Zt.f,fu=hu("metadata"),mu=Function.prototype;void 0===mu[fu]&&pu(mu,fu,{value:null}),Qs("dispose"),Qs("metadata");var gu=uu;Qs("asyncDispose");var yu=d,vu=ce("Symbol"),_u=vu.keyFor,Eu=yu(vu.prototype.valueOf),Su=vu.isRegisteredSymbol||function(e){try{return void 0!==_u(Eu(e))}catch(e){return!1}};On({target:"Symbol",stat:!0},{isRegisteredSymbol:Su});for(var Tu=qe,bu=ce,Iu=d,Nu=Ce,Cu=pt,wu=bu("Symbol"),Ru=wu.isWellKnownSymbol,Au=bu("Object","getOwnPropertyNames"),Ou=Iu(wu.prototype.valueOf),Mu=Tu("wks"),Du=0,ku=Au(wu),xu=ku.length;Du<xu;Du++)try{var Lu=ku[Du];Nu(wu[Lu])&&Cu(Lu)}catch(e){}var Pu=function(e){if(Ru&&Ru(e))return!0;try{for(var t=Ou(e),n=0,r=Au(Mu),i=r.length;n<i;n++)if(Mu[r[n]]==t)return!0}catch(e){}return!1};On({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:Pu}),Qs("matcher"),Qs("observable"),On({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:Su}),On({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:Pu}),Qs("metadataKey"),Qs("patternMatch"),Qs("replaceAll");var ju=r(gu),Uu=d,Fu=xn,zu=fr,Vu=J,Bu=Uu("".charAt),Gu=Uu("".charCodeAt),Hu=Uu("".slice),Wu=function(e){return function(t,n){var r,i,o=zu(Vu(t)),s=Fu(n),a=o.length;return s<0||s>=a?e?"":void 0:(r=Gu(o,s))<55296||r>56319||s+1===a||(i=Gu(o,s+1))<56320||i>57343?e?Bu(o,s):r:e?Hu(o,s,s+2):i-56320+(r-55296<<10)+65536}},Yu={codeAt:Wu(!1),charAt:Wu(!0)},qu=Yu.charAt,Ku=fr,Qu=Na,Ju=Yd,Xu=qd,Zu="String Iterator",$u=Qu.set,eh=Qu.getterFor(Zu);Ju(String,"String",(function(e){$u(this,{type:Zu,string:Ku(e),index:0})}),(function(){var e,t=eh(this),n=t.string,r=t.index;return r>=n.length?Xu(void 0,!0):(e=qu(n,r),t.index+=e.length,Xu(e,!1))}));var th=r(zs.f("iterator"));function nh(e){return nh="function"==typeof ju&&"symbol"==typeof th?function(e){return typeof e}:function(e){return e&&"function"==typeof ju&&e.constructor===ju&&e!==ju.prototype?"symbol":typeof e},nh(e)}var rh=r(zs.f("toPrimitive"));function ih(e){var t=function(e,t){if("object"!==nh(e)||null===e)return e;var n=e[rh];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==nh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===nh(t)?t:String(t)}function oh(e,t,n){return(t=ih(t))in e?zi(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sh=Jn("Array").keys,ah=ur,ch=$e,lh=u,dh=sh,uh=Array.prototype,hh={DOMTokenList:!0,NodeList:!0},ph=r((function(e){var t=e.keys;return e===uh||lh(uh,e)&&t===uh.keys||ch(hh,ah(e))?dh:t})),fh=Re,mh=TypeError,gh=As,yh=Math.floor,vh=function(e,t){var n=e.length,r=yh(n/2);return n<8?_h(e,t):Eh(e,vh(gh(e,0,r),t),vh(gh(e,r),t),t)},_h=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},Eh=function(e,t,n,r){for(var i=t.length,o=n.length,s=0,a=0;s<i||a<o;)e[s+a]=s<i&&a<o?r(t[s],n[a])<=0?t[s++]:n[a++]:s<i?t[s++]:n[a++];return e},Sh=vh,Th=i,bh=function(e,t){var n=[][e];return!!n&&Th((function(){n.call(null,t||function(){return 1},1)}))},Ih=le.match(/firefox\/(\d+)/i),Nh=!!Ih&&+Ih[1],Ch=/MSIE|Trident/.test(le),wh=le.match(/AppleWebKit\/(\d+)\./),Rh=!!wh&&+wh[1],Ah=On,Oh=d,Mh=De,Dh=Je,kh=Bn,xh=function(e,t){if(!delete e[t])throw mh("Cannot delete property "+fh(t)+" of "+fh(e))},Lh=fr,Ph=i,jh=Sh,Uh=bh,Fh=Nh,zh=Ch,Vh=ge,Bh=Rh,Gh=[],Hh=Oh(Gh.sort),Wh=Oh(Gh.push),Yh=Ph((function(){Gh.sort(void 0)})),qh=Ph((function(){Gh.sort(null)})),Kh=Uh("sort"),Qh=!Ph((function(){if(Vh)return Vh<70;if(!(Fh&&Fh>3)){if(zh)return!0;if(Bh)return Bh<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)Gh.push({k:t+r,v:n})}for(Gh.sort((function(e,t){return t.v-e.v})),r=0;r<Gh.length;r++)t=Gh[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));Ah({target:"Array",proto:!0,forced:Yh||!qh||!Kh||!Qh},{sort:function(e){void 0!==e&&Mh(e);var t=Dh(this);if(Qh)return void 0===e?Hh(t):Hh(t,e);var n,r,i=[],o=kh(t);for(r=0;r<o;r++)r in t&&Wh(i,t[r]);for(jh(i,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:Lh(t)>Lh(n)?1:-1}}(e)),n=kh(i),r=0;r<n;)t[r]=i[r++];for(;r<o;)xh(t,r++);return t}});var Jh=Jn("Array").sort,Xh=u,Zh=Jh,$h=Array.prototype,ep=r((function(e){var t=e.sort;return e===$h||Xh($h,e)&&t===$h.sort?Zh:t})),tp=ce,np=Es,rp=Ls,ip=rn,op=d([].concat),sp=tp("Reflect","ownKeys")||function(e){var t=np.f(ip(e)),n=rp.f;return n?op(t,n(e)):t},ap=$e,cp=sp,lp=O,dp=Zt,up=ne,hp=vn,pp=Error,fp=d("".replace),mp=String(pp("zxcasd").stack),gp=/\n\s*at [^:]*:[^\n]*/,yp=gp.test(mp),vp=V,_p=!i((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",vp(1,7)),7!==e.stack)})),Ep=vn,Sp=function(e,t){if(yp&&"string"==typeof e&&!pp.prepareStackTrace)for(;t--;)e=fp(e,gp,"");return e},Tp=_p,bp=Error.captureStackTrace,Ip=Gl,Np=pt("iterator"),Cp=Array.prototype,wp=function(e){return void 0!==e&&(Ip.Array===e||Cp[Np]===e)},Rp=ur,Ap=Le,Op=q,Mp=Gl,Dp=pt("iterator"),kp=function(e){if(!Op(e))return Ap(e,Dp)||Ap(e,"@@iterator")||Mp[Rp(e)]},xp=x,Lp=De,Pp=rn,jp=Re,Up=kp,Fp=TypeError,zp=function(e,t){var n=arguments.length<2?Up(e):t;if(Lp(n))return Pp(xp(n,e));throw Fp(jp(e)+" is not iterable")},Vp=x,Bp=rn,Gp=Le,Hp=function(e,t,n){var r,i;Bp(e);try{if(!(r=Gp(e,"return"))){if("throw"===t)throw n;return n}r=Vp(r,e)}catch(e){i=!0,r=e}if("throw"===t)throw n;if(i)throw r;return Bp(r),n},Wp=Xt,Yp=x,qp=rn,Kp=Re,Qp=wp,Jp=Bn,Xp=u,Zp=zp,$p=kp,ef=Hp,tf=TypeError,nf=function(e,t){this.stopped=e,this.result=t},rf=nf.prototype,of=function(e,t,n){var r,i,o,s,a,c,l,d=n&&n.that,u=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_RECORD),p=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),m=Wp(t,d),g=function(e){return r&&ef(r,"normal",e),new nf(!0,e)},y=function(e){return u?(qp(e),f?m(e[0],e[1],g):m(e[0],e[1])):f?m(e,g):m(e)};if(h)r=e.iterator;else if(p)r=e;else{if(!(i=$p(e)))throw tf(Kp(e)+" is not iterable");if(Qp(i)){for(o=0,s=Jp(e);s>o;o++)if((a=y(e[o]))&&Xp(rf,a))return a;return new nf(!1)}r=Zp(e,i)}for(c=h?e.next:r.next;!(l=Yp(c,r)).done;){try{a=y(l.value)}catch(e){ef(r,"throw",e)}if("object"==typeof a&&a&&Xp(rf,a))return a}return new nf(!1)},sf=fr,af=On,cf=u,lf=id,df=Od,uf=function(e,t,n){for(var r=cp(t),i=dp.f,o=lp.f,s=0;s<r.length;s++){var a=r[s];ap(e,a)||n&&ap(n,a)||i(e,a,o(t,a))}},hf=_s,pf=vn,ff=V,mf=function(e,t){up(t)&&"cause"in t&&hp(e,"cause",t.cause)},gf=function(e,t,n,r){Tp&&(bp?bp(e,t):Ep(e,"stack",Sp(n,r)))},yf=of,vf=function(e,t){return void 0===e?arguments.length<2?"":t:sf(e)},_f=pt("toStringTag"),Ef=Error,Sf=[].push,Tf=function(e,t){var n,r=cf(bf,this);df?n=df(Ef(),r?lf(this):bf):(n=r?this:hf(bf),pf(n,_f,"Error")),void 0!==t&&pf(n,"message",vf(t)),gf(n,Tf,n.stack,1),arguments.length>2&&mf(n,arguments[2]);var i=[];return yf(e,Sf,{that:i}),pf(n,"errors",i),n};df?df(Tf,Ef):uf(Tf,Ef,{name:!0});var bf=Tf.prototype=hf(Ef.prototype,{constructor:ff(1,Tf),message:ff(1,""),name:ff(1,"AggregateError")});af({global:!0,constructor:!0,arity:2},{AggregateError:Tf});var If,Nf,Cf,wf,Rf="undefined"!=typeof process&&"process"==T(process),Af=ce,Of=Fs,Mf=M,Df=pt("species"),kf=u,xf=TypeError,Lf=function(e,t){if(kf(t,e))return e;throw xf("Incorrect invocation")},Pf=ho,jf=Re,Uf=TypeError,Ff=rn,zf=function(e){if(Pf(e))return e;throw Uf(jf(e)+" is not a constructor")},Vf=q,Bf=pt("species"),Gf=function(e,t){var n,r=Ff(e).constructor;return void 0===r||Vf(n=Ff(r)[Bf])?t:zf(n)},Hf=TypeError,Wf=function(e,t){if(e<t)throw Hf("Not enough arguments");return e},Yf=/(?:ipad|iphone|ipod).*applewebkit/i.test(le),qf=p,Kf=v,Qf=Xt,Jf=A,Xf=$e,Zf=i,$f=ns,em=rl,tm=wt,nm=Wf,rm=Yf,im=Rf,om=qf.setImmediate,sm=qf.clearImmediate,am=qf.process,cm=qf.Dispatch,lm=qf.Function,dm=qf.MessageChannel,um=qf.String,hm=0,pm={},fm="onreadystatechange";Zf((function(){If=qf.location}));var mm=function(e){if(Xf(pm,e)){var t=pm[e];delete pm[e],t()}},gm=function(e){return function(){mm(e)}},ym=function(e){mm(e.data)},vm=function(e){qf.postMessage(um(e),If.protocol+"//"+If.host)};om&&sm||(om=function(e){nm(arguments.length,1);var t=Jf(e)?e:lm(e),n=em(arguments,1);return pm[++hm]=function(){Kf(t,void 0,n)},Nf(hm),hm},sm=function(e){delete pm[e]},im?Nf=function(e){am.nextTick(gm(e))}:cm&&cm.now?Nf=function(e){cm.now(gm(e))}:dm&&!rm?(wf=(Cf=new dm).port2,Cf.port1.onmessage=ym,Nf=Qf(wf.postMessage,wf)):qf.addEventListener&&Jf(qf.postMessage)&&!qf.importScripts&&If&&"file:"!==If.protocol&&!Zf(vm)?(Nf=vm,qf.addEventListener("message",ym,!1)):Nf=fm in tm("script")?function(e){$f.appendChild(tm("script"))[fm]=function(){$f.removeChild(this),mm(e)}}:function(e){setTimeout(gm(e),0)});var _m={set:om,clear:sm},Em=function(){this.head=null,this.tail=null};Em.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var Sm,Tm,bm,Im,Nm,Cm=Em,wm=/ipad|iphone|ipod/i.test(le)&&"undefined"!=typeof Pebble,Rm=/web0s(?!.*chrome)/i.test(le),Am=p,Om=Xt,Mm=O.f,Dm=_m.set,km=Cm,xm=Yf,Lm=wm,Pm=Rm,jm=Rf,Um=Am.MutationObserver||Am.WebKitMutationObserver,Fm=Am.document,zm=Am.process,Vm=Am.Promise,Bm=Mm(Am,"queueMicrotask"),Gm=Bm&&Bm.value;if(!Gm){var Hm=new km,Wm=function(){var e,t;for(jm&&(e=zm.domain)&&e.exit();t=Hm.get();)try{t()}catch(e){throw Hm.head&&Sm(),e}e&&e.enter()};xm||jm||Pm||!Um||!Fm?!Lm&&Vm&&Vm.resolve?((Im=Vm.resolve(void 0)).constructor=Vm,Nm=Om(Im.then,Im),Sm=function(){Nm(Wm)}):jm?Sm=function(){zm.nextTick(Wm)}:(Dm=Om(Dm,Am),Sm=function(){Dm(Wm)}):(Tm=!0,bm=Fm.createTextNode(""),new Um(Wm).observe(bm,{characterData:!0}),Sm=function(){bm.data=Tm=!Tm}),Gm=function(e){Hm.head||Sm(),Hm.add(e)}}var Ym=Gm,qm=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Km=p.Promise,Qm="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Jm=!Qm&&!Rf&&"object"==typeof window&&"object"==typeof document,Xm=p,Zm=Km,$m=A,eg=qt,tg=Xi,ng=pt,rg=Jm,ig=Qm,og=ge,sg=Zm&&Zm.prototype,ag=ng("species"),cg=!1,lg=$m(Xm.PromiseRejectionEvent),dg=eg("Promise",(function(){var e=tg(Zm),t=e!==String(Zm);if(!t&&66===og)return!0;if(!sg.catch||!sg.finally)return!0;if(!og||og<51||!/native code/.test(e)){var n=new Zm((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[ag]=r,!(cg=n.then((function(){}))instanceof r))return!0}return!t&&(rg||ig)&&!lg})),ug={CONSTRUCTOR:dg,REJECTION_EVENT:lg,SUBCLASSING:cg},hg={},pg=De,fg=TypeError,mg=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw fg("Bad Promise constructor");t=e,n=r})),this.resolve=pg(t),this.reject=pg(n)};hg.f=function(e){return new mg(e)};var gg,yg,vg=On,_g=Rf,Eg=p,Sg=x,Tg=js,bg=la,Ig=function(e){var t=Af(e);Mf&&t&&!t[Df]&&Of(t,Df,{configurable:!0,get:function(){return this}})},Ng=De,Cg=A,wg=ne,Rg=Lf,Ag=Gf,Og=_m.set,Mg=Ym,Dg=function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(e){}},kg=qm,xg=Cm,Lg=Na,Pg=Km,jg=ug,Ug=hg,Fg="Promise",zg=jg.CONSTRUCTOR,Vg=jg.REJECTION_EVENT,Bg=Lg.getterFor(Fg),Gg=Lg.set,Hg=Pg&&Pg.prototype,Wg=Pg,Yg=Hg,qg=Eg.TypeError,Kg=Eg.document,Qg=Eg.process,Jg=Ug.f,Xg=Jg,Zg=!!(Kg&&Kg.createEvent&&Eg.dispatchEvent),$g="unhandledrejection",ey=function(e){var t;return!(!wg(e)||!Cg(t=e.then))&&t},ty=function(e,t){var n,r,i,o=t.value,s=1==t.state,a=s?e.ok:e.fail,c=e.resolve,l=e.reject,d=e.domain;try{a?(s||(2===t.rejection&&sy(t),t.rejection=1),!0===a?n=o:(d&&d.enter(),n=a(o),d&&(d.exit(),i=!0)),n===e.promise?l(qg("Promise-chain cycle")):(r=ey(n))?Sg(r,n,c,l):c(n)):l(o)}catch(e){d&&!i&&d.exit(),l(e)}},ny=function(e,t){e.notified||(e.notified=!0,Mg((function(){for(var n,r=e.reactions;n=r.get();)ty(n,e);e.notified=!1,t&&!e.rejection&&iy(e)})))},ry=function(e,t,n){var r,i;Zg?((r=Kg.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),Eg.dispatchEvent(r)):r={promise:t,reason:n},!Vg&&(i=Eg["on"+e])?i(r):e===$g&&Dg("Unhandled promise rejection",n)},iy=function(e){Sg(Og,Eg,(function(){var t,n=e.facade,r=e.value;if(oy(e)&&(t=kg((function(){_g?Qg.emit("unhandledRejection",r,n):ry($g,n,r)})),e.rejection=_g||oy(e)?2:1,t.error))throw t.value}))},oy=function(e){return 1!==e.rejection&&!e.parent},sy=function(e){Sg(Og,Eg,(function(){var t=e.facade;_g?Qg.emit("rejectionHandled",t):ry("rejectionhandled",t,e.value)}))},ay=function(e,t,n){return function(r){e(t,r,n)}},cy=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,ny(e,!0))},ly=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw qg("Promise can't be resolved itself");var r=ey(t);r?Mg((function(){var n={done:!1};try{Sg(r,t,ay(ly,n,e),ay(cy,n,e))}catch(t){cy(n,t,e)}})):(e.value=t,e.state=1,ny(e,!1))}catch(t){cy({done:!1},t,e)}}};zg&&(Yg=(Wg=function(e){Rg(this,Yg),Ng(e),Sg(gg,this);var t=Bg(this);try{e(ay(ly,t),ay(cy,t))}catch(e){cy(t,e)}}).prototype,(gg=function(e){Gg(this,{type:Fg,done:!1,notified:!1,parent:!1,reactions:new xg,rejection:!1,state:0,value:void 0})}).prototype=Tg(Yg,"then",(function(e,t){var n=Bg(this),r=Jg(Ag(this,Wg));return n.parent=!0,r.ok=!Cg(e)||e,r.fail=Cg(t)&&t,r.domain=_g?Qg.domain:void 0,0==n.state?n.reactions.add(r):Mg((function(){ty(r,n)})),r.promise})),yg=function(){var e=new gg,t=Bg(e);this.promise=e,this.resolve=ay(ly,t),this.reject=ay(cy,t)},Ug.f=Jg=function(e){return e===Wg||void 0===e?new yg(e):Xg(e)}),vg({global:!0,constructor:!0,wrap:!0,forced:zg},{Promise:Wg}),bg(Wg,Fg,!1,!0),Ig(Fg);var dy=pt("iterator"),uy=!1;try{var hy=0,py={next:function(){return{done:!!hy++}},return:function(){uy=!0}};py[dy]=function(){return this},Array.from(py,(function(){throw 2}))}catch(e){}var fy=Km,my=function(e,t){if(!t&&!uy)return!1;var n=!1;try{var r={};r[dy]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},gy=ug.CONSTRUCTOR||!my((function(e){fy.all(e).then(void 0,(function(){}))})),yy=x,vy=De,_y=hg,Ey=qm,Sy=of;On({target:"Promise",stat:!0,forced:gy},{all:function(e){var t=this,n=_y.f(t),r=n.resolve,i=n.reject,o=Ey((function(){var n=vy(t.resolve),o=[],s=0,a=1;Sy(e,(function(e){var c=s++,l=!1;a++,yy(n,t,e).then((function(e){l||(l=!0,o[c]=e,--a||r(o))}),i)})),--a||r(o)}));return o.error&&i(o.value),n.promise}});var Ty=On,by=ug.CONSTRUCTOR;Km&&Km.prototype,Ty({target:"Promise",proto:!0,forced:by,real:!0},{catch:function(e){return this.then(void 0,e)}});var Iy=x,Ny=De,Cy=hg,wy=qm,Ry=of;On({target:"Promise",stat:!0,forced:gy},{race:function(e){var t=this,n=Cy.f(t),r=n.reject,i=wy((function(){var i=Ny(t.resolve);Ry(e,(function(e){Iy(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var Ay=x,Oy=hg;On({target:"Promise",stat:!0,forced:ug.CONSTRUCTOR},{reject:function(e){var t=Oy.f(this);return Ay(t.reject,void 0,e),t.promise}});var My=rn,Dy=ne,ky=hg,xy=function(e,t){if(My(e),Dy(t)&&t.constructor===e)return t;var n=ky.f(e);return(0,n.resolve)(t),n.promise},Ly=On,Py=Km,jy=ug.CONSTRUCTOR,Uy=xy,Fy=ce("Promise"),zy=!jy;Ly({target:"Promise",stat:!0,forced:!0},{resolve:function(e){return Uy(zy&&this===Fy?Py:this,e)}});var Vy=x,By=De,Gy=hg,Hy=qm,Wy=of;On({target:"Promise",stat:!0,forced:gy},{allSettled:function(e){var t=this,n=Gy.f(t),r=n.resolve,i=n.reject,o=Hy((function(){var n=By(t.resolve),i=[],o=0,s=1;Wy(e,(function(e){var a=o++,c=!1;s++,Vy(n,t,e).then((function(e){c||(c=!0,i[a]={status:"fulfilled",value:e},--s||r(i))}),(function(e){c||(c=!0,i[a]={status:"rejected",reason:e},--s||r(i))}))})),--s||r(i)}));return o.error&&i(o.value),n.promise}});var Yy=x,qy=De,Ky=ce,Qy=hg,Jy=qm,Xy=of,Zy="No one promise resolved";On({target:"Promise",stat:!0,forced:gy},{any:function(e){var t=this,n=Ky("AggregateError"),r=Qy.f(t),i=r.resolve,o=r.reject,s=Jy((function(){var r=qy(t.resolve),s=[],a=0,c=1,l=!1;Xy(e,(function(e){var d=a++,u=!1;c++,Yy(r,t,e).then((function(e){u||l||(l=!0,i(e))}),(function(e){u||l||(u=!0,s[d]=e,--c||o(new n(s,Zy)))}))})),--c||o(new n(s,Zy))}));return s.error&&o(s.value),r.promise}});var $y=On,ev=Km,tv=i,nv=ce,rv=A,iv=Gf,ov=xy,sv=ev&&ev.prototype;$y({target:"Promise",proto:!0,real:!0,forced:!!ev&&tv((function(){sv.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=iv(this,nv("Promise")),n=rv(e);return this.then(n?function(n){return ov(t,e()).then((function(){return n}))}:e,n?function(n){return ov(t,e()).then((function(){throw n}))}:e)}});var av=re.Promise,cv=r(av);const lv=()=>{};function dv(){const e={promise:void 0,isResolved:!1,isRejected:!1,isFinished:!1,resolve:void 0,reject:void 0,cancel:lv};return e.promise=new cv(((t,n)=>{e.resolve=n=>{e.isFinished||(e.isResolved=!0,e.isFinished=!0,t(n),e.value=n)},e.reject=t=>{e.isFinished||(e.isRejected=!0,e.isFinished=!0,n(t))}})),e}const uv=new Map,hv=new Map,pv=new Map;var fv,mv;!function(e){e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.HARMONY_OS="HarmonyOS",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.CHROMIUM_OS="Chromium OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot"}(fv||(fv={})),function(e){e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger"}(mv||(mv={}));var gv={exports:{}};!function(e,n){!function(t,r){var i="function",o="undefined",s="object",a="string",c="major",l="model",d="name",u="type",h="vendor",p="version",f="architecture",m="console",g="mobile",y="tablet",v="smarttv",_="wearable",E="embedded",S="Amazon",T="Apple",b="ASUS",I="BlackBerry",N="Browser",C="Chrome",w="Firefox",R="Google",A="Huawei",O="LG",M="Microsoft",D="Motorola",k="Opera",x="Samsung",L="Sharp",P="Sony",j="Xiaomi",U="Zebra",F="Facebook",z="Chromium OS",V="Mac OS",B=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},G=function(e,t){return typeof e===a&&-1!==H(t).indexOf(H(e))},H=function(e){return e.toLowerCase()},W=function(e,t){if(typeof e===a)return e=e.replace(/^\s\s*/,""),typeof t===o?e:e.substring(0,350)},Y=function(e,t){for(var n,o,a,c,l,d,u=0;u<t.length&&!l;){var h=t[u],p=t[u+1];for(n=o=0;n<h.length&&!l&&h[n];)if(l=h[n++].exec(e))for(a=0;a<p.length;a++)d=l[++o],typeof(c=p[a])===s&&c.length>0?2===c.length?typeof c[1]==i?this[c[0]]=c[1].call(this,d):this[c[0]]=c[1]:3===c.length?typeof c[1]!==i||c[1].exec&&c[1].test?this[c[0]]=d?d.replace(c[1],c[2]):r:this[c[0]]=d?c[1].call(this,d,c[2]):r:4===c.length&&(this[c[0]]=d?c[3].call(this,d.replace(c[1],c[2])):r):this[c]=d||r;u+=2}},q=function(e,t){for(var n in t)if(typeof t[n]===s&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(G(t[n][i],e))return"?"===n?r:n}else if(G(t[n],e))return"?"===n?r:n;return e},K={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,p],[/opios[\/ ]+([\w\.]+)/i],[p,[d,k+" Mini"]],[/\bopr\/([\w\.]+)/i],[p,[d,k]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[d,"UC"+N]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[p,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+N],p],[/\bfocus\/([\w\.]+)/i],[p,[d,w+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[d,k+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[d,k+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[d,"MIUI "+N]],[/fxios\/([-\w\.]+)/i],[p,[d,w]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+N]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+N],p],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,p],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,F],p],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[d,C+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,C+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[d,"Android "+N]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[p,q,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[d,w+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[d,p],[/(cobalt)\/([\w\.]+)/i],[d,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,H]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[f,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/windows (ce|mobile); ppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[f,/ower/,"",H]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[f,H]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[h,x],[u,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[l,[h,x],[u,g]],[/\((ip(?:hone|od)[\w ]*);/i],[l,[h,T],[u,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[h,T],[u,y]],[/(macintosh);/i],[l,[h,T]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[h,L],[u,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[h,A],[u,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[h,A],[u,g]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[l,/_/g," "],[h,j],[u,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[h,j],[u,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[h,"OPPO"],[u,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[h,"Vivo"],[u,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[l,[h,"Realme"],[u,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[h,D],[u,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[h,D],[u,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[h,O],[u,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[h,O],[u,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[h,"Lenovo"],[u,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[h,"Nokia"],[u,g]],[/(pixel c)\b/i],[l,[h,R],[u,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[h,R],[u,g]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[h,P],[u,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[h,P],[u,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[h,"OnePlus"],[u,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[h,S],[u,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[h,S],[u,g]],[/(playbook);[-\w\),; ]+(rim)/i],[l,h,[u,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[h,I],[u,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[h,b],[u,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[h,b],[u,g]],[/(nexus 9)/i],[l,[h,"HTC"],[u,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[l,/_/g," "],[u,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[h,"Acer"],[u,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[h,"Meizu"],[u,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,l,[u,g]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,l,[u,y]],[/(surface duo)/i],[l,[h,M],[u,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[h,"Fairphone"],[u,g]],[/(u304aa)/i],[l,[h,"AT&T"],[u,g]],[/\bsie-(\w*)/i],[l,[h,"Siemens"],[u,g]],[/\b(rct\w+) b/i],[l,[h,"RCA"],[u,y]],[/\b(venue[\d ]{2,7}) b/i],[l,[h,"Dell"],[u,y]],[/\b(q(?:mv|ta)\w+) b/i],[l,[h,"Verizon"],[u,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[h,"Barnes & Noble"],[u,y]],[/\b(tm\d{3}\w+) b/i],[l,[h,"NuVision"],[u,y]],[/\b(k88) b/i],[l,[h,"ZTE"],[u,y]],[/\b(nx\d{3}j) b/i],[l,[h,"ZTE"],[u,g]],[/\b(gen\d{3}) b.+49h/i],[l,[h,"Swiss"],[u,g]],[/\b(zur\d{3}) b/i],[l,[h,"Swiss"],[u,y]],[/\b((zeki)?tb.*\b) b/i],[l,[h,"Zeki"],[u,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],l,[u,y]],[/\b(ns-?\w{0,9}) b/i],[l,[h,"Insignia"],[u,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[h,"NextBook"],[u,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],l,[u,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],l,[u,g]],[/\b(ph-1) /i],[l,[h,"Essential"],[u,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[h,"Envizen"],[u,y]],[/\b(trio[-\w\. ]+) b/i],[l,[h,"MachSpeed"],[u,y]],[/\btu_(1491) b/i],[l,[h,"Rotor"],[u,y]],[/(shield[\w ]+) b/i],[l,[h,"Nvidia"],[u,y]],[/(sprint) (\w+)/i],[h,l,[u,g]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[h,M],[u,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[h,U],[u,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[h,U],[u,g]],[/smart-tv.+(samsung)/i],[h,[u,v]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[h,x],[u,v]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,O],[u,v]],[/(apple) ?tv/i],[h,[l,T+" TV"],[u,v]],[/crkey/i],[[l,C+"cast"],[h,R],[u,v]],[/droid.+aft(\w)( bui|\))/i],[l,[h,S],[u,v]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[h,L],[u,v]],[/(bravia[\w ]+)( bui|\))/i],[l,[h,P],[u,v]],[/(mitv-\w{5}) bui/i],[l,[h,j],[u,v]],[/Hbbtv.*(technisat) (.*);/i],[h,l,[u,v]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,W],[l,W],[u,v]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[u,v]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,l,[u,m]],[/droid.+; (shield) bui/i],[l,[h,"Nvidia"],[u,m]],[/(playstation [345portablevi]+)/i],[l,[h,P],[u,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[h,M],[u,m]],[/((pebble))app/i],[h,l,[u,_]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[l,[h,T],[u,_]],[/droid.+; (glass) \d/i],[l,[h,R],[u,_]],[/droid.+; (wt63?0{2,3})\)/i],[l,[h,U],[u,_]],[/(quest( 2| pro)?)/i],[l,[h,F],[u,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[u,E]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[l,[u,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[u,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[u,y]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[u,g]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,p],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[p,q,K]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[p,q,K]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,V],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,p],[/\(bb(10);/i],[p,[d,I]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[d,w+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[d,C+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,z],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,p],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,p]]},J=function(e,n){if(typeof e===s&&(n=e,e=r),!(this instanceof J))return new J(e,n).getResult();var m=typeof t!==o&&t.navigator?t.navigator:r,v=e||(m&&m.userAgent?m.userAgent:""),_=m&&m.userAgentData?m.userAgentData:r,E=n?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(Q,n):Q;return this.getBrowser=function(){var e={};return e[d]=r,e[p]=r,Y.call(e,v,E.browser),e[c]=function(e){return typeof e===a?e.replace(/[^\d\.]/g,"").split(".")[0]:r}(e[p]),m&&m.brave&&typeof m.brave.isBrave==i&&(e[d]="Brave"),e},this.getCPU=function(){var e={};return e[f]=r,Y.call(e,v,E.cpu),e},this.getDevice=function(){var e={};return e[h]=r,e[l]=r,e[u]=r,Y.call(e,v,E.device),!e[u]&&_&&_.mobile&&(e[u]=g),"Macintosh"==e[l]&&m&&typeof m.standalone!==o&&m.maxTouchPoints&&m.maxTouchPoints>2&&(e[l]="iPad",e[u]=y),e},this.getEngine=function(){var e={};return e[d]=r,e[p]=r,Y.call(e,v,E.engine),e},this.getOS=function(){var e={};return e[d]=r,e[p]=r,Y.call(e,v,E.os),!e[d]&&_&&"Unknown"!=_.platform&&(e[d]=_.platform.replace(/chrome os/i,z).replace(/macos/i,V)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return v},this.setUA=function(e){return v=typeof e===a&&e.length>350?W(e,350):e,this},this.setUA(v),this};J.VERSION="0.7.34",J.BROWSER=B([d,p,c]),J.CPU=B([f]),J.DEVICE=B([l,h,u,m,g,v,y,_,E]),J.ENGINE=J.OS=B([d,p]),e.exports&&(n=e.exports=J),n.UAParser=J;var X=typeof t!==o&&(t.jQuery||t.Zepto);if(X&&!X.ua){var Z=new J;X.ua=Z.getResult(),X.ua.get=function(){return Z.getUA()},X.ua.set=function(e){Z.setUA(e);var t=Z.getResult();for(var n in t)X.ua[n]=t[n]}}}("object"==typeof window?window:t)}(gv,gv.exports);const yv=new(r(gv.exports));let vv=yv.getResult(),_v=null;function Ev(e){if(!_v){e&&yv.setUA(e),vv=yv.getResult();const t=function(e){if("Blink"===e.engine.name&&"WeChat"!==e.browser.name)return mv.CHROME;switch(e.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return mv.CHROME;case"Safari":case"Mobile Safari":return mv.SAFARI;case"Edge":return mv.EDGE;case"Firefox":return mv.FIREFOX;case"QQBrowser":return mv.QQ;case"Opera":return mv.OPERA;case"WeChat":return mv.WECHAT;default:return e.browser.name||""}}(vv),n=function(e){let t;return t="Blink"===e.engine.name?e.engine.version||"":e.browser.version||"",t.split(".")[0]}(vv),r=function(e){return"Windows"===e.os.name?e.os.version?e.os.name+" "+e.os.version:e.os.name:e.os.name||""}(vv),i=vv.os.version;if(!(t&&n&&r&&i))return{name:t,version:n,os:r,osVersion:i};_v={name:t,version:n,os:r,osVersion:i}}return _v}function Sv(){return Ev().os}function Tv(){const e=Ev();return"".concat(e.os," ").concat(e.osVersion)}function bv(){const e=Ev();return!!("WebKit"===vv.engine.name&&e.os===fv.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==mv.SAFARI||Av()&&e.name!==mv.SAFARI)}function Iv(){const e=Ev();if(bv()){if(e.os===fv.MAC_OS)return!0;if(e.os===fv.IOS){const e=vv.os.version&&vv.os.version.split(".");if(e&&14===Number(e[0])&&e[1]&&Number(e[1])>=3)return!0;if(e&&Number(e[0])>14)return!0}}return!1}function Nv(){return"WebKit"===vv.engine.name}function Cv(){return Ev().name===mv.CHROME}function wv(){return Ev().name===mv.SAFARI}function Rv(){return Ev().name===mv.FIREFOX}function Av(){return Ev().os===fv.IOS}function Ov(e){const t=Ev();return!(t.name!==mv.CHROME||!t.osVersion)&&Number(t.version)>=e}function Mv(e){const t=Ev();return!(t.name!==mv.EDGE||!t.osVersion)&&Number(t.version)>=e}function Dv(e){const t=Ev();return!(t.name!==mv.OPERA||!t.osVersion)&&Number(t.version)>=e}function kv(){const e=Ev();return!(e.name!==mv.CHROME||!e.osVersion)&&Number(e.version)<=90}function xv(){const e=Ev();if(e.os!==fv.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return Number(t[0])<14||14===Number(t[0])&&Number(t[1])<=6}function Lv(){const e=Ev();if(e.os!==fv.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])}function Pv(){const e=Ev();if(e.os!==fv.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 16===Number(t[0])}function jv(){const e=Ev();if(e.os!==fv.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=1}function Uv(){return wv()&&navigator.maxTouchPoints>0}function Fv(){return Ev().name===mv.WECHAT}function zv(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function Vv(){const e=Ev();return e.name!==mv.EDGE&&e.name!==mv.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function Bv(){return Sv()===fv.ANDROID}function Gv(){const e=Ev();return Bv()&&(e.name===mv.CHROME||e.name===mv.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}var Hv;!function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",e.ADD_CANDIDATE_FAILED="ADD_CANDIDATE_FAILED",e.DATACHANNEL_FAILED="DATACHANNEL_FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",e.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.EXTERNAL_SIGNAL_ABORT="EXTERNAL_SIGNAL_ABORT",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN",e.DISCONNECT_P2P="DISCONNECT_P2P",e.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",e.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",e.CREATE_DATACHANNEL_ERROR="CREATE_DATACHANNEL_ERROR",e.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",e.PROHIBITED_OPERATION="PROHIBITED_OPERATION",e.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED",e.P2P_MESSAGE_FAILED="P2P_MESSAGE_FAILED"}(Hv||(Hv={}));let Wv=class extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;super(t),oh(this,"code",void 0),oh(this,"message",void 0),oh(this,"data",void 0),oh(this,"name","AgoraRTCException"),this.code=e,this.message="AgoraRTCError ".concat(this.code,": ").concat(t),this.data=n}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),"\n").concat(this.stack):"".concat(this.stack)}print(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error",t=arguments.length>1?arguments[1]:void 0;return"error"===e&&(t||console).error(this.toString()),"warning"===e&&(t||console).warn(this.toString()),this}throw(e){throw this.print("error",e),this}};function Yv(e,t){if("boolean"!=typeof e)throw new Wv(Hv.INVALID_PARAMS,"Invalid ".concat(t,": The value is of the boolean type."))}function qv(e,t,n){if(!Rr(n).call(n,e))throw new Wv(Hv.INVALID_PARAMS,"".concat(t," can only be set as ").concat(JSON.stringify(n)))}function Kv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;if(e<n||e>r||(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])&&!function(e){return"number"==typeof e&&e%1==0}(e))throw new Wv(Hv.INVALID_PARAMS,"invalid ".concat(t,": the value range is [").concat(n,", ").concat(r,"]. integer only"))}function Qv(e,t){if("number"!=typeof e){if(!(e.min||e.max||e.ideal||e.exact))throw new Wv(Hv.INVALID_PARAMS,"".concat(t," is not a valid ConstrainLong"));void 0!==e.min&&Kv(e.min,"".concat(t,".min"),0,1/0),void 0!==e.max&&Kv(e.max,"".concat(t,".max"),1,1/0),void 0!==e.exact&&Kv(e.exact,"".concat(t,".exact"),1,1/0),void 0!==e.ideal&&Kv(e.ideal,"".concat(t,".ideal"),1,1/0)}else Kv(e,t,1,1/0)}function Jv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==e)throw new Wv(Hv.INVALID_PARAMS,"".concat(t||"param"," cannot be empty"));if(!$v(e,n,r,i))throw new Wv(Hv.INVALID_PARAMS,"Invalid ".concat(t||"string param",": Length of the string: [").concat(n,",").concat(r,"].").concat(i?" ASCII characters only.":""))}function Xv(e,t){if(!Array.isArray(e))throw new Wv(Hv.INVALID_PARAMS,"".concat(t," should be an array"))}function Zv(e){return null==e}function $v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return"string"==typeof e&&e.length<=n&&e.length>=t&&(!r||function(e){if("string"!=typeof e)return!1;for(let t=0;t<e.length;t+=1){const n=e.charCodeAt(t);if(n<0||n>255)return!1}return!0}(e))}function e_(e,t,n){if("getBigUint64"in DataView.prototype)return e.getBigUint64(t,n);const r=e.getUint32(t,n),i=e.getUint32(t+4,n),o=Number(!!n),s=Number(!n);return BigInt(r*s+i*o)<<BigInt(32)|BigInt(r*o+i*s)}function t_(e,t,n,r){if("setBigUint64"in DataView.prototype)return e.setBigUint64(t,n,r);const i=Number(n>>BigInt(32)),o=Number(n&BigInt(4294967295));r?(e.setUint32(t+4,i,r),e.setUint32(t,o,r)):(e.setUint32(t,i,r),e.setUint32(t+4,o,r))}var n_,r_;!function(e){e.COVERED="COVERED",e.POSITION="POSITION",e.SIZE="SIZE",e.STYLE="STYLE"}(n_||(n_={})),function(e){e.UNMOUNTED="UNMOUNTED",e.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(r_||(r_={}));const i_=new class{constructor(){oh(this,"_clientSize",null),oh(this,"getClientWidth",(()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth)),oh(this,"getClientHeight",(()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight)),oh(this,"getStyle",(e=>window.getComputedStyle(e,null))),oh(this,"checkCssVisibleProperty",(e=>{var t;let n=!0;const r=this.getStyle(e),{display:i,visibility:o,opacity:s,filter:a}=r;return("none"===i||Rr(t=["hidden","collapse"]).call(t,o)||Number(s)<.1)&&(n=!1),!!n&&(a&&a.split(" ").filter((e=>{var t;const n=e.split("(")[0];return Rr(t=["brightness","blur","opacity"]).call(t,n)})).map((e=>{const[t,n]=e.split(/\(|\)/);return[t,Number(n.match(/^[0-9\.]+/))]})).forEach((e=>{const[t,r]=e;switch(t){case"brightness":(r<.1||r>3)&&(n=!1);break;case"blur":r>3&&(n=!1);break;case"opacity":r<.1&&(n=!1)}})),n)})),oh(this,"checkPropertyUpToAllParentNodes",((e,t)=>{let n=!0,r=!0;const i=e=>t(e);let o=e;for(;o&&r;)i(o)||(n=!1,r=!1),o=o.parentElement,o||(r=!1);return n})),oh(this,"checkActualCssVisibleIncludeInherit",(e=>this.checkPropertyUpToAllParentNodes(e,this.checkCssVisibleProperty))),oh(this,"getSizeAboutClient",(e=>{const{width:t,height:n,left:r,right:i,top:o,bottom:s}=e.getBoundingClientRect(),a=this.getClientWidth(),c=this.getClientHeight();return{width:t,height:n,left:r,right:i,top:o,bottom:s,clientWidth:a,clientHeight:c,clientMin:Math.min(a,c)}})),oh(this,"checkActualSize",(()=>{const{width:e,height:t,clientMin:n}=this._clientSize;return this.checkSizeIsVisible(e,t,n)})),oh(this,"elementFromPoint",((e,t)=>document.elementFromPoint?document.elementFromPoint(e,t):null)),oh(this,"checkCoverForAPoint",((e,t,n)=>{const r=this.elementFromPoint(e,t);return null!==r&&r!==n})),oh(this,"getPointPositionList",(()=>{const{width:e,height:t,left:n,top:r}=this._clientSize,i=e/6,o=t/6,s=[],a=10**6;for(let c=0;c<5;c++)for(let e=0;e<5;e++){const t=(n*a+(0===c?.1:4===c?(i*c*a-1e5)/a:i*c)*a)/a,l=(r*a+(0===e?.1:4===e?(o*e*a-1e5)/a:o*e)*a)/a;s.push({x:t,y:l})}return[...s]})),oh(this,"checkElementCover",(e=>this.getPointPositionList().map((t=>this.checkCoverForAPoint(t.x,t.y,e))).filter((e=>!!e)).length>6)),oh(this,"checkSizeIsVisible",((e,t,n)=>(e>50||n/e<=10)&&(t>50||n/t<=10))),oh(this,"checkSizeOfPartInClient",(()=>{const{left:e,right:t,top:n,bottom:r,clientHeight:i,clientWidth:o,clientMin:s}=this._clientSize;let a,c,l,d;if(e<0)a=0;else{if(!(e<o))return!1;a=e}if(t<0)return!1;if(c=t<o?t:o,n<0)l=0;else{if(!(n<i))return!1;l=n}if(r<0)return!1;d=r<i?r:i;const u=c-a,h=d-l;return this.checkSizeIsVisible(u,h,s)})),oh(this,"returnHiddenResult",(e=>(this._clientSize=null,{visible:!1,reason:e}))),oh(this,"checkOneElementVisible",(e=>{if(e instanceof HTMLElement){if(this.checkElementIsMountedOnDom(e)){if(this.checkActualCssVisibleIncludeInherit(e)){if(this._clientSize=this.getSizeAboutClient(e),this.checkElementCover(e))return this.returnHiddenResult(n_.COVERED);{const e=this.checkActualSize(),t=this.checkSizeOfPartInClient();return e&&!t?this.returnHiddenResult(n_.POSITION):e?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(n_.SIZE)}}return this.returnHiddenResult(n_.STYLE)}return this.returnHiddenResult(r_.UNMOUNTED)}return this.returnHiddenResult(r_.INVALID_HTML_ELEMENT)})),oh(this,"checkElementIsMountedOnDom",(e=>this.checkPropertyUpToAllParentNodes(e,(e=>"HTML"!==e.nodeName.toUpperCase()?null!==e.parentElement:!!document.documentElement))))}};function o_(e){return(new TextEncoder).encode(e)}const s_=function(e,t){const n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n},a_=async e=>{const t=function(e){const t=window.atob(e),n=new Uint8Array(new ArrayBuffer(t.length));for(let r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n}("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),n=await window.crypto.subtle.importKey("spki",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),r=o_(e),i=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},n,r);return function(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}(new Uint8Array(i))},c_=async e=>function(e,t){let n="";return new Uint8Array(e).forEach((e=>{n+=e.toString(t).padStart(2,"0")})),n}(await crypto.subtle.digest("SHA-256",o_(e)),16);class l_{constructor(){oh(this,"_events",{}),oh(this,"addListener",this.on)}getListeners(e){return this._events[e]?this._events[e].map((e=>e.listener)):[]}on(e,t){this._events[e]||(this._events[e]=[]);const n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!1})}once(e,t){this._events[e]||(this._events[e]=[]);const n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!0})}off(e,t){if(!this._events[e])return;const n=this._events[e],r=this._indexOfListener(n,t);-1!==r&&n.splice(r,1),0===this._events[e].length&&delete this._events[e]}removeAllListeners(e){e?delete this._events[e]:this._events={}}emit(e){this._events[e]||(this._events[e]=[]);const t=this._events[e].map((e=>e));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(let o=0;o<t.length;o+=1){const n=t[o];n.once&&this.off(e,n.listener),n.listener.apply(this,r||[])}}safeEmit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];[...this._events[e]||[]].forEach((t=>{t.once&&this.off(e,t.listener);try{t.listener.apply(this,n)}catch(t){console.error("safeEmit event:".concat(e," error ").concat(null==t?void 0:t.toString()))}}))}_indexOfListener(e,t){let n=e.length;for(;n--;)if(e[n].listener===t)return n;return-1}}let d_=null;function u_(){if(d_)return d_;if(window.electron)return d_=window.electron;if(!window.require)return null;try{return d_=window.require("electron"),d_}catch(e){return null}}var h_,p_,f_,m_,g_,y_,v_,__;function E_(e){return Kv(e.timeout,"config.timeout",0,1e5),Kv(e.timeoutFactor,"config.timeoutFactor",0,100,!1),Kv(e.maxRetryCount,"config.maxRetryConfig",0,1/0),Kv(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function S_(e){if(!Array.isArray(e)||e.length<1)return!1;try{e.forEach((e=>{if(!e.urls)throw Error()}))}catch(e){return!1}return!0}function T_(e){return Jv(e.turnServerURL,"turnServerURL"),Jv(e.username,"username"),Jv(e.password,"password"),e.udpport&&Kv(e.udpport,"udpport",1,99999,!0),e.forceturn&&Yv(e.forceturn,"forceturn"),e.security&&Yv(e.security,"security"),e.tcpport&&Kv(e.tcpport,"tcpport",1,99999,!0),!0}function b_(e){return void 0!==e.level&&qv(e.level,"level",[1,2,3]),void 0!==e.delay&&Kv(e.delay,"delay",0,3e3,!0),!0}function I_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return 0===e.getListeners(t).length?cv.reject(new Wv(Hv.UNEXPECTED_ERROR,"can not emit promise")):new cv(((n,i)=>{e.emit(t,...r,n,i)}))}function N_(e,t){if(0===e.getListeners(t).length)return cv.resolve();for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return I_(e,t,...r)}function C_(e,t){if(0===e.getListeners(t).length)return null;for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return w_(e,t,...r)}function w_(e,t){let n=null,r=null;for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];if(e.emit(t,...o,(e=>{n=e}),(e=>{r=e})),null!==r)throw r;if(null===n)throw new Wv(Hv.UNEXPECTED_ERROR,"handler is not sync");return n}!function(e){e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.MASS_SUBSCRIBE="Client.massSubscribe",e.MASS_UNSUBSCRIBE="Client.massUnsubscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",e.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",e.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",e.DATACHANNEL_FAILBACK="Client._datachannelFailback",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.LOCAL_VIDEO_SEND_SEI_DATA="LocalVideoTrack.sendSeiData",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange",e.CONNECTION_STATE_CHANGE="connectionStateChange",e.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",e.IMAGE_MODERATION_UPLOAD="imageModerationUpload"}(h_||(h_={})),function(e){e.TRACER="tracer"}(p_||(p_={})),function(e){e[e.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",e[e.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(f_||(f_={})),function(e){e.LEAVE="LEAVE",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.UID_BANNED="UID_BANNED",e.IP_BANNED="IP_BANNED",e.CHANNEL_BANNED="CHANNEL_BANNED",e.FALLBACK="FALLBACK",e.LICENSE_MISSING="LICENSE_MISSING",e.LICENSE_EXPIRED="LICENSE_EXPIRED",e.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",e.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",e.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",e.LICENSE_ILLEGAL="LICENSE_ILLEGAL",e.TOKEN_EXPIRE="TOKEN_EXPIRE"}(m_||(m_={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.INJECT_STREAM_STATUS="stream-inject-status",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost",e.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",e.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",e.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",e.PUBLISHED_USER_LIST="published-user-list",e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",e.CONTENT_INSPECT_ERROR="content-inspect-error",e.CONTENT_INSPECT_RESULT="content-inspect-result",e.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change"}(g_||(g_={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK"}(y_||(y_={})),function(e){e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(v_||(v_={})),function(e){e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(__||(__={}));const R_=new class extends l_{set networkState(e){this.emit(__.NETWORK_STATE_CHANGE,e,this._networkState),e===v_.ONLINE?this.emit(__.ONLINE):e===v_.OFFLINE&&(this.onlineWaiter=new cv((e=>{this.once(__.ONLINE,(()=>{this.onlineWaiter=void 0,e(v_.ONLINE)}))})),this.emit(__.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}get isOnline(){return this._networkState===v_.ONLINE}constructor(){super(),oh(this,"_moduleName","network-indicator"),oh(this,"_networkState",v_.ONLINE),oh(this,"onlineWaiter",void 0),window.addEventListener("online",(()=>{this.networkState=v_.ONLINE})),window.addEventListener("offline",(()=>{this.networkState=v_.OFFLINE}))}};var A_=De,O_=Je,M_=Y,D_=Bn,k_=TypeError,x_=function(e){return function(t,n,r,i){A_(n);var o=O_(t),s=M_(o),a=D_(o),c=e?a-1:0,l=e?-1:1;if(r<2)for(;;){if(c in s){i=s[c],c+=l;break}if(c+=l,e?c<0:a<=c)throw k_("Reduce of empty array with no initial value")}for(;e?c>=0:a>c;c+=l)c in s&&(i=n(i,s[c],c,o));return i}},L_=[x_(!1),x_(!0)][0];On({target:"Array",proto:!0,forced:!Rf&&ge>79&&ge<83||!bh("reduce")},{reduce:function(e){var t=arguments.length;return L_(this,e,t,t>1?arguments[1]:void 0)}});var P_=Jn("Array").reduce,j_=u,U_=P_,F_=Array.prototype,z_=r((function(e){var t=e.reduce;return e===F_||j_(F_,e)&&t===F_.reduce?U_:t}));function V_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V_(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G_(e,t){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}function H_(e){const t=[];return e.forEach((e=>{-1===t.indexOf(e)&&t.push(e)})),t}function W_(e){void 0!==cv?cv.resolve().then(e):setTimeout(e,0)}function Y_(e){return JSON.parse(JSON.stringify(e))}function q_(e){try{return Y_(e)}catch(t){return e}}const K_={};function Q_(e,t){K_[t]||(K_[t]=!0,e())}function J_(e){const t=window.atob(e),n=new Uint8Array(new ArrayBuffer(t.length));for(let r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n}function X_(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}function Z_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=z_(t).call(t,((e,t)=>e+t.length),0),i=new Uint8Array(new ArrayBuffer(r));let o=0;return t.forEach((e=>{i.set(e,o),o+=e.length})),i}function $_(e){return window.TextEncoder?(new TextEncoder).encode(e).length:e.length}function eE(e){let t=0;return/DingTalk/i.test(navigator.userAgent)&&e.realFormData&&(e=e.realFormData),e.forEach((e=>{t+="string"==typeof e?$_(e):e.size})),t+138}function tE(e){const t=new Wv(Hv.TIMEOUT,"timeout");return new cv(((n,r)=>{window.setTimeout((()=>r(t)),e)}))}function nE(e){return new cv((t=>{window.setTimeout(t,e)}))}function rE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0;const n=Math.random().toString(16).substr(2,e).toLowerCase();return n.length===e?"".concat(t).concat(n):"".concat(t).concat(n)+rE(e-n.length,"")}function iE(){return rE(32,"").toUpperCase()}const oE=()=>{},sE=new class{constructor(){oh(this,"fnMap",new Map)}throttleByKey(e,t,n,r){for(var i=arguments.length,o=new Array(i>4?i-4:0),s=4;s<i;s++)o[s-4]=arguments[s];if(this.fnMap.has(t)){const i=this.fnMap.get(t);if(i.threshold!==n){i.fn(...i.args),clearTimeout(i.timer);const s=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:s,args:o,skipFn:r})}else i.skipFn&&i.skipFn(...i.args),this.fnMap.set(t,B_(B_({},i),{},{fn:e,args:o,skipFn:r}))}else{const i=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:i,args:o,skipFn:r})}}},aE=sE.throttleByKey.bind(sE);function cE(e){return"object"==typeof e&&null!==e&&!(e instanceof RegExp)}function lE(e,t){if(!cE(e)||!cE(t))return t;if(Array.isArray(e)&&!Array.isArray(t)||!Array.isArray(e)&&Array.isArray(t))return t;if(Array.isArray(t)&&Array.isArray(e)){const n=[...e];for(let r=0;r<t.length;r++)n[r]=lE(e[r],t[r]);return n}{const n=B_({},e);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Object.prototype.hasOwnProperty.call(e,r)?n[r]=lE(e[r],t[r]):n[r]=t[r]);return n}}function dE(e,t){let n=[0];if(t&&(n=new Array(t).fill(0)),0===e)return n;let r=0;for(;e>0&&(n[r]=255&e,e>>=8,r++,!t||r!==t););return n}let uE=1,hE=console;class pE{static setLogger(e){hE=e}constructor(e){oh(this,"lockingPromise",cv.resolve()),oh(this,"locks",0),oh(this,"name",""),oh(this,"lockId",void 0),this.lockId=uE++,e&&(this.name=e),hE.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(e){let t;this.locks+=1,hE.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat("string"==typeof e?e:""));const n=new cv((n=>{t=()=>{this.locks-=1,hE.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat("string"==typeof e?e:"")),n()}})),r=this.lockingPromise.then((()=>t));return this.lockingPromise=this.lockingPromise.then((()=>n)),r}}function fE(e,t){return function(n,r,i){const o=i.value;if("function"!=typeof o)throw new Error("Cannot use mutex on object property.");return i.value=async function(){const n=this[t];if(!n)throw new Error("mutex property key ".concat(t," doesn't exist on ").concat(e));const i=await n.lock("From ".concat(e,".").concat(r));try{for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return await o.apply(this,a)}finally{i()}},i}}const mE={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function gE(e,t){const n=Math.floor(t.timeout*Math.pow(t.timeoutFactor,e));return Math.min(t.maxRetryTimeout,n)}function yE(e,t,n,r){const i=Object.assign({},mE,r);let o=i.timeout;const s=async()=>{await function(e){return new cv((t=>{window.setTimeout(t,e)}))}(o),o*=i.timeoutFactor,o=Math.min(i.maxRetryTimeout,o)};let a=!1;const c=new cv((async(r,o)=>{t=t||(()=>!1),n=n||(()=>!0);for(let c=0;c<i.maxRetryCount;c+=1){if(a)return o(new Wv(Hv.OPERATION_ABORTED));try{const n=await e();if(!t(n,c))return r(n);if(c+1===i.maxRetryCount)return r(n);await s()}catch(e){if(!n(e,c))return o(e);if(c+1===i.maxRetryCount)return o(e);await s()}}}));return c.cancel=()=>a=!0,c}let vE=class{constructor(e){oh(this,"input",[]),oh(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}mean(){var e;return 0===this.input.length?0:z_(e=this.input).call(e,((e,t)=>e+t))/this.input.length}};function _E(e,t){return function(){return e.apply(t,arguments)}}const{toString:EE}=Object.prototype,{getPrototypeOf:SE}=Object,TE=(bE=Object.create(null),e=>{const t=EE.call(e);return bE[t]||(bE[t]=t.slice(8,-1).toLowerCase())});var bE;const IE=e=>(e=e.toLowerCase(),t=>TE(t)===e),NE=e=>t=>typeof t===e,{isArray:CE}=Array,wE=NE("undefined"),RE=IE("ArrayBuffer"),AE=NE("string"),OE=NE("function"),ME=NE("number"),DE=e=>null!==e&&"object"==typeof e,kE=e=>{if("object"!==TE(e))return!1;const t=SE(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},xE=IE("Date"),LE=IE("File"),PE=IE("Blob"),jE=IE("FileList"),UE=IE("URLSearchParams");function FE(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e)if("object"!=typeof e&&(e=[e]),CE(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let s;for(n=0;n<o;n++)s=r[n],t.call(null,e[s],s,e)}}function zE(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const VE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,BE=e=>!wE(e)&&e!==VE,GE=(HE="undefined"!=typeof Uint8Array&&SE(Uint8Array),e=>HE&&e instanceof HE);var HE;const WE=IE("HTMLFormElement"),YE=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),qE=IE("RegExp"),KE=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};FE(n,((n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)},QE="abcdefghijklmnopqrstuvwxyz",JE="0123456789",XE={DIGIT:JE,ALPHA:QE,ALPHA_DIGIT:QE+QE.toUpperCase()+JE},ZE=IE("AsyncFunction");var $E={isArray:CE,isArrayBuffer:RE,isBuffer:function(e){return null!==e&&!wE(e)&&null!==e.constructor&&!wE(e.constructor)&&OE(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||OE(e.append)&&("formdata"===(t=TE(e))||"object"===t&&OE(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&RE(e.buffer),t},isString:AE,isNumber:ME,isBoolean:e=>!0===e||!1===e,isObject:DE,isPlainObject:kE,isUndefined:wE,isDate:xE,isFile:LE,isBlob:PE,isRegExp:qE,isFunction:OE,isStream:e=>DE(e)&&OE(e.pipe),isURLSearchParams:UE,isTypedArray:GE,isFileList:jE,forEach:FE,merge:function e(){const{caseless:t}=BE(this)&&this||{},n={},r=(r,i)=>{const o=t&&zE(n,i)||i;kE(n[o])&&kE(r)?n[o]=e(n[o],r):kE(r)?n[o]=e({},r):CE(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&FE(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return FE(t,((t,r)=>{n&&OE(t)?e[r]=_E(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,s;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)s=i[o],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&SE(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:TE,kindOfTest:IE,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(CE(e))return e;let t=e.length;if(!ME(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:WE,hasOwnProperty:YE,hasOwnProp:YE,reduceDescriptors:KE,freezeMethods:e=>{KE(e,((t,n)=>{if(OE(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];OE(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return CE(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:zE,global:VE,isContextDefined:BE,ALPHABET:XE,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:XE.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&OE(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(DE(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=CE(e)?[]:{};return FE(e,((e,t)=>{const o=n(e,r+1);!wE(o)&&(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:ZE,isThenable:e=>e&&(DE(e)||OE(e))&&OE(e.then)&&OE(e.catch)};function eS(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}$E.inherits(eS,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$E.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const tS=eS.prototype,nS={};function rS(e){return $E.isPlainObject(e)||$E.isArray(e)}function iS(e){return $E.endsWith(e,"[]")?e.slice(0,-2):e}function oS(e,t,n){return e?e.concat(t).map((function(e,t){return e=iS(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{nS[e]={value:e}})),Object.defineProperties(eS,nS),Object.defineProperty(tS,"isAxiosError",{value:!0}),eS.from=(e,t,n,r,i,o)=>{const s=Object.create(tS);return $E.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),eS.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const sS=$E.toFlatObject($E,{},null,(function(e){return/^is[A-Z]/.test(e)}));function aS(e,t,n){if(!$E.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=$E.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!$E.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&$E.isSpecCompliantForm(t);if(!$E.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if($E.isDate(e))return e.toISOString();if(!a&&$E.isBlob(e))throw new eS("Blob is not supported. Use a Buffer instead.");return $E.isArrayBuffer(e)||$E.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let a=e;if(e&&!i&&"object"==typeof e)if($E.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if($E.isArray(e)&&function(e){return $E.isArray(e)&&!e.some(rS)}(e)||($E.isFileList(e)||$E.endsWith(n,"[]"))&&(a=$E.toArray(e)))return n=iS(n),a.forEach((function(e,r){!$E.isUndefined(e)&&null!==e&&t.append(!0===s?oS([n],r,o):null===s?n:n+"[]",c(e))})),!1;return!!rS(e)||(t.append(oS(i,n,o),c(e)),!1)}const d=[],u=Object.assign(sS,{defaultVisitor:l,convertValue:c,isVisitable:rS});if(!$E.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!$E.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+r.join("."));d.push(n),$E.forEach(n,(function(n,o){!0===(!($E.isUndefined(n)||null===n)&&i.call(t,n,$E.isString(o)?o.trim():o,r,u))&&e(n,r?r.concat(o):[o])})),d.pop()}}(e),t}function cS(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function lS(e,t){this._pairs=[],e&&aS(e,this,t)}const dS=lS.prototype;function uS(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function hS(e,t,n){if(!t)return e;const r=n&&n.encode||uS,i=n&&n.serialize;let o;if(o=i?i(t,n):$E.isURLSearchParams(t)?t.toString():new lS(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}dS.append=function(e,t){this._pairs.push([e,t])},dS.toString=function(e){const t=e?function(t){return e.call(this,t,cS)}:cS;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var pS=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){$E.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},fS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mS={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:lS,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const gS="undefined"!=typeof window&&"undefined"!=typeof document,yS=(vS="undefined"!=typeof navigator&&navigator.product,gS&&["ReactNative","NativeScript","NS"].indexOf(vS)<0);var vS;const _S="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts;var ES={...Object.freeze({__proto__:null,hasBrowserEnv:gS,hasStandardBrowserEnv:yS,hasStandardBrowserWebWorkerEnv:_S}),...mS};function SS(e){function t(e,n,r,i){let o=e[i++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=i>=e.length;return o=!o&&$E.isArray(r)?r.length:o,a?($E.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s):(r[o]&&$E.isObject(r[o])||(r[o]=[]),t(e,n,r[o],i)&&$E.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!s)}if($E.isFormData(e)&&$E.isFunction(e.entries)){const n={};return $E.forEachEntry(e,((e,r)=>{t(function(e){return $E.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null}const TS={transitional:fS,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=$E.isObject(e);if(i&&$E.isHTMLForm(e)&&(e=new FormData(e)),$E.isFormData(e))return r?JSON.stringify(SS(e)):e;if($E.isArrayBuffer(e)||$E.isBuffer(e)||$E.isStream(e)||$E.isFile(e)||$E.isBlob(e))return e;if($E.isArrayBufferView(e))return e.buffer;if($E.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return aS(e,new ES.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return ES.isNode&&$E.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=$E.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return aS(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if($E.isString(e))try{return(t||JSON.parse)(e),$E.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||TS.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&$E.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw eS.from(e,eS.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ES.classes.FormData,Blob:ES.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$E.forEach(["delete","get","head","post","put","patch"],(e=>{TS.headers[e]={}}));var bS=TS;const IS=$E.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),NS=Symbol("internals");function CS(e){return e&&String(e).trim().toLowerCase()}function wS(e){return!1===e||null==e?e:$E.isArray(e)?e.map(wS):String(e)}function RS(e,t,n,r,i){return $E.isFunction(r)?r.call(this,t,n):(i&&(t=n),$E.isString(t)?$E.isString(r)?-1!==t.indexOf(r):$E.isRegExp(r)?r.test(t):void 0:void 0)}class AS{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=CS(t);if(!i)throw new Error("header name must be a non-empty string");const o=$E.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=wS(e))}const o=(e,t)=>$E.forEach(e,((e,n)=>i(e,n,t)));return $E.isPlainObject(e)||e instanceof this.constructor?o(e,t):$E.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&IS[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=CS(e)){const n=$E.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if($E.isFunction(t))return t.call(this,e,n);if($E.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=CS(e)){const n=$E.findKey(this,e);return!(!n||void 0===this[n]||t&&!RS(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=CS(e)){const i=$E.findKey(n,e);!i||t&&!RS(0,n[i],i,t)||(delete n[i],r=!0)}}return $E.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!RS(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return $E.forEach(this,((r,i)=>{const o=$E.findKey(n,i);if(o)return t[o]=wS(r),void delete t[i];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();s!==i&&delete t[i],t[s]=wS(r),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return $E.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&$E.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[NS]=this[NS]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=CS(e);t[r]||(function(e,t){const n=$E.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return $E.isArray(e)?e.forEach(r):r(e),this}}AS.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),$E.reduceDescriptors(AS.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),$E.freezeMethods(AS);var OS=AS;function MS(e,t){const n=this||bS,r=t||n,i=OS.from(r.headers);let o=r.data;return $E.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function DS(e){return!(!e||!e.__CANCEL__)}function kS(e,t,n){eS.call(this,null==e?"canceled":e,eS.ERR_CANCELED,t,n),this.name="CanceledError"}$E.inherits(kS,eS,{__CANCEL__:!0});var xS=ES.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const s=[e+"="+encodeURIComponent(t)];$E.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),$E.isString(r)&&s.push("path="+r),$E.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function LS(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var PS=ES.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=$E.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};function jS(e,t){let n=0;const r=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=r[s];i||(i=c),n[o]=a,r[o]=c;let d=s,u=0;for(;d!==o;)u+=n[d++],d%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),c-i<t)return;const h=l&&c-l;return h?Math.round(1e3*u/h):void 0}}(50,250);return i=>{const o=i.loaded,s=i.lengthComputable?i.total:void 0,a=o-n,c=r(a);n=o;const l={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&o<=s?(s-o)/c:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}var US="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const i=OS.from(e.headers).normalize();let o,s,{responseType:a,withXSRFToken:c}=e;function l(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}if($E.isFormData(r))if(ES.hasStandardBrowserEnv||ES.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(s=i.getContentType())){const[e,...t]=s?s.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let d=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const u=LS(e.baseURL,e.url);function h(){if(!d)return;const r=OS.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new eS("Request failed with status code "+n.status,[eS.ERR_BAD_REQUEST,eS.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),l()}),(function(e){n(e),l()}),{data:a&&"text"!==a&&"json"!==a?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:r,config:e,request:d}),d=null}if(d.open(e.method.toUpperCase(),hS(u,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,"onloadend"in d?d.onloadend=h:d.onreadystatechange=function(){d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))&&setTimeout(h)},d.onabort=function(){d&&(n(new eS("Request aborted",eS.ECONNABORTED,e,d)),d=null)},d.onerror=function(){n(new eS("Network Error",eS.ERR_NETWORK,e,d)),d=null},d.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||fS;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new eS(t,r.clarifyTimeoutError?eS.ETIMEDOUT:eS.ECONNABORTED,e,d)),d=null},ES.hasStandardBrowserEnv&&(c&&$E.isFunction(c)&&(c=c(e)),c||!1!==c&&PS(u))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&xS.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in d&&$E.forEach(i.toJSON(),(function(e,t){d.setRequestHeader(t,e)})),$E.isUndefined(e.withCredentials)||(d.withCredentials=!!e.withCredentials),a&&"json"!==a&&(d.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",jS(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",jS(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=t=>{d&&(n(!t||t.type?new kS(null,e,d):t),d.abort(),d=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const p=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(u);p&&-1===ES.protocols.indexOf(p)?n(new eS("Unsupported protocol "+p+":",eS.ERR_BAD_REQUEST,e)):d.send(r||null)}))};const FS={http:null,xhr:US};$E.forEach(FS,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const zS=e=>"- ".concat(e),VS=e=>$E.isFunction(e)||null===e||!1===e;var BS={getAdapter:e=>{e=$E.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!VS(n)&&(r=FS[(t=String(n)).toLowerCase()],void 0===r))throw new eS("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+o]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));throw new eS("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(zS).join("\n"):" "+zS(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r},adapters:FS};function GS(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new kS(null,e)}function HS(e){return GS(e),e.headers=OS.from(e.headers),e.data=MS.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),BS.getAdapter(e.adapter||bS.adapter)(e).then((function(t){return GS(e),t.data=MS.call(e,e.transformResponse,t),t.headers=OS.from(t.headers),t}),(function(t){return DS(t)||(GS(e),t&&t.response&&(t.response.data=MS.call(e,e.transformResponse,t.response),t.response.headers=OS.from(t.response.headers))),Promise.reject(t)}))}const WS=e=>e instanceof OS?e.toJSON():e;function YS(e,t){t=t||{};const n={};function r(e,t,n){return $E.isPlainObject(e)&&$E.isPlainObject(t)?$E.merge.call({caseless:n},e,t):$E.isPlainObject(t)?$E.merge({},t):$E.isArray(t)?t.slice():t}function i(e,t,n){return $E.isUndefined(t)?$E.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!$E.isUndefined(t))return r(void 0,t)}function s(e,t){return $E.isUndefined(t)?$E.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t)=>i(WS(e),WS(t),!0)};return $E.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=c[r]||i,s=o(e[r],t[r],r);$E.isUndefined(s)&&o!==a||(n[r]=s)})),n}const qS="1.6.7",KS={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{KS[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const QS={};KS.transitional=function(e,t,n){function r(e,t){return"[Axios v"+qS+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new eS(r(i," has been removed"+(t?" in "+t:"")),eS.ERR_DEPRECATED);return t&&!QS[i]&&(QS[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};var JS={assertOptions:function(e,t,n){if("object"!=typeof e)throw new eS("options must be an object",eS.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const t=e[o],n=void 0===t||s(t,o,e);if(!0!==n)throw new eS("option "+o+" must be "+n,eS.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new eS("Unknown option "+o,eS.ERR_BAD_OPTION)}},validators:KS};const XS=JS.validators;let ZS=class{constructor(e){this.defaults=e,this.interceptors={request:new pS,response:new pS}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=YS(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&JS.assertOptions(n,{silentJSONParsing:XS.transitional(XS.boolean),forcedJSONParsing:XS.transitional(XS.boolean),clarifyTimeoutError:XS.transitional(XS.boolean)},!1),null!=r&&($E.isFunction(r)?t.paramsSerializer={serialize:r}:JS.assertOptions(r,{encode:XS.function,serialize:XS.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&$E.merge(i.common,i[t.method]);i&&$E.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=OS.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let d,u=0;if(!a){const e=[HS.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,c),d=e.length,l=Promise.resolve(t);u<d;)l=l.then(e[u++],e[u++]);return l}d=s.length;let h=t;for(u=0;u<d;){const t=s[u++],n=s[u++];try{h=t(h)}catch(e){n.call(this,e);break}}try{l=HS.call(this,h)}catch(e){return Promise.reject(e)}for(u=0,d=c.length;u<d;)l=l.then(c[u++],c[u++]);return l}getUri(e){return hS(LS((e=YS(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}};$E.forEach(["delete","get","head","options"],(function(e){ZS.prototype[e]=function(t,n){return this.request(YS(n||{},{method:e,url:t,data:(n||{}).data}))}})),$E.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(YS(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}ZS.prototype[e]=t(),ZS.prototype[e+"Form"]=t(!0)}));var $S=ZS;class eT{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new kS(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new eT((function(t){e=t})),cancel:e}}}var tT=eT;const nT={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(nT).forEach((e=>{let[t,n]=e;nT[n]=t}));var rT=nT;const iT=function e(t){const n=new $S(t),r=_E($S.prototype.request,n);return $E.extend(r,$S.prototype,n,{allOwnKeys:!0}),$E.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(YS(t,n))},r}(bS);iT.Axios=$S,iT.CanceledError=kS,iT.CancelToken=tT,iT.isCancel=DS,iT.VERSION=qS,iT.toFormData=aS,iT.AxiosError=eS,iT.Cancel=iT.CanceledError,iT.all=function(e){return Promise.all(e)},iT.spread=function(e){return function(t){return e.apply(null,t)}},iT.isAxiosError=function(e){return $E.isObject(e)&&!0===e.isAxiosError},iT.mergeConfig=YS,iT.AxiosHeaders=OS,iT.formToJSON=e=>SS($E.isHTMLForm(e)?new FormData(e):e),iT.getAdapter=BS.getAdapter,iT.HttpStatusCode=rT,iT.default=iT;var oT=iT;function sT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sT(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let cT,lT=0,dT=0;function uT(e,t,n,r){return new cv(((i,o)=>{t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),lT+=$_(t.data)):n&&(t.data.size?lT+=t.data.size:t.data instanceof FormData?lT+=eE(t.data):lT+=$_(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,oT.request(t).then((e=>{"string"==typeof e.data?dT+=$_(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?dT+=e.data.byteLength:dT+=$_(JSON.stringify(e.data)),r&&i({data:e.data,headers:e.headers}),i(e.data)})).catch((e=>{oT.isCancel(e)?o(new Wv(Hv.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?o(new Wv(Hv.NETWORK_TIMEOUT,e.message)):e.response?o(new Wv(Hv.NETWORK_RESPONSE_ERROR,e.response.status)):o(new Wv(Hv.NETWORK_ERROR,e.message))}))}))}async function hT(e,t){const n=new Blob([t.data],{type:"buffer"});return await uT(e,aT(aT({},t),{},{data:n,headers:{"Content-Type":"application/octet-stream"}}),!0)}const pT=()=>"HTTPS"===(cT||cT||(cT=(window.location.protocol.split(":")[0]||"").toUpperCase(),cT)),fT=()=>void 0!==window.isSecureContext,mT=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;const t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(t&&t[1]&&t[2]){const e=t[1],n=t[2];return"".concat(e,".").concat(n)}const n=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(n&&n[1]&&n[2]){const e=n[1],t=n[2];return"".concat(e,".").concat(100*(Number(t)+1))}return"4.0.0.999"}("4.20.2"),gT=function(){try{return!0===JSON.parse("true")}catch(e){return!0}}();var yT;!function(e){e.Default="default",e.Auto="auto",e.Relay="relay",e.SdRtn="sd-rtn"}(yT||(yT={}));const vT="v4.20.2-0-g8ae7fdad(3/20/2024, 4:48:46 PM)",_T={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TWCC:!1,PUBLISH_TWCC:!1,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],CONNECT_GATEWAY_WITHOUT_DOMAIN:!1,WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_PUB_RTX:!1,USE_SUB_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,CHECK_LOCAL_STATS_INTERVAL:100,PROFILE_SWITCH_INTERVAL:2e3,UNSUPPORTED_VIDEO_CODEC:[],ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_MAX_CONCURRENCY:6,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_GATEWAY_TRY_443PORT_DURATION:2e3,JOIN_GATEWAY_USE_443PORT_ONLY:!1,JOIN_GATEWAY_USE_DUAL_DOMAIN:!0,JOIN_GATEWAY_FALLBACK_PORT:443,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!1,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{excludedLinks:[]},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,DISABLE_FEC:void 0,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,DISABLE_DUAL_STREAM_USE_ENCODING:!1,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,ENABLE_USER_LICENSE_CHECK:!0,SIGNAL_CHANNEL:0,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,SVC:[],ENABLE_ENCODED_TRANSFORM:!1,ENABLE_VIDEO_SEI:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,SHOW_GLOBAL_CLIENT_LIST:!1,ENABLE_DATASTREAM_2:!1,DATASTREAM_MAX_RETRANSMITS:10,ENABLE_USER_AUTO_REBALANCE_CHECK:!0,ENABLE_INSTANT_VIDEO:!1,ENABLE_NTP_REPORT:!1,USE_XR:!1,TCP_CANDIDATE_ONLY:!1,EXTERNAL_SIGNAL_REQUEST_TIMEOUT:3e3,SHOW_P2P_LOG:!1,MAX_P2P_TIMEOUT:3e4,P2P_TOKEN_INTERVAL:1e3,SHOW_DATASTREAM2_LOG:!1,RESTRICTION_SET_PLAYBACK_DEVICE:!0,USE_PURE_ENCRYPTION_MASTER_KEY:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},FILTER_VIDEO_CODEC:[],PLUGIN_INFO:[]};function ET(e,t,n){var r,i;Rr(r=Object.keys(_T)).call(r,e)&&(!n&&Rr(i=Object.keys(TT)).call(i,e)||(_T[e]=t,"ENABLE_VIDEO_SEI"===e&&!0===t&&(_T.ENABLE_ENCODED_TRANSFORM=!0)))}function ST(e){return _T[e]}const TT={};function bT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function IT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bT(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var NT,CT,wT;!function(e){e.SET_SESSION_ID="SET_SESSION_ID",e.SET_P2P_ID="SET_P2P_id",e.SET_DC_ID="SET_DC_id",e.SET_UID="SET_UID",e.SET_INT_UID="SET_INT_UID",e.SET_PUB_ID="SET_PUB_ID",e.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",e.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",e.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",e.AVOID_JOIN_START="AVOID_JOIN_START",e.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",e.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",e.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",e.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",e.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",e.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",e.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",e.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",e.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",e.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",e.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",e.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",e.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",e.RESET_KEY_METRICS="RESET_KEY_METRICS",e.SET_USE_DATACHANNEL="SET_USE_DATACHANNEL",e.SET_USE_P2P="SET_USE_P2P",e.SET_TRANSPORT_TYPE="SET_TRANSPORT_TYPE"}(NT||(NT={}));class RT{constructor(e,t,n,r){oh(this,"state",void 0),this.state={codec:e,audioCodec:t,mode:n,clientId:r,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useDataChannel:!1,useP2P:!1,p2pTransport:yT.Default}}dispatch(e){this.state=function(e,t){switch(t.type){case NT.SET_SESSION_ID:return IT(IT({},e),{},{sessionId:t.sessionId});case NT.SET_P2P_ID:return IT(IT({},e),{},{p2pId:t.p2pId});case NT.SET_UID:return IT(IT({},e),{},{uid:t.uid});case NT.SET_INT_UID:return IT(IT({},e),{},{intUid:t.intUid});case NT.SET_PUB_ID:return IT(IT({},e),{},{pubId:t.pubId});case NT.KEY_METRIC_CLIENT_CREATED:return IT(IT({},e),{},{keyMetrics:IT(IT({},e.keyMetrics),{},{clientCreated:t.metric})});case NT.KEY_METRIC_JOIN_START:return IT(IT({},e),{},{keyMetrics:IT(IT({},e.keyMetrics),{},{joinStart:t.metric})});case NT.AVOID_JOIN_START:return IT(IT({},e),{},{avoidJoinStart:t.avoidJoinStart});case NT.KEY_METRIC_JOIN_END:return IT(IT({},e),{},{keyMetrics:IT(IT({},e.keyMetrics),{},{joinEnd:t.metric})});case NT.KEY_METRIC_REQUEST_AP_START:return IT(IT({},e),{},{keyMetrics:IT(IT({},e.keyMetrics),{},{requestAPStart:t.metric})});case NT.KEY_METRIC_REQUEST_AP_END:return IT(IT({},e),{},{keyMetrics:IT(IT({},e.keyMetrics),{},{requestAPEnd:t.metric})});case NT.KEY_METRIC_JOIN_GATEWAY_START:return IT(IT({},e),{},{keyMetrics:IT(IT({},e.keyMetrics),{},{joinGatewayStart:t.metric})});case NT.KEY_METRIC_JOIN_GATEWAY_END:return IT(IT({},e),{},{keyMetrics:IT(IT({},e.keyMetrics),{},{joinGatewayEnd:t.metric})});case NT.KEY_METRIC_PEER_CONNECTION_START:return IT(IT({},e),{},{keyMetrics:IT(IT({},e.keyMetrics),{},{peerConnectionStart:t.metric})});case NT.KEY_METRIC_PEER_CONNECTION_END:return IT(IT({},e),{},{keyMetrics:IT(IT({},e.keyMetrics),{},{peerConnectionEnd:t.metric})});case NT.KEY_METRIC_DESCRIPTION_START:return IT(IT({},e),{},{keyMetrics:IT(IT({},e.keyMetrics),{},{descriptionStart:t.metric})});case NT.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return IT(IT({},e),{},{keyMetrics:IT(IT({},e.keyMetrics),{},{signalChannelOpen:t.metric})});case NT.KEY_METRIC_ICE_CONNECTION_END:return IT(IT({},e),{},{keyMetrics:IT(IT({},e.keyMetrics),{},{iceConnectionEnd:t.metric})});case NT.KEY_METRIC_PUBLISH:{const n=e.keyMetrics.publish,r=n.findIndex((e=>e.trackId===t.metric.trackId));return-1!==r?(n[r]=IT(IT({},n[r]),t.metric),IT(IT({},e),{},{keyMetrics:IT(IT({},e.keyMetrics),{},{publish:[...n]})})):IT(IT({},e),{},{keyMetrics:IT(IT({},e.keyMetrics),{},{publish:[...e.keyMetrics.publish,t.metric]})})}case NT.KEY_METRIC_SUBSCRIBE:{const n=e.keyMetrics.subscribe,r=n.findIndex((e=>e.userId===t.metric.userId&&e.type===t.metric.type));return-1!==r?(n[r]=IT(IT({},n[r]),t.metric),IT(IT({},e),{},{keyMetrics:IT(IT({},e.keyMetrics),{},{subscribe:[...n]})})):IT(IT({},e),{},{keyMetrics:IT(IT({},e.keyMetrics),{},{subscribe:[...e.keyMetrics.subscribe,t.metric]})})}case NT.SET_CLOUD_PROXY_SERVER_MODE:return e.cloudProxyServerMode=t.mode,e;case NT.RECORD_JOIN_CHANNEL_SERVICE:return"number"!=typeof t.index?e.joinChannelServiceRecords=[...e.joinChannelServiceRecords,t.record]:(e.joinChannelServiceRecords[t.index]=IT(IT({},e.joinChannelServiceRecords[t.index]),t.record),e.joinChannelServiceRecords=[...e.joinChannelServiceRecords]),e;case NT.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return e.joinChannelServiceRecords=[],e;case NT.RESET_KEY_METRICS:return e.keyMetrics={publish:[],subscribe:[]},e;case NT.SET_USE_DATACHANNEL:return IT(IT({},e),{},{useDataChannel:t.val});case NT.SET_USE_P2P:return IT(IT({},e),{},{useP2P:t.val});case NT.SET_TRANSPORT_TYPE:return IT(IT({},e),{},{p2pTransport:t.val});default:return e}}(this.state,e)}set sessionId(e){this.dispatch({type:NT.SET_SESSION_ID,sessionId:e})}get sessionId(){return this.state.sessionId}set codec(e){this.state.codec=e}get codec(){return this.state.codec}get mode(){return this.state.mode}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(e){this.dispatch({type:NT.SET_P2P_ID,p2pId:e})}get p2pId(){return this.state.p2pId}set dcId(e){this.dispatch({type:NT.SET_DC_ID,dcId:e})}get dcId(){return this.state.dcId}set uid(e){this.dispatch({type:NT.SET_UID,uid:e})}get uid(){return this.state.uid}set intUid(e){this.dispatch({type:NT.SET_INT_UID,intUid:e})}get intUid(){return this.state.intUid}set pubId(e){this.dispatch({type:NT.SET_PUB_ID,pubId:e})}get pubId(){return this.state.pubId}set cloudProxyServerMode(e){this.dispatch({type:NT.SET_CLOUD_PROXY_SERVER_MODE,mode:e})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useDataChannel(e){this.dispatch({type:NT.SET_USE_DATACHANNEL,val:e})}get useDataChannel(){return this.state.useDataChannel}set useP2P(e){this.dispatch({type:NT.SET_USE_P2P,val:e})}get useP2P(){return this.state.useP2P}set p2pTransport(e){this.dispatch({type:NT.SET_TRANSPORT_TYPE,val:e})}get p2pTransport(){return this.state.p2pTransport}clientCreated(){this.dispatch({type:NT.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:NT.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:NT.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:NT.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:NT.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:NT.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:NT.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:NT.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:NT.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:NT.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:NT.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:NT.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(e,t,n,r){this.dispatch({type:NT.KEY_METRIC_PUBLISH,metric:IT(IT({trackId:e,type:t},n&&{publishStart:n}),r&&{publishEnd:r})})}subscribe(e,t,n,r,i,o,s){this.dispatch({type:NT.KEY_METRIC_SUBSCRIBE,metric:IT(IT(IT(IT(IT({userId:e,type:t},n&&{subscribeStart:n}),r&&{subscribeEnd:r}),i&&{firstFrame:i}),o&&{streamAdded:o}),s&&{firstDecoded:s})})}massSubscribe(e,t,n,r){e.forEach((e=>{this.dispatch({type:NT.KEY_METRIC_SUBSCRIBE,metric:IT(IT(IT({userId:e.userId,type:e.type},t&&{subscribeStart:t}),n&&{subscribeEnd:n}),r&&{firstFrame:r})})}))}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(e,t){"gateway"===e.service&&Array.isArray(e.urls)&&(e.urls=e.urls.map((e=>e.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2"))));try{return"number"!=typeof t?(this.dispatch({type:NT.RECORD_JOIN_CHANNEL_SERVICE,record:IT(IT({},e),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(t<0||t>=this.state.joinChannelServiceRecords.length||this.dispatch({type:NT.RECORD_JOIN_CHANNEL_SERVICE,record:e,index:t}),t)}catch(e){return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:NT.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:NT.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch(e){return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(e){this.dispatch({type:NT.AVOID_JOIN_START,avoidJoinStart:e})}}!function(e){e.h264="h264",e.h265="h265",e.vp8="vp8",e.vp9="vp9",e.av1="av1"}(CT||(CT={})),function(e){e.opus="opus",e.pcma="pcma",e.pcmu="pcmu",e.g722="g722"}(wT||(wT={}));const AT=128,OT=96,MT=1e3,DT=10;let kT=0;const xT=new class extends l_{reportLogUploadError(e){this.emit("REPORT_LOG_UPLOAD",e)}};class LT{constructor(e){oh(this,"logger",void 0),oh(this,"prefixLists",[]),this.logger=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(...this.prefixLists,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.info(...this.prefixLists,...t)}warning(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.warning(...this.prefixLists,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(...this.prefixLists,...t)}prefix(e){return this.prefixLists.push(e),this}popPrefix(){return this.prefixLists.pop(),this}}function PT(){const e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}function jT(){const e=new Date,t=/((\d+:){2}\d+)/.exec((new Date).toUTCString());return t?(null==t?void 0:t[0])+":"+e.getUTCMilliseconds():e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}const UT={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},FT=Date.now(),zT=e=>{for(const t in UT)if(Object.prototype.hasOwnProperty.call(UT,t)&&UT[t]===e)return t;return"DEFAULT"},VT=new class{constructor(){oh(this,"proxyServerURL",void 0),oh(this,"logLevel",UT.DEBUG),oh(this,"uploadState","collecting"),oh(this,"uploadLogWaitingList",[]),oh(this,"uploadLogUploadingList",[]),oh(this,"uploadErrorCount",0),oh(this,"currentLogID",0),oh(this,"url",void 0),oh(this,"extLog",((e,t)=>{this.appendLogToWaitingList(e,...t)}))}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[UT.DEBUG].concat(t);this.log.apply(this,r)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[UT.INFO].concat(t);this.log.apply(this,r)}warning(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[UT.WARNING].concat(t);this.log.apply(this,r)}warn(){this.warning(...arguments)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[UT.ERROR].concat(t);this.log.apply(this,r)}upload(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[UT.DEBUG].concat(t);this.uploadLog.apply(this,r)}setLogLevel(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}enableLogUpload(){ET("UPLOAD_LOG",!0)}disableLogUpload(){ET("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}prefix(e){return new LT(this).prefix(e)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Date.now()-FT<100)return void setTimeout((()=>{this.log(...t)}),Date.now()-FT);const r=Math.max(0,Math.min(4,t[0]));if(t[0]=PT()+" Agora-SDK [".concat(zT(r),"]:"),this.appendLogToWaitingList(r,...t),r<this.logLevel)return;const i=PT()+" %cAgora-SDK [".concat(zT(r),"]:");let o=[];if(!ST("USE_NEW_LOG"))switch(r){case UT.DEBUG:o=[i,"color: #64B5F6;"].concat(t.slice(1)),console.log.apply(console,o);break;case UT.INFO:o=[i,"color: #1E88E5; font-weight: bold;"].concat(t.slice(1)),console.log.apply(console,o);break;case UT.WARNING:o=[i,"color: #FB8C00; font-weight: bold;"].concat(t.slice(1)),console.warn.apply(console,o);break;case UT.ERROR:o=[i,"color: #B00020; font-weight: bold;"].concat(t.slice(1)),console.error.apply(console,o)}}uploadLog(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Date.now()-FT<100)return void setTimeout((()=>{this.uploadLog(...t)}),Date.now()-FT);const r=Math.max(0,Math.min(4,t[0]));t[0]=PT()+" Agora-SDK [".concat(zT(r),"]:"),this.appendLogToWaitingList(r,...t)}appendLogToWaitingList(e){if(!ST("UPLOAD_LOG"))return;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Array.isArray(n[0])?n[0][0]=jT()+" Agora-SDK [".concat(zT(e),"]:"):n[0]=jT()+" Agora-SDK [".concat(zT(e),"]:");let i="";n.forEach((e=>{"object"==typeof e&&(e=JSON.stringify(e)),i+="".concat(e," ")})),this.uploadLogWaitingList.push({payload_str:i,log_level:e,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}async uploadLogs(){const e=this.uploadLogUploadingList,t={sdk_version:mT,process_id:ST("PROCESS_ID"),payload:JSON.stringify(e)};return yE((async()=>{const e=await oT.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(ST("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(ST("LOG_UPLOAD_SERVER"),"/upload/v1")),t,{responseType:"text"});if("OK"!==e.data){const t=new Error("unexpected upload log response");throw t.response=e,t}}),(()=>(this.uploadLogUploadingList=[],!1)),(e=>(e.response?xT.reportLogUploadError({status:e.response.status,data:e.response.data,headers:e.response.headers,message:e.message}):e.request?xT.reportLogUploadError({status:e.request.status,message:e.message}):xT.reportLogUploadError({status:-1,message:e.message}),!0)),{timeout:ST("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:ST("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,ST("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then((()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout((()=>this.uploadLogInterval()),ST("UPLOAD_LOG_INTERVAL"))})).catch((e=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout((()=>this.uploadLogInterval()),ST("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout((()=>this.uploadLogInterval()),ST("UPLOAD_LOG_RETRY_INTERVAL_V1"))})))}};var BT,GT;function HT(e){return Jv(e.reportId,"params.reportId",0,100,!1),Jv(e.category,"params.category",0,100,!1),Jv(e.event,"params.event",0,100,!1),Jv(e.label,"params.label",0,100,!1),Kv(e.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}!function(e){e.FREE="free",e.UPLOADING="uploading"}(BT||(BT={})),function(e){e[e.MISC=0]="MISC",e[e.INTERNAL_EVENT=1]="INTERNAL_EVENT",e[e.PUBLIC_EVENT=2]="PUBLIC_EVENT",e[e.WEB_EVENT=3]="WEB_EVENT",e[e.INTERNAL_API=4]="INTERNAL_API",e[e.WEB_API=5]="WEB_API",e[e.PUBLIC_API=6]="PUBLIC_API"}(GT||(GT={}));const WT={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};var YT,qT,KT,QT;function JT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JT(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.WS_COMPRESSOR_INIT="ws_compressor_init",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.REJOIN_GATEWAY="rejoin_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics",e.PC_STATS="pc_stats",e.UPDATE_REMOTE_RTPCAPABILITIES="update_remote_rtpCapabilities"}(YT||(YT={})),function(e){e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",e.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",e.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",e.PC_STATS="io.agora.pb.Wrtc.PCStats",e.UPDATE_REMOTE_RTPCAPABILITIES="io.agora.pb.Wrtc.UpdateRemoteRTPCapabilities"}(qT||(qT={})),function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(KT||(KT={})),function(e){e[e.SESSION=26]="SESSION",e[e.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",e[e.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",e[e.JOIN_GATEWAY=28]="JOIN_GATEWAY",e[e.PUBLISH=30]="PUBLISH",e[e.SUBSCRIBE=29]="SUBSCRIBE",e[e.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",e[e.STREAM_SWITCH=32]="STREAM_SWITCH",e[e.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",e[e.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",e[e.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",e[e.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",e[e.API_INVOKE=41]="API_INVOKE",e[e.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",e[e.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",e[e.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",e[e.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",e[e.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",e[e.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",e[e.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",e[e.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",e[e.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",e[e.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",e[e.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",e[e.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",e[e.USER_ANALYTICS=1e4]="USER_ANALYTICS",e[e.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(QT||(QT={}));class ZT{constructor(){oh(this,"baseInfoMap",new Map),oh(this,"proxyServer",void 0),oh(this,"eventUploadTimer",void 0),oh(this,"setSessionIdTimer",void 0),oh(this,"url",void 0),oh(this,"backupUrl",void 0),oh(this,"_appId",void 0),oh(this,"keyEventUploadPendingItems",[]),oh(this,"normalEventUploadPendingItems",[]),oh(this,"apiInvokeUploadPendingItems",[]),oh(this,"apiInvokeCount",0),oh(this,"ltsList",[]),oh(this,"lastSendNormalEventTime",Date.now()),oh(this,"customReportCounterTimer",void 0),oh(this,"customReportCount",0),oh(this,"extApiInvoke",(async e=>{for(const t of e){const e=XT(XT({},t),{},{sid:null,invokeId:++this.apiInvokeCount,tag:p_.TRACER});this.sendApiInvoke(e)}})),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),ST("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),ST("EVENT_REPORT_SEND_INTERVAL"))}getBaseInfoBySessionId(e){return this.baseInfoMap.get(e)}adjustSessionStartTime(e){if(!this.baseInfoMap.has(e)&&!this.baseInfoMap.get(e))return void VT.error("adjust session ".concat(e," start time, sid is not exist or info is undefined"));const t=this.baseInfoMap.get(e),n=Date.now(),r=t.startTime;t.startTime=n,VT.debug("rewrite session ".concat(e," startTime: ").concat(n," , ").concat(n-r,"ms")),this.baseInfoMap.set(e,t)}setAppId(e){this._appId=e}reportApiInvoke(e,t,n){t.timeout=t.timeout||6e4,t.reportResult=void 0===t.reportResult||t.reportResult;const r=Date.now();this.apiInvokeCount+=1;const i=this.apiInvokeCount,o=()=>({tag:t.tag,invokeId:i,sid:e,name:t.name,apiInvokeTime:r,options:t.options,states:t.states||null}),s=!!ST("SHOW_REPORT_INVOKER_LOG");s&&VT.info("".concat(t.name," start"),t.options);let a=!1;nE(t.timeout).then((()=>{a||(this.sendApiInvoke(XT(XT({},o()),{},{error:Hv.API_INVOKE_TIMEOUT,success:!1})),VT.debug("".concat(t.name," timeout")))}));const c=new Wv(Hv.UNEXPECTED_ERROR,"".concat(t.name,": this api invoke is end"));return{onSuccess:e=>{const r=()=>{if(a)throw c;return a=!0,this.sendApiInvoke(XT(XT({},o()),{},{success:!0},t.reportResult&&{result:e})),s&&VT.info("".concat(t.name," onSuccess")),e};return n?aE(r,t.name+"Success",n,(()=>a=!0)):r()},onError:e=>{const r=()=>{if(a)throw e;a=!0,this.sendApiInvoke(XT(XT({},o()),{},{success:!1,error:e})),s&&VT.info("".concat(t.name," onFailure"),e.toString())};return n?aE(r,t.name+"Error",n,(()=>a=!0)):r()}}}sessionInit(e,t){if(this.baseInfoMap.has(e))return;const n=Date.now(),r=this.createBaseInfo(e,n);r.cname=t.cname;const i=Object.assign({},{willUploadConsoleLog:ST("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:gT?"global":"oversea",areas:ST("AREAS")&&ST("AREAS").join(",")},t.extend),{stringUid:o,channelProfile:s,channelMode:a,isABTestSuccess:c,lsid:l,clientRole:d}=t,u=Date.now(),h=XT(XT({},r),{},{eventType:YT.SESSION_INIT,appid:t.appid,browser:navigator.userAgent,build:vT,lts:u,elapse:u-n,extend:JSON.stringify(i),mode:t.mode,process:ST("PROCESS_ID"),appType:ST("APP_TYPE"),success:!0,version:mT,stringUid:o,channelProfile:s,channelMode:a,isABTestSuccess:c,lsid:l,clientType:20,clientRole:d,serviceId:ST("PROCESS_ID"),extensionID:ST("PLUGIN_INFO").join(",")||""});this.send({type:qT.SESSION,data:h},!0)}joinChooseServer(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XT(XT({},r),{},{eventType:YT.JOIN_CHOOSE_SERVER,lts:i,eventElapse:i-t.lts,chooseServerAddr:t.csAddr,errorCode:t.ec,elapse:i-n.startTime,success:t.succ,chooseServerAddrList:JSON.stringify(t.serverList),uid:t.uid?parseInt(t.uid):null,cid:t.cid?parseInt(t.cid):null,chooseServerIp:t.csIp||"",opid:t.opid,unilbsServerIds:t.unilbsServerIds,extend:t.extend||void 0,isHttp3:t.isHttp3});this.send({type:qT.JOIN_CHOOSE_SERVER,data:o},!0)}reqUserAccount(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XT(XT({},r),{},{eventType:YT.REQ_USER_ACCOUNT,lts:i,success:t.success,serverAddress:t.serverAddr,stringUid:t.stringUid,uid:t.uid,errorCode:t.errorCode,elapse:i-n.startTime,eventElapse:i-t.lts,extend:JSON.stringify(t.extend)});this.send({type:qT.REQ_USER_ACCOUNT,data:o},!0)}joinGateway(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info;t.vid&&(r.vid=t.vid),r.uid=t.uid,r.cid=t.cid;const i=Date.now(),{firstSuccess:o,avoidJoinStartTime:s,isProxy:a,addr:c}=t,l=i-(o&&s?s:n.startTime),d=XT(XT({},r),{},{eventType:YT.JOIN_GATEWAY,lts:i,gatewayAddr:t.addr,success:t.succ,errorCode:t.ec,elapse:l,eventElapse:i-t.lts,firstSuccess:o,signalChannel:t.signalChannel}),u=d.success?1:0;if(t.succ&&(n.lastJoinSuccessTime=i),o)this.send({type:qT.JOIN_GATEWAY,data:d},!0);else{let e;if(c)if(a){const t=c.match(/h=(\d{1,3}-){3}\d{1,3}/g),n=c.match(/p=[0-9]{1,6}/g);e={isSuccess:u,gatewayIp:t&&t.length?t[0].split("=")[1].replace(/-/g,"."):"",port:n&&n.length?n[0].split("=")[1]:"",isProxy:a?1:0}}else{const t=c.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),n=c.match(/(:|p=)[0-9]{1,6}/g);e={isSuccess:u,gatewayIp:t&&t.length?t[0].split("//")[1].replace(/-/g,"."):"",port:n&&n.length?n[0].split(/:|p=/g)[1]:"",isProxy:a?1:0}}else e={isSuccess:u,gatewayIp:"",port:"",isProxy:a?1:0};delete d.success,delete d.eventType,delete d.firstSuccess,d.vid=Number(d.vid);const t=Object.assign({},d,e,{eventType:YT.REJOIN_GATEWAY});this.send({type:qT.RE_JOIN_GATEWAY,data:t},!0)}}joinChannelTimeout(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=Date.now(),i=XT(XT({},n.info),{},{lts:r,timeout:t,elapse:r-n.startTime});this.send({type:qT.JOIN_CHANNEL_TIMEOUT,data:i},!0)}publish(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XT(XT({},r),{},{eventType:YT.PUBLISH,lts:i,eventElapse:t.eventElapse,elapse:i-n.startTime,success:t.succ,errorCode:t.ec,videoName:t.videoName,audioName:t.audioName,screenName:t.screenName,screenshare:t.screenshare,audio:t.audio,video:t.video,p2pid:t.p2pid,publishRequestid:t.publishRequestid});this.send({type:qT.PUBLISH,data:o},!0)}subscribe(e,t,n){const r=this.baseInfoMap.get(e);if(!r)return;const i=r.info,o=Date.now(),s=XT(XT({},i),{},{eventType:YT.SUBSCRIBE,lts:o,eventElapse:t.eventElapse,elapse:o-r.startTime,success:t.succ,errorCode:t.ec,video:t.video,audio:t.audio,subscribeRequestid:t.subscribeRequestid,p2pid:t.p2pid},n&&{extend:JSON.stringify({isMassSubscribe:!0})});"string"==typeof t.peerid?s.peerSuid=t.peerid:s.peer=t.peerid,this.send({type:qT.SUBSCRIBE,data:s},!0)}wsCompressorInit(e){var t;const n=[...ph(t=this.baseInfoMap).call(t)],r=n.length?n[0]:"UnableToGetSid",i=this.baseInfoMap.get(r);if(!i)return;const o=i.info,s=Date.now(),a=XT(XT({},o),{},{eventType:YT.WS_COMPRESSOR_INIT,lts:s,eventElapse:e.eventElapse,elapse:s-i.startTime,status:e.status?1:2});this.send({type:qT.WS_COMPRESSOR_INIT,data:a},!0)}firstRemoteVideoDecode(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const o=i.info,s=Date.now(),a=XT(XT(XT({},o),r),{},{elapse:s-i.startTime,eventType:t,lts:s,firstDecodeFrame:Math.max(s-i.startTime,0),apEnd:Math.max(r.apEnd-i.startTime,0),apStart:Math.max(r.apStart-i.startTime,0),joinGwEnd:Math.max(r.joinGwEnd-i.startTime,0),joinGwStart:Math.max(r.joinGwStart-i.startTime,0),pcEnd:Math.max(r.pcEnd-i.startTime,0),pcStart:Math.max(r.pcStart-i.startTime,0),subscriberEnd:Math.max(r.subscriberEnd-i.startTime,0),subscriberStart:Math.max(r.subscriberStart-i.startTime,0),videoAddNotify:Math.max(r.videoAddNotify-i.startTime,0)});this.send({type:n,data:a},!0)}firstRemoteFrame(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const o=i.info,s=Date.now(),a=XT(XT(XT({},o),r),{},{elapse:s-i.startTime,eventType:t,lts:s});this.send({type:n,data:a},!0)}pcStats(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XT(XT(XT({},r),t),{},{vid:void 0===r.vid?0:Number(r.vid),elapse:i-n.startTime,eventType:YT.PC_STATS,lts:i});this.send({type:qT.PC_STATS,data:o},!0)}updateRemoteRTPCapabilities(e,t){if(e){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XT(XT(XT({},r),t),{},{vid:void 0===r.vid?0:Number(r.vid),eventType:YT.UPDATE_REMOTE_RTPCAPABILITIES,lts:i});this.send({type:qT.UPDATE_REMOTE_RTPCAPABILITIES,data:o},!0)}}onGatewayStream(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const o=i.info,s=Date.now(),a=XT(XT(XT({},o),r),{},{eventType:t,lts:s});this.send({type:n,data:a},!0)}streamSwitch(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XT(XT({},r),{},{eventType:YT.STREAM_SWITCH,lts:i,isDual:t.isdual,elapse:i-n.startTime,success:t.succ});this.send({type:qT.STREAM_SWITCH,data:o},!0)}requestProxyAppCenter(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XT(XT({},r),{},{eventType:YT.REQUEST_PROXY_APPCENTER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,APAddr:t.APAddr,workerManagerList:t.workerManagerList,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:qT.REQUEST_PROXY_APPCENTER,data:o},!0)}requestProxyWorkerManager(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XT(XT({},r),{},{eventType:YT.REQUEST_PROXY_WORKER_MANAGER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,workerManagerAddr:t.workerManagerAddr,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:qT.REQUEST_PROXY_WORKER_MANAGER,data:o},!0)}setProxyServer(e){this.proxyServer=e,e?VT.debug("reportProxyServerurl: ".concat(e)):VT.debug("disable reportProxyServerurl: ".concat(e))}peerPublishStatus(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XT(XT({},r),{},{subscribeElapse:t.subscribeElapse,peer:t.peer,peerPublishDuration:Math.max(t.audioPublishDuration,t.videoPublishDuration),audiotag:t.audioPublishDuration>0?1:-1,videotag:t.videoPublishDuration>0?1:-1,lts:i,elapse:i-n.startTime,joinChannelSuccessElapse:i-(n.lastJoinSuccessTime||i),peerPublishDurationVideo:t.videoPublishDuration,peerPublishDurationAudio:t.audioPublishDuration});this.send({type:qT.PEER_PUBLISH_STATUS,data:o},!0)}workerEvent(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=function(e,t,n){const r=e[t];if(!r||"string"!=typeof r)return[e];e[t]="";const i=$_(JSON.stringify(e));let o=0;const s=[];let a=0;for(let c=0;c<r.length;c++)a+=r.charCodeAt(c)<=127?1:3,a<=n-i||(s[s.length]=B_(B_({},e),{},{[t]:r.substring(o,c)}),o=c,a=r.charCodeAt(c)<=127?1:3);return o!==r.length-1&&(s[s.length]=B_(B_({},e),{},{[t]:r.substring(o)})),s}(XT(XT(XT({},r),t),{},{elapse:i-n.startTime,lts:i,productType:"WebRTC"}),"payload",1300);o.forEach((e=>this.send({type:qT.WORKER_EVENT,data:e},!0)))}apworkerEvent(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XT(XT(XT({},r),t),{},{elapse:i-n.startTime,lts:i});this.send({type:qT.AP_WORKER_EVENT,data:o},!0)}joinWebProxyAP(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XT(XT(XT({},r),t),{},{elapse:i-n.startTime,lts:i,extend:t.extend||void 0});this.send({type:qT.JOIN_WEB_PROXY_AP,data:o},!0)}WebSocketQuit(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XT(XT(XT({},r),t),{},{elapse:i-n.startTime,lts:i});this.send({type:qT.WEBSOCKET_QUIT,data:o},!0)}async sendCustomReportMessage(e,t){if(this.customReportCount+=t.length,this.customReportCount>ST("CUSTOM_REPORT_LIMIT"))throw new Wv(Hv.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval((()=>{this.customReportCount=0}),5e3));const n=Date.now(),r=t.map((t=>({type:qT.USER_ANALYTICS,data:XT(XT({sid:e},t),{},{lts:n})})));try{ST("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(r):await this.postDataToStatsCollector(r)}catch(e){throw VT.error("send custom report message failed",e.toString()),new Wv(Hv.CUSTOM_REPORT_SEND_FAILED,e.message)}}sendApiInvoke(e){const t=ST("NOT_REPORT_EVENT");if(e.tag&&Rr(t)&&Rr(t).call(t,e.tag))return!1;if(null===e.sid)return this.apiInvokeUploadPendingItems.push(e),!1;const n=this.baseInfoMap.get(e.sid);if(!n)return this.apiInvokeUploadPendingItems.push(e),!1;const{cname:r,uid:i,cid:o}=n.info;let s;if(e.lts=e.lts||Date.now(),e.error)if(e.error instanceof Wv){const{code:t,message:n}=e.error;s=t||n||e.error.toString()}else s=e.error.toString();const a={invokeId:e.invokeId,sid:e.sid,cname:r,cid:o,uid:i,lts:e.lts,success:e.success,elapse:e.lts-n.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?JSON.stringify(e.options):void 0,execStates:e.states?JSON.stringify(e.states):void 0,execResult:e.result?JSON.stringify(e.result):void 0,errorCode:e.error?s:void 0,errorMsg:e.error?JSON.stringify(e.error):void 0};return this.send({type:qT.API_INVOKE,data:a},!1),!0}appendSessionId(){ZT.__CLIENT_LIST__.forEach((e=>{if(e._sessionId){const t=this.apiInvokeUploadPendingItems.length;for(let n=0;n<t;n++){const t=this.apiInvokeUploadPendingItems.shift();t&&(t.sid=e._sessionId,this.sendApiInvoke(Object.assign({},t)))}}}))}send(e,t){if(t)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>ST("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(e,t){const n=[],r=[];for(;e.length;){const t=e.shift();n.length<20?n.push(t):r.push(t)}e.push(...r);for(const o of[...n]){var i;-1!==this.ltsList.indexOf(o.data.lts)?(o.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(o.data.lts)):(this.ltsList.push(o.data.lts),ep(i=this.ltsList).call(i,((e,t)=>e-t)))}return t||(this.lastSendNormalEventTime=Date.now()),ST("ENABLE_EVENT_REPORT")?(n.length&&(ST("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(n):this.postDataToStatsCollector(n)).catch((e=>n=>{ST("EVENT_REPORT_RETRY")&&(t?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(e):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(e),this.normalEventUploadPendingItems.length>ST("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-ST("NORMAL_EVENT_QUEUE_CAPACITY")),VT.warning("report: drop normal events"))))})(n)),e):e}async postDataToStatsCollector2(e){R_.networkState===v_.OFFLINE&&await cv.race([R_.onlineWaiter,nE(2*mE.maxRetryTimeout)]);const t=e=>{let t=new Uint8Array;return e.forEach((e=>{const n=o_(JSON.stringify(e.data)),r=new ArrayBuffer(5),i=(e=>{let t=0;return Object.entries(qT).forEach((n=>{let[r,i]=n;i===e.type&&(t=EventNameToID[r])})),t})(e),o=new DataView(r);o.setUint16(0,n.byteLength,!0),o.setUint8(2,255&i),o.setUint8(3,i>>>8&255),o.setUint8(4,i>>>16&255),t=s_(t,new Uint8Array(r)),t=s_(t,n)})),t},n="event";let r=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(ST("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(n):"https://".concat(ST("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(n);for(let i=0;i<2;i+=1){1===i&&(r=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(ST("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(n):"https://".concat(ST("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(n));try{await uT(r,{timeout:1e4,data:t(e),headers:XT(XT({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(e){if(1===i)throw e;continue}return}}async postDataToStatsCollector(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:e.map((e=>JSON.stringify(e))),vid:(e=>{const t=e&&e.data.sid&&this.baseInfoMap.get(e.data.sid);return t&&t.info.vid&&+t.info.vid||0})(e[0])};R_.networkState===v_.OFFLINE&&await cv.race([R_.onlineWaiter,nE(2*mE.maxRetryTimeout)]);const r=t?"/events/proto-raws":"/events/messages";let i=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(ST("EVENT_REPORT_DOMAIN"),"&p=").concat(ST("STATS_COLLECTOR_PORT"),"&d=").concat(r):"https://".concat(ST("EVENT_REPORT_DOMAIN"),":").concat(ST("STATS_COLLECTOR_PORT")).concat(r));for(let o=0;o<2;o+=1){1===o&&(i=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(ST("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(ST("STATS_COLLECTOR_PORT"),"&d=").concat(r):"https://".concat(ST("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(ST("STATS_COLLECTOR_PORT")).concat(r)));try{t?await hT(i,{timeout:1e4,data:n}):await uT(i,{timeout:1e4,data:n})}catch(t){if(1===o)throw t;continue}return}}createBaseInfo(e,t){const n=Object.assign({},WT);return n.sid=e,this.baseInfoMap.set(e,{info:n,startTime:t}),n}reportResourceTiming(e,t){const n=performance.getEntriesByName(e),r=n[n.length-1];r&&this.reportApiInvoke(t,{name:"Client.resourceTiming",options:r,tag:p_.TRACER}).onSuccess()}}function $T(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){const i=r.value;if("function"==typeof i){const o=e.className||t.__className__||("AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name);r.value=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];let a=r;if(e.argsMap)try{a=e.argsMap(this,...r)}catch(e){VT.warning(e),a=[]}try{JSON.stringify(a)}catch(e){VT.warning("arguments for method ".concat(o,".").concat(String(n)," not serializable for apiInvoke.")),a=[]}const c=(e.report||eb).reportApiInvoke(this._sessionId||null,{name:"".concat(o,".").concat(String(n)),options:a,tag:p_.TRACER,reportResult:e.reportResult},e.throttleTime);try{const t=i.apply(this,r);return t instanceof cv?t.then((t=>(c.onSuccess(e.reportResult&&t),t))).catch((e=>{throw c.onError(e),e})):(c.onSuccess(e.reportResult&&t),t)}catch(e){throw c.onError(e),e}}}return r}}oh(ZT,"__CLIENT_LIST__",[]);const eb=new ZT;xT.on("REPORT_LOG_UPLOAD",(e=>{e.networkState=R_.networkState,eb.reportApiInvoke(null,{name:"logUploadError",options:e,tag:p_.TRACER})}));const tb=["CHINA","GLOBAL"],nb=function(){const e="us".concat("erna","me"),t="pa".concat("sswo","rd"),n=["t","s","t"];n.splice(1,0,"e");const r=n.join(""),i=[];for(let a=0;a<6;a++)i.push("1");const o=i.join(""),s={};return s[e]=r,s[t]=o,Object.assign(s,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=nb,gT||(_T.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],_T.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],_T.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],_T.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],_T.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],_T.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],_T.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",_T.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",_T.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",_T.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",_T.AREAS=["NORTH_AMERICA","OVERSEA"]);const rb=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],ib=[];function ob(e,t){return!!t&&ib.some((n=>n.uid===e&&n.channelName===t))}ZT.__CLIENT_LIST__=ib;var sb,ab,cb,lb,db,ub,hb,pb,fb,mb,gb,yb,vb,_b,Eb,Sb,Tb,bb=Jn("Array").values,Ib=ur,Nb=$e,Cb=u,wb=bb,Rb=Array.prototype,Ab={DOMTokenList:!0,NodeList:!0},Ob=r((function(e){var t=e.values;return e===Rb||Cb(Rb,e)&&t===Rb.values||Nb(Ab,Ib(e))?wb:t}));function Mb(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function Db(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}!function(e){e.L1T1="L1T1",e.L1T2="L1T2",e.L1T3="L1T3",e.L2T1_KEY="L2T1_KEY",e.L2T2_KEY="L2T2_KEY",e.L2T3_KEY="L2T3_KEY",e.L3T1_KEY="L3T1_KEY",e.L3T2_KEY="L3T2_KEY",e.L3T3_KEY="L3T3_KEY"}(sb||(sb={})),function(e){e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver"}(ab||(ab={})),function(e){e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(cb||(cb={})),function(e){e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(lb||(lb={})),function(e){e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(db||(db={})),function(e){e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",e[e.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(ub||(ub={})),function(e){e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.K_AUTO_REBALANCE=28]="K_AUTO_REBALANCE",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",e[e.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",e[e.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",e[e.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",e[e.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",e[e.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",e[e.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(hb||(hb={})),function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed"}(pb||(pb={})),function(e){e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",e.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.ABORT_P2P_EXECUTION="abort_p2p_execution",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success",e.JOIN_RESPONSE="join_response",e.DATACHANNEL_PRECONNECT="datachannel_preconnect",e.DATACHANNEL_CONNECTING="datachannel_connecting",e.DATACHANNEL_FAILBACK="datachannel_failback",e.P2P_CONNECTION="p2p_connection",e.P2P_REMOTE_CANDIDATE_UPDATE="p2p_remote_candidate_update",e.P2P_SUBSCRIBE="p2p_subscribe",e.P2P_UNSUBSCRIBE="p2p_unsubscribe",e.P2P_EXCHANGE_SDP="p2p_exchange_sdp",e.P2P_ON_ADD_VIDEO_STREAM="p2p_on_add_video_stream",e.P2P_ON_ADD_AUDIO_STREAM="p2p_on_add_audio_stream"}(fb||(fb={})),function(e){e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v3",e.REJOIN="rejoin_v3",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.PUBLISH_DATASTREAM="publish_datastream",e.UNPUBLISH="unpublish",e.UNPUBLISH_DATASTREAM="unpublish_datastream",e.SUBSCRIBE="subscribe",e.PRE_SUBSCRIBE="pre_subscribe",e.SUBSCRIBE_DATASTREAM="subscribe_datastream",e.SUBSCRIBE_STREAMS="subscribe_streams",e.UNSUBSCRIBE="unsubscribe",e.UNSUBSCRIBE_DATASTREAM="unsubscribe_datastream",e.UNSUBSCRIBE_STREAMS="unsubscribe_streams",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.DEFAULT_VIDEO_STREAM="default_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer",e.RESTART_ICE="restart_ice",e.CONNECT_PC="connect_pc",e.SET_VIDEO_PROFILE="set_video_profile",e.SET_PARAMETER="set_parameter",e.SET_RTM2_FLAG="set_rtm2_flag"}(mb||(mb={})),function(e){e.WRTC_STATS="wrtc_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",e.DENOISER_STATS="denoiser_stats",e.EXTENSION_USAGE_STATS="extension_usage_stats"}(gb||(gb={})),function(e){e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_USER_LICENSE_BANNED="on_user_license_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.ON_P2P_OK="on_p2p_ok",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ON_RTP_CAPABILITY_CHANGE="on_rtp_capability_change",e.ON_REMOTE_DATASTREAM_UPDATE="on_remote_datastream_update",e.ON_REMOTE_FULL_DATASTREAM_INFO="on_remote_full_datastream_info",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio",e.ON_PUBLISHED_USER_LIST="on_published_user_list"}(yb||(yb={})),function(e){e.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",e.NEED_ANSWER="NEED_ANSWER",e.NEED_RENEGOTIATE="NEED_RENEGOTIATE",e.P2P_LOST="P2P_LOST",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NEED_UNPUB="NEED_UNPUB",e.NEED_UNSUB="NEED_UNSUB",e.NEED_UPLOAD="NEED_UPLOAD",e.NEED_CONTROL="NEED_CONTROL",e.START_RECONNECT="START_RECONNECT",e.END_RECONNECT="END_RECONNECT",e.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(vb||(vb={})),function(e){e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY"}(_b||(_b={})),function(e){e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls",e.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire"}(Eb||(Eb={}));class kb extends Wv{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",arguments.length>2?arguments[2]:void 0),oh(this,"name","AgoraRTCException")}print(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";return super.print(e,VT)}throw(){super.throw(VT)}}function xb(e){if("string"!=typeof e||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e))throw VT.error("Invalid Channel Name ".concat(e)),new kb(Hv.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function Lb(e){if(!("number"==typeof(t=e)&&Math.floor(t)===t&&0<=t&&t<=4294967295||$v(e,1,255)))throw new kb(Hv.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var t;"string"==typeof e&&VT.warn("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}!function(e){e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e.INJECT="inject_streaming"}(Sb||(Sb={})),function(e){e[e.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",e[e.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",e[e.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",e[e.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",e[e.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",e[e.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",e[e.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",e[e.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",e[e.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",e[e.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",e[e.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(Tb||(Tb={}));const Pb={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},jb={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function Ub(e,t){Jv(e.url,"".concat(t,".url"),1,1e3,!1),Zv(e.x)||Kv(e.x,"".concat(t,".x"),0,1e4),Zv(e.y)||Kv(e.y,"".concat(t,".y"),0,1e4),Zv(e.width)||Kv(e.width,"".concat(t,".width"),0,1e4),Zv(e.height)||Kv(e.height,"".concat(t,".height"),0,1e4),Zv(e.zOrder)||Kv(e.zOrder,"".concat(t,".zOrder"),0,255),Zv(e.alpha)||Kv(e.alpha,"".concat(t,".alpha"),0,1,!1)}const Fb={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},zb={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};var Vb,Bb,Gb,Hb,Wb,Yb,qb,Kb,Qb,Jb,Xb,Zb,$b,eI;function tI(e){if(!e.channelName)throw new kb(Hv.INVALID_PARAMS,"invalid channelName in info");if("number"!=typeof e.uid)throw new kb(Hv.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&Jv(e.token,"info.token",1,2047),Lb(e.uid),xb(e.channelName),!0}!function(e){e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.INJECT_STREAM_STATUS="@live_uap-inject-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(Vb||(Vb={})),function(e){e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(Bb||(Bb={})),function(e){e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(Gb||(Gb={})),function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(Hb||(Hb={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(Wb||(Wb={})),function(e){e.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",e.NETWORK_CONNECTED="NETWORK_CONNECTED",e.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",e.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",e.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",e.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",e.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",e.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(Yb||(Yb={})),function(e){e.RELAY_STATE_IDLE="RELAY_STATE_IDLE",e.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",e.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",e.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(qb||(qb={})),function(e){e.RELAY_OK="RELAY_OK",e.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",e.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",e.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(Kb||(Kb={})),function(e){e.High="high",e.Low="low",e.Audio="audio",e.Screen="screen",e.ScreenLow="screen_low"}(Qb||(Qb={})),function(e){e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid",e.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",e.JOIN_RESPONSE="join-response",e.REQUEST_DC_CONNECTION_PARAMS="request-dc-connection-params",e.RESET_CONNECTION_EVENTS="reset-connection-events",e.DATACHANNEL_PRECONNECT="datachannel_preconnect",e.DATACHANNEL_FAILBACK="datachannel_failback",e.RESET_SIGNAL="reset-signal"}(Jb||(Jb={})),function(e){e.P2P_DISCONNECTED="P2P_DISCONNECTED",e.A_ROUND_WS_FAILED="A_ROUND_WS_FAILED",e.TIMEOUT="TIMEOUT",e.UNKNOWN_REASON="UNKNOWN_REASON"}(Xb||(Xb={})),function(e){e[e.Nothing=0]="Nothing",e[e.Audio=1]="Audio",e[e.LwoVideo=2]="LwoVideo",e[e.Video=4]="Video",e[e.Data=8]="Data",e[e.DataStream0=256]="DataStream0",e[e.DataStream1=512]="DataStream1",e[e.DataStream2=1024]="DataStream2",e[e.DataStream3=2048]="DataStream3",e[e.DataStream4=4096]="DataStream4",e[e.DataStream5=8192]="DataStream5",e[e.DataStream6=16384]="DataStream6",e[e.DataStream7=32768]="DataStream7"}(Zb||(Zb={})),function(e){e[e.websocket=0]="websocket",e[e.datachannel=1]="datachannel"}($b||($b={})),function(e){e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.KOREA="KOREA",e.HKMC="HKMC",e.US="US",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="EXTENSIONS"}(eI||(eI={}));const nI=[eI.AFRICA,eI.ASIA,eI.CHINA,eI.EUROPE,eI.GLOBAL,eI.INDIA,eI.JAPAN,eI.NORTH_AMERICA,eI.OCEANIA,eI.OVERSEA,eI.SOUTH_AMERICA];var rI;!function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.HKMC="HK",e.US="US",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="GLOBAL"}(rI||(rI={}));const iI={CHINA:{},ASIA:{CODE:rI.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:rI.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:rI.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:rI.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:rI.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:rI.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:rI.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:rI.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:rI.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:rI.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:rI.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:rI.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:rI.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};var oI,sI,aI,cI,lI,dI,uI,hI,pI,fI,mI,gI,yI,vI,_I,EI,SI,TI,bI,II,NI,CI,wI,RI;gT&&(iI.CHINA={CODE:rI.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(e){e.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(oI||(oI={}));class AI extends l_{constructor(e,t){super(),oh(this,"onICEConnectionStateChange",void 0),oh(this,"onConnectionStateChange",void 0),oh(this,"onDTLSTransportStateChange",void 0),oh(this,"onDTLSTransportError",void 0),oh(this,"onICETransportStateChange",void 0),oh(this,"onFirstAudioReceived",void 0),oh(this,"onFirstVideoReceived",void 0),oh(this,"onFirstAudioDecoded",void 0),oh(this,"onFirstVideoDecoded",void 0),oh(this,"onFirstVideoDecodedTimeout",void 0),oh(this,"onSelectedLocalCandidateChanged",void 0),oh(this,"onSelectedRemoteCandidateChanged",void 0)}}class OI extends AI{constructor(e,t){super(e,t)}}!function(e){e.SEND="sendonly",e.RECV="recvonly",e.SENDRECV="sendrecv",e.INACTIVE="inactive"}(sI||(sI={})),function(e){e.VIDEO="video",e.AUDIO="audio"}(aI||(aI={})),function(e){e[e.UDP=0]="UDP",e[e.TCP=1]="TCP",e[e.RELAY=2]="RELAY"}(cI||(cI={})),function(e){e[e.FIRST_CONNECTION=0]="FIRST_CONNECTION",e[e.TCP_RESTART=1]="TCP_RESTART",e[e.RELAY_RESTART=2]="RELAY_RESTART",e[e.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",e[e.OLD_RESTART=11]="OLD_RESTART",e[e.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED"}(lI||(lI={})),function(e){e.LocalVideoTrack="videoTrack",e.LocalAudioTrack="audioTrack",e.LocalVideoLowTrack="videoLowTrack"}(dI||(dI={})),function(e){e.New="new",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnected="disconnected"}(uI||(uI={})),function(e){e.StateChange="stateChange",e.IceConnectionStateChange="iceConnectionStateChange",e.RequestMuteLocal="requestMuteLocal",e.RequestUnmuteLocal="requestUnmuteLocal",e.RequestRePublish="requestRePublish",e.RequestRePublishDataChannel="requestRePublishDataChannel",e.RequestReSubscribe="requestReSubscribe",e.RequestUploadStats="requestUploadStats",e.RequestUpload="requestUpload",e.MediaReconnectStart="MediaReconnectStart",e.MediaReconnectEnd="MediaReconnectEnd",e.NeedSignalRTT="NeedSignalRTT",e.RequestRestartICE="RequestRestartIce",e.PeerConnectionStateChange="PeerConnectionStateChange",e.RequestReconnect="RequestReconnect",e.RequestReconnectPC="RequestReconnectPC",e.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",e.P2PLost="P2PLost",e.UpdateVideoEncoder="UpdateVideoEncoder",e.ConnectionTypeChange="ConnectionTypeChange",e.RequestLowStreamParameter="RequestLowStreamParameter",e.QueryClientConnectionState="QueryClientConnectionState",e.LocalCandidate="LocalCandidate",e.RequestP2PMuteLocal="requestP2PMuteLocal",e.RequestP2PUnPublish="RequestP2PUnPublish",e.RequestP2PUnmuteRemote="RequestP2PUnmuteRemote",e.RequestP2PMuteRemote="RequestP2PMuteRemote",e.RequestP2PRestartICE="RequestP2PRestartICE"}(hI||(hI={})),function(e){e.MUTE_LOCAL_VIDEO="mute_local_video",e.MUTE_LOCAL_AUDIO="mute_local_audio",e.UNMUTE_LOCAL_VIDEO="unmute_local_video",e.UNMUTE_LOCAL_AUDIO="unmute_local_audio",e.MUTE_REMOTE_VIDEO="mute_remote_video",e.MUTE_REMOTE_AUDIO="mute_remote_audio",e.UNMUTE_REMOTE_VIDEO="unmute_remote_video",e.UNMUTE_REMOTE_AUDIO="unmute_remote_audio"}(pI||(pI={})),function(e){e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED"}(fI||(fI={})),function(e){e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED"}(mI||(mI={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(gI||(gI={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK"}(yI||(yI={})),function(e){e.CONNECTED="transmitter:connected",e.RECONNECTING="transmitter:reconnecting",e.WILL_RECONNECT="transmitter:will_reconnect",e.CLOSED="transmitter:closed",e.FAILED="transmitter:failed",e.ON_MESSAGE="transmitter:on_message",e.REQUEST_NEW_URLS="transmitter:request_new_urls",e.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",e.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",e.FAILBACK="transmitter:failback"}(vI||(vI={})),function(e){e.CAMERA_CHANGED="camera-changed",e.MICROPHONE_CHANGED="microphone-changed",e.PLAYBACK_DEVICE_CHANGED="playback-device-changed",e.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",e.AUTOPLAY_FAILED="autoplay-failed",e.AUDIO_CONTEXT_STATE_CHANGED="audio-context-state-changed",e.SECURITY_POLICY_VIOLATION="security-policy-violation"}(_I||(_I={})),function(e){e[e.APP_TYPE_INVALID_VALUE=-1]="APP_TYPE_INVALID_VALUE",e[e.APP_TYPE_NATIVE=0]="APP_TYPE_NATIVE",e[e.APP_TYPE_NATIVE_COCOS=1]="APP_TYPE_NATIVE_COCOS",e[e.APP_TYPE_NATIVE_UNITY=2]="APP_TYPE_NATIVE_UNITY",e[e.APP_TYPE_NATIVE_ELECTRON=3]="APP_TYPE_NATIVE_ELECTRON",e[e.APP_TYPE_NATIVE_FLUTTER=4]="APP_TYPE_NATIVE_FLUTTER",e[e.APP_TYPE_NATIVE_UNREAL=5]="APP_TYPE_NATIVE_UNREAL",e[e.APP_TYPE_NATIVE_XAMARIN=6]="APP_TYPE_NATIVE_XAMARIN",e[e.APP_TYPE_NATIVE_API_CLOUD=7]="APP_TYPE_NATIVE_API_CLOUD",e[e.APP_TYPE_NATIVE_REACT_NATIVE=8]="APP_TYPE_NATIVE_REACT_NATIVE",e[e.APP_TYPE_NATIVE_PYTHON=9]="APP_TYPE_NATIVE_PYTHON",e[e.APP_TYPE_NATIVE_COCOS_CREATOR=10]="APP_TYPE_NATIVE_COCOS_CREATOR",e[e.APP_TYPE_NATIVE_RUST=11]="APP_TYPE_NATIVE_RUST",e[e.APP_TYPE_NATIVE_C_SHARP=12]="APP_TYPE_NATIVE_C_SHARP",e[e.APP_TYPE_NATIVE_CEF=13]="APP_TYPE_NATIVE_CEF",e[e.APP_TYPE_NATIVE_UNI_APP=14]="APP_TYPE_NATIVE_UNI_APP",e[e.APP_TYPE_WEBRTC=1e3]="APP_TYPE_WEBRTC",e[e.APP_TYPE_WEBRTC_REACT=1001]="APP_TYPE_WEBRTC_REACT",e[e.APP_TYPE_WEBRTC_VUE=1002]="APP_TYPE_WEBRTC_VUE",e[e.APP_TYPE_WEBRTC_ANGULAR=1003]="APP_TYPE_WEBRTC_ANGULAR"}(EI||(EI={})),function(e){e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED"}(SI||(SI={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(TI||(TI={})),function(e){e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED"}(bI||(bI={})),function(e){e.CALL="call",e.CANDIDATE="candidate",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.CONTROL="control",e.RESTART_ICE="restart_ice",e.ACK="ack",e.RESPONSE="response",e.JOIN="join",e.CHECK="check"}(II||(II={})),function(e){e.ABORT="abort"}(NI||(NI={})),function(e){e.MUTE_LOCAL_AUDIO="mute_local_audio",e.MUTE_LOCAL_VIDEO="mute_local_video",e.UNMUTE_LOCAL_AUDIO="unmute_local_audio",e.UNMUTE_LOCAL_VIDEO="unmute_local_video"}(CI||(CI={})),function(e){e[e.SUCCESS=1]="SUCCESS",e[e.FAILED=0]="FAILED"}(wI||(wI={})),function(e){e.P2P_TOKEN_TIMEOUT="p2p_token_timeout",e.P2P_TOKEN_CHANGED="p2p_token_changed"}(RI||(RI={}));const MI={[cb.ACCESS_POINT]:{[ub.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[ub.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[ub.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[ub.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[ub.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[ub.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[ub.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[ub.NO_SERVICE_AVAILABLE_VOICE]:{desc:"no unilbs voice service available",retry:!0},[ub.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[ub.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[ub.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[ub.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[ub.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[ub.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[ub.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[ub.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[ub.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[ub.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[cb.UNILBS]:{[db.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[db.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[db.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[db.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[db.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[db.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[db.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[db.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[db.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[db.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[db.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[db.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[cb.STRING_UID_ALLOCATOR]:{[lb.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[lb.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[lb.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function DI(e){const t=MI[Math.floor(e/1e4)];if(!t)return{desc:"unkonw error",retry:!1};const n=t[e%1e4];if(!n){if(Math.floor(e/1e4)===cb.ACCESS_POINT){const t=e%1e4;if("1"===t.toString()[0])return{desc:e.toString(),retry:!1};if("2"===t.toString()[0])return{desc:e.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return n}const kI={[hb.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[hb.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[hb.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[hb.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[hb.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[hb.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[hb.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[hb.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[hb.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[hb.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[hb.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[hb.K_AUTO_REBALANCE]:{desc:"k_AUTO_REBALANCE",action:"recover"},[hb.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[hb.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[hb.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[hb.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[hb.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[hb.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[hb.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[hb.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[hb.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[hb.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[hb.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[hb.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[hb.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[hb.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[hb.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[hb.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[hb.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[hb.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[hb.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[hb.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[hb.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[hb.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[hb.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[hb.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[hb.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[hb.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[hb.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[hb.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[hb.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[hb.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[hb.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[hb.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[hb.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[hb.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[hb.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[hb.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[hb.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[hb.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[hb.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[hb.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[hb.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[hb.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[hb.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[hb.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[hb.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[hb.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[hb.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[hb.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[hb.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[hb.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[hb.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function xI(e){return kI[e]||{desc:"UNKNOW_ERROR_".concat(e),action:"failed"}}function LI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LI(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jI(e){return e.every((e=>e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING))}function UI(e,t){if("string"==typeof e)return e;const{proxy:n,host:r,port:i}=e;if(t){const e=ST("JOIN_GATEWAY_FALLBACK_PORT")||443;return 443===e?"wss://".concat(r,"/ws/?p=").concat(Number(i)+150):"wss://".concat(r,":").concat(e,"/ws/?p=").concat(Number(i)+150)}return n?"wss://".concat(n,"/ws/?h=").concat(r,"&p=").concat(i):"wss://".concat(r,":").concat(i)}const FI=/wss:\/\/(.+)\/ws\/\?h=(.+)&p=([0-9]+)\/?/,zI=/wss:\/\/(.+)\/ws\/\?p=([0-9]+)\/?/,VI=/wss:\/\/(.+):([0-9]+)\/?/,BI=/wss:\/\/(.[^\/]+)\/?/;let GI=0;class HI{constructor(e,t){oh(this,"id",0),oh(this,"store",void 0),oh(this,"recordIndex",void 0),oh(this,"websockets",[]),oh(this,"try443PortDuration",2e3),oh(this,"forceCloseWSDuration",5e3),oh(this,"try443PortTimeout",null),oh(this,"forceCloseTimeout",null),oh(this,"isTry443PortFailed",!1),oh(this,"isNormalPortFailed",!1),oh(this,"useDoubleDomain",!1),oh(this,"useProxy",!1),oh(this,"startTime",Date.now()),this.id=++GI,this.try443PortDuration=ST("JOIN_GATEWAY_TRY_443PORT_DURATION")||2e3,this.forceCloseWSDuration=e||5e3,this.store=t}closeAllWebsockets(){this.websockets.forEach((e=>{e.onopen=null,e.onclose=null,e.onmessage=null,e.close()})),this.websockets.length=0}clearTimeout(){this.forceCloseTimeout&&clearTimeout(this.forceCloseTimeout),this.try443PortTimeout&&clearTimeout(this.try443PortTimeout)}logger(){var e;const t=Date.now()-this.startTime;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];VT.debug("[choose-best-ws ".concat(null===(e=this.store)||void 0===e?void 0:e.clientId," ").concat(this.id,"] ").concat(t,"ms:"),...r)}createWebSocket(e,t,n){this.logger("createWebSocket:",e,{isTry443Port:t,hasTimeoutDetection:n});const r=ST("GATEWAY_DOMAINS"),i=Date.now(),o=[],s=r.find((t=>{var n;return Rr(n=e.host).call(n,t)}));s||(this.useDoubleDomain=!1);const a=[];if(this.useDoubleDomain)r.forEach((n=>{a.push(UI(PI(PI({},e),{},{host:e.host.replace(s,n)}),t))}));else{const n=PI({},e);if(t&&s){const e=r.find((e=>e!==s));e&&(n.host=n.host.replace(s,e))}a.push(UI(n,t))}try{a.forEach((e=>{const t=new WebSocket(e);t.binaryType="arraybuffer",o.push(t),this.logger("ws is connecting:",t.url)}))}catch(r){if(this.logger("ws create failed"),o.forEach((e=>e.close())),o.length=0,this.useDoubleDomain)return this.useDoubleDomain=!1,this.createWebSocket(e,t,n);if(!t&&443!==Number(e.port))return this.createWebSocket(e,!0,n);throw new kb(Hv.WS_ERR,"init websocket failed! Error: ".concat(r.toString()))}const c=dv();return this.store&&this.store.recordJoinChannelService({urls:o.map((e=>e.url)),service:"gateway"},this.recordIndex),o.forEach((e=>{e.onopen=()=>{this.logger("onopen: ws ".concat(e.url," open cost ").concat(Date.now()-i,"ms")),this.websockets.forEach((t=>{t!==e&&(t.onopen=null,t.onclose=null,t.onmessage=null,t.close(),this.logger("close backup websocket: ".concat(t.url)))})),this.websockets.length=0,c.resolve(e)},e.onclose=n=>{this.logger("onclose: ws ".concat(e.url," closed cost ").concat(Date.now()-i,"ms state: ").concat(e.readyState)),t?this.isTry443PortFailed=jI(o):this.isNormalPortFailed=jI(o),this.logger("443: ".concat(this.useProxy?"not try":this.isTry443PortFailed?"failed":"trying"," 47xx: ").concat(this.isNormalPortFailed?"failed":"trying")),(t&&this.isTry443PortFailed||!t&&(this.isTry443PortFailed||this.useProxy)&&this.isNormalPortFailed)&&(this.logger("onclose: all websocket is closed, ".concat(n.reason)),c.reject({code:n.code,reason:Xb.A_ROUND_WS_FAILED}))},e.onmessage=t=>this.logger("".concat(e.url," onmessage: ").concat(t.data))})),this.websockets.push(...o),n||(()=>{const n=()=>{this.logger("5s timeout close un-opens, isWebsocket created: ",c.isResolved),this.websockets.forEach((e=>e.readyState!==WebSocket.OPEN&&e.close()))};if(t||this.useProxy)return this.logger("add 5s timeout at ".concat(t?"try-443":"proxy"," condition")),this.forceCloseTimeout=window.setTimeout(n,this.forceCloseWSDuration);this.try443PortTimeout=window.setTimeout((()=>{if(this.logger("2s timeout, isWebsocket created: ",c.isResolved),c.isResolved)return n();Ev().os===fv.MAC_OS&&Rv()&&n(),this.createWebSocket(e,!0,!0).then((e=>c.resolve(e))).catch((e=>{this.isNormalPortFailed&&c.reject(e),this.logger("try 443 port to create ws failed")})),this.forceCloseTimeout=window.setTimeout(n,this.forceCloseWSDuration)}),this.try443PortDuration)})(),c.promise}chooseBestWebsocket(e,t,n,r){return this.useDoubleDomain=!!t,"string"==typeof e&&(e=function(e){let t,n,r;return[,t,n,r]=e.match(FI)||[],t||([,n,r]=e.match(zI)||[]),n&&r||([,n,r]=e.match(VI)||[]),n&&r||([,n]=e.match(BI)||[]),n||VT.warning("un-destructible url: ",e),{proxy:t,host:n,port:r||"443"}}(e)),this.recordIndex=r,this.useProxy=!!e.proxy,n&&this.useProxy&&(VT.warn("cannot use 443 only when use proxy"),n=!1),this.createWebSocket(e,!!n,!1).finally((()=>this.clearTimeout()))}}function WI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}class YI extends l_{get url(){return this.websocket&&this.websocket.url||null}get reconnectMode(){return this._reconnectMode}set reconnectMode(e){var t;Rr(t=["tryNext","recover"]).call(t,e)&&this.resetReconnectCount(e),this._reconnectMode=e}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(Eb.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(Eb.CONNECTED):"closed"===this._state?this.emit(Eb.CLOSED):"failed"===this._state&&this.emit(Eb.FAILED))}resetReconnectCount(e){VT.debug("websocket reset reconnect count, reason: "+e),this.reconnectCount=0}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0;super(),oh(this,"connectionID",0),oh(this,"currentURLIndex",0),oh(this,"urls",[]),oh(this,"_reconnectMode","tryNext"),oh(this,"reconnectReason",void 0),oh(this,"_initMutex",new pE("websocket")),oh(this,"name",void 0),oh(this,"_state","closed"),oh(this,"reconnectInterrupter",void 0),oh(this,"websocket",void 0),oh(this,"retryConfig",void 0),oh(this,"reconnectCount",0),oh(this,"forceCloseTimeout",5e3),oh(this,"onlineReconnectListener",void 0),oh(this,"useCompress",void 0),oh(this,"tryDoubleDomain",!1),oh(this,"use443PortOnly",!1),oh(this,"wsInflateLength",0),oh(this,"wsDeflateLength",0),oh(this,"closeEstablishingWs",(()=>{})),oh(this,"store",void 0),oh(this,"joinGatewayRecordIndex",void 0),this.store=o,this.name=e,this.retryConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WI(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t),this.useCompress=n,this.tryDoubleDomain=r,this.use443PortOnly=i;const{timeout:s,timeoutFactor:a}=t,c=Math.max(300,Math.floor(3*s/5)),l=Math.max(1.2,Math.floor(8*a)/10);v_.ONLINE&&(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=l),R_.on(__.NETWORK_STATE_CHANGE,((e,t)=>{e!==t&&(this.resetReconnectCount("network state change: ".concat(t," -> ").concat(e)),e===v_.ONLINE?(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=l):(this.retryConfig.timeout=s,this.retryConfig.timeoutFactor=a))}))}getConnection(){return this.websocket||void 0}async init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=await this._initMutex.lock();this.forceCloseTimeout=t,this.urls=e,this.state="connecting";try{const e=dv(),t=this.urls[this.currentURLIndex];this.createWebSocketConnection(t).then(e.resolve).catch(e.reject),this.once(Eb.CLOSED,(()=>{e.reject(new Wv(Hv.WS_DISCONNECT))})),this.once(Eb.CONNECTED,e.resolve),await e.promise}catch(e){}finally{n()}}close(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const e=this.websocket;t?setTimeout((()=>e.close()),500):e.close(),this.websocket=void 0}this.state=e?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(e,t){if(!this.websocket)return void VT.warning("[".concat(this.name,"] can not reconnect, no websocket"));void 0!==e&&(this.reconnectMode=e),VT.debug("[".concat(this.name,"] reconnect is triggered initiative")),"number"==typeof this.joinGatewayRecordIndex&&this.store&&this.store.recordJoinChannelService({status:"error",errors:[new Error(t)]},this.joinGatewayRecordIndex);const n=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),n&&n.bind(this.websocket)({code:9999,reason:t})}sendMessage(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new Wv(Hv.WS_ABORT,"websocket is not ready");try{t||(e=JSON.stringify(e)),this.websocket.send(e)}catch(e){throw new Wv(Hv.WS_ERR,"send websocket message error"+e.toString())}}setWsInflateData(e){this.wsDeflateLength=this.wsDeflateLength+e.originLength,this.wsInflateLength=this.wsInflateLength+e.compressedLength}getWsInflateData(){const e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(e){var t;const n=dv();this.connectionID+=1,this.joinGatewayRecordIndex=void 0;const r=e=>{var t;null===(t=this.store)||void 0===t||t.signalChannelOpen(),VT.debug("[".concat(this.name,"] websocket opened:"),e),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),n.resolve()},i=async e=>{var t;if(VT.debug("[".concat(this.name,"] websocket close ").concat(null===(t=this.websocket)||void 0===t?void 0:t.url,", code: ").concat(e.code,", reason: ").concat(e.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount>=this.retryConfig.maxRetryCount)n.reject(new Wv(Hv.WS_DISCONNECT,"websocket close: ".concat(e.code))),this.close();else{"connected"===this.state&&(this.reconnectReason=e.reason,this.state="reconnecting");const t=C_(this,Eb.WILL_RECONNECT,this.reconnectMode,e.reason)||this.reconnectMode,r=await this.reconnectWithAction(t);if("closed"===this.state)return void VT.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!r)return n.reject(new Wv(Hv.WS_DISCONNECT,"websocket reconnect failed: ".concat(e.code))),this.close(!0);n.resolve()}},o=e=>{this.emit(Eb.ON_MESSAGE,e)},s=e=>{VT.warn("[".concat(this.connectionID,"] ws open error ").concat(e))};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),ST("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(e=ST("GATEWAY_WSS_ADDRESS")),VT.debug("[".concat(this.name,"] start connect, url:"),e);const a=null===(t=this.store)||void 0===t?void 0:t.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});try{var c;const t=await this.chooseBestWebsocketConnection(e);this.websocket=t,r&&r(this.websocket.url),this.websocket.onclose=i,this.websocket.onmessage=o,this.websocket.onerror=s,null===(c=this.store)||void 0===c||c.recordJoinChannelService({endTs:Date.now(),status:"success"},a),this.joinGatewayRecordIndex=a}catch(e){const t="closed"===this.state,r=e instanceof Wv,o=r&&e.code===Hv.WS_ABORT,s=r&&e.code===Hv.WS_ERR,c=r?e.message:e&&(e.reason||e.toString());VT.warning("[choose-best-ws] chooseBestWebsocket error: ".concat(c)),this.store&&this.store.recordJoinChannelService({endTs:Date.now(),status:o?"aborted":"error",errors:[e]},a),t||s?(n.reject(t?new Wv(Hv.WS_DISCONNECT,"websocket is closed: ".concat(c)):new Wv(Hv.WS_ERR,"init websocket failed: ".concat(c))),s&&VT.error("[".concat(this.name,"] init websocket failed: ").concat(c))):i&&i(e)}return n.promise}async reconnectWithAction(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount)return!1;if(0===this.urls.length)return!1;if("closed"===this.state)return!1;VT.warning("[choose-best-ws] action: =>",e),this.onlineReconnectListener||R_.isOnline||!R_.onlineWaiter||(this.onlineReconnectListener=R_.onlineWaiter.then((()=>{this.onlineReconnectListener=void 0})));let n=!0;if(this.reconnectInterrupter=()=>n=!1,t){const t=gE(this.reconnectCount,this.retryConfig);VT.debug("[".concat(this.name,"] wait ").concat(t,"ms to reconnect websocket, mode: ").concat(e)),await cv.race([nE(t),this.onlineReconnectListener||new cv((()=>{}))])}if("closed"===this._state||!n)return!1;this.reconnectCount+=1;const r=async(e,t)=>{this.emit(Eb.RECONNECT_CREATE_CONNECTION,t),await this.createWebSocketConnection(e)};try{if("retry"===e)this.emit(Eb.RECONNECT_WAITTING_FINISH,e),await r(this.urls[this.currentURLIndex],e);else if("tryNext"===e){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return this.reconnectWithAction("recover",!1);VT.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),this.emit(Eb.RECONNECT_WAITTING_FINISH,e),await r(this.urls[this.currentURLIndex],e)}else"recover"===e&&(VT.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(Eb.RECONNECT_WAITTING_FINISH,e),this.urls=await I_(this,Eb.REQUEST_NEW_URLS),this.currentURLIndex=0,await r(this.urls[this.currentURLIndex],e))}catch(n){var i;VT.error("[".concat(this.name,"] reconnect failed ").concat(n&&n.toString()));const r=null==n||null===(i=n.data)||void 0===i?void 0:i.desc;return Array.isArray(r)&&Rr(r).call(r,"dynamic key expired")?(this.emit(Eb.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):this.reconnectWithAction(e,t)}return!0}}class qI extends YI{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){const n=dv(),r=function(e,t){return new HI(e,t)}(this.forceCloseTimeout,this.store);this.closeEstablishingWs=()=>{VT.debug("[choose-best-ws] close establishing websockets"),r.closeAllWebsockets(),n.reject(new Wv(Hv.WS_ABORT,"choose best websocket aborted"))};const i=ST("GATEWAY_DOMAINS");return VT.debug("[choose-best-ws] currentDomain: ",e,", domains: ",i,"total: ".concat(this.urls.length),"current: ".concat(this.currentURLIndex+1)),r.chooseBestWebsocket(e,this.tryDoubleDomain,this.use443PortOnly,t).then(n.resolve).catch(n.reject),n.promise.finally((()=>{this.closeEstablishingWs=void 0}))}}class KI extends YI{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){return new cv(((n,r)=>{let i=!1;const o=[];this.closeEstablishingWs=()=>{VT.debug("[choose-best-ws] close establishing websockets"),o.forEach((e=>{e.onclose=null,e.onopen=null,e.onmessage=null,e.close()})),r(new Wv(Hv.WS_ABORT,"choose best websocket aborted"))};const s=ST("GATEWAY_DOMAINS");let a;const c=e.indexOf("?h="),l=s.find((t=>-1!==c?Rr(e).call(e,t,c):Rr(e).call(e,t)));VT.debug("[choose-best-ws] currentDomain: ",l,", domains: ",s);let d=!this.tryDoubleDomain||!l;if(!d&&l){var u;const h=Date.now();try{s.forEach((t=>{const n=-1===c?e.replace(l,t):e.substr(0,c)+e.substr(c).replace(l,t),r=new WebSocket(n);r.binaryType="arraybuffer",o.push(r),VT.debug("[choose-best-ws] ws is connecting:",r.url)}))}catch(e){for(VT.debug("[choose-best-ws] ws create failed, fallback to single url"),o.forEach((e=>e.close()));o.length;)o.pop();d=!0}null===(u=this.store)||void 0===u||u.recordJoinChannelService({urls:o.map((e=>e.url)),service:"gateway"},t),o.forEach((e=>{e.onopen=()=>{if(i)return;const t=Date.now()-h;VT.debug("[choose-best-ws] ws open cost ".concat(t,"ms")),o.filter((t=>t!==e)).forEach((e=>{VT.debug("[choose-best-ws]close backup websocket: ".concat(e.url)),e.close()})),i=!0,n(e)},e.onclose=e=>{a=e,i||o.find((e=>!(e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING)))||(VT.debug("[choose-best-ws] all websocket is closed"),i=!0,r(a))},e.onmessage=t=>{VT.debug("[choose-best-ws]".concat(e.url," onmessage: ").concat(t.data))}})),nE(this.forceCloseTimeout).then((()=>{o.forEach((e=>{e.readyState!==WebSocket.OPEN&&e.close()}))}))}if(d){var h;let i;VT.debug("[choose-best-ws] use single url: ",e),null===(h=this.store)||void 0===h||h.recordJoinChannelService({urls:[e],service:"gateway"},t);try{i=new WebSocket(e),o.push(i),i.binaryType="arraybuffer"}catch(e){const n=new Wv(Hv.WS_ERR,"init websocket failed! Error: ".concat(e.toString()));return VT.error("[".concat(this.name,"]").concat(n)),void r(n)}i.onopen=()=>{n(i)},i.onclose=e=>{r(e)},i.onmessage=e=>{VT.debug("[choose-best-ws]".concat(i.url," onmessage: ").concat(e.data))},nE(this.forceCloseTimeout).then((()=>{i&&i.readyState!==WebSocket.OPEN&&i.close()}))}})).then((e=>(this.closeEstablishingWs=void 0,e))).catch((e=>{throw this.closeEstablishingWs=void 0,e}))}}class QI extends l_{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===pb.CONNECTED?this.emit(fb.WS_CONNECTED):e===pb.RECONNECTING?this.emit(fb.WS_RECONNECTING,this._websocketReconnectReason):e===pb.CLOSED&&this.emit(fb.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),oh(this,"_disconnectedReason",void 0),oh(this,"_websocketReconnectReason",void 0),oh(this,"_connectionState",pb.CLOSED),oh(this,"reconnectToken",void 0),oh(this,"websocket",void 0),oh(this,"openConnectionTime",void 0),oh(this,"clientId",void 0),oh(this,"lastMsgTime",Date.now()),oh(this,"uploadCache",[]),oh(this,"uploadCacheInterval",void 0),oh(this,"rttRolling",new vE(5)),oh(this,"pingpongTimer",void 0),oh(this,"wsInflateDataTimer",void 0),oh(this,"pingpongTimeoutCount",0),oh(this,"joinResponse",void 0),oh(this,"multiIpOption",void 0),oh(this,"initError",void 0),oh(this,"spec",void 0),oh(this,"store",void 0),oh(this,"onWebsocketMessage",(e=>{if(e.data instanceof ArrayBuffer)return void this.emit(fb.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")){if(this.emit(t._type,t._message),t._type===yb.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===yb.ON_USER_BANNED)switch(t._message.error_code){case 14:this.close(m_.UID_BANNED);break;case 15:this.close(m_.IP_BANNED);break;case 16:this.close(m_.CHANNEL_BANNED)}if(t._type===yb.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case hb.ERR_LICENSE_MISSING:this.close(m_.LICENSE_MISSING);break;case hb.ERR_LICENSE_EXPIRED:this.close(m_.LICENSE_EXPIRED);break;case hb.ERR_LICENSE_MINUTES_EXCEEDED:this.close(m_.LICENSE_MINUTES_EXCEEDED);break;case hb.ERR_LICENSE_PERIOD_INVALID:this.close(m_.LICENSE_PERIOD_INVALID);break;case hb.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(m_.LICENSE_MULTIPLE_SDK_SERVICE);break;case hb.ERR_LICENSE_ILLEGAL:this.close(m_.LICENSE_ILLEGAL);break;default:this.close()}}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new qI("gateway-".concat(this.clientId),this.spec.retryConfig,!0,ST("JOIN_GATEWAY_USE_DUAL_DOMAIN"),ST("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===pb.CONNECTED&&this.reconnect("retry",y_.OFFLINE)}))}async request(e,t,n,r){const i=rE(6,""),o={_id:i,_type:e,_message:t},s=this.websocket.connectionID,a=()=>new cv(((t,n)=>{if(this.connectionState===pb.CONNECTED)return t();const r=()=>{this.off(fb.WS_CLOSED,i),t()},i=()=>{this.off(fb.WS_CONNECTED,r),n(new kb(Hv.WS_ABORT))};this.once(fb.WS_CONNECTED,r),this.once(fb.WS_CLOSED,i),e!==mb.PUBLISH&&e!==mb.PUBLISH_DATASTREAM&&e!==mb.SUBSCRIBE&&e!==mb.SUBSCRIBE_DATASTREAM&&e!==mb.UNSUBSCRIBE&&e!==mb.UNSUBSCRIBE_DATASTREAM&&e!==mb.UNPUBLISH&&e!==mb.UNPUBLISH_DATASTREAM&&e!==mb.CONTROL&&e!==mb.RESTART_ICE||this.once(fb.DISCONNECT_P2P,(()=>{n(new kb(Hv.DISCONNECT_P2P))})),e!==mb.PUBLISH&&e!==mb.RESTART_ICE||this.once(fb.ABORT_P2P_EXECUTION,(()=>{n(new kb(Hv.DISCONNECT_P2P))}))}));if(this.connectionState!==pb.CONNECTING&&this.connectionState!==pb.RECONNECTING||e===mb.JOIN||e===mb.REJOIN||await a(),this.websocket.sendMessage(o,!0),r)return;const c=new cv(((n,r)=>{let o=!1;const a=(r,i)=>{o=!0,n({isSuccess:"success"===r,message:i||{}}),this.off(fb.WS_CLOSED,c),this.off(fb.WS_RECONNECTING,c),this.emit(fb.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),a);const c=()=>{r(new kb(Hv.WS_ABORT,"type: ".concat(e))),this.off(fb.WS_CLOSED,c),this.off(fb.WS_RECONNECTING,c),this.off("res-@".concat(i),a)};this.once(fb.WS_CLOSED,c),this.once(fb.WS_RECONNECTING,c),nE(ST("SIGNAL_REQUEST_TIMEOUT")).then((()=>{this.websocket.connectionID!==s||o||(VT.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(fb.REQUEST_TIMEOUT,e,t))}))}));let l=null;try{l=await c}catch(r){if(this.connectionState===pb.CLOSED||e===mb.LEAVE)throw new kb(Hv.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?r.throw():e===mb.JOIN||e===mb.REJOIN?null:(await a(),await this.request(e,t))}if(l.isSuccess)return l.message;const d=Number(l.message.error_code||l.message.code),u=xI(d),h=new kb(Hv.UNEXPECTED_RESPONSE,"".concat(u.desc,": ").concat(l.message.error_str),{code:d,data:l.message});return"success"===u.action?l.message:(VT.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(d,", message: ").concat(u.desc,", action: ").concat(u.action)),d===hb.ERR_TOO_MANY_BROADCASTERS?e===mb.JOIN||e===mb.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw():"failed"===u.action?h.throw():"quit"===u.action?(this.initError=h,this.close(),h.throw()):(d===hb.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,VT.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",y_.MULTI_IP)):this.reconnect(u.action,y_.SERVER_ERROR),e===mb.JOIN||e===mb.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new cv((n=>{const r=i=>{(!t||t(i))&&(this.off(e,r),n(i))};this.on(e,r)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void VT.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(gb.WRTC_STATS,t)}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(e){const t=ST("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(n),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==pb.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),ST("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}init(e,t){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new cv(((t,n)=>{this.once(fb.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(fb.WS_CLOSED,(()=>n(this.initError||new kb(Hv.WS_ABORT)))),this.connectionState=pb.CONNECTING,this.websocket.init(e).catch(n),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval((()=>{this.handleWsInflateData()}),2e4)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||m_.LEAVE,this.connectionState=pb.CLOSED,VT.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),e===m_.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new qI("gateway-".concat(this.clientId),this.spec.retryConfig,!0,ST("JOIN_GATEWAY_USE_DUAL_DOMAIN"),ST("JOIN_GATEWAY_USE_443PORT_ONLY"),this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(fb.ABORT_P2P_EXECUTION);const e=await I_(this,fb.REQUEST_JOIN_INFO),t=await this.request(mb.JOIN,e);if(!t)return this.emit(fb.REPORT_JOIN_GATEWAY,Xb.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(fb.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=pb.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new kb(Hv.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const e=w_(this,fb.REQUEST_REJOIN_INFO);e.token=this.reconnectToken;const t=await this.request(mb.REJOIN,e);return!!t&&(this.connectionState=pb.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),t.peers&&t.peers.forEach((e=>{this.emit(yb.ON_USER_ONLINE,{uid:e.uid}),e.audio&&this.emit(yb.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&this.emit(yb.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?this.emit(yb.MUTE_AUDIO,{uid:e.uid}):this.emit(yb.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(yb.MUTE_VIDEO,{uid:e.uid}):this.emit(yb.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(yb.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(yb.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(yb.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(yb.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(yb.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})})),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){VT.debug("[".concat(this.clientId,"] receive notification: "),e);const t=xI(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(m_.UID_BANNED),void this.close()):void this.reconnect(t.action,y_.SERVER_ERROR);VT.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=ST("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(VT.warning("[".concat(this.clientId,"] PING-PONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>ST("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",y_.TIMEOUT):this.request(mb.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),ST("REPORT_STATS")&&this.send(mb.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleWsInflateData(){const{wsInflateLength:e,wsDeflateLength:t}=this.websocket.getWsInflateData();0!==e&&0!==t&&this.upload(gb.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(Eb.RECONNECT_WAITTING_FINISH,(e=>{this.emit(fb.WS_RECONNECT_WAITTING_FINISH,e)})),this.websocket.on(Eb.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(fb.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(Eb.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Eb.CLOSED,(()=>{this.connectionState=pb.CLOSED})),this.websocket.on(Eb.FAILED,(()=>{this._disconnectedReason=m_.NETWORK_ERROR,this.connectionState=pb.CLOSED})),this.websocket.on(Eb.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===pb.CONNECTED?this.connectionState=pb.RECONNECTING:this.connectionState=pb.CONNECTING})),this.websocket.on(Eb.WILL_RECONNECT,((e,t,n)=>{const r=w_(this,fb.IS_P2P_DISCONNECTED),i=r||"retry"!==e;r&&"retry"===e&&(VT.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),e="tryNext",t=Xb.P2P_DISCONNECTED),i&&(VT.debug("".concat(this.clientId," will renewSession, reconnect mode: ").concat(e)),this.emit(fb.REPORT_JOIN_GATEWAY,t||Xb.UNKNOWN_REASON,this.url||""),this.reconnectToken=void 0,this.emit(fb.NEED_RENEW_SESSION),this.emit(fb.DISCONNECT_P2P)),n(e)})),this.websocket.on(Eb.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch((e=>{VT.warning("[".concat(this.clientId,"] rejoin failed ").concat(e)),this.reconnect("tryNext",y_.SERVER_ERROR)})):this.join().catch((e=>{if(this.emit(fb.REPORT_JOIN_GATEWAY,e.message||e.code||Xb.UNKNOWN_REASON,this.url||""),e instanceof kb&&e.code===Hv.UNEXPECTED_RESPONSE&&e.data.code===hb.ERR_NO_AUTHORIZED)return VT.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",y_.SERVER_ERROR);VT.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",y_.SERVER_ERROR):(this.initError=e,this.close())}))})),this.websocket.on(Eb.REQUEST_NEW_URLS,((e,t)=>{I_(this,fb.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(Eb.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(yb.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}))}}var JI="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",XI=J,ZI=fr,$I=JI,eN=d("".replace),tN=RegExp("^["+$I+"]+"),nN=RegExp("(^|[^"+$I+"])["+$I+"]+$"),rN=function(e){return function(t){var n=ZI(XI(t));return 1&e&&(n=eN(n,tN,"")),2&e&&(n=eN(n,nN,"$1")),n}},iN={start:rN(1),end:rN(2),trim:rN(3)},oN=Ql.PROPER,sN=i,aN=JI,cN=iN.trim;On({target:"String",proto:!0,forced:function(e){return sN((function(){return!!aN[e]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[e]()||oN&&aN[e].name!==e}))}("trim")},{trim:function(){return cN(this)}});var lN,dN,uN=Jn("String").trim,hN=u,pN=uN,fN=String.prototype,mN=r((function(e){var t=e.trim;return"string"==typeof e||e===fN||hN(fN,e)&&t===fN.trim?pN:t}));function gN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gN(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vN(e){return e.match(/^[\.\:\d]+$/)?"".concat(e.replace(/[^\d]/g,"-"),".").concat(ST("TURN_DOMAIN")):(VT.info("Unidentified as ip: ".concat(e,", use as host")),e)}function _N(e,t){e.addresses||(e.addresses=[]);const n=function(e,t){if(ST("CONNECT_GATEWAY_WITHOUT_DOMAIN"))return e.map((e=>{let{ip:t,port:n}=e;return{address:"".concat(t,":").concat(n)}}));const n=ST("GATEWAY_DOMAINS");let r=n[1]&&Rr(t).call(t,n[1])?1:0;return e.map((e=>{let{domain_prefix:t,port:i,ip:o}=e;if(t)return{address:"".concat(t,".").concat(n[r++%n.length],":").concat(i)};const s=/^[\.\:\d]+$/.test(o),a=s?"".concat(o.replace(/[^\d]/g,"-"),".").concat(n[r++%n.length],":").concat(i):"".concat(o,":").concat(i);return s||VT.info("Unidentified as ip: ".concat(o,", use as host")),{ip:o,port:i,address:a}}))}(e.addresses,t),r=Array.isArray(e.detail)&&e.detail[18];if(r&&"string"==typeof r){const e=r.split(";");for(let t=0;t<e.length;t++){var i;const r=mN(i=e[t]).call(i);n[t]&&r&&(n[t].ip6=r)}}return{gatewayAddrs:n,uid:e.uid,cid:e.cid,cert:e.cert,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function EN(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function SN(e){const t=e._encoderConfig;if(!t)return{};const n={resolution:t.width&&t.height?"".concat(EN(t.width),"x").concat(EN(t.height)):void 0,maxVideoBW:t.bitrateMax,minVideoBW:t.bitrateMin};return"number"==typeof t.frameRate?(n.maxFrameRate=t.frameRate,n.minFrameRate=t.frameRate):t.frameRate&&(n.maxFrameRate=t.frameRate.max||t.frameRate.ideal||t.frameRate.exact||t.frameRate.min,n.minFrameRate=t.frameRate.min||t.frameRate.ideal||t.frameRate.exact||t.frameRate.max),n}function TN(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function bN(e,t){let n,r,i;switch(t){case lN.CHOOSE_SERVER:r=4096,i="choose server";break;case lN.CLOUD_PROXY:r=1048576,i="proxy";break;case lN.CLOUD_PROXY_5:r=4194304,i="proxy5";break;case lN.CLOUD_PROXY_FALLBACK:r=4194310,i="proxy fallback";break;default:throw new kb(Hv.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(e.response_body.forEach((t=>{t.buffer&&t.buffer.flag===r&&(n={code:t.buffer.code,addresses:(t.buffer.edges_services||[]).map((e=>yN(yN({},e),{},{ticket:t.buffer.cert}))),server_ts:e.enter_ts,uid:t.buffer.uid,cid:t.buffer.cid,cname:t.buffer.cname,detail:yN(yN({},t.buffer.detail),e.detail),flag:t.buffer.flag,opid:e.opid,cert:t.buffer.cert})})),!n)throw new kb(Hv.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(i," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return n}async function IN(e,t){return await cv.all(e.addresses.map((async e=>({address:vN(e.ip),tcpport:e.port,udpport:e.port,username:t&&ST("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?t.toString():nb.username,password:t&&ST("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await c_(t.toString()):nb.password}))))}function NN(e,t){const n=t._videoHeight||t.getMediaStreamTrack(!0).getSettings().height;return n?Math.max(n/EN(e.height),1):(VT.warning("can't get ori-track's height, default scale down 4 times for low stream"),4)}function CN(e){let{candidateType:t,relayProtocol:n,type:r,address:i,port:o,protocol:s}=e;return"local-candidate"===r?{candidateType:t,relayProtocol:n,protocol:s}:{candidateType:t,relayProtocol:n,address:i,port:o,protocol:s}}function wN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}!function(e){e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",e[e.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"}(lN||(lN={}));class RN extends l_{get url(){return this._url?this._url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(e){var t;Rr(t=["tryNext","recover"]).call(t,e)&&this.resetReconnectCount(e),this._reconnectMode=e}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(vI.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(vI.CONNECTED):"closed"===this._state?this.emit(vI.CLOSED):"failed"===this._state&&this.emit(vI.FAILED))}constructor(e,t,n,r){super(),oh(this,"connectionID",0),oh(this,"currentURLIndex",0),oh(this,"reconnectReason",void 0),oh(this,"_reconnectMode","tryNext"),oh(this,"_name",void 0),oh(this,"_state","closed"),oh(this,"_retryConfig",void 0),oh(this,"_reconnectCount",0),oh(this,"_forceCloseTimeout",5e3),oh(this,"_onlineReconnectListener",void 0),oh(this,"_closeEstablishingTransmitter",(()=>{})),oh(this,"_store",void 0),oh(this,"_joinChannelServiceRecordIndex",void 0),oh(this,"_useCompress",void 0),oh(this,"_inflateLength",0),oh(this,"_deflateLength",0),this._store=r,this._name=e,this._retryConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wN(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t),this._useCompress=n}resetReconnectCount(e){VT.debug("".concat(this._name," reset reconnect count, reason: ").concat(e)),this._reconnectCount=0}close(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this._reconnectInterrupter&&this._reconnectInterrupter(),this._transmitter){this._transmitter.onclose=null,this._transmitter.onopen=null,this._transmitter.onmessage=null;const e=this._transmitter;t?setTimeout((()=>e.close()),500):e.close(),this._transmitter=void 0}this.state=e?"failed":"closed",this._closeEstablishingTransmitter&&this._closeEstablishingTransmitter()}reconnect(e,t){if(!this._transmitter)return void VT.warning("[".concat(this._name,"] can not reconnect, no websocket"));var n;void 0!==e&&(this.reconnectMode=e),VT.debug("[".concat(this._name,"] reconnect is triggered initiative")),"number"==typeof this._joinChannelServiceRecordIndex&&(null===(n=this._store)||void 0===n||n.recordJoinChannelService({status:"error",errors:[new Error(t)]},this._joinChannelServiceRecordIndex));const r=this._transmitter.onclose;this._transmitter.onclose=null,this._transmitter.close(),r&&r.bind(this._transmitter)({code:9999,reason:t})}getInflateData(){const e=this._inflateLength,t=this._deflateLength;return this.clearInflateData(),{inflateLength:e,deflateLength:t}}setInflateData(e){this._deflateLength=this._deflateLength+e.originLength,this._inflateLength=this._inflateLength+e.compressedLength}clearInflateData(){this._inflateLength=0,this._deflateLength=0}}!function(e){e[e.Default=0]="Default",e[e.Ack=1]="Ack"}(dN||(dN={}));class AN{constructor(e,t,n){oh(this,"version",1),oh(this,"initialRTO",void 0),oh(this,"maxBatchAckCount",void 0),oh(this,"maxRTO",void 0),oh(this,"initialRTT",void 0),oh(this,"ID",void 0),oh(this,"rtt",void 0),oh(this,"packetNumber",1),oh(this,"rtoRatioMap",new Map),oh(this,"timeoutMap",new Map),oh(this,"unorderedPacketQueue",[]),oh(this,"batchAckPacketQueue",[]),oh(this,"lastOrderedPacketNumber",0),oh(this,"batchAckTimer",void 0),oh(this,"sendImpl",void 0),oh(this,"receiveImpl",void 0),this.sendImpl=e,this.receiveImpl=t,this.ID=rE(7,"transmitter-"),this.initialRTO=void 0!==(null==n?void 0:n.initialRTO)?n.initialRTO:ST("TRANSMITTER_INITIAL_RTO"),this.initialRTT=void 0!==(null==n?void 0:n.initialRTT)?n.initialRTT:ST("TRANSMITTER_INITIAL_RTT"),this.rtt=void 0!==(null==n?void 0:n.initialRTT)?n.initialRTT:ST("TRANSMITTER_INITIAL_RTT"),this.maxBatchAckCount=void 0!==(null==n?void 0:n.maxBatchAckCount)?n.maxBatchAckCount:ST("TRANSMITTER_MAX_BATCH_ACK_COUNT"),this.maxRTO=void 0!==(null==n?void 0:n.maxRTO)?n.maxRTO:ST("TRANSMITTER_MAX_RTO")}packetize(e,t){return{type:dN.Default,version:this.version,packetNumber:t,payload:e}}serialize(e){switch(e.type){case dN.Default:{let t;t="string"==typeof e.payload?(new TextEncoder).encode(e.payload):e.payload;const n=new ArrayBuffer(t.length+15),r=new DataView(n);return r.setUint16(0,e.version),r.setUint8(2,e.type),r.setUint32(3,e.packetNumber),t_(r,7,BigInt(e.sendTs)),new Uint8Array(r.buffer).set(t,15),n}case dN.Ack:{const t=new ArrayBuffer(16),n=new DataView(t);return n.setUint16(0,e.version),n.setUint8(2,e.type),n.setUint32(3,e.maxAckPacketNumber),n.setUint8(7,e.shift),t_(n,8,BigInt(e.ackSendTs)),t}}}deserialize(e){const t=new DataView(e),n=t.getUint16(0),r=t.getUint8(2);switch(r){case dN.Default:{const i=t.getUint32(3),o=e_(t,7),s=e.slice(15),a=(new TextDecoder).decode(s);return{version:n,type:r,packetNumber:i,sendTs:Number(o),payload:a}}case dN.Ack:{const e=t.getUint32(3),i=t.getUint8(7),o=e_(t,8);return{version:n,type:r,maxAckPacketNumber:e,shift:i,ackSendTs:Number(o)}}default:throw VT.error("[".concat(this.ID,"] Unrecognized packet type ").concat(r)),new Error("Unrecognized packet type ".concat(r))}}sendMessage(e){const t=this.packetize(e,this.packetNumber);this.packetNumber=4294967295===this.packetNumber?1:this.packetNumber+1;const n=this.calculateRTO(t),r=window.setTimeout((()=>{this.resendMessage(t)}),n);this.timeoutMap.set(t.packetNumber,r),this.sendPacket(t)}onData(e){const t=this.deserialize(e);t.type===dN.Default?this.ack(t):t.type===dN.Ack&&(this.updateRTT(t,Math.round(performance.now())),this.clearRTO(t))}close(){this.rtt=this.initialRTT,this.packetNumber=1,Array.from(this.timeoutMap.entries()).forEach((e=>{let[t,n]=e;window.clearTimeout(n)})),this.timeoutMap=new Map,this.rtoRatioMap=new Map,this.unorderedPacketQueue=[],this.batchAckPacketQueue=[],this.lastOrderedPacketNumber=0,void 0!==this.batchAckTimer&&window.clearTimeout(this.batchAckTimer)}resendMessage(e){const t=this.calculateRTO(e),n=window.setTimeout((()=>{this.resendMessage(e)}),t);this.timeoutMap.set(e.packetNumber,n),this.sendPacket(e)}calculateRTO(e){const t=this.rtoRatioMap.get(e.packetNumber);if(void 0===t)return this.rtoRatioMap.set(e.packetNumber,1),this.initialRTO;{const n=9*this.rtt/8*t;return this.rtoRatioMap.set(e.packetNumber,t+1),n>this.maxRTO?this.maxRTO:n}}updateRTT(e,t){const n=e.ackSendTs;this.rtt=this.rtt*(7/8)+(t-n-this.rtt)/8}ack(e){if(e.packetNumber===this.lastOrderedPacketNumber+1)for(this.batchAckPacketQueue.length>=this.maxBatchAckCount&&this.batchAck(),this.batchAckTimer?this.batchAckPacketQueue.push(e):(this.batchAckPacketQueue.push(e),this.batchAckTimer=window.setTimeout((()=>{this.batchAck()}),this.rtt/8)),this.lastOrderedPacketNumber+=1,this.receiveImpl(e.payload);;){const e=this.unorderedPacketQueue[0];if(!e){this.unorderedPacketQueue.shift();break}this.batchAckTimer&&this.batchAck(),this.receiveImpl(e.payload),this.unorderedPacketQueue.shift(),this.lastOrderedPacketNumber+=1}else if(e.packetNumber<=this.lastOrderedPacketNumber){const t={ackSendTs:e.sendTs,maxAckPacketNumber:e.packetNumber,shift:0,type:dN.Ack,version:this.version};this.sendPacket(t)}else if(e.packetNumber>this.lastOrderedPacketNumber){this.unorderedPacketQueue[e.packetNumber-this.lastOrderedPacketNumber-2]=e;const t={ackSendTs:e.sendTs,maxAckPacketNumber:e.packetNumber,shift:0,type:dN.Ack,version:this.version};this.sendPacket(t)}}batchAck(){window.clearTimeout(this.batchAckTimer),this.batchAckTimer=void 0;const e={ackSendTs:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].sendTs,maxAckPacketNumber:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].packetNumber,shift:this.batchAckPacketQueue.length-1,type:dN.Ack,version:this.version};this.sendPacket(e),this.batchAckPacketQueue=[]}sendPacket(e){e.type===dN.Default&&(e.sendTs=Math.round(performance.now()));const t=this.serialize(e);this.sendImpl(t)}clearRTO(e){for(let t=e.maxAckPacketNumber-e.shift;t<=e.maxAckPacketNumber;t++){const e=this.timeoutMap.get(t);void 0!==e&&window.clearTimeout(e),this.timeoutMap.delete(t),this.rtoRatioMap.delete(t)}}}class ON extends RN{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3?arguments[3]:void 0),oh(this,"_initMutex",void 0),oh(this,"_reconnectInterrupter",void 0),oh(this,"_url",void 0),oh(this,"_transmitter",void 0),oh(this,"_addresses",void 0),oh(this,"_reliableTransmission",void 0),this._initMutex=new pE("datachannel");const{timeout:n,timeoutFactor:r}=t,i=Math.max(300,Math.floor(3*n/5)),o=Math.max(1.2,Math.floor(8*r)/10);v_.ONLINE&&(this._retryConfig.timeout=i,this._retryConfig.timeoutFactor=o),R_.on(__.NETWORK_STATE_CHANGE,((e,t)=>{e!==t&&(this.resetReconnectCount("network state change: ".concat(t," -> ").concat(e)),e===v_.ONLINE?(this._retryConfig.timeout=i,this._retryConfig.timeoutFactor=o):(this._retryConfig.timeout=n,this._retryConfig.timeoutFactor=r))}))}getConnection(){if(this._reliableTransmission)return this._reliableTransmission}async init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;this._forceCloseTimeout=t;const n=(t,n)=>{this._addresses=e,this.currentURLIndex=this._addresses.findIndex((e=>e.fingerprint||ST("FINGERPRINT")));const r=this._addresses[this.currentURLIndex];this.state="connecting",this.createTransmitterConnection(r).then(t).catch(n),this.once(vI.CLOSED,(()=>n(new kb(Hv.WS_DISCONNECT)))),this.once(vI.CONNECTED,(()=>t()))};return this._initMutex.lock().then((e=>new cv(((e,t)=>{n(e,t)})).then((()=>{e()})).catch((()=>{e()}))))}sendMessage(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._transmitter||!this._reliableTransmission)throw new kb(Hv.WS_ABORT,"datachannel is not ready");try{t||(e=JSON.stringify(e)),this._reliableTransmission.sendMessage(e)}catch(e){throw new kb(Hv.WS_ERR,"send datachannel signal message error"+e.toString())}}unbindDcCloseEventListener(){this._transmitter&&(this._transmitter.onclose=null)}sendMessageWithJSON(e){const t=JSON.stringify(e);return{compressed:t,compressedLength:t.length,origin:e}}sendMessageWithUint8Array(e){return{compressed:e,compressedLength:e.byteLength,origin:e}}createTransmitterConnection(e){return this.connectionID+=1,this._joinChannelServiceRecordIndex=void 0,this._url="dc://".concat(e.ip,":").concat(e.port),new cv(((t,n)=>{var r;const i=()=>{VT.debug("[".concat(this._name,"] datachannel opened:"),this._url),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),t()},o=async e=>{var r;if(null===(r=this._closeEstablishingTransmitter)||void 0===r||r.call(this),VT.debug("[".concat(this._name,"] datachannel close ").concat(this._url,", code: ").concat(e.code,", reason: ").concat(e.reason,", current mode: ").concat(this.reconnectMode)),this._reconnectCount<this._retryConfig.maxRetryCount){"connected"===this.state&&(this.reconnectReason=e.reason,this.state="reconnecting");const r=C_(this,vI.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,i=await this.reconnectWithAction(r);if("closed"===this.state)return void VT.debug("[".concat(this.connectionID,"] dc is closed, no need to reconnect"));if(!i)return n(new kb(Hv.WS_DISCONNECT,"datachannel reconnect failed: ".concat(e.code))),void this.close(!0);t()}else n(new kb(Hv.WS_DISCONNECT,"datachannel close: ".concat(e.code))),this.close()},s=e=>{var t;null===(t=this._reliableTransmission)||void 0===t||t.onData(e.data)};this._transmitter&&(this._transmitter.onclose=null,this._transmitter.close()),this._reliableTransmission&&(this._reliableTransmission.close(),this._reliableTransmission=void 0),VT.debug("[".concat(this._name,"] start connect, address: ").concat(JSON.stringify(e)));const a=null===(r=this._store)||void 0===r?void 0:r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"}),c=Date.now();I_(this,vI.TO_CONNECT_DATACHANNEL,e).then((e=>{var t,n;if(!e)throw new Error("transmissonInfo not exist yet");const{transmitter:r,close:l}=e;this._transmitter=r,null===(t=this._store)||void 0===t||t.signalChannelOpen();const d=Date.now()-c;VT.debug("[choose dc] dc open cost ".concat(d,"ms")),this._reliableTransmission=new AN((e=>{var t;this._transmitter&&"open"===this._transmitter.readyState&&(null===(t=this._transmitter)||void 0===t||t.send(e))}),(e=>{"string"==typeof e&&this.emit(vI.ON_MESSAGE,e)})),this._closeEstablishingTransmitter=()=>{var e;null===(e=this._reliableTransmission)||void 0===e||e.close(),this._reliableTransmission=void 0,l()},i&&i(),r.onclose=o,r.onmessage=s,null===(n=this._store)||void 0===n||n.recordJoinChannelService({endTs:Date.now(),status:"success"},a),this._joinChannelServiceRecordIndex=a})).catch((e=>{var t;if(null===(t=this._store)||void 0===t||t.recordJoinChannelService({endTs:Date.now(),status:e instanceof kb&&e.code===Hv.WS_ABORT?"aborted":"error",errors:[e]},a),"closed"!==this.state){if(e instanceof kb&&e.code===Hv.WS_ERR){const t=new kb(Hv.WS_ERR,"init datachannel failed! Error: ".concat(e.toString()));return VT.error("[".concat(this._name,"]").concat(t)),void n(t)}o&&o(e)}else n(new kb(Hv.WS_DISCONNECT,"datachannel is closed: ".concat(e.toString())))}))}))}async reconnectWithAction(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._reconnectCount>=this._retryConfig.maxRetryCount)return!1;if(!this._addresses)return!1;if("closed"===this.state)return!1;this._onlineReconnectListener||R_.networkState!==v_.OFFLINE||(this._onlineReconnectListener=R_.onlineWaiter&&R_.onlineWaiter.then((()=>{this._onlineReconnectListener=void 0})));let n=!0;if(this._reconnectInterrupter=()=>{n=!1},t){const t=gE(this._reconnectCount,this._retryConfig);VT.debug("[".concat(this._name,"] wait ").concat(t,"ms to reconnect datachannel, mode: ").concat(e)),await cv.race([nE(t),this._onlineReconnectListener||new cv((()=>{}))])}if("closed"===this.state||!n)return!1;this._reconnectCount+=1;const r=async(e,t)=>{this.emit(vI.RECONNECT_CREATE_CONNECTION,t),await this.createTransmitterConnection(e)};try{if("retry"===e){const t=this._addresses[this.currentURLIndex];this.emit(vI.RECONNECT_WAITTING_FINISH,e),await r(t,e)}else if("tryNext"===e){this.currentURLIndex+=1;for(let e=this.currentURLIndex;e<this._addresses.length;e++){if(this._addresses[e].fingerprint||ST("FINGERPRINT")){this.currentURLIndex=e;break}this.currentURLIndex+=1}if(this.currentURLIndex>=this._addresses.length)return VT.debug("[".concat(this._name,"] the available addresses are exhausted, change to recover")),await this.reconnectWithAction("recover",!1);VT.debug("[".concat(this._name,"] datachannel url length: ").concat(this._addresses.length," current index: ").concat(this.currentURLIndex));const t=this._addresses[this.currentURLIndex];this.emit(vI.RECONNECT_WAITTING_FINISH,e),await r(t,e)}else"recover"===e&&(VT.debug("[".concat(this._name,"] start to failback to websocket")),this.resetReconnectCount("recover mode"),this.emit(vI.RECONNECT_WAITTING_FINISH,e),this.emit(vI.FAILBACK));return!0}catch(n){var i,o;return VT.error("[".concat(this._name,"] reconnect failed"),n.toString()),null!=n&&null!==(i=n.data)&&void 0!==i&&i.desc&&Array.isArray(n.data.desc)&&n.data.desc.length&&Rr(o=n.data.desc).call(o,"dynamic key expired")?(this.emit(vI.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(e,t)}}}class MN extends l_{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===pb.CONNECTED?this.emit(fb.WS_CONNECTED):e===pb.RECONNECTING?this.emit(fb.WS_RECONNECTING,this._websocketReconnectReason):e===pb.CLOSED&&this.emit(fb.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),oh(this,"_disconnectedReason",void 0),oh(this,"_websocketReconnectReason",void 0),oh(this,"_connectionState",pb.CLOSED),oh(this,"reconnectToken",void 0),oh(this,"websocket",void 0),oh(this,"openConnectionTime",void 0),oh(this,"clientId",void 0),oh(this,"lastMsgTime",Date.now()),oh(this,"uploadCache",[]),oh(this,"uploadCacheInterval",void 0),oh(this,"rttRolling",new vE(5)),oh(this,"pingpongTimer",void 0),oh(this,"inflateDataTimer",void 0),oh(this,"pingpongTimeoutCount",0),oh(this,"joinResponse",void 0),oh(this,"multiIpOption",void 0),oh(this,"initError",void 0),oh(this,"spec",void 0),oh(this,"store",void 0),oh(this,"onWebsocketMessage",(e=>{if(e instanceof ArrayBuffer)return void this.emit(fb.ON_BINARY_DATA,e);const t=JSON.parse(e);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")&&(this.emit(t._type,t._message),t._type===yb.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===yb.ON_USER_BANNED))switch(t._message.error_code){case 14:this.close(m_.UID_BANNED);break;case 15:this.close(m_.IP_BANNED);break;case 16:this.close(m_.CHANNEL_BANNED)}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new ON("gateway-".concat(this.clientId),this.spec.retryConfig,!0,t),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===pb.CONNECTED&&this.reconnect("retry",yI.OFFLINE)}))}async request(e,t,n,r){const i=rE(6,""),o={_id:i,_type:e,_message:t},s=this.websocket.connectionID,a=()=>new cv(((t,n)=>{if(this.connectionState===pb.CONNECTED)return t();const r=()=>{this.off(fb.WS_CLOSED,i),t()},i=()=>{this.off(fb.WS_CONNECTED,r),n(new kb(Hv.WS_ABORT))};this.once(fb.WS_CONNECTED,r),this.once(fb.WS_CLOSED,i),e!==mb.PUBLISH&&e!==mb.SUBSCRIBE&&e!==mb.UNSUBSCRIBE&&e!==mb.UNPUBLISH&&e!==mb.CONTROL&&e!==mb.RESTART_ICE||this.once(fb.DISCONNECT_P2P,(()=>{n(new kb(Hv.DISCONNECT_P2P))})),e!==mb.PUBLISH&&e!==mb.RESTART_ICE||this.once(fb.ABORT_P2P_EXECUTION,(()=>{n(new kb(Hv.DISCONNECT_P2P))}))}));if(this.connectionState!==pb.CONNECTING&&this.connectionState!==pb.RECONNECTING||e===mb.JOIN||e===mb.REJOIN||await a(),e===mb.LEAVE&&(this.websocket.unbindDcCloseEventListener(),r=!0),this.websocket.sendMessage(o,!0,!1),r)return;const c=new cv(((n,r)=>{let o=!1;const a=(r,i)=>{o=!0,n({isSuccess:"success"===r,message:i||{}}),this.off(fb.WS_CLOSED,c),this.off(fb.WS_RECONNECTING,c),this.emit(fb.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),a);const c=()=>{r(new kb(Hv.WS_ABORT,"type: ".concat(e))),this.off(fb.WS_CLOSED,c),this.off(fb.WS_RECONNECTING,c),this.off("res-@".concat(i),a)};this.once(fb.WS_CLOSED,c),this.once(fb.WS_RECONNECTING,c),nE(ST("SIGNAL_REQUEST_TIMEOUT")).then((()=>{this.websocket.connectionID!==s||o||(VT.warning("dc request timeout, type: ".concat(e)),this.emit(fb.REQUEST_TIMEOUT,e,t))}))}));let l=null;try{l=await c}catch(r){if(this.connectionState===pb.CLOSED||e===mb.LEAVE)throw new kb(Hv.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?r.throw():e===mb.JOIN||e===mb.REJOIN?null:(await a(),await this.request(e,t))}if(l.isSuccess)return l.message;const d=Number(l.message.error_code||l.message.code),u=xI(d),h=new kb(Hv.UNEXPECTED_RESPONSE,"".concat(u.desc,": ").concat(l.message.error_str),{code:d,data:l.message});return"success"===u.action?l.message:(VT.warning("[".concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(d,", message: ").concat(u.desc,", action: ").concat(u.action)),d===hb.ERR_TOO_MANY_BROADCASTERS?e===mb.JOIN||e===mb.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw():"failed"===u.action?h.throw():"quit"===u.action?(this.initError=h,this.close(),h.throw()):(d===hb.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,VT.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",yI.MULTI_IP)):this.reconnect(u.action,yI.SERVER_ERROR),e===mb.JOIN||e===mb.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new cv((n=>{const r=i=>{(!t||t(i))&&(this.off(e,r),n(i))};this.on(e,r)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void VT.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(gb.WRTC_STATS,t)}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(e){const t=ST("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(n),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==pb.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),ST("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}init(e,t){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new cv(((n,r)=>{this.once(fb.WS_CONNECTED,(()=>n(this.joinResponse))),this.once(fb.WS_CLOSED,(()=>r(this.initError||new kb(Hv.WS_ABORT)))),this.connectionState=pb.CONNECTING,this.websocket.init(e).catch(r),this.websocket.once(vI.FAILBACK,(()=>{void 0===this.openConnectionTime&&r(new kb(Hv.INIT_DATACHANNEL_TIMEOUT))})),this.inflateDataTimer&&window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=window.setInterval((()=>{this.handleInflateData()}),2e4),setTimeout((()=>{t&&void 0===this.openConnectionTime&&(VT.debug("[".concat(this.clientId,"] init datachannel timeout while join with failback to websocket")),r(new kb(Hv.INIT_DATACHANNEL_TIMEOUT)))}),ST("DC_JOIN_WITH_FAILBACK"))}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.inflateDataTimer&&(this.handleInflateData(),window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||m_.LEAVE,this.connectionState=pb.CLOSED,VT.debug("[".concat(this.clientId,"] ")+"will close datachannel in signal"),this.websocket.close(),e===m_.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new ON("gateway-".concat(this.clientId),this.spec.retryConfig,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(fb.ABORT_P2P_EXECUTION);const e=await I_(this,fb.DATACHANNEL_CONNECTING),t=await this.request(mb.JOIN,e);if(!t)return this.emit(fb.REPORT_JOIN_GATEWAY,Hv.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(fb.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=pb.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new kb(Hv.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const e=w_(this,fb.REQUEST_REJOIN_INFO);e.token=this.reconnectToken;const t=await this.request(mb.REJOIN,e);return!!t&&(this.connectionState=pb.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),t.peers&&t.peers.forEach((e=>{this.emit(yb.ON_USER_ONLINE,{uid:e.uid}),e.audio&&this.emit(yb.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&this.emit(yb.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?this.emit(yb.MUTE_AUDIO,{uid:e.uid}):this.emit(yb.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(yb.MUTE_VIDEO,{uid:e.uid}):this.emit(yb.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(yb.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(yb.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(yb.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(yb.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(yb.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})})),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){VT.debug("[".concat(this.clientId,"] receive notification: "),e);const t=xI(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(m_.UID_BANNED),void this.close()):void this.reconnect(t.action,yI.SERVER_ERROR);VT.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=ST("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(VT.warning("PINGPONG Timeout. Last Socket Message: ".concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>ST("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",yI.TIMEOUT):this.request(mb.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),ST("REPORT_STATS")&&this.send(mb.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleInflateData(){const{inflateLength:e,deflateLength:t}=this.websocket.getInflateData();0!==e&&0!==t&&this.upload(gb.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(vI.RECONNECT_WAITTING_FINISH,(e=>{this.emit(fb.WS_RECONNECT_WAITTING_FINISH,e)})),this.websocket.on(vI.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(fb.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(vI.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(vI.CLOSED,(()=>{this.connectionState=pb.CLOSED})),this.websocket.on(vI.FAILED,(()=>{this._disconnectedReason=m_.NETWORK_ERROR,this.connectionState=pb.CLOSED})),this.websocket.on(vI.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===pb.CONNECTED?this.connectionState=pb.RECONNECTING:this.connectionState=pb.CONNECTING})),this.websocket.on(vI.WILL_RECONNECT,((e,t)=>{if(w_(this,fb.IS_P2P_DISCONNECTED)&&"retry"===e)return VT.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(fb.NEED_RENEW_SESSION),this.emit(fb.DISCONNECT_P2P),t("tryNext");"retry"!==e&&(VT.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(e)),this.reconnectToken=void 0,this.emit(fb.NEED_RENEW_SESSION),this.emit(fb.DISCONNECT_P2P)),t(e)})),this.websocket.on(vI.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch((e=>{VT.warning("[".concat(this.clientId,"] rejoin failed ").concat(e)),this.reconnect("tryNext",yI.SERVER_ERROR)})):this.join().catch((e=>{if(this.emit(fb.REPORT_JOIN_GATEWAY,e.message||e.code,this.url||""),e instanceof kb&&e.code===Hv.UNEXPECTED_RESPONSE&&e.data.code===hb.ERR_NO_AUTHORIZED)return VT.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",yI.SERVER_ERROR);VT.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",yI.SERVER_ERROR):(this.initError=e,this.close())}))})),this.websocket.on(vI.REQUEST_NEW_URLS,((e,t)=>{I_(this,fb.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(vI.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(yb.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})),this.websocket.on(vI.TO_CONNECT_DATACHANNEL,(async(e,t,n)=>I_(this,fb.DATACHANNEL_PRECONNECT,e).then(t).catch(n))),this.websocket.on(vI.FAILBACK,(()=>{void 0!==this.openConnectionTime&&this.emit(fb.DATACHANNEL_FAILBACK)}))}}class DN extends l_{constructor(e,t){super(),oh(this,"signal",void 0),oh(this,"token",void 0),oh(this,"tokenTimeout",void 0),oh(this,"tokenInterval",void 0),oh(this,"_sequence",0),oh(this,"userMap",new Map),oh(this,"encoder",new TextEncoder),this.signal=e,this.token=t;const n=()=>{this.signal.connectionState===pb.CONNECTED&&this.check(),0===this.userMap.size?this.tokenInterval=window.setTimeout(n,1e3):this.tokenInterval=window.setTimeout(n,3*ST("P2P_TOKEN_INTERVAL"))};n()}async send(e,t,n,r,i){var o,s,a;if(0===this.userMap.size)return;const c=Array.from(Ob(o=this.userMap).call(o))[0].token;"string"!=typeof t&&(t=JSON.stringify(t)),r=null!==(s=r)&&void 0!==s?s:rE(6,""),i=null!==(a=i)&&void 0!==a?a:this._sequence++;const l={_id:r,_type:e,_seq:i,_message:t,token:"".concat(this.token,"_").concat(c)};ST("SHOW_P2P_LOG")&&VT.debug("send message",l,"noNeedResponse : ".concat(n)),this.splitMessage(JSON.stringify(l)).forEach((e=>{this.signal.request(mb.DATA_STREAM,{payload:X_(this.encoder.encode(e))})}));const d=new cv(((t,i)=>{const o=window.setTimeout((()=>{this.off("res-@".concat(r,"_ack"),s),this.off("res-@".concat(r),c),this.off(NI.ABORT,a),VT.debug("[external-signal] request timeout, type: ".concat(e,", requestId: ").concat(r)),0===this.userMap.size?i(new Wv(Hv.INVALID_REMOTE_USER)):i(new Wv(Hv.TIMEOUT))}),ST("EXTERNAL_SIGNAL_REQUEST_TIMEOUT")),s=()=>{o&&window.clearTimeout(o),this.off(NI.ABORT,a),n&&t()},a=()=>{o&&window.clearTimeout(o),this.off("res-@".concat(r,"_ack"),s),this.off("res-@".concat(r),c),i(new Wv(Hv.EXTERNAL_SIGNAL_ABORT,"type: ".concat(e,", requestId: ").concat(r)))};this.once(NI.ABORT,a),this.once("res-@".concat(r,"_ack"),s);const c=(n,c)=>{d=!0,o&&window.clearTimeout(o),this.off("res-@".concat(r,"_ack"),s),this.off(NI.ABORT,a),"success"===n?t(c):i(new Wv(Hv.P2P_MESSAGE_FAILED,"request ".concat(e," failed, requestId: ").concat(r)))};let d=!1;n||(this.once("res-@".concat(r),c),nE(ST("SIGNAL_REQUEST_TIMEOUT")).then((()=>{d||VT.warning("external_signal request timeout, type: ".concat(e,", requestId: ").concat(r,", ").concat(l))})))}));try{return await d}catch(o){if(o.code===Hv.TIMEOUT)return await this.send(e,t,n,r,i);throw o}}onMessage(e){var t;const{_uid:n}=e;let r,i=this.userMap.get(n);if(i)r=i.splitMessageMap;else{if(this.userMap.size>0||!("_type"in e)||e._type!==II.CHECK)return;const{token:t}=e;r=new Map,i={uid:n,isStart:!0,token:t,splitMessageMap:r,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map},this.userMap.set(n,i),this.signal.emit(yb.ON_USER_ONLINE,{uid:n}),this.handleUserOnline()}if("id"in e&&"total"in e){var o;const{id:t,total:i}=e,s=null!==(o=r.get(t))&&void 0!==o?o:[];if(s.push(e),r.has(t)||r.set(t,s),s.length!==i)return;{const i=ep(s).call(s,((e,t)=>e.index-t.index)).map((e=>e.payload)).join("");r.delete(t),(e=JSON.parse(i))._uid=n}}const{_type:s,token:a}=e;if(Rr(t=[II.ACK,II.CHECK]).call(t,s))return s===II.CHECK&&this.handleCheckToken(i,a),void this.receiveMessage(e);a==="".concat(i.token,"_").concat(this.token)?this.handleReceivedMessage(e):VT.debug('Receive unexpected message", '.concat(a,", cur_token: ").concat(i.token,"_").concat(this.token),e)}check(){const e={_id:rE(6,""),token:this.token,_type:II.CHECK};ST("SHOW_P2P_LOG")&&VT.debug("send message",e),this.signal.request(mb.DATA_STREAM,{payload:X_(this.encoder.encode(JSON.stringify(e)))})}ack(e){const t={_id:e,_type:II.ACK,token:this.token};ST("SHOW_P2P_LOG")&&VT.debug("send message",t),this.signal.request(mb.DATA_STREAM,{payload:X_(this.encoder.encode(JSON.stringify(t)))})}response(e,t,n){this.send(II.RESPONSE,JSON.stringify({success:!n,message:t}),!0,e)}handleReceivedMessage(e){const t=()=>{this.userMap.forEach((e=>{const{receivedMessagesMap:t,nextExpectedSequenceNumber:n}=e;for(;t.has(n);){const r=t.get(n);t.delete(n),this.receiveMessage(r),e.nextExpectedSequenceNumber++}}))};if(!e)return void t();const{_uid:n,_seq:r}=e,i=this.userMap.get(n),{receivedMessagesMap:o,isStart:s,nextExpectedSequenceNumber:a}=i;if(r<a)return this.ack(e._id),void VT.debug("[external-signal] receive old message, seq: ".concat(r,", ").concat(e._message));o.set(r,e),s&&r===a&&(this.receiveMessage(e),o.delete(a),i.nextExpectedSequenceNumber++,t())}receiveMessage(e){const{_id:t,_type:n,_message:r,_uid:i}=e;if(ST("SHOW_P2P_LOG")&&VT.debug("receive message",e),t){let o;switch(e._type!==II.ACK&&(r&&(o=JSON.parse(r)),this.ack(e._id)),e._type){case II.CANDIDATE:case II.CONTROL:this.signal.emit(n,o,i);break;case II.PUBLISH:case II.UNPUBLISH:case II.RESTART_ICE:case II.CALL:o.uid=i,I_(this.signal,n,o).then((t=>{this.response(e._id,t)})).catch((()=>{this.response(e._id,void 0,!0)}));break;case II.ACK:this.getListeners("res-@".concat(t,"_ack")).length>0&&this.emit("res-@".concat(t,"_ack"));break;case II.RESPONSE:{const{success:e,message:n}=o;this.emit("res-@".concat(t),e?"success":"failed",n);break}}}}splitMessage(e){if(e.length<DN.MAX_MESSAGE_SIZE)return[e];const t=[],{remoteToken:n}=JSON.parse(e),r=rE(6,"");let i=0,o=800;const s=Math.ceil(e.length/o);for(;e.length>0;){i++;const a={id:r,index:i,total:s,payload:e.slice(0,o),token:"".concat(this.token,"_").concat(n)};JSON.stringify(a).length>DN.MAX_MESSAGE_SIZE?o-=50:(t.push(a),e=e.slice(o))}return t.map((e=>JSON.stringify(e)))}handleCheckToken(e,t){return e.token!==t?(VT.debug("token changed, from ".concat(e.token," to ").concat(t)),this.reset(e.uid,t),!1):(this.tokenTimeout&&(window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0),this.tokenTimeout=window.setTimeout((()=>{VT.debug("token timeout, ".concat(t)),this.reset(e.uid)}),ST("MAX_P2P_TIMEOUT")),!0)}async handleUserOnline(){const e=await I_(this.signal,II.CALL,void 0),t=await this.send(II.CALL,e);this.signal.emit(fb.P2P_CONNECTION,t,!0)}async reset(e,t){const n=this.userMap.get(e);n&&(this.emit(NI.ABORT),this.signal.emit(yb.ON_USER_OFFLINE,{uid:n.uid,reason:RI.P2P_TOKEN_CHANGED}),this._sequence=0,this.userMap.clear(),t||(VT.debug("change local token from ".concat(t," to ").concat(t)),this.token=rE(6,"")))}clear(){this._sequence=0,this.userMap.clear(),this.tokenInterval&&window.clearTimeout(this.tokenInterval),this.tokenInterval=void 0,this.tokenTimeout&&window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0,this.emit(NI.ABORT)}}oh(DN,"MAX_SIZE",1),oh(DN,"MAX_MESSAGE_SIZE",1024);class kN extends l_{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===pb.CONNECTED?this.emit(fb.WS_CONNECTED):e===pb.RECONNECTING?this.emit(fb.WS_RECONNECTING,this._websocketReconnectReason):e===pb.CLOSED&&this.emit(fb.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),oh(this,"_disconnectedReason",void 0),oh(this,"_websocketReconnectReason",void 0),oh(this,"_connectionState",pb.CLOSED),oh(this,"reconnectToken",void 0),oh(this,"p2pToken",void 0),oh(this,"websocket",void 0),oh(this,"openConnectionTime",void 0),oh(this,"clientId",void 0),oh(this,"lastMsgTime",Date.now()),oh(this,"uploadCache",[]),oh(this,"uploadCacheInterval",void 0),oh(this,"rttRolling",new vE(5)),oh(this,"pingpongTimer",void 0),oh(this,"pingpongTimeoutCount",0),oh(this,"joinResponse",void 0),oh(this,"multiIpOption",void 0),oh(this,"initError",void 0),oh(this,"spec",void 0),oh(this,"store",void 0),oh(this,"_external_signal",void 0),oh(this,"onWebsocketMessage",(e=>{if(e.data instanceof ArrayBuffer)return void this.emit(fb.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")){switch(t._type){case yb.ON_DATA_STREAM:return void this.handleDataStream(t._message);case yb.MUTE_AUDIO:case yb.MUTE_VIDEO:case yb.ON_P2P_LOST:case yb.ON_USER_ONLINE:return;case yb.ON_USER_OFFLINE:const{uid:e}=t._message;return VT.debug("[".concat(this.clientId,"] user-offline uid: ").concat(e)),void this._external_signal.reset(e)}if(this.emit(t._type,t._message),t._type===yb.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===yb.ON_USER_BANNED)switch(t._message.error_code){case 14:this.close(m_.UID_BANNED);break;case 15:this.close(m_.IP_BANNED);break;case 16:this.close(m_.CHANNEL_BANNED)}if(t._type===yb.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case hb.ERR_LICENSE_MISSING:this.close(m_.LICENSE_MISSING);break;case hb.ERR_LICENSE_EXPIRED:this.close(m_.LICENSE_EXPIRED);break;case hb.ERR_LICENSE_MINUTES_EXCEEDED:this.close(m_.LICENSE_MINUTES_EXCEEDED);break;case hb.ERR_LICENSE_PERIOD_INVALID:this.close(m_.LICENSE_PERIOD_INVALID);break;case hb.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(m_.LICENSE_MULTIPLE_SDK_SERVICE);break;case hb.ERR_LICENSE_ILLEGAL:this.close(m_.LICENSE_ILLEGAL);break;default:this.close()}}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new qI("gateway-".concat(this.clientId),this.spec.retryConfig,!0,ST("JOIN_GATEWAY_USE_DUAL_DOMAIN"),ST("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===pb.CONNECTED&&this.reconnect("retry",y_.OFFLINE)})),this.p2pToken=rE(6,""),this._external_signal=new DN(this,this.p2pToken)}async request(e,t,n,r){const i=rE(6,""),o={_id:i,_type:e,_message:t},s=this.websocket.connectionID,a=()=>new cv(((e,t)=>{if(this.connectionState===pb.CONNECTED)return e();const n=()=>{this.off(fb.WS_CLOSED,r),e()},r=()=>{this.off(fb.WS_CONNECTED,n),t(new Wv(Hv.WS_ABORT))};this.once(fb.WS_CONNECTED,n),this.once(fb.WS_CLOSED,r)}));if(this.connectionState!==pb.CONNECTING&&this.connectionState!==pb.RECONNECTING||e===mb.JOIN||e===mb.REJOIN||await a(),this.websocket.sendMessage(o,!0),r)return;const c=new cv(((n,r)=>{let o=!1;const a=(r,i)=>{o=!0,n({isSuccess:"success"===r,message:i||{}}),this.off(fb.WS_CLOSED,c),this.off(fb.WS_RECONNECTING,c),this.emit(fb.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),a);const c=()=>{r(new Wv(Hv.WS_ABORT,"type: ".concat(e))),this.off(fb.WS_CLOSED,c),this.off(fb.WS_RECONNECTING,c),this.off("res-@".concat(i),a)};this.once(fb.WS_CLOSED,c),this.once(fb.WS_RECONNECTING,c),nE(ST("SIGNAL_REQUEST_TIMEOUT")).then((()=>{this.websocket.connectionID!==s||o||(VT.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(fb.REQUEST_TIMEOUT,e,t))}))}));let l=null;try{l=await c}catch(r){if(this.connectionState===pb.CLOSED||e===mb.LEAVE)throw new Wv(Hv.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?r.throw():e===mb.JOIN||e===mb.REJOIN?null:(await a(),await this.request(e,t))}if(l.isSuccess)return l.message;const d=Number(l.message.error_code||l.message.code),u=xI(d),h=new Wv(Hv.UNEXPECTED_RESPONSE,"".concat(u.desc,": ").concat(l.message.error_str),{code:d,data:l.message});return"success"===u.action?l.message:(VT.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(d,", message: ").concat(u.desc,", action: ").concat(u.action)),d===hb.ERR_TOO_MANY_BROADCASTERS?e===mb.JOIN||e===mb.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw():"failed"===u.action?h.throw():"quit"===u.action?(this.initError=h,this.close(),h.throw()):(d===hb.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,VT.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",y_.MULTI_IP)):this.reconnect(u.action,y_.SERVER_ERROR),e===mb.JOIN||e===mb.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new cv((n=>{const r=i=>{(!t||t(i))&&(this.off(e,r),n(i))};this.on(e,r)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void VT.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(gb.WRTC_STATS,t)}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(e){const t=ST("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(n),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==pb.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),ST("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}async sendExtensionMessage(e,t,n){return await this._external_signal.send(e,t,n)}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new cv(((t,n)=>{this.once(fb.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(fb.WS_CLOSED,(()=>n(this.initError||new Wv(Hv.WS_ABORT)))),this.connectionState=pb.CONNECTING,this.websocket.init(e).catch(n)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._external_signal.clear(),this._disconnectedReason=e||m_.LEAVE,this.connectionState=pb.CLOSED,VT.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),e===m_.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new qI("gateway-".concat(this.clientId),this.spec.retryConfig,!0,ST("JOIN_GATEWAY_USE_DUAL_DOMAIN"),ST("JOIN_GATEWAY_USE_443PORT_ONLY"),this.store),this.handleWebsocketEvents()),this.p2pToken=rE(6,""),this._external_signal.clear(),this._external_signal=new DN(this,this.p2pToken)}async join(){if(!this.joinResponse){this.emit(fb.ABORT_P2P_EXECUTION);const e=await I_(this,fb.REQUEST_JOIN_INFO),t=await this.request(mb.JOIN,e);if(!t)return this.emit(fb.REPORT_JOIN_GATEWAY,Hv.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(fb.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=pb.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleDataStream(e){try{var t;const n=J_(e.payload),r=(new TextDecoder).decode(n),i=JSON.parse(r);"total"in i&&"id"in i||Rr(t=Object.values(II)).call(t,i._type)?(i._uid=e.uid,this._external_signal.onMessage(i)):this.emit(yb.ON_DATA_STREAM,e)}catch(t){this.emit(yb.ON_DATA_STREAM,e)}}handleNotification(e){VT.debug("[".concat(this.clientId,"] receive notification: "),e);const t=xI(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(m_.UID_BANNED),void this.close()):void this.reconnect(t.action,y_.SERVER_ERROR);VT.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=ST("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(VT.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>ST("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",y_.TIMEOUT):this.request(mb.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),ST("REPORT_STATS")&&this.send(mb.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleWebsocketEvents(){this.websocket.on(Eb.RECONNECT_WAITTING_FINISH,(e=>{this.emit(fb.WS_RECONNECT_WAITTING_FINISH,e)})),this.websocket.on(Eb.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(fb.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(Eb.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Eb.CLOSED,(()=>{this.connectionState=pb.CLOSED})),this.websocket.on(Eb.FAILED,(()=>{this._disconnectedReason=m_.NETWORK_ERROR,this.connectionState=pb.CLOSED})),this.websocket.on(Eb.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===pb.CONNECTED?this.connectionState=pb.RECONNECTING:this.connectionState=pb.CONNECTING})),this.websocket.on(Eb.WILL_RECONNECT,((e,t,n)=>{"retry"!==e?(VT.debug("".concat(this.clientId," websocket will_connect event, renewSession reconnectMode is ").concat(e)),this.reconnectToken=void 0,this.emit(fb.NEED_RENEW_SESSION)):VT.debug("".concat(this.clientId," reconnect mode is retry, no need to renew session")),n(e)})),this.websocket.on(Eb.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.join().catch((e=>{if(this.emit(fb.REPORT_JOIN_GATEWAY,e.message||e.code,this.url||""),e instanceof Wv&&e.code===Hv.UNEXPECTED_RESPONSE&&e.data.code===hb.ERR_NO_AUTHORIZED)return VT.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",y_.SERVER_ERROR);VT.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",y_.SERVER_ERROR):(this.initError=e,this.close())}))})),this.websocket.on(Eb.REQUEST_NEW_URLS,((e,t)=>{I_(this,fb.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(Eb.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(yb.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}))}}function xN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xN(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const PN=new Map;class jN extends l_{get state(){return this._state}set state(e){if(e===this._state)return;const t=this._state;this._state=e,"DISCONNECTED"===e&&this._disconnectedReason?this.emit(Jb.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(Jb.CONNECTION_STATE_CHANGE,e,t)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(e){VT.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(e)),this._joinGatewayStartTime=e}constructor(e,t){super(),oh(this,"store",void 0),oh(this,"joinInfo",void 0),oh(this,"key",void 0),oh(this,"ntpOffset",0),oh(this,"signal",void 0),oh(this,"role",void 0),oh(this,"inChannelInfo",{joinAt:null,duration:0}),oh(this,"spec",void 0),oh(this,"_state","DISCONNECTED"),oh(this,"_statsCollector",void 0),oh(this,"_disconnectedReason",void 0),oh(this,"isSignalRecover",!1),oh(this,"hasChangeBGPAddress",!1),oh(this,"trafficStatsInterval",void 0),oh(this,"networkQualityInterval",void 0),oh(this,"_joinGatewayStartTime",0),oh(this,"_signalTimeout",!1),oh(this,"_clientRoleOptions",void 0),oh(this,"_isProactiveJoin",!1),this.store=e,this.spec=t,this.signal=this.store.useP2P?new kN(LN(LN({},t),{},{retryConfig:t.websocketRetryConfig}),e):this.store.useDataChannel?new MN(LN(LN({},t),{},{retryConfig:t.websocketRetryConfig}),e):new QI(LN(LN({},t),{},{retryConfig:t.websocketRetryConfig}),e),this._statsCollector=t.statsCollector,this.role=t.role||"audience",this._clientRoleOptions=t.clientRoleOptions,this.handleSignalEvents()}async join(e,t,n){if(this.signal instanceof MN){let t=!1;"disabled"!==e.cloudProxyServer?(VT.debug("[".concat(this.store.clientId,"] Dc is not supported, because cloudProxyServer are not supported (").concat(e.cloudProxyServer,")")),t=!0):"".concat(e.apResponse.cid,"_").concat(e.apResponse.cert).length>255||"".concat(e.apResponse.cid,"_").concat(e.apResponse.cert).length<22?(VT.debug("[".concat(this.store.clientId,"] Dc is not supported, because ticket length is incorrect, it has to be between 22 and 255")),t=!0):e.apResponse.addresses.some((e=>e.fingerprint))||ST("FINGERPRINT")||(VT.debug("[".concat(this.store.clientId,"] Dc is not supported, because fingerprint does not exist")),t=!0),t&&this.resetSignal()}this.store.joinGatewayStart(),"disabled"!==e.cloudProxyServer&&(this.hasChangeBGPAddress=!0);const r=Date.now();let i=PN.get(e.cname);if(i||(i=new Map,PN.set(e.cname,i)),this._isProactiveJoin=!0,i.has(e.uid)){const t=new kb(Hv.UID_CONFLICT);throw eb.joinGateway(e.sid,{lts:r,succ:!1,ec:t.message,addr:null,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!e.proxyServer,signalChannel:this.signal instanceof MN?"1":"0"}),this._isProactiveJoin=!1,t}i.set(e.uid,!0),this.joinInfo=e,this.key=t;let o=0;this.joinGatewayStartTime=r;const s=e.proxyServer;try{let t;if(VT.debug("[".concat(this.store.clientId,"] use ").concat(this.signal instanceof MN?"datachannel":"websocket"," join uid ").concat(o)),this.signal instanceof MN)t=await this.signal.init(e.apResponse.addresses,n);else{const r=e.gatewayAddrs.map((t=>{let{address:n}=t;const[r,i]=n.split(":"),o={host:r,port:i};return e.proxyServer&&(o.proxy=e.proxyServer),o}));t=await this.signal.init(r,n)}o=t.uid,VT.debug("[".concat(this.store.clientId,"] ").concat(this.signal instanceof MN?"datachannel":"websocket"," join uid ").concat(o," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(t){if(t&&t.code===Hv.INIT_WEBSOCKET_TIMEOUT)throw VT.warning("[".concat(this.store.clientId,"] User join failed"),t.toString()),t;if(t&&t.code===Hv.INIT_DATACHANNEL_TIMEOUT)throw VT.warning("[".concat(this.store.clientId,"] User join datachannel failed"),t.toString()),this.resetSignal(),t;throw VT.error("[".concat(this.store.clientId,"] User join failed"),t.toString()),eb.joinGateway(e.sid,{lts:r,succ:!1,ec:t.message,addr:this.signal.url,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!s,signalChannel:this.signal instanceof MN?"1":"0"}),this._isProactiveJoin=!1,i.delete(e.uid),this.signal.close(),t}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),VT.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval((()=>{this.updateTrafficStats().catch((e=>{VT.warning("[".concat(this.store.clientId,"] get traffic stats error"),e.toString())}))}),3e3),this.networkQualityInterval=window.setInterval((()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?this.emit(Jb.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(Jb.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):"CONNECTED"===this.state&&this._statsCollector.trafficStats?this.emit(Jb.NETWORK_QUALITY,{uplinkNetworkQuality:TN(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:TN(this._statsCollector.trafficStats.B_dnq)}):this.emit(Jb.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})}),2e3),this.store.joinGatewayEnd(),o}async leave(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if("DISCONNECTED"!==this.state){t!==m_.FALLBACK&&(this.state="DISCONNECTING");try{e||this.signal.connectionState!==pb.CONNECTED||await function(e,t){return t===1/0?e:cv.race([e,tE(t)])}(this.signal.request(mb.LEAVE,void 0,!0),3e3)}catch(e){VT.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),e)}this.signal.close(t),t!==m_.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new kb(Hv.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const r={state:"offer",p2p_id:this.store.p2pId,ortc:t,mode:this.spec.mode,extend:ST("PUB_EXTEND"),twcc:!!ST("PUBLISH_TWCC"),rtx:!!ST("USE_PUB_RTX")};try{return(await this.signal.request(mb.PUBLISH,r,!0))._message}catch(r){if(n&&r.data&&r.data.code===hb.ERR_PUBLISH_REQUEST_INVALID)return VT.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),r.toString()),await this.tryUnpubBeforeRepub(e,t),this.publish(e,t,!1);throw r}}async publishDataChannel(e,t,n){var r;if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new kb(Hv.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const i={stream_id:t.streamId,ordered:t.ordered?1:0,max_retrans_times:null!==(r=t.maxRetransmits)&&void 0!==r?r:10,channel_id:t.channelId,metadata:t.metadata};try{await this.signal.request(mb.PUBLISH_DATASTREAM,i,!0)}catch(r){if(n&&r.data&&r.data.code===hb.ERR_PUBLISH_REQUEST_INVALID)return VT.warning("[".concat(this.store.clientId,"] receive publish datachannels error code, retry"),r.toString()),await this.tryUnpubDataChannelBeforeRepub(e,t),this.publishDataChannel(e,t,!1);throw r}}async unpublish(e,t){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new kb(Hv.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(mb.UNPUBLISH,{stream_id:t,ortc:e},!0)}catch(e){VT.warning("[".concat(this.store.clientId,"] unpublish warning: "),e)}}async unpublishDataChannel(e){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new kb(Hv.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await cv.all(e.map((e=>this.signal.request(mb.UNPUBLISH_DATASTREAM,{channel_id:e},!0))))}catch(e){VT.warning("unpublish datachannels warning: ",e)}}async presubscribe(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new kb(Hv.INVALID_OPERATION,"can not presubscribe when connection state is ".concat(this.state));const r={stream_id:e,stream_type:t,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!ST("SUBSCRIBE_TWCC"),rtx:!!ST("USE_SUB_RTX")||void 0,extend:ST("SUB_EXTEND"),svc:Array.isArray(ST("SVC"))&&0!==ST("SVC").length?ST("SVC"):void 0};try{return await this.signal.request(mb.PRE_SUBSCRIBE,r,!0)}catch(r){if(n&&r.data&&r.data.code===hb.ERR_SUBSCRIBE_REQUEST_INVALID)return VT.warning("[".concat(this.store.clientId,"] pre-subscribe error, retry"),r.toString()),this.presubscribe(e,t,!1);throw r}}async subscribe(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new kb(Hv.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const r={stream_id:e,stream_type:t.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!ST("SUBSCRIBE_TWCC"),rtx:!!ST("USE_SUB_RTX"),extend:ST("SUB_EXTEND"),ssrcId:t.ssrcId,svc:Array.isArray(ST("SVC"))&&0!==ST("SVC").length?ST("SVC"):void 0};try{return(await this.signal.request(mb.SUBSCRIBE,r,!0))._message}catch(r){if(n&&r.data&&r.data.code===hb.ERR_SUBSCRIBE_REQUEST_INVALID)return VT.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),r.toString()),await this.tryUnsubBeforeResub(e,t),await this.subscribe(e,t,!1);throw r}}async subscribeDataChannel(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new kb(Hv.INVALID_OPERATION,"can not subscribe datachannel when connection state is ".concat(this.state));const r={uid:e,stream_id:t.id,channel_id:t.datachannelId};try{return void await this.signal.request(mb.SUBSCRIBE_DATASTREAM,r,!0)}catch(r){if(n&&r.data&&r.data.code===hb.ERR_SUBSCRIBE_REQUEST_INVALID)return VT.warning("[".concat(this.store.clientId,"] receiver subscribe datachannel error code, retry"),r.toString()),await this.tryUnsubDataChannelBeforeResub(e,t),await this.subscribeDataChannel(e,t,!1);throw r}}async subscribeAll(e,t){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new kb(Hv.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const n={p2p_id:this.store.p2pId,users:e,dtx:!1,rtx:!!ST("USE_SUB_RTX")};try{return await this.signal.request(mb.SUBSCRIBE_STREAMS,n,!0)}catch(n){if(t&&n.data&&n.data.code===hb.ERR_SUBSCRIBE_REQUEST_INVALID)return VT.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),n.toString()),await this.tryMassUnsubBeforeResub(e),await this.subscribeAll(e,!1);throw n}}async setVideoProfile(e){const t=function(e){if(!(e.bitrateMax&&e.bitrateMin&&e.frameRate&&e.height&&e.width))return;let t=e.frameRate,n=e.width,r=e.height,i=!0;return"number"!=typeof t&&(t=t.exact||t.ideal||t.max||t.min||0,t||(i=!1)),"number"!=typeof n&&(n=n.exact||n.ideal||n.max||n.min||0,n||(i=!1)),"number"!=typeof r&&(r=r.exact||r.ideal||r.max||r.min||0,t||(i=!1)),i?{stream_type:0,width:n,height:r,fps:t,start_bps:1e3*e.bitrateMax,min_bps:1e3*e.bitrateMin,target_bps:1e3*e.bitrateMax}:void 0}(e);if(t)return this.signal.request(mb.SET_VIDEO_PROFILE,t);VT.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(e,t){try{await this.signal.request(mb.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:e,stream_id:t},!0)}catch(e){VT.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),e)}}async unsubscribeDataChannel(e,t){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new kb(Hv.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await cv.all(e.map((e=>this.signal.request(mb.UNSUBSCRIBE_DATASTREAM,{stream_id:e,uid:t},!0))))}catch(e){VT.warning("unsubscribeDataChannel warning: ",e)}}async massUnsubscribe(e){try{await this.signal.request(mb.UNSUBSCRIBE_STREAMS,e,!0)}catch(e){VT.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),e)}}async reconnectPC(e){const{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}=e;return{gatewayEstablishParams:await this.signal.request(mb.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(mb.GATEWAY_INFO)}async renewToken(e){await this.signal.request(mb.RENEW_TOKEN,e),this.key=e.token}async setClientRole(e,t){if(t&&(this._clientRoleOptions=Object.assign({},t)),"CONNECTED"!==this.state)return void(this.role=e);let n,r=0;"audience"===e?this._clientRoleOptions&&this._clientRoleOptions.delay?(n=this._clientRoleOptions.delay,r=1):r=this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:r=0,await this.signal.request(mb.SET_CLIENT_ROLE,{role:e,level:r,delay:n,client_ts:Date.now()}),this.role=e}async setRemoteVideoStreamType(e,t){await this.signal.request(mb.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:t})}async setDefaultRemoteVideoStreamType(e){await this.signal.request(mb.DEFAULT_VIDEO_STREAM,{stream_type:e})}async setStreamFallbackOption(e,t){await this.signal.request(mb.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:t})}async pickSVCLayer(e,t){await this.signal.request(mb.PICK_SVC_LAYER,{stream_id:e,spatial_layer:t.spatialLayer,temporal_layer:t.temporalLayer})}async setRTM2Flag(e){await this.signal.request(mb.SET_RTM2_FLAG,{rtm2_flag:e})}async sendExtensionMessage(e,t,n){if(this.signal instanceof kN)return this.signal.sendExtensionMessage(e,t,n)}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),LN({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(mb.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const e=PN.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const e=function(e){let t;return t=e.startsWith("dc")?e.match(/(dc\:\/\/)?([^:]+):(\d+)/):e.match(/(wss\:\/\/)?([^:]+):(\d+)/),t?{username:nb.username,password:nb.password,turnServerURL:t[2],tcpport:parseInt(t[3])+30,udpport:parseInt(t[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],e&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(LN(LN({},nb),{},{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if("CONNECTED"!==this.state)return;const e=await this.signal.request(mb.TRAFFIC_STATS,void 0,!0);e.timestamp=Date.now(),null!=e.ntp_offset&&(this.ntpOffset=e.ntp_offset),e.peer_delay.forEach((e=>{const t=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find((t=>t.peer_uid===e.peer_uid));t&&t.B_st!==e.B_st&&W_((()=>{this.emit(Jb.STREAM_TYPE_CHANGE,e.peer_uid,e.B_st)}))})),this._statsCollector.updateTrafficStats(e)}getJoinMessage(e){if(!this.joinInfo||!this.key)throw new kb(Hv.UNEXPECTED_ERROR,"can not generate join message, no join info");const t=Object.assign({},this.joinInfo.apResponse);let n=ST("REPORT_APP_SCENARIO");if("string"!=typeof n)try{n=JSON.stringify(n)}catch(e){n=void 0}n&&n.length>128&&(n=void 0);const r=LN({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:mT,browser:navigator.userAgent,process_id:ST("PROCESS_ID"),mode:this.store.useP2P?"p2p":this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:t,extend:ST("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":"proxy5"===this.joinInfo.cloudProxyServer?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:n,attributes:{userAttributes:{enablePublishedUserList:ST("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:ST("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:"number"==typeof ST("SUBSCRIBE_AUDIO_FILTER_TOPN")?ST("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:"boolean"==typeof ST("ENABLE_PUBLISH_AUDIO_FILTER")?ST("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:"boolean"==typeof ST("ENABLE_USER_LICENSE_CHECK")?ST("ENABLE_USER_LICENSE_CHECK"):void 0,enableRTX:!0===ST("USE_PUB_RTX")||!0===ST("USE_SUB_RTX")||void 0,disableFEC:ST("DISABLE_FEC"),enableNTPReport:!!ST("ENABLE_NTP_REPORT")||void 0,enableInstantVideo:!!ST("ENABLE_INSTANT_VIDEO")||void 0,enableDataStream2:"boolean"==typeof ST("ENABLE_DATASTREAM_2")?ST("ENABLE_DATASTREAM_2"):void 0,rtm2Flag:"number"==typeof this.joinInfo.rtmFlag?this.joinInfo.rtmFlag:void 0,enableUserAutoRebalanceCheck:!!ST("ENABLE_USER_AUTO_REBALANCE_CHECK"),enableXR:"boolean"==typeof ST("USE_XR")?ST("USE_XR"):void 0}},join_ts:this.joinGatewayStartTime},e);return this.joinInfo.stringUid&&(r.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(r.aes_mode=this.joinInfo.aesmode,ST("ENCRYPT_AES")?(r.aes_secret=this.joinInfo.aespassword,r.aes_encrypt=!0):r.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(r.aes_salt=this.joinInfo.aessalt)),t.addresses[this.signal.websocket.currentURLIndex]&&(r.ap_response.ticket=t.addresses[this.signal.websocket.currentURLIndex].ticket,delete t.addresses),void 0!==this.joinInfo.defaultVideoStream&&(r.default_video_stream=this.joinInfo.defaultVideoStream),r}getRejoinMessage(){if(!this.joinInfo)throw new kb(Hv.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(fb.WS_RECONNECT_WAITTING_FINISH,(e=>{var t;Rr(t=["tryNext","recover"]).call(t,e)&&this.joinInfo&&eb.adjustSessionStartTime(this.joinInfo.sid)})),this.signal.on(fb.WS_RECONNECT_CREATE_CONNECTION,(e=>{this.joinGatewayStartTime=Date.now()})),this.signal.on(fb.WS_RECONNECTING,(e=>{this.joinInfo&&eb.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e||y_.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",eb.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode,stringUid:this.joinInfo.stringUid,channelProfile:"live"===this.spec.mode?1:0,channelMode:0,lsid:this.joinInfo.sid,clientRole:"audience"===this.role?2:1}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())})),this.signal.on(fb.WS_CLOSED,(e=>{let t;switch(e){case m_.LEAVE:t=y_.LEAVE;break;case m_.UID_BANNED:case m_.IP_BANNED:case m_.CHANNEL_BANNED:case m_.SERVER_ERROR:t=y_.SERVER_ERROR;break;case m_.FALLBACK:t=y_.FALLBACK;break;case m_.LICENSE_MISSING:case m_.LICENSE_EXPIRED:case m_.LICENSE_MINUTES_EXCEEDED:case m_.LICENSE_PERIOD_INVALID:case m_.LICENSE_MULTIPLE_SDK_SERVICE:case m_.LICENSE_ILLEGAL:case m_.TOKEN_EXPIRE:t=e;break;default:t=y_.NETWORK_ERROR}VT.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(t||"undefined -> "+y_.NETWORK_ERROR)),this.joinInfo&&eb.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:e===m_.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t}),this._disconnectedReason=e,e!==m_.FALLBACK&&(this.state="DISCONNECTED"),this.reset()})),this.signal.on(fb.WS_CONNECTED,(()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&("audience"===this.role&&this._clientRoleOptions&&(this._clientRoleOptions.level||this._clientRoleOptions.delay)&&(VT.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions.level,", delay: ").concat(this._clientRoleOptions.delay)),this.setClientRole(this.role,this._clientRoleOptions)),eb.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof MN?"1":"0"}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&1===this.joinInfo.setLocalAPVersion)){const e=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!e)return void VT.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(e));ET("EVENT_REPORT_DOMAIN",e[1]),ET("EVENT_REPORT_BACKUP_DOMAIN",e[1]),ET("LOG_UPLOAD_SERVER","".concat(e[1],":6444"))}})),this.signal.on(yb.ON_UPLINK_STATS,(e=>{this._statsCollector.updateUplinkStats(e)})),this.signal.on(fb.REQUEST_RECOVER,((e,t,n)=>{if(!this.joinInfo)return n(new kb(Hv.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));e&&(this.joinInfo.multiIP=e,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,I_(this,Jb.REQUEST_NEW_GATEWAY_LIST).then(t).catch(n)})),this.signal.on(fb.REQUEST_JOIN_INFO,(async e=>{var t;if(this.updateTurnConfigFromSignal(),this.store.useP2P)return void e(this.getJoinMessage({ortc:{}}));const{iceParameters:n,dtlsParameters:r,rtpCapabilities:i}=await I_(this,Jb.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(t=this.joinInfo)||void 0===t?void 0:t.turnServer});e(this.getJoinMessage({ortc:{iceParameters:n,dtlsParameters:r,rtpCapabilities:i,version:"2"}}))})),this.signal.on(fb.REQUEST_REJOIN_INFO,(e=>{e(this.getRejoinMessage())})),this.signal.on(fb.REPORT_JOIN_GATEWAY,((e,t)=>{this.joinInfo&&(eb.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:e,addr:t,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof MN?"1":"0"}),this._isProactiveJoin=!1)})),this.signal.on(fb.IS_P2P_DISCONNECTED,(e=>{e(w_(this,Jb.IS_P2P_DISCONNECTED))})),this.signal.on(fb.DISCONNECT_P2P,(()=>{this.emit(Jb.DISCONNECT_P2P)})),this.signal.on(fb.NEED_RENEW_SESSION,(()=>{this.emit(Jb.NEED_RENEW_SESSION)})),this.signal.on(fb.REQUEST_SUCCESS,(()=>{this._signalTimeout=!1})),this.signal.on(fb.REQUEST_TIMEOUT,(()=>{this._signalTimeout=!0})),this.signal.on(fb.JOIN_RESPONSE,(e=>{const t=this.getCurrentGatewayAddress();this.emit(Jb.JOIN_RESPONSE,e,t)})),this.signal.on(fb.DATACHANNEL_PRECONNECT,(async(e,t,n)=>{this.updateTurnConfigFromSignal();const r=this.getCurrentGatewayAddress();return I_(this,Jb.DATACHANNEL_PRECONNECT,e,r).then(t).catch(n)})),this.signal.on(fb.DATACHANNEL_CONNECTING,(async e=>{const{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}=await I_(this,Jb.REQUEST_DC_CONNECTION_PARAMS);e(this.getJoinMessage({ortc:{iceParameters:t,dtlsParameters:n,rtpCapabilities:r,version:"2"}}))})),this.signal.on(fb.DATACHANNEL_FAILBACK,(()=>{VT.warning("[".concat(this.store.clientId,"] User join datachannel failed")),this.reset(),this.resetSignal(),this.emit(Jb.DATACHANNEL_FAILBACK)}))}async tryUnsubBeforeResub(e,t){try{await this.signal.request(mb.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:e,ortc:[t]},!0)}catch(e){throw VT.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),e),e}}async tryUnsubDataChannelBeforeResub(e,t){try{await this.signal.request(mb.UNSUBSCRIBE,{stream_id:t.id},!0)}catch(e){throw VT.warning("unsubscribe datachannel warning",e),e}}async tryUnpubBeforeRepub(e,t){try{await this.signal.request(mb.UNPUBLISH,{stream_id:e,ortc:t},!0)}catch(e){throw VT.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),e),e}}async tryUnpubDataChannelBeforeRepub(e,t){try{await this.signal.request(mb.UNPUBLISH_DATASTREAM,{channnel_id:t.channelId},!0)}catch(e){throw VT.warning("unpublish datastream warning: ",e),e}}async tryMassUnsubBeforeResub(e){const t={users:e.map((e=>({stream_id:e.stream_id,stream_type:e.stream_type})))};try{await this.signal.request(mb.UNSUBSCRIBE_STREAMS,t,!0)}catch(e){throw VT.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),e),e}}async muteLocal(e,t){const n={action:e.find((e=>e.stream_type===Qb.Audio))?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(mb.CONTROL,n,!0,!0)}catch(e){throw VT.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),e),e}}async unmuteLocal(e,t){const n={action:e.find((e=>e.stream_type===Qb.Audio))?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(mb.CONTROL,n,!0,!0)}catch(e){throw VT.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),e),e}}async muteRemote(e,t){const n={action:e===aI.AUDIO?"mute_remote_audio":"mute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(mb.CONTROL,n,!0,!0)}catch(e){throw VT.warning("[".concat(this.store.clientId,"] gateway muteRemote warning: "),e),e}}async unmuteRemote(e,t){const n={action:e===aI.AUDIO?"unmute_remote_audio":"unmute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(mb.CONTROL,n,!0,!0)}catch(e){throw VT.warning("[".concat(this.store.clientId,"] gateway unmuteRemote warning: "),e),e}}uploadWRTCStats(e){this.signal.uploadWRTCStats(e)}upload(e,t){this.signal.upload(e,t)}getSignalRTT(){return this.signal.rtt}async restartICE(e){const t={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:e};try{return await this.signal.request(mb.RESTART_ICE,t,!0)}catch(e){throw VT.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),e),e}}reconnect(){"CONNECTED"===this.state&&this.signal.reconnect(void 0,y_.P2P_FAILED)}getCurrentGatewayAddress(){var e;if(!ST("GATEWAY_WSS_ADDRESS"))return null!==(e=this.joinInfo)&&void 0!==e&&e.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(e){await this.signal.request(mb.SET_PARAMETER,{enablePublishAudioFilter:e})}resetSignal(){this.signal&&(this.signal.removeAllListeners(),this.signal.close(m_.FALLBACK)),this.store.useDataChannel=!1,this.signal=new QI(LN(LN({},this.spec),{},{retryConfig:this.spec.websocketRetryConfig}),this.store),this.handleSignalEvents(),this.emit(Jb.RESET_SIGNAL,$b.websocket)}}let UN=0,FN=0;function zN(e,t,n,r){return new cv(((i,o)=>{t.timeout=t.timeout||ST("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),UN+=$_(t.data)):n&&(t.data.size?UN+=t.data.size:t.data instanceof FormData?UN+=eE(t.data):UN+=$_(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,oT.request(t).then((e=>{"string"==typeof e.data?FN+=$_(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?FN+=e.data.byteLength:FN+=$_(JSON.stringify(e.data)),r&&i({data:e.data,headers:e.headers}),i(e.data)})).catch((e=>{oT.isCancel(e)?o(new kb(Hv.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?o(new kb(Hv.NETWORK_TIMEOUT,e.message)):e.response?o(new kb(Hv.NETWORK_RESPONSE_ERROR,e.response.status)):o(new kb(Hv.NETWORK_ERROR,e.message))}))}))}!function(){var e;function n(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var r,i="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},o=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function s(e,t){if(t)e:{var n=o;e=e.split(".");for(var r=0;r<e.length-1;r++){var s=e[r];if(!(s in n))break e;n=n[s]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&i(n,e,{configurable:!0,writable:!0,value:t})}}function a(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function c(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:n(e)}}if(s("Symbol",(function(e){function t(e,t){this.A=e,i(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.A};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(i||"")+"_"+r++,i)}})),s("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<t.length;r++){var s=o[t[r]];"function"==typeof s&&"function"!=typeof s.prototype[e]&&i(s.prototype,e,{configurable:!0,writable:!0,value:function(){return a(n(this))}})}return e})),"function"==typeof Object.setPrototypeOf)r=Object.setPrototypeOf;else{var l;e:{var d={};try{d.__proto__={a:!0},l=d.a;break e}catch(e){}l=!1}r=l?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var u=r;function h(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function p(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function f(e,t){return e.h=3,{value:t}}function m(e){this.g=new h,this.G=e}function g(e,t,n,r){try{var i=t.call(e.g.j,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.m=!1,i;var o=i.value}catch(t){return e.g.j=null,e.g.s(t),y(e)}return e.g.j=null,r.call(e.g,o),y(e)}function y(e){for(;e.g.h;)try{var t=e.G(e.g);if(t)return e.g.m=!1,{value:t.value,done:!1}}catch(t){e.g.v=void 0,e.g.s(t)}if(e.g.m=!1,e.g.l){if(t=e.g.l,e.g.l=null,t.F)throw t.D;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function v(e){this.next=function(t){return e.o(t)},this.throw=function(t){return e.s(t)},this.return=function(t){return function(e,t){p(e.g);var n=e.g.j;return n?g(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),y(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function _(e,t){return t=new v(new m(t)),u&&e.prototype&&u(t,e.prototype),t}if(h.prototype.o=function(e){this.v=e},h.prototype.s=function(e){this.l={D:e,F:!0},this.h=this.C||this.u},h.prototype.return=function(e){this.l={return:e},this.h=this.u},m.prototype.o=function(e){return p(this.g),this.g.j?g(this,this.g.j.next,e,this.g.o):(this.g.o(e),y(this))},m.prototype.s=function(e){return p(this.g),this.g.j?g(this,this.g.j.throw,e,this.g.o):(this.g.s(e),y(this))},s("Array.prototype.entries",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return[e,t]}))}})),"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var E=function(e,t){for(var n=0;n<e.length;n++)t(e[n])},S=function(e){return e.replace(/\r?\n|\r/g,"\r\n")},T=function(e,t,n){return t instanceof Blob?(n=void 0!==n?String(n+""):"string"==typeof t.name?t.name:"blob",t.name===n&&"[object Blob]"!==Object.prototype.toString.call(t)||(t=new File([t],n)),[String(e),t]):[String(e),String(t)]},b=function(e,t){if(e.length<t)throw new TypeError(t+" argument required, but only "+e.length+" present.")},I="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,N=I.FormData,C=I.XMLHttpRequest&&I.XMLHttpRequest.prototype.send,w=I.Request&&I.fetch,R=I.navigator&&I.navigator.sendBeacon,A=I.Element&&I.Element.prototype,O=I.Symbol&&Symbol.toStringTag;O&&(Blob.prototype[O]||(Blob.prototype[O]="Blob"),"File"in I&&!File.prototype[O]&&(File.prototype[O]="File"));try{new File([],"")}catch(e){I.File=function(e,t,n){return e=new Blob(e,n||{}),Object.defineProperties(e,{name:{value:t},lastModified:{value:+(n&&void 0!==n.lastModified?new Date(n.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),O&&Object.defineProperty(e,O,{value:"File"}),e}}var M=function(e){return e.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},D=function(e){this.i=[];var t=this;e&&E(e.elements,(function(e){if(e.name&&!e.disabled&&"submit"!==e.type&&"button"!==e.type&&!e.matches("form fieldset[disabled] *"))if("file"===e.type){var n=e.files&&e.files.length?e.files:[new File([],"",{type:"application/octet-stream"})];E(n,(function(n){t.append(e.name,n)}))}else"select-multiple"===e.type||"select-one"===e.type?E(e.options,(function(n){!n.disabled&&n.selected&&t.append(e.name,n.value)})):"checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):(n="textarea"===e.type?S(e.value):e.value,t.append(e.name,n))}))};if((e=D.prototype).append=function(e,t,n){b(arguments,2),this.i.push(T(e,t,n))},e.delete=function(e){b(arguments,1);var t=[];e=String(e),E(this.i,(function(n){n[0]!==e&&t.push(n)})),this.i=t},e.entries=function e(){var t,n=this;return _(e,(function(e){if(1==e.h&&(t=0),3!=e.h)return t<n.i.length?e=f(e,n.i[t]):(e.h=0,e=void 0),e;t++,e.h=2}))},e.forEach=function(e,t){b(arguments,1);for(var n=c(this),r=n.next();!r.done;r=n.next()){var i=c(r.value);r=i.next().value,i=i.next().value,e.call(t,i,r,this)}},e.get=function(e){b(arguments,1);var t=this.i;e=String(e);for(var n=0;n<t.length;n++)if(t[n][0]===e)return t[n][1];return null},e.getAll=function(e){b(arguments,1);var t=[];return e=String(e),E(this.i,(function(n){n[0]===e&&t.push(n[1])})),t},e.has=function(e){b(arguments,1),e=String(e);for(var t=0;t<this.i.length;t++)if(this.i[t][0]===e)return!0;return!1},e.keys=function e(){var t,n,r,i=this;return _(e,(function(e){if(1==e.h&&(t=c(i),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,f(e,c(r).next().value));n=t.next(),e.h=2}))},e.set=function(e,t,n){b(arguments,2),e=String(e);var r=[],i=T(e,t,n),o=!0;E(this.i,(function(t){t[0]===e?o&&(o=!r.push(i)):r.push(t)})),o&&r.push(i),this.i=r},e.values=function e(){var t,n,r,i,o=this;return _(e,(function(e){if(1==e.h&&(t=c(o),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,(i=c(r)).next(),f(e,i.next().value));n=t.next(),e.h=2}))},D.prototype._asNative=function(){for(var e=new N,t=c(this),n=t.next();!n.done;n=t.next()){var r=c(n.value);n=r.next().value,r=r.next().value,e.append(n,r)}return e},D.prototype._blob=function(){var e="----formdata-polyfill-"+Math.random(),t=[],n="--"+e+'\r\nContent-Disposition: form-data; name="';return this.forEach((function(e,r){return"string"==typeof e?t.push(n+M(S(r))+'"\r\n\r\n'+S(e)+"\r\n"):t.push(n+M(S(r))+'"; filename="'+M(e.name)+'"\r\nContent-Type: '+(e.type||"application/octet-stream")+"\r\n\r\n",e,"\r\n")})),t.push("--"+e+"--"),new Blob(t,{type:"multipart/form-data; boundary="+e})},D.prototype[Symbol.iterator]=function(){return this.entries()},D.prototype.toString=function(){return"[object FormData]"},A&&!A.matches&&(A.matches=A.matchesSelector||A.mozMatchesSelector||A.msMatchesSelector||A.oMatchesSelector||A.webkitMatchesSelector||function(e){for(var t=(e=(this.document||this.ownerDocument).querySelectorAll(e)).length;0<=--t&&e.item(t)!==this;);return-1<t}),O&&(D.prototype[O]="FormData"),C){var k=I.XMLHttpRequest.prototype.setRequestHeader;I.XMLHttpRequest.prototype.setRequestHeader=function(e,t){k.call(this,e,t),"content-type"===e.toLowerCase()&&(this.B=!0)},I.XMLHttpRequest.prototype.send=function(e){e instanceof D?(e=e._blob(),this.B||this.setRequestHeader("Content-Type",e.type),C.call(this,e)):C.call(this,e)}}w&&(I.fetch=function(e,t){return t&&t.body&&t.body instanceof D&&(t.body=t.body._blob()),w.call(this,e,t)}),R&&(I.navigator.sendBeacon=function(e,t){return t instanceof D&&(t=t._asNative()),R.call(this,e,t)}),I.FormData=D}}();const VN=()=>{const e=ST("AREAS");return 0===e.length&&e.push(eI.GLOBAL),z_(e).call(e,((e,t,n)=>{const r=BN(t);return r?0===n?r:"".concat(e,",").concat(r):e}),"")},BN=e=>e===eI.OVERSEA?"".concat(rI.ASIA,",").concat(rI.EUROPE,",").concat(rI.AFRICA,",").concat(rI.NORTH_AMERICA,",").concat(rI.SOUTH_AMERICA,",").concat(rI.OCEANIA):rI[e],GN=e=>{const t={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return e.map((e=>{const n=iI[e],r=Object.keys(n);r&&r.map((e=>{"CODE"!==e&&(t[e]=t[e].concat(n[e]))}))})),t},HN={GLOBAL:{ASIA:[eI.CHINA,eI.JAPAN,eI.INDIA,eI.KOREA,eI.HKMC],EUROPE:[],NORTH_AMERICA:[eI.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},WN=Object.keys(HN[eI.GLOBAL]),YN=[eI.CHINA,eI.NORTH_AMERICA,eI.EUROPE,eI.ASIA,eI.JAPAN,eI.INDIA,eI.OCEANIA,eI.SOUTH_AMERICA,eI.AFRICA,eI.KOREA,eI.HKMC,eI.US],qN=function(e,t){let n=[];if(Rr(e).call(e,eI.GLOBAL)){const o=[eI.GLOBAL,eI.OVERSEA],s=Object.keys(iI);if(t===eI.GLOBAL)throw new kb(Hv.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(t===eI.CHINA)n=[eI.OVERSEA];else if(i=t,Rr(WN).call(WN,i)){const e=(r=t,HN[eI.GLOBAL][r]||[]),i=[...o,t,...e];n=s.filter((e=>!Rr(i).call(i,e)))}else if(function(e){let t=!1;return WN.forEach((n=>{var r;Rr(r=HN[eI.GLOBAL][n]).call(r,e)&&(t=!0)})),t}(t)){const e=function(e){let t;return WN.forEach((n=>{var r;Rr(r=HN[eI.GLOBAL][n]).call(r,e)&&(t=n)})),t}(t),r=[...o,e,t];n=s.filter((e=>!Rr(r).call(r,e)))}else n=e;n=function(e){const t=[];return YN.forEach((n=>{Rr(e).call(e,n)&&t.push(n)})),t.concat(e.filter((e=>!Rr(YN).call(YN,e))))}(n)}else n=e;var r,i;return n};function KN(e){var t,n;if(!e&&Rr(t=ST("AREAS")).call(t,eI.EXTENSIONS))return VT.debug("update area from ap : reset"),void QN(tb,!0);if(!Rr(n=ST("AREAS")).call(n,eI.GLOBAL)||!e)return;let r=iI.EXTENSIONS;r&&(r={CODE:BN(eI.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(e,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(e,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(e,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(e,".agora.io"),"cds-ap-web-2-".concat(e,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(e,".agora.io"),"sua-ap-web-2-".concat(e,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(e,".agora.io"),"uap-ap-web-2-".concat(e,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(e,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(e,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(e,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(e,".agora.io")]},VT.debug("update area from ap success: ".concat(e,",config is "),r),ET("AREAS",[eI.EXTENSIONS],!0),Object.keys(r).map((e=>{ET(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?r[e][0]:r[e])})))}function QN(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=eb.reportApiInvoke(null,{name:h_.SET_AREA,options:e,tag:p_.TRACER});try{let r=[];if("string"==typeof e&&(r=[e]),Array.isArray(e)&&(e.forEach((e=>{if(!Rr(nI).call(nI,e))throw new kb(Hv.INVALID_PARAMS,"invalid area code")})),r=e),"[object Object]"===Object.prototype.toString.call(e)){const{areaCode:t,excludedArea:n}=e;if(!t)throw new kb(Hv.INVALID_PARAMS,"area code is needed");let i=t;"string"==typeof t&&(i=[t]),r=n?qN(i,n):i}if(!t){if(TT.AREAS){const e=new kb(Hv.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return n.onError(e),void VT.warning("setArea is prohibited because of config-distribute")}if(Rr(r).call(r,eI.GLOBAL)&&ST("AREAS")===eI.EXTENSIONS){const e=new kb(Hv.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return n.onError(e),void VT.warning("setArea is prohibited because of ap extensions")}}ET("AREAS",r,t);const i=GN(r);Object.keys(i).map((e=>{ET(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?i[e][0]:i[e])})),VT.debug("set area success:",r.join(","))}catch(e){throw n.onError(e),e}n.onSuccess()}function JN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JN(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let ZN=1;function $N(e,t,n,r,i){ZN+=1;const o={sid:n.sid,command:"convergeAllocateEdge",uid:"666",appId:n.appId,ts:Math.floor(Date.now()/1e3),seq:ZN,requestId:ZN,version:mT,cname:n.cname},s={service_name:t,json_body:JSON.stringify(o)};let a,c,l=e[0];return yE((async()=>{a=Date.now();const e=await zN(l,{data:s,cancelToken:r,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(c=Date.now()-a,0!==e.code){const t=new kb(Hv.UNEXPECTED_RESPONSE,"live streaming ap error, code"+e.code,{retry:!0,responseTime:c});throw VT.error(t.toString()),t}const n=JSON.parse(e.json_body);if(200!==n.code){const e=new kb(Hv.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(n.code,", reason: ").concat(n.reason),{code:n.code,responseTime:c});throw VT.error(e.toString()),e}if(!n.servers||0===n.servers.length){const e=new kb(Hv.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:n.code,responseTime:c});throw VT.error(e.toString()),e}const i=function(e,t){return{addressList:e.servers.map((e=>"wss://".concat(e.address.replace(/\./g,"-"),".").concat(ST("WORKER_DOMAIN"),":").concat(e.wss,"?serviceName=").concat(encodeURIComponent(t)))),workerToken:e.workerToken,vid:e.vid}}(n,t);return ST("LIVE_STREAMING_ADDRESS")&&(i.addressList=ST("LIVE_STREAMING_ADDRESS")instanceof Array?ST("LIVE_STREAMING_ADDRESS"):[ST("LIVE_STREAMING_ADDRESS")]),XN(XN({},i),{},{responseTime:c})}),((r,i)=>(eb.apworkerEvent(n.sid,{success:!0,sc:200,serviceName:t,responseDetail:JSON.stringify(r.addressList),firstSuccess:0===i,responseTime:c,serverIp:e[i%e.length]}),!1)),((r,i)=>(eb.apworkerEvent(n.sid,{success:!1,sc:r.data&&r.data.code||200,serviceName:t,responseTime:c,serverIp:e[i%e.length]}),!!(r.code!==Hv.OPERATION_ABORTED&&r.code!==Hv.UNEXPECTED_RESPONSE||r.data&&r.data.retry)&&(l=e[(i+1)%e.length],!0))),i)}let eC=1;function tC(e,t,n,r){let{url:i,areaCode:o}=e;const s=Date.now();let a;const[c,l]=sC(t,o,[lN.CHOOSE_SERVER]);let d=R_.networkState;return yE((async()=>{d&&R_.networkState===v_.OFFLINE&&R_.onlineWaiter&&await cv.race([R_.onlineWaiter,nE(r&&r.maxRetryTimeout||mE.maxRetryTimeout)]),d=R_.networkState;const{data:e,headers:o}=await zN(i,{data:c,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);a="1"===o.http3?1:-1,eb.reportResourceTiming(i,t.sid),rC(e,i,t,s,[lN.CHOOSE_SERVER],a);const l=bN(e,lN.CHOOSE_SERVER);return iC(l),_N(l,i)}),(e=>(e&&eb.joinChooseServer(t.sid,{lts:s,succ:!0,csAddr:i,opid:l,serverList:e.gatewayAddrs.map((e=>e.address)),ec:null,cid:e.cid.toString(),uid:e.uid.toString(),csIp:e.csIp,unilbsServerIds:[lN.CHOOSE_SERVER].toString(),isHttp3:a}),!1)),(e=>e.code!==Hv.OPERATION_ABORTED&&(e.code===Hv.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(eb.joinChooseServer(t.sid,{lts:s,succ:!1,csAddr:i,serverList:null,opid:l,ec:e.code,csIp:e.data&&e.data.csIp,unilbsServerIds:[lN.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:d}),isHttp3:a}),VT.warning("[".concat(t.clientId,"] Choose server network error, retry"),e),!0))),r)}function nC(e,t,n,r){let i,{url:o,areaCode:s,serviceIds:a}=e;const c=Date.now(),[l,d]=sC(t,s,a);let u;return yE((async()=>{u&&R_.networkState===v_.OFFLINE&&R_.onlineWaiter&&await cv.race([R_.onlineWaiter,nE(r&&r.maxRetryTimeout||mE.maxRetryTimeout)]),u=R_.networkState;const{data:e,headers:s}=await zN(o,{data:l,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);i="1"===s.http3?1:-1,eb.reportResourceTiming(o,t.sid),rC(e,o,t,c,a,i);const d=bN(e,lN.CHOOSE_SERVER),h=bN(e,"proxy5"===t.cloudProxyServer?lN.CLOUD_PROXY_5:"proxy3"===t.cloudProxyServer||"proxy4"===t.cloudProxyServer?lN.CLOUD_PROXY:lN.CLOUD_PROXY_FALLBACK);return iC(d),{gatewayInfo:_N(d,o),proxyInfo:h,url:o}}),(e=>(e.gatewayInfo&&eb.joinChooseServer(t.sid,{lts:c,succ:!0,csAddr:o,serverList:e.gatewayInfo.gatewayAddrs.map((e=>e.address)),ec:null,opid:d,cid:e.gatewayInfo.cid.toString(),uid:e.gatewayInfo.uid.toString(),csIp:e.gatewayInfo.csIp,unilbsServerIds:a.toString(),isHttp3:i}),e.proxyInfo&&eb.joinWebProxyAP(t.sid,{lts:c,sucess:1,apServerAddr:o,turnServerAddrList:e.proxyInfo.addresses.map((e=>e.ip)).join(","),errorCode:null,eventType:t.cloudProxyServer,unilbsServerIds:a.toString()}),!1)),(e=>e.code!==Hv.OPERATION_ABORTED&&(e.code===Hv.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(eb.joinWebProxyAP(t.sid,{lts:c,sucess:0,apServerAddr:o,turnServerAddrList:null,errorCode:e.code,eventType:t.cloudProxyServer,unilbsServerIds:a.toString(),extend:JSON.stringify({networkState:u})}),VT.warning("[".concat(t.clientId,"] multi unilbs network error, retry"),e),!0))),r)}const rC=(e,t,n,r,i,o)=>{const s=[],a=s=>{4096===s.flag?eb.joinChooseServer(n.sid,{lts:r,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:s.error.message,csIp:s.error.data&&s.error.data.csIp,unilbsServerIds:i.toString(),isHttp3:o}):1048576!==s.flag&&4194304!==s.flag&&4194310!==s.flag||eb.joinWebProxyAP(n.sid,{lts:r,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:s.error.code,eventType:n.cloudProxyServer,unilbsServerIds:i.toString()})};if(e.response_body.forEach((t=>{const n=t.buffer.code;if(23===t.uri&&0===n&&!t.buffer.edges_services)if(4194310===t.buffer.flag)VT.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),t.buffer.edges_services=[];else{const n={error:new kb(Hv.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:t.buffer.flag};s.push(n),a(n)}if(0!==n){const r=DI(n),i={error:new kb(Hv.CAN_NOT_GET_GATEWAY_SERVER,r.desc,{desc:r.desc,retry:r.retry,csIp:e.detail[502]}),flag:t.buffer.flag};4194310===t.buffer.flag?VT.warning(i.error.toString()):s.push(i),a(i)}})),s.length)throw VT.warning("[".concat(n.clientId,"] multi unilbs ").concat(t," failed, ").concat(s.map((e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message,", retry: ").concat(e.error.data.retry))).join(" | "))),new kb(Hv.CAN_NOT_GET_GATEWAY_SERVER,s.map((e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message))).join(" | "),{retry:!!s.find((e=>e.error.data.retry)),csIp:e.detail[502],desc:[...new Set(s.map((e=>{var t;return null==e||null===(t=e.error)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.desc})).filter((e=>!!e)))]})},iC=e=>{var t,n,r,i;if(e.addresses&&0===e.addresses.length&&0===e.code)throw new kb(Hv.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(ST("AP_AREA")&&(null!==(r=e.detail)&&void 0!==r&&r[23]&&"string"==typeof(null===(i=e.detail)||void 0===i?void 0:i[23])?KN(e.detail[23].toLowerCase()):KN()),null!==(t=e.detail)&&void 0!==t&&t[19]&&"string"==typeof(null===(n=e.detail)||void 0===n?void 0:n[19])){const t=e.detail[19],n=null==t?void 0:t.split(";");for(let r=0;r<n.length;r++){var o;const t=mN(o=n[r]).call(o);e.addresses[r]&&n&&(e.addresses[r].fingerprint=t)}}if(ST("GATEWAY_ADDRESS")&&ST("GATEWAY_ADDRESS").length>0){VT.debug("assign gateway address to",ST("GATEWAY_ADDRESS"));const t=ST("GATEWAY_ADDRESS").map((t=>{var n,r;const i=null!==(n=null===(r=e.addresses.find((e=>e.ip===t.ip&&e.port===t.port)))||void 0===r?void 0:r.fingerprint)&&void 0!==n?n:"";return{ip:t.ip,port:t.port,ticket:e.addresses[0]&&e.addresses[0].ticket,fingerprint:i}}));e.addresses=t}},oC=(e,t)=>{if(e.response_body&&e.response_body.length){const t=e.response_body[0];if(0!==t.buffer.code){const e=DI(t.buffer.code);throw new kb(Hv.UPDATE_TICKET_FAILED,"[".concat(t.buffer.code,"]: ").concat(e.desc),{retry:e.retry})}return t.buffer.ticket}throw VT.debug("update ticket request received ap response without response body:",t),new kb(Hv.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},sC=(e,t,n)=>{const r=Math.floor(Math.random()*10**12),i={appid:e.appId,client_ts:Date.now(),opid:r,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:XN({6:e.stringUid,11:t,12:ST("USE_NEW_TOKEN")?"1":void 0,22:t},e.apRTM?{26:"RTM2"}:{}),key:e.token,service_ids:n,uid:e.uid||0}}]};i.request_bodies.forEach((t=>{e.multiIP&&e.multiIP.gateway_ip&&(t.buffer.detail[5]=JSON.stringify({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))}));const o=new FormData;return o.append("request",JSON.stringify(i)),[o,r]},aC=(e,t)=>{const n=Math.floor(Math.random()*10**12),r={appid:e.appId,client_ts:Date.now(),opid:n,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:"",6:e.stringUid,12:"1"},token:e.token,service_ids:t,uid:e.uid||0,edges_services:e.apResponse.addresses.map((e=>({ip:e.ip,port:e.port})))}}]},i=new FormData;return i.append("request",JSON.stringify(r)),[i,n]};let cC=0;function lC(e){return cv.all(e.map((e=>e.then((e=>{throw e}),(e=>e))))).then((e=>{throw e}),(e=>e))}const dC=async e=>{let{fragementLength:t,referenceList:n,asyncMapHandler:r,allFailedhandler:i,promisesCollector:o}=e,s=0;const a=t;let c,l=0;const d=async()=>{const e=(()=>{const e=s*a,t=e+a;return n.slice(e,t).map(r)})();o&&o.push(...e);try{c=await lC(e)}catch(e){if(l+=a,s++,!(l>=n.length))return void await d();i(e)}e.forEach((e=>e.cancel()))};return await d(),c};async function uC(e,t,n,r){const i=async function(e,t,n,r){let i=null;const o=[],s=async()=>{const i=ST("WEBCS_DOMAIN").slice(0,ST("AJAX_REQUEST_CONCURRENT")).map((t=>({url:e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:VN()}))),s=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:i.map((e=>e.url))}),a=await dC({fragementLength:ST("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(VT.debug("[".concat(e.clientId,"] Connect to choose_server:"),r.url),tC(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},s),e[0]},promisesCollector:o});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},s),a},a=async()=>{if(await nE(1e3),null!==i)return i;const s=ST("WEBCS_DOMAIN_BACKUP_LIST").map((t=>({url:e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:VN()}))),a=r.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:s.map((e=>e.url))}),c=await dC({fragementLength:ST("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:r=>(VT.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),r.url),tC(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},a),e[0]},promisesCollector:o});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},a),c};try{return i=await lC([s(),a()]),o.length&&o.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),i}catch(e){throw e[0]}}(e,t,n,r);return{gatewayInfo:await i}}async function hC(e,t,n,r,i){const o=e.cloudProxyServer;if("disabled"===o){if(!r)return;if(e.useLocalAccessPoint)return await uC(e,t,n,i);if(ST("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:r,proxyInfo:o}=await mC(e,t,n,i);if(e.turnServer&&"auto"!==e.turnServer.mode)return{gatewayInfo:r};const a=o.map((e=>({turnServerURL:e.address,tcpport:e.tcpport||nb.tcpport,udpport:e.udpport||nb.udpport,username:e.username||nb.username,password:e.password||nb.password,forceturn:!1,security:!0})));if(i.useP2P){var s;const t=null!==(s=e.uid)&&void 0!==s?s:r.uid,n="glb:".concat(t.toString()),i=await c_(n),c=o.map((e=>({turnServerURL:e.address,tcpport:e.tcpport||nb.tcpport,udpport:e.udpport||nb.udpport,username:n,password:i,forceturn:!1,security:!0})));a.push(...c)}return e.turnServer={mode:"manual",servers:a},{gatewayInfo:r}}return await uC(e,t,n,i)}const{proxyInfo:a,gatewayInfo:c}=await mC(e,t,n,i),l={gatewayInfo:c},d=a.map((e=>({turnServerURL:e.address,tcpport:"proxy3"===o?void 0:e.tcpport?e.tcpport:nb.tcpport,udpport:"proxy4"===o?void 0:e.udpport?e.udpport:nb.udpport,username:e.username||nb.username,password:e.password||nb.password,forceturn:"proxy4"!==o,security:"proxy5"===o})));if(i.useP2P){var u;const t=null!==(u=e.uid)&&void 0!==u?u:c.uid,n="glb:".concat(t.toString()),r=await c_(n),i=a.map((e=>({turnServerURL:e.address,tcpport:"proxy3"===o?void 0:e.tcpport||nb.tcpport,udpport:"proxy4"===o?void 0:e.udpport||nb.udpport,username:n,password:r,forceturn:"proxy4"!==o,security:"proxy5"===o})));d.push(...i)}return e.turnServer={mode:"manual",servers:d},VT.debug("[".concat(e.clientId,"] set proxy server: ").concat(e.proxyServer,", mode: ").concat(o)),l}async function pC(e,t,n,r,i){const o=ST("ACCOUNT_REGISTER").slice(0,ST("AJAX_REQUEST_CONCURRENT"));let s=[];s=t.proxyServer?o.map((e=>"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1"))):o.map((e=>"https://".concat(e,"/api/v1")));const a=null==i?void 0:i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:s});try{const o=await async function(e,t,n,r,i){const o=Date.now(),s={sid:n.sid,opid:10,appid:n.appId,string_uid:t};let a=e[0];const c=await yE((()=>zN(a+"".concat(-1===a.indexOf("?")?"?":"&","action=stringuid"),{data:s,cancelToken:r,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}})),((n,r)=>{if(0===n.code){if(n.uid<=0||n.uid>=Math.pow(2,32))throw VT.error("Invalid Uint Uid ".concat(t," => ").concat(n.uid),n),eb.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:n.uid,errorCode:Hv.INVALID_UINT_UID_FROM_STRING_UID,extend:s}),new kb(Hv.INVALID_UINT_UID_FROM_STRING_UID);return eb.reqUserAccount(s.sid,{lts:o,success:!0,serverAddr:a,stringUid:s.string_uid,uid:n.uid,errorCode:null,extend:s}),!1}const i=DI(n.code);return i.retry&&(a=e[(r+1)%e.length]),eb.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:n.uid,errorCode:i.desc,extend:s}),i.retry}),((t,n)=>t.code!==Hv.OPERATION_ABORTED&&(eb.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:null,errorCode:t.code,extend:s}),a=e[(n+1)%e.length],!0)),i);if(0!==c.code){const e=DI(c.code);throw new kb(Hv.UNEXPECTED_RESPONSE,e.desc)}return c}(s,e,t,n,r);return null==i||i.recordJoinChannelService({status:"success",endTs:Date.now()},a),o.uid}catch(e){throw null==i||i.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[e]},a),e}}async function fC(e,t,n){const r=ST("CDS_AP").slice(0,ST("AJAX_REQUEST_CONCURRENT")).map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v1"):"https://".concat(t,"/api/v1?action=config"))),i=r.map((r=>function(e,t,n,r){const i=Ev(),o={flag:64,cipher_method:0,features:{device:i.name,system:i.os,system_general:navigator.userAgent,vendor:t.appId,version:mT,cname:t.cname,sid:t.sid,session_id:t.sid,detail:"",proxyServer:t.proxyServer}};return yE((()=>zN(e,{data:o,timeout:1e3,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}})),void 0,(e=>e.code!==Hv.OPERATION_ABORTED),r)}(r,e,t,n)));let o=null,s=null,a={};try{o=await lC(i)}catch(e){if(e.code===Hv.OPERATION_ABORTED)throw e;s=e}if(i.forEach((e=>e.cancel())),eb.reportApiInvoke(e.sid,{name:h_.REQUEST_CONFIG_DISTRIBUTE,options:{error:s,res:o}}).onSuccess(),o&&o.test_tags)try{a=function(e){if(!e.test_tags)return{};const t=e.test_tags,n=Object.keys(t),r={};return n.forEach((e=>{var n;const i=mN(n=e.slice(4)).call(n),o=JSON.parse(t[e])[1];r[i]=o})),r}(o)}catch(e){}return a}async function mC(e,t,n,r){const i=ST("PROXY_SERVER_TYPE3"),o=(e,t,n)=>{let r=n||i;return Array.isArray(r)&&(r=t%2==0?i[1]:i[0]),"https://".concat(r,"/ap/?url=").concat(e)};let s=null;const a=[],c=async()=>{const i=ST("WEBCS_DOMAIN").slice(0,ST("AJAX_REQUEST_CONCURRENT")).map(((t,n)=>{let r;return r="disabled"===e.cloudProxyServer&&e.proxyServer?o("".concat(t,"/api/v2/transpond/webrtc?v=2"),n,e.proxyServer):"disabled"===e.cloudProxyServer||"fallback"===e.cloudProxyServer?"https://".concat(t,"/api/v2/transpond/webrtc?v=2"):o("".concat(t,"/api/v2/transpond/webrtc?v=2"),n),{url:r,areaCode:VN(),serviceIds:[lN.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?lN.CLOUD_PROXY_5:"proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer?lN.CLOUD_PROXY:lN.CLOUD_PROXY_FALLBACK]}})),s=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:i.map((e=>e.url))}),c=await dC({fragementLength:ST("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(VT.debug("[".concat(e.clientId,"] Connect to choose_server:"),r.url),nC(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},s),e[0]},promisesCollector:a});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},s),c},l=async()=>{if(await nE(1e3),null!==s)return s;const i=ST("WEBCS_DOMAIN_BACKUP_LIST").map(((t,n)=>{let r;return r="disabled"===e.cloudProxyServer&&e.proxyServer?o("".concat(t,"/api/v2/transpond/webrtc?v=2"),n,e.proxyServer):"disabled"===e.cloudProxyServer||"fallback"===e.cloudProxyServer?"https://".concat(t,"/api/v2/transpond/webrtc?v=2"):o("".concat(t,"/api/v2/transpond/webrtc?v=2"),n),{url:r,areaCode:VN(),serviceIds:[lN.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?lN.CLOUD_PROXY_5:"proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer?lN.CLOUD_PROXY:lN.CLOUD_PROXY_FALLBACK]}})),c=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:i.map((e=>e.url))}),l=await dC({fragementLength:ST("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(VT.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),r.url),nC(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},c),e[0]},promisesCollector:a});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},c),l};let d,u,h;try{({gatewayInfo:d,proxyInfo:u,url:h}=await lC([c(),l()]))}catch(e){throw e[0]}if(a.length&&a.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),!d||!u)throw new kb(Hv.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(e.apUrl=h,"disabled"!==e.cloudProxyServer&&Array.isArray(i)&&h){const t=/^https?:\/\/(.+?)(\/.*)?$/.exec(h)[1];Rr(i).call(i,t)&&(e.proxyServer=t,VT.setProxyServer(t),eb.setProxyServer(t))}return s={gatewayInfo:d,proxyInfo:await IN(u,d.uid)},s}async function gC(e,t,n,r){const i=ST("UAP_AP").slice(0,ST("AJAX_REQUEST_CONCURRENT")).map((e=>t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1?action=uap"):"https://".concat(e,"/api/v1?action=uap")));return await $N(i,e,t,n,r)}async function yC(e,t,n){const r=ST("UAP_AP").slice(0,ST("AJAX_REQUEST_CONCURRENT")).map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v1?action=uap"):"https://".concat(t,"/api/v1?action=uap"))),i=r.map((r=>function(e,t,n,r){const i={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,ts:Date.now(),version:mT,cname:t.cname,uid:t.uid.toString(),requestId:eC,seq:eC};eC+=1;const o={service_name:"tele_channel",json_body:JSON.stringify(i)};return yE((async()=>{const t=await zN(e,{data:o,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(0!==t.code){const e=new kb(Hv.UNEXPECTED_RESPONSE,"cross channel ap error, code"+t.code,{retry:!0});throw VT.error(e.toString()),e}const r=JSON.parse(t.json_body);if(200!==r.code){const e=new kb(Hv.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(r.code,", reason: ").concat(r.reason));throw VT.error(e.toString()),e}if(!r.servers||0===r.servers.length){const e=new kb(Hv.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw VT.error(e.toString()),e}return{vid:r.vid,workerToken:r.workerToken,addressList:(ST("CHANNEL_MEDIA_RELAY_SERVERS")||r.servers).map((e=>"wss://".concat(e.address.replace(/\./g,"-"),".").concat(ST("WORKER_DOMAIN"),":").concat(e.wss)))}}),void 0,(e=>!!(e.code!==Hv.OPERATION_ABORTED&&e.code!==Hv.UNEXPECTED_RESPONSE||e.data&&e.data.retry)),r)}(r,e,t,n)));try{const e=await lC(i);return i.forEach((e=>e.cancel())),e}catch(e){throw e[0]}}async function vC(e,t,n){let r=null;const i=[],o=async o=>{const s=ST(o?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2")));return o&&(await nE(1e3),null!==r)?r:await dC({fragementLength:ST("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:r=>(VT.debug("[".concat(e.clientId,"] update ticket, Connect to ").concat(o?"backup":""," choose_server:"),r),function(e,t,n,r){const[i]=aC(t,[lN.CHOOSE_SERVER]);let o=R_.networkState;return yE((async()=>{o&&R_.networkState===v_.OFFLINE&&R_.onlineWaiter&&await cv.race([R_.onlineWaiter,nE(r&&r.maxRetryTimeout||mE.maxRetryTimeout)]),o=R_.networkState;const t=await zN(e,{data:i,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0);return oC(t,e)}),(()=>!1),(e=>e.code!==Hv.OPERATION_ABORTED&&(e.code===Hv.UPDATE_TICKET_FAILED?e.data.retry:(VT.warning("[".concat(t.clientId,"] update ticket network error, retry"),e),!0))),r)}(r,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:i})};try{return r=await lC([o(!1),o(!0)]),i.length&&i.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),r}catch(e){throw e[0]}}function _C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_C(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class SC extends l_{get isSuccess(){return!!this.configs}constructor(){super(),oh(this,"configs",void 0),oh(this,"joinInfo",void 0),oh(this,"cancelToken",void 0),oh(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),oh(this,"interval",void 0),oh(this,"mutex",new pE("config-distribute")),oh(this,"mutableParamsRead",!1)}startGetConfigDistribute(e,t){this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),ST("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval((()=>{this.updateConfigDistribute()}),ST("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,eb.reportApiInvoke(null,{options:void 0,name:h_.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:p_.TRACER}).onSuccess(JSON.stringify(TT))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void VT.debug("[config-distribute] get config distribute interrupted have no joininfo");let e;const t=await this.mutex.lock();try{e=await fC(this.joinInfo,this.cancelToken,this.retryConfig),VT.debug("[config-distribute] get config distribute",JSON.stringify(e)),e.limit_bitrate&&this.handleBitrateLimit(e.limit_bitrate),this.cacheGlobalParameterConfig(e),this.configs=e}catch(e){const t=new kb(Hv.NETWORK_RESPONSE_ERROR,e);VT.warning("[config-distribute] ".concat(t.toString()))}finally{t()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(e){var t;(t=e)&&t.uplink&&t.id&&void 0!==t.uplink.max_bitrate&&void 0!==t.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==e.id&&this.emit(oI.UPDATE_BITRATE_LIMIT,e):this.emit(oI.UPDATE_BITRATE_LIMIT,e))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&EC({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(e){var t;const n=ep(t=Object.keys(e).filter((e=>/^webrtc_ng_global_parameter/.test(e)))).call(t);for(let i=0;i<n.length;i++)for(let t=n.length-1;t>i;t--){const r=n[t];if("number"==typeof e[r].__priority){const i=e[r].__priority,o=n[t-1];if("number"==typeof e[o].__priority){if(!(i>e[o].__priority))continue;{const e=r;n[t]=n[t-1],n[t-1]=e}}else{const e=r;n[t]=n[t-1],n[t-1]=e}}}const r={};n.forEach((t=>{const n=e[t],i=n.__expires;Object.keys(n).forEach((e=>{"__priority"===e||"__expires"===e||Object.prototype.hasOwnProperty.call(r,e)||(r[e]=EC({value:n[e]},i&&{expires:i}))}))}));try{!function(e){try{const t=Date.now();Object.keys(e).forEach((n=>{switch(n){case"ENABLE_EVENT_REPORT":case"UPLOAD_LOG":if(Object.prototype.hasOwnProperty.call(_T,n)){const{value:r,expires:i}=e[n];if(i&&i<=t)return;TT[n]=r,_T[n]=r,VT.debug("Update global parameters from config distribute",n,r)}}}))}catch(t){VT.error("Error update config immediately: ".concat(e),t.message)}}(r);const e=JSON.stringify(r),t=window.btoa(e);window.localStorage.setItem("websdk_ng_global_parameter",t),VT.debug("Caching global parameters ".concat(e))}catch(e){VT.error("Error caching global parameters:",e.message)}}}const TC={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1,supportWebRTCInsertableStream:!1};function bC(){return TC}var IC;function NC(e,t,n){return{sampleRate:e,stereo:t,bitrate:n}}function CC(e,t,n,r,i){return{width:e,height:t,frameRate:n,bitrateMin:r,bitrateMax:i}}function wC(e,t,n,r,i){return{width:{max:e},height:{max:t},frameRate:n,bitrateMin:r,bitrateMax:i}}function RC(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}!function(e){e.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",e.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end",e.STATE_CHANGE="state-change"}(IC||(IC={}));const AC={"90p":CC(160,90),"90p_1":CC(160,90),"120p":CC(160,120,15,30,65),"120p_1":CC(160,120,15,30,65),"120p_3":CC(120,120,15,30,50),"120p_4":CC(212,120),"180p":CC(320,180,15,30,140),"180p_1":CC(320,180,15,30,140),"180p_3":CC(180,180,15,30,100),"180p_4":CC(240,180,15,30,120),"240p":CC(320,240,15,40,200),"240p_1":CC(320,240,15,40,200),"240p_3":CC(240,240,15,40,140),"240p_4":CC(424,240,15,40,220),"360p":CC(640,360,15,80,400),"360p_1":CC(640,360,15,80,400),"360p_3":CC(360,360,15,80,260),"360p_4":CC(640,360,30,80,600),"360p_6":CC(360,360,30,80,400),"360p_7":CC(480,360,15,80,320),"360p_8":CC(480,360,30,80,490),"360p_9":CC(640,360,15,80,800),"360p_10":CC(640,360,24,80,800),"360p_11":CC(640,360,24,80,1e3),"480p":CC(640,480,15,100,500),"480p_1":CC(640,480,15,100,500),"480p_2":CC(640,480,30,100,1e3),"480p_3":CC(480,480,15,100,400),"480p_4":CC(640,480,30,100,750),"480p_6":CC(480,480,30,100,600),"480p_8":CC(848,480,15,100,610),"480p_9":CC(848,480,30,100,930),"480p_10":CC(640,480,10,100,400),"720p":CC(1280,720,15,120,1130),"720p_auto":CC(1280,720,30,900,3e3),"720p_1":CC(1280,720,15,120,1130),"720p_2":CC(1280,720,30,120,2e3),"720p_3":CC(1280,720,30,120,1710),"720p_5":CC(960,720,15,120,910),"720p_6":CC(960,720,30,120,1380),"1080p":CC(1920,1080,15,120,2080),"1080p_1":CC(1920,1080,15,120,2080),"1080p_2":CC(1920,1080,30,120,3e3),"1080p_3":CC(1920,1080,30,120,3150),"1080p_5":CC(1920,1080,60,120,4780),"1440p":CC(2560,1440,30,120,4850),"1440p_1":CC(2560,1440,30,120,4850),"1440p_2":CC(2560,1440,60,120,7350),"4k":CC(3840,2160,30,120,8910),"4k_1":CC(3840,2160,30,120,8910),"4k_3":CC(3840,2160,60,120,13500)},OC=[{scaleResolutionDownBy:2,width:1280,height:720,frameRate:30,bitrateMin:300,bitrateMax:900},{scaleResolutionDownBy:1.333333,width:1280,height:720,frameRate:30,bitrateMin:600,bitrateMax:2e3},{scaleResolutionDownBy:1,width:1280,height:720,frameRate:30,bitrateMin:900,bitrateMax:3e3}],MC={"480p":wC(640,480,5),"480p_1":wC(640,480,5),"480p_2":wC(640,480,30),"480p_3":wC(640,480,15),"720p":wC(1280,720,5),"720p_auto":CC(1280,720,30,900,3e3),"720p_1":wC(1280,720,5),"720p_2":wC(1280,720,30),"720p_3":wC(1280,720,15),"1080p":wC(1920,1080,5),"1080p_1":wC(1920,1080,5),"1080p_2":wC(1920,1080,30),"1080p_3":wC(1920,1080,15)},DC={"1SL1TL":RC(1,1),"3SL3TL":RC(3,3),"2SL3TL":RC(2,3)};function kC(e){return e||(e="480p_1"),"string"==typeof e?Object.assign({},AC[e]):e}function xC(e){return"string"==typeof e?Object.assign({},MC[e]):e}function LC(e){return"string"==typeof e?Object.assign({},DC[e]):e}const PC={speech_low_quality:NC(16e3,!1),speech_standard:NC(32e3,!1,18),music_standard:NC(48e3,!1),standard_stereo:NC(48e3,!0,56),high_quality:NC(48e3,!1,128),high_quality_stereo:NC(48e3,!0,192)};function jC(e){return"string"==typeof e?Object.assign({},PC[e]):e}const UC=[];function FC(e){return qv(e,"mediaSource",["screen","window","application"]),!0}var zC,VC,BC,GC,HC,WC,YC,qC,KC,QC;!function(e){e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_REPLACE_MIXING_TRACK="@need_replace_mixing_track",e.NEED_CLOSE="@need_close",e.NEED_ENABLE_TRACK="@need_enable_track",e.NEED_DISABLE_TRACK="@need_disable_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_RTC_STATS="@get_rtc_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",e.NEED_MUTE_TRACK="@need_mute_track",e.NEED_UNMUTE_TRACK="@need_unmute_track"}(zC||(zC={})),function(e){e.SCREEN_TRACK="screen_track",e.CUSTOM_TRACK="custome_track",e.LOW_STREAM="low_stream"}(VC||(VC={})),function(e){e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM"}(BC||(BC={})),function(e){e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM"}(GC||(GC={})),function(e){e[e.DISABLE=0]="DISABLE",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.AUDIO_ONLY=2]="AUDIO_ONLY"}(HC||(HC={})),function(e){e.TRANSCEIVER_UPDATED="transceiver-updated",e.SEI_TO_SEND="sei-to-send",e.SEI_RECEIVED="sei-received"}(WC||(WC={})),function(e){e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.CLOSED="closed"}(YC||(YC={})),function(e){e.FIRST_FRAME_DECODED="first-frame-decoded",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.VIDEO_STATE_CHANGED="video-state-changed"}(qC||(qC={})),function(e){e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer",e.UPDATE_SOURCE="update_source"}(KC||(KC={})),function(e){e.UPDATE_TRACK_SOURCE="update-track-source"}(QC||(QC={}));const JC={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,currentPacketLossRate:0},XC={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},ZC={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},$C={uplinkNetworkQuality:0,downlinkNetworkQuality:0},ew={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};var tw,nw,rw,iw,ow,sw;!function(e){e.ON_TRACK="on_track",e.ON_NODE="on_node"}(tw||(tw={})),function(e){e.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",e.REQUEST_CONSTRAINTS="request_constraints"}(nw||(nw={})),function(e){e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND"}(rw||(rw={})),function(e){e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(iw||(iw={})),function(e){e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied",e.LOADEDDATA="loadeddata"}(ow||(ow={})),function(e){e[e.VideoStateStopped=0]="VideoStateStopped",e[e.VideoStateStarting=1]="VideoStateStarting",e[e.VideoStateDecoding=2]="VideoStateDecoding",e[e.VideoStateFrozen=3]="VideoStateFrozen"}(sw||(sw={}));const aw={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};var cw;!function(e){e.OPEN="open",e.MESSAGE="message",e.CLOSE="close",e.CLOSING="closing",e.ERROR="error"}(cw||(cw={}));class lw extends l_{constructor(e,t){super(),oh(this,"_ID",void 0),oh(this,"_rtpTransceiver",void 0),oh(this,"_lowRtpTransceiver",void 0),oh(this,"_hints",[]),oh(this,"_isClosed",!1),oh(this,"_originMediaStreamTrack",void 0),oh(this,"_mediaStreamTrack",void 0),oh(this,"_external",{}),this._ID=t||rE(8,"track-"),this._originMediaStreamTrack=e,this._mediaStreamTrack=e,function(e){Rr(UC).call(UC,e)||UC.push(e)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){if(!e){const e=eb.reportApiInvoke(null,{name:h_.GET_MEDIA_STREAM_TRACK,options:[],tag:p_.TRACER});this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?e.onSuccess(this._mediaStreamTrack.label):e.onSuccess("")}return this._mediaStreamTrack}getRTCRtpTransceiver(e){return e===BC.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(e){const t=UC.indexOf(e);-1!==t&&UC.splice(t,1)}(this),this.emit(YC.CLOSED),this.removeAllListeners(WC.SEI_RECEIVED)}_updateRtpTransceiver(e,t){if(t===BC.LOW_STREAM){if(this._lowRtpTransceiver===e)return;this._lowRtpTransceiver=e}else{if(this._rtpTransceiver===e)return;this._rtpTransceiver=e}this.emit(WC.TRANSCEIVER_UPDATED,e,t)}}class dw extends lw{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}constructor(e,t){super(e,t),oh(this,"_enabled",!0),oh(this,"_muted",!1),oh(this,"_isExternalTrack",!1),oh(this,"_isClosed",!1),oh(this,"_enabledMutex",void 0),oh(this,"processor",void 0),oh(this,"_handleTrackEnded",(()=>{this.onTrackEnded()})),this._enabledMutex=new pE("".concat(this.getTrackId())),e.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var e,t;return null!==(e=null===(t=this._originMediaStreamTrack)||void 0===t?void 0:t.label)&&void 0!==e?e:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,VT.debug("[".concat(this.getTrackId(),"] close")),this.emit(zC.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._isExternalTrack=n,e!==this._originMediaStreamTrack&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await N_(this,zC.NEED_REPLACE_TRACK,this),this.processor&&this._processorContext&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this._processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){VT.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(YC.TRACK_ENDED)}stateCheck(e,t){if(VT.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(e,": ").concat(t,"]")),Yv(t,e),this._enabled&&this._muted&&"enabled"===e&&!1===t)throw new Wv(Hv.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print("error",VT);if(!this._enabled&&!this._muted&&"muted"===e&&!0===t)throw new Wv(Hv.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print("error",VT)}getProcessorStats(){return this._processorContext&&this._processorContext.gatherStats()||[]}getProcessorUsage(){return this._processorContext?this._processorContext.gatherUsage():cv.resolve([])}}function uw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const hw=window.AudioContext||window.webkitAudioContext;let pw=null;const fw=new class extends l_{constructor(){super(...arguments),oh(this,"prevState",void 0),oh(this,"curState",void 0),oh(this,"currentTime",void 0),oh(this,"currentTimeStuckAt",void 0),oh(this,"interruptDetectorTrack",void 0),oh(this,"onLocalAudioTrackMute",(()=>{VT.info("ios15-interruption-start"),this.emit(IC.IOS_15_16_INTERRUPTION_START)})),oh(this,"onLocalAudioTrackUnmute",(async()=>{VT.info("ios15-interruption-end"),"running"!==this.curState||this.duringInterruption?VT.info("ios15-interruption-end-canceled"):(pw&&await pw.suspend(),this.emit(IC.IOS_15_16_INTERRUPTION_END))}))}get duringInterruption(){return"running"===this.prevState&&"interrupted"===this.curState}bindInterruptDetectorTrack(e){VT.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){VT.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function mw(){if(!hw)return void VT.error("your browser is not support web audio");VT.info("create audio context");const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uw(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},ST("WEBAUDIO_INIT_OPTIONS"));VT.debug("audio context init option:",JSON.stringify(e)),pw=new hw(e),fw.curState=pw.state,pw.onstatechange=()=>{fw.prevState=fw.curState,fw.curState=pw?pw.state:void 0;const{prevState:e,curState:t}=fw,n="running"===t,r="interrupted"===t,i="running"===e,o="suspended"===e,s="interrupted"===e,a=Ev().osVersion;(Av()||Uv())&&i&&r&&(VT.info("ios".concat(a,"-interruption-start")),fw.emit(IC.IOS_INTERRUPTION_START)),(Av()||Uv())&&(o||s)&&n&&(VT.info("ios".concat(a,"-interruption-end")),fw.emit(IC.IOS_INTERRUPTION_END)),e!==t&&fw.emit(IC.STATE_CHANGE,t,e)},setInterval((()=>{var e;const t=null===(e=pw)||void 0===e?void 0:e.currentTime;fw.currentTime!==t?(fw.currentTimeStuckAt&&(VT.debug("AudioContext current time resume at ".concat(t)),fw.currentTimeStuckAt=void 0),fw.currentTime=t):(t!==fw.currentTimeStuckAt&&(eb.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:t},tag:p_.TRACER}).onSuccess(),VT.warning("AudioContext current time stuck at ".concat(t))),fw.currentTimeStuckAt=t)}),5e3),async function(e){const t=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let n,r=!1,i=!1,o=!1;function s(t){"running"===e.state?a(!1):Av()||Uv()?"suspended"===e.state&&(a(!0),t&&e.resume().then(l,l)):"closed"!==e.state&&(a(!0),t&&e.resume().then(l,l))}function a(e){if(r!==e){r=e;for(let n=0,r=t;n<r.length;n+=1){const t=r[n];e?window.addEventListener(t,d,{capture:!0,passive:!0}):window.removeEventListener(t,d,{capture:!0,passive:!0})}}}function c(){s(!0)}function l(){s(!1)}function d(){s(!0)}function u(e){if(!o)if(n.paused)if(e){let t;h(!1),o=!0;try{t=n.play(),t?t.then(p,p):(n.addEventListener("playing",p),n.addEventListener("abort",p),n.addEventListener("error",p))}catch(e){p()}}else h(!0);else h(!1)}function h(e){if(i!==e){i=e;for(let n=0,r=t;n<r.length;n++){const t=r[n];e?window.addEventListener(t,f,{capture:!0,passive:!0}):window.removeEventListener(t,f,{capture:!0,passive:!0})}}}function p(){n.removeEventListener("playing",p),n.removeEventListener("abort",p),n.removeEventListener("error",p),o=!1,u(!1)}function f(){u(!0)}if(Av()){const t=e.createMediaStreamDestination(),r=document.createElement("div");r.innerHTML="<audio x-webkit-airplay='deny'></audio>",n=r.children.item(0),n.controls=!1,n.disableRemotePlayback=!0,n.preload="auto",n.srcObject=t.stream,u(!0)}fw.on(IC.STATE_CHANGE,c),s(!1)}(pw)}function gw(){if(!pw){if(mw(),!pw)throw new Wv(Hv.NOT_SUPPORTED,"can not create audio context");return pw}return pw}function yw(e){if(function(){if(null!==vw)return vw;const e=gw(),t=e.createBufferSource(),n=e.createGain(),r=e.createGain();t.connect(n),t.connect(r),t.disconnect(n);let i=!1;try{t.disconnect(n)}catch(e){i=!0}return t.disconnect(),vw=i,i}())return;const t=e.connect,n=e.disconnect;e.connect=(n,r,i)=>{var o;return e._inputNodes||(e._inputNodes=[]),Rr(o=e._inputNodes).call(o,n)||(n instanceof AudioNode?(e._inputNodes.push(n),t.call(e,n,r,i)):t.call(e,n,r)),e},e.disconnect=(r,i,o)=>{n.call(e),r?G_(e._inputNodes,r):e._inputNodes=[];for(const n of e._inputNodes)t.call(e,n)}}let vw=null;function _w(e,t){let n=!1;const r=1/t;if(ST("DISABLE_WEBAUDIO")){const t=window.setInterval((()=>{n?window.clearInterval(t):e(performance.now()/1e3)}),1e3*r)}else{const t=gw();let i=t.createGain();i.gain.value=0,i.connect(t.destination);const o=()=>{if(n)return void(i=null);const s=t.createOscillator();s.onended=o,s.connect(i),s.start(0),s.stop(t.currentTime+r),e(t.currentTime)};o()}return()=>{n=!0}}class Ew{constructor(){oh(this,"context",void 0),oh(this,"analyserNode",void 0),oh(this,"sourceNode",void 0),this.context=gw(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(e){if(e!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch(e){}this.sourceNode=e,null==e||e.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode)return 0;if(!this.context||Av()||Uv()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;const e=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(e);else{const t=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(t);for(let n=0;n<e.length;++n)e[n]=t[n]/128-1}const t=z_(e).call(e,((e,t)=>e+t*t),0)/e.length;return Math.max(10*Math.log10(t)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var e,t;null===(e=this.sourceNode)||void 0===e||e.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,null===(t=this.sourceNode)||void 0===t||t.connect(this.analyserNode)}catch(e){VT.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class Sw extends l_{get processSourceNode(){return this.sourceNode}set processedNode(e){var t;if(!this.isDestroyed&&this._processedNode!==e){try{var n;null===(n=this.sourceNode)||void 0===n||n.disconnect(this.outputNode)}catch(e){}null===(t=this._processedNode)||void 0===t||t.disconnect(),this._processedNode=e,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),oh(this,"outputNode",void 0),oh(this,"outputTrack",void 0),oh(this,"isPlayed",!1),oh(this,"context",void 0),oh(this,"audioBufferNode",void 0),oh(this,"destNode",void 0),oh(this,"audioOutputLevel",0),oh(this,"volumeLevelAnalyser",void 0),oh(this,"_processedNode",void 0),oh(this,"playNode",void 0),oh(this,"isDestroyed",!1),oh(this,"onNoAudioInput",void 0),oh(this,"isNoAudioInput",!1),oh(this,"_noAudioInputCount",0),this.context=gw(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),yw(this.outputNode),this.volumeLevelAnalyser=new Ew}startGetAudioBuffer(e){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=e=>{this.emit(KC.ON_AUDIO_BUFFER,function(e){for(let t=0;t<e.outputBuffer.numberOfChannels;t+=1){const n=e.outputBuffer.getChannelData(t);for(let e=0;e<n.length;e+=1)n[e]=0}return e.inputBuffer}(e))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!bC().webAudioMediaStreamDest)throw new Wv(Hv.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(e){"running"!==this.context.state&&W_((()=>{fw.emit("autoplay-failed")})),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch(e){}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;Av()||Uv()?"suspended"===this.context.state&&this.context.resume():"running"!==this.context.state&&this.context.resume();const t=this.volumeLevelAnalyser.getAnalyserNode();let n;t.getFloatTimeDomainData?(n=new Float32Array(t.fftSize),t.getFloatTimeDomainData(n)):(n=new Uint8Array(t.fftSize),t.getByteTimeDomainData(n));let r=!1;for(let i=0;i<n.length;i++)0!==n[i]&&(r=!0);return r?(this.isNoAudioInput=!1,!0):(await nE(200),await this.checkHasAudioInput(e?e+1:1)&&r)}getAudioVolume(){return this.outputNode.gain.value}setVolume(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var e,t;null===(e=this.processedNode)||void 0===e||e.disconnect(),null===(t=this.sourceNode)||void 0===t||t.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var e;this.processedNode?null===(e=this.processedNode)||void 0===e||e.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class Tw extends Sw{get isFreeze(){return!1}constructor(e,t,n){var r;if(super(),oh(this,"sourceNode",void 0),oh(this,"track",void 0),oh(this,"clonedTrack",void 0),oh(this,"audioElement",void 0),oh(this,"isCurrentTrackCloned",!1),oh(this,"isRemoteTrack",!1),oh(this,"originVolumeLevelAnalyser",void 0),oh(this,"rebuildWebAudio",(async()=>{if(VT.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void VT.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then((()=>VT.info("resume success"))),VT.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const e=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?e.stop():this.isCurrentTrackCloned=!0;const t=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(t),yw(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const n=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(n,this.context.currentTime),yw(this.outputNode),this.emit(KC.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=t,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()})),"audio"!==e.kind)throw new Wv(Hv.UNEXPECTED_ERROR);this.track=e;const i=new MediaStream([this.track]);if(this.isRemoteTrack=!!t,this.sourceNode=this.context.createMediaStreamSource(i),yw(this.sourceNode),n){const e=n.clone();e.enabled=!0,this.clonedTrack=e,VT.debug("create an unmuted track ".concat(e.id," from the original track ").concat(n.id," to get the volume"));const t=this.context.createMediaStreamSource(new MediaStream([e]));yw(t),this.originVolumeLevelAnalyser=new Ew,this.originVolumeLevelAnalyser.updateSource(t)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=i;const o=Ev();t&&o.os===fv.IOS&&Number(null===(r=o.osVersion)||void 0===r?void 0:r.split(".")[0])<15&&(fw.on(IC.STATE_CHANGE,(()=>{"suspended"===this.context.state?document.body.addEventListener("click",this.rebuildWebAudio,!0):"running"===this.context.state&&this.rebuildWebAudio()})),this.checkHasAudioInput().then((e=>{e||document.body.addEventListener("click",this.rebuildWebAudio,!0)})))}updateTrack(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1;const t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t),yw(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(KC.UPDATE_SOURCE),this.audioElement.srcObject=t}destroy(){var e;this.audioElement.srcObject=null,this.audioElement.remove(),fw.off("state-change",this.rebuildWebAudio),null===(e=this.originVolumeLevelAnalyser)||void 0===e||e.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(e){return this.context.createMediaStreamSource(new MediaStream([e]))}updateOriginTrack(e){const t=e.clone();t.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=t),VT.debug("create an unmuted track ".concat(t.id," from the original track ").concat(e.id," to get the volume"));const n=this.context.createMediaStreamSource(new MediaStream([t]));yw(n),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(n)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function bw(e,t,n){const r=(e,t)=>e?"number"!=typeof e?e.max||e.exact||e.ideal||e.min||t:e:t,i={audio:!!n&&{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:r(t.height,1080),maxWidth:r(t.width,1920)}}};return t.frameRate&&"number"!=typeof t.frameRate?(i.video.mandatory.maxFrameRate=t.frameRate.max,i.video.mandatory.minFrameRate=t.frameRate.min):"number"==typeof t.frameRate&&(i.video.mandatory.maxFrameRate=t.frameRate),await navigator.mediaDevices.getUserMedia(i)}async function Iw(e,t){const n=await Nw(e.mediaSource),{sourceId:r,audio:i}=await function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new cv(((n,r)=>{const i=document.createElement("div");i.innerText="share screen",i.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const o=document.createElement("div");o.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const s=document.createElement("div");s.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",s.setAttribute("style","height: 12%;");const a=document.createElement("div");a.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const c=document.createElement("div");c.setAttribute("style","display: flex; justify-content: space-between; padding: 16px 0;");const l=document.createElement("button");l.innerHTML="cancel",l.setAttribute("style","width: 85px;"),l.onclick=()=>{document.body.removeChild(h);const e=new Error("NotAllowedError");e.name="NotAllowedError",r(e)};let d=t;const u=document.createElement("div");if(t){const e=document.createElement("input");e.setAttribute("type","checkbox");const t=document.createElement("span");e.setAttribute("style","margin-right: 6px;"),t.innerText="Share audio",e.checked=d,e.onchange=()=>{d=e.checked},u.appendChild(e),u.appendChild(t)}c.appendChild(u),c.appendChild(l),o.appendChild(s),o.appendChild(a),o.appendChild(c);const h=document.createElement("div");h.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),h.appendChild(i),h.appendChild(o),document.body.appendChild(h),e.map((e=>{if(e.id){const t=document.createElement("div");t.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let r=e.thumbnail;try{const{width:e}=r.getSize();e>1920&&(r=r.resize({width:1920}))}catch(e){throw e&&e.message.startsWith("Illegal invocation")&&console.error("Operate thumbnail error, please try to set contextIsolation: false. (https://github.com/electron/electron/issues/34953)"),e}t.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+r.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+e.name.replace(/[\u00A0-\u9999<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))+"</span>",t.onclick=()=>{document.body.removeChild(h),n({sourceId:e.id,audio:d})},a.appendChild(t)}}))}))}(n,t);return await bw(r,e,i)}async function Nw(e){let t=["window","screen"];"application"!==e&&"window"!==e||(t=["window"]),"screen"===e&&(t=["screen"]);const n=u_();if(!n)throw console.error("failed to fetch electron, please mount it to window"),new Wv(Hv.ELECTRON_IS_NULL);let r=null;try{var i;r=(null===(i=n.desktopCapturer)||void 0===i?void 0:i.getSources({types:t}))||n.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:t})}catch(e){r=null}r&&r.then||(r=new cv(((e,r)=>{n.desktopCapturer.getSources({types:t},((t,n)=>{t?r(t):e(n)}))})));try{return await r}catch(e){throw new Wv(Hv.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,e.toString())}}function Cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const ww=new pE("safari");let Rw=!1,Aw=!1;async function Ow(e,t){let n=0,r=null;for(;n<2;)try{r=await Mw(e,t,n>0);break}catch(e){if(e instanceof Wv)throw VT.error("[".concat(t,"] ").concat(e.toString())),e;const r=Dw(e.name||e.code||e,e.message);if(r.code===Hv.MEDIA_OPTION_INVALID){VT.debug("[".concat(t,"] detect media option invalid, retry")),n+=1,await nE(500);continue}throw VT.error("[".concat(t,"] ").concat(r.toString())),r}if(!r)throw new Wv(Hv.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return r}async function Mw(e,t,n){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Wv(Hv.NOT_SUPPORTED,"can not find getUserMedia");n&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));const r=bC(),i=new MediaStream;if(e.audioSource&&i.addTrack(e.audioSource),e.videoSource&&i.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return VT.debug("Using Video Source/ Audio Source"),i;if(e.screen)if(u_())e.screen.sourceId?kw(i,await bw(e.screen.sourceId,e.screen,e.screenAudio)):kw(i,await Iw(e.screen,e.screenAudio));else if(Cv()&&e.screen.extensionId&&e.screen.mandatory){if(!r.getStreamFromExtension)throw new Wv(Hv.NOT_SUPPORTED,"This browser does not support screen sharing");VT.debug("[".concat(t,'] Screen access on chrome stable, looking for extension"'));const n=await(s=e.screen.extensionId,a=t,new cv(((e,t)=>{try{chrome.runtime.sendMessage(s,{getStream:!0},(n=>{if(!n||!n.streamId)return VT.error("[".concat(a,"] No response from Chrome Plugin. Plugin not installed properly"),n),void t(new Wv(Hv.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));e(n.streamId)}))}catch(e){VT.error("[".concat(a,"] AgoraRTC screensharing plugin is not accessible(").concat(s,")"),e.toString()),t(new Wv(Hv.CHROME_PLUGIN_NOT_INSTALL))}})));e.screen.mandatory.chromeMediaSourceId=n,kw(i,await navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(r.getDisplayMedia){var o;e.screen.mediaSource&&FC(e.screen.mediaSource);const n={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:null!==(o=e.screen.displaySurface)&&void 0!==o?o:"screen"===e.screen.mediaSource?"monitor":e.screen.mediaSource},{selfBrowserSurface:r,surfaceSwitching:s,systemAudio:a}=e.screen,c={selfBrowserSurface:r,surfaceSwitching:s,systemAudio:a};!r&&delete c.selfBrowserSurface,!s&&delete c.surfaceSwitching,!a&&delete c.systemAudio,VT.debug("[".concat(t,"] getDisplayMedia:"),JSON.stringify({video:n,audio:!!e.screenAudio,controls:c}));const l=await navigator.mediaDevices.getDisplayMedia(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cw(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({video:n,audio:!!e.screenAudio},c));kw(i,l)}else{if(!Rv())throw VT.error("[".concat(t,"] This browser does not support screenSharing")),new Wv(Hv.NOT_SUPPORTED,"This browser does not support screen sharing");{e.screen.mediaSource&&FC(e.screen.mediaSource);const n={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}};VT.debug("[".concat(t,"] getUserMedia: ").concat(JSON.stringify(n))),kw(i,await navigator.mediaDevices.getUserMedia(n))}}var s,a;if(!e.video&&!e.audio)return i;let c={video:e.video,audio:e.audio},l=ST("MEDIA_DEVICE_CONSTRAINTS");if(l)try{"string"==typeof l&&(l=JSON.parse(l)),c=lE(c,l)}catch(e){}VT.debug("[".concat(t,"] GetUserMedia"),JSON.stringify(c)),Ev();let d,u=null;(wv()||Av()||bv())&&(u=await ww.lock());try{d=await navigator.mediaDevices.getUserMedia(c)}catch(e){throw u&&u(),e}return c.audio&&(Rw=!0),c.video&&(Aw=!0),kw(i,d),u&&u(),i}function Dw(e,t){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new Wv(Hv.MEDIA_OPTION_INVALID,"".concat(e,": ").concat(t));case"NotFoundError":case"DevicesNotFoundError":return new Wv(Hv.DEVICE_NOT_FOUND,"".concat(e,": ").concat(t));case"NotSupportedError":return new Wv(Hv.NOT_SUPPORTED,"".concat(e,": ").concat(t));case"NotReadableError":return new Wv(Hv.NOT_READABLE,"".concat(e,": ").concat(t));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new Wv(Hv.PERMISSION_DENIED,"".concat(e,": ").concat(t));case"ConstraintNotSatisfiedError":return new Wv(Hv.CONSTRAINT_NOT_SATISFIED,"".concat(e,": ").concat(t));default:return VT.error("getUserMedia unexpected error",e),new Wv(Hv.UNEXPECTED_ERROR,"".concat(e,": ").concat(t))}}function kw(e,t){const n=e.getVideoTracks()[0],r=e.getAudioTracks()[0],i=t.getVideoTracks()[0],o=t.getAudioTracks()[0];o&&(r&&e.removeTrack(r),e.addTrack(o)),i&&(n&&e.removeTrack(n),e.addTrack(i))}const xw=new class extends l_{get state(){return this._state}set state(e){e!==this._state&&(this.emit(iw.STATE_CHANGE,e),this._state=e)}constructor(){super(),oh(this,"_state",rw.IDLE),oh(this,"isAccessMicrophonePermission",!1),oh(this,"isAccessCameraPermission",!1),oh(this,"lastAccessMicrophonePermission",!1),oh(this,"lastAccessCameraPermission",!1),oh(this,"checkdeviceMatched",!1),oh(this,"deviceInfoMap",new Map),this.init().then((()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval((()=>{(ST("ENUMERATE_DEVICES_INTERVAL")||(Bv()||Sv()===fv.HARMONY_OS)&&Vv())&&this.updateDevicesInfo()}),ST("ENUMERATE_DEVICES_INTERVAL_TIME"))})).catch((e=>VT.error(e.toString())))}async enumerateDevices(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new Wv(Hv.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const r=await navigator.mediaDevices.enumerateDevices(),i=this.checkMediaDeviceInfoIsOk(r);let o=!this.isAccessMicrophonePermission&&e,s=!this.isAccessCameraPermission&&t;i.audio&&(o=!1),i.video&&(s=!1);let a=null,c=null,l=null;if(!n&&(o||s)){if(ww.isLocked&&(VT.debug("[device manager] wait GUM lock"),(await ww.lock())(),VT.debug("[device manager] GUM unlock")),Rw&&(o=!1,this.isAccessMicrophonePermission=!0),Aw&&(s=!1,this.isAccessCameraPermission=!0),VT.debug("[device manager] check media device permissions",e,t,o,s),o&&s){try{l=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(e){const t=Dw(e.name||e.code||e,e.message);if(t.code===Hv.PERMISSION_DENIED)throw t;VT.warning("getUserMedia failed in getDevices",t)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(o){try{a=await navigator.mediaDevices.getUserMedia({audio:e})}catch(e){const t=Dw(e.name||e.code||e,e.message);if(t.code===Hv.PERMISSION_DENIED)throw t;VT.warning("getUserMedia failed in getDevices",t)}this.isAccessMicrophonePermission=!0}else if(s){try{c=await navigator.mediaDevices.getUserMedia({video:t})}catch(e){const t=Dw(e.name||e.code||e,e.message);if(t.code===Hv.PERMISSION_DENIED)throw t;VT.warning("getUserMedia failed in getDevices",t)}this.isAccessCameraPermission=!0}VT.debug("[device manager] mic permission",e,"cam permission",t)}try{const e=await navigator.mediaDevices.enumerateDevices();return a&&a.getTracks().forEach((e=>e.stop())),c&&c.getTracks().forEach((e=>e.stop())),l&&l.getTracks().forEach((e=>e.stop())),a=null,c=null,l=null,e}catch(e){return a&&a.getTracks().forEach((e=>e.stop())),c&&c.getTracks().forEach((e=>e.stop())),l&&l.getTracks().forEach((e=>e.stop())),a=null,c=null,l=null,new Wv(Hv.ENUMERATE_DEVICES_FAILED,e.toString()).throw()}}async getRecordingDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter((e=>"audioinput"===e.kind))}async getCamerasDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!1,!0,e)).filter((e=>"videoinput"===e.kind))}async getSpeakers(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter((e=>"audiooutput"===e.kind))}searchDeviceIdByName(e){let t=null;return this.deviceInfoMap.forEach((n=>{n.device.label===e&&(t=n.device.deviceId)})),t}async getDeviceById(e){const t=(await this.enumerateDevices(!0,!0,!0)).find((t=>t.deviceId===e));if(!t)throw new Wv(Hv.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return t}async init(){this.state=rw.INITING;try{await this.updateDevicesInfo(),this.state=rw.INITEND}catch(e){throw VT.warning("Device Detection functionality cannot start properly.",e.toString()),this.state=rw.IDLE,("boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname)||new Wv(Hv.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),e}}async updateDevicesInfo(){const e=await this.enumerateDevices(!0,!0,!0),t=Date.now(),n=[];if(e[0]&&e[0].label&&!1===this.checkdeviceMatched){this.checkdeviceMatched=!0;const t=e.find((e=>"audioinput"===e.kind&&"default"===e.deviceId)),n=e.find((e=>"audiooutput"===e.kind&&"default"===e.deviceId));t&&n?n.groupId===t.groupId?VT.debug("[device-check] default input ".concat(t.label," and output ").concat(n.label," is the same group")):VT.warning("[device-check] default input ".concat(t.label," and output ").concat(n.label," is not the same group")):VT.debug("[device-check] default input or output not found")}const r=this.checkMediaDeviceInfoIsOk(e);if(e.forEach((e=>{if(!e.deviceId)return;const r=this.deviceInfoMap.get("".concat(e.kind,"_").concat(e.deviceId));if("ACTIVE"!==(r?r.state:"INACTIVE")){const r={initAt:t,updateAt:t,device:e,state:"ACTIVE"};this.deviceInfoMap.set("".concat(e.kind,"_").concat(e.deviceId),r),n.push(r)}r&&(r.updateAt=t)})),this.deviceInfoMap.forEach(((e,r)=>{"ACTIVE"===e.state&&e.updateAt!==t&&(e.state="INACTIVE",n.push(e))})),this.state!==rw.INITEND)return r.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(r.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));n.forEach((e=>{switch(e.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(iw.RECORDING_DEVICE_CHANGED,e);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(iw.CAMERA_DEVICE_CHANGED,e);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(iw.PLAYOUT_DEVICE_CHANGED,e)}})),r.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),r.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(e){const t=e.filter((e=>"audioinput"===e.kind)),n=e.filter((e=>"videoinput"===e.kind)),r={audio:!1,video:!1};for(const i of t)if(i.label&&i.deviceId){r.audio=!0;break}for(const i of n)if(i.label&&i.deviceId){r.video=!0;break}return r}};let Lw=!1;const Pw=new class extends l_{constructor(){super(...arguments),oh(this,"onAutoplayFailed",void 0),oh(this,"onAudioAutoplayFailed",void 0)}};function jw(){if(Ev(),!Lw){const e=t=>{t.preventDefault(),Lw=!1,Gv()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};Lw=!0,Gv()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),VT.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),Pw.onAutoplayFailed?Pw.onAutoplayFailed():Pw.onAudioAutoplayFailed?VT.warning("AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."):VT.warning("We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),Pw.emit("autoplay-failed")}}function Uw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uw(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zw(e,t,n,r){if(!e)return;const i=eb.getBaseInfoBySessionId(e);if(!i)return;const o=i.info,s=Date.now(),a=Fw(Fw({},o),{},{vid:void 0===o.vid?0:Number(o.vid),lts:s,elapse:s-i.startTime,cbRegistered:Pw.onAutoplayFailed||Pw.onAudioAutoplayFailed?1:-1,errorMsg:n,mediaType:t,trackId:r,extend:void 0});eb.send({type:qT.AUTOPLAY_FAILED,data:a},!0)}const Vw=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],Bw=new class{constructor(){oh(this,"onAutoplayFailed",void 0),oh(this,"elementMap",new Map),oh(this,"elementStateMap",new Map),oh(this,"elementsNeedToResume",[]),oh(this,"sinkIdMap",new Map),oh(this,"autoResumeAfterInterruption",(e=>{Array.from(this.elementMap.entries()).forEach((t=>{let[n,r]=t;const i=this.elementStateMap.get(n),o=r.srcObject.getAudioTracks()[0],s=o&&o.readyState;if(VT.debug("resume after interrupted, ele: ".concat(i," audio: ").concat(s," ").concat(e)),"live"===s){if(e)return r.pause(),void r.play();if("running"===fw.curState)return Lv()?(r.pause(),void r.play()):void(i&&"paused"===i&&r.play())}}))})),oh(this,"autoResumeAfterInterruptionOnIOS15_16",(()=>{Array.from(this.elementMap.entries()).forEach((e=>{let[t,n]=e;const r=n.srcObject.getAudioTracks()[0];r&&"live"===r.readyState&&(VT.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),n.pause(),n.play())}))})),this.autoResumeAudioElement(),fw.on(IC.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),fw.on(IC.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),fw.on(IC.STATE_CHANGE,(()=>{Av()&&"suspended"===fw.prevState&&"running"===fw.curState&&this.autoResumeAfterInterruption()}))}async setSinkID(e,t){const n=this.elementMap.get(e);if(this.sinkIdMap.set(e,t),n)try{await n.setSinkId(t)}catch(e){throw new Wv(Hv.PERMISSION_DENIED,"can not set sink id: "+e.toString())}}play(e,t,n,r){if(this.elementMap.has(t))return;const i=document.createElement("audio");i.autoplay=!0,i.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,i),this.elementMap.set(t,i),this.elementStateMap.set(t,ow.INIT),this.setVolume(t,n);const o=this.sinkIdMap.get(t);if(o)try{i.setSinkId(o).catch((e=>{VT.warning("[".concat(t,"] set sink id failed"),e.toString())}))}catch(e){VT.warning("[".concat(t,"] set sink id failed"),e.toString())}const s=i.play();s&&s.then&&s.catch((e=>{r&&zw(r,"audio",e.message,t),VT.warning("audio element play warning",e.toString()),this.elementMap.has(t)&&"NotAllowedError"===e.name&&(VT.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(i),W_((()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),jw()})))}))}updateTrack(e,t){const n=this.elementMap.get(e);n&&(n.srcObject=new MediaStream([t]))}isPlaying(e){return this.elementMap.has(e)&&"playing"===this.elementStateMap.get(e)}setVolume(e,t){const n=this.elementMap.get(e);n&&(t=Math.max(0,Math.min(100,t)),n.volume=t/100)}stop(e){const t=this.elementMap.get(e);if(this.sinkIdMap.delete(e),!t)return;const n=this.elementsNeedToResume.indexOf(t);this.elementsNeedToResume.splice(n,1),t.srcObject=null,t.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}bindAudioElementEvents(e,t){Vw.forEach((n=>{t.addEventListener(n,(n=>{const r=this.elementStateMap.get(e),i="pause"===n.type?"paused":n.type;if(VT.debug("[".concat(e,"] audio-element-status change ").concat(r," => ").concat(i)),"error"===n.type){const n=null==t?void 0:t.error;n&&VT.error("[".concat(e,"] media error, code: ").concat(n.code,", message: ").concat(n.message))}this.elementStateMap.set(e,i)}))}))}getPlayerState(e){return this.elementStateMap.get(e)||"uninit"}autoResumeAudioElement(){const e=()=>{this.elementsNeedToResume.forEach((e=>{e.play().then((e=>{VT.debug("Auto resume audio element success")})).catch((e=>{VT.warning("Auto resume audio element failed!",e)}))})),this.elementsNeedToResume=[]};new cv((e=>{document.body?e():window.addEventListener("load",(()=>e()))})).then((()=>{Gv()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0))}))}};function Gw(){return function(e,t,n){const r=n.value;return"function"==typeof r&&(n.value=function(){this._isClosed&&new Wv(Hv.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning",VT);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=r.apply(this,t);return i instanceof cv?new cv(((e,t)=>{i.then(e).catch(t)})):i}),n}}function Hw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ww(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hw(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class Yw extends l_{constructor(e){super(),oh(this,"name","VideoProcessorDestination"),oh(this,"ID","0"),oh(this,"_source",void 0),oh(this,"videoContext",void 0),oh(this,"inputTrack",void 0),this.videoContext=e}get kind(){return"video"}get enabled(){return!0}pipe(){throw new Wv(Hv.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new Wv(Hv.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(e){if(e.context!==this.videoContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\nProbably you are making pipeline like this:\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).");e.track&&e.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=e.track,this.emit(tw.ON_TRACK,e.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(tw.ON_TRACK,void 0)}}class qw extends l_{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t){super(),oh(this,"constraintsMap",new Map),oh(this,"statsRegistry",[]),oh(this,"usageRegistry",[]),oh(this,"trackId",void 0),oh(this,"direction",void 0),oh(this,"_chained",!1),this.trackId=e,this.direction=t}async getConstraints(){return await I_(this,nw.REQUEST_CONSTRAINTS)}async requestApplyConstraints(e,t){var n;return VT.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),N_(this,nw.REQUEST_UPDATE_CONSTRAINTS,Array.from(Ob(n=this.constraintsMap).call(n)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return VT.info("processor ".concat(e.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(e),N_(this,nw.REQUEST_UPDATE_CONSTRAINTS,Array.from(Ob(t=this.constraintsMap).call(t)))}registerStats(e,t,n){this.statsRegistry.find((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})}unregisterStats(e,t){const n=this.statsRegistry.findIndex((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t));-1!==n&&this.statsRegistry.splice(n,1)}gatherStats(){const e=[];for(const{processorID:t,processorName:n,type:r,cb:i}of this.statsRegistry)try{const o=i();e.push({processorID:t,processorName:n,type:r,stats:o})}catch(e){VT.error(new Wv(Hv.UNEXPECTED_ERROR,e.message))}return e}registerUsage(e,t){this.usageRegistry.find((t=>t.processorID===e.ID&&t.processorName===e.name))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex((t=>t.processorID===e.ID&&t.processorName===e.name));-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:t}of this.usageRegistry)try{let n=t();n instanceof cv&&(n=await n),e.push(Ww(Ww({},n),{},{direction:this.direction}))}catch(e){VT.error("gather extension usage error",e)}return e}getDirection(){return this.direction}}class Kw extends l_{constructor(e){super(),oh(this,"name","AudioProcessorDestination"),oh(this,"ID","0"),oh(this,"inputTrack",void 0),oh(this,"inputNode",void 0),oh(this,"audioProcessorContext",void 0),oh(this,"_source",void 0),this.audioProcessorContext=e}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new Wv(Hv.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new Wv(Hv.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(tw.ON_TRACK,void 0),this.emit(tw.ON_NODE,void 0)}updateInput(e){if(e.context!==this.audioProcessorContext)throw new Error("ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).");e.track&&this.inputTrack!==e.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=e.track,this.emit(tw.ON_TRACK,this.inputTrack)),e.node&&this.inputNode!==e.node&&(this.audioProcessorContext.chained=!0,this.inputNode=e.node,this.emit(tw.ON_NODE,this.inputNode))}}class Qw extends l_{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t,n){super(),oh(this,"constraintsMap",new Map),oh(this,"statsRegistry",[]),oh(this,"audioContext",void 0),oh(this,"trackId",void 0),oh(this,"direction",void 0),oh(this,"usageRegistry",[]),oh(this,"_chained",!1),this.audioContext=e,this.trackId=t,this.direction=n}async getConstraints(){return I_(this,nw.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(e,t){var n;return VT.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),N_(this,nw.REQUEST_UPDATE_CONSTRAINTS,Array.from(Ob(n=this.constraintsMap).call(n)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return this.constraintsMap.delete(e),N_(this,nw.REQUEST_UPDATE_CONSTRAINTS,Array.from(Ob(t=this.constraintsMap).call(t)))}registerStats(e,t,n){this.statsRegistry.find((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})}unregisterStats(e,t){const n=this.statsRegistry.findIndex((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t));-1!==n&&this.statsRegistry.splice(n,1)}gatherStats(){const e=[];for(const{processorID:t,processorName:n,type:r,cb:i}of this.statsRegistry)try{const o=i();e.push({processorID:t,processorName:n,type:r,stats:o})}catch(e){VT.error(new Wv(Hv.UNEXPECTED_ERROR,e.message))}return e}registerUsage(e,t){this.usageRegistry.find((t=>t.processorID===e.ID&&t.processorName===e.name))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex((t=>t.processorID===e.ID&&t.processorName===e.name));-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:t}of this.usageRegistry)try{let n=t();n instanceof cv&&(n=await n),e.push(Ww(Ww({},n),{},{direction:this.direction}))}catch(e){VT.error("gather extension usage error",e)}return e}getDirection(){return this.direction}}class Jw extends l_{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),oh(this,"context",void 0),oh(this,"processSourceNode",void 0),oh(this,"outputTrack",void 0),oh(this,"processedNode",void 0),oh(this,"clonedTrack",void 0),oh(this,"outputNode",void 0),this.outputNode=new Xw}setVolume(){}createOutputTrack(){throw new Wv(Hv.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class Xw{disconnect(){}connect(){}}function Zw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zw(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class eR extends dw{get _source(){return this.initWebAudio()}set _source(e){this._trackSource=e}get processorContext(){return this._processorContext||(this._processorContext=this.initProcessor().processorContext),this._processorContext}get processorDestination(){return this._processorDestination||(this._processorDestination=this.initProcessor().processorDestination),this._processorDestination}get isPlaying(){return this._useAudioElement?Bw.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(e,t,n,r){super(e,n),oh(this,"trackMediaType","audio"),oh(this,"_encoderConfig",void 0),oh(this,"_trackSource",void 0),oh(this,"_enabled",!0),oh(this,"_volume",100),oh(this,"_useAudioElement",!0),oh(this,"_bypassWebAudio",!1),oh(this,"processor",void 0),oh(this,"_processorContext",void 0),oh(this,"_processorDestination",void 0),oh(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=t,this._getOriginVolumeLevel=!!r,this._trackSource=new Jw,ST("DISABLE_WEBAUDIO")&&(this._bypassWebAudio=!0),ST("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),wv()&&!pw?setTimeout((()=>this.initWebAudio())):this.initWebAudio()}setVolume(e){Kv(e,"volume",0,1e3),this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&Bw.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void VT.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const e=this._source.createOutputTrack();this._mediaStreamTrack!==e&&(this._mediaStreamTrack=e,N_(this,zC.NEED_REPLACE_TRACK,this).then((()=>{VT.debug("[".concat(this.getTrackId(),"] replace web audio track success"))})).catch((e=>{VT.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),e)})))}catch(e){}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){if(!this._useAudioElement||!Cv()&&ST("RESTRICTION_SET_PLAYBACK_DEVICE"))throw new Wv(Hv.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Bw.setSinkID(this.getTrackId(),e)}async setEnabled(e,t,n){return this._setEnabled(e,t,n)}async _setEnabled(e,t,n){if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(VT.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){this._originMediaStreamTrack.enabled=!0;try{n||(this._enabled=!0),await N_(this,zC.NEED_ENABLE_TRACK,this),VT.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(e," success"))}catch(e){throw n||(this._enabled=!1),VT.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),e}}else{this._originMediaStreamTrack.enabled=!1,n||(this._enabled=!1);try{await N_(this,zC.NEED_DISABLE_TRACK,this)}catch(e){throw n||(this._enabled=!0),VT.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}}}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,VT.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await N_(this,zC.NEED_MUTE_TRACK,this):await N_(this,zC.NEED_UNMUTE_TRACK,this))}getStats(){return Q_((()=>{VT.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")}),"localAudioTrackGetStatsWarning"),C_(this,zC.GET_STATS)||$w({},JC)}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(KC.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(KC.ON_AUDIO_BUFFER),this._source.on(KC.ON_AUDIO_BUFFER,(t=>e(t)))}play(){VT.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(VT.debug("[".concat(this.getTrackId(),"] start audio playback in element")),Bw.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){VT.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Bw.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this._processorDestination&&this.unbindProcessorDestinationEvents(this._processorDestination),this._processorContext&&this.unbindProcessorContextEvents(this._processorContext),this.unpipe(),this._processorDestination&&this._processorDestination._source&&this._processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];VT.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Bw.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this._processorContext&&this.processor.updateInput({track:e,context:this._processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await N_(this,zC.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(e))}renewMediaStreamTrack(e){return cv.resolve(void 0)}pipe(e){if(this._bypassWebAudio)throw new Wv(Hv.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===e)return e;if(e._source)throw new Wv(Hv.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(e){e.on(tw.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e),await N_(this,zC.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await N_(this,zC.NEED_REPLACE_TRACK,this))})),e.on(tw.ON_NODE,(e=>{this._source.processedNode=e}))}unbindProcessorDestinationEvents(e){e.removeAllListeners(tw.ON_TRACK),e.removeAllListeners(tw.ON_NODE)}bindProcessorContextEvents(e){e.on(nw.REQUEST_CONSTRAINTS,(async e=>{e(this._originMediaStreamTrack.getSettings())}))}unbindProcessorContextEvents(e){e.removeAllListeners(nw.REQUEST_CONSTRAINTS)}initWebAudio(){return this._trackSource instanceof Jw&&(this._trackSource=new Tw(this._mediaStreamTrack,!1,this._getOriginVolumeLevel?this._mediaStreamTrack:void 0)),this._trackSource}initProcessor(){const e=new Qw(this._source.context,this.getTrackId(),"local"),t=new Kw(e);return this._processorContext=e,this._processorDestination=t,this.bindProcessorContextEvents(e),this.bindProcessorDestinationEvents(t),this._source.on(KC.UPDATE_SOURCE,(()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:e})})),this._useAudioElement&&(this._useAudioElement=!1,this.isPlaying&&(Bw.stop(this.getTrackId()),this._source.play()),N_(this,zC.NEED_REPLACE_MIXING_TRACK,this).then((()=>{VT.debug("[".concat(this.getTrackId(),"] replace from origin track to web audio track success"))})).catch((e=>{VT.warning("[".concat(this.getTrackId(),"] replace from origin track to web audio track failed"),e)}))),{processorContext:e,processorDestination:t}}}Mb([$T({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),Db("design:type",Function),Db("design:paramtypes",[Number]),Db("design:returntype",void 0)],eR.prototype,"setVolume",null),Mb([$T({argsMap:(e,t)=>[e.getTrackId(),t]}),Gw(),Db("design:type",Function),Db("design:paramtypes",[String]),Db("design:returntype",cv)],eR.prototype,"setPlaybackDevice",null),Mb([fE("LocalAudioTrack","_enabledMutex"),$T({argsMap:(e,t)=>[e.getTrackId(),t]}),Gw(),Db("design:type",Function),Db("design:paramtypes",[Boolean,Object,Boolean]),Db("design:returntype",cv)],eR.prototype,"setEnabled",null),Mb([fE("LocalAudioTrack","_enabledMutex"),$T({argsMap:(e,t)=>[e.getTrackId(),t]}),Gw(),Db("design:type",Function),Db("design:paramtypes",[Boolean]),Db("design:returntype",cv)],eR.prototype,"setMuted",null),Mb([Gw(),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",Object)],eR.prototype,"getStats",null),Mb([Gw(),Db("design:type",Function),Db("design:paramtypes",[Object,Number]),Db("design:returntype",void 0)],eR.prototype,"setAudioFrameCallback",null),Mb([$T({argsMap:e=>[e.getTrackId()]}),Gw(),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],eR.prototype,"play",null),Mb([$T({argsMap:e=>[e.getTrackId()]}),Gw(),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],eR.prototype,"stop",null),Mb([$T({argsMap:e=>[e.getTrackId()]}),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],eR.prototype,"close",null),Mb([$T({argsMap:(e,t)=>[e.getTrackId(),t.name]}),Db("design:type",Function),Db("design:paramtypes",[Object]),Db("design:returntype",Object)],eR.prototype,"pipe",null),Mb([$T({argsMap:e=>[e.getTrackId()]}),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],eR.prototype,"unpipe",null);class tR extends eR{get __className__(){return"MicrophoneAudioTrack"}constructor(e,t,n,r){super(e,t.encoderConfig?jC(t.encoderConfig):{},r,ST("GET_VOLUME_OF_MUTED_AUDIO_TRACK")),oh(this,"_config",void 0),oh(this,"_deviceName","default"),oh(this,"_constraints",void 0),oh(this,"_originalConstraints",void 0),oh(this,"_enabled",!0),this._config=t,this._constraints=n,this._originalConstraints=n,this._deviceName=e.label,"boolean"==typeof t.bypassWebAudio&&(this._bypassWebAudio=t.bypassWebAudio),(Lv()||Pv())&&fw.bindInterruptDetectorTrack(this)}async setDevice(e){if(VT.info("[".concat(this.getTrackId(),"] start set device to ").concat(e)),this._enabled)try{const t=await xw.getDeviceById(e),n={};n.audio=$w({},this._constraints),n.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let r=null;try{r=await Ow(n,this.getTrackId())}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),r=await Ow({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!1),this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await xw.getDeviceById(e);this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}VT.info("[".concat(this.getTrackId(),"] set device to ").concat(e," success"))}async setEnabled(e,t,n){if(t)return VT.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(e);if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(VT.info("[".concat(this.getTrackId(),"] start setEnabled"),e),!e){var r;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),null===(r=this._source.clonedTrack)||void 0===r||r.stop(),n||(this._enabled=!1);try{await N_(this,zC.NEED_DISABLE_TRACK,this)}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setEnabled false failed"),e.toString()),e}return}const i=$w({},this._constraints),o=xw.searchDeviceIdByName(this._deviceName);o&&!i.deviceId&&(i.deviceId=o);try{n||(this._enabled=!0);const e=await Ow({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!1),await N_(this,zC.NEED_ENABLE_TRACK,this)}catch(e){throw n||(this._enabled=!1),VT.error("[".concat(this.getTrackId(),"] setEnabled true failed"),e.toString()),e}VT.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(Lv()||Pv())&&fw.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((Av()||Uv())&&this._enabled&&!this._isClosed&&fw.duringInterruption){const e=async()=>{fw.off(IC.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(VT.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};fw.on(IC.IOS_INTERRUPTION_END,e)}else VT.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(YC.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,n=xw.searchDeviceIdByName(this._deviceName);if(n&&!t.deviceId&&(t.deviceId=n),this._constraints=t,this._enabled){this._originMediaStreamTrack.stop();const e=await Ow({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!0)}}bindProcessorContextEvents(e){super.bindProcessorContextEvents(e),e.on(nw.REQUEST_UPDATE_CONSTRAINTS,(async(e,t,n)=>{try{const n=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(n),t()}catch(e){n(e)}}))}unbindProcessorContextEvents(e){super.unbindProcessorContextEvents(e),e.removeAllListeners(nw.REQUEST_UPDATE_CONSTRAINTS)}}Mb([$T({argsMap:(e,t)=>[e.getTrackId(),t]}),Gw(),Db("design:type",Function),Db("design:paramtypes",[String]),Db("design:returntype",cv)],tR.prototype,"setDevice",null),Mb([fE("MicrophoneAudioTrack","_enabledMutex"),$T({argsMap:(e,t,n)=>[e.getTrackId(),t,n]}),Gw(),Db("design:type",Function),Db("design:paramtypes",[Boolean,Boolean,Boolean]),Db("design:returntype",cv)],tR.prototype,"setEnabled",null),Mb([$T({argsMap:e=>[e.getTrackId()]}),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],tR.prototype,"close",null);class nR extends eR{get __className__(){return"BufferSourceAudioTrack"}constructor(e,t,n,r){super(t.createOutputTrack(),n,r),oh(this,"source",void 0),oh(this,"_bufferSource",void 0),this._useAudioElement=!1,this.source=e,this._bufferSource=t,this._bufferSource.on(KC.AUDIO_SOURCE_STATE_CHANGE,(e=>{this.safeEmit(YC.SOURCE_STATE_CHANGE,e)}));try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(e){this._bufferSource.seekAudioBuffer(e)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}close(){this.source=null,this._bufferSource.destroy(),super.close()}setAudioBufferPlaybackSpeed(e){Kv(e,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(e)}}Mb([$T({argsMap:(e,t)=>[e.getTrackId(),t,e.duration]}),Gw(),Db("design:type",Function),Db("design:paramtypes",[Object]),Db("design:returntype",void 0)],nR.prototype,"startProcessAudioBuffer",null),Mb([$T({argsMap:e=>[e.getTrackId()]}),Gw(),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],nR.prototype,"pauseProcessAudioBuffer",null),Mb([$T({argsMap:e=>[e.getTrackId()]}),Gw(),Db("design:type",Function),Db("design:paramtypes",[Number]),Db("design:returntype",void 0)],nR.prototype,"seekAudioBuffer",null),Mb([$T({argsMap:e=>[e.getTrackId()]}),Gw(),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],nR.prototype,"resumeProcessAudioBuffer",null),Mb([$T({argsMap:e=>[e.getTrackId()]}),Gw(),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],nR.prototype,"stopProcessAudioBuffer",null),Mb([$T({argsMap:e=>[e.getTrackId()]}),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],nR.prototype,"close",null),Mb([$T({argsMap:e=>[e.getTrackId()]}),Gw(),Db("design:type",Function),Db("design:paramtypes",[Number]),Db("design:returntype",void 0)],nR.prototype,"setAudioBufferPlaybackSpeed",null);class rR extends eR{get __className__(){return"MixingAudioTrack"}get isActive(){for(const e of this.trackList)if(e._enabled&&!e._isClosed&&!e.muted)return!0;return!1}constructor(){const e=gw().createMediaStreamDestination();super(e.stream.getAudioTracks()[0],void 0,rE(8,"track-mix-")),oh(this,"trackList",void 0),oh(this,"destNode",void 0),this._useAudioElement=!1;try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}this.destNode=e,this.trackList=[]}hasAudioTrack(e){return-1!==this.trackList.indexOf(e)}addAudioTrack(e){-1===this.trackList.indexOf(e)?(VT.debug("add ".concat(e.getTrackId()," to mixing track")),e._source.outputNode.connect(this.destNode),this.trackList.push(e),this.updateEncoderConfig()):VT.debug("track ".concat(e.getTrackId()," is already added"))}removeAudioTrack(e){if(-1!==this.trackList.indexOf(e)){VT.debug("remove ".concat(e.getTrackId()," from mixing track"));try{e._source.outputNode.disconnect(this.destNode)}catch(e){}G_(this.trackList,e),this.updateEncoderConfig()}}updateEncoderConfig(){const e={};this.trackList.forEach((t=>{t._encoderConfig&&((t._encoderConfig.bitrate||0)>(e.bitrate||0)&&(e.bitrate=t._encoderConfig.bitrate),(t._encoderConfig.sampleRate||0)>(e.sampleRate||0)&&(e.sampleRate=t._encoderConfig.sampleRate),(t._encoderConfig.sampleSize||0)>(e.sampleSize||0)&&(e.sampleSize=t._encoderConfig.sampleSize),t._encoderConfig.stereo&&(e.stereo=!0))})),this._encoderConfig=e}_updateRtpTransceiver(e){this._rtpTransceiver!==e&&(this._rtpTransceiver=e,this.trackList.forEach((t=>{t instanceof rR?t.emit(WC.TRANSCEIVER_UPDATED,e):t._updateRtpTransceiver(e)})))}}function iR(e){const t={};e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId});const n=kC(e.encoderConfig);return null!=n.width&&(t.width=n.width),null!=n.height&&(t.height=n.height),!zv()&&n.frameRate&&(t.frameRate=n.frameRate),Ev().name===mv.EDGE&&"object"==typeof t.frameRate&&(t.frameRate.max=60),Rv()&&(t.frameRate={ideal:30,max:30}),t}function oR(e){const t={};if(zv()||(void 0!==e.AGC&&(t.autoGainControl=e.AGC),void 0!==e.AEC&&(t.echoCancellation=e.AEC),void 0!==e.ANS&&(t.noiseSuppression=e.ANS,Cv()&&e.ANS&&(t.googHighpassFilter=e.ANS))),e.encoderConfig){const n=jC(e.encoderConfig);t.channelCount=n.stereo?2:1,t.sampleRate=n.sampleRate,t.sampleSize=n.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),Bv()&&(t.sampleRate=void 0),t}class sR extends Sw{set currentState(e){e!==this._currentState&&(this._currentState=e,this.safeEmit(KC.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),oh(this,"audioBuffer",void 0),oh(this,"sourceNode",void 0),oh(this,"startPlayTime",0),oh(this,"startPlayOffset",0),oh(this,"pausePlayTime",0),oh(this,"options",void 0),oh(this,"currentLoopCount",0),oh(this,"currentPlaybackSpeed",100),oh(this,"_currentState","stopped"),this.audioBuffer=e,this.options=t,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer?this.audioBuffer.duration:0}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.audioBuffer?"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration:0}updateOptions(e){"stopped"===this.currentState?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):VT.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(e){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=e,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=e))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(e){}this.reset()}}destroy(){this.audioBuffer=null,super.destroy()}setAudioBufferPlaybackSpeed(e){this.sourceNode&&("playing"===this.currentState&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=e/100),this.currentPlaybackSpeed=e}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e.playbackRate.value=this.currentPlaybackSpeed/100,e}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const aR=new Map;async function cR(e,t){let n=null;if("string"==typeof e){const t=aR.get(e);if(t)return VT.debug("use cached audio resource: ",e),t;try{n=(await yE((()=>oT.get(e,{responseType:"arraybuffer"})),void 0,void 0,{maxRetryCount:3})).data}catch(e){throw new Wv(Hv.FETCH_AUDIO_FILE_FAILED,e.toString())}}else{const t=new cv(((t,n)=>{const r=new FileReader;r.onload=e=>{e.target?t(e.target.result):n(new Wv(Hv.READ_LOCAL_AUDIO_FILE_ERROR))},r.onerror=()=>{n(new Wv(Hv.READ_LOCAL_AUDIO_FILE_ERROR))},r.readAsArrayBuffer(e)}));n=await t}const r=await function(e){const t=gw();return new cv(((n,r)=>{t.decodeAudioData(e,(e=>{n(e)}),(e=>{r(new Wv(Hv.DECODE_AUDIO_FILE_FAILED,e.toString()))}))}))}(n);return"string"==typeof e&&t&&aR.set(e,r),r}const lR=e=>{const t=document.createElement("canvas");return t.width=2,t.height=2,new cv(((n,r)=>{t.toBlob((async e=>{if(t.remove(),e){const r=await dR(e);n({buffer:r,width:t.width,height:t.height})}else r(new Wv(Hv.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))}),e,1)}))},dR=async e=>{const t=await e.arrayBuffer();return new Uint8Array(t)};function uR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uR(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class pR{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(e){e!==this._videoElementStatus&&(VT.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(e)),this._videoElementStatus=e)}get videoState(){return this._videoState}set videoState(e){var t;e!==this._videoState&&(VT.debug("[".concat(this.trackId,"] video-status change ").concat(this._videoState," => ").concat(e)),this._videoState=e,null===(t=this.onVideoStateChanged)||void 0===t||t.call(this,this.videoState))}constructor(e){oh(this,"trackId",void 0),oh(this,"config",void 0),oh(this,"onFirstVideoFrameDecoded",void 0),oh(this,"onVideoStateChanged",void 0),oh(this,"freezeTimeCounterList",[]),oh(this,"renderFreezeAccTime",0),oh(this,"isKeepLastFrame",!1),oh(this,"timeUpdatedCount",0),oh(this,"freezeTime",0),oh(this,"playbackTime",0),oh(this,"lastTimeUpdatedTime",0),oh(this,"autoplayFailed",!1),oh(this,"videoTrack",void 0),oh(this,"videoElement",void 0),oh(this,"cacheVideoElement",void 0),oh(this,"_videoState",sw.VideoStateStopped),oh(this,"videoElementCheckInterval",void 0),oh(this,"videoElementFreezeTimeout",void 0),oh(this,"_videoElementStatus",ow.NONE),oh(this,"isGettingVideoDimensions",!1),oh(this,"startGetVideoDimensions",(()=>{const e=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return VT.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(e,500)};!this.isGettingVideoDimensions&&e()})),oh(this,"autoResumeAfterInterruption",(()=>{this.videoTrack&&"live"===this.videoTrack.readyState&&"running"===fw.curState&&(VT.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(Tv())),jv()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))})),oh(this,"handleVideoEvents",(e=>{switch(e.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=ow.PLAYING;break;case"loadeddata":if(this.videoState=sw.VideoStateStarting,this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch(e){}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=ow.CANPLAY;break;case"stalled":this.videoElementStatus=ow.STALLED;break;case"suspend":this.videoElementStatus=ow.SUSPEND;break;case"pause":this.videoElementStatus=ow.PAUSED,Av()||Uv()||wv()&&this.autoplayFailed||!this.videoTrack||"live"!==this.videoTrack.readyState||(VT.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=ow.WAITING;break;case"abort":this.videoElementStatus=ow.ABORT;break;case"ended":this.videoElementStatus=ow.ENDED;break;case"emptied":this.videoElementStatus=ow.EMPTIED;break;case"error":{this.videoElementStatus=ow.ERROR;const e=this.videoElement.error;e&&VT.error("[".concat(this.trackId,"] media error, code: ").concat(e.code,", message: ").concat(e.message));break}case"timeupdate":{const e=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=e);const t=e-this.lastTimeUpdatedTime,n=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=e,MR.lastVisibleTime<MR.lastHiddenTime||n<MR.lastHiddenTime||n<MR.lastVisibleTime)return;for(t>ST("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=t),this.playbackTime+=t;this.playbackTime>=6e3;){this.playbackTime-=6e3;const e=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(e),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}})),oh(this,"autoResumeAfterInterruptionOnIOS15_16",(()=>{this.videoTrack&&"live"===this.videoTrack.readyState&&(VT.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(Tv())),jv()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))})),this.trackId=e.trackId,this.config=e,e.element instanceof HTMLVideoElement?this.videoElement=e.element:this.videoElement=document.createElement("video"),fw.on(IC.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),fw.on(IC.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var e;return null!==(e=this.videoElement.parentElement)&&void 0!==e?e:void 0}updateConfig(e){this.config=e,this.trackId=e.trackId,e.element!==this.videoElement&&(this.destroy(),this.videoElement=e.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.initVideoElement())}play(e){const t=this.videoElement.play();t&&t.catch&&t.catch((t=>{e&&zw(e,"video",t.message,this.trackId),"NotAllowedError"===t.name?(VT.warning("detected video element autoplay failed",t),this.autoplayFailed=!0,this.handleAutoPlayFailed()):VT.warning("[".concat(this.trackId,"] play warning: "),t)}));const n=Ev();if(("Safari"===n.name&&15===Number(n.version)||Lv())&&t&&t.then){const e=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};t.then(e).catch(e)}}getCurrentFrame(){const e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;const t=e.getContext("2d");if(!t)return VT.error("create canvas context failed!"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);const n=t.getImageData(0,0,e.width,e.height);return e.remove(),n}async getCurrentFrameToUint8Array(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=document.createElement("canvas");n.width=this.videoElement.videoWidth,n.height=this.videoElement.videoHeight;const r=n.getContext("2d");return r?(r.drawImage(this.videoElement,0,0,n.width,n.height),new cv(((r,i)=>{n.toBlob((async e=>{if(n.remove(),e){const t=await dR(e);r({buffer:t,width:n.width,height:n.height})}else i(new Wv(Hv.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))}),e,t<0?.1:t>1?1:t)}))):await lR(e)}destroy(){fw.off(IC.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),fw.off(IC.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[],this.videoState=sw.VideoStateStopped}initVideoElement(){if(this.videoElementStatus=ow.INIT,!this.videoElementCheckInterval&&(fR.forEach((e=>{this.videoElement.addEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval=window.setInterval((()=>{(function(e){return e!==document.body&&document.body.contains(e)})(this.videoElement)||(this.videoElementStatus=ow.DESTROYED)}),1e3),ST("ENABLE_VIDEO_FRAME_CALLBACK"))){var e,t;let n;const r=()=>{"visible"===document.visibilityState&&(document.removeEventListener("visibilitychange",r),this.videoElementFreezeTimeout=window.setTimeout(i,ST("VIDEO_FREEZE_DURATION")))},i=()=>{this.videoElementFreezeTimeout=void 0,this.videoState===sw.VideoStateDecoding&&("visible"===document.visibilityState?this.videoState=sw.VideoStateFrozen:document.addEventListener("visibilitychange",r))},o=(e,t)=>{if(this.videoElementStatus===ow.PLAYING){if(n){const e=t.presentationTime-n.presentationTime;this.videoState===sw.VideoStateStarting&&(this.videoState=sw.VideoStateDecoding),this.videoState===sw.VideoStateDecoding&&this.onVideoStateChanged&&(this.videoElementFreezeTimeout&&window.clearTimeout(this.videoElementFreezeTimeout),this.videoElementFreezeTimeout=window.setTimeout(i,ST("VIDEO_FREEZE_DURATION"))),e<ST("VIDEO_FREEZE_DURATION")&&this.videoState===sw.VideoStateFrozen&&(this.videoState=sw.VideoStateDecoding),e>ST("VIDEO_FREEZE_DURATION")&&MR.lastVisibleTime>=MR.lastHiddenTime&&n.timestamp>MR.lastVisibleTime&&n.timestamp>MR.lastHiddenTime&&(this.renderFreezeAccTime+=e)}n=hR(hR({},t),{},{timestamp:e})}var r,s;ST("ENABLE_VIDEO_FRAME_CALLBACK")&&(null===(r=(s=this.videoElement).requestVideoFrameCallback)||void 0===r||r.call(s,o))};null===(e=(t=this.videoElement).requestVideoFrameCallback)||void 0===e||e.call(t,o)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),Bv()&&(this.videoElement.poster="noposter");const n=Ev();"Safari"===n.name&&15===Number(n.version)||Lv()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Rv()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Rv()&&this.videoElement.load());const r=this.videoElement.play();void 0!==r&&r.catch((e=>{VT.debug("[".concat(this.trackId,"] playback interrupted"),e.toString())}))}resetVideoElement(){fR.forEach((e=>{this.videoElement&&this.videoElement.removeEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=ow.NONE}handleAutoPlayFailed(){const e=t=>{t.preventDefault(),this.videoElement.play().then((()=>{VT.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))})).catch((e=>{VT.error(e)})),this.autoplayFailed=!1,Gv()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};Gv()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),jw()}}const fR=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];class mR extends pR{constructor(e){super(e),oh(this,"container",void 0),oh(this,"slot",void 0),this.slot=e.element,this.updateConfig(e)}updateConfig(e){this.config=e,this.trackId=e.trackId;const t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}play(e){var t;null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)&&super.play(e)}getCurrentFrame(){var e;return null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(e,n):await lR(e)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch(e){}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",ST("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var e;!this.container||null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var e;if(null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch(e){}this.videoElement=document.createElement("video")}}resetVideoElement(){var e;null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}}function gR(e){return new cv(((t,n)=>{let r=!1;const i=document.createElement("video");i.setAttribute("autoplay",""),i.setAttribute("muted",""),i.muted=!0,i.autoplay=!0,i.setAttribute("playsinline",""),i.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(i);const o=Av()?"canplay":"playing";i.addEventListener(o,(()=>{const e=i.videoWidth,n=i.videoHeight;!e&&Rv()||(r=!0,i.srcObject=null,i.remove(),t([e,n]))})),i.srcObject=new MediaStream([e]),i.play().catch(oE),setTimeout((()=>{r||(i.srcObject=null,i.remove(),t([i.videoWidth,i.videoHeight]))}),4e3)}))}const yR=async(e,t,n)=>{const r=function(e){const t=[];for(let n=0;n<e.length;n+=2)t.push(parseInt(e.slice(n,n+2),16));return Uint8Array.from(t)}(function(e){const t="0123456789abcdef";function n(e){let n,r="";for(n=0;n<=3;n++)r+=t.charAt(e>>8*n+4&15)+t.charAt(e>>8*n&15);return r}function r(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,i,o,s){return r(function(e,t){return e<<t|e>>>32-t}(r(r(t,e),r(i,s)),o),n)}function o(e,t,n,r,o,s,a){return i(t&n|~t&r,e,t,o,s,a)}function s(e,t,n,r,o,s,a){return i(t&r|n&~r,e,t,o,s,a)}function a(e,t,n,r,o,s,a){return i(t^n^r,e,t,o,s,a)}function c(e,t,n,r,o,s,a){return i(n^(t|~r),e,t,o,s,a)}const l=function(e){let t;const n=1+(e.length+8>>6),r=new Array(16*n);for(t=0;t<16*n;t++)r[t]=0;for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<t%4*8;return r[t>>2]|=128<<t%4*8,r[16*n-2]=8*e.length,r}(e);let d,u,h,p,f,m=1732584193,g=-271733879,y=-1732584194,v=271733878;for(d=0;d<l.length;d+=16)u=m,h=g,p=y,f=v,m=o(m,g,y,v,l[d+0],7,-680876936),v=o(v,m,g,y,l[d+1],12,-389564586),y=o(y,v,m,g,l[d+2],17,606105819),g=o(g,y,v,m,l[d+3],22,-1044525330),m=o(m,g,y,v,l[d+4],7,-176418897),v=o(v,m,g,y,l[d+5],12,1200080426),y=o(y,v,m,g,l[d+6],17,-1473231341),g=o(g,y,v,m,l[d+7],22,-45705983),m=o(m,g,y,v,l[d+8],7,1770035416),v=o(v,m,g,y,l[d+9],12,-1958414417),y=o(y,v,m,g,l[d+10],17,-42063),g=o(g,y,v,m,l[d+11],22,-1990404162),m=o(m,g,y,v,l[d+12],7,1804603682),v=o(v,m,g,y,l[d+13],12,-40341101),y=o(y,v,m,g,l[d+14],17,-1502002290),g=o(g,y,v,m,l[d+15],22,1236535329),m=s(m,g,y,v,l[d+1],5,-165796510),v=s(v,m,g,y,l[d+6],9,-1069501632),y=s(y,v,m,g,l[d+11],14,643717713),g=s(g,y,v,m,l[d+0],20,-373897302),m=s(m,g,y,v,l[d+5],5,-701558691),v=s(v,m,g,y,l[d+10],9,38016083),y=s(y,v,m,g,l[d+15],14,-660478335),g=s(g,y,v,m,l[d+4],20,-405537848),m=s(m,g,y,v,l[d+9],5,568446438),v=s(v,m,g,y,l[d+14],9,-1019803690),y=s(y,v,m,g,l[d+3],14,-187363961),g=s(g,y,v,m,l[d+8],20,1163531501),m=s(m,g,y,v,l[d+13],5,-1444681467),v=s(v,m,g,y,l[d+2],9,-51403784),y=s(y,v,m,g,l[d+7],14,1735328473),g=s(g,y,v,m,l[d+12],20,-1926607734),m=a(m,g,y,v,l[d+5],4,-378558),v=a(v,m,g,y,l[d+8],11,-2022574463),y=a(y,v,m,g,l[d+11],16,1839030562),g=a(g,y,v,m,l[d+14],23,-35309556),m=a(m,g,y,v,l[d+1],4,-1530992060),v=a(v,m,g,y,l[d+4],11,1272893353),y=a(y,v,m,g,l[d+7],16,-155497632),g=a(g,y,v,m,l[d+10],23,-1094730640),m=a(m,g,y,v,l[d+13],4,681279174),v=a(v,m,g,y,l[d+0],11,-358537222),y=a(y,v,m,g,l[d+3],16,-722521979),g=a(g,y,v,m,l[d+6],23,76029189),m=a(m,g,y,v,l[d+9],4,-640364487),v=a(v,m,g,y,l[d+12],11,-421815835),y=a(y,v,m,g,l[d+15],16,530742520),g=a(g,y,v,m,l[d+2],23,-995338651),m=c(m,g,y,v,l[d+0],6,-198630844),v=c(v,m,g,y,l[d+7],10,1126891415),y=c(y,v,m,g,l[d+14],15,-1416354905),g=c(g,y,v,m,l[d+5],21,-57434055),m=c(m,g,y,v,l[d+12],6,1700485571),v=c(v,m,g,y,l[d+3],10,-1894986606),y=c(y,v,m,g,l[d+10],15,-1051523),g=c(g,y,v,m,l[d+1],21,-2054922799),m=c(m,g,y,v,l[d+8],6,1873313359),v=c(v,m,g,y,l[d+15],10,-30611744),y=c(y,v,m,g,l[d+6],15,-1560198380),g=c(g,y,v,m,l[d+13],21,1309151649),m=c(m,g,y,v,l[d+4],6,-145523070),v=c(v,m,g,y,l[d+11],10,-1120210379),y=c(y,v,m,g,l[d+2],15,718787259),g=c(g,y,v,m,l[d+9],21,-343485551),m=r(m,u),g=r(g,h),y=r(y,p),v=r(v,f);return n(m)+n(g)+n(y)+n(v)}(""+t+n)).slice(0,16),i=r.slice(0,12),o=await window.crypto.subtle.importKey("raw",r,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:i},o,e))},vR=async(e,t,n)=>await yR(e.buffer,t,n);function _R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ER(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_R(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class SR extends dw{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==ow.PLAYING)}get processorContext(){return this._processorContext}set processorContext(e){this._processorContext=e}get __className__(){return"LocalVideoTrack"}constructor(e,t,n,r,i,o){if(super(e,i),oh(this,"trackMediaType","video"),oh(this,"_player",void 0),oh(this,"isUseScaleResolutionDownBy",!1),oh(this,"_videoVisibleTimer",null),oh(this,"_statsTimer",null),oh(this,"_previousVideoVisibleStatus",void 0),oh(this,"_clearPreviousVideoVisibleStatus",(()=>this._previousVideoVisibleStatus=void 0)),oh(this,"_encoderConfig",void 0),oh(this,"_scalabilityMode",{numSpatialLayers:1,numTemporalLayers:1}),oh(this,"_optimizationMode",void 0),oh(this,"_videoHeight",void 0),oh(this,"_videoWidth",void 0),oh(this,"_forceBitrateLimit",void 0),oh(this,"_enabled",!0),oh(this,"processorDestination",void 0),oh(this,"_processorContext",void 0),wv()){const{width:t,height:n}=e.getSettings();this._videoWidth=t,this._videoHeight=n}else this.updateMediaStreamTrackResolution();if(this._encoderConfig=t,this._scalabilityMode=n,this._optimizationMode=r,this._hints=o||[],-1===this._hints.indexOf(VC.SCREEN_TRACK))this.updateBitrateFromProfile();else if(function(e,t,n){const r=Ev();return!(r.name!==e||!r.osVersion)&&(n?Number(r.version)>=t&&Number(r.version)<=n:Number(r.version)===t)}(mv.CHROME,115)&&-1!==Sv().indexOf("Windows")){const t=function(e,t){if("VideoFrame"in window&&"TransformStream"in window&&bC().supportWebRTCInsertableStream){const n=new MediaStreamTrackProcessor(e),r=new MediaStreamTrackGenerator({kind:"video"});let i,o,s=Date.now();const a=()=>{c&&(clearInterval(c),c=void 0),i&&(i.close(),i=void 0),e.stop(),o=void 0,r.removeEventListener("ended",a)};let c=window.setInterval((()=>{if(o&&i&&Date.now()-s>(null!=t?t:1e3))try{"live"===r.readyState?o.enqueue(i.clone()):a()}catch(e){a()}}),null!=t?t:1e3);const l=new TransformStream({transform:(e,t)=>{"live"===r.readyState?(o=t,s=Date.now(),void 0===i?(i=e,t.enqueue(e.clone())):(t.enqueue(i),i=e)):e.close()}});return r.addEventListener("ended",a),n.readable.pipeThrough(l).pipeTo(r.writable),r}}(e);t&&(VT.info("local screen video track begin to inject frame"),this._mediaStreamTrack=t)}t&&-1!==this._hints.indexOf(VC.CUSTOM_TRACK)&&this.setEncoderConfiguration(t),this._processorContext=new qw(this.getTrackId(),"local"),this.processorDestination=new Yw(this.processorContext),this.bindProcessorDestinationEvents()}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){const t=document.getElementById(e);t?e=t:(VT.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}VT.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(t));const n=ER(ER(ER({},this._getDefaultPlayerConfig()),t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(n):(e instanceof HTMLVideoElement?this._player=new pR(n):this._player=new mR(n),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((()=>{try{const e=this.getVideoElementVisibleStatus();this.safeEmit(YC.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),ST("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._statsTimer&&(this.isUseScaleResolutionDownBy=!1,window.clearInterval(this._statsTimer),this._statsTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,VT.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(VT.info("[".concat(this.getTrackId(),"] start setEnabled"),e),!e){this._originMediaStreamTrack.enabled=!1;try{await N_(this,zC.NEED_DISABLE_TRACK,this)}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}return t||(this._enabled=!1),void VT.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await N_(this,zC.NEED_ENABLE_TRACK,this)}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),e}VT.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,VT.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await N_(this,zC.NEED_MUTE_TRACK,this):await N_(this,zC.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(e,t){if(!this._enabled)throw new Wv(Hv.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if("720p_auto"===e?this.startMonitorStats():this._statsTimer&&(window.clearInterval(this._statsTimer),this._statsTimer=null),e=kC(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin),e.width||e.height||e.frameRate){const t=iR({encoderConfig:e});(wv()||Av()||Uv())&&(t.deviceId=void 0),VT.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(e),JSON.stringify(t));try{await this._originMediaStreamTrack.applyConstraints(t),this.updateMediaStreamTrackResolution()}catch(e){const t=new Wv(Hv.UNEXPECTED_ERROR,e.toString());throw VT.error("[".concat(this.getTrackId(),"] applyConstraints error"),t.toString()),t}}this._encoderConfig=e,-1===this._hints.indexOf(VC.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await N_(this,zC.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(VT)}}getStats(){return Q_((()=>{VT.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")}),"localVideoTrackGetStatsWarning"),C_(this,zC.GET_STATS)||ER({},XC)}async setBeautyEffect(e){VT.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(e,t):await lR(e)}async setBitrateLimit(e){if(VT.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(e))),e){this._forceBitrateLimit=e,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<e.max_bitrate?this._encoderConfig.bitrateMax:e.max_bitrate:this._encoderConfig.bitrateMax=e.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=e.min_bitrate);try{await N_(this,zC.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(VT)}}}async setOptimizationMode(e){if("motion"!==e&&"detail"!==e&&"balanced"!==e)return void VT.error(Hv.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const t=this._optimizationMode;try{this._optimizationMode=e,await N_(this,zC.SET_OPTIMIZATION_MODE,this)}catch(e){throw this._optimizationMode=t,VT.error("[".concat(this.getTrackId(),"] set optimization mode failed"),e.toString()),e}VT.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(e,")"))}setScalabiltyMode(e){if(1===e.numSpatialLayers&&1!==e.numTemporalLayers)return VT.error(Hv.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabilityMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabilityMode=e,VT.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(e,")"))}updateMediaStreamTrackResolution(){gR(this._originMediaStreamTrack).then((e=>{let[t,n]=e;this._videoHeight=n,this._videoWidth=t})).catch(oE)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async setSenderConfiguration(e){if(!this._enabled)throw new Wv(Hv.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");VT.debug("[".concat(this.getTrackId(),"] setSenderConfiguration applyConstraints"),JSON.stringify(e)),e=kC(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin),this._encoderConfig=e,-1===this._hints.indexOf(VC.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await N_(this,zC.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(VT)}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:e,height:t,frameRate:n}=this.getMediaStreamTrackSettings();if(!e||!t||!n)return;const{bitrateMax:r,bitrateMin:i}=this._encoderConfig;if(null==i||null==r){const{max:o,min:s}=function(e,t,n,r,i){const o=ST("BITRATE_ADAPTER_TYPE");if("DEFAULT_BITRATE"===o)return{min:r,max:i};if(void 0===i){var s;const a=Math.floor(200*Math.pow(n/15,.6)*Math.pow(e*t/640/360,.75));i="STANDARD_BITRATE"===o?4*a:2*a,r=null!==(s=r)&&void 0!==s?s:a}else{var a;r=null!==(a=r)&&void 0!==a?a:Math.floor(i/10)}return{min:r,max:i}}(e,t,n,i,r);this._encoderConfig.bitrateMin=s,this._encoderConfig.bitrateMax=o,VT.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(e,", h: ").concat(t,", fps: ").concat(n,"] => [brMax: ").concat(o,", brMin: ").concat(s,"]"))}}getVideoElementVisibleStatus(){try{var e,t;const n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},{element:i,slot:o}=r;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=i_.checkOneElementVisible(i),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=eb.reportApiInvoke(null,{tag:p_.TRACER,name:h_.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess("Video is visible"):e.onSuccess("Invisible because of ".concat(t.reason))}return t}return}catch(e){throw new Wv(Hv.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}async renewMediaStreamTrack(e){}pipe(e){if(this.processor===e)return e;if(e._source)throw new Wv(Hv.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}clone(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._encoderConfig;e&&(n=ER(ER({},n),kC(e))),n=q_(n);const r=rE(8,"track-video-cloned-"),i=new SR(t?this._mediaStreamTrack.clone():this._mediaStreamTrack,n,q_(this._scalabilityMode),this._optimizationMode,r,q_(this._hints));return e&&n&&i.setEncoderConfiguration(n),VT.debug("clone video track from ".concat(this.getTrackId()," to ").concat(r,", clone ").concat(t)),i}async replaceTrack(e,t){if(!(e instanceof MediaStreamTrack))throw new Wv(Hv.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if("video"!==e.kind)throw new Wv(Hv.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(e,t,!0),this.updateMediaStreamTrackResolution()}startMonitorStats(){if(!wv()&&!Av())return;this._statsTimer&&window.clearInterval(this._statsTimer);let e=2,t=OC[e],n=-1,r=Date.now();const i=e=>{e>2||e<0||(r=Date.now(),t=OC[e],this.setSenderConfiguration(t))};this.isUseScaleResolutionDownBy=!0,this._statsTimer=window.setInterval((()=>{const o=this.getStats(),s=C_(this,zC.GET_RTC_STATS);if(o.sendPackets>0&&s){-1===n&&(n=Date.now());const a=Date.now();if(a-n<1e3||a-r<ST("PROFILE_SWITCH_INTERVAL"))return;const c=o.sendFrameRate,l=.6*t.frameRate,d=.9*t.frameRate;"number"==typeof c&&c>0&&c<l?e>0&&(e--,i(e),VT.debug("[".concat(this.getTrackId(),"] step down for fps ").concat(c,", switchProfile to ").concat(e))):s.OutgoingAvailableBandwidth<t.bitrateMin?e>0&&(e--,i(e),VT.debug("[".concat(this.getTrackId(),"] step down for OutgoingAvailableBandwidth ").concat(s.OutgoingAvailableBandwidth,", bitrateMin ").concat(t.bitrateMin,", switchProfile to ").concat(e))):"number"==typeof c&&c>d&&e<OC.length-1&&s.OutgoingAvailableBandwidth>1.2*OC[e+1].bitrateMin&&(e++,i(e),VT.debug("[".concat(this.getTrackId(),"] step up for fps ").concat(c,", OutgoingAvailableBandwidth ").concat(s.OutgoingAvailableBandwidth,", switchProfile to ").concat(e)))}}),ST("CHECK_LOCAL_STATS_INTERVAL"))}sendSeiData(e){if(Q_((()=>{eb.reportApiInvoke(null,{name:h_.LOCAL_VIDEO_SEND_SEI_DATA,options:[],tag:p_.TRACER}).onSuccess("")}),this._mediaStreamTrack.id||this.getTrackId()),!ST("ENABLE_VIDEO_SEI")||!ST("ENABLE_ENCODED_TRANSFORM"))return void VT.warning('To send/receive SEI, please call AgoraRTC.setParameter("ENABLE_VIDEO_SEI", true) before instantiate IAgoraRtcClient');if(e instanceof Uint8Array==0)return new Wv(Hv.INVALID_PARAMS,"Invalid argument type, ILocalVideoTrack.sendSeiData() only accept Uint8Array argument.").throw();const t=this.getRTCRtpTransceiver();if(!t)return void VT.warning("Video track is not published, SEI can not be send");const n=t.sender.getParameters();if(0===n.codecs.length)return;const r=n.codecs[0].mimeType.toLocaleLowerCase();"video/h264"===r?this.safeEmit("sei-to-send",e):VT.warning("SEI is not supported by ".concat(r))}bindProcessorDestinationEvents(){this.processorDestination.on(tw.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(),await N_(this,zC.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await N_(this,zC.NEED_REPLACE_TRACK,this))}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(tw.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(nw.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(nw.REQUEST_CONSTRAINTS)}}Mb([$T({argsMap:(e,t,n)=>[e.getTrackId(),"string"==typeof t?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}),Gw(),Db("design:type",Function),Db("design:paramtypes",[Object,Object]),Db("design:returntype",void 0)],SR.prototype,"play",null),Mb([$T({argsMap:e=>[e.getTrackId()]}),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],SR.prototype,"stop",null),Mb([fE("LocalVideoTrack","_enabledMutex"),$T({argsMap:(e,t)=>[e.getTrackId(),t]}),Gw(),Db("design:type",Function),Db("design:paramtypes",[Boolean,Boolean]),Db("design:returntype",cv)],SR.prototype,"setEnabled",null),Mb([fE("LocalVideoTrack","_enabledMutex"),$T({argsMap:(e,t)=>[e.getTrackId(),t]}),Gw(),Db("design:type",Function),Db("design:paramtypes",[Boolean]),Db("design:returntype",cv)],SR.prototype,"setMuted",null),Mb([$T({argsMap:(e,t)=>[e.getTrackId(),t]}),Gw(),Db("design:type",Function),Db("design:paramtypes",[Object,Boolean]),Db("design:returntype",cv)],SR.prototype,"setEncoderConfiguration",null),Mb([Gw(),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",Object)],SR.prototype,"getStats",null),Mb([$T({argsMap:(e,t,n)=>[e.getTrackId(),t,n]}),Gw(),Db("design:type",Function),Db("design:paramtypes",[Boolean,Object]),Db("design:returntype",cv)],SR.prototype,"setBeautyEffect",null),Mb([Gw(),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",ImageData)],SR.prototype,"getCurrentFrameData",null),Mb([Gw(),Db("design:type",Function),Db("design:paramtypes",[String,Number]),Db("design:returntype",cv)],SR.prototype,"getCurrentFrameImage",null),Mb([Gw(),Db("design:type",Function),Db("design:paramtypes",[Object]),Db("design:returntype",cv)],SR.prototype,"setBitrateLimit",null),Mb([Gw(),Db("design:type",Function),Db("design:paramtypes",[String]),Db("design:returntype",cv)],SR.prototype,"setOptimizationMode",null),Mb([Gw(),Db("design:type",Function),Db("design:paramtypes",[Object]),Db("design:returntype",void 0)],SR.prototype,"setScalabiltyMode",null),Mb([Gw(),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],SR.prototype,"updateMediaStreamTrackResolution",null),Mb([$T({argsMap:(e,t)=>[e.getTrackId(),t.name]}),Db("design:type",Function),Db("design:paramtypes",[Object]),Db("design:returntype",Object)],SR.prototype,"pipe",null),Mb([$T({argsMap:e=>[e.getTrackId()]}),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],SR.prototype,"unpipe",null),Mb([$T({argsMap:e=>[e.getTrackId()]}),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],SR.prototype,"close",null),Mb([$T({argsMap:(e,t,n)=>[e.getTrackId(),t.label,n]}),Db("design:type",Function),Db("design:paramtypes",[MediaStreamTrack,Boolean]),Db("design:returntype",cv)],SR.prototype,"replaceTrack",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],SR.prototype,"startMonitorStats",null);class TR extends SR{get __className__(){return"CameraVideoTrack"}constructor(e,t,n,r,i,o){super(e,kC(t.encoderConfig),r,i,o),oh(this,"_config",void 0),oh(this,"_originalConstraints",void 0),oh(this,"_constraints",void 0),oh(this,"_enabled",!0),oh(this,"_deviceName","default"),oh(this,"tryResumeVideoForIOS15_16WeChat",(async()=>{(Lv()||Pv())&&!function(){const e=Ev();if(e.os!==fv.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=2}()&&Fv()&&this._enabled&&!this._isClosed&&(VT.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())})),this._config=t,this._originalConstraints=n,this._constraints=n,this._deviceName=e.label,this._encoderConfig=kC(this._config.encoderConfig),fw.on(IC.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),fw.on(IC.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(e){return"string"==typeof e?this._setDeviceById(e):e.deviceId?this._setDeviceById(e.deviceId):e.facingMode?this._setDeviceByFacingModel(e.facingMode):void 0}async _setDeviceById(e){if(VT.info("[".concat(this.getTrackId(),"] set device to ").concat(e)),this._enabled)try{const t=await xw.getDeviceById(e),n={};n.video=ER({},this._constraints),n.video.deviceId={exact:e},n.video.facingMode=void 0,this._originMediaStreamTrack.stop();let r=null;try{r=await Ow(n,this.getTrackId())}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),r=await Ow({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await xw.getDeviceById(e);this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}VT.info("[".concat(this.getTrackId(),"] setDevice success"))}async _setDeviceByFacingModel(e){VT.info("[".concat(this.getTrackId(),"] set facingMode ").concat(e));const t={video:ER(ER({},this._constraints),{},{deviceId:void 0,facingMode:{exact:e}})};if(this._enabled){this._originMediaStreamTrack.stop();let e=null;try{e=await Ow(t,this.getTrackId())}catch(t){throw VT.error("[".concat(this.getTrackId(),"] setDeviceByFacingModel failed"),t.toString()),e=await Ow({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),t}await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution()}this._deviceName="",this._config.facingMode=e,this._config.cameraId=void 0,this._constraints=ER({},t.video),VT.info("[".concat(this.getTrackId(),"] setDeviceByFacingModel success"))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(VT.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const e=await Ow({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1)}await N_(this,zC.NEED_ENABLE_TRACK,this)}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setEnabled true error"),e.toString()),e}this.updateMediaStreamTrackResolution(),VT.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),t||(this._enabled=!1);try{await N_(this,zC.NEED_DISABLE_TRACK,this)}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}VT.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(e,t){if(!this._enabled)throw new Wv(Hv.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");"720p_auto"===e?this.startMonitorStats():this._statsTimer&&(window.clearInterval(this._statsTimer),this._statsTimer=null),e=kC(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin);const n=Y_(this._config);n.encoderConfig=e;const r=iR(n);(wv()||Av()||Uv())&&(r.deviceId=void 0),VT.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(e),JSON.stringify(r));try{await this._originMediaStreamTrack.applyConstraints(r),this.updateMediaStreamTrackResolution()}catch(e){const t=new Wv(Hv.UNEXPECTED_ERROR,e.toString());throw VT.error("[".concat(this.getTrackId(),"] applyConstraints error"),t.toString()),t}this._config=n,this._constraints=r,this._originalConstraints=r,this._encoderConfig=e,-1===this._hints.indexOf(VC.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await N_(this,zC.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(VT)}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((Av()||Uv())&&this._enabled&&!this._isClosed&&fw.duringInterruption){const e=async()=>{fw.off(IC.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(VT.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};fw.on(IC.IOS_INTERRUPTION_END,e)}else VT.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(YC.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,n=xw.searchDeviceIdByName(this._deviceName);if(n&&!t.deviceId&&(t.deviceId={exact:n}),this._enabled){const e=await Ow({video:t},this.getTrackId());this._constraints=t,await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),fw.off(IC.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),fw.off(IC.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}clone(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._encoderConfig;e&&(n=ER(ER({},n),kC(e))),n=q_(n);const r=rE(8,"track-cam-cloned-"),i=new TR(t?this._mediaStreamTrack.clone():this._mediaStreamTrack,q_(ER(ER({},this._config),{},{encoderConfig:n})),q_(this._constraints),q_(this._scalabilityMode),this._optimizationMode,r);return e&&n&&i.setEncoderConfiguration(n),VT.debug("clone track from ".concat(this.getTrackId()," to ").concat(r,", clone ").concat(t)),i}bindProcessorContextEvents(){this.processorContext.on(nw.REQUEST_UPDATE_CONSTRAINTS,(async(e,t,n)=>{try{const n=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(n),t()}catch(e){n(e)}})),this.processorContext.on(nw.REQUEST_CONSTRAINTS,(async e=>{e(this._originMediaStreamTrack.getSettings())}))}}function bR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function IR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bR(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function NR(e,t,n,r){n.optimizationMode&&(r&&r.width&&r.height?(n.encoderConfig=IR(IR({},r),{},{bitrateMin:r.bitrateMin,bitrateMax:r.bitrateMax}),"motion"!==n.optimizationMode&&"detail"!==n.optimizationMode||(t.contentHint=n.optimizationMode,t.contentHint===n.optimizationMode?VT.debug("[".concat(e,"] set content hint to"),n.optimizationMode):VT.debug("[".concat(e,"] set content hint failed")))):VT.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}function CR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CR(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Mb([$T({argsMap:(e,t)=>[e.getTrackId(),t]}),Gw(),Db("design:type",Function),Db("design:paramtypes",[Object]),Db("design:returntype",cv)],TR.prototype,"setDevice",null),Mb([fE("CameraVideoTrack","_enabledMutex"),$T({argsMap:(e,t)=>[e.getTrackId(),t]}),Gw(),Db("design:type",Function),Db("design:paramtypes",[Boolean,Boolean]),Db("design:returntype",cv)],TR.prototype,"setEnabled",null),Mb([$T({argsMap:(e,t)=>[e.getTrackId(),t]}),Gw(),Db("design:type",Function),Db("design:paramtypes",[Object,Boolean]),Db("design:returntype",cv)],TR.prototype,"setEncoderConfiguration",null),Mb([$T({argsMap:e=>[e.getTrackId()]}),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],TR.prototype,"close",null);class RR extends lw{getUserId(){return this._userId}constructor(e,t,n,r){super(e,"track-".concat(e.kind,"-").concat(t,"-").concat(r.clientId,"_").concat(rE(5,""))),oh(this,"_userId",void 0),oh(this,"_uintId",void 0),oh(this,"_isDestroyed",!1),oh(this,"store",void 0),oh(this,"processor",void 0),this._userId=t,this._uintId=n,this.store=r}_updateOriginMediaStreamTrack(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,VT.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}class AR extends RR{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==ow.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(e,t,n,r){super(e,t,n,r),oh(this,"_videoVisibleTimer",null),oh(this,"_previousVideoVisibleStatus",void 0),oh(this,"_clearPreviousVideoVisibleStatus",(()=>this._previousVideoVisibleStatus=void 0)),oh(this,"trackMediaType","video"),oh(this,"_videoWidth",void 0),oh(this,"_videoHeight",void 0),oh(this,"_player",void 0),oh(this,"processorDestination",void 0),oh(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new qw(this.getTrackId(),"remote"),this.processorDestination=new Yw(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return Q_((()=>{VT.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")}),"remoteVideoTrackGetStatsWarning"),C_(this,zC.GET_STATS)||wR({},ew)}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){const t=document.getElementById(e);t?e=t:(VT.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}VT.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(t));const n=wR(wR({fit:"cover"},t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(n):(e instanceof HTMLVideoElement?this._player=new pR(n):this._player=new mR(n),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(qC.FIRST_FRAME_DECODED)},this._player.onVideoStateChanged=e=>{this.safeEmit(qC.VIDEO_STATE_CHANGED,e)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((()=>{try{const e=this.getVideoElementVisibleStatus();this.safeEmit(qC.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),ST("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,VT.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){gR(this._originMediaStreamTrack).then((e=>{let[t,n]=e;this._videoHeight=n,this._videoWidth=t})).catch(oE)}_updatePlayerSource(){VT.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,t;const n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},{element:i,slot:o}=r;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=i_.checkOneElementVisible(i),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=eb.reportApiInvoke(null,{tag:p_.TRACER,name:h_.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess("Video is visible"):e.onSuccess("Invisible because of ".concat(t.reason))}return t}return}catch(e){throw new Wv(Hv.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}pipe(e){if(this.processor===e)return e;if(e._source)throw new Wv(Hv.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(tw.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(tw.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}_onSei(e){this.emit(WC.SEI_RECEIVED,e)}}Mb([$T({argsMap:(e,t,n)=>[e.getTrackId(),"string"==typeof t?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}),Db("design:type",Function),Db("design:paramtypes",[Object,Object]),Db("design:returntype",void 0)],AR.prototype,"play",null),Mb([$T({argsMap:e=>[e.getTrackId()]}),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],AR.prototype,"stop",null),Mb([$T({argsMap:(e,t)=>[e.getTrackId(),t.name]}),Db("design:type",Function),Db("design:paramtypes",[Object]),Db("design:returntype",Object)],AR.prototype,"pipe",null),Mb([$T({argsMap:e=>[e.getTrackId()]}),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],AR.prototype,"unpipe",null);class OR extends RR{get isPlaying(){return this._useAudioElement?Bw.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(e,t,n,r){super(e,t,n,r),oh(this,"trackMediaType","audio"),oh(this,"_source",void 0),oh(this,"_useAudioElement",!0),oh(this,"_volume",100),oh(this,"processorContext",void 0),oh(this,"processorDestination",void 0),oh(this,"_played",!1),oh(this,"_bypassWebAudio",!1),ST("DISABLE_WEBAUDIO")?(this._source=new Jw,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new Tw(e,!0),ST("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(KC.RECEIVE_TRACK_BUFFER,(()=>{this.safeEmit(qC.FIRST_FRAME_DECODED)})),this.processorContext=new Qw(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new Kw(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(KC.UPDATE_SOURCE,(()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})}))}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(KC.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(KC.ON_AUDIO_BUFFER),this._source.on(KC.ON_AUDIO_BUFFER,(t=>e(t)))}setVolume(e){this._volume=e,this._useAudioElement?Bw.setVolume(this.getTrackId(),e):this._source.setVolume(e/100)}async setPlaybackDevice(e){if(!this._useAudioElement||!Cv()&&ST("RESTRICTION_SET_PLAYBACK_DEVICE"))throw new Wv(Hv.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Bw.setSinkID(this.getTrackId(),e)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Q_((()=>{VT.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")}),"remoteAudioTrackGetStatsWarning"),C_(this,zC.GET_STATS)||wR({},ZC)}play(){VT.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(VT.debug("[".concat(this.getTrackId(),"] use audio element to play")),Bw.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){VT.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?Bw.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];VT.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Bw.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(e){if(this._bypassWebAudio)throw new Wv(Hv.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===e)return e;if(e._source)throw new Wv(Hv.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(this._bypassWebAudio)throw new Wv(Hv.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(tw.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})),this.processorDestination.on(tw.ON_NODE,(e=>{this._source.processedNode=e;const t=!e;this._useAudioElement!==t&&(this._played?(this.stop(),this._useAudioElement=t,this.play()):this._useAudioElement=t)}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(tw.ON_TRACK),this.processorDestination.removeAllListeners(tw.ON_NODE)}}Mb([$T({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),Db("design:type",Function),Db("design:paramtypes",[Number]),Db("design:returntype",void 0)],OR.prototype,"setVolume",null),Mb([$T({argsMap:(e,t)=>[e.getTrackId(),t]}),Db("design:type",Function),Db("design:paramtypes",[String]),Db("design:returntype",cv)],OR.prototype,"setPlaybackDevice",null),Mb([$T({argsMap:e=>[e.getTrackId()]}),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],OR.prototype,"play",null),Mb([$T({argsMap:e=>[e.getTrackId()]}),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],OR.prototype,"stop",null),Mb([$T({argsMap:(e,t)=>[e.getTrackId(),t.name]}),Db("design:type",Function),Db("design:paramtypes",[Object]),Db("design:returntype",Object)],OR.prototype,"pipe",null),Mb([$T({argsMap:e=>[e.getTrackId()]}),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],OR.prototype,"unpipe",null);const MR=new class extends l_{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),oh(this,"_lastHiddenTime",0),oh(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),VT.debug("document visibility went ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)}))}};function DR(e){let t=e.length;for(;--t>=0;)e[t]=0}const kR=256,xR=286,LR=30,PR=15,jR=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),UR=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),FR=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),zR=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),VR=new Array(576);DR(VR);const BR=new Array(60);DR(BR);const GR=new Array(512);DR(GR);const HR=new Array(256);DR(HR);const WR=new Array(29);DR(WR);const YR=new Array(LR);function qR(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let KR,QR,JR;function XR(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}DR(YR);const ZR=e=>e<256?GR[e]:GR[256+(e>>>7)],$R=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},eA=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,$R(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},tA=(e,t,n)=>{eA(e,n[2*t],n[2*t+1])},nA=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},rA=(e,t,n)=>{const r=new Array(16);let i,o,s=0;for(i=1;i<=PR;i++)s=s+n[i-1]<<1,r[i]=s;for(o=0;o<=t;o++){let t=e[2*o+1];0!==t&&(e[2*o]=nA(r[t]++,t))}},iA=e=>{let t;for(t=0;t<xR;t++)e.dyn_ltree[2*t]=0;for(t=0;t<LR;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},oA=e=>{e.bi_valid>8?$R(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},sA=(e,t,n,r)=>{const i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]},aA=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&sA(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!sA(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},cA=(e,t,n)=>{let r,i,o,s,a=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+a++],r+=(255&e.pending_buf[e.sym_buf+a++])<<8,i=e.pending_buf[e.sym_buf+a++],0===r?tA(e,i,t):(o=HR[i],tA(e,o+kR+1,t),s=jR[o],0!==s&&(i-=WR[o],eA(e,i,s)),r--,o=ZR(r),tA(e,o,n),s=UR[o],0!==s&&(r-=YR[o],eA(e,r,s)))}while(a<e.sym_next);tA(e,256,t)},lA=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems;let s,a,c,l=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<o;s++)0!==n[2*s]?(e.heap[++e.heap_len]=l=s,e.depth[s]=0):n[2*s+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[2*c]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=r[2*c+1]);for(t.max_code=l,s=e.heap_len>>1;s>=1;s--)aA(e,n,s);c=o;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],aA(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,n[2*c]=n[2*s]+n[2*a],e.depth[c]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,n[2*s+1]=n[2*a+1]=c,e.heap[1]=c++,aA(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let l,d,u,h,p,f,m=0;for(h=0;h<=PR;h++)e.bl_count[h]=0;for(n[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)d=e.heap[l],h=n[2*n[2*d+1]+1]+1,h>c&&(h=c,m++),n[2*d+1]=h,d>r||(e.bl_count[h]++,p=0,d>=a&&(p=s[d-a]),f=n[2*d],e.opt_len+=f*(h+p),o&&(e.static_len+=f*(i[2*d+1]+p)));if(0!==m){do{for(h=c-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[c]--,m-=2}while(m>0);for(h=c;0!==h;h--)for(d=e.bl_count[h];0!==d;)u=e.heap[--l],u>r||(n[2*u+1]!==h&&(e.opt_len+=(h-n[2*u+1])*n[2*u],n[2*u+1]=h),d--)}})(e,t),rA(n,l,e.bl_count)},dA=(e,t,n)=>{let r,i,o=-1,s=t[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=s,s=t[2*(r+1)+1],++a<c&&i===s||(a<l?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,o=i,0===s?(c=138,l=3):i===s?(c=6,l=3):(c=7,l=4))},uA=(e,t,n)=>{let r,i,o=-1,s=t[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),r=0;r<=n;r++)if(i=s,s=t[2*(r+1)+1],!(++a<c&&i===s)){if(a<l)do{tA(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==o&&(tA(e,i,e.bl_tree),a--),tA(e,16,e.bl_tree),eA(e,a-3,2)):a<=10?(tA(e,17,e.bl_tree),eA(e,a-3,3)):(tA(e,18,e.bl_tree),eA(e,a-11,7));a=0,o=i,0===s?(c=138,l=3):i===s?(c=6,l=3):(c=7,l=4)}};let hA=!1;const pA=(e,t,n,r)=>{eA(e,0+(r?1:0),3),oA(e),$R(e,n),$R(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var fA=e=>{hA||((()=>{let e,t,n,r,i;const o=new Array(16);for(n=0,r=0;r<28;r++)for(WR[r]=n,e=0;e<1<<jR[r];e++)HR[n++]=r;for(HR[n-1]=r,i=0,r=0;r<16;r++)for(YR[r]=i,e=0;e<1<<UR[r];e++)GR[i++]=r;for(i>>=7;r<LR;r++)for(YR[r]=i<<7,e=0;e<1<<UR[r]-7;e++)GR[256+i++]=r;for(t=0;t<=PR;t++)o[t]=0;for(e=0;e<=143;)VR[2*e+1]=8,e++,o[8]++;for(;e<=255;)VR[2*e+1]=9,e++,o[9]++;for(;e<=279;)VR[2*e+1]=7,e++,o[7]++;for(;e<=287;)VR[2*e+1]=8,e++,o[8]++;for(rA(VR,287,o),e=0;e<LR;e++)BR[2*e+1]=5,BR[2*e]=nA(e,5);KR=new qR(VR,jR,257,xR,PR),QR=new qR(BR,UR,0,LR,PR),JR=new qR(new Array(0),FR,0,19,7)})(),hA=!0),e.l_desc=new XR(e.dyn_ltree,KR),e.d_desc=new XR(e.dyn_dtree,QR),e.bl_desc=new XR(e.bl_tree,JR),e.bi_buf=0,e.bi_valid=0,iA(e)},mA=(e,t,n,r)=>{let i,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<kR;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),lA(e,e.l_desc),lA(e,e.d_desc),s=(e=>{let t;for(dA(e,e.dyn_ltree,e.l_desc.max_code),dA(e,e.dyn_dtree,e.d_desc.max_code),lA(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*zR[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?pA(e,t,n,r):4===e.strategy||o===i?(eA(e,2+(r?1:0),3),cA(e,VR,BR)):(eA(e,4+(r?1:0),3),((e,t,n,r)=>{let i;for(eA(e,t-257,5),eA(e,n-1,5),eA(e,r-4,4),i=0;i<r;i++)eA(e,e.bl_tree[2*zR[i]+1],3);uA(e,e.dyn_ltree,t-1),uA(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),cA(e,e.dyn_ltree,e.dyn_dtree)),iA(e),r&&oA(e)},gA=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(HR[n]+kR+1)]++,e.dyn_dtree[2*ZR(t)]++),e.sym_next===e.sym_end),yA={_tr_init:fA,_tr_stored_block:pA,_tr_flush_block:mA,_tr_tally:gA,_tr_align:e=>{eA(e,2,3),tA(e,256,VR),(e=>{16===e.bi_valid?($R(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},vA=(e,t,n,r)=>{let i=65535&e,o=e>>>16&65535,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{i=i+t[r++]|0,o=o+i|0}while(--s);i%=65521,o%=65521}return i|o<<16};const _A=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var EA=(e,t,n,r)=>{const i=_A,o=r+n;e^=-1;for(let s=r;s<o;s++)e=e>>>8^i[255&(e^t[s])];return~e},SA={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},TA={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:bA,_tr_stored_block:IA,_tr_flush_block:NA,_tr_tally:CA,_tr_align:wA}=yA,{Z_NO_FLUSH:RA,Z_PARTIAL_FLUSH:AA,Z_FULL_FLUSH:OA,Z_FINISH:MA,Z_BLOCK:DA,Z_OK:kA,Z_STREAM_END:xA,Z_STREAM_ERROR:LA,Z_DATA_ERROR:PA,Z_BUF_ERROR:jA,Z_DEFAULT_COMPRESSION:UA,Z_FILTERED:FA,Z_HUFFMAN_ONLY:zA,Z_RLE:VA,Z_FIXED:BA,Z_DEFAULT_STRATEGY:GA,Z_UNKNOWN:HA,Z_DEFLATED:WA}=TA,YA=286,qA=30,KA=19,QA=2*YA+1,JA=15,XA=258,ZA=262,$A=42,eO=113,tO=666,nO=(e,t)=>(e.msg=SA[t],t),rO=e=>2*e-(e>4?9:0),iO=e=>{let t=e.length;for(;--t>=0;)e[t]=0},oO=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=i?n-i:0}while(--t);t=i,r=t;do{n=e.prev[--r],e.prev[r]=n>=i?n-i:0}while(--t)};let sO=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const aO=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},cO=(e,t)=>{NA(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,aO(e.strm)},lO=(e,t)=>{e.pending_buf[e.pending++]=t},dO=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},uO=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=vA(e.adler,t,i,n):2===e.state.wrap&&(e.adler=EA(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},hO=(e,t)=>{let n,r,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-ZA?e.strstart-(e.w_size-ZA):0,l=e.window,d=e.w_mask,u=e.prev,h=e.strstart+XA;let p=l[o+s-1],f=l[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(n=t,l[n+s]===f&&l[n+s-1]===p&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<h);if(r=XA-(h-o),o=h-XA,r>s){if(e.match_start=t,s=r,r>=a)break;p=l[o+s-1],f=l[o+s]}}}while((t=u[t&d])>c&&0!=--i);return s<=e.lookahead?s:e.lookahead},pO=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ZA)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),oO(e),r+=t),0===e.strm.avail_in)break;if(n=uO(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=sO(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=sO(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<ZA&&0!==e.strm.avail_in)},fO=(e,t)=>{let n,r,i,o=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,a=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<o&&(0===n&&t!==MA||t===RA||n!==r+e.strm.avail_in))break;s=t===MA&&n===r+e.strm.avail_in?1:0,IA(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,aO(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(uO(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===s);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:t!==RA&&t!==MA&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(uO(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,o=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=o||(r||t===MA)&&t!==RA&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,s=t===MA&&0===e.strm.avail_in&&n===r?1:0,IA(e,e.block_start,n,s),e.block_start+=n,aO(e.strm)),s?3:1)},mO=(e,t)=>{let n,r;for(;;){if(e.lookahead<ZA){if(pO(e),e.lookahead<ZA&&t===RA)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=sO(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ZA&&(e.match_length=hO(e,n)),e.match_length>=3)if(r=CA(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=sO(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=sO(e,e.ins_h,e.window[e.strstart+1]);else r=CA(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(cO(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===MA?(cO(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(cO(e,!1),0===e.strm.avail_out)?1:2},gO=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<ZA){if(pO(e),e.lookahead<ZA&&t===RA)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=sO(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ZA&&(e.match_length=hO(e,n),e.match_length<=5&&(e.strategy===FA||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=CA(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=sO(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(cO(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=CA(e,0,e.window[e.strstart-1]),r&&cO(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=CA(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===MA?(cO(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(cO(e,!1),0===e.strm.avail_out)?1:2};function yO(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const vO=[new yO(0,0,0,0,fO),new yO(4,4,8,4,mO),new yO(4,5,16,8,mO),new yO(4,6,32,32,mO),new yO(4,4,16,16,gO),new yO(8,16,32,32,gO),new yO(8,16,128,128,gO),new yO(8,32,128,256,gO),new yO(32,128,258,1024,gO),new yO(32,258,258,4096,gO)];function _O(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=WA,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*QA),this.dyn_dtree=new Uint16Array(2*(2*qA+1)),this.bl_tree=new Uint16Array(2*(2*KA+1)),iO(this.dyn_ltree),iO(this.dyn_dtree),iO(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(JA+1),this.heap=new Uint16Array(2*YA+1),iO(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*YA+1),iO(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const EO=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==$A&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==eO&&t.status!==tO?1:0},SO=e=>{if(EO(e))return nO(e,LA);e.total_in=e.total_out=0,e.data_type=HA;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?$A:eO,e.adler=2===t.wrap?0:1,t.last_flush=-2,bA(t),kA},TO=e=>{const t=SO(e);var n;return t===kA&&((n=e.state).window_size=2*n.w_size,iO(n.head),n.max_lazy_match=vO[n.level].max_lazy,n.good_match=vO[n.level].good_length,n.nice_match=vO[n.level].nice_length,n.max_chain_length=vO[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},bO=(e,t,n,r,i,o)=>{if(!e)return LA;let s=1;if(t===UA&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>9||n!==WA||r<8||r>15||t<0||t>9||o<0||o>BA||8===r&&1!==s)return nO(e,LA);8===r&&(r=9);const a=new _O;return e.state=a,a.strm=e,a.status=$A,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=o,a.method=n,TO(e)};var IO=(e,t)=>{if(EO(e)||t>DA||t<0)return e?nO(e,LA):LA;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===tO&&t!==MA)return nO(e,0===e.avail_out?jA:LA);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(aO(e),0===e.avail_out)return n.last_flush=-1,kA}else if(0===e.avail_in&&rO(t)<=rO(r)&&t!==MA)return nO(e,jA);if(n.status===tO&&0!==e.avail_in)return nO(e,jA);if(n.status===$A&&0===n.wrap&&(n.status=eO),n.status===$A){let t=WA+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=zA||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,dO(n,t),0!==n.strstart&&(dO(n,e.adler>>>16),dO(n,65535&e.adler)),e.adler=1,n.status=eO,aO(e),0!==n.pending)return n.last_flush=-1,kA}if(57===n.status)if(e.adler=0,lO(n,31),lO(n,139),lO(n,8),n.gzhead)lO(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),lO(n,255&n.gzhead.time),lO(n,n.gzhead.time>>8&255),lO(n,n.gzhead.time>>16&255),lO(n,n.gzhead.time>>24&255),lO(n,9===n.level?2:n.strategy>=zA||n.level<2?4:0),lO(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(lO(n,255&n.gzhead.extra.length),lO(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=EA(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(lO(n,0),lO(n,0),lO(n,0),lO(n,0),lO(n,0),lO(n,9===n.level?2:n.strategy>=zA||n.level<2?4:0),lO(n,3),n.status=eO,aO(e),0!==n.pending)return n.last_flush=-1,kA;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=EA(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,aO(e),0!==n.pending)return n.last_flush=-1,kA;t=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=EA(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=EA(e.adler,n.pending_buf,n.pending-r,r)),aO(e),0!==n.pending)return n.last_flush=-1,kA;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,lO(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=EA(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=EA(e.adler,n.pending_buf,n.pending-r,r)),aO(e),0!==n.pending)return n.last_flush=-1,kA;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,lO(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=EA(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(aO(e),0!==n.pending))return n.last_flush=-1,kA;lO(n,255&e.adler),lO(n,e.adler>>8&255),e.adler=0}if(n.status=eO,aO(e),0!==n.pending)return n.last_flush=-1,kA}if(0!==e.avail_in||0!==n.lookahead||t!==RA&&n.status!==tO){let r=0===n.level?fO(n,t):n.strategy===zA?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(pO(e),0===e.lookahead)){if(t===RA)return 1;break}if(e.match_length=0,n=CA(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(cO(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===MA?(cO(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(cO(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===VA?((e,t)=>{let n,r,i,o;const s=e.window;for(;;){if(e.lookahead<=XA){if(pO(e),e.lookahead<=XA&&t===RA)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=e.strstart+XA;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=XA-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=CA(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=CA(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(cO(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===MA?(cO(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(cO(e,!1),0===e.strm.avail_out)?1:2})(n,t):vO[n.level].func(n,t);if(3!==r&&4!==r||(n.status=tO),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),kA;if(2===r&&(t===AA?wA(n):t!==DA&&(IA(n,0,0,!1),t===OA&&(iO(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),aO(e),0===e.avail_out))return n.last_flush=-1,kA}return t!==MA?kA:n.wrap<=0?xA:(2===n.wrap?(lO(n,255&e.adler),lO(n,e.adler>>8&255),lO(n,e.adler>>16&255),lO(n,e.adler>>24&255),lO(n,255&e.total_in),lO(n,e.total_in>>8&255),lO(n,e.total_in>>16&255),lO(n,e.total_in>>24&255)):(dO(n,e.adler>>>16),dO(n,65535&e.adler)),aO(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?kA:xA)},NO=(e,t)=>{let n=t.length;if(EO(e))return LA;const r=e.state,i=r.wrap;if(2===i||1===i&&r.status!==$A||r.lookahead)return LA;if(1===i&&(e.adler=vA(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(iO(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const o=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,pO(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=sO(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,pO(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=s,e.input=a,e.avail_in=o,r.wrap=i,kA},CO={deflateInit:(e,t)=>bO(e,t,WA,15,8,GA),deflateInit2:bO,deflateReset:TO,deflateResetKeep:SO,deflateSetHeader:(e,t)=>EO(e)||2!==e.state.wrap?LA:(e.state.gzhead=t,kA),deflate:IO,deflateEnd:e=>{if(EO(e))return LA;const t=e.state.status;return e.state=null,t===eO?nO(e,PA):kA},deflateSetDictionary:NO,deflateInfo:"pako deflate (from Nodeca project)"};const wO=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var RO={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)wO(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,o=e.length;r<o;r++){let t=e[r];n.set(t,i),i+=t.length}return n}};let AO=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){AO=!1}const OO=new Uint8Array(256);for(let n=0;n<256;n++)OO[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;OO[254]=OO[254]=1;var MO={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,o,s=e.length,a=0;for(i=0;i<s;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<s&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),o=0,i=0;o<a;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<s&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},buf2string:(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,i;const o=new Array(2*n);for(i=0,r=0;r<n;){let t=e[r++];if(t<128){o[i++]=t;continue}let s=OO[t];if(s>4)o[i++]=65533,r+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&r<n;)t=t<<6|63&e[r++],s--;s>1?o[i++]=65533:t<65536?o[i++]=t:(t-=65536,o[i++]=55296|t>>10&1023,o[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&AO)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(o,i)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+OO[e[n]]>t?n:t}},DO=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const kO=Object.prototype.toString,{Z_NO_FLUSH:xO,Z_SYNC_FLUSH:LO,Z_FULL_FLUSH:PO,Z_FINISH:jO,Z_OK:UO,Z_STREAM_END:FO,Z_DEFAULT_COMPRESSION:zO,Z_DEFAULT_STRATEGY:VO,Z_DEFLATED:BO}=TA;function GO(e){this.options=RO.assign({level:zO,method:BO,chunkSize:16384,windowBits:15,memLevel:8,strategy:VO},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new DO,this.strm.avail_out=0;let n=CO.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==UO)throw new Error(SA[n]);if(t.header&&CO.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?MO.string2buf(t.dictionary):"[object ArrayBuffer]"===kO.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=CO.deflateSetDictionary(this.strm,e),n!==UO)throw new Error(SA[n]);this._dict_set=!0}}function HO(e,t){const n=new GO(t);if(n.push(e,!0),n.err)throw n.msg||SA[n.err];return n.result}GO.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,o;if(this.ended)return!1;for(o=t===~~t?t:!0===t?jO:xO,"string"==typeof e?n.input=MO.string2buf(e):"[object ArrayBuffer]"===kO.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(o===LO||o===PO)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=CO.deflate(n,o),i===FO)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=CO.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===UO;if(0!==n.avail_out){if(o>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},GO.prototype.onData=function(e){this.chunks.push(e)},GO.prototype.onEnd=function(e){e===UO&&(this.result=RO.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var WO={Deflate:GO,deflate:HO,deflateRaw:function(e,t){return(t=t||{}).raw=!0,HO(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,HO(e,t)},constants:TA};const YO=16209;var qO=function(e,t){let n,r,i,o,s,a,c,l,d,u,h,p,f,m,g,y,v,_,E,S,T,b,I,N;const C=e.state;n=e.next_in,I=e.input,r=n+(e.avail_in-5),i=e.next_out,N=e.output,o=i-(t-e.avail_out),s=i+(e.avail_out-257),a=C.dmax,c=C.wsize,l=C.whave,d=C.wnext,u=C.window,h=C.hold,p=C.bits,f=C.lencode,m=C.distcode,g=(1<<C.lenbits)-1,y=(1<<C.distbits)-1;e:do{p<15&&(h+=I[n++]<<p,p+=8,h+=I[n++]<<p,p+=8),v=f[h&g];t:for(;;){if(_=v>>>24,h>>>=_,p-=_,_=v>>>16&255,0===_)N[i++]=65535&v;else{if(!(16&_)){if(0==(64&_)){v=f[(65535&v)+(h&(1<<_)-1)];continue t}if(32&_){C.mode=16191;break e}e.msg="invalid literal/length code",C.mode=YO;break e}E=65535&v,_&=15,_&&(p<_&&(h+=I[n++]<<p,p+=8),E+=h&(1<<_)-1,h>>>=_,p-=_),p<15&&(h+=I[n++]<<p,p+=8,h+=I[n++]<<p,p+=8),v=m[h&y];n:for(;;){if(_=v>>>24,h>>>=_,p-=_,_=v>>>16&255,!(16&_)){if(0==(64&_)){v=m[(65535&v)+(h&(1<<_)-1)];continue n}e.msg="invalid distance code",C.mode=YO;break e}if(S=65535&v,_&=15,p<_&&(h+=I[n++]<<p,p+=8,p<_&&(h+=I[n++]<<p,p+=8)),S+=h&(1<<_)-1,S>a){e.msg="invalid distance too far back",C.mode=YO;break e}if(h>>>=_,p-=_,_=i-o,S>_){if(_=S-_,_>l&&C.sane){e.msg="invalid distance too far back",C.mode=YO;break e}if(T=0,b=u,0===d){if(T+=c-_,_<E){E-=_;do{N[i++]=u[T++]}while(--_);T=i-S,b=N}}else if(d<_){if(T+=c+d-_,_-=d,_<E){E-=_;do{N[i++]=u[T++]}while(--_);if(T=0,d<E){_=d,E-=_;do{N[i++]=u[T++]}while(--_);T=i-S,b=N}}}else if(T+=d-_,_<E){E-=_;do{N[i++]=u[T++]}while(--_);T=i-S,b=N}for(;E>2;)N[i++]=b[T++],N[i++]=b[T++],N[i++]=b[T++],E-=3;E&&(N[i++]=b[T++],E>1&&(N[i++]=b[T++]))}else{T=i-S;do{N[i++]=N[T++],N[i++]=N[T++],N[i++]=N[T++],E-=3}while(E>2);E&&(N[i++]=N[T++],E>1&&(N[i++]=N[T++]))}break}}break}}while(n<r&&i<s);E=p>>3,n-=E,p-=E<<3,h&=(1<<p)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<s?s-i+257:257-(i-s),C.hold=h,C.bits=p};const KO=15,QO=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),JO=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),XO=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ZO=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var $O=(e,t,n,r,i,o,s,a)=>{const c=a.bits;let l,d,u,h,p,f,m=0,g=0,y=0,v=0,_=0,E=0,S=0,T=0,b=0,I=0,N=null;const C=new Uint16Array(16),w=new Uint16Array(16);let R,A,O,M=null;for(m=0;m<=KO;m++)C[m]=0;for(g=0;g<r;g++)C[t[n+g]]++;for(_=c,v=KO;v>=1&&0===C[v];v--);if(_>v&&(_=v),0===v)return i[o++]=20971520,i[o++]=20971520,a.bits=1,0;for(y=1;y<v&&0===C[y];y++);for(_<y&&(_=y),T=1,m=1;m<=KO;m++)if(T<<=1,T-=C[m],T<0)return-1;if(T>0&&(0===e||1!==v))return-1;for(w[1]=0,m=1;m<KO;m++)w[m+1]=w[m]+C[m];for(g=0;g<r;g++)0!==t[n+g]&&(s[w[t[n+g]]++]=g);if(0===e?(N=M=s,f=20):1===e?(N=QO,M=JO,f=257):(N=XO,M=ZO,f=0),I=0,g=0,m=y,p=o,E=_,S=0,u=-1,b=1<<_,h=b-1,1===e&&b>852||2===e&&b>592)return 1;for(;;){R=m-S,s[g]+1<f?(A=0,O=s[g]):s[g]>=f?(A=M[s[g]-f],O=N[s[g]-f]):(A=96,O=0),l=1<<m-S,d=1<<E,y=d;do{d-=l,i[p+(I>>S)+d]=R<<24|A<<16|O}while(0!==d);for(l=1<<m-1;I&l;)l>>=1;if(0!==l?(I&=l-1,I+=l):I=0,g++,0==--C[m]){if(m===v)break;m=t[n+s[g]]}if(m>_&&(I&h)!==u){for(0===S&&(S=_),p+=y,E=m-S,T=1<<E;E+S<v&&(T-=C[E+S],!(T<=0));)E++,T<<=1;if(b+=1<<E,1===e&&b>852||2===e&&b>592)return 1;u=I&h,i[u]=_<<24|E<<16|p-o}}return 0!==I&&(i[p+I]=m-S<<24|64<<16),a.bits=_,0};const{Z_FINISH:eM,Z_BLOCK:tM,Z_TREES:nM,Z_OK:rM,Z_STREAM_END:iM,Z_NEED_DICT:oM,Z_STREAM_ERROR:sM,Z_DATA_ERROR:aM,Z_MEM_ERROR:cM,Z_BUF_ERROR:lM,Z_DEFLATED:dM}=TA,uM=16180,hM=16190,pM=16191,fM=16192,mM=16194,gM=16199,yM=16200,vM=16206,_M=16209,EM=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function SM(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const TM=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<uM||t.mode>16211?1:0},bM=e=>{if(TM(e))return sM;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=uM,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,rM},IM=e=>{if(TM(e))return sM;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,bM(e)},NM=(e,t)=>{let n;if(TM(e))return sM;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?sM:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,IM(e))},CM=(e,t)=>{if(!e)return sM;const n=new SM;e.state=n,n.strm=e,n.window=null,n.mode=uM;const r=NM(e,t);return r!==rM&&(e.state=null),r};let wM,RM,AM=!0;const OM=e=>{if(AM){wM=new Int32Array(512),RM=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for($O(1,e.lens,0,288,wM,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;$O(2,e.lens,0,32,RM,0,e.work,{bits:5}),AM=!1}e.lencode=wM,e.lenbits=9,e.distcode=RM,e.distbits=5},MM=(e,t,n,r)=>{let i;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(t.subarray(n-r,n-r+i),o.wnext),(r-=i)?(o.window.set(t.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0};var DM=(e,t)=>{let n,r,i,o,s,a,c,l,d,u,h,p,f,m,g,y,v,_,E,S,T,b,I=0;const N=new Uint8Array(4);let C,w;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(TM(e)||!e.output||!e.input&&0!==e.avail_in)return sM;n=e.state,n.mode===pM&&(n.mode=fM),s=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,l=n.hold,d=n.bits,u=a,h=c,b=rM;e:for(;;)switch(n.mode){case uM:if(0===n.wrap){n.mode=fM;break}for(;d<16;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}if(2&n.wrap&&35615===l){0===n.wbits&&(n.wbits=15),n.check=0,N[0]=255&l,N[1]=l>>>8&255,n.check=EA(n.check,N,2,0),l=0,d=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=_M;break}if((15&l)!==dM){e.msg="unknown compression method",n.mode=_M;break}if(l>>>=4,d-=4,T=8+(15&l),0===n.wbits&&(n.wbits=T),T>15||T>n.wbits){e.msg="invalid window size",n.mode=_M;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&l?16189:pM,l=0,d=0;break;case 16181:for(;d<16;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}if(n.flags=l,(255&n.flags)!==dM){e.msg="unknown compression method",n.mode=_M;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=_M;break}n.head&&(n.head.text=l>>8&1),512&n.flags&&4&n.wrap&&(N[0]=255&l,N[1]=l>>>8&255,n.check=EA(n.check,N,2,0)),l=0,d=0,n.mode=16182;case 16182:for(;d<32;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}n.head&&(n.head.time=l),512&n.flags&&4&n.wrap&&(N[0]=255&l,N[1]=l>>>8&255,N[2]=l>>>16&255,N[3]=l>>>24&255,n.check=EA(n.check,N,4,0)),l=0,d=0,n.mode=16183;case 16183:for(;d<16;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&4&n.wrap&&(N[0]=255&l,N[1]=l>>>8&255,n.check=EA(n.check,N,2,0)),l=0,d=0,n.mode=16184;case 16184:if(1024&n.flags){for(;d<16;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&4&n.wrap&&(N[0]=255&l,N[1]=l>>>8&255,n.check=EA(n.check,N,2,0)),l=0,d=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(p=n.length,p>a&&(p=a),p&&(n.head&&(T=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(o,o+p),T)),512&n.flags&&4&n.wrap&&(n.check=EA(n.check,r,p,o)),a-=p,o+=p,n.length-=p),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===a)break e;p=0;do{T=r[o+p++],n.head&&T&&n.length<65536&&(n.head.name+=String.fromCharCode(T))}while(T&&p<a);if(512&n.flags&&4&n.wrap&&(n.check=EA(n.check,r,p,o)),a-=p,o+=p,T)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===a)break e;p=0;do{T=r[o+p++],n.head&&T&&n.length<65536&&(n.head.comment+=String.fromCharCode(T))}while(T&&p<a);if(512&n.flags&&4&n.wrap&&(n.check=EA(n.check,r,p,o)),a-=p,o+=p,T)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;d<16;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}if(4&n.wrap&&l!==(65535&n.check)){e.msg="header crc mismatch",n.mode=_M;break}l=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=pM;break;case 16189:for(;d<32;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}e.adler=n.check=EM(l),l=0,d=0,n.mode=hM;case hM:if(0===n.havedict)return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,n.hold=l,n.bits=d,oM;e.adler=n.check=1,n.mode=pM;case pM:if(t===tM||t===nM)break e;case fM:if(n.last){l>>>=7&d,d-=7&d,n.mode=vM;break}for(;d<3;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}switch(n.last=1&l,l>>>=1,d-=1,3&l){case 0:n.mode=16193;break;case 1:if(OM(n),n.mode=gM,t===nM){l>>>=2,d-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=_M}l>>>=2,d-=2;break;case 16193:for(l>>>=7&d,d-=7&d;d<32;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=_M;break}if(n.length=65535&l,l=0,d=0,n.mode=mM,t===nM)break e;case mM:n.mode=16195;case 16195:if(p=n.length,p){if(p>a&&(p=a),p>c&&(p=c),0===p)break e;i.set(r.subarray(o,o+p),s),a-=p,o+=p,c-=p,s+=p,n.length-=p;break}n.mode=pM;break;case 16196:for(;d<14;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}if(n.nlen=257+(31&l),l>>>=5,d-=5,n.ndist=1+(31&l),l>>>=5,d-=5,n.ncode=4+(15&l),l>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=_M;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;d<3;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}n.lens[R[n.have++]]=7&l,l>>>=3,d-=3}for(;n.have<19;)n.lens[R[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},b=$O(0,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits,b){e.msg="invalid code lengths set",n.mode=_M;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;I=n.lencode[l&(1<<n.lenbits)-1],g=I>>>24,y=I>>>16&255,v=65535&I,!(g<=d);){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}if(v<16)l>>>=g,d-=g,n.lens[n.have++]=v;else{if(16===v){for(w=g+2;d<w;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}if(l>>>=g,d-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=_M;break}T=n.lens[n.have-1],p=3+(3&l),l>>>=2,d-=2}else if(17===v){for(w=g+3;d<w;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}l>>>=g,d-=g,T=0,p=3+(7&l),l>>>=3,d-=3}else{for(w=g+7;d<w;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}l>>>=g,d-=g,T=0,p=11+(127&l),l>>>=7,d-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=_M;break}for(;p--;)n.lens[n.have++]=T}}if(n.mode===_M)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=_M;break}if(n.lenbits=9,C={bits:n.lenbits},b=$O(1,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits,b){e.msg="invalid literal/lengths set",n.mode=_M;break}if(n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},b=$O(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits,b){e.msg="invalid distances set",n.mode=_M;break}if(n.mode=gM,t===nM)break e;case gM:n.mode=yM;case yM:if(a>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,n.hold=l,n.bits=d,qO(e,h),s=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,l=n.hold,d=n.bits,n.mode===pM&&(n.back=-1);break}for(n.back=0;I=n.lencode[l&(1<<n.lenbits)-1],g=I>>>24,y=I>>>16&255,v=65535&I,!(g<=d);){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}if(y&&0==(240&y)){for(_=g,E=y,S=v;I=n.lencode[S+((l&(1<<_+E)-1)>>_)],g=I>>>24,y=I>>>16&255,v=65535&I,!(_+g<=d);){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}l>>>=_,d-=_,n.back+=_}if(l>>>=g,d-=g,n.back+=g,n.length=v,0===y){n.mode=16205;break}if(32&y){n.back=-1,n.mode=pM;break}if(64&y){e.msg="invalid literal/length code",n.mode=_M;break}n.extra=15&y,n.mode=16201;case 16201:if(n.extra){for(w=n.extra;d<w;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;I=n.distcode[l&(1<<n.distbits)-1],g=I>>>24,y=I>>>16&255,v=65535&I,!(g<=d);){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}if(0==(240&y)){for(_=g,E=y,S=v;I=n.distcode[S+((l&(1<<_+E)-1)>>_)],g=I>>>24,y=I>>>16&255,v=65535&I,!(_+g<=d);){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}l>>>=_,d-=_,n.back+=_}if(l>>>=g,d-=g,n.back+=g,64&y){e.msg="invalid distance code",n.mode=_M;break}n.offset=v,n.extra=15&y,n.mode=16203;case 16203:if(n.extra){for(w=n.extra;d<w;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=_M;break}n.mode=16204;case 16204:if(0===c)break e;if(p=h-c,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=_M;break}p>n.wnext?(p-=n.wnext,f=n.wsize-p):f=n.wnext-p,p>n.length&&(p=n.length),m=n.window}else m=i,f=s-n.offset,p=n.length;p>c&&(p=c),c-=p,n.length-=p;do{i[s++]=m[f++]}while(--p);0===n.length&&(n.mode=yM);break;case 16205:if(0===c)break e;i[s++]=n.length,c--,n.mode=yM;break;case vM:if(n.wrap){for(;d<32;){if(0===a)break e;a--,l|=r[o++]<<d,d+=8}if(h-=c,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?EA(n.check,i,h,s-h):vA(n.check,i,h,s-h)),h=c,4&n.wrap&&(n.flags?l:EM(l))!==n.check){e.msg="incorrect data check",n.mode=_M;break}l=0,d=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;d<32;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}if(4&n.wrap&&l!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=_M;break}l=0,d=0}n.mode=16208;case 16208:b=iM;break e;case _M:b=aM;break e;case 16210:return cM;default:return sM}return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,n.hold=l,n.bits=d,(n.wsize||h!==e.avail_out&&n.mode<_M&&(n.mode<vM||t!==eM))&&MM(e,e.output,e.next_out,h-e.avail_out),u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?EA(n.check,i,h,e.next_out-h):vA(n.check,i,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===pM?128:0)+(n.mode===gM||n.mode===mM?256:0),(0===u&&0===h||t===eM)&&b===rM&&(b=lM),b},kM={inflateReset:IM,inflateReset2:NM,inflateResetKeep:bM,inflateInit:e=>CM(e,15),inflateInit2:CM,inflate:DM,inflateEnd:e=>{if(TM(e))return sM;let t=e.state;return t.window&&(t.window=null),e.state=null,rM},inflateGetHeader:(e,t)=>{if(TM(e))return sM;const n=e.state;return 0==(2&n.wrap)?sM:(n.head=t,t.done=!1,rM)},inflateSetDictionary:(e,t)=>{const n=t.length;let r,i,o;return TM(e)?sM:(r=e.state,0!==r.wrap&&r.mode!==hM?sM:r.mode===hM&&(i=1,i=vA(i,t,n,0),i!==r.check)?aM:(o=MM(e,t,n,n),o?(r.mode=16210,cM):(r.havedict=1,rM)))},inflateInfo:"pako inflate (from Nodeca project)"},xM=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const LM=Object.prototype.toString,{Z_NO_FLUSH:PM,Z_FINISH:jM,Z_OK:UM,Z_STREAM_END:FM,Z_NEED_DICT:zM,Z_STREAM_ERROR:VM,Z_DATA_ERROR:BM,Z_MEM_ERROR:GM}=TA;function HM(e){this.options=RO.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new DO,this.strm.avail_out=0;let n=kM.inflateInit2(this.strm,t.windowBits);if(n!==UM)throw new Error(SA[n]);if(this.header=new xM,kM.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=MO.string2buf(t.dictionary):"[object ArrayBuffer]"===LM.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=kM.inflateSetDictionary(this.strm,t.dictionary),n!==UM)))throw new Error(SA[n])}function WM(e,t){const n=new HM(t);if(n.push(e),n.err)throw n.msg||SA[n.err];return n.result}HM.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let o,s,a;if(this.ended)return!1;for(s=t===~~t?t:!0===t?jM:PM,"[object ArrayBuffer]"===LM.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),o=kM.inflate(n,s),o===zM&&i&&(o=kM.inflateSetDictionary(n,i),o===UM?o=kM.inflate(n,s):o===BM&&(o=zM));n.avail_in>0&&o===FM&&n.state.wrap>0&&0!==e[n.next_in];)kM.inflateReset(n),o=kM.inflate(n,s);switch(o){case VM:case BM:case zM:case GM:return this.onEnd(o),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||o===FM))if("string"===this.options.to){let e=MO.utf8border(n.output,n.next_out),t=n.next_out-e,i=MO.buf2string(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(o!==UM||0!==a){if(o===FM)return o=kM.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},HM.prototype.onData=function(e){this.chunks.push(e)},HM.prototype.onEnd=function(e){e===UM&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=RO.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var YM={Inflate:HM,inflate:WM,inflateRaw:function(e,t){return(t=t||{}).raw=!0,WM(e,t)},ungzip:WM,constants:TA};const{Deflate:qM,deflate:KM,deflateRaw:QM,gzip:JM}=WO,{Inflate:XM,inflate:ZM,inflateRaw:$M,ungzip:eD}=YM;var tD,nD=KM,rD=ZM;!function(e){e[e.ONE_BYTE=0]="ONE_BYTE",e[e.TWO_BYTE=1]="TWO_BYTE"}(tD||(tD={}));class iD{constructor(){oh(this,"_sequence",0),oh(this,"_startTime",Date.now()),oh(this,"isUseOneByte",!0)}get startTime(){const e=Date.now()-this._startTime;return e<Math.pow(2,16)?e:(this._startTime+=Math.pow(2,16),this.startTime)}get sequence(){return this._sequence<Math.pow(2,32)?this._sequence++:(this._sequence-=Math.pow(2,32),this.sequence)}serialize(e){const t={commonPacketHeader:{length:0,reserved:0,extension:0,sequence:this.sequence},commonStreamHeader:this.startTime,extension:void 0,payload:e};if(e.byteLength>128){const n=new Uint8Array(4);n.set([1,0,0,0]);const r={id:0,length:4,data:n.buffer},i={profile:this.isUseOneByte?0:1,length:this.isUseOneByte?5:6,datas:[r]};t.commonPacketHeader.extension=1,t.extension=i,t.payload=this.compress(e),t.commonPacketHeader.length=8+(t.extension.length+2)+t.payload.byteLength}else t.commonPacketHeader.length=8+t.payload.byteLength;ST("SHOW_DATASTREAM2_LOG")&&VT.debug("send data header: ".concat(JSON.stringify(t.commonPacketHeader)));const n=new ArrayBuffer(t.commonPacketHeader.length),r=new Uint8Array(n),i=new DataView(n);let o=0;if(i.setUint16(o,t.commonPacketHeader.extension<<15|t.commonPacketHeader.reserved<<14|t.commonPacketHeader.length,!0),o+=2,i.setUint32(o,t.commonPacketHeader.sequence,!0),o+=4,i.setUint16(o,t.commonStreamHeader,!0),o+=2,t.extension){const e=this.serializeExtension(t.extension);r.set(new Uint8Array(e),o),o+=e.byteLength}if(r.set(new Uint8Array(t.payload),o),o+=t.payload.byteLength,o!==t.commonPacketHeader.length)throw Error("serialize error!");return n}deserialize(e){if(e.byteLength<4)return new ArrayBuffer(0);const t=new DataView(e);let n=0;const r=t.getUint16(n,!0);n+=2;const i={length:16383&r,reserved:(16384&r)>>14,extension:(32768&r)>>15,sequence:t.getUint16(n+2,!0)<<16|t.getUint16(n,!0)};let o,s;if(n+=4,ST("SHOW_DATASTREAM2_LOG")&&VT.debug("receive data header: ".concat(JSON.stringify(i))),t.getUint16(n,!0),n+=2,i.extension){s=this.deserializeExtension(e.slice(n)),n+=2+s.length,o=e.slice(n);let t=!1;if(s.datas.length>0){const e=s.datas.find((e=>0===e.id));e&&(t=1==(1&new DataView(e.data).getUint32(0,!0)))}o=t?this.decompress(o):o}else o=e.slice(8);return o}serializeExtension(e){const{profile:t,length:n,datas:r}=e,i=new ArrayBuffer(n+2),o=new Uint8Array(i),s=new DataView(i);let a=0;if(s.setUint8(a++,t),s.setUint8(a++,n),r.forEach((e=>{t?(s.setUint8(a++,e.id),s.setUint8(a++,e.length),o.set(new Uint8Array(e.data),a),a+=e.data.byteLength):(s.setUint8(a++,e.id|e.length<<4),o.set(new Uint8Array(e.data),a),a+=e.data.byteLength)})),a!==n+2)throw Error("serialize extension error, is ".concat(a,"!==").concat(n+2));return i}deserializeExtension(e){const t=new DataView(e);let n=0;const r=t.getUint8(n);n++;const i=t.getUint8(n);n++;const o=r===tD.TWO_BYTE,s=[],a=new DataView(e,2);let c=0;for(;c<i;){let e=0,t=0,n=new ArrayBuffer(0);o?(e=a.getUint8(c),c++,t=a.getUint8(c),c++):(e=15&a.getUint8(c),t=a.getUint8(c)>>4,c++),t>0&&(n=a.buffer.slice(c+2,c+2+t),c+=n.byteLength),s.push({id:e,length:t,data:n})}if(c!==i)throw Error("parse error");return{profile:r,length:i,datas:s}}decompress(e){return rD(new Uint8Array(e))}compress(e){return nD(new Uint8Array(e))}}class oD extends l_{constructor(e,t){super(),oh(this,"_version",1),oh(this,"_type",3),oh(this,"_config",void 0),oh(this,"_originDataChannel",void 0),oh(this,"_dataStreamPacketHeader",new ArrayBuffer(4)),oh(this,"_dataStreamPacketHandler",void 0),oh(this,"_datachannelEventMap",new Map),this._config=e,t&&(this._originDataChannel=t,this._bandDataChannelEvents(t)),this._initPacketHeader(),this._dataStreamPacketHandler=new iD}get id(){return this._config.id}get ordered(){return this._config.ordered}get maxRetransmits(){return ST("DATASTREAM_MAX_RETRANSMITS")}get metadata(){return this._config.metadata}get readyState(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.readyState)&&void 0!==e?e:"connecting"}get _originDataChannelId(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.id)&&void 0!==e?e:null}getChannelId(){return this.id}getConfig(){return this._config}_close(){this._originDataChannel&&(this._unbindDataChannelEvents(this._originDataChannel),this._originDataChannel=void 0)}async _waitTillOpen(){return new cv(((e,t)=>{if(this._originDataChannel){"open"===this._originDataChannel.readyState&&e();const n=setTimeout((()=>{var e;t(new Wv(Hv.DATACHANNEL_CONNECTION_TIMEOUT,"Cannot create datachannel, id: ".concat(null===(e=this._originDataChannel)||void 0===e?void 0:e.id)))}),1e4);this._originDataChannel.onopen=()=>{clearTimeout(n),this._originDataChannel&&this._bandDataChannelEvents(this._originDataChannel),e()},this._originDataChannel.onerror=()=>{throw clearTimeout(n),new Wv(Hv.DATACHANNEL_CONNECTION_TIMEOUT)}}else t(new Wv(Hv.DATACHANNEL_CONNECTION_TIMEOUT,"cannot find dataChannel"))}))}_updateOriginDataChannel(e){this._originDataChannel=e,this._bandDataChannelEvents(e)}_initPacketHeader(){const e=new DataView(this._dataStreamPacketHeader);e.setUint16(0,this._version),e.setUint8(2,this._type),e.setUint8(3,this._config.id)}_bandDataChannelEvents(e){this._unbindDataChannelEvents(e),[cw.OPEN,cw.CLOSE,cw.ERROR].forEach((t=>{const n=()=>{this.emit(t)};this._datachannelEventMap.set(t,n),e.addEventListener(t,n)}))}_unbindDataChannelEvents(e){Array.from(this._datachannelEventMap.entries()).forEach((t=>{let[n,r]=t;e.removeEventListener(n,r)})),this._datachannelEventMap.clear()}}class sD extends oD{constructor(e){super(e),oh(this,"_messageListener",void 0),this._messageListener=e=>{if(e.data.byteLength<this._dataStreamPacketHeader.byteLength)throw Error("invalid byteLength: the byte length must exceed "+this._dataStreamPacketHeader.byteLength);const t=e.data.slice(0,this._dataStreamPacketHeader.byteLength),n=new DataView(t).getUint8(3);if(n!==this.id)return void(ST("SHOW_DATASTREAM2_LOG")&&VT.debug("invalid datachannel id: ".concat(n," !== ").concat(this.id)));let r=e.data.slice(this._dataStreamPacketHeader.byteLength);r=this._dataStreamPacketHandler.deserialize(r),this.emit(cw.MESSAGE,r)}}_updateOriginDataChannel(e){super._updateOriginDataChannel(e),this._bandRemoteDataChannelEvents()}_close(){this._originDataChannel&&(this._originDataChannel.removeEventListener("message",this._messageListener),super._close())}_bandRemoteDataChannelEvents(){this._originDataChannel&&this._originDataChannel.addEventListener("message",this._messageListener)}}class aD extends oD{send(e){if(this._originDataChannel){let t=e;t=this._dataStreamPacketHandler.serialize(e);const n=new Uint8Array(this._dataStreamPacketHeader.byteLength+t.byteLength);n.set(new Uint8Array(this._dataStreamPacketHeader),0),n.set(new Uint8Array(t),this._dataStreamPacketHeader.byteLength),this._originDataChannel.send(n.buffer)}}}var cD=i,lD=pt("iterator"),dD=!cD((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n=new URLSearchParams("a=1&a=2"),r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),n.delete("a",2),!e.toJSON||!n.has("a",1)||n.has("a",2)||!t.size&&!0||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[lD]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host})),uD=js,hD=On,pD=p,fD=x,mD=d,gD=M,yD=dD,vD=js,_D=Fs,ED=function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:uD(e,r,t[r],n);return e},SD=la,TD=Sd,bD=Na,ID=Lf,ND=A,CD=$e,wD=Xt,RD=ur,AD=rn,OD=ne,MD=fr,DD=_s,kD=V,xD=zp,LD=kp,PD=Wf,jD=Sh,UD=pt("iterator"),FD="URLSearchParams",zD=FD+"Iterator",VD=bD.set,BD=bD.getterFor(FD),GD=bD.getterFor(zD),HD=Object.getOwnPropertyDescriptor,WD=function(e){if(!gD)return pD[e];var t=HD(pD,e);return t&&t.value},YD=WD("fetch"),qD=WD("Request"),KD=WD("Headers"),QD=qD&&qD.prototype,JD=KD&&KD.prototype,XD=pD.RegExp,ZD=pD.TypeError,$D=pD.decodeURIComponent,ek=pD.encodeURIComponent,tk=mD("".charAt),nk=mD([].join),rk=mD([].push),ik=mD("".replace),ok=mD([].shift),sk=mD([].splice),ak=mD("".split),ck=mD("".slice),lk=/\+/g,dk=Array(4),uk=function(e){return dk[e-1]||(dk[e-1]=XD("((?:%[\\da-f]{2}){"+e+"})","gi"))},hk=function(e){try{return $D(e)}catch(t){return e}},pk=function(e){var t=ik(e,lk," "),n=4;try{return $D(t)}catch(e){for(;n;)t=ik(t,uk(n--),hk);return t}},fk=/[!'()~]|%20/g,mk={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},gk=function(e){return mk[e]},yk=function(e){return ik(ek(e),fk,gk)},vk=TD((function(e,t){VD(this,{type:zD,iterator:xD(BD(e).entries),kind:t})}),"Iterator",(function(){var e=GD(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),_k=function(e){this.entries=[],this.url=null,void 0!==e&&(OD(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===tk(e,0)?ck(e,1):e:MD(e)))};_k.prototype={type:FD,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,o,s,a,c=LD(e);if(c)for(n=(t=xD(e,c)).next;!(r=fD(n,t)).done;){if(o=(i=xD(AD(r.value))).next,(s=fD(o,i)).done||(a=fD(o,i)).done||!fD(o,i).done)throw ZD("Expected sequence with length 2");rk(this.entries,{key:MD(s.value),value:MD(a.value)})}else for(var l in e)CD(e,l)&&rk(this.entries,{key:l,value:MD(e[l])})},parseQuery:function(e){if(e)for(var t,n,r=ak(e,"&"),i=0;i<r.length;)(t=r[i++]).length&&(n=ak(t,"="),rk(this.entries,{key:pk(ok(n)),value:pk(nk(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],rk(n,yk(e.key)+"="+yk(e.value));return nk(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Ek=function(){ID(this,Sk);var e=VD(this,new _k(arguments.length>0?arguments[0]:void 0));gD||(this.size=e.entries.length)},Sk=Ek.prototype;if(ED(Sk,{append:function(e,t){var n=BD(this);PD(arguments.length,2),rk(n.entries,{key:MD(e),value:MD(t)}),gD||this.length++,n.updateURL()},delete:function(e){for(var t=BD(this),n=PD(arguments.length,1),r=t.entries,i=MD(e),o=n<2?void 0:arguments[1],s=void 0===o?o:MD(o),a=0;a<r.length;){var c=r[a];if(c.key!==i||void 0!==s&&c.value!==s)a++;else if(sk(r,a,1),void 0!==s)break}gD||(this.size=r.length),t.updateURL()},get:function(e){var t=BD(this).entries;PD(arguments.length,1);for(var n=MD(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){var t=BD(this).entries;PD(arguments.length,1);for(var n=MD(e),r=[],i=0;i<t.length;i++)t[i].key===n&&rk(r,t[i].value);return r},has:function(e){for(var t=BD(this).entries,n=PD(arguments.length,1),r=MD(e),i=n<2?void 0:arguments[1],o=void 0===i?i:MD(i),s=0;s<t.length;){var a=t[s++];if(a.key===r&&(void 0===o||a.value===o))return!0}return!1},set:function(e,t){var n=BD(this);PD(arguments.length,1);for(var r,i=n.entries,o=!1,s=MD(e),a=MD(t),c=0;c<i.length;c++)(r=i[c]).key===s&&(o?sk(i,c--,1):(o=!0,r.value=a));o||rk(i,{key:s,value:a}),gD||(this.size=i.length),n.updateURL()},sort:function(){var e=BD(this);jD(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=BD(this).entries,r=wD(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new vk(this,"keys")},values:function(){return new vk(this,"values")},entries:function(){return new vk(this,"entries")}},{enumerable:!0}),vD(Sk,UD,Sk.entries,{name:"entries"}),vD(Sk,"toString",(function(){return BD(this).serialize()}),{enumerable:!0}),gD&&_D(Sk,"size",{get:function(){return BD(this).entries.length},configurable:!0,enumerable:!0}),SD(Ek,FD),hD({global:!0,constructor:!0,forced:!yD},{URLSearchParams:Ek}),!yD&&ND(KD)){var Tk=mD(JD.has),bk=mD(JD.set),Ik=function(e){if(OD(e)){var t,n=e.body;if(RD(n)===FD)return t=e.headers?new KD(e.headers):new KD,Tk(t,"content-type")||bk(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),DD(e,{body:kD(0,MD(n)),headers:kD(0,t)})}return e};if(ND(YD)&&hD({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return YD(e,arguments.length>1?Ik(arguments[1]):{})}}),ND(qD)){var Nk=function(e){return ID(this,QD),new qD(e,arguments.length>1?Ik(arguments[1]):{})};QD.constructor=Nk,Nk.prototype=QD,hD({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Nk})}}var Ck,wk={URLSearchParams:Ek,getState:BD},Rk=M,Ak=d,Ok=x,Mk=i,Dk=Ko,kk=Ls,xk=L,Lk=Je,Pk=Y,jk=Object.assign,Uk=Object.defineProperty,Fk=Ak([].concat),zk=!jk||Mk((function(){if(Rk&&1!==jk({b:1},jk(Uk({},"a",{enumerable:!0,get:function(){Uk(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=jk({},e)[n]||Dk(jk({},t)).join("")!=r}))?function(e,t){for(var n=Lk(e),r=arguments.length,i=1,o=kk.f,s=xk.f;r>i;)for(var a,c=Pk(arguments[i++]),l=o?Fk(Dk(c),o(c)):Dk(c),d=l.length,u=0;d>u;)a=l[u++],Rk&&!Ok(s,c,a)||(n[a]=c[a]);return n}:jk,Vk=rn,Bk=Hp,Gk=Xt,Hk=x,Wk=Je,Yk=function(e,t,n,r){try{return r?t(Vk(n)[0],n[1]):t(n)}catch(t){Bk(e,"throw",t)}},qk=wp,Kk=ho,Qk=Bn,Jk=qi,Xk=zp,Zk=kp,$k=Array,ex=d,tx=2147483647,nx=/[^\0-\u007E]/,rx=/[.\u3002\uFF0E\uFF61]/g,ix="Overflow: input needs wider integers to process",ox=RangeError,sx=ex(rx.exec),ax=Math.floor,cx=String.fromCharCode,lx=ex("".charCodeAt),dx=ex([].join),ux=ex([].push),hx=ex("".replace),px=ex("".split),fx=ex("".toLowerCase),mx=function(e){return e+22+75*(e<26)},gx=function(e,t,n){var r=0;for(e=n?ax(e/700):e>>1,e+=ax(e/t);e>455;)e=ax(e/35),r+=36;return ax(r+36*e/(e+38))},yx=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=lx(e,n++);if(i>=55296&&i<=56319&&n<r){var o=lx(e,n++);56320==(64512&o)?ux(t,((1023&i)<<10)+(1023&o)+65536):(ux(t,i),n--)}else ux(t,i)}return t}(e);var n,r,i=e.length,o=128,s=0,a=72;for(n=0;n<e.length;n++)(r=e[n])<128&&ux(t,cx(r));var c=t.length,l=c;for(c&&ux(t,"-");l<i;){var d=tx;for(n=0;n<e.length;n++)(r=e[n])>=o&&r<d&&(d=r);var u=l+1;if(d-o>ax((tx-s)/u))throw ox(ix);for(s+=(d-o)*u,o=d,n=0;n<e.length;n++){if((r=e[n])<o&&++s>tx)throw ox(ix);if(r==o){for(var h=s,p=36;;){var f=p<=a?1:p>=a+26?26:p-a;if(h<f)break;var m=h-f,g=36-f;ux(t,cx(mx(f+m%g))),h=ax(m/g),p+=36}ux(t,cx(mx(h))),a=gx(s,u,l==c),s=0,l++}}s++,o++}return dx(t,"")},vx=On,_x=M,Ex=dD,Sx=p,Tx=Xt,bx=d,Ix=js,Nx=Fs,Cx=Lf,wx=$e,Rx=zk,Ax=function(e){var t=Wk(e),n=Kk(this),r=arguments.length,i=r>1?arguments[1]:void 0,o=void 0!==i;o&&(i=Gk(i,r>2?arguments[2]:void 0));var s,a,c,l,d,u,h=Zk(t),p=0;if(!h||this===$k&&qk(h))for(s=Qk(t),a=n?new this(s):$k(s);s>p;p++)u=o?i(t[p],p):t[p],Jk(a,p,u);else for(d=(l=Xk(t,h)).next,a=n?new this:[];!(c=Hk(d,l)).done;p++)u=o?Yk(l,i,[c.value,p],!0):c.value,Jk(a,p,u);return a.length=p,a},Ox=As,Mx=Yu.codeAt,Dx=function(e){var t,n,r=[],i=px(hx(fx(e),rx,"."),".");for(t=0;t<i.length;t++)n=i[t],ux(r,sx(nx,n)?"xn--"+yx(n):n);return dx(r,".")},kx=fr,xx=la,Lx=Wf,Px=wk,jx=Na,Ux=jx.set,Fx=jx.getterFor("URL"),zx=Px.URLSearchParams,Vx=Px.getState,Bx=Sx.URL,Gx=Sx.TypeError,Hx=Sx.parseInt,Wx=Math.floor,Yx=Math.pow,qx=bx("".charAt),Kx=bx(/./.exec),Qx=bx([].join),Jx=bx(1..toString),Xx=bx([].pop),Zx=bx([].push),$x=bx("".replace),eL=bx([].shift),tL=bx("".split),nL=bx("".slice),rL=bx("".toLowerCase),iL=bx([].unshift),oL="Invalid scheme",sL="Invalid host",aL="Invalid port",cL=/[a-z]/i,lL=/[\d+-.a-z]/i,dL=/\d/,uL=/^0x/i,hL=/^[0-7]+$/,pL=/^\d+$/,fL=/^[\da-f]+$/i,mL=/[\0\t\n\r #%/:<>?@[\\\]^|]/,gL=/[\0\t\n\r #/:<>?@[\\\]^|]/,yL=/^[\u0000-\u0020]+/,vL=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,_L=/[\t\n\r]/g,EL=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)iL(t,e%256),e=Wx(e/256);return Qx(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=Jx(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},SL={},TL=Rx({},SL,{" ":1,'"':1,"<":1,">":1,"`":1}),bL=Rx({},TL,{"#":1,"?":1,"{":1,"}":1}),IL=Rx({},bL,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),NL=function(e,t){var n=Mx(e,0);return n>32&&n<127&&!wx(t,e)?e:encodeURIComponent(e)},CL={ftp:21,file:null,http:80,https:443,ws:80,wss:443},wL=function(e,t){var n;return 2==e.length&&Kx(cL,qx(e,0))&&(":"==(n=qx(e,1))||!t&&"|"==n)},RL=function(e){var t;return e.length>1&&wL(nL(e,0,2))&&(2==e.length||"/"===(t=qx(e,2))||"\\"===t||"?"===t||"#"===t)},AL=function(e){return"."===e||"%2e"===rL(e)},OL={},ML={},DL={},kL={},xL={},LL={},PL={},jL={},UL={},FL={},zL={},VL={},BL={},GL={},HL={},WL={},YL={},qL={},KL={},QL={},JL={},XL=function(e,t,n){var r,i,o,s=kx(e);if(t){if(i=this.parse(s))throw Gx(i);this.searchParams=null}else{if(void 0!==n&&(r=new XL(n,!0)),i=this.parse(s,null,r))throw Gx(i);(o=Vx(new zx)).bindURL(this),this.searchParams=o}};XL.prototype={type:"URL",parse:function(e,t,n){var r,i,o,s,a,c=this,l=t||OL,d=0,u="",h=!1,p=!1,f=!1;for(e=kx(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=$x(e,yL,""),e=$x(e,vL,"$1")),e=$x(e,_L,""),r=Ax(e);d<=r.length;){switch(i=r[d],l){case OL:if(!i||!Kx(cL,i)){if(t)return oL;l=DL;continue}u+=rL(i),l=ML;break;case ML:if(i&&(Kx(lL,i)||"+"==i||"-"==i||"."==i))u+=rL(i);else{if(":"!=i){if(t)return oL;u="",l=DL,d=0;continue}if(t&&(c.isSpecial()!=wx(CL,u)||"file"==u&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=u,t)return void(c.isSpecial()&&CL[c.scheme]==c.port&&(c.port=null));u="","file"==c.scheme?l=GL:c.isSpecial()&&n&&n.scheme==c.scheme?l=kL:c.isSpecial()?l=jL:"/"==r[d+1]?(l=xL,d++):(c.cannotBeABaseURL=!0,Zx(c.path,""),l=KL)}break;case DL:if(!n||n.cannotBeABaseURL&&"#"!=i)return oL;if(n.cannotBeABaseURL&&"#"==i){c.scheme=n.scheme,c.path=Ox(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,l=JL;break}l="file"==n.scheme?GL:LL;continue;case kL:if("/"!=i||"/"!=r[d+1]){l=LL;continue}l=UL,d++;break;case xL:if("/"==i){l=FL;break}l=qL;continue;case LL:if(c.scheme=n.scheme,i==Ck)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Ox(n.path),c.query=n.query;else if("/"==i||"\\"==i&&c.isSpecial())l=PL;else if("?"==i)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Ox(n.path),c.query="",l=QL;else{if("#"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Ox(n.path),c.path.length--,l=qL;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Ox(n.path),c.query=n.query,c.fragment="",l=JL}break;case PL:if(!c.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,l=qL;continue}l=FL}else l=UL;break;case jL:if(l=UL,"/"!=i||"/"!=qx(u,d+1))continue;d++;break;case UL:if("/"!=i&&"\\"!=i){l=FL;continue}break;case FL:if("@"==i){h&&(u="%40"+u),h=!0,o=Ax(u);for(var m=0;m<o.length;m++){var g=o[m];if(":"!=g||f){var y=NL(g,IL);f?c.password+=y:c.username+=y}else f=!0}u=""}else if(i==Ck||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(h&&""==u)return"Invalid authority";d-=Ax(u).length+1,u="",l=zL}else u+=i;break;case zL:case VL:if(t&&"file"==c.scheme){l=WL;continue}if(":"!=i||p){if(i==Ck||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(c.isSpecial()&&""==u)return sL;if(t&&""==u&&(c.includesCredentials()||null!==c.port))return;if(s=c.parseHost(u))return s;if(u="",l=YL,t)return;continue}"["==i?p=!0:"]"==i&&(p=!1),u+=i}else{if(""==u)return sL;if(s=c.parseHost(u))return s;if(u="",l=BL,t==VL)return}break;case BL:if(!Kx(dL,i)){if(i==Ck||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()||t){if(""!=u){var v=Hx(u,10);if(v>65535)return aL;c.port=c.isSpecial()&&v===CL[c.scheme]?null:v,u=""}if(t)return;l=YL;continue}return aL}u+=i;break;case GL:if(c.scheme="file","/"==i||"\\"==i)l=HL;else{if(!n||"file"!=n.scheme){l=qL;continue}if(i==Ck)c.host=n.host,c.path=Ox(n.path),c.query=n.query;else if("?"==i)c.host=n.host,c.path=Ox(n.path),c.query="",l=QL;else{if("#"!=i){RL(Qx(Ox(r,d),""))||(c.host=n.host,c.path=Ox(n.path),c.shortenPath()),l=qL;continue}c.host=n.host,c.path=Ox(n.path),c.query=n.query,c.fragment="",l=JL}}break;case HL:if("/"==i||"\\"==i){l=WL;break}n&&"file"==n.scheme&&!RL(Qx(Ox(r,d),""))&&(wL(n.path[0],!0)?Zx(c.path,n.path[0]):c.host=n.host),l=qL;continue;case WL:if(i==Ck||"/"==i||"\\"==i||"?"==i||"#"==i){if(!t&&wL(u))l=qL;else if(""==u){if(c.host="",t)return;l=YL}else{if(s=c.parseHost(u))return s;if("localhost"==c.host&&(c.host=""),t)return;u="",l=YL}continue}u+=i;break;case YL:if(c.isSpecial()){if(l=qL,"/"!=i&&"\\"!=i)continue}else if(t||"?"!=i)if(t||"#"!=i){if(i!=Ck&&(l=qL,"/"!=i))continue}else c.fragment="",l=JL;else c.query="",l=QL;break;case qL:if(i==Ck||"/"==i||"\\"==i&&c.isSpecial()||!t&&("?"==i||"#"==i)){if(".."===(a=rL(a=u))||"%2e."===a||".%2e"===a||"%2e%2e"===a?(c.shortenPath(),"/"==i||"\\"==i&&c.isSpecial()||Zx(c.path,"")):AL(u)?"/"==i||"\\"==i&&c.isSpecial()||Zx(c.path,""):("file"==c.scheme&&!c.path.length&&wL(u)&&(c.host&&(c.host=""),u=qx(u,0)+":"),Zx(c.path,u)),u="","file"==c.scheme&&(i==Ck||"?"==i||"#"==i))for(;c.path.length>1&&""===c.path[0];)eL(c.path);"?"==i?(c.query="",l=QL):"#"==i&&(c.fragment="",l=JL)}else u+=NL(i,bL);break;case KL:"?"==i?(c.query="",l=QL):"#"==i?(c.fragment="",l=JL):i!=Ck&&(c.path[0]+=NL(i,SL));break;case QL:t||"#"!=i?i!=Ck&&("'"==i&&c.isSpecial()?c.query+="%27":c.query+="#"==i?"%23":NL(i,SL)):(c.fragment="",l=JL);break;case JL:i!=Ck&&(c.fragment+=NL(i,TL))}d++}},parseHost:function(e){var t,n,r;if("["==qx(e,0)){if("]"!=qx(e,e.length-1))return sL;if(t=function(e){var t,n,r,i,o,s,a,c=[0,0,0,0,0,0,0,0],l=0,d=null,u=0,h=function(){return qx(e,u)};if(":"==h()){if(":"!=qx(e,1))return;u+=2,d=++l}for(;h();){if(8==l)return;if(":"!=h()){for(t=n=0;n<4&&Kx(fL,h());)t=16*t+Hx(h(),16),u++,n++;if("."==h()){if(0==n)return;if(u-=n,l>6)return;for(r=0;h();){if(i=null,r>0){if(!("."==h()&&r<4))return;u++}if(!Kx(dL,h()))return;for(;Kx(dL,h());){if(o=Hx(h(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;u++}c[l]=256*c[l]+i,2!=++r&&4!=r||l++}if(4!=r)return;break}if(":"==h()){if(u++,!h())return}else if(h())return;c[l++]=t}else{if(null!==d)return;u++,d=++l}}if(null!==d)for(s=l-d,l=7;0!=l&&s>0;)a=c[l],c[l--]=c[d+s-1],c[d+--s]=a;else if(8!=l)return;return c}(nL(e,1,-1)),!t)return sL;this.host=t}else if(this.isSpecial()){if(e=Dx(e),Kx(mL,e))return sL;if(t=function(e){var t,n,r,i,o,s,a,c=tL(e,".");if(c.length&&""==c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=c[r]))return e;if(o=10,i.length>1&&"0"==qx(i,0)&&(o=Kx(uL,i)?16:8,i=nL(i,8==o?1:2)),""===i)s=0;else{if(!Kx(10==o?pL:8==o?hL:fL,i))return e;s=Hx(i,o)}Zx(n,s)}for(r=0;r<t;r++)if(s=n[r],r==t-1){if(s>=Yx(256,5-t))return null}else if(s>255)return null;for(a=Xx(n),r=0;r<n.length;r++)a+=n[r]*Yx(256,3-r);return a}(e),null===t)return sL;this.host=t}else{if(Kx(gL,e))return sL;for(t="",n=Ax(e),r=0;r<n.length;r++)t+=NL(n[r],SL);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return wx(CL,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&wL(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,s=e.path,a=e.query,c=e.fragment,l=t+":";return null!==i?(l+="//",e.includesCredentials()&&(l+=n+(r?":"+r:"")+"@"),l+=EL(i),null!==o&&(l+=":"+o)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?s[0]:s.length?"/"+Qx(s,"/"):"",null!==a&&(l+="?"+a),null!==c&&(l+="#"+c),l},setHref:function(e){var t=this.parse(e);if(t)throw Gx(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new ZL(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+EL(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(kx(e)+":",OL)},getUsername:function(){return this.username},setUsername:function(e){var t=Ax(kx(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=NL(t[n],IL)}},getPassword:function(){return this.password},setPassword:function(e){var t=Ax(kx(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=NL(t[n],IL)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?EL(e):EL(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,zL)},getHostname:function(){var e=this.host;return null===e?"":EL(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,VL)},getPort:function(){var e=this.port;return null===e?"":kx(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=kx(e))?this.port=null:this.parse(e,BL))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+Qx(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,YL))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=kx(e))?this.query=null:("?"==qx(e,0)&&(e=nL(e,1)),this.query="",this.parse(e,QL)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=kx(e))?("#"==qx(e,0)&&(e=nL(e,1)),this.fragment="",this.parse(e,JL)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var ZL=function(e){var t=Cx(this,$L),n=Lx(arguments.length,1)>1?arguments[1]:void 0,r=Ux(t,new XL(e,!1,n));_x||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},$L=ZL.prototype,eP=function(e,t){return{get:function(){return Fx(this)[e]()},set:t&&function(e){return Fx(this)[t](e)},configurable:!0,enumerable:!0}};if(_x&&(Nx($L,"href",eP("serialize","setHref")),Nx($L,"origin",eP("getOrigin")),Nx($L,"protocol",eP("getProtocol","setProtocol")),Nx($L,"username",eP("getUsername","setUsername")),Nx($L,"password",eP("getPassword","setPassword")),Nx($L,"host",eP("getHost","setHost")),Nx($L,"hostname",eP("getHostname","setHostname")),Nx($L,"port",eP("getPort","setPort")),Nx($L,"pathname",eP("getPathname","setPathname")),Nx($L,"search",eP("getSearch","setSearch")),Nx($L,"searchParams",eP("getSearchParams")),Nx($L,"hash",eP("getHash","setHash"))),Ix($L,"toJSON",(function(){return Fx(this).serialize()}),{enumerable:!0}),Ix($L,"toString",(function(){return Fx(this).serialize()}),{enumerable:!0}),Bx){var tP=Bx.createObjectURL,nP=Bx.revokeObjectURL;tP&&Ix(ZL,"createObjectURL",Tx(tP,Bx)),nP&&Ix(ZL,"revokeObjectURL",Tx(nP,Bx))}xx(ZL,"URL"),vx({global:!0,constructor:!0,forced:!Ex,sham:!_x},{URL:ZL});var rP=On,iP=i,oP=Wf,sP=fr,aP=dD,cP=ce("URL");rP({target:"URL",stat:!0,forced:!(aP&&iP((function(){cP.canParse()})))},{canParse:function(e){var t=oP(arguments.length,1),n=sP(e),r=t<2||void 0===arguments[1]?void 0:sP(arguments[1]);try{return!!new cP(n,r)}catch(e){return!1}}});var lP=r(re.URL);function dP(){const e=new Blob([atob("ZnVuY3Rpb24gZShlKXtjb25zdCB0PW5ldyBEYXRhVmlldyhlLmRhdGEpO2lmKDA9PT10LmdldFVpbnQ4KDApJiYwPT09dC5nZXRVaW50OCgxKSYmMD09PXQuZ2V0VWludDgoMikmJjE9PT10LmdldFVpbnQ4KDMpJiY2PT09dC5nZXRVaW50OCg0KSl7bGV0IG49NixyPTAsbz0wO2Zvcig7MjU1PT09KG89dC5nZXRVaW50OChuKyspKTspcis9MjU1O3IrPW87Y29uc3QgYT1mdW5jdGlvbihlLHQsbil7bGV0IHI9bmV3IFVpbnQ4QXJyYXkoZSx0LG4pLG89W10sYT0wO2Zvcig7YTxuOylhKzM8biYmMD09PXJbYV0mJjA9PT1yW2ErMV0mJjM9PT1yW2ErMl0mJigwPT09clthKzNdfHwxPT09clthKzNdfHwyPT09clthKzNdfHwzPT09clthKzNdKT8oby5wdXNoKHJbYV0sclthKzFdLHJbYSszXSksYSs9NCk6KG8ucHVzaChyW2FdKSxhKyspO3JldHVybiBuZXcgVWludDhBcnJheShvKX0oZS5kYXRhLG4scik7cmV0dXJuIG5ldyBVaW50OEFycmF5KGEpfXJldHVybiBudWxsfWZ1bmN0aW9uIHQoZSx0KXtjb25zdCBuPWZ1bmN0aW9uKGUpe2NvbnN0IHQ9ZS5sZW5ndGg7bGV0IG49W10scj0wO2Zvcig7cjx0OylyKzI8dCYmMD09PWVbcl0mJjA9PT1lW3IrMV0mJigwPT09ZVtyKzJdfHwxPT09ZVtyKzJdfHwyPT09ZVtyKzJdfHwzPT09ZVtyKzJdKT8obi5wdXNoKGVbcl0sZVtyKzFdLDMsZVtyKzJdKSxyKz0zKToobi5wdXNoKGVbcl0pLHIrKyk7cmV0dXJuIG5ldyBVaW50OEFycmF5KG4pfSh0KSxyPW4ubGVuZ3RoLG89TWF0aC5mbG9vcihyLzI1NSksYT1yJTI1NSxzPW5ldyBVaW50OEFycmF5KDYrbysxK3IrZS5ieXRlTGVuZ3RoKTtzWzBdPTAsc1sxXT0wLHNbMl09MCxzWzNdPTEsc1s0XT02LHNbNV09MTAxO2xldCBpPTA7Zm9yKDtpPG87KXNbNitpXT0yNTUsaSsrO3JldHVybiBzWzYraV09YSxpKysscy5zZXQobiw2K2kpLHMuc2V0KG5ldyBVaW50OEFycmF5KGUpLDYraStyKSxzLmJ1ZmZlcn1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIlNhZmFyaSIpPi0xJiYtMT09PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiQ2hyb21lIikmJihzZWxmLm9ucnRjdHJhbnNmb3JtPW49Pntjb25zdCByPW4udHJhbnNmb3JtZXI7bGV0IG89W107ci5vcHRpb25zLnBvcnQub25tZXNzYWdlPWU9PntlLmRhdGEuc2VpJiZvLnB1c2goZS5kYXRhLnNlaSl9LHNlbGYucG9zdE1lc3NhZ2UoInN0YXJ0ZWQiKTtjb25zdCBhPXIucmVhZGFibGUuZ2V0UmVhZGVyKCkscz1yLndyaXRhYmxlLmdldFdyaXRlcigpOyJyeCI9PT1yLm9wdGlvbnMubmFtZT9mdW5jdGlvbiB0KG4pe2EucmVhZCgpLnRoZW4oKHI9PntpZighci5kb25lKXtpZihyLnZhbHVlIGluc3RhbmNlb2YgUlRDRW5jb2RlZFZpZGVvRnJhbWUpe2NvbnN0IHQ9ZShyLnZhbHVlKTt0JiZuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7c2VpOnR9KX1zLndyaXRlKHIudmFsdWUpLG4ub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHt0cmFuc2Zvcm1lZDohMH0pLHQobil9fSkpfShyKToidHgiPT09ci5vcHRpb25zLm5hbWUmJmZ1bmN0aW9uIGUobil7YS5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgZT1vLnNoaWZ0KCk7ZSYmKHIudmFsdWUuZGF0YT10KHIudmFsdWUuZGF0YSxlKSl9cy53cml0ZShyLnZhbHVlKSxuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSxlKG4pfX0pKX0ocil9LHNlbGYucG9zdE1lc3NhZ2UoInJlZ2lzdGVyZWQiKSk7Cg==")],{type:"text/javascript"});return setTimeout((()=>lP.revokeObjectURL(e)),0),new Worker(lP.createObjectURL(e))}const uP=new Map,hP=new Map;async function pP(e){if(!bC().supportWebRTCEncodedTransform)return void VT.warning("browser not support audio encoded transform");if(hP.has(e))return;const t={track:e.track};if(Cv()){if(!e.createEncodedStreams)return void VT.warning("browser not support createEncodedStreams() API");let r=null;try{r=e.createEncodedStreams()}catch(e){return void VT.error("create audio-encoded-streams error",e&&e.message)}const i=new TransformStream({transform(r,i){t.controller||(t.controller=i),e.track&&e.track.id!==t.track.id&&(VT.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n)),i.enqueue(r)}});r.readable.pipeThrough(i).pipeTo(r.writable)}else if(wv()){if("undefined"==typeof RTCRtpScriptTransform)return void VT.warning("browser not support RTCRtpScriptTransform");const r=dP(),i=new MessageChannel;await new cv((e=>r.onmessage=t=>{"registered"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(r,{name:"rx",port:i.port2},[i.port2]);e.transform=o,await new cv((e=>r.onmessage=t=>{"started"===t.data&&e(void 0)})),i.port1.onmessage=r=>{var i;r.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==t.track.id&&(VT.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n))},t.worker=r}function n(){e.track.removeEventListener("ended",n),function(e){const t=hP.get(e);if(t){hP.delete(e);try{var n,r;null===(n=t.controller)||void 0===n||n.terminate(),null===(r=t.worker)||void 0===r||r.terminate()}catch(e){VT.warning(e&&e.message)}}}(e)}hP.set(e,t),e.track.addEventListener("ended",n)}function fP(e){const t=new DataView(e.data);if(0===t.getUint8(0)&&0===t.getUint8(1)&&0===t.getUint8(2)&&1===t.getUint8(3)&&6===t.getUint8(4)){let n=6,r=0,i=0;for(;255===(i=t.getUint8(n++));)r+=255;r+=i;const o=function(e,t,n){let r=new Uint8Array(e,t,n),i=[],o=0;for(;o<n;)o+3<n&&0===r[o]&&0===r[o+1]&&3===r[o+2]&&(0===r[o+3]||1===r[o+3]||2===r[o+3]||3===r[o+3])?(i.push(r[o],r[o+1],r[o+3]),o+=4):(i.push(r[o]),o++);return new Uint8Array(i)}(e.data,n,r);return new Uint8Array(o)}return null}function mP(e,t){const n=function(e){const t=e.length;let n=[],r=0;for(;r<t;)r+2<t&&0===e[r]&&0===e[r+1]&&(0===e[r+2]||1===e[r+2]||2===e[r+2]||3===e[r+2])?(n.push(e[r],e[r+1],3,e[r+2]),r+=3):(n.push(e[r]),r++);return new Uint8Array(n)}(t),r=n.length,i=Math.floor(r/255),o=r%255,s=new Uint8Array(6+i+1+r+e.byteLength);s[0]=0,s[1]=0,s[2]=0,s[3]=1,s[4]=6,s[5]=101;let a=0;for(;a<i;)s[6+a]=255,a++;return s[6+a]=o,a++,s.set(n,6+a),s.set(new Uint8Array(e),6+a+r),s.buffer}const gP=new Map,yP=new Map;async function vP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!bC().supportWebRTCEncodedTransform)return void VT.warning("browser not support video encoded transform");if(!e.track)return;if(yP.has(e)){const n=yP.get(e);return void(n&&(n.onSei=t.onSei))}const n={track:e.track,onSei:t.onSei};if(Cv()){if(!e.createEncodedStreams)return void VT.warning("browser not support createEncodedStreams() API");let t=null;try{t=e.createEncodedStreams()}catch(e){return void VT.error("create video-encoded-streams error",e&&e.message)}const i=new TransformStream({transform(t,i){n.controller||(n.controller=i),e.track&&e.track.id!==n.track.id&&(VT.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r));const o=fP(t);o&&n.onSei&&n.onSei(o),i.enqueue(t)}});t.readable.pipeThrough(i).pipeTo(t.writable)}else if(wv()){if("undefined"==typeof RTCRtpScriptTransform)return void VT.warning("browser not support RTCRtpScriptTransform");const t=dP(),i=new MessageChannel;await new cv((e=>t.onmessage=t=>{"registered"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(t,{name:"rx",port:i.port2},[i.port2]);e.transform=o,await new cv((e=>t.onmessage=t=>{"started"===t.data&&e(void 0)})),i.port1.onmessage=t=>{var i;t.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==n.track.id?(VT.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r)):t.data.sei&&n.onSei&&n.onSei(t.data.sei)},n.worker=t}function r(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",r)}!function(e){const t=yP.get(e);if(t){yP.delete(e);try{var n,r;null===(n=t.controller)||void 0===n||n.terminate(),null===(r=t.worker)||void 0===r||r.terminate()}catch(e){VT.warning(e&&e.message)}}}(e)}yP.set(e,n),e.track.addEventListener("ended",r)}!function(){const e=Ev();TC.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),TC.getStreamFromExtension=e.name===mv.CHROME&&Number(e.version)>34,TC.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver)return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const e=new RTCPeerConnection;let t=!1;try{e.addTransceiver("audio"),t=!0}catch(e){}return e.close(),t}(),TC.supportMinBitrate=e.name===mv.CHROME||e.name===mv.EDGE,TC.supportSetRtpSenderParameters=function(){const e=Ev();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!Vv()||!(!wv()&&!bv())||e.name===mv.FIREFOX&&Number(e.version)>=64)}(),e.name===mv.SAFARI&&(Number(e.version)>=14?TC.supportDualStream=!0:TC.supportDualStream=!1),TC.webAudioMediaStreamDest=function(){const e=Ev();return!(e.name===mv.SAFARI&&Number(e.version)<12)}(),TC.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,TC.supportWebGL="undefined"!=typeof WebGLRenderingContext,TC.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,Vv()||(TC.webAudioWithAEC=!0),TC.supportShareAudio=function(){const e=Ev();return(e.os===fv.WIN_10||e.os===fv.WIN_81||e.os===fv.WIN_7||e.os===fv.LINUX||e.os===fv.MAC_OS||e.os===fv.CHROMIUM_OS)&&e.name===mv.CHROME&&Number(e.version)>=74}(),TC.supportDataChannel=!!(Ov(76)||function(e){const t=Ev();return!(t.name!==mv.FIREFOX||!t.osVersion)&&Number(t.version)>=e}(68)||function(e){const t=Ev();return!(t.name!==mv.SAFARI||!t.osVersion)&&Number(t.version)>=e}(14)),TC.supportPCSetConfiguration=function(){const e=window.RTCPeerConnection;return!Rv()&&!!e&&e.prototype.setConfiguration instanceof Function}(),TC.supportWebRTCEncodedTransform=function(){const e=Ev();return"Chrome"===e.name&&Number(e.version)>=86||"Safari"===e.name&&Number(e.version)>=15}(),TC.supportWebRTCInsertableStream=function(){const e=Ev();return(e.name===mv.CHROME||e.name===mv.EDGE)&&Number(e.version)>=94&&"MediaStreamTrackGenerator"in window&&"MediaStreamTrackProcessor"in window}(),W_((()=>{TC.supportDualStreamEncoding=function(){const e=Ev();return!!ST("DISABLE_WEBAUDIO")||"Safari"===e.name&&Number(e.version)>=14||!!("Chrome"===e.name&&/Windows/i.test(e.os||"")&&Number(e.version)>=100&&ST("CHROME_DUAL_STREAM_USE_ENCODING"))}(),VT.info("browser compatibility",JSON.stringify(TC),JSON.stringify(e))}))}();class _P extends l_{constructor(){super(...arguments),oh(this,"resultStorage",new Map)}setLocalAudioStats(e,t,n){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(n,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(n,t))}setLocalVideoStats(e,t,n){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(n,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(n,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(n))}setRemoteAudioStats(e,t){const n=e.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",n,this.checkAudioOutputLevel(t))}setRemoteVideoStats(e,t){const n=e.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",n,this.checkVideoDecode(t))}record(e,t,n){if(ST("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});const r=this.resultStorage.get(e);if(r&&(r.result.push(n),r.result.length>=5)){var i;const n=Rr(i=r.result).call(i,!0);r.isPrevNormal&&!n&&this.emit("exception",EP[e],e,t),!r.isPrevNormal&&n&&this.emit("exception",EP[e]+2e3,e+"_RECOVER",t),r.isPrevNormal=n,r.result=[]}}checkAudioOutputLevel(e){return!(e.receiveBitrate>0&&0===e.receiveLevel)}checkAudioInputLevel(e,t){return t instanceof rR&&!t.isActive||!!t.muted||0!==e.sendVolumeLevel}checkFramerateInput(e,t){let n=null;t._encoderConfig&&t._encoderConfig.frameRate&&(n=EN(t._encoderConfig.frameRate));const r=e.captureFrameRate;return!n||!r||!(n>10&&r<5||n<10&&n>=5&&r<=1)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}checkSendVideoBitrate(e,t){return!!t.muted||0!==e.sendBitrate}checkSendAudioBitrate(e,t){return t instanceof rR&&!t.isActive||!!t.muted||0!==e.sendBitrate}checkVideoDecode(e){return 0===e.receiveBitrate||0!==e.decodeFrameRate}}const EP={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},SP=new class{markSubscribeStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/subscribe-").concat(t))}markPublishStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/publish-").concat(t))}measureFromSubscribeStart(e,t){const n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/subscribe-").concat(t));if(n.length>0){const e=n[n.length-1];return Math.round(performance.now()-e.startTime)}return 0}measureFromPublishStart(e,t){const n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/publish-").concat(t));if(n.length>0){const e=n[n.length-1];return Math.round(performance.now()-e.startTime)}return 0}};function TP(e,t){this.v=e,this.k=t}function bP(e){return new TP(e,0)}var IP=av,NP=hg;On({target:"Promise",stat:!0,forced:!0},{withResolvers:function(){var e=NP.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var CP=hg,wP=qm;On({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=CP.f(this),n=wP(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}});var RP=r(IP),AP=zs.f("asyncIterator"),OP=r(AP);function MP(e){var t,n;function r(t,n){try{var o=e[t](n),s=o.value,a=s instanceof TP;RP.resolve(a?s.v:s).then((function(n){if(a){var c="return"===t?"return":"next";if(!s.k||n.done)return r(c,n);n=e[c](n).value}i(o.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new RP((function(o,s){var a={key:e,arg:i,resolve:o,reject:s,next:null};n?n=n.next=a:(t=n=a,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function DP(e){return function(){return new MP(e.apply(this,arguments))}}MP.prototype["function"==typeof ju&&OP||"@@asyncIterator"]=function(){return this},MP.prototype.next=function(e){return this._invoke("next",e)},MP.prototype.throw=function(e){return this._invoke("throw",e)},MP.prototype.return=function(e){return this._invoke("return",e)};var kP=r(re.Object.getOwnPropertySymbols),xP=On,LP=qn.indexOf,PP=bh,jP=N([].indexOf),UP=!!jP&&1/jP([1],1,-0)<0;xP({target:"Array",proto:!0,forced:UP||!PP("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return UP?jP(this,e,t)||0:LP(this,e,t)}});var FP=Jn("Array").indexOf,zP=u,VP=FP,BP=Array.prototype,GP=r((function(e){var t=e.indexOf;return e===BP||zP(BP,e)&&t===BP.indexOf?VP:t})),HP=Je,WP=Ko;On({target:"Object",stat:!0,forced:i((function(){WP(1)}))},{keys:function(e){return WP(HP(e))}});var YP=r(re.Object.keys);function qP(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=YP(e);for(r=0;r<o.length;r++)n=o[r],GP(t).call(t,n)>=0||(i[n]=e[n]);return i}(e,t);if(kP){var o=kP(e);for(r=0;r<o.length;r++)n=o[r],GP(t).call(t,n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var KP={exports:{}};!function(e,t){e.exports=(()=>{var e={8:(e,t,n)=>{n.r(t),n.d(t,{Parser:()=>T,Printer:()=>w,parse:()=>M,print:()=>D});const r="\n",i="".concat("\r").concat(r),o=" ";let s;function a(e){return e>="0"&&e<="9"}function c(e){return e>="!"&&e<="~"}function l(e){return c(e)||e>="\x80"&&e<="\xff"}function d(e){return"!"===e||e>="#"&&e<="'"||e>="*"&&e<="+"||e>="-"&&e<="."||e>="0"&&e<="9"||e>="A"&&e<="Z"||e>="^"&&e<="~"}function u(e){return e>="1"&&e<="9"}function h(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"}function p(e){return"d"===e||"h"===e||"m"===e||"s"===e}function f(e){return e>"\x01"&&e<"\t"||e>"\v"&&e<"\f"||e>"\x0e"&&e<"\xff"}function m(e){return h(e)||a(e)||"+"===e||"/"===e}function g(e){return a(e)||h(e)||"+"===e||"/"===e||"-"===e||"_"===e}function y(e){return h(e)||a(e)||"+"===e||"/"===e}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.VERSION="v",e.ORIGIN="o",e.SESSION_NAME="s",e.INFORMATION="i",e.URI="u",e.EMAIL="e",e.PHONE="p",e.CONNECTION="c",e.BANDWIDTH="b",e.TIME="t",e.REPEAT="r",e.ZONE_ADJUSTMENTS="z",e.KEY="k",e.ATTRIBUTE="a",e.MEDIA="m"}(s||(s={}));class S{consumeText(e,t){let n=t;for(;n<e.length;){const t=e[n];if("\0"===t||"\r"===t||t===r)break;n+=1}if(n-t==0)throw new Error("Invalid text, at ".concat(e));return n}consumeUnicastAddress(e,t,n){return this.consumeTill(e,t,o)}consumeOneOrMore(e,t,n){let r=t;for(;n(e[r]);)r++;if(r-t==0)throw new Error("Invalid rule at ".concat(t,"."));return r}consumeSpace(e,t){if(e[t]===o)return t+1;throw new Error("Invalid space at ".concat(t,"."))}consumeIP4Address(e,t){let n=t;for(let r=0;r<4;r++)if(n=this.consumeDecimalUChar(e,n),3!==r){if("."!==e[n])throw new Error("Invalid IP4 address.");n++}return n}consumeDecimalUChar(e,t){let n=t;for(let i=0;i<3&&a(e[n]);i++,n++);if(n-t==0)throw new Error("Invalid decimal uchar.");const r=parseInt(e.slice(t,n));if(r>=0&&r<=255)return n;throw new Error("Invalid decimal uchar")}consumeIP6Address(e,t){let n=this.consumeHexpart(e,t);return":"===e[n]?(n+=1,n=this.consumeIP4Address(e,n),n):n}consumeHexpart(e,t){let n=t;if(":"===e[n]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}if(n=this.consumeHexseq(e,n),":"===e[n]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}return n}consumeHexseq(e,t){let n=t;for(;n=this.consumeHex4(e,n),":"===e[n]&&":"!==e[n+1];)n+=1;return n}consumeHex4(e,t){let n=0;for(;n<4;n++)if(!((r=e[t+n])>="0"&&r<="9"||r>="a"&&r<="f"||r>="A"&&r<="F")){if(0===n)throw new Error("Invalid hex 4");break}var r;return t+n}consumeFQDN(e,t){let n=t;for(;a(e[n])||h(e[n])||"-"===e[n]||"."===e[n];)n+=1;if(n-t<4)throw new Error("Invalid FQDN");return n}consumeExtnAddr(e,t){return this.consumeOneOrMore(e,t,l)}consumeMulticastAddress(e,t,n){switch(n){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(e,t);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(e,t);default:try{return this.consumeFQDN(e,t)}catch(n){return this.consumeExtnAddr(e,t)}}}consumeIP6MulticastAddress(e,t){const n=this.consumeHexpart(e,t);return"/"===e[n]?this.consumeInteger(e,n+1):n}consumeIP4MulticastAddress(e,t){let n=t+3;const r=e.slice(t,n),i=parseInt(r);if(i<224||i>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let o=0;o<3;o++){if("."!==e[n])throw new Error("Invalid IP4 multicast address.");n+=1,n=this.consumeDecimalUChar(e,n)}return"/"===e[n]&&(n+=1),n=this.consumeTTL(e,n),"/"===e[n]&&(n=this.consumeInteger(e,n)),n}consumeInteger(e,t){if(!u(e[t]))throw new Error("Invalid integer.");for(t+=1;a(e[t]);)t+=1;return t}consumeTTL(e,t){if("0"===e[t])return t+1;if(!u(e[t]))throw new Error("Invalid TTL.");t+=1;for(let n=0;n<2&&a(e[t]);n++)t+=1;return t}consumeToken(e,t){return this.consumeOneOrMore(e,t,d)}consumeTime(e,t){let n=t;if("0"===e[n])return n+1;for(u(e[n])&&(n+=1);a(e[n]);)n++;if(n-t<10)throw new Error("Invalid time");return n}consumeAddress(e,t){return this.consumeTill(e,t,o)}consumeTypedTime(e,t){let n=t;return n=this.consumeOneOrMore(e,n,a),p(e[n])?n+1:n}consumeRepeatInterval(e,t){if(!u(e[t]))throw new Error("Invalid repeat interval");for(t+=1;a(e[t]);)t+=1;return p(e[t])&&(t+=1),t}consumePort(e,t){return this.consumeOneOrMore(e,t,a)}consume(e,t,n){for(let r=0;r<n.length;r++){if(t+r>=e.length)throw new Error("consume exceeding value length");if(e[t+r]!==n[r])throw new Error("consume ".concat(n," failed at ").concat(r))}return t+n.length}consumeTill(e,t,n){let r=t;for(;r<e.length&&("string"!=typeof n||e[r]!==n)&&("function"!=typeof n||!n(e[r]));)r++;return r}}class T extends S{constructor(){super(),E(this,"records",[]),E(this,"currentLine",0)}parse(e){const t=this.probeEOL(e);this.records=e.split(t).filter((e=>!!e.trim())).map(this.parseLine),this.currentLine=0;const n=this.parseVersion(),r=this.parseOrigin(),i=this.parseSessionName(),o=this.parseInformation(),s=this.parseUri(),a=this.parseEmail(),c=this.parsePhone(),l=this.parseConnection(),d=this.parseBandWidth(),u=this.parseTimeFields(),h=this.parseKey(),p=this.parseSessionAttribute(),f=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:n,origin:r,sessionName:i,information:o,uri:s,emails:a,phones:c,connection:l,bandwidths:d,timeFields:u,key:h,attributes:p,mediaDescriptions:f}}getCurrentRecord(){const e=this.records[this.currentLine];if(!e)throw new Error("Record doesn't exit.");return e}probeEOL(e){for(let t=0;t<e.length;t++)if(e[t]===r)return"\r"===e[t-1]?i:r;throw new Error("Invalid newline character.")}parseLine(e,t){if(e.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const n=e[0];if("="!==e[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:n,value:e.slice(2),line:t,cur:0}}parseSessionAttribute(){const e=new I;for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==s.ATTRIBUTE)break;const n={attField:this.extractOneOrMore(t,(e=>d(e)&&":"!==e)),_cur:0};":"===t.value[t.cur]&&(t.cur+=1,n.attValue=this.extractOneOrMore(t,f)),e.parse(n),this.currentLine++}return e.digest()}parseMediaAttributes(e){const t=new N(e);for(;this.currentLine<this.records.length;){const e=this.getCurrentRecord();if(e.type!==s.ATTRIBUTE)break;const n={attField:this.extractOneOrMore(e,(e=>d(e)&&":"!==e)),_cur:0};":"===e.value[e.cur]&&(e.cur+=1,n.attValue=this.extractOneOrMore(e,f)),t.parse(n),this.currentLine++}return t.digest()}parseKey(){const e=this.getCurrentRecord();if(e.type===s.KEY){if("prompt"===e.value||"clear:"===e.value||"base64:"===e.value||"uri:"===e.value)return e.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const e=this.getCurrentRecord();if(e.type===s.ZONE_ADJUSTMENTS){const t=[];for(;;)try{const n=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);let r=!1;"-"===e.value[e.cur]&&(r=!0,e.cur+=1);const i=this.extract(e,this.consumeTypedTime);t.push({time:n,typedTime:i,back:r})}catch(e){break}if(0===t.length)throw new Error("Invalid zone adjustments");return this.currentLine++,t}return[]}parseRepeat(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.REPEAT)break;{const n=this.extract(t,this.consumeRepeatInterval),r=this.parseTypedTime(t);e.push({repeatInterval:n,typedTimes:r}),this.currentLine++}}return e}parseTypedTime(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeTypedTime))}catch(e){break}if(0===t.length)throw new Error("Invalid typed time.");return t}parseTime(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);const n=this.extract(e,this.consumeTime);return this.currentLine++,{startTime:t,stopTime:n}}parseBandWidth(){const e=[];for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==s.BANDWIDTH)break;{const n=this.extractOneOrMore(t,d);if(":"!==t.value[t.cur])throw new Error("Invalid bandwidth field.");t.cur++;const r=this.extractOneOrMore(t,a);e.push({bwtype:n,bandwidth:r}),this.currentLine++}}return e}parseVersion(){const e=this.getCurrentRecord();if(e.type!==s.VERSION)throw new Error("first sdp record must be version");const t=e.value.slice(0,this.consumeOneOrMore(e.value,0,a));if(t.length!==e.value.length)throw new Error('invalid proto version, "v='.concat(e.value,'"'));return this.currentLine++,t}parseOrigin(){const e=this.getCurrentRecord();if(e.type!==s.ORIGIN)throw new Error("second line of sdp must be origin");const t=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const r=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const i=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);const o=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);const c=this.extract(e,this.consumeUnicastAddress);return this.currentLine++,{username:t,sessId:n,sessVersion:r,nettype:i,addrtype:o,unicastAddress:c}}parseSessionName(){const e=this.getCurrentRecord();if(e.type===s.SESSION_NAME){const t=this.extract(e,this.consumeText);return this.currentLine++,t}}parseInformation(){const e=this.getCurrentRecord();if(e.type!==s.INFORMATION)return;const t=this.extract(e,this.consumeText);return this.currentLine++,t}parseUri(){const e=this.getCurrentRecord();if(e.type===s.URI)return this.currentLine++,e.value}parseEmail(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.EMAIL)break;e.push(t.value),this.currentLine++}return e}parsePhone(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.PHONE)break;e.push(t.value),this.currentLine++}return e}parseConnection(){const e=this.getCurrentRecord();if(e.type===s.CONNECTION){const t=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);const r=this.extract(e,this.consumeAddress);return this.currentLine++,{nettype:t,addrtype:n,address:r}}}parseMedia(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeToken);this.consumeSpaceForRecord(e);let n=this.extract(e,this.consumePort);"/"===e.value[e.cur]&&(e.cur+=1,n+=this.extract(e,this.consumeInteger)),this.consumeSpaceForRecord(e);const r=[];for(r.push(this.extract(e,this.consumeToken));"/"===e.value[e.cur];)e.cur+=1,r.push(this.extract(e,this.consumeToken));if(0===r.length)throw new Error("Invalid proto");const i=this.parseFmt(e);return this.currentLine++,{mediaType:t,port:n,protos:r,fmts:i}}parseTimeFields(){const e=[];for(;this.getCurrentRecord().type===s.TIME;){const t=this.parseTime(),n=this.parseRepeat(),r=this.parseZone();e.push({time:t,repeats:n,zones:r})}return e}parseMediaDescription(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===s.MEDIA;){const t=this.parseMedia(),n=this.parseInformation(),r=this.parseConnections(),i=this.parseBandWidth(),o=this.parseKey(),s=this.parseMediaAttributes(t);e.push({media:t,information:n,connections:r,bandwidths:i,key:o,attributes:s})}return e}parseConnections(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===s.CONNECTION;)e.push(this.parseConnection());return e}parseFmt(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeToken))}catch(e){break}if(0===t.length)throw new Error("Invalid fmts");return t}extract(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];const o=t.call(this,e.value,e.cur,...r),s=e.value.slice(e.cur,o);return e.cur=o,s}extractOneOrMore(e,t){const n=this.consumeOneOrMore(e.value,e.cur,t),r=e.value.slice(e.cur,n);return e.cur=n,r}consumeSpaceForRecord(e){if(e.value[e.cur]!==o)throw new Error("Invalid space at ".concat(e.cur,"."));e.cur+=1}}class b extends S{constructor(){super(...arguments),E(this,"attributes",void 0),E(this,"digested",!1)}extractOneOrMore(e,t,n){const r=this.consumeOneOrMore(e.attValue,e._cur,t),i=e.attValue.slice(e._cur,r),[o,s]=n||[];if("number"==typeof o&&i.length<o)throw new Error("error in length, should be more or equal than ".concat(o," characters."));if("number"==typeof s&&i.length>s)throw new Error("error in length, should be less or equal than ".concat(s," characters."));return e._cur=r,i}consumeAttributeSpace(e){if(e.attValue[e._cur]!==o)throw new Error("Invalid space at ".concat(e._cur,"."));e._cur+=1}extract(e,t){if(!e.attValue)throw new Error("Nothing to extract from attValue.");for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];const o=t.call(this,e.attValue,e._cur,...r),s=e.attValue.slice(e._cur,o);return e._cur=o,s}atEnd(e){if(!e.attValue)throw new Error;return e._cur>=e.attValue.length}peekChar(e){if(!e.attValue)throw new Error;return e.attValue[e._cur]}peek(e,t){if(!e.attValue)throw new Error;for(let n=0;n<t.length;n++)if(t[n]!==e.attValue[e._cur+n])return!1;return!0}parseIceUfrag(e){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(e,m,[4,256])}parseIcePwd(e){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(e,m,[22,256])}parseIceOptions(e){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const t=[];for(;!this.atEnd(e);){t.push(this.extractOneOrMore(e,m));try{this.consumeAttributeSpace(e)}catch(t){if(this.atEnd(e))break;throw t}}this.attributes.iceOptions=t}parseFingerprint(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill);this.attributes.fingerprints.push({hashFunction:t,fingerprint:n})}parseExtmap(e){const t=this.extractOneOrMore(e,a);let n;"/"===this.peekChar(e)&&(this.extract(e,this.consume,"/"),n=this.extract(e,this.consumeToken)),this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeTill,o),i=_(_({entry:parseInt(t,10)},n&&{direction:n}),{},{extensionName:r});this.peekChar(e)===o&&(this.consumeAttributeSpace(e),i.extensionAttributes=this.extract(e,this.consumeTill)),this.attributes.extmaps.push(i)}parseSetup(e){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const t=this.extract(e,this.consumeTill);if("active"!==t&&"passive"!==t&&"actpass"!==t&&"holdconn"!==t)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=t}}class I extends b{constructor(){super(...arguments),E(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"group":this.parseGroup(e);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"fingerprint":this.parseFingerprint(e);break;case"setup":this.parseSetup(e);break;case"tls-id":this.parseTlsId(e);break;case"identity":this.parseIdentity(e);break;case"extmap":this.parseExtmap(e);break;case"msid-semantic":this.parseMsidSemantic(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing session attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(e){const t=this.extract(e,this.consumeToken),n=[];for(;!this.atEnd(e)&&this.peekChar(e)===o;)this.consumeAttributeSpace(e),n.push(this.extract(e,this.consumeToken));this.attributes.groups.push({semantic:t,identificationTag:n})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(e){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(e,g)}parseIdentity(e){const t=this.extractOneOrMore(e,y),n=[];for(;!this.atEnd(e)&&this.peekChar(e)===o;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.extract(e,this.consume,"=");const r=this.extractOneOrMore(e,(e=>e!==o&&f(e)));n.push({name:t,value:r})}this.attributes.identities.push({assertionValue:t,extensions:n})}parseMsidSemantic(e){this.peekChar(e)===o&&this.consumeAttributeSpace(e);const t={semantic:this.extract(e,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(e)}catch(e){break}if("*"===this.peekChar(e)){this.extract(e,this.consume,"*"),t.applyForAll=!0;break}{const n=this.extract(e,this.consumeTill,o);t.identifierList.push(n)}}this.attributes.msidSemantic=t}}class N extends b{constructor(e){super(),E(this,"attributes",void 0),-1!==e.protos.indexOf("RTP")||e.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"extmap":this.parseExtmap(e);break;case"setup":this.parseSetup(e);break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"candidate":this.parseCandidate(e);break;case"remote-candidate":this.parseRemoteCandidate(e);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(e);break;case"rtpmap":this.parseRtpmap(e);break;case"ptime":this.parsePtime(e);break;case"maxptime":this.parseMaxPtime(e);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(e);break;case"ssrc":this.parseSSRC(e);break;case"fmtp":this.parseFmtp(e);break;case"rtcp-fb":this.parseRtcpFb(e);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(e);break;case"mid":this.parseMid(e);break;case"msid":this.parseMsid(e);break;case"imageattr":this.parseImageAttr(e);break;case"rid":this.parseRid(e);break;case"simulcast":this.parseSimulcast(e);break;case"sctp-port":this.parseSctpPort(e);break;case"max-message-size":this.parseMaxMessageSize(e);break;case"ssrc-group":this.parseSSRCGroup(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing media attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}parseCandidate(e){const t=this.extractOneOrMore(e,m,[1,32]);this.consumeAttributeSpace(e);const n=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const i=this.extractOneOrMore(e,a,[1,10]);this.consumeAttributeSpace(e);const s=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const l=this.extract(e,this.consumePort);this.consumeAttributeSpace(e),this.extract(e,this.consume,"typ"),this.consumeAttributeSpace(e);const d={foundation:t,componentId:n,transport:r,priority:i,connectionAddress:s,port:l,type:this.extract(e,this.consumeToken),extension:{}};for(this.peek(e," raddr")&&(this.extract(e,this.consume," raddr"),this.consumeAttributeSpace(e),d.relAddr=this.extract(e,this.consumeAddress)),this.peek(e," rport")&&(this.extract(e,this.consume," rport"),this.consumeAttributeSpace(e),d.relPort=this.extract(e,this.consumePort));this.peekChar(e)===o;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e),d.extension[t]=this.extractOneOrMore(e,c)}this.attributes.candidates.push(d)}parseRemoteCandidate(e){const t=[];for(;;){const n=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumePort);t.push({componentId:n,connectionAddress:r,port:i});try{this.consumeAttributeSpace(e)}catch(e){break}}this.attributes.remoteCandidatesList.push(t)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,"/");this.extract(e,this.consume,"/");const r={encodingName:n,clockRate:this.extractOneOrMore(e,a)};this.atEnd(e)||"/"!==this.peekChar(e)||(this.extract(e,this.consume,"/"),r.encodingParameters=parseInt(this.extract(e,this.consumeTill),10));const i=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));i?i.rtpMap=r:this.attributes.payloads.push({payloadType:parseInt(t,10),rtpMap:r,rtcpFeedbacks:[]})}parsePtime(e){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(e,this.consumeTill)}parseMaxPtime(e){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(e,this.consumeTill)}parseDirection(e){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=e.attField}parseSSRC(e){const t=this.extractOneOrMore(e,a);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,":");let r;":"===this.peekChar(e)&&(this.extract(e,this.consume,":"),r=this.extract(e,this.consumeTill));const i=this.attributes.ssrcs.find((e=>e.ssrcId===parseInt(t,10)));i?i.attributes[n]=r:this.attributes.ssrcs.push({ssrcId:parseInt(t,10),attributes:{[n]:r}})}parseFmtp(e){const t=this.extract(e,this.consumeTill,o);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill),r={};n.split(";").forEach((e=>{let[t,n]=e.split("=");t=t.trim();const i="string"==typeof n?n.trim():null;"string"==typeof t&&t.length>0&&(r[t]=i)}));const i=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));i?i.fmtp={parameters:r}:this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[],fmtp:{parameters:r}})}parseFmtParameters(e){const t={},n=this.extract(e,this.consumeTill,"=");e._cur++;const r=this.extract(e,this.consumeTill,";");for(t[n]=r;";"===e.attValue[e._cur];){const n=this.extract(e,this.consumeTill,"=");e._cur++;const r=this.extract(e,this.consumeTill,";");t[n]=r}return t}parseRtcpFb(e){let t="";t="*"===this.peekChar(e)?this.extract(e,this.consume,"*"):this.extract(e,this.consumeTill,o),this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,o);let r;if("trr-int"===n)r={type:n,interval:this.extract(e,this.consumeTill)};else{const t={type:n};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.parameter=this.extract(e,this.consumeToken),this.peekChar(e)===o&&(t.additional=this.extract(e,this.consumeTill))),r=t}if("*"===t)this.attributes.rtcpFeedbackWildcards.push(r);else{const e=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));e?e.rtcpFeedbacks.push(r):this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[r]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(e){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const t={port:this.extract(e,this.consumePort)};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.netType=this.extractOneOrMore(e,d),this.consumeAttributeSpace(e),t.addressType=this.extractOneOrMore(e,d),this.consumeAttributeSpace(e),t.address=this.extract(e,this.consumeAddress)),this.attributes.rtcp=t}parseMsid(e){const t={id:this.extractOneOrMore(e,d,[1,64])};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.appdata=this.extractOneOrMore(e,d,[1,64])),this.attributes.msids.push(t)}parseImageAttr(e){this.attributes.imageattr.push(e.attValue)}parseRid(e){const t=this.extractOneOrMore(e,(e=>h(e)||a(e)||"_"===e||"-"===e));this.consumeAttributeSpace(e);const n={id:t,direction:this.extract(e,this.consumeToken),params:[]};if(this.peekChar(e)===o){if(this.consumeAttributeSpace(e),this.peek(e,"pt=")){this.extract(e,this.consume,"pt=");const t=[];for(;;){const n=this.extract(e,this.consumeToken);t.push(n);try{this.extract(e,this.consume,",")}catch(e){break}}n.payloads=t,this.peekChar(e)===o&&this.extract(e,this.consume,o)}for(;;){const t=this.extract(e,this.consumeToken);switch(t){case"depend":{const r={type:t,rids:this.extract(e,this.consume,"=").split(",")};n.params.push(r);break}default:{const r={type:t};"="===this.peekChar(e)&&(this.extract(e,this.consume,"="),r.val=this.extract(e,this.consumeTill,";")),n.params.push(r)}}try{this.extract(e,this.consume,";")}catch(e){break}}}this.attributes.rids.push(n)}parseSimulcast(e){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=e.attValue,this.extract(e,this.consumeTill)}parseSctpPort(e){this.attributes.sctpPort=this.extractOneOrMore(e,a,[1,5])}parseMaxMessageSize(e){this.attributes.maxMessageSize=this.extractOneOrMore(e,a,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(e){this.attributes.mid=this.extract(e,this.consumeToken)}parseSSRCGroup(e){const t=this.extract(e,this.consumeToken),n=[];for(;;)try{this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeInteger);n.push(parseInt(t,10))}catch(e){break}this.attributes.ssrcGroups.push({semantic:t,ssrcIds:n})}}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class w{constructor(){C(this,"eol",i)}print(e,t){let n="";return t&&(this.eol=t),n+=this.printVersion(e.version),n+=this.printOrigin(e.origin),n+=this.printSessionName(e.sessionName),n+=this.printInformation(e.information),n+=this.printUri(e.uri),n+=this.printEmail(e.emails),n+=this.printPhone(e.phones),n+=this.printConnection(e.connection),n+=this.printBandwidth(e.bandwidths),n+=this.printTimeFields(e.timeFields),n+=this.printKey(e.key),n+=this.printSessionAttributes(e.attributes),n+=this.printMediaDescription(e.mediaDescriptions),n}printVersion(e){return"v=".concat(e).concat(this.eol)}printOrigin(e){return"o=".concat(e.username," ").concat(e.sessId," ").concat(e.sessVersion," ").concat(e.nettype," ").concat(e.addrtype," ").concat(e.unicastAddress).concat(this.eol)}printSessionName(e){return e?"s=".concat(e).concat(this.eol):""}printInformation(e){return e?"i=".concat(e).concat(this.eol):""}printUri(e){return e?"u=".concat(e).concat(this.eol):""}printEmail(e){let t="";for(const n of e)t+="e=".concat(n).concat(this.eol);return t}printPhone(e){let t="";for(const n of e)t+="e=".concat(n).concat(this.eol);return t}printConnection(e){return e?"c=".concat(e.nettype," ").concat(e.addrtype," ").concat(e.address).concat(this.eol):""}printBandwidth(e){let t="";for(const n of e)t+="b=".concat(n.bwtype,":").concat(n.bandwidth).concat(this.eol);return t}printTimeFields(e){let t="";for(const n of e){t+="t=".concat(n.time.startTime," ").concat(n.time.startTime).concat(this.eol);for(const e of n.repeats)t+="r=".concat(e.repeatInterval," ").concat(e.typedTimes.join(" ")).concat(this.eol);n.zoneAdjustments&&(t+="z=",t+="z=".concat(n.zoneAdjustments.map((e=>"".concat(e.time," ").concat(e.back?"-":""," ").concat(e.typedTime))).join(" ")).concat(this.eol),t+=this.eol)}return t}printKey(e){return e?"k=".concat(e).concat(this.eol):""}printAttributes(e){let t="";for(const n of e)t+="a=".concat(n.attField).concat(n.attValue?":".concat(n.attValue):"").concat(this.eol);return t}printMediaDescription(e){let t="";for(const n of e)t+=this.printMedia(n.media),t+=this.printInformation(n.information),t+=this.printConnections(n.connections),t+=this.printBandwidth(n.bandwidths),t+=this.printKey(n.key),t+=this.printMediaAttributes(n);return t}printConnections(e){let t="";for(const n of e)t+=this.printConnection(n);return t}printMedia(e){return"m=".concat(e.mediaType," ").concat(e.port," ").concat(e.protos.join("/")," ").concat(e.fmts.join(" ")).concat(this.eol)}printSessionAttributes(e){return new A(this.eol).print(e)}printMediaAttributes(e){return new O(this.eol).print(e)}}class R{constructor(e){C(this,"eol",void 0),this.eol=e}printIceUfrag(e){return void 0===e?"":"a=ice-ufrag:".concat(e).concat(this.eol)}printIcePwd(e){return void 0===e?"":"a=ice-pwd:".concat(e).concat(this.eol)}printIceOptions(e){return void 0===e?"":"a=ice-options:".concat(e.join(o)).concat(this.eol)}printFingerprints(e){return e.length>0?e.map((e=>"a=fingerprint:".concat(e.hashFunction).concat(o).concat(e.fingerprint))).join(this.eol)+this.eol:""}printExtmap(e){return e.map((e=>"a=extmap:".concat(e.entry).concat(e.direction?"/".concat(e.direction):"").concat(o).concat(e.extensionName).concat(e.extensionAttributes?"".concat(o).concat(e.extensionAttributes):"").concat(this.eol))).join("")}printSetup(e){return void 0===e?"":"a=setup:".concat(e).concat(this.eol)}printUnrecognized(e){return e.map((e=>"a=".concat(e.attField).concat(e.attValue?":".concat(e.attValue):"").concat(this.eol))).join("")}}class A extends R{print(e){let t="";return t+=this.printGroups(e.groups),t+=this.printMsidSemantic(e.msidSemantic),t+=this.printIceLite(e.iceLite),t+=this.printIceUfrag(e.iceUfrag),t+=this.printIcePwd(e.icePwd),t+=this.printIceOptions(e.iceOptions),t+=this.printFingerprints(e.fingerprints),t+=this.printSetup(e.setup),t+=this.printTlsId(e.tlsId),t+=this.printIdentity(e.identities),t+=this.printExtmap(e.extmaps),t+=this.printUnrecognized(e.unrecognized),t}printGroups(e){let t="";return e.length>0&&(t+=e.map((e=>"a=group:".concat(e.semantic).concat(e.identificationTag.map((e=>"".concat(o).concat(e))).join("")).concat(this.eol))).join("")),t}printIceLite(e){return void 0===e?"":"a=ice-lite"+this.eol}printTlsId(e){return e?"a=tls-id:".concat(e).concat(this.eol):""}printIdentity(e){return 0===e.length?"":e.map((e=>"a=identity:".concat(e.assertionValue).concat(e.extensions.map((e=>"".concat(o).concat(e.name).concat(e.value?"=".concat(e.value):"")))))).join(this.eol)+this.eol}printMsidSemantic(e){if(!e)return"";let t="a=msid-semantic:".concat(e.semantic);return e.applyForAll?t+="".concat(o,"*"):e.identifierList.length>0&&(t+=e.identifierList.map((e=>"".concat(o).concat(e)))),t+this.eol}}class O extends R{print(e){const t=e.attributes;let n="";return n+=this.printRTCP(t.rtcp),n+=this.printIceUfrag(t.iceUfrag),n+=this.printIcePwd(t.icePwd),n+=this.printIceOptions(t.iceOptions),n+=this.printCandidates(t.candidates),n+=this.printRemoteCandidatesList(t.remoteCandidatesList),n+=this.printEndOfCandidates(t.endOfCandidates),n+=this.printFingerprints(t.fingerprints),n+=this.printSetup(t.setup),n+=this.printMid(t.mid),n+=this.printExtmap(t.extmaps),n+=this.printRTPRelated(t),n+=this.printPtime(t.ptime),n+=this.printMaxPtime(t.maxPtime),n+=this.printDirection(t.direction),n+=this.printSSRCGroups(t.ssrcGroups),n+=this.printSSRC(t.ssrcs),n+=this.printRTCPMux(t.rtcpMux),n+=this.printRTCPMuxOnly(t.rtcpMuxOnly),n+=this.printRTCPRsize(t.rtcpRsize),n+=this.printMSId(t.msids),n+=this.printImageattr(t.imageattr),n+=this.printRid(t.rids),n+=this.printSimulcast(t.simulcast),n+=this.printSCTPPort(t.sctpPort),n+=this.printMaxMessageSize(t.maxMessageSize),n+=this.printUnrecognized(t.unrecognized),n}printCandidates(e){return e.map((e=>"a=candidate:".concat(e.foundation).concat(o).concat(e.componentId).concat(o).concat(e.transport).concat(o).concat(e.priority).concat(o).concat(e.connectionAddress).concat(o).concat(e.port).concat(o,"typ").concat(o).concat(e.type).concat(e.relAddr?"".concat(o,"raddr").concat(o).concat(e.relAddr):"").concat(e.relPort?"".concat(o,"rport").concat(o).concat(e.relPort):"").concat(Object.keys(e.extension).map((t=>"".concat(o).concat(t).concat(o).concat(e.extension[t]))).join("")).concat(this.eol))).join("")}printRemoteCandidatesList(e){return e.map((e=>"a=remote-candidates:".concat(e.join(o)).concat(this.eol))).join("")}printEndOfCandidates(e){return void 0===e?"":"a=end-of-candidates"+this.eol}printRTPRelated(e){if(!e.payloads)return"";const t=e.payloads;let n="";n+=e.rtcpFeedbackWildcards.map((e=>this.printRTCPFeedback("*",e))).join("");for(const r of t)n+=this.printRtpMap(r.payloadType,r.rtpMap),n+=this.printFmtp(r.payloadType,r.fmtp),n+=r.rtcpFeedbacks.map((e=>this.printRTCPFeedback(r.payloadType,e))).join("");return n}printFmtp(e,t){if(!t)return"";const n=Object.keys(t.parameters);return 1===n.length&&null===t.parameters[n[0]]?"a=fmtp:".concat(e).concat(o).concat(n[0]).concat(this.eol):"a=fmtp:".concat(e).concat(o).concat(Object.keys(t.parameters).map((e=>"".concat(e,"=").concat(t.parameters[e]))).join(";")).concat(this.eol)}printRtpMap(e,t){return t?"a=rtpmap:".concat(e).concat(o).concat(t.encodingName,"/").concat(t.clockRate).concat(t.encodingParameters?"/".concat(t.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(e,t){let n="a=rtcp-fb:".concat(e).concat(o),r=t;return"trr-int"===r.type?n+="ttr-int".concat(o).concat(r.interval):(n+="".concat(r.type),r.parameter&&(n+="".concat(o).concat(r.parameter),r.additional&&(n+="".concat(o).concat(r.additional)))),n+this.eol}printPtime(e){return void 0===e?"":"a=ptime:".concat(e).concat(this.eol)}printMaxPtime(e){return void 0===e?"":"a=maxptime:".concat(e).concat(this.eol)}printDirection(e){return void 0===e?"":"a=".concat(e).concat(this.eol)}printSSRC(e){return e.map((e=>Object.keys(e.attributes).map((t=>"a=ssrc:".concat(e.ssrcId.toString(10)).concat(o).concat(t).concat(e.attributes[t]?":".concat(e.attributes[t]):"").concat(this.eol))).join(""))).join("")}printRTCPMux(e){return void 0===e?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(e){return void 0===e?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(e){return void 0===e?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(e){if(void 0===e)return"";let t="a=rtcp:".concat(e.port);return e.netType&&(t+="".concat(o).concat(e.netType)),e.addressType&&(t+="".concat(o).concat(e.addressType)),e.address&&(t+="".concat(o).concat(e.address)),t+this.eol}printMSId(e){return e.map((e=>"a=msid:".concat(e.id).concat(e.appdata?"".concat(o).concat(e.appdata):"").concat(this.eol))).join("")}printImageattr(e){return e.map((e=>"a=imageattr:".concat(e).concat(this.eol))).join("")}printRid(e){return e.map((e=>{let t="a=rid:".concat(e.id).concat(o).concat(e.direction);return e.payloads&&(t+="".concat(o,"pt=").concat(e.payloads.join(","))),e.params.length>0&&(t+="".concat(o).concat(e.params.map((e=>"depend"===e.type?"depend=".concat(e.rids.join(",")):"".concat(e.type,"=").concat(e.val))).join(";"))),t+this.eol})).join("")}printSimulcast(e){return void 0===e?"":"a=simulcast:".concat(e).concat(this.eol)}printSCTPPort(e){return void 0===e?"":"a=sctp-port:".concat(e).concat(this.eol)}printMaxMessageSize(e){return void 0===e?"":"a=max-message-size:".concat(e).concat(this.eol)}printMid(e){return void 0===e?"":"a=mid:".concat(e).concat(this.eol)}printSSRCGroups(e){return e.map((e=>"a=ssrc-group:".concat(e.semantic).concat(e.ssrcIds.map((e=>"".concat(o).concat(e.toString(10)))).join("")).concat(this.eol))).join("")}}function M(e){return(new T).parse(e)}function D(e,t){return(new w).print(e,t)}}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(8)})()}(KP);var QP=KP.exports;function JP(e){if(Array.isArray(e))return e.map((e=>e));if(!XP(e))return e;const t={};for(const n in e){const r=e[n];XP(r)||Array.isArray(r)?t[n]=JP(r):t[n]=r}return t}function XP(e){return!("object"!=typeof e||Array.isArray(e)||!e)}class ZP{constructor(e){oh(this,"input",[]),oh(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}}const $P={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},ej={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:$P,remoteCandidate:$P}},tj={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},nj={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0,qpSumPerFrame:0},rj={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0},ij={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function oj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oj(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class aj{constructor(e,t){oh(this,"onFirstVideoReceived",void 0),oh(this,"onFirstVideoDecoded",void 0),oh(this,"onFirstAudioReceived",void 0),oh(this,"onFirstVideoDecodedTimeout",void 0),oh(this,"onFirstAudioDecoded",void 0),oh(this,"onSelectedLocalCandidateChanged",void 0),oh(this,"onSelectedRemoteCandidateChanged",void 0),oh(this,"videoIsReady",!1),oh(this,"videoIsReady2",{}),oh(this,"pc",void 0),oh(this,"options",void 0),oh(this,"intervalTimer",void 0),oh(this,"stats",JP(ej)),oh(this,"isFirstVideoReceived",{}),oh(this,"isFirstVideoDecoded",{}),oh(this,"isFirstAudioReceived",{}),oh(this,"isFirstAudioDecoded",{}),oh(this,"isFirstVideoDecodedTimeout",{}),oh(this,"lossRateWindowStats",[]),this.pc=e,this.options=t,this.intervalTimer=window.setInterval((async()=>{this.updateStats()}),this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new cv((e=>{e({local:sj({},$P),remote:sj({},$P)})}))}setVideoIsReady(e){this.videoIsReady=e}setVideoIsReady2(e,t){this.videoIsReady2[e]=t}getVideoIsReady(e){return this.videoIsReady2[e]||!1}setIsFirstAudioDecoded(e){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(e){this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const t=this.lossRateWindowStats.length,n=["videoSend","audioSend","videoRecv","audioRecv"];let r=0,i=0,o=0,s=0;for(const a of n)e[a].forEach(((e,n)=>{if(!this.lossRateWindowStats[t-1][a][n]||!this.lossRateWindowStats[0][a][n])return;const c=this.lossRateWindowStats[t-1][a][n].packets-this.lossRateWindowStats[0][a][n].packets,l=this.lossRateWindowStats[t-1][a][n].packetsLost-this.lossRateWindowStats[0][a][n].packetsLost;"videoSend"===a||"audioSend"===a?(r+=c,o+=l):(i+=c,s+=l),Number.isNaN(c)||Number.isNaN(c)?e.packetLostRate=0:e.packetLostRate=c<=0||l<=0?0:l/(c+l)}));e.sendPacketLossRate=r<=0||o<=0?0:o/(r+o),e.recvPacketLossRate=i<=0||s<=0?0:s/(i+s)}}function cj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cj(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class dj extends aj{constructor(){super(...arguments),oh(this,"_stats",ej),oh(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){const e=await this._getStats(),t=this.statsResponsesToObjects(e);this._stats=JP(ej);const n=t.filter((e=>"ssrc"===e.type));this.processSSRCStats(n);const r=t.find((e=>"VideoBwe"===e.type));r&&this.processBandwidthStats(r),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)}processSSRCStats(e){e.forEach((e=>{var t;const n=Rr(t=e.id).call(t,"send");switch("".concat(e.mediaType,"_").concat(n?"send":"recv")){case"video_send":{const t=JP(nj);t.codec=e.googCodecName,t.adaptionChangeReason="none",e.googCpuLimitedResolution&&(t.adaptionChangeReason="cpu"),e.googBandwidthLimitedResolution&&(t.adaptionChangeReason="bandwidth"),t.avgEncodeMs=Number(e.googAvgEncodeMs),t.inputFrame={width:Number(e.googFrameWidthInput)||Number(e.googFrameWidthSent),height:Number(e.googFrameHeightInput)||Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.sentFrame={width:Number(e.googFrameWidthSent),height:Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.firsCount=Number(e.googFirReceived),t.nacksCount=Number(e.googNacksReceived),t.plisCount=Number(e.googPlisReceived),t.frameCount=Number(e.framesEncoded),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.videoSend.push(t),this._stats.rtt=t.rttMs;break}case"video_recv":{const t=JP(tj),n=this.lastDecodeVideoReceiverStats.get(Number(e.ssrc));if(t.codec=e.googCodecName,t.targetDelayMs=Number(e.googTargetDelayMs),t.renderDelayMs=Number(e.googRenderDelayMs),t.currentDelayMs=Number(e.googCurrentDelayMs),t.minPlayoutDelayMs=Number(e.googMinPlayoutDelayMs),t.decodeMs=Number(e.googDecodeMs),t.maxDecodeMs=Number(e.googMaxDecodeMs),t.receivedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateReceived)},t.decodedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateDecoded)},t.decodeFrameRate=Number(e.googFrameRateDecoded),t.outputFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateOutput)},t.jitterBufferMs=Number(e.googJitterBufferMs),t.firsCount=Number(e.googFirsSent),t.nacksCount=Number(e.googNacksSent),t.plisCount=Number(e.googPlisSent),t.framesDecodeCount=Number(e.framesDecoded),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,t.decodedFrame.width,t.decodedFrame.height),this.isFirstVideoDecoded[t.ssrc]=!0),n){const r=n.stats,i=Date.now()-n.lts;t.framesDecodeFreezeTime=r.framesDecodeFreezeTime,t.framesDecodeInterval=r.framesDecodeInterval,t.framesDecodeCount>r.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(n.lts=Date.now(),t.framesDecodeInterval=i,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc,10))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<n.stats.framesDecodeCount&&(t.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:lj({},t),lts:Date.now()}),this._stats.videoRecv.push(t);break}case"audio_recv":{const t=JP(ij);t.codec=e.googCodecName,t.outputLevel=Math.abs(Number(e.audioOutputLevel))/32767,t.decodingCNG=Number(e.googDecodingCNG),t.decodingCTN=Number(e.googDecodingCTN),t.decodingCTSG=Number(e.googDecodingCTSG),t.decodingNormal=Number(e.googDecodingNormal),t.decodingPLC=Number(e.googDecodingPLC),t.decodingPLCCNG=Number(e.googDecodingPLCCNG),t.expandRate=Number(e.googExpandRate),t.accelerateRate=Number(e.googAccelerateRate),t.preemptiveExpandRate=Number(e.googPreemptiveExpandRate),t.secondaryDecodedRate=Number(e.googSecondaryDecodedRate),t.speechExpandRate=Number(e.googSpeechExpandRate),t.preferredJitterBufferMs=Number(e.googPreferredJitterBufferMs),t.jitterBufferMs=Number(e.googJitterBufferMs),t.jitterMs=Number(e.googJitterReceived),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.receivedFrames=Number(e.googDecodingCTN)||Number(e.packetsReceived),t.droppedFrames=Number(e.googDecodingPLC)+Number(e.googDecodingPLCCNG)||Number(e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.decodingNormal>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),this._stats.audioRecv.push(t);break}case"audio_send":{const t=JP(rj);t.codec=e.googCodecName,t.inputLevel=Math.abs(Number(e.audioInputLevel))/32767,t.aecReturnLoss=Number(e.googEchoCancellationReturnLoss||0),t.aecReturnLossEnhancement=Number(e.googEchoCancellationReturnLossEnhancement||0),t.residualEchoLikelihood=Number(e.googResidualEchoLikelihood||0),t.residualEchoLikelihoodRecentMax=Number(e.googResidualEchoLikelihoodRecentMax||0),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.rtt=t.rttMs,this._stats.audioSend.push(t);break}}}))}_getStats(){return new cv(((e,t)=>{this.pc.getStats(e,t)}))}statsResponsesToObjects(e){const t=[];return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp.valueOf().toString(),type:e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t.push(n)})),t}}function uj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uj(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class pj extends aj{constructor(){super(...arguments),oh(this,"_stats",ej),oh(this,"report",void 0),oh(this,"lastDecodeVideoReceiverStats",new Map),oh(this,"lastVideoFramesRecv",new Map),oh(this,"lastVideoFramesSent",new Map),oh(this,"lastVideoFramesDecode",new Map),oh(this,"lastVideoJBDelay",new Map),oh(this,"lastAudioJBDelay",new Map),oh(this,"mediaBytesSent",new Map),oh(this,"mediaBytesRetransmit",new Map),oh(this,"mediaBytesTargetEncode",new Map),oh(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=JP(ej),this.report.forEach((e=>{switch(e.type){case ab.OUTBOUND:case ab.INBOUND:{const t=e.mediaType||e.kind,n=!t&&"frameWidth"in e,r=!t&&!("frameWidth"in e);e.type===ab.OUTBOUND?"audio"===t||r?this.processAudioOutboundStats(e):("video"===t||n)&&this.processVideoOutboundStats(e):e.type===ab.INBOUND&&("audio"===t||r?this.processAudioInboundStats(e):("video"===t||n)&&this.processVideoInboundStats(e));break}case ab.TRANSPORT:{const t=this.report.get(e.selectedCandidatePairId);t&&this.processCandidatePairStats(t);break}case ab.CANDIDATE_PAIR:e.selected&&this.processCandidatePairStats(e)}})),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){const e=await this.pc.getStats(),t={local:hj({},$P),remote:hj({},$P)};return e.forEach((n=>{let r;if(n.type===ab.TRANSPORT&&(r=e.get(n.selectedCandidatePairId)),n.type===ab.CANDIDATE_PAIR&&n.selected&&(r=n),r){const n=(e,t)=>{e.type=t.type,e.id=t.id,t.address&&(e.address=t.address),t.candidateType&&(e.candidateType=t.candidateType),t.port&&(e.port=t.port),t.priority&&(e.priority=t.priority),t.protocol&&(e.protocol=t.protocol),t.relayProtocol&&(e.relayProtocol=t.relayProtocol)};if(r.localCandidateId){const i=e.get(r.localCandidateId);i&&n(t.local,i)}if(r.remoteCandidateId){const i=e.get(r.remoteCandidateId);i&&n(t.remote,i)}}})),t}processCandidatePairStats(e){if(this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach((t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.audioSend.forEach((t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.selectedCandidatePair.id=e.id,e.localCandidateId){const t=this.report.get(e.localCandidateId);t&&this.processCandidateStats(t)}if(e.remoteCandidateId){const t=this.report.get(e.remoteCandidateId);t&&this.processCandidateStats(t)}}processCandidateStats(e){let t;e.type===ab.LOCAL_CANDIDATE&&(t=this._stats.selectedCandidatePair.localCandidate),e.type===ab.REMOTE_CANDIDATE&&(t=this._stats.selectedCandidatePair.remoteCandidate),t&&(t.type=e.type,t.id=e.id,e.address&&(t.address=e.address),e.candidateType&&(t.candidateType=e.candidateType),e.port&&(t.port=e.port),e.priority&&(t.priority=e.priority),e.protocol&&(t.protocol=e.protocol),e.relayProtocol&&(t.relayProtocol=e.relayProtocol),e.type===ab.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==t.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(hj({},t),hj({},this.stats.selectedCandidatePair.localCandidate)),e.type===ab.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==t.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(hj({},t),hj({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(e){let t=this._stats.audioRecv.find((t=>t.ssrc===e.ssrc));t||(t=JP(ij),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,this.processAudioTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.outputLevel&&t.outputLevel>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),"number"==typeof e.concealedSamples&&(t.concealedSamples=e.concealedSamples)}processVideoInboundStats(e){let t=this._stats.videoRecv.find((t=>t.ssrc===e.ssrc));t||(t=JP(tj),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded,t.totalInterFrameDelay=e.totalInterFrameDelay,t.totalSquaredInterFrameDelay=e.totalSquaredInterFrameDelay;const n=this.lastDecodeVideoReceiverStats.get(t.ssrc),r=this.lastVideoFramesDecode.get(t.ssrc),i=Date.now();if(t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]){const e=t.decodedFrame?t.decodedFrame.width:0,n=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,e,n),this.isFirstVideoDecoded[t.ssrc]=!0}if(n){const r=n.stats,o=i-n.lts;t.framesDecodeFreezeTime=r.framesDecodeFreezeTime,t.framesDecodeInterval=r.framesDecodeInterval,!this.isFirstVideoDecoded[t.ssrc]&&o>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[t.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(t.ssrc),this.isFirstVideoDecodedTimeout[t.ssrc]=!0),t.framesDecodeCount>r.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(n.lts=Date.now(),t.framesDecodeInterval=o,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<r.framesDecodeCount&&(t.framesDecodeInterval=0),e.framesDecoded&&e.qpSum&&(n.stats.framesDecodeCount>e.framesDecoded?t.qpSumPerFrame=e.qpSum/e.framesDecoded:t.qpSumPerFrame=(e.qpSum-n.qpSum)/(e.framesDecoded-n.stats.framesDecodeCount))}r&&i-r.lts>=800?(t.decodeFrameRate=Math.round((t.framesDecodeCount-r.count)/((i-r.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:i,rate:t.decodeFrameRate})):r?t.decodeFrameRate=r.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:i,rate:0}),e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime),this.processVideoTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:hj({},t),lts:n?n.lts:Date.now(),qpSum:e.qpSum})}processVideoOutboundStats(e){let t=this._stats.videoSend.find((t=>t.ssrc===e.ssrc));t||(t=JP(nj),this._stats.videoSend.push(t));const n=this.mediaBytesSent.get(e.ssrc);if(n)n.add(e.bytesSent);else{const t=new ZP(10);t.add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,t)}if(void 0!==e.retransmittedBytesSent){const t=this.mediaBytesRetransmit.get(e.ssrc);if(t)t.add(e.retransmittedBytesSent);else{const t=new ZP(10);t.add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,t)}}if(e.totalEncodedBytesTarget){const t=this.mediaBytesTargetEncode.get(e.ssrc);if(t)t.add(e.totalEncodedBytesTarget);else{const t=new ZP(10);t.add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,t)}}if(t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,t.scalabilityMode=e.scalabilityMode,e.totalEncodeTime&&e.framesEncoded){const n=this.lastEncoderMs.get(e.ssrc);if(!n||n.lastFrameCount>e.framesEncoded)t.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{const r=e.framesEncoded-n.lastFrameCount,i=e.totalEncodeTime-n.lastEncoderTime;t.avgEncodeMs=1e3*i/r}}if(e.framesEncoded&&e.qpSum){const n=this.lastEncoderMs.get(e.ssrc);!n||n.lastFrameCount>e.framesEncoded?t.qpSumPerFrame=e.qpSum/e.framesEncoded:t.qpSumPerFrame=(e.qpSum-n.lastQpSum)/(e.framesEncoded-n.lastFrameCount)}if(this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lastQpSum:e.qpSum,lts:Date.now()}),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),this.processVideoTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const n=this.findRemoteStatsId(e.ssrc,ab.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}processAudioOutboundStats(e){let t=this._stats.audioSend.find((t=>t.ssrc===e.ssrc));if(t||(t=JP(rj),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),this.processAudioTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const n=this.findRemoteStatsId(e.ssrc,ab.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}findRemoteStatsId(e,t){var n;const r=Array.from(Ob(n=this.report).call(n)).find((n=>n.type===t&&n.ssrc===e));return r?r.id:null}processVideoMediaSource(e,t){const n=this.report.get(e);n&&n.width&&n.height&&n.framesPerSecond&&(t.inputFrame={width:n.width,height:n.height,frameRate:n.framesPerSecond})}processAudioMediaSource(e,t){const n=this.report.get(e);n&&(t.inputLevel=n.audioLevel)}processVideoTrackSenderStats(e,t,n){var r,i,o,s;const a=t?this.report.get(t):void 0,c=null!==(r=null==a?void 0:a.framesSent)&&void 0!==r?r:e.framesSent;if("number"!=typeof c)return;let l=null!==(i=null==a?void 0:a.frameWidth)&&void 0!==i?i:e.frameWidth,d=null!==(o=null==a?void 0:a.frameHeight)&&void 0!==o?o:e.frameHeight,u=null!==(s=null==a?void 0:a.framesPerSecond)&&void 0!==s?s:e.framesPerSecond;if("number"==typeof l&&"number"==typeof d||(l=0,d=0),null==u){const e=Date.now(),t=this.lastVideoFramesSent.get(n.ssrc);t&&e-t.lts>=800?(u=Math.round((c-t.count)/((e-t.lts)/1e3)),this.lastVideoFramesSent.set(n.ssrc,{count:c,lts:e,rate:u})):t?u=t.rate:this.lastVideoFramesSent.set(n.ssrc,{count:c,lts:e,rate:0})}n.sentFrame={width:l,height:d,frameRate:Math.max(0,u)}}processVideoTrackReceiverStats(e,t,n){var r,i,o,s,a;const c=t?this.report.get(t):void 0,l=null!==(r=null==c?void 0:c.framesReceived)&&void 0!==r?r:e.framesReceived,d=null!==(i=null==c?void 0:c.frameWidth)&&void 0!==i?i:e.frameWidth,u=null!==(o=null==c?void 0:c.frameHeight)&&void 0!==o?o:e.frameHeight,h=null!==(s=null==c?void 0:c.jitterBufferDelay)&&void 0!==s?s:e.jitterBufferDelay,p=null!==(a=null==c?void 0:c.jitterBufferEmittedCount)&&void 0!==a?a:e.jitterBufferEmittedCount;if("number"==typeof l){const e=this.lastVideoFramesRecv.get(n.ssrc),t=Date.now();n.framesReceivedCount=l;let r=0;e&&t-e.lts>=800?(r=Math.round((l-e.count)/((t-e.lts)/1e3)),this.lastVideoFramesRecv.set(n.ssrc,{count:l,lts:t,rate:r})):e?r=e.rate:this.lastVideoFramesRecv.set(n.ssrc,{count:l,lts:t,rate:0}),n.receivedFrame={width:d||0,height:u||0,frameRate:r||0},n.decodedFrame={width:d||0,height:u||0,frameRate:n.decodeFrameRate||0},n.outputFrame={width:d||0,height:u||0,frameRate:n.decodeFrameRate||0}}if(h&&p){const e=this.lastVideoJBDelay.get(n.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let t=e.jitterBufferMs;const r=p-e.jitterBufferEmittedCount;r>0&&(t=1e3*(h-e.jitterBufferDelay)/r),n.jitterBufferMs=t,n.currentDelayMs=Math.round(t),this.lastVideoJBDelay.set(n.ssrc,{jitterBufferDelay:h,jitterBufferEmittedCount:p,jitterBufferMs:n.currentDelayMs})}}processAudioTrackSenderStats(e,t,n){var r,i,o,s;const a=t?this.report.get(t):void 0,c=null!==(r=null!==(i=null==a?void 0:a.echoReturnLoss)&&void 0!==i?i:e.echoReturnLoss)&&void 0!==r?r:0,l=null!==(o=null!==(s=null==a?void 0:a.echoReturnLossEnhancement)&&void 0!==s?s:e.echoReturnLossEnhancement)&&void 0!==o?o:0;n.aecReturnLoss=c,n.aecReturnLossEnhancement=l}processAudioTrackReceiverStats(e,t,n){var r,i,o,s,a,c,l;const d=t?this.report.get(t):void 0,u=null!==(r=null==d?void 0:d.removedSamplesForAcceleration)&&void 0!==r?r:e.removedSamplesForAcceleration,h=null!==(i=null==d?void 0:d.totalSamplesReceived)&&void 0!==i?i:e.totalSamplesReceived,p=null!==(o=null==d?void 0:d.jitterBufferDelay)&&void 0!==o?o:e.jitterBufferDelay,f=null!==(s=null==d?void 0:d.jitterBufferEmittedCount)&&void 0!==s?s:e.jitterBufferEmittedCount,m=null!==(a=null==d?void 0:d.audioLevel)&&void 0!==a?a:null==e?void 0:e.audioLevel,g=null!==(c=null==d?void 0:d.totalSamplesDuration)&&void 0!==c?c:null==e?void 0:e.totalSamplesDuration,y=null!==(l=null==d?void 0:d.concealedSamples)&&void 0!==l?l:e.concealedSamples;if(u&&h&&(n.accelerateRate=u/h),p&&f){const e=this.lastAudioJBDelay.get(n.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let t=e.jitterBufferMs;const r=f-e.jitterBufferEmittedCount;r>0&&(t=1e3*(p-e.jitterBufferDelay)/r),n.jitterBufferMs=Math.round(t),this.lastAudioJBDelay.set(n.ssrc,{jitterBufferDelay:p,jitterBufferEmittedCount:f,jitterBufferMs:n.jitterBufferMs})}n.outputLevel=m;let v=1920;g&&h&&(v=h/g/50,n.receivedFrames=Math.round(h/v)),y&&(n.droppedFrames=Math.round(y/v))}processRemoteInboundStats(e,t){const n=this.report.get(e);n&&(t.packetsLost=n.packetsLost,n.roundTripTime&&(t.rttMs=1e3*n.roundTripTime),n.jitter&&(t.jitterMs=1e3*n.jitter),n.timestamp&&(t.timestamp=n.timestamp))}getCodecFromCodecStats(e){const t=this.report.get(e);if(!t)return"";const n=t.mimeType.match(/\/(.*)$/);return n&&n[1]?n[1]:""}updateSendBitrate(){let e=0,t=null,n=null;this.mediaBytesSent.forEach((t=>{e+=t.diffMean()})),this.mediaBytesRetransmit.forEach((e=>{t=null===t?e.diffMean():t+e.diffMean()})),this.mediaBytesTargetEncode.forEach((e=>{n=null===n?e.diffMean():n+e.diffMean()}));const r=null!==t?e-t:e;this._stats.bitrate={actualEncoded:8*r/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},null!==t&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),null!==n&&(this._stats.bitrate.targetEncoded=8*n/(this.options.updateInterval/1e3))}}class fj extends aj{updateStats(){return cv.resolve()}}function mj(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e4;const o=function(){const e=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return e&&e[0]?Number(e[0].split("/")[1]):null}();return o?o<76?new dj(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):new pj(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):function(e){return!!window.RTCStatsReport&&e.getStats()instanceof cv}(e)?new pj(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):new fj(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i})}function gj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gj(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vj(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;const{filterRTX:i,filterVideoFec:o,filterAudioFec:s,filterAudioCodec:a,filterVideoCodec:c}=t,{useXR:l}=n;let d=[],u=[],h=[],p=[],f=!1,m=!1;if(QP.parse(e).mediaDescriptions.forEach((e=>{r&&r!==e.attributes.direction||("video"!==e.media.mediaType||f||(u=e.attributes.payloads,p=e.attributes.extmaps,f=!0),"audio"!==e.media.mediaType||m||(d=e.attributes.payloads,h=e.attributes.extmaps,m=!0))})),!p||0===u.length)throw new Error("Cannot get video capabilities from SDP.");if(!h||0===d.length)throw new Error("Cannot get audio capabilities from SDP.");u.forEach((e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),l&&e.rtcpFeedbacks.push({type:"rrtr"})})),d.forEach((e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),l&&e.rtcpFeedbacks.push({type:"rrtr"})})),i&&(d=d.filter((e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})),u=u.filter((e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())}))),o&&(u=u.filter((e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),s&&(d=d.filter((e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),a&&(null==a?void 0:a.length)>0&&(d=d.filter((e=>{var t;return Rr(a).call(a,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")}))),c&&(null==c?void 0:c.length)>0&&(u=u.filter((e=>{var t;return Rr(c).call(c,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")})));const g=ST("UNSUPPORTED_VIDEO_CODEC");return g&&g.length>0&&(u=u.filter((e=>!(e.rtpMap&&Rr(g).call(g,e.rtpMap.encodingName.toLowerCase()))))),{audioCodecs:d,videoCodecs:u,audioExtensions:h,videoExtensions:p}}function _j(e){const t=QP.parse(e);let n,r;for(const i of t.mediaDescriptions){if(!n){const e=i.attributes.iceUfrag,t=i.attributes.icePwd;if(!e||!t)throw new Error("Cannot get iceUfrag or icePwd from SDP.");n={iceUfrag:e,icePwd:t}}if(!r){const e=i.attributes.fingerprints;e.length>0&&(r={fingerprints:e})}}if(!r&&t.attributes.fingerprints.length>0&&(r={fingerprints:t.attributes.fingerprints}),!r||!n)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:n,dtlsParameters:r}}function Ej(e,t){const n=[],r=e.attributes.ssrcGroups.filter((e=>"FID"===e.semantic)),i=e.attributes.ssrcGroups.find((e=>"SIM"===e.semantic)),o=e.attributes.ssrcs;if(i)i.ssrcIds.forEach((e=>{var i;const o=null===(i=r.find((t=>t.ssrcIds[0]===e)))||void 0===i?void 0:i.ssrcIds[1];n.push({ssrcId:e,rtx:t?o:void 0})}));else if(r.length>0){const e=r[0].ssrcIds[0],i=r[0].ssrcIds[1];n.push({ssrcId:e,rtx:t?i:void 0})}else{if(0===o.length)throw new Error("No ssrcs found on local media description.");n.push({ssrcId:o[0].ssrcId})}return n}function Sj(e,t){const{cname:n}=e;let r;t&&t.ip&&"number"==typeof t.port?(r=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip,port:t.port.toString(),type:"host",extension:{}}],VT.debug("Using remote candidate from AP ".concat(t.ip,":").concat(t.port)),t.ip6&&(r.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip6,port:t.port.toString(),type:"host",extension:{}}),VT.debug("Using IPV6 remote candidate from AP ".concat(t.ip6,":").concat(t.port)))):r=e.iceParameters.candidates.map((e=>({foundation:e.foundation,componentId:"1",transport:e.protocol,priority:e.priority.toString(),connectionAddress:e.ip,port:e.port.toString(),type:e.type,extension:{}})));const i={fingerprints:e.dtlsParameters.fingerprints.map((e=>({hashFunction:e.algorithm,fingerprint:e.fingerprint})))},o={iceUfrag:e.iceParameters.iceUfrag,icePwd:e.iceParameters.icePwd};let s;switch(e.dtlsParameters.role){case"server":s="passive";break;case"client":s="active";break;case"auto":s="actpass"}return{dtlsParameters:i,iceParameters:o,candidates:r,rtpCapabilities:Dj(e.rtpCapabilities),setup:s,cname:n}}function Tj(e,t,n){const r=[],i=[];return e.forEach((e=>{let{ssrcId:o,rtx:s}=e;const a=rE(8,"track-"),c={ssrcId:o,attributes:yj({label:a,mslabel:n=n||rE(10,""),msid:"".concat(n," ").concat(a)},t&&{cname:t})};if(r.push(c),void 0!==s){const e={ssrcId:s,attributes:yj({label:a,mslabel:n,msid:"".concat(n," ").concat(a)},t&&{cname:t})};r.push(e),i.push({semantic:"FID",ssrcIds:[o,s]})}})),e.length>1&&i.push({semantic:"SIM",ssrcIds:e.map((e=>{let{ssrcId:t}=e;return t}))}),{ssrcs:r,ssrcGroups:i}}function bj(e,t){t instanceof eR&&e.attributes.payloads.forEach((e=>{var n;const r=null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase();if(!r||-1===["opus","pcmu","pcma","g722"].indexOf(r))return;e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.minptime="10",e.fmtp.parameters.useinbandfec="1";const i=t._encoderConfig;i&&"pcmu"!==r&&"pcma"!==r&&"g722"!==r&&(i.bitrate&&!Rv()&&(e.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*i.bitrate))),i.sampleRate&&(e.fmtp.parameters.maxplaybackrate="".concat(i.sampleRate),e.fmtp.parameters["sprop-maxcapturerate"]="".concat(i.sampleRate)),i.stereo&&(e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"))}))}function Ij(e){const t=e.attributes.unrecognized.findIndex((e=>"x-google-flag"===e.attField&&"conference"===e.attValue));-1!==t&&e.attributes.unrecognized.splice(t,1)}function Nj(e,t){var n;if(!(t instanceof SR&&t._encoderConfig&&-1===t._hints.indexOf(VC.SCREEN_TRACK)))return;const r=t._encoderConfig;bC().supportMinBitrate&&r.bitrateMin&&e.attributes.payloads.forEach((e=>{var t,n;Rr(t=["h264","h265","vp8","vp9","av1"]).call(t,(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-min-bitrate"]="".concat(r.bitrateMin))})),bC().supportMinBitrate&&!Rr(n=t._hints).call(n,VC.LOW_STREAM)&&r.bitrateMax&&e.attributes.payloads.forEach((e=>{var t,n;Rr(t=["h264","h265","vp8","vp9","av1"]).call(t,(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-start-bitrate"]="".concat(ST("X_GOOGLE_START_BITRATE")||Math.floor(r.bitrateMax)))}))}function Cj(e){if("video"!==e.media.mediaType)return;const t=Ev();if(t.name!==mv.SAFARI&&t.os!==fv.IOS)return;const n=e.attributes.extmaps.findIndex((e=>/video-orientation/g.test(e.extensionName)));-1!==n&&e.attributes.extmaps.splice(n,1)}function wj(e,t,n){if(!t)return;let r,i;if("video"===e.media.mediaType?(r=n.videoExtensions,i=n.videoCodecs):(r=n.audioExtensions,i=n.audioCodecs),!0===t.twcc){const t=r.find((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName));if(t){e.attributes.extmaps.find((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName))||e.attributes.extmaps.push({entry:t.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"});const n=function(e,t){return t.filter((t=>!!e.find((e=>e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((e=>"transport-cc"===e.type))))))}(i,e.attributes.payloads);n.forEach((e=>{e.rtcpFeedbacks.find((e=>"transport-cc"===e.type))||e.rtcpFeedbacks.push({type:"transport-cc"})}))}}else if(!1===t.twcc){const t=e.attributes.extmaps.findIndex((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName));-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"transport-cc"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}if(!0===t.remb){const t=r.find((e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName));if(t){e.attributes.extmaps.find((e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName))||e.attributes.extmaps.push({entry:t.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"});const n=function(e,t){return t.filter((t=>!!e.find((e=>e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((e=>"goog-remb"===e.type))))))}(i,e.attributes.payloads);n.forEach((e=>{e.rtcpFeedbacks.find((e=>"goog-remb"===e.type))||e.rtcpFeedbacks.push({type:"goog-remb"})}))}}else if(!1===t.remb){const t=e.attributes.extmaps.findIndex((e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName));-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"goog-remb"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}}function Rj(e,t,n){if(Rv())return;if("video"!==e.media.mediaType)return;if(!(t instanceof SR))return;if("vp9"!==n&&"vp8"!==n)return;if("vp8"===n&&!ST("SIMULCAST"))return;if(void 0===t._scalabilityMode||t._scalabilityMode.numSpatialLayers<=1)return;const r="vp8"===n?2:t._scalabilityMode.numSpatialLayers,i=e.attributes.ssrcs[0],o=e.attributes.ssrcGroups.find((e=>"FID"===e.semantic&&e.ssrcIds[0]===i.ssrcId)),s={semantic:"SIM",ssrcIds:[i.ssrcId]};for(let a=1;a<r;a++)e.attributes.ssrcs.push({ssrcId:i.ssrcId+a,attributes:Y_(i.attributes)}),s.ssrcIds.push(i.ssrcId+a),o&&(e.attributes.ssrcs.push({ssrcId:o.ssrcIds[1]+a,attributes:Y_(i.attributes)}),e.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[i.ssrcId+a,o.ssrcIds[1]+a]}));e.attributes.ssrcGroups.unshift(s)}async function Aj(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new RTCPeerConnection;n.addTransceiver("video",{direction:"sendonly"}),n.addTransceiver("audio",{direction:"sendonly"}),n.addTransceiver("video",{direction:"recvonly"}),n.addTransceiver("audio",{direction:"recvonly"});const r=(await n.createOffer()).sdp,{send:i,recv:o,sendrecv:s}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=vj(n,e,t,"sendonly"),i=vj(n,e,t,"recvonly"),o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},s={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},a={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Mj(r,i,"videoExtensions",o,s,a),Mj(r,i,"videoCodecs",o,s,a),Mj(r,i,"audioExtensions",o,s,a),Mj(r,i,"audioCodecs",o,s,a),ST("RAISE_H264_BASELINE_PRIORITY")){const e=a.videoCodecs.findIndex((e=>{var t,n;return"h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"===(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"])}));if(-1!==e){const t=a.videoCodecs.findIndex((e=>{var t;return"h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())}));if(t<e){VT.debug("raising H264 baseline profile priority");const n=a.videoCodecs[e];a.videoCodecs.splice(e,1),a.videoCodecs.splice(t,0,n)}-1!==t&&(s.videoCodecs=s.videoCodecs.filter((e=>{var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"]))}))),-1!==t&&ST("FILTER_SEND_H264_BASELINE")&&(o.videoCodecs=o.videoCodecs.filter((e=>{var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"]))})))}}return{send:o,recv:s,sendrecv:a}}(e,t,r);try{n.close()}catch(e){}return{send:i,recv:o,sendrecv:s}}function Oj(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=vj(arguments.length>2?arguments[2]:void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"recvonly"),n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Mj(e,t,"videoExtensions",n,r,i),Mj(e,t,"videoCodecs",n,r,i),Mj(e,t,"audioExtensions",n,r,i),Mj(e,t,"audioCodecs",n,r,i),ST("RAISE_H264_BASELINE_PRIORITY")){const e=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"===e.fmtp.parameters["profile-level-id"]));if(-1!==e){const t=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()));if(t<e){VT.debug("raising H264 baseline profile priority");const n=i.videoCodecs[e];i.videoCodecs.splice(e,1),i.videoCodecs.splice(t,0,n)}-1!==t&&(r.videoCodecs=r.videoCodecs.filter((e=>!(e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"!==e.fmtp.parameters["profile-level-id"]))))}}return{send:n,recv:r,sendrecv:i}}function Mj(e,t,n,r,i,o){if("videoExtensions"===n||"audioExtensions"===n){const s=[];return e[n].forEach((e=>{t[n].some(((t,n)=>{if(e.entry===t.entry&&e.extensionName===t.extensionName)return s.push(n),!0}))?o[n].push(e):r[n].push(e)})),void t[n].forEach(((e,t)=>{-1===s.indexOf(t)&&i[n].push(e)}))}if("videoCodecs"===n||"audioCodecs"===n){const s=[];return e[n].forEach((e=>{t[n].some(((t,n)=>{if(e.payloadType===t.payloadType&&JSON.stringify(e)===JSON.stringify(t))return s.push(n),!0}))?o[n].push(e):r[n].push(e)})),void t[n].forEach(((e,t)=>{-1===s.indexOf(t)&&i[n].push(e)}))}}function Dj(e){const{send:t,recv:n,sendrecv:r}=e;if(!r){if(!t||!n)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:t,recv:n}}let i,o;return t?(i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i.audioCodecs=[...t.audioCodecs,...r.audioCodecs],i.videoCodecs=[...t.videoCodecs,...r.videoCodecs],i.audioExtensions=[...t.audioExtensions,...r.audioExtensions],i.videoExtensions=[...t.videoExtensions,...r.videoExtensions]):i=r,n?(o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},o.audioCodecs=[...n.audioCodecs,...r.audioCodecs],o.videoCodecs=[...n.videoCodecs,...r.videoCodecs],o.audioExtensions=[...n.audioExtensions,...r.audioExtensions],o.videoExtensions=[...n.videoExtensions,...r.videoExtensions]):o=r,{send:i,recv:o}}function kj(e){"audio"===e.media.mediaType&&e.attributes.payloads.filter((e=>{var t;return"opus"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})).forEach((e=>{e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"}))}function xj(e){e.mediaDescriptions.forEach((e=>{"video"!==e.media.mediaType&&"audio"!==e.media.mediaType||e.attributes.payloads.forEach((e=>{-1===e.rtcpFeedbacks.findIndex((e=>"rrtr"===e.type))&&e.rtcpFeedbacks.push({type:"rrtr"})}))}))}function Lj(e,t,n,r){let i=[];if(e===aI.VIDEO){if(ST("H264_PROFILE_LEVEL_ID")&&"h264"===r&&(i=t.videoCodecs.filter((e=>{var t;return Rr(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,r)&&e&&e.fmtp&&e.fmtp.parameters["profile-level-id"]===ST("H264_PROFILE_LEVEL_ID")}))),!Array.isArray(i)||0===i.length){let e=[];const o=[],s=[];n.videoCodecs.forEach((t=>{var n,i,a;Rr(n=t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").call(n,r)&&e.push(t),Rr(i=t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").call(i,"vp8")&&o.push(t),Rr(a=t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").call(a,"h264")&&s.push(t)})),0===e.length&&(0!==o.length?(e=o,VT.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: vp8"))):0!==s.length&&(e=s,VT.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: h264")))),0!==e.length&&(i=t.videoCodecs.filter((t=>e.some((e=>e.payloadType===t.payloadType)))))}if(ST("USE_PUB_RTX")){const e=i.map((e=>e.payloadType.toString())),n=t.videoCodecs.filter((t=>t.rtpMap&&"rtx"===t.rtpMap.encodingName&&Rr(e).call(e,t.fmtp&&t.fmtp.parameters.apt||"")));i=[...i,...n]}0===i.length&&(VT.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: ").concat(t.videoCodecs[0].rtpMap&&t.videoCodecs[0].rtpMap.encodingName)),i=t.videoCodecs)}else i=t.audioCodecs.filter((e=>{var t;return Rr(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,r)})),0===i.length&&(VT.warning("codec ".concat(r," not included in rtpCapabilities, fallback to opus")),i=t.audioCodecs.filter((e=>{var t;return Rr(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,"opus")})));return i}let Pj=class{get localCapabilities(){return Y_(this._localCapabilities)}get rtpCapabilities(){return Y_(this._rtpCapabilities)}get candidates(){return Y_(this._candidates)}get iceParameters(){return Y_(this._iceParameters)}get dtlsParameters(){return Y_(this._dtlsParameters)}constructor(e){oh(this,"sessionDesc",void 0),oh(this,"_localCapabilities",void 0),oh(this,"_rtpCapabilities",void 0),oh(this,"_candidates",void 0),oh(this,"_iceParameters",void 0),oh(this,"_dtlsParameters",void 0),oh(this,"setup",void 0),oh(this,"currentMidIndex",void 0),oh(this,"cname","o/i14u9pJrxRKAsu"),oh(this,"firefoxSsrcMidMap",new Map),e=Y_(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,localCapabilities:o,direction:s,setup:a,videoCodec:c,audioCodec:l}=e;let d;this.setup=a,d=s===_b.RECEIVE_ONLY?QP.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=extmap-allow-mixed\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n"):QP.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=extmap-allow-mixed\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=recvonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=recvonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n"),this._rtpCapabilities=i,this._candidates=r,this._iceParameters=t,this._dtlsParameters=n,this._localCapabilities=o;const u=s===_b.RECEIVE_ONLY?this.rtpCapabilities.send:this.rtpCapabilities.recv,h=s===_b.RECEIVE_ONLY?this._localCapabilities.recv:this._localCapabilities.send,p=s===_b.RECEIVE_ONLY?i.send.videoCodecs:Lj(aI.VIDEO,u,h,c),f=s===_b.RECEIVE_ONLY?i.send.audioCodecs:Lj(aI.AUDIO,u,h,l);for(const m of d.mediaDescriptions){if(m.attributes.iceUfrag=t.iceUfrag,m.attributes.icePwd=t.icePwd,m.attributes.fingerprints=n.fingerprints,m.attributes.candidates=r,m.attributes.setup=this.setup,"application"===m.media.mediaType&&(m.attributes.sctpPort="5000"),"video"===m.media.mediaType&&(m.media.fmts=p.map((e=>e.payloadType.toString(10))),m.attributes.payloads=p,m.attributes.extmaps=u.videoExtensions,ST("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Tj([{ssrcId:4e4,rtx:ST("USE_SUB_RTX")?40001:void 0}],this.cname);m.attributes.ssrcs=e,m.attributes.ssrcGroups=t}if("audio"===m.media.mediaType&&(m.media.fmts=f.map((e=>e.payloadType.toString(10))),m.attributes.payloads=f,m.attributes.extmaps=u.audioExtensions,kj(m),ST("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Tj([{ssrcId:2e4}],this.cname);m.attributes.ssrcs=e,m.attributes.ssrcGroups=t}}this.sessionDesc=d,this.currentMidIndex=d.mediaDescriptions.length-1}toString(){return QP.print(this.sessionDesc)}hasMid(e){return Array.isArray(e)?e.every((e=>this.hasMid(e))):this.sessionDesc.mediaDescriptions.some((t=>t.attributes.mid===e))}send(e,t,n,r,i){n=n.replace(/ /g,"-");const{ssrcs:o,ssrcGroups:s}=Tj(t,this.cname,ST("SYNC_GROUP")?n:void 0),a=this.findPreloadMediaDesc(o);if(a){if(Rv()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,a.attributes.mid),i&&(i.twcc||i.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(a);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(a,i),{mid:a.attributes.mid,needExchangeSDP:!0}}return{mid:a.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,o,r);let n;return-1===t?(n=this.createOrRecycleSendMedia(e,o,s,"sendonly",r,i),this.updateBundleMids()):(n=Y_(this.sessionDesc.mediaDescriptions[t]),n.attributes.direction="sendonly",n.attributes.ssrcs=o,n.attributes.ssrcGroups=s,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(n,i)),Rv()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,n.attributes.mid),{needExchangeSDP:!0,mid:n.attributes.mid}}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((e=>{e.attributes.ssrcs=[]})),this.updateBundleMids()}receive(e,t,n){const r=[];return e.forEach((e=>{const i=e._mediaStreamTrack.kind,o=this.findAvailableRecvMediaIndex(i);let s,a=!1;-1===o?(a=!0,s=this.createOrRecycleRecvMedia(e,[],"recvonly",t,n),this.updateBundleMids()):(s=Y_(this.sessionDesc.mediaDescriptions[o]),s.attributes.direction="recvonly"),r.push({mid:s.attributes.mid,needCreateTransceiver:a})})),r}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((e=>{e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}addRemoteCandidate(e){const{foundation:t,protocol:n,address:r,port:i,type:o,relatedAddress:s,relatedPort:a,priority:c}=new RTCIceCandidate(e),l={foundation:null!=t?t:"",componentId:"1",transport:null!=n?n:"",priority:c?c+"":"",connectionAddress:null!=r?r:"",port:i?i+"":"",type:o?o+"":"",relAddr:null!=s?s:"",relPort:a?a+"":"",extension:{}};this.candidates.some((e=>e.priority===l.priority&&e.connectionAddress===l.connectionAddress&&e.port===l.port))||(this._candidates.push(l),this.sessionDesc.mediaDescriptions.forEach((e=>{e.attributes.candidates=this.candidates})))}clearRemoteCandidate(){this._candidates=[],this.sessionDesc.mediaDescriptions[0].attributes.candidates=this._candidates}createOrRecycleRecvMedia(e,t,n,r,i){const o=e._mediaStreamTrack.kind,s=this.rtpCapabilities.recv,a=Lj(o,s,this.localCapabilities.send,o===aI.AUDIO?i:r),c=o===aI.VIDEO?s.videoExtensions:s.audioExtensions,l="".concat(++this.currentMidIndex);let d={media:{mediaType:o,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(l)}};d=this.mungRecvMediaDsec(d,e);const u=this.findFirstClosedMedia(o);if(u){const e=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[e]=d}else this.sessionDesc.mediaDescriptions.push(d);return d}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Rr(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="inactive"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Rr(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="recvonly"}))}findAvailableMediaIndex(e,t,n){return this.sessionDesc.mediaDescriptions.findIndex((r=>{const i=r.media.mediaType===e&&"0"!==r.media.port&&("sendonly"===r.attributes.direction||"sendrecv"===r.attributes.direction)&&0===r.attributes.ssrcs.length;if(Rv()){if(i){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==r.attributes.mid&&"1"!==r.attributes.mid)||!(!e||e!==r.attributes.mid)}return!1}return i&&r.attributes.mid===n}))}findAvailableRecvMediaIndex(e){return this.sessionDesc.mediaDescriptions.findIndex((t=>{const n=t.media.mediaType===e&&"0"!==t.media.port&&("recvonly"===t.attributes.direction||"sendrecv"===t.attributes.direction);return"0"!==t.attributes.mid&&"1"!==t.attributes.mid&&n}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}restartICE(e){e=Y_(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}createOrRecycleSendMedia(e,t,n,r,i,o){const s=this.rtpCapabilities.send,a=e===aI.VIDEO?s.videoCodecs:s.audioCodecs,c=e===aI.VIDEO?s.videoExtensions:s.audioExtensions;Rv()&&(i="".concat(++this.currentMidIndex));let l={media:{mediaType:e,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:i}};l=this.mungSendMediaDesc(l,o);const d=this.findFirstClosedMedia(e);if(d){const e=this.sessionDesc.mediaDescriptions.indexOf(d);this.sessionDesc.mediaDescriptions[e]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}mungRecvMediaDsec(e,t,n){const r=Y_(e);return Ij(r),bj(r,t),Nj(r,t),Cj(r),wj(r,n,this.localCapabilities.send),r}mungSendMediaDesc(e,t){const n=Y_(e);return wj(n,t,this.localCapabilities.recv),kj(n),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>"0"!==e.media.port)).map((e=>e.attributes.mid))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>Rv()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port))}};const jj=["sdp"];function Uj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uj(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let zj=class e extends AI{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}get localCodecs(){return[]}set isInRestartIce(e){this._isInRestartIce=e}get isInRestartIce(){return this._isInRestartIce}constructor(t,n,r){super(t,n),oh(this,"direction",void 0),oh(this,"name",void 0),oh(this,"store",void 0),oh(this,"spec",void 0),oh(this,"peerConnection",void 0),oh(this,"initialOffer",void 0),oh(this,"transport",void 0),oh(this,"statsFilter",void 0),oh(this,"localCandidateCount",0),oh(this,"allCandidatesReceived",!1),oh(this,"localCandidateAddress",null),oh(this,"useXR",ST("USE_XR")),oh(this,"filter",{filterRTX:!ST("USE_PUB_RTX")&&!ST("USE_SUB_RTX"),filterVideoFec:ST("FILTER_VIDEO_FEC"),filterAudioFec:ST("FILTER_AUDIO_FEC")}),oh(this,"extension",{useXR:this.useXR}),oh(this,"_isInRestartIce",!1),oh(this,"mutex",new pE("P2PConnection-mutex")),oh(this,"onLocalCandidate",void 0),oh(this,"remoteSDP",void 0),oh(this,"pendingCandidates",[]),oh(this,"localCapabilities",void 0),oh(this,"isReady",!1),oh(this,"restartCnt",0),oh(this,"curTurnServerIndex",0),this.store=n,this.spec=t,this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t,n.p2pTransport),{optional:[{googDscp:!0}]}),this.direction=null!=r?r:_b.SEND_ONLY,this.name=this.direction===_b.SEND_ONLY?"sendP2PConnection":"recvP2PConnection",this.statsFilter=mj(this.peerConnection,ST("STATS_UPDATE_INTERVAL"),void 0,Rv()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(e){try{const t=await Aj(this.filter,this.extension);if(this.localCapabilities=Dj(t),e){const{sdp:t}=e,n=qP(e,jj),r=function(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=vj(arguments.length>2?arguments[2]:void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"sendonly"),n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Mj(t,e,"videoExtensions",n,r,i),Mj(t,e,"videoCodecs",n,r,i),Mj(t,e,"audioExtensions",n,r,i),Mj(t,e,"audioCodecs",n,r,i),ST("RAISE_H264_BASELINE_PRIORITY")){const e=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"===e.fmtp.parameters["profile-level-id"]));if(-1!==e){const t=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()));if(t<e){VT.debug("raising H264 baseline profile priority");const n=i.videoCodecs[e];i.videoCodecs.splice(e,1),i.videoCodecs.splice(t,0,n)}-1!==t&&ST("FILTER_SEND_H264_BASELINE")&&(n.videoCodecs=n.videoCodecs.filter((e=>!(e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"!==e.fmtp.parameters["profile-level-id"]))))}}return{send:n,recv:r,sendrecv:i}}(this.filter,this.extension,t);this.remoteSDP=new Pj({remoteIceParameters:n.iceParameters,remoteDtlsParameters:n.dtlsParameters,candidates:[],remoteRTPCapabilities:r,localCapabilities:this.localCapabilities,direction:this.direction,setup:"actpass",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()}),this.isReady=!0;const i=await this.peerConnection.createAnswer();if(!i.sdp)throw new Error("Cannot get answer sdp when trying to establish PeerConnection.");const o=_j(i.sdp);await this.peerConnection.setLocalDescription(i);const s=await Oj(this.filter,this.extension,i.sdp);this.localCapabilities=Dj(s);const a=this.peerConnection.getTransceivers()[0];return null!=a&&a.receiver&&a.receiver.transport&&this.tryBindTransportEvents(a.receiver.transport),Fj(Fj({},o),{},{sdp:i.sdp})}{this.peerConnection.addTransceiver("video",{direction:"sendonly"}),this.peerConnection.addTransceiver("audio",{direction:"sendonly"});const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=_j(e.sdp);return this.initialOffer=e,Fj(Fj({},t),{},{sdp:e.sdp})}}catch(e){throw new Wv(Hv.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");await this.peerConnection.setLocalDescription(this.initialOffer);const{sdp:t,iceParameters:n,dtlsParameters:r}=e,i=await Oj(this.filter,this.extension,t);this.remoteSDP=new Pj({remoteIceParameters:n,remoteDtlsParameters:r,candidates:[],remoteRTPCapabilities:i,localCapabilities:this.localCapabilities,direction:this.direction,setup:"active",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()});const o=this.peerConnection.getTransceivers()[0];null!=o&&o.sender&&o.sender.transport&&this.tryBindTransportEvents(o.sender.transport)}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}async addRemoteCandidate(e){try{e&&this.pendingCandidates.push(e),this.peerConnection.remoteDescription&&this.isReady&&(this.pendingCandidates.forEach((e=>{this.peerConnection.addIceCandidate(e)})),this.pendingCandidates=[])}catch(e){throw new Wv(Hv.ADD_CANDIDATE_FAILED,"P2PConnection.addRemoteCandidate failed; ".concat(e.toString()))}}send(e,t,n){var r=this;return DP((function*(){const i=yield bP(r.mutex.lock("From P2PConnection.send"));try{if(!r.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const i=[],o=r.remoteSDP.receive(e,t,n);e.forEach(((e,t)=>{if(o[t].needCreateTransceiver){const t=r.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});i.push(t),e._updateRtpTransceiver(t)}else{const n=r.peerConnection.getTransceivers().find((e=>e.mid===o[t].mid));if(!n)throw new Error("cannot find transceiver when sendPeerconnection send, mid is ".concat(o[t].mid));i.push(n),e._updateRtpTransceiver(n)}})),Rv()&&!0===ST("SIMULCAST")&&(yield bP(r.applySimulcastForFirefox(i,e)));const s=o.map((e=>e.mid)),a=yield bP(r.peerConnection.createOffer()),c=r.mungSendOfferSDP(a.sdp,e,s),l=QP.parse(c),d=s.map((e=>{const t=l.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return Ej(t,ST("USE_PUB_RTX"))})),u=i.map(((e,t)=>{const n=s[t];return{localSSRC:d[t],id:n}}));yield bP(r.peerConnection.setLocalDescription({type:"offer",sdp:c}));try{yield u}catch(e){const n=r.remoteSDP.toString();throw yield bP(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield bP(r.peerConnection.setRemoteDescription({type:"answer",sdp:n})),yield bP(r.stopSending(s,!0)),e}yield bP(r.applySimulcastEncodings(i,e)),yield bP(r.applySendEncodings(i,e));const h=r.remoteSDP.toString(),p=r.logSDPExchange(c,"offer","local","send");return null==p||p(h),yield bP(r.setRemoteDescription({type:"answer",sdp:h})),i.map(((e,t)=>{const n=s[t];return{localSSRC:d[t],id:n}}))}catch(e){throw e instanceof Wv?e:new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{i()}}))()}async stopSending(e,t){const n=t?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length (".concat(t.length,") doesn't match mids' length (").concat(e.length,") when trying to call P2PConnection.stopSending."));t.map((e=>{var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const i=this.remoteSDP.toString();null==r||r(i),await this.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}finally{n&&n()}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:i,needExchangeSDP:o}=this.remoteSDP.send(e,t,n,r);if(o){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer(),o=this.mungReceiveAnswerSDP(r.sdp,i,e);null==n||n(o||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:o}),VT.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP."))}else VT.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," no need to exchange SDP."));const s=this.peerConnection.getTransceivers().find((e=>e.mid===i));if(!s||null===s.mid)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,mid:s.mid,transceiver:s}}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async mockReceive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:i,needExchangeSDP:o}=this.remoteSDP.send(e,t,n,r);if(o){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer(),o=this.mungReceiveAnswerSDP(r.sdp,i,e);null==n||n(o||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:o}),VT.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP."))}else VT.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," no need to exchange SDP."))}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async restartICE(t){try{if(this.store.p2pTransport===yT.Auto&&(this.store.p2pTransport=yT.SdRtn,bC().supportPCSetConfiguration&&this.peerConnection.setConfiguration(e.resolvePCConfiguration(this.spec,this.store.p2pTransport))),this.restartCnt>3&&(this.restartCnt=0,bC().supportPCSetConfiguration&&this.peerConnection.setConfiguration(e.resolvePCConfiguration(this.spec,this.store.p2pTransport,++this.curTurnServerIndex))),!t){this.restartCnt++,this.isReady=!1;const e=await this.peerConnection.createOffer({iceRestart:!0});if(!e.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const{iceParameters:t}=_j(e.sdp);return this.store.descriptionStart(),this.direction===_b.SEND_ONLY&&await this.peerConnection.setLocalDescription(e),t}if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");if(this.remoteSDP.restartICE(t),this.store.descriptionStart(),this.direction===_b.RECEIVE_ONLY){this.restartCnt++,await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()});const e=await this.peerConnection.createAnswer();if(!e.sdp)throw new Error("Cannot get answer sdp when trying to iceRestart.");const{iceParameters:t}=_j(e.sdp);return await this.peerConnection.setLocalDescription(e),t}await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()}),this.isReady=!0}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}close(){var e;this.peerConnection.close(),this.peerConnection.onicecandidate=null,null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.transport=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const n=await this.peerConnection.createOffer(),r=this.mungSendOfferSDP(n.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const i=this.remoteSDP.toString(),o=this.logSDPExchange(r,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:r}),null==o||o(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===n.length&&(this.isVP8Simulcast(t)?Rv()||await this.applySimulcastEncodings(n,[t]):await this.applySendEncodings(n,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getTransceivers().find((e=>e.mid===t));n&&await n.sender.replaceTrack(e._mediaStreamTrack)}async getSelectedCandidatePair(){const e=this.peerConnection.getReceivers();if(e.length>0&&e[0].transport&&e[0].transport.iceTransport&&e[0].transport.iceTransport.getSelectedCandidatePair&&e[0].transport.iceTransport.getSelectedCandidatePair()){const t=e[0].transport.iceTransport,{local:n,remote:r}=t.getSelectedCandidatePair();return{local:Fj(Fj({},$P),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:Fj(Fj({},$P),{},{candidateType:r.type,protocol:r.protocol,address:r.address,port:r.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e,t;Rr(e=["connected","completed"]).call(e,this.peerConnection.iceConnectionState)&&(this.isReady=!1),null===(t=this.onICEConnectionStateChange)||void 0===t||t.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;"connected"===this.peerConnection.connectionState&&(this.restartCnt=0),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.startICECandidate()}startICECandidate(){this.peerConnection.onicecandidate||(this.localCandidateCount=0,this.peerConnection.onicecandidate=e=>{var t;e.candidate?(e.candidate.candidate&&(this.localCandidateAddress=e.candidate.address,null===(t=this.onLocalCandidate)||void 0===t||t.call(this,e.candidate.toJSON())),this.localCandidateCount+=1):(this.allCandidatesReceived=!0,VT.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))})}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i={iceServers:[]};var o;return t.iceServers?i.iceServers=t.iceServers:t.turnServer&&"off"!==t.turnServer.mode&&(S_(t.turnServer.servers)?i.iceServers=t.turnServer.servers:(i.iceServers&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers,n,r)),ST("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&t.turnServer.serversFromGateway&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway,n,r)),Rr(o=[yT.Relay,yT.SdRtn]).call(o,n)&&(i.iceTransportPolicy="relay"),ST("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(i.iceTransportPolicy="relay")})))),ST("ENABLE_ENCODED_TRANSFORM")&&bC().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),VT.debug("P2PConnection p2pTransport is ".concat(n)),i}static turnServerConfigToIceServers(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=[],i=e.filter((e=>e.tcpport));VT.debug("P2PConnection turnServers is ".concat(i,", current index is ").concat(n));const o=i.length>n?i[n]:i[0];switch(t){case yT.SdRtn:const t=e.filter((e=>{var t;return Rr(t=e.username).call(t,"glb:")&&e.turnServerURL==e.turnServerURL})),i=t.length>n?t[n]:t[0];i&&(r.push({username:i.username,credential:i.password,credentialType:"password",urls:"turn:".concat(vN(i.turnServerURL),":").concat(i.tcpport,"?transport=udp")}),r.push({username:i.username,credential:i.password,credentialType:"password",urls:"turns:".concat(vN(i.turnServerURL),":").concat(i.tcpport,"?transport=tcp")}));break;case yT.Relay:o&&(r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turn:".concat(o.turnServerURL,":").concat(o.tcpport,"?transport=udp")}),r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turns:".concat(vN(o.turnServerURL),":").concat(o.tcpport,"?transport=tcp")}));break;default:o&&(r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turn:".concat(o.turnServerURL,":").concat(o.tcpport,"?transport=udp")}),r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turns:".concat(vN(o.turnServerURL),":").concat(o.tcpport,"?transport=tcp")}),r.push({username:o.username,credential:o.password,credentialType:"password",urls:"stun:".concat(o.turnServerURL,":").concat(o.tcpport)}))}return r}tryBindTransportEvents(e){if(e){this.transport=e,e.onstatechange=()=>{var t;null!=e&&e.state&&(null===(t=this.onDTLSTransportStateChange)||void 0===t||t.call(this,e.state))},e.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,"error"in e?e.error:e)};const t=e.iceTransport;t&&(t.onstatechange=()=>{const t=null==e?void 0:e.iceTransport.state;var n;t&&(null===(n=this.onICETransportStateChange)||void 0===n||n.call(this,t))},t.getSelectedCandidatePair&&(t.onselectedcandidatepairchange=()=>{if(t.getSelectedCandidatePair()){const{local:e,remote:n}=t.getSelectedCandidatePair();VT.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:e.type,protocol:e.protocol}),", remote ").concat(JSON.stringify({candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port})," )"))}}))}}tryUnbindTransportEvents(){this.transport&&(this.transport.onstatechange=null,this.transport.onerror=null,this.transport.iceTransport&&(this.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(e,t){var n;if(t||(t=this.peerConnection.getSenders().find((t=>t.track===e._mediaStreamTrack))),!t)return VT.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(e))return VT.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!bC().supportSetRtpSenderParameters)return VT.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const r={},i={};switch(e._optimizationMode){case"motion":r.degradationPreference="maintain-framerate";break;case"detail":r.degradationPreference="maintain-resolution";break;default:r.degradationPreference="balanced"}if(e._encoderConfig){var o;const{bitrateMax:t,frameRate:n,scaleResolutionDownBy:r}=e._encoderConfig;t&&(i.maxBitrate=1e3*t),Rr(o=e._hints).call(o,VC.LOW_STREAM)&&(n&&(i.maxFramerate=EN(n)),r&&r>=1&&(i.scaleResolutionDownBy=r))}if(ST("DSCP_TYPE")&&Vv()){var s;const e=ST("DSCP_TYPE");Rr(s=["very-low","low","medium","high"]).call(s,e)&&(i.networkPriority=e)}const a=t.getParameters(),c=null===(n=a.encodings)||void 0===n?void 0:n[0];Rv()&&!c&&(r.encodings=[i]),c&&Object.assign(c,i),Object.assign(a,r),VT.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(a.encodings))),await t.setParameters(a)}async applySendEncodings(e,t){try{if(!bC().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];i instanceof SR&&!this.isVP8Simulcast(i)&&await this.updateRtpSenderEncodings(i,r.sender)}}catch(e){VT.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t,n){const r=QP.parse(e);return t.forEach(((e,t)=>{const i=n[t],o=r.mediaDescriptions.find((e=>e.attributes.mid===i));o&&(bj(o,e),Rj(o,e,this.store.codec))})),QP.print(r)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var n,r,i,o,s;const c=e[a],l=t[a];if(l instanceof SR&&!Rr(n=l._hints).call(n,VC.LOW_STREAM)&&null!==(r=l._encoderConfig)&&void 0!==r&&r.bitrateMax&&(null===(i=l._encoderConfig)||void 0===i?void 0:i.bitrateMax)>200&&null!==(o=l._scalabilityMode)&&void 0!==o&&o.numSpatialLayers&&(null===(s=l._scalabilityMode)||void 0===s?void 0:s.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const n=c.sender.getParameters();await c.sender.setParameters(Object.assign(n,e))}}}async applySimulcastEncodings(e,t){if(!Rv()&&e.length===t.length)for(let n=0;n<e.length;n++){const r=t[n];if(r instanceof SR&&this.isVP8Simulcast(r)){const t=e[n],i={},o={high:1e3*(r._encoderConfig.bitrateMax-50),medium:5e4};i.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:o.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:o.medium,scaleResolutionDownBy:4}];const s=t.sender.getParameters();await t.sender.setParameters(Object.assign(s,i))}}}isVP8Simulcast(e){var t,n,r,i,o;return!!(e instanceof SR&&ST("SIMULCAST")&&"vp8"===this.store.codec&&!Rr(t=e._hints).call(t,VC.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=e._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(i=e._scalabilityMode)&&void 0!==i&&i.numSpatialLayers&&(null===(o=e._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1)}logSDPExchange(e,t,n,r){if(ST("SDP_LOGGING"))return VT.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((e=>{e.direction="inactive"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((async e=>{e.direction="sendonly"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}async getRemoteSSRC(e,t){var n,r;if(t=null!==(n=t)&&void 0!==n?n:null===(r=this.currentRemoteDescription)||void 0===r?void 0:r.sdp){var i;const n=null===(i=QP.parse(t).mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===i?void 0:i.attributes.ssrcs;return null==n?void 0:n[0].ssrcId}}async setRemoteDescription(e){var t;await this.peerConnection.setRemoteDescription(e),Rr(t=["connected","completed"]).call(t,this.peerConnection.iceConnectionState)||(this.isReady=!0,this.addRemoteCandidate())}mungReceiveAnswerSDP(e,t,n){const r=QP.parse(e),i=r.mediaDescriptions.find((e=>e.attributes.mid===t));return i&&(n===aI.AUDIO&&"audio"===i.media.mediaType&&kj(i),this.useXR&&xj(r)),QP.print(r)}};function Vj(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PConnection.".concat(t));try{for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return await r.apply(this,o)}finally{n()}},n}function Bj(e,t){let n=document.createElement("video"),r=document.createElement("canvas");n.setAttribute("style","display:none"),r.setAttribute("style","display:none"),n.setAttribute("muted",""),n.muted=!0,n.setAttribute("autoplay",""),n.autoplay=!0,n.setAttribute("playsinline",""),r.width=EN(t.width),r.height=EN(t.height);const i=EN(t.framerate||15);document.body.append(n),document.body.append(r);let o=e._mediaStreamTrack;n.srcObject=new MediaStream([o]),n.play();const s=r.getContext("2d");if(!s)throw new kb(Hv.UNEXPECTED_ERROR,"can not get canvas context");const a=bC(),c=r.captureStream(a.supportRequestFrame?0:i).getVideoTracks()[0];c.canvas||(c.canvas=r),r.startCapture=()=>{if(!n)return r.stopCapture&&r.stopCapture();if(n.paused&&n.play(),n.videoHeight>2&&n.videoWidth>2){const e=n.videoWidth,t=n.videoHeight/e,i=r.width*t;Math.abs(i-r.height)>=2&&(VT.debug("adjust low stream resolution","".concat(r.width,"x").concat(r.height," -> ").concat(r.width,"x").concat(i)),r.height=i)}s.drawImage(n,0,0,r.width,r.height),c.requestFrame&&c.requestFrame(),o!==e._mediaStreamTrack&&(o=e._mediaStreamTrack,n.srcObject=new MediaStream([o]))},r.stopCapture=_w((()=>r.startCapture&&r.startCapture()),i);const l=c.stop;return c.stop=()=>{l.call(c),n&&(n.remove(),n.srcObject=null,n=null),r&&(r.width=0,r.remove(),r.stopCapture&&r.stopCapture(),r.startCapture=void 0,r.stopCapture=void 0,r=null),VT.debug("clean low stream renderer")},c}var Gj,Hj,Wj,Yj,qj,Kj,Qj,Jj,Xj,Zj,$j;Mb([Vj,Db("design:type",Function),Db("design:paramtypes",[Object]),Db("design:returntype",cv)],zj.prototype,"establish",null),Mb([Vj,Db("design:type",Function),Db("design:paramtypes",[Object]),Db("design:returntype",cv)],zj.prototype,"connect",null),Mb([Vj,Db("design:type",Function),Db("design:paramtypes",[String,Array,String,String]),Db("design:returntype",cv)],zj.prototype,"receive",null),Mb([Vj,Db("design:type",Function),Db("design:paramtypes",[String,Array,String,String]),Db("design:returntype",cv)],zj.prototype,"mockReceive",null),Mb([Vj,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],zj.prototype,"stopReceiving",null),Mb([Vj,Db("design:type",Function),Db("design:paramtypes",[Object]),Db("design:returntype",cv)],zj.prototype,"restartICE",null),Mb([Vj,Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],zj.prototype,"close",null),Mb([Vj,Db("design:type",Function),Db("design:paramtypes",[String,dw]),Db("design:returntype",cv)],zj.prototype,"updateEncoderConfig",null),Mb([Vj,Db("design:type",Function),Db("design:paramtypes",[String,dw]),Db("design:returntype",cv)],zj.prototype,"updateSendParameters",null),Mb([Vj,Db("design:type",Function),Db("design:paramtypes",[dw,String]),Db("design:returntype",cv)],zj.prototype,"replaceTrack",null),Mb([Vj,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],zj.prototype,"muteLocal",null),Mb([Vj,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],zj.prototype,"unmuteLocal",null),function(e){e[e.HEIGHT=2033]="HEIGHT",e[e.FRAME_RATE=2034]="FRAME_RATE",e[e.WIDTH=2035]="WIDTH"}(Gj||(Gj={})),function(e){e[e.HEIGHT=2072]="HEIGHT",e[e.FRAME_RATE=2074]="FRAME_RATE",e[e.WIDTH=2076]="WIDTH"}(Hj||(Hj={})),function(e){e[e.FRAME_RATE=2002]="FRAME_RATE",e[e.WIDTH=2003]="WIDTH",e[e.HEIGHT=2004]="HEIGHT",e[e.PACKAGE_LOST=2005]="PACKAGE_LOST",e[e.AVG_ENCODE=2007]="AVG_ENCODE",e[e.NACKS=2009]="NACKS",e[e.PLIS=2010]="PLIS",e[e.FIRS=2011]="FIRS",e[e.BITRATE=2012]="BITRATE",e[e.PACKAGE_RATE=2031]="PACKAGE_RATE",e[e.ADAPTATION=2032]="ADAPTATION",e[e.ACTUAL_ENCODED=2060]="ACTUAL_ENCODED",e[e.BANDWIDTH=2061]="BANDWIDTH",e[e.RETRANSMIT=2062]="RETRANSMIT",e[e.TARGET_ENCODED=2064]="TARGET_ENCODED",e[e.TRANSMIT=2066]="TRANSMIT",e[e.FREEZE=2082]="FREEZE",e[e.DISABLED=2095]="DISABLED",e[e.PLAYER_STATUS=2128]="PLAYER_STATUS",e[e.QP_SUM=2143]="QP_SUM"}(Wj||(Wj={})),function(e){e[e.BITRATE=2069]="BITRATE",e[e.PACKAGE_LOST=2070]="PACKAGE_LOST",e[e.PACKAGE_RATE=2071]="PACKAGE_RATE",e[e.HEIGHT=2073]="HEIGHT",e[e.FRAME_RATE=2075]="FRAME_RATE",e[e.WIDTH=2077]="WIDTH"}(Yj||(Yj={})),function(e){e[e.JITTER=-1]="JITTER",e[e.PACKAGE_LOST=2014]="PACKAGE_LOST",e[e.WIDTH=2018]="WIDTH",e[e.HEIGHT=2019]="HEIGHT",e[e.FRAME_RATE=2020]="FRAME_RATE",e[e.JITTER_BUFFER=2023]="JITTER_BUFFER",e[e.CURRENT_DELAY=2024]="CURRENT_DELAY",e[e.NACKS=2026]="NACKS",e[e.PLIS=2027]="PLIS",e[e.FIRS=2028]="FIRS",e[e.BITRATE=2029]="BITRATE",e[e.PACKAGE_RATE=2078]="PACKAGE_RATE",e[e.FREEZE=2084]="FREEZE",e[e.DISABLED=2101]="DISABLED",e[e.PLAYER_STATUS=2129]="PLAYER_STATUS",e[e.QP_SUM=2144]="QP_SUM",e[e.I_FRAME_DELAY=2149]="I_FRAME_DELAY"}(qj||(qj={})),function(e){e[e.FRAME_RATE_DECODE=2021]="FRAME_RATE_DECODE",e[e.FRAME_RATE_RENDER=2022]="FRAME_RATE_RENDER",e[e.FREEZE_TIME=2109]="FREEZE_TIME",e[e.FREEZE_TIME_RENDER=2147]="FREEZE_TIME_RENDER"}(Kj||(Kj={})),function(e){e[e.PCM_LEVEL=2104]="PCM_LEVEL"}(Qj||(Qj={})),function(e){e[e.PACKAGE_LOST=-1]="PACKAGE_LOST",e[e.LEVEL=2038]="LEVEL",e[e.BITRATE=2039]="BITRATE",e[e.PACKAGE_RATE=2040]="PACKAGE_RATE",e[e.AEC_RETURN_LOSS=2041]="AEC_RETURN_LOSS",e[e.AEC_RETURN_LOSS_ENH=2042]="AEC_RETURN_LOSS_ENH",e[e.FREEZE=2081]="FREEZE",e[e.DISABLED=2096]="DISABLED"}(Jj||(Jj={})),function(e){e[e.BITRATE=2044]="BITRATE",e[e.PACKAGE_LOST=2045]="PACKAGE_LOST",e[e.PACKAGE_RATE=2046]="PACKAGE_RATE",e[e.CURRENT_DELAY=2047]="CURRENT_DELAY",e[e.JITTER_BUFFER=2054]="JITTER_BUFFER",e[e.JITTER=2055]="JITTER",e[e.FREEZE=2083]="FREEZE",e[e.DISABLED=2102]="DISABLED",e[e.PCM_LEVEL=2105]="PCM_LEVEL",e[e.PLAYER_STATUS=2130]="PLAYER_STATUS",e[e.CONCEALED_SAMPLES=2148]="CONCEALED_SAMPLES"}(Xj||(Xj={})),function(e){e[e.FREEZE_TIME=-1]="FREEZE_TIME",e[e.LEVEL=2043]="LEVEL"}(Zj||(Zj={})),function(e){e[e.RTT=2006]="RTT",e[e.CONN_TYPE=801]="CONN_TYPE"}($j||($j={}));const eU=1e3,tU=3;function nU(e,t,n){null!=n&&Number.isFinite(n)&&(e[t]=Math.round(Math.max(0,n)))}function rU(e){const t={[$j.CONN_TYPE]:0,[$j.RTT]:e.rtt};switch(e.selectedCandidatePair.localCandidate.candidateType){case"relay":{const n=e.selectedCandidatePair.localCandidate.relayProtocol;"udp"===n&&(t[$j.CONN_TYPE]=1),"tcp"===n&&(t[$j.CONN_TYPE]=3),"tls"===n&&(t[$j.CONN_TYPE]=4);break}case"srflx":t[$j.CONN_TYPE]=2}return t}class iU extends l_{constructor(e){super(),oh(this,"store",void 0),oh(this,"uploadWRTCStatsTimer",void 0),oh(this,"uploadOutboundDenoiserStatsTimer",void 0),oh(this,"uploadExtStatsTimer",void 0),oh(this,"uploadExtUsageStatsTimer",void 0),oh(this,"uploadInboundExtStatsTimer",void 0),oh(this,"requestStats",void 0),oh(this,"requestTransportStats",void 0),oh(this,"requestLocalMedia",void 0),oh(this,"requestRemoteMedia",void 0),oh(this,"requestAllTracks",void 0),oh(this,"requestVideoIsReady",void 0),oh(this,"requestUploadStats",void 0),oh(this,"requestUpload",void 0),oh(this,"uploadOutboundStarted",!1),oh(this,"uploadInboundStarted",!1),oh(this,"uploadTransportStarted",!1),oh(this,"uploadExtensionUsageStarted",!1),oh(this,"lastRecvStats",void 0),oh(this,"lastSendStats",void 0),oh(this,"lastFullRecvStats",void 0),oh(this,"lastFullSendStats",void 0),oh(this,"needUploadRenderFreezeTime",!0),this.store=e}uploadWRTCStats(e){if(!this.requestStats||!this.requestUploadStats)return;let t,n;if(this.uploadTransportStarted&&(t=this.requestStats(),this.store.useP2P&&(n=this.requestStats(!0))),!t&&this.uploadOutboundStarted&&(t=this.requestStats()),!n&&this.uploadInboundStarted&&(n=this.requestStats(!0)),t||n){const r={};if(this.uploadTransportStarted&&t){const i=this.getTransportStats(t,n,e);i&&(r.misc=[i])}if(this.uploadOutboundStarted&&t){const n=this.getOutboundStats(t,e?this.lastSendStats:this.lastFullSendStats,e);n&&(r.outbound=[n])}if(this.uploadInboundStarted&&n){const t=this.getInboundStats(n,e?this.lastRecvStats:this.lastFullRecvStats,e);t&&(r.inbound=t)}this.requestUploadStats(r)}this.lastRecvStats=n,this.lastSendStats=t,e||(this.lastFullRecvStats=n,this.lastFullSendStats=t)}startUploadWRTCStats(){if(this.uploadWRTCStatsTimer)return;let e=1;this.uploadWRTCStatsTimer=window.setInterval((()=>{if(!this.uploadTransportStarted&&!this.uploadInboundStarted&&!this.uploadOutboundStarted)return this.stopUploadWRTCStats();this.uploadWRTCStats(e!==tU),++e===tU+1&&(e=1)}),eU)}stopUploadWRTCStats(){window.clearInterval(this.uploadWRTCStatsTimer),this.uploadWRTCStatsTimer=void 0,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0)}getTransportStats(e,t,n){if(!this.requestStats)return;if(n)return null==e.rtt?void 0:{addition:{[$j.RTT]:e.rtt,[$j.CONN_TYPE]:void 0}};const r=rU(e);if(this.store.useP2P){if(t){const e=rU(t);r[$j.CONN_TYPE]+=e[$j.CONN_TYPE]<<3}r[$j.CONN_TYPE]+=110}else r[$j.CONN_TYPE]+=100;return{addition:r}}getOutboundStats(e,t,n){if(!this.requestUploadStats||!this.requestLocalMedia)return;const r=this.requestLocalMedia();if(!r||0===r.length)return;let i,o,s;return r.forEach((r=>{let[a,{track:c,ssrcs:l}]=r;switch(a){case dI.LocalVideoLowTrack:case dI.LocalVideoTrack:if(a===dI.LocalVideoTrack){const r=function(e,t,n,r,i){const o=t.videoSend.find((t=>t.ssrc===e));if(!o)return;const s={},{sentFrame:a,inputFrame:c}=o;if(c&&a){const e=c.frameRate,t=a.frameRate;s[Wj.FREEZE]=function(e,t){let n=!0;return n=!(e<=5)&&(e<=10?t<3:e<=20?t<4:t<5),n}(e,t)?1:0}if(nU(s,Wj.QP_SUM,o.qpSumPerFrame),i)return s;switch(a&&(nU(s,Wj.HEIGHT,a.height),nU(s,Wj.WIDTH,a.width),nU(s,Wj.FRAME_RATE,a.frameRate)),s[Wj.DISABLED]=r._originMediaStreamTrack&&!r._originMediaStreamTrack.enabled||r._mediaStreamTrack&&!r._mediaStreamTrack.enabled?1:0,o.adaptionChangeReason){case"none":s[Wj.ADAPTATION]=0;break;case"cpu":s[Wj.ADAPTATION]=1;break;case"bandwidth":s[Wj.ADAPTATION]=2;break;case"other":s[Wj.ADAPTATION]=3}s[Wj.PLAYER_STATUS]=aw[r._player?r._player.videoElementStatus:"uninit"],nU(s,Wj.NACKS,o.nacksCount),nU(s,Wj.PLIS,o.plisCount),nU(s,Wj.FIRS,o.firsCount),nU(s,Wj.AVG_ENCODE,o.avgEncodeMs);const l=n&&n.videoSend.find((t=>t.ssrc===e));if(l){let e=i?eU:eU*tU;l.timestamp&&o.timestamp&&(e=o.timestamp-l.timestamp),null!=l.packets&&null!=o.packets&&nU(s,Wj.PACKAGE_RATE,1e3*(o.packets-l.packets)/e),null!=o.packetsLost&&null!=l.packetsLost&&nU(s,Wj.PACKAGE_LOST,o.packetsLost-l.packetsLost),null!=l.bytes&&null!=o.bytes&&nU(s,Wj.BITRATE,8*(o.bytes-l.bytes)/e)}return s}(l[0].ssrcId,e,t,c,n),i=n?null:function(e,t,n){const r=t.videoSend.find((t=>t.ssrc===e));if(!r)return null;const i={},o=r.inputFrame,s=o&&o.height||n&&n._videoHeight||0,a=o&&o.width||n&&n._videoWidth||0,c=o&&o.frameRate||0;return nU(i,Gj.HEIGHT,s),nU(i,Gj.WIDTH,a),nU(i,Gj.FRAME_RATE,c),i}(l[0].ssrcId,e,c),s=n?null:function(e){const t={};return nU(t,Wj.RETRANSMIT,e.bitrate.retransmit),nU(t,Wj.TARGET_ENCODED,e.bitrate.targetEncoded),nU(t,Wj.ACTUAL_ENCODED,e.bitrate.actualEncoded),nU(t,Wj.TRANSMIT,e.bitrate.transmit),nU(t,Wj.BANDWIDTH,e.sendBandwidth),t}(e);o=Object.assign({},r,i,s)}else s=n?void 0:function(e,t,n){const r=t.videoSend.find((t=>t.ssrc===e));if(!r)return;const i={},o=r.sentFrame;if(o&&(nU(i,Yj.HEIGHT,o.height),nU(i,Yj.WIDTH,o.width),nU(i,Yj.FRAME_RATE,o.frameRate)),n){const t=n.videoSend.find((t=>t.ssrc===e));if(t){let e=eU*tU;t.timestamp&&r.timestamp&&(e=r.timestamp-t.timestamp),null!=t.packets&&null!=r.packets&&nU(i,Yj.PACKAGE_RATE,1e3*(r.packets-t.packets)/e),null!=r.packetsLost&&null!=t.packetsLost&&nU(i,Yj.PACKAGE_LOST,r.packetsLost-t.packetsLost),null!=t.bytes&&null!=r.bytes&&nU(i,Yj.BITRATE,8*(r.bytes-t.bytes)/e)}}return i}(l[0].ssrcId,e,t);break;case dI.LocalAudioTrack:i=n?void 0:function(e,t,n,r){const i=t.audioSend.find((t=>t.ssrc===e));if(!i)return;const o={};o[Jj.DISABLED]=r._originMediaStreamTrack&&!r._originMediaStreamTrack.enabled||r._mediaStreamTrack&&!r._mediaStreamTrack.enabled?1:0;const s=r._source.getAccurateVolumeLevel(),a=i.inputLevel;nU(o,Jj.LEVEL,100*(null==a?s:a)),nU(o,Qj.PCM_LEVEL,100*s),nU(o,Jj.AEC_RETURN_LOSS,i.aecReturnLoss),nU(o,Jj.AEC_RETURN_LOSS_ENH,i.aecReturnLossEnhancement),o[Jj.FREEZE]=0;const c=n&&n.audioSend.find((t=>t.ssrc===e));if(c){let e=eU*tU;c.timestamp&&i.timestamp&&(e=i.timestamp-c.timestamp),null!=c.bytes&&null!=i.bytes&&nU(o,Jj.BITRATE,8*(i.bytes-c.bytes)/e),null!=c.packets&&null!=i.packets&&nU(o,Jj.PACKAGE_RATE,1e3*(i.packets-c.packets)/e)}return o}(l[0].ssrcId,e,t,c)}})),{high:o,low:s,audio:i}}getInboundStats(e,t,n){if(!this.requestRemoteMedia)return;const r=this.requestRemoteMedia()||[],i=[];return r.forEach((r=>{let[o,s]=r;const a={peer:o.uid};if(s.has(aI.VIDEO)&&o.videoTrack){const r=o._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(o._videoSSRC)||!1,i=o.videoTrack?function(e,t,n,r,i,o,s){const a=t.videoRecv.find((t=>t.ssrc===e));if(!a)return;const c={},{receivedFrame:l,outputFrame:d,decodeFrameRate:u}=a,h=n&&n.videoRecv.find((t=>t.ssrc===e));if(c[qj.FREEZE]=i&&gU.isRemoteVideoFreeze(r,a,h)?1:0,nU(c,Kj.FRAME_RATE_DECODE,u),nU(c,qj.QP_SUM,a.qpSumPerFrame),a.framesRateFirefox&&nU(c,qj.FRAME_RATE,a.framesRateFirefox),l&&nU(c,qj.FRAME_RATE,l.frameRate),h){const e=t.timestamp-n.timestamp||(s?eU:tU*eU);null!=a.packetsLost&&null!=h.packetsLost&&nU(c,qj.PACKAGE_LOST,a.packetsLost-h.packetsLost),null!=h.bytes&&null!=a.bytes&&nU(c,qj.BITRATE,8*(a.bytes-h.bytes)/e),null!=h.packets&&null!=a.packets&&nU(c,qj.PACKAGE_RATE,1e3*(a.packets-h.packets)/e)}if(s)return c;if(l?(nU(c,qj.HEIGHT,l.height),nU(c,qj.WIDTH,l.width)):r&&(nU(c,qj.HEIGHT,r._videoHeight||0),nU(c,qj.WIDTH,r._videoWidth||0)),d&&nU(c,Kj.FRAME_RATE_RENDER,d.frameRate),nU(c,qj.JITTER_BUFFER,a.jitterBufferMs),nU(c,qj.CURRENT_DELAY,a.currentDelayMs),nU(c,qj.FIRS,a.firsCount),nU(c,qj.NACKS,a.nacksCount),nU(c,qj.PLIS,a.plisCount),r){c[qj.DISABLED]=r._originMediaStreamTrack.enabled&&r._mediaStreamTrack.enabled?0:1;const e=r._player;if(e){const{freezeTimeCounterList:t,renderFreezeAccTime:n}=e;if(t&&t.length>0&&nU(c,Kj.FREEZE_TIME,t.splice(0,1)[0]),o&&"visible"===MR.visibility){const t=Math.min(6e3,n);e.renderFreezeAccTime=Math.max(0,n-t),nU(c,Kj.FREEZE_TIME_RENDER,t)}}}if(c[qj.PLAYER_STATUS]=aw[r._player?r._player.videoElementStatus:"uninit"],h&&void 0!==a.totalInterFrameDelay&&void 0!==a.totalSquaredInterFrameDelay&&void 0!==h.totalInterFrameDelay&&void 0!==h.totalSquaredInterFrameDelay){const e=a.totalInterFrameDelay-h.totalInterFrameDelay,t=a.totalSquaredInterFrameDelay-h.totalSquaredInterFrameDelay,n=a.framesDecodeCount-h.framesDecodeCount,r=e/n*1e3,i=Math.round(1e3*Math.sqrt((t-Math.pow(e,2)/n)/n));!isNaN(i)&&r+i>Math.max(3*r,r+150)&&(c[qj.I_FRAME_DELAY]=i)}return c}(o._videoSSRC,e,t,o.videoTrack,!0===r,this.needUploadRenderFreezeTime,n):void 0;i&&(a.video=i)}if(s.has(aI.AUDIO)&&o.audioTrack){const r=o.audioTrack?function(e,t,n,r,i){const o=t.audioRecv.find((t=>t.ssrc===e));if(!o)return;const s={},a=n&&n.audioRecv.find((t=>t.ssrc===e)),{receivedFrames:c,droppedFrames:l}=o;var d;if(nU(s,Xj.JITTER,o.jitterMs),null!=c&&null!=l&&(s[Xj.FREEZE]=0===(d=c)||100*l/d>20?1:0),a){const e=t.timestamp-n.timestamp||(i?eU:eU*tU);null!=o.packets&&null!=a.packets&&nU(s,Xj.PACKAGE_RATE,1e3*(o.packets-a.packets)/e),null!=a.bytes&&null!=o.bytes&&nU(s,Xj.BITRATE,8*(o.bytes-a.bytes)/e),null!=o.packetsLost&&null!=a.packetsLost&&nU(s,Xj.PACKAGE_LOST,o.packetsLost-a.packetsLost)}if(i)return s;const u=r._source.getAccurateVolumeLevel(),h=o.outputLevel;if(nU(s,Zj.LEVEL,100*(null==h?u:h)),nU(s,Xj.PCM_LEVEL,100*u),r&&(s[Xj.DISABLED]=r._originMediaStreamTrack.enabled&&r._mediaStreamTrack.enabled?0:1),nU(s,Xj.JITTER_BUFFER,o.jitterBufferMs),nU(s,Xj.CURRENT_DELAY,o.jitterBufferMs),s[Xj.PLAYER_STATUS]=aw[Bw.getPlayerState(r.getTrackId())],a){const e=o.concealedSamples-a.concealedSamples;e>0&&nU(s,Xj.CONCEALED_SAMPLES,e)}return s}(o._audioSSRC,e,t,o.audioTrack,n):void 0;r&&(a.audio=r)}(a.video||a.audio)&&i.push(a)})),this.needUploadRenderFreezeTime=!this.needUploadRenderFreezeTime,i}startUploadTransportStats(){this.uploadTransportStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats()}stopUploadTransportStats(){this.uploadTransportStarted=!1}startUploadOutboundStats(){this.uploadOutboundStarted||(this.uploadOutboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=window.setInterval((()=>{if(!this.requestAllTracks||!this.requestUpload)return;const e=(this.requestAllTracks()||[]).find((e=>e instanceof tR));if(e&&e._external.getDenoiserStats){const t=e._external.getDenoiserStats();t&&this.requestUpload(gb.DENOISER_STATS,t)}}),2e3),this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=window.setInterval((()=>{this.requestAllTracks&&this.requestUpload&&this.requestAllTracks().forEach((e=>{e.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}))}),2e3))}stopUploadOutboundStats(){this.uploadOutboundStarted&&(this.uploadOutboundStarted=!1,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=void 0)}startUploadInboundStats(){this.uploadInboundStarted||(this.uploadInboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=window.setInterval((()=>{this.requestUpload&&this.requestRemoteMedia&&(this.requestRemoteMedia()||[]).forEach((e=>{let[t,n]=e;n.has(aI.VIDEO)&&t.videoTrack&&t.videoTrack.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)})),n.has(aI.AUDIO)&&t.audioTrack&&t.audioTrack.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}))}),2e3))}stopUploadInboundStats(){this.uploadInboundStarted&&(this.uploadInboundStarted=!1,this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer);const e=new Map;this.uploadExtUsageStatsTimer=window.setInterval((async()=>{const t=Date.now(),n={connectionInterval:ST("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:t};let r=[];const i=this.requestAllTracks&&this.requestAllTracks()||[];for(const e of i)!e.muted&&e.enabled&&(r=r.concat(await e.getProcessorUsage()));const o=this.requestRemoteMedia&&this.requestRemoteMedia()||[];for(const[e,c]of o)c.has(aI.VIDEO)&&e.videoTrack&&(r=r.concat(await e.videoTrack.getProcessorUsage())),c.has(aI.AUDIO)&&e.audioTrack&&(r=r.concat(await e.audioTrack.getProcessorUsage()));if(0===r.length)return;n.details=function(e,t){const n={};for(const{id:s,value:a,level:c,direction:l}of e){var r;const e=null!==(r=t.get(s))&&void 0!==r?r:0,d=2===a?e+ST("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:e;var i,o;t.set(s,d),n[s]?(2===a&&(n[s].value=a),c>n[s].level&&(n[s].level=c),"remote"===l&&(n[s].remoteUidCount+=1),n[s].totalTs=null!==(i=t.get(s))&&void 0!==i?i:0):n[s]={value:a,level:c,remoteUidCount:"local"===l?0:1,totalTs:null!==(o=t.get(s))&&void 0!==o?o:0}}return Object.keys(n).map((e=>{const{level:t,value:r,totalTs:i}=n[e];return{id:e,level:t,value:r,totalTs:i}}))}(r,e);const s=Date.now(),a=s>t?s:t+1;this.requestUpload&&this.requestUpload(gb.EXTENSION_USAGE_STATS,{usageStats:n,sendTs:a})}),ST("EXTENSION_USAGE_UPLOAD_INTERVAL"))}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer),this.uploadExtUsageStatsTimer=void 0)}}class oU{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio||this._audio_pre_subscribed)return this._audioTrack}get videoTrack(){if(this.hasVideo||this._video_pre_subscribed)return this._videoTrack}get dataChannels(){return this._dataChannels}constructor(e,t){oh(this,"uid",void 0),oh(this,"_uintid",void 0),oh(this,"_trust_in_room_",!0),oh(this,"_trust_audio_enabled_state_",!0),oh(this,"_trust_video_enabled_state_",!0),oh(this,"_trust_audio_mute_state_",!0),oh(this,"_trust_video_mute_state_",!0),oh(this,"_audio_muted_",!1),oh(this,"_video_muted_",!1),oh(this,"_audio_enabled_",!0),oh(this,"_video_enabled_",!0),oh(this,"_audio_added_",!1),oh(this,"_video_added_",!1),oh(this,"_is_pre_created",!1),oh(this,"_video_pre_subscribed",!1),oh(this,"_audio_pre_subscribed",!1),oh(this,"_trust_video_stream_added_state_",!0),oh(this,"_trust_audio_stream_added_state_",!0),oh(this,"_audioTrack",void 0),oh(this,"_videoTrack",void 0),oh(this,"_dataChannels",[]),oh(this,"_audioSSRC",void 0),oh(this,"_videoSSRC",void 0),oh(this,"_audioOrtc",void 0),oh(this,"_videoOrtc",void 0),oh(this,"_cname",void 0),oh(this,"_rtxSsrcId",void 0),oh(this,"_videoMid",void 0),oh(this,"_audioMid",void 0),this.uid=e,this._uintid=t}}var sU;function aU(e,t){var n;let r;switch(t){case dI.LocalAudioTrack:r=Qb.Audio;break;case dI.LocalVideoTrack:r=Rr(n=e._hints).call(n,VC.SCREEN_TRACK)?Qb.Screen:Qb.High;break;case dI.LocalVideoLowTrack:r=Qb.Low}return r}function cU(e){const t=bC();if(e.some((e=>e._bypassWebAudio)))throw new Wv(Hv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");if(!t.webAudioMediaStreamDest)throw new Wv(Hv.NOT_SUPPORTED,"cannot publish multiple tracks because your browser does not support audio mixing")}function lU(e,t){cU(e);const n=t||new rR;return e.forEach((e=>n.addAudioTrack(e))),n}function dU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dU(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY"}(sU||(sU={}));class hU extends l_{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(hI.StateChange,t,this._state)}constructor(e,t){super(),oh(this,"store",void 0),oh(this,"statsUploader",void 0),oh(this,"sendConnection",void 0),oh(this,"recvConnection",void 0),oh(this,"localTrackMap",new Map),oh(this,"remoteUserMap",new Map),oh(this,"localDataChannels",[]),oh(this,"pendingLocalTracks",[]),oh(this,"pendingRemoteTracks",[]),oh(this,"statsCollector",void 0),oh(this,"dtlsFailedCount",0),oh(this,"sendMutex",new pE("P2PChannel2-send-mutex")),oh(this,"recvMutex",new pE("P2PChannel2-recv-mutex")),oh(this,"_state",uI.Disconnected),oh(this,"_restartStates",["disconnected","failed"]),oh(this,"reconnectInterval",void 0),oh(this,"uploadUnplinkStarted",!1),oh(this,"uploadDownlinkStarted",!1),oh(this,"uplinkStateUploadInterval",void 0),oh(this,"downlinkStatsUploadInterval",void 0),oh(this,"handleMuteLocalTrack",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleMuteLocalTrack");try{if(!this.sendConnection||this.state!==uI.Connected)return void n(new Wv(Hv.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established."));const r=this.filterTobeMutedTracks(e);if(0===r.length)return void t();const s=r.find((e=>"videoLowTrack"===e[0]));s&&s[1].track._originMediaStreamTrack.stop(),await this.sendConnection.muteLocal(r.map((e=>{let[,{id:t}]=e;return t})));let a=!1;var i,o;a="video"===e.trackMediaType?!(null===(i=this.localTrackMap.get(dI.LocalAudioTrack))||void 0===i||!i.track._muted):void 0===(null===(o=this.localTrackMap.get(dI.LocalVideoTrack))||void 0===o?void 0:o.id);const c=this.createMuteMessage(r);await N_(this,hI.RequestMuteLocal,c);const l="video"===e.trackMediaType?CI.MUTE_LOCAL_VIDEO:CI.MUTE_LOCAL_AUDIO;await N_(this,hI.RequestP2PMuteLocal,{action:l,message:c,isMuteAll:a}),t()}catch(e){n(e)}finally{r()}})),oh(this,"handleUnmuteLocalTrack",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleUnmuteLocalTrack");try{if(!this.sendConnection||this.state!==uI.Connected)return void n(new Wv(Hv.INVALID_OPERATION,"Cannot call P2PChannel2.handleUnmuteLocalTrack before sendConnection established."));const r=this.filterTobeUnmutedTracks(e);if(0===r.length)return void t();await this.sendConnection.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const i=this.createUnmuteMessage(r),o="video"===e.trackMediaType?CI.UNMUTE_LOCAL_VIDEO:CI.UNMUTE_LOCAL_AUDIO;await N_(this,hI.RequestP2PMuteLocal,{action:o,message:i}),t()}catch(e){n(e)}finally{r()}})),oh(this,"handleUpdateVideoEncoder",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleSetVideoEncoder");try{const n=this.localTrackMap.get(dI.LocalVideoTrack);if(!this.sendConnection||!n||n.track!==e||this.state!==uI.Connected)return void t();const{id:r,track:i}=n;r&&(await this.sendConnection.updateSendParameters(r,i),await this.sendConnection.updateEncoderConfig(r,i),this.emit(hI.UpdateVideoEncoder,i)),t()}catch(e){n(e)}finally{r()}})),oh(this,"handleSetOptimizationMode",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleSetOptimizationMode");try{const n=this.localTrackMap.get(dI.LocalVideoTrack);if(!this.sendConnection||!n||n.track!==e||this.state!==uI.Connected)return;const{id:r,track:i}=n;r&&await this.sendConnection.updateSendParameters(r,i),t()}catch(e){n(e)}finally{r()}})),oh(this,"handleReplaceTrack",(async(e,t,n,r)=>{let i;VT.debug("[".concat(this.store.clientId,"] P2PChannel2 handleReplaceTrack for [track-id-").concat(e.getTrackId(),"]")),"boolean"==typeof r&&r||(i=await this.sendMutex.lock("From P2PChannel2.handleReplaceTrack"));try{var o;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!this.sendConnection||!n||void 0===n[1].id||this.state!==uI.Connected)return void t();if(await(null===(o=this.sendConnection)||void 0===o?void 0:o.replaceTrack(e,n[1].id)),n[0]===dI.LocalVideoTrack&&bC().supportDualStreamEncoding){const t=this.localTrackMap.get(dI.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new cv(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}t()}catch(e){n(e)}finally{var s;null===(s=i)||void 0===s||s()}})),oh(this,"handleGetLocalVideoStats",(e=>{e(this.statsCollector.getLocalVideoTrackStats())})),oh(this,"handleGetLocalAudioStats",(e=>{e(this.statsCollector.getLocalAudioTrackStats())})),oh(this,"handleGetRemoteVideoStats",(e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid])),oh(this,"handleGetRemoteAudioStats",(e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid])),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new iU(e),this.bindStatsUploaderEvents(),this.reconnectInterval=window.setInterval((()=>{[this.sendConnection,this.recvConnection].forEach((e=>{e&&("disconnected"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||this.handleDisconnect(e.direction))}))}),ST("ICE_RESTART_INTERVAL"))}async startP2PConnection(e,t){throw new Wv(Hv.NOT_SUPPORTED,"p2p mode does not support startP2PConnection.")}async connect(e,t,n,r,i,o){throw new Wv(Hv.NOT_SUPPORTED,"p2p mode does not support connect.")}async startP2P(e,t){let n;try{if(t){this.recvConnection&&(VT.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset recvConnection.")),this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection)),n=await this.recvMutex.lock("From P2PChannel.startP2P"),this.recvConnection=new zj(e,this.store,_b.RECEIVE_ONLY),this.bindConnectionEvents(this.recvConnection);const r=await this.recvConnection.establish(t);return{iceParameters:r.iceParameters,dtlsParameters:r.dtlsParameters,sdp:r.sdp}}{this.state=uI.New,this.sendConnection&&(VT.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset sendConnection.")),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection)),n=await this.sendMutex.lock("From P2PChannel.startP2P"),this.sendConnection=new zj(e,this.store),this.store.peerConnectionStart(),this.bindConnectionEvents(this.sendConnection);const t=await this.sendConnection.establish();return{iceParameters:t.iceParameters,dtlsParameters:t.dtlsParameters,sdp:t.sdp}}}finally{n&&n()}}async p2pConnect(e){if(!this.sendConnection)throw new Wv(Hv.UNEXPECTED_ERROR,"Cannot P2PChannel2.p2pConnect before P2PChannel2.startP2PConnection .");this.store.peerConnectionStart(),await this.sendConnection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=uI.Connected}async addRemoteCandidate(e,t){if(t===_b.RECEIVE_ONLY){if(!this.sendConnection)throw new Wv(Hv.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.sendConnection.addRemoteCandidate(e)}else{if(!this.recvConnection)throw new Wv(Hv.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.recvConnection.addRemoteCandidate(e)}}publish(e,t,n){var r=this;return DP((function*(){const i=yield bP(r.sendMutex.lock("From P2PChannel.publish"));try{if(!r.sendConnection||r.state!==uI.Connected){r.throwIfTrackTypeNotMatch(e);const t=e.filter((e=>-1===r.pendingLocalTracks.indexOf(e)));return void(r.pendingLocalTracks=r.pendingLocalTracks.concat(t))}r.store.pubId=r.store.pubId+1,SP.markPublishStart(r.store.clientId,r.store.pubId);const i=r.filterTobePublishedTracks(e,t,n);if(0===i.length)return void(yield bP(r.tryToUnmuteAudio(e)));i.forEach((e=>{let{track:t,type:n}=e;const i=Date.now();r.store.publish(t.getTrackId(),n===dI.LocalAudioTrack?"audio":"video",i)})),r.bindLocalTrackEvents(i);const o=yield bP(r.sendConnection.send(i.map((e=>{let{track:t}=e;return t})),r.store.codec,r.store.audioCodec)),s=(yield bP(o.next())).value,a=r.createGatewayPublishMessage(i,s);try{yield a}catch(e){throw o.throw(e),(null==e?void 0:e.code)===Hv.WS_ABORT&&i.forEach((e=>{let{track:t}=e;-1===r.pendingLocalTracks.indexOf(t)&&r.pendingLocalTracks.push(t)})),r.unbindLocalTrackEvents(i),e}yield bP(o.next()),i.forEach((e=>{let{type:t}=e;r.statsCollector.addLocalStats(t)})),r.statsUploader.startUploadOutboundStats(),r.assignLocalTracks(i,s),i.forEach((e=>{let{track:t,type:n}=e;const i=Date.now();r.store.publish(t.getTrackId(),n===dI.LocalAudioTrack?"audio":"video",void 0,i)})),r.startUploadUplinkState()}finally{i()}}))()}async unpublish(e){if(!this.sendConnection||this.state!==uI.Connected)return void(0===e.length?this.pendingLocalTracks.length=0:this.pendingLocalTracks=this.pendingLocalTracks.filter((t=>!Rr(e).call(e,t))));const t=this.filterTobeUnpublishedTracks(e);if(0===t.length)return;const n=t.find((e=>"videoLowTrack"===e[0]));n&&n[1].track.close();const r=this.createGatewayUnpublishMessage(t);if(await this.sendConnection.stopSending(t.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map((e=>{let[t,{track:n}]=e;return{type:t,track:n}}))),t.forEach((e=>{let[t]=e;this.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&(this.statsUploader.stopUploadOutboundStats(),this.stopUploadUplinkState()),this.sendConnection&&this.state===uI.Connected)return n&&n[1].track.close(),r;e.forEach((e=>{const t=this.pendingLocalTracks.indexOf(e);-1!==t&&this.pendingLocalTracks.splice(t,1)}))}startUploadUplinkState(){if(this.uploadUnplinkStarted)return;this.uploadUnplinkStarted=!0,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval);const e=()=>{const e=[],t=[];Array.from(this.localTrackMap.entries()).forEach((n=>{let[r,{track:i,ssrcs:o}]=n;const s={stream_type:aU(i,r),ssrcs:o};i._muted||!i._enabled?e.push(s):t.push(s)})),e.length>0&&e.forEach((e=>{N_(this,hI.RequestMuteLocal,[e])})),t.length>0&&t.forEach((e=>{N_(this,hI.RequestUnmuteLocal,[e])}))};e(),this.uplinkStateUploadInterval=window.setInterval((()=>{e()}),3e3)}stopUploadUplinkState(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval))}publishLowStream(e){return DP((function*(){throw new Wv(Hv.NOT_SUPPORTED,"p2p mode does not support publishLowStream.")}))()}async republish(){this.pendingLocalTracks.length>0&&(VT.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await I_(this,hI.RequestRePublish,this.pendingLocalTracks),this.emit(hI.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async unpublishLowStream(){throw new Wv(Hv.NOT_SUPPORTED,"p2p mode does not support unpublishLowStream.")}async subscribe(e,t,n,r){var i;if(!this.recvConnection)throw new Wv(Hv.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");if(null!==(i=this.remoteUserMap.get(e))&&void 0!==i&&i.has(t))return;const{track:o,mid:s,transceiver:a}=await this.recvConnection.receive(t,[{ssrcId:n}],String(e.uid),r);t===aI.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(o):(e._audioTrack=new OR(o,e.uid,e._uintid,this.store),VT.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),a&&e._audioTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoSSRC=n,e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(o):(e._videoTrack=new AR(o,e.uid,e._uintid,this.store),VT.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),a&&e._videoTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(e,e._videoTrack));const c=this.remoteUserMap.get(e);c?c.set(t,s):this.remoteUserMap.set(e,new Map([[t,s]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats(),this.startUploadDownlinkState();const l=this.pendingRemoteTracks.findIndex((n=>{let{user:r,kind:i}=n;return r.uid===e.uid&&t===i}));-1!==l&&(this.pendingRemoteTracks.splice(l,1),this.emit(hI.MediaReconnectEnd,e.uid))}async mockSubscribe(e,t,n,r){if(!this.recvConnection)throw new Wv(Hv.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");await this.recvConnection.mockReceive(t,[{ssrcId:n}],String(e.uid),r)}async unsubscribe(e,t,n){const r=this.pendingRemoteTracks.filter((n=>{let{user:r,kind:i}=n;return void 0!==t?r.uid===e.uid&&t===i:r.uid===e.uid}));if(r.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),this.recvConnection||n||r.forEach((t=>{let{kind:n}=t;var r;if(n===aI.AUDIO)null===(r=e._audioTrack)||void 0===r||r._destroy(),e._audioTrack=void 0;else if(n===aI.VIDEO){var i;null===(i=e._videoTrack)||void 0===i||i._destroy(),e._videoTrack=void 0}})),!this.recvConnection)return;const i=this.filterTobeUnSubscribedTracks(e,t);0!==i.length&&(await this.recvConnection.stopReceiving(i.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawRemoteTracks(i),0===this.remoteUserMap.size&&(this.statsUploader.stopUploadInboundStats(),this.stopUploadDownlinkState()),i.forEach((e=>{let[t,{kind:r}]=e;var i,o;if(r===aI.VIDEO&&t._videoSSRC&&(null===(i=this.recvConnection)||void 0===i||i.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),r===aI.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),n||(null===(o=t._videoTrack)||void 0===o||o._destroy(),t._videoTrack=void 0);else if(r===aI.AUDIO){var s;this.unbindRemoteTrackEvents(t._audioTrack),n||(null===(s=t._audioTrack)||void 0===s||s._destroy(),t._audioTrack=void 0)}})),i.forEach((e=>{let[,{kind:t}]=e;N_(this,hI.RequestP2PMuteRemote,t)})))}startUploadDownlinkState(){if(this.uploadDownlinkStarted)return;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);const e=()=>Array.from(this.remoteUserMap.entries()).forEach((e=>{let[,t]=e;[aI.VIDEO,aI.AUDIO].forEach((e=>{t.has(e)?N_(this,hI.RequestP2PUnmuteRemote,e):N_(this,hI.RequestP2PMuteRemote,e)}))}));e(),this.downlinkStatsUploadInterval=window.setInterval((()=>{e()}),3e3)}stopUploadDownlinkState(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval))}getAllDataChannels(){return this.localDataChannels}async massSubscribe(e){throw new Wv(Hv.NOT_SUPPORTED,"p2p mode does not support massSubscribe.")}async massSubscribeNoLock(e){throw new Wv(Hv.NOT_SUPPORTED,"p2p mode does not support massSubscribeNoLock.")}async massUnsubscribe(e){throw new Wv(Hv.NOT_SUPPORTED,"p2p mode does not support massUnsubscribe.")}async massUnsubscribeNoLock(e){throw new Wv(Hv.NOT_SUPPORTED,"p2p mode does not support massUnsubscribeNoLock.")}async muteRemote(e,t){if(!this.recvConnection)return;const n=this.remoteUserMap.get(e);if(!n)return void VT.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid,"."));if(!n.get(t))return void VT.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));const r=t===aI.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==r&&this.recvConnection.setStatsRemoteVideoIsReady(r,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.recvConnection)return;const n=this.remoteUserMap.get(e);n?n.get(t)||VT.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,".")):VT.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid,"."))}getAllTracks(e){const t=this.localTrackMap.get(dI.LocalAudioTrack);if((null==t?void 0:t.track)instanceof rR){const n=t.track;return Array.from(this.localTrackMap.entries()).filter((e=>{let[t]=e;return t!==dI.LocalAudioTrack})).filter((t=>{let[n]=t;return!(e&&n===dI.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t})).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter((t=>{let[n]=t;return!(e&&n===dI.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t}))}reportPublishEvent(e,t,n,r,i){if(e){const n=this.localTrackMap.get(dI.LocalAudioTrack),o=r?this.localTrackMap.get(dI.LocalVideoLowTrack):this.localTrackMap.get(dI.LocalVideoTrack);eb.publish(this.store.sessionId,{eventElapse:SP.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==n?void 0:n.track.getTrackLabel(),videoName:null==o?void 0:o.track.getTrackLabel(),screenshare:-1!==(null==o?void 0:o.track._hints.indexOf(VC.SCREEN_TRACK)),audio:!!n,video:!!o,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var o;n||(n=[]);const s=n.find((e=>e instanceof eR)),a=r?null===(o=this.localTrackMap.get(dI.LocalVideoTrack))||void 0===o?void 0:o.track:n.find((e=>e instanceof SR));eb.publish(this.store.sessionId,{eventElapse:SP.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==s?void 0:s.getTrackLabel(),videoName:null==a?void 0:a.getTrackLabel(),screenshare:-1!==(null==a?void 0:a._hints.indexOf(VC.SCREEN_TRACK)),audio:!!s,video:!!a,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,n,r){const i=r===aI.VIDEO?n._videoSSRC:n._audioSSRC;i&&eb.subscribe(this.store.sessionId,{succ:e,ec:t,video:r===aI.VIDEO,audio:r===aI.AUDIO,peerid:n.uid,subscribeRequestid:r===aI.VIDEO?n._videoSSRC:n._audioSSRC,p2pid:this.store.p2pId,eventElapse:SP.measureFromSubscribeStart(this.store.clientId,i)})}reset(){VT.debug("[".concat(this.store.clientId,"] P2PChannel2.reset")),this.sendMutex=new pE("P2PChannel2-send-mutex"),this.sendMutex=new pE("P2PChannel2-recv-mutex"),this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(dI.LocalAudioTrack);if((null==e?void 0:e.track)instanceof rR){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach((e=>{t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.reconnectInterval&&(window.clearInterval(this.reconnectInterval),this.reconnectInterval=void 0),this.state=uI.Disconnected}getStats(e){var t,n;return e?null===(n=this.recvConnection)||void 0===n?void 0:n.getStats():null===(t=this.sendConnection)||void 0===t?void 0:t.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.recvConnection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(dI.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(dI.LocalVideoTrack);if(e)return{width:e.track._videoWidth||0,height:e.track._videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof SR||t&&t.track instanceof eR?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}getRemoteMedia(e){var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t.uid===e));return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map((e=>{let[t]=e;return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}}));const t=this.localTrackMap.get(dI.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=ep(e).call(e,((e,t)=>e.level-t.level)),e}async disconnectForReconnect(){this.sendConnection&&this.recvConnection&&(VT.debug("[".concat(this.store.clientId,"] P2PChannel2.disconnectForReconnect closing P2PConnection")),this.state=uI.Reconnecting,ST("KEEP_LAST_FRAME")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t]=e;var n;t._videoTrack&&t._videoTrack._player&&(null===(n=t._videoTrack._player.getVideoElement())||void 0===n||n.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())})),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0,this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0,0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((e=>{var t;let[n,{track:r}]=e;switch(n){case dI.LocalVideoTrack:Rr(t=r._hints).call(t,VC.LOW_STREAM)?r.close():this.pendingLocalTracks.push(r);break;case dI.LocalAudioTrack:r instanceof rR?this.pendingLocalTracks=this.pendingLocalTracks.concat(r.trackList):this.pendingLocalTracks.push(r);case dI.LocalVideoLowTrack:}})),this.emit(hI.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;Array.from(ph(n).call(n)).forEach((e=>{this.setPendingRemoteMedia(t,e)})),this.emit(hI.MediaReconnectStart,t.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),VT.debug("[".concat(this.store.clientId,"] P2PChannel2 disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(e,t){for(const n of this.pendingRemoteTracks){const{user:r,kind:i}=n;if((e instanceof oU?e.uid:e)===r.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}async restartICE(e,t){let n,r;if(e===_b.SEND_ONLY){if(!this.sendConnection)throw new Wv(Hv.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.");n=await this.sendMutex.lock("From P2PChannel.restartICE"),r=this.sendConnection}else{if(!this.recvConnection)throw new Wv(Hv.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before recvConnection established.");n=await this.recvMutex.lock("From P2PChannel.restartICE"),r=this.recvConnection}try{if(t){const e=await r.restartICE(t);return r.isInRestartIce=!1,e}{const e=await r.restartICE();if(e){const t=await I_(this,hI.RequestP2PRestartICE,{direction:_b.RECEIVE_ONLY,iceParameter:e});await r.restartICE(t),r.isInRestartIce=!1}}}finally{n()}}getUplinkNetworkQuality(){if(!this.sendConnection)return 0;const e=this.sendConnection.getStats(),t=this.localTrackMap.get(dI.LocalVideoTrack),n=this.localTrackMap.get(dI.LocalAudioTrack),r=e.videoSend.find((e=>{var n;return e.ssrc===(null==t||null===(n=t.ssrcs)||void 0===n?void 0:n[0].ssrcId)})),i=e.audioSend.find((e=>{var t;return e.ssrc===(null==n||null===(t=n.ssrcs)||void 0===t?void 0:t[0].ssrcId)}));if(!r||!i)return 1;const o=C_(this,hI.NeedSignalRTT),s=r?r.rttMs:void 0,a=i?i.rttMs:void 0,c=s&&a?(s+a)/2:s||a,l=(c&&o?(c+o)/2:c||o)||0,d=100*e.sendPacketLossRate*.7/50+.3*l/1500,u=d<.17?1:d<.36?2:d<.59?3:d<.1?4:5,h=null==t?void 0:t.track;if(h&&h._encoderConfig&&-1===h._hints.indexOf(VC.SCREEN_TRACK)){const t=h._encoderConfig.bitrateMax,n=e.bitrate.actualEncoded;if(t&&n){const e=(1e3*t-n)/(1e3*t);return rb[e<.15?0:e<.3?1:e<.45?2:e<.6?3:4][u]}}return u}getDownlinkNetworkQuality(){if(!this.recvConnection)return 0;const e=this.recvConnection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach((n=>{let[r]=n;const i=r._audioSSRC,o=r._videoSSRC,s=e.audioRecv.find((e=>e.ssrc===i)),a=e.videoRecv.find((e=>e.ssrc===o));if(!s&&!a)return void(t+=1);const c=C_(this,hI.NeedSignalRTT),l=e.rtt,d=(l&&c?(l+c)/2:l||c)||0,u=s?s.jitterMs:void 0,h=e.recvPacketLossRate;let p=.7*h*100/50+.3*d/1500;u&&(p=.6*h*100/50+.2*d/1500+.2*u/400),t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5})),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new cv(((t,n)=>{this.handleMuteLocalTrack(e,t,n)}))}filterTobePublishedTracks(e,t,n){const r=[],i=bC(),o=this.getAllTracks();e=H_(e=e.filter((e=>-1===o.indexOf(e))));let s=!1,a=!1;for(const c of e){if(c instanceof SR&&(this.localTrackMap.has(dI.LocalVideoTrack)||s?new Wv(Hv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(r.push({track:c,type:dI.LocalVideoTrack}),s=!0),t)){const e=this.getLowVideoTrack(c,n);r.push({track:e,type:dI.LocalVideoLowTrack})}if(c instanceof eR){const e=this.localTrackMap.get(dI.LocalAudioTrack);if(e){if(!(e.track instanceof rR))throw new Wv(Hv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new Wv(Hv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0)}else if(a){const e=r.find((e=>{let{type:t}=e;return t===dI.LocalAudioTrack}));if(!(e.track instanceof rR))throw new Wv(Hv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new Wv(Hv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(c)}else{if(!i.webAudioMediaStreamDest||c instanceof rR||c._bypassWebAudio)r.push({track:c,type:dI.LocalAudioTrack});else{const e=new rR;e.addAudioTrack(c),r.push({track:e,type:dI.LocalAudioTrack})}a=!0}}}return r}filterTobeUnpublishedTracks(e){const t=[],n=this.getAllTracks();e=H_(e=e.filter((e=>-1!==n.indexOf(e))));for(const r of e){if(r instanceof eR){const e=this.localTrackMap.get(dI.LocalAudioTrack);if(!e)continue;e.track instanceof rR?(e.track.removeAudioTrack(r),this.unbindLocalAudioTrackEvents(r),0===e.track.trackList.length&&(t.push([dI.LocalAudioTrack,e]),e.track.close())):t.push([dI.LocalAudioTrack,e])}if(r instanceof SR){const e=this.localTrackMap.get(dI.LocalVideoTrack);if(!e)continue;t.push([dI.LocalVideoTrack,e]);const n=this.localTrackMap.get(dI.LocalVideoLowTrack);n&&t.push([dI.LocalVideoLowTrack,n])}}return t}bindLocalTrackEvents(e){e.forEach((e=>{let{track:t,type:n}=e;switch(n){case dI.LocalVideoTrack:t.addListener(zC.GET_STATS,this.handleGetLocalVideoStats),t.addListener(zC.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(zC.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(zC.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.addListener(zC.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),t.addListener(zC.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener(zC.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(zC.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case dI.LocalAudioTrack:this.bindLocalAudioTrackEvents(t);case dI.LocalVideoLowTrack:}}))}bindLocalAudioTrackEvents(e,t){e instanceof rR?e.trackList.forEach((e=>{e.addListener(zC.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(zC.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(zC.GET_STATS,this.handleGetLocalAudioStats),e.addListener(zC.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(zC.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.addListener(zC.GET_STATS,this.handleGetLocalAudioStats),e.addListener(zC.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(zC.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(zC.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(zC.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener(zC.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map((e=>{let[t,{track:n}]=e;return{track:n,type:t}}))),e.forEach((e=>{let{track:t,type:n}=e;switch(n){case dI.LocalVideoTrack:t.off(zC.GET_STATS,this.handleGetLocalVideoStats),t.off(zC.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(zC.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(zC.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off(zC.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),t.off(zC.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(zC.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(zC.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case dI.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);case dI.LocalVideoLowTrack:}}))}unbindLocalAudioTrackEvents(e){e instanceof rR?e.trackList.forEach((e=>{e.off(zC.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(zC.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(zC.GET_STATS,this.handleGetLocalAudioStats),e.off(zC.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(zC.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.off(zC.GET_STATS,this.handleGetLocalAudioStats),e.off(zC.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(zC.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(zC.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(zC.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(zC.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof AR&&t.addListener(zC.GET_STATS,(t=>{t(this.handleGetRemoteVideoStats(e))})),t instanceof OR&&t.addListener(zC.GET_STATS,(t=>{t(this.handleGetRemoteAudioStats(e))}))}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(zC.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;n.has(aI.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),n.has(aI.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)}))}createGatewayPublishMessage(e,t){return e.map(((e,n)=>{var r;let i,{track:o,type:s}=e;switch(s){case dI.LocalAudioTrack:i=Qb.Audio;break;case dI.LocalVideoTrack:i=Rr(r=o._hints).call(r,VC.SCREEN_TRACK)?Qb.Screen:Qb.High;break;case dI.LocalVideoLowTrack:i=Qb.Low}return{kind:s===dI.LocalAudioTrack?aI.AUDIO:aI.VIDEO,stream_type:i,mid:t[n].id,ssrcs:t[n].localSSRC,isMuted:o.muted||!o.enabled}}))}createGatewayUnpublishMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case dI.LocalVideoTrack:n=Rr(t=i._hints).call(t,VC.SCREEN_TRACK)?Qb.Screen:Qb.High;break;case dI.LocalAudioTrack:n=Qb.Audio;break;case dI.LocalVideoLowTrack:n=Qb.Low}return{stream_type:n,ssrcs:o,mid:s}}))}assignLocalTracks(e,t){e.forEach(((e,n)=>{let{track:r,type:i}=e;this.localTrackMap.set(i,{track:r,id:t[n].id,ssrcs:t[n].localSSRC})}))}withdrawLocalTracks(e){e.forEach((e=>{let[t]=e;this.localTrackMap.delete(t)}))}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{var n;VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: ").concat(e.name,".onConnectionStateChange(").concat(t,")")),this.emit(hI.PeerConnectionStateChange,t),"connected"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),"connected"===t&&(e.isInRestartIce=!1),Rr(n=this._restartStates).call(n,t)&&!e.isInRestartIce&&("disconnected"===t&&await nE(800),"disconnected"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||this.handleDisconnect(e.direction))},e.onICEConnectionStateChange=e=>{"connected"!==e||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),eb.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:p_.TRACER}).onSuccess(),this.emit(hI.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")"))},e.onDTLSTransportStateChange=e=>{VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")"))},e.onDTLSTransportError=e=>{VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")"))},e.onFirstAudioDecoded=e=>{var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));var r;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),null===(r=n.audioTrack)||void 0===r||r.emit(qC.FIRST_FRAME_DECODED),eb.firstRemoteFrame(this.store.sessionId,YT.FIRST_AUDIO_DECODE,qT.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:SP.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));n&&eb.firstRemoteFrame(this.store.sessionId,YT.FIRST_AUDIO_RECEIVED,qT.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:SP.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,n)=>{this.reportVideoFirstFrameDecoded(e,t,n)},e.onFirstVideoReceived=e=>{var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t._videoSSRC===e));n&&eb.firstRemoteFrame(this.store.sessionId,YT.FIRST_VIDEO_RECEIVED,qT.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:SP.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(e,t)=>{const n="relay"===e.candidateType,r="relay"===t.candidateType;"unknown"!==t.candidateType&&n===r||this.emit(hI.ConnectionTypeChange,n),VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(CN(t))," -> ").concat(JSON.stringify(CN(e)),")"))},e.onSelectedRemoteCandidateChanged=(e,t)=>{VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(CN(t))," -> ").concat(JSON.stringify(CN(e)),")"))},e.onFirstVideoDecodedTimeout=e=>{this.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)},e.onLocalCandidate=t=>{this.emit(hI.LocalCandidate,{candidate:t,direction:e.direction})}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.onLocalCandidate=void 0}async handleDisconnect(e){const t=e===_b.SEND_ONLY?this.sendConnection:this.recvConnection;t&&!t.isInRestartIce&&(t.isInRestartIce=!0,VT.debug("[".concat(this.store.clientId,"] [P2PChannel-").concat(t.name,"] start use restartICE")),e===_b.SEND_ONLY?this.restartICE(e):I_(this,hI.RequestP2PRestartICE,{direction:_b.SEND_ONLY}))}filterTobeMutedTracks(e){const t=[];if(-1===this.getAllTracks().indexOf(e))return t;const n=this.localTrackMap.get(dI.LocalAudioTrack);if(e instanceof eR&&(null==n?void 0:n.track)instanceof rR)return n.track.isActive||t.push([dI.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r&&(t.push(r),r[0]===dI.LocalVideoTrack)){const e=this.localTrackMap.get(dI.LocalVideoLowTrack);e&&t.push([dI.LocalVideoLowTrack,e])}return t}filterTobeUnmutedTracks(e){const t=[],n=this.localTrackMap.get(dI.LocalAudioTrack);if(e instanceof eR&&(null==n?void 0:n.track)instanceof rR)return n.track.isActive&&t.push([dI.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r)if(r[0]===dI.LocalVideoTrack){t.push(r);const e=this.localTrackMap.get(dI.LocalVideoLowTrack);e&&t.push([dI.LocalVideoLowTrack,e])}else t.push(r);return t}createMuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case dI.LocalAudioTrack:n=Qb.Audio;break;case dI.LocalVideoTrack:n=Rr(t=i._hints).call(t,VC.SCREEN_TRACK)?Qb.Screen:Qb.High;break;case dI.LocalVideoLowTrack:n=Qb.Low}return{stream_type:n,ssrcs:o,mid:s}}))}createUnmuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case dI.LocalAudioTrack:n=Qb.Audio;break;case dI.LocalVideoTrack:n=Rr(t=i._hints).call(t,VC.SCREEN_TRACK)?Qb.Screen:Qb.High;break;case dI.LocalVideoLowTrack:n=Qb.Low}return{stream_type:n,ssrcs:o,mid:s}}))}filterTobeUnSubscribedTracks(e,t){const n=[],r=this.remoteUserMap.get(e);if(!r)return n;if(t){const i=r.get(t);if(!i)return n;n.push([e,{kind:t,id:i}])}else Array.from(r.entries()).forEach((t=>{let[r,i]=t;n.push([e,{kind:r,id:i}])}));return n}createUnsubscribeMessage(e){const t=[];return e.forEach((e=>{let[n,{kind:r,id:i}]=e;switch(r){case aI.VIDEO:return void(n._videoSSRC&&t.push({stream_type:aI.VIDEO,ssrcId:n._videoSSRC}));case aI.AUDIO:return void(n._audioSSRC&&t.push({stream_type:aI.AUDIO,ssrcId:n._audioSSRC}))}})),t}withdrawRemoteTracks(e){e.forEach((e=>{let[t,{kind:n}]=e;const r=this.remoteUserMap.get(t);r&&(r.delete(n),0===Array.from(r.entries()).length&&this.remoteUserMap.delete(t))}))}async updateBitrateLimit(e){const t=this.localTrackMap.get(dI.LocalVideoTrack),n=this.localTrackMap.get(dI.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),n&&e.low_stream_uplink&&await n.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){if(this.sendConnection&&this.recvConnection){const e=this.sendConnection.peerConnectionState,t=this.recvConnection.peerConnectionState;return"connected"!==e&&"connected"!==t}return!0}async tryToUnmuteAudio(e){for(let t=0;t<e.length;t++)if(e[t]instanceof eR){const n=this.filterTobeUnmutedTracks(e[t]);if(0===n.length)continue;const r=this.createUnmuteMessage(n);return void await N_(this,hI.RequestUnmuteLocal,r)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=e=>this.getStats(e),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()).filter((e=>{let[,{ssrcs:t}]=e;return!!t})),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.recvConnection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(hI.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(hI.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await nE(gE(this.dtlsFailedCount,mE)),this.emit(hI.RequestReconnect)}async reconnectP2P(){}canPublishLowStream(){return this.localTrackMap.has(dI.LocalVideoTrack)||this.pendingLocalTracks.some((e=>e instanceof SR))}throwIfTrackTypeNotMatch(e){if(e.filter((e=>e instanceof SR)).length>1)throw new Wv(Hv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((e=>e instanceof eR)).length>1&&(e.some((e=>e instanceof eR&&e._bypassWebAudio))||!bC().webAudioMediaStreamDest))throw new Wv(Hv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const t of e){if(t instanceof SR&&this.pendingLocalTracks.some((e=>e instanceof SR)))throw new Wv(Hv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof eR&&this.pendingLocalTracks.some((e=>e instanceof eR))&&(!bC().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some((e=>e instanceof eR&&e._bypassWebAudio))))throw new Wv(Hv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){const n=!ST("DISABLE_DUAL_STREAM_USE_ENCODING")&&bC().supportDualStreamEncoding,r=uU(uU({},{width:160,height:120,framerate:15,bitrate:50}),t);let i;i=n?e._mediaStreamTrack.clone():Bj(e,r);const o=rE(8,"track-low-"),s=new SR(i,uU(uU({},n&&{scaleResolutionDownBy:NN(r,e)}),{},{frameRate:r.framerate,bitrateMax:r.bitrate,bitrateMin:r.bitrate}),void 0,void 0,o);return s.on(WC.TRANSCEIVER_UPDATED,(t=>{e._updateRtpTransceiver(t,BC.LOW_STREAM)})),s._hints.push(VC.LOW_STREAM),e.addListener(zC.NEED_CLOSE,(()=>{s.close()})),s}async globalLock(){return this.recvMutex.lock("From P2PChannel2.globalLock")}reportVideoFirstFrameDecoded(e,t,n,r){var i;const o=Array.from(ph(i=this.remoteUserMap).call(i)).find((t=>t._videoSSRC===e));if(o){r||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());const i=this.store.keyMetrics,s=i.subscribe.find((e=>e.userId===o.uid&&"video"===e.type));eb.firstRemoteVideoDecode(this.store.sessionId,YT.FIRST_VIDEO_DECODE,qT.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:n,subscribeElapse:SP.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:i.requestAPEnd||0,apStart:i.requestAPStart||0,joinGwEnd:i.joinGatewayEnd||0,joinGwStart:i.joinGatewayStart||0,pcEnd:i.peerConnectionEnd||0,pcStart:i.peerConnectionStart||0,subscriberEnd:(null==s?void 0:s.subscribeEnd)||0,subscriberStart:(null==s?void 0:s.subscribeStart)||0,videoAddNotify:(null==s?void 0:s.streamAdded)||0,state:r?1:0})}}async remoteMediaSsrcChanged(e,t,n){if(!this.recvConnection)return!1;const r=this.remoteUserMap.get(e);if(!r)return!1;const i=r.get(t);if(!i)return!1;const o=await this.recvConnection.getRemoteSSRC(i);return void 0!==o&&o!==n}resetConnection(e){VT.debug("[".concat(this.store.clientId,"] [P2PChannel2] reset connection to ").concat(e)),this.state===uI.Connected?(VT.debug("[".concat(this.store.clientId,"] [P2PChannel2] fallback to websocket but P2PChannel2 state still connected, disconnect first")),this.disconnectForReconnect()):(this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0))}async publishDataChannel(e){throw new Wv(Hv.NOT_SUPPORTED)}async unpublishDataChannel(e){throw new Wv(Hv.NOT_SUPPORTED)}async subscribeDataChannel(e,t){throw new Wv(Hv.NOT_SUPPORTED)}async unsubscribeDataChannel(e,t){throw new Wv(Hv.NOT_SUPPORTED)}hasPendingRemoteDataChannel(e,t){throw new Wv(Hv.NOT_SUPPORTED)}setPendingRemoteDataChannel(e,t){throw new Wv(Hv.NOT_SUPPORTED)}async preConnect(e,t,n,r,i,o){throw new Wv(Hv.NOT_SUPPORTED)}getEstablishParams(){throw new Wv(Hv.NOT_SUPPORTED)}async reSubscribe(e){throw new Wv(Hv.NOT_SUPPORTED)}async updateVideoStreamParameter(e,t){throw new Wv(Hv.NOT_SUPPORTED)}unbindRtpTransceiver(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((e=>{let[t,{track:n}]=e;t===dI.LocalVideoLowTrack?n._updateRtpTransceiver(void 0,BC.LOW_STREAM):n._updateRtpTransceiver(void 0)}))}}function pU(e){return function(t,n,r){const i=t[n];if("function"!=typeof i)throw new Error("Cannot use mutex on object property.");return r.value=async function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];switch(e){case sU.SEND_ONLY:{const e=await this.sendMutex.lock("From P2PChannel2.".concat(n));try{return await i.apply(this,r)}finally{e()}}case sU.RECEIVE_ONLY:{const e=await this.recvMutex.lock("From P2PChannel2.".concat(n));try{return await i.apply(this,r)}finally{e()}}default:{const e=await this.sendMutex.lock("From P2PChannel2.".concat(n)),t=await this.recvMutex.lock("From P2PChannel2.".concat(n));try{return await i.apply(this,r)}finally{e(),t()}}}},r}}function fU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fU(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Mb([pU(sU.SEND_ONLY),Db("design:type",Function),Db("design:paramtypes",[Object]),Db("design:returntype",cv)],hU.prototype,"p2pConnect",null),Mb([pU(sU.SEND_ONLY),Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],hU.prototype,"unpublish",null),Mb([pU(),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",cv)],hU.prototype,"unpublishLowStream",null),Mb([pU(sU.RECEIVE_ONLY),Db("design:type",Function),Db("design:paramtypes",[oU,String,Number,String]),Db("design:returntype",cv)],hU.prototype,"subscribe",null),Mb([pU(sU.RECEIVE_ONLY),Db("design:type",Function),Db("design:paramtypes",[oU,String,Number,String]),Db("design:returntype",cv)],hU.prototype,"mockSubscribe",null),Mb([pU(sU.RECEIVE_ONLY),Db("design:type",Function),Db("design:paramtypes",[oU,String,Boolean]),Db("design:returntype",cv)],hU.prototype,"unsubscribe",null),Mb([pU(sU.RECEIVE_ONLY),Db("design:type",Function),Db("design:paramtypes",[oU,String]),Db("design:returntype",cv)],hU.prototype,"muteRemote",null),Mb([pU(sU.RECEIVE_ONLY),Db("design:type",Function),Db("design:paramtypes",[oU,String]),Db("design:returntype",cv)],hU.prototype,"unmuteRemote",null),Mb([pU(sU.RECEIVE_ONLY),Db("design:type",Function),Db("design:paramtypes",[oU,String]),Db("design:returntype",cv)],hU.prototype,"hasRemoteMediaWithLock",null),Mb([pU(),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",cv)],hU.prototype,"disconnectForReconnect",null),Mb([pU(sU.RECEIVE_ONLY),Db("design:type",Function),Db("design:paramtypes",[oU,String,Number]),Db("design:returntype",cv)],hU.prototype,"remoteMediaSsrcChanged",null);class gU{constructor(e){oh(this,"store",void 0),oh(this,"onStatsException",void 0),oh(this,"onUploadPublishDuration",void 0),oh(this,"onStatsChanged",void 0),oh(this,"localStats",new Map),oh(this,"remoteStats",new Map),oh(this,"updateStatsInterval",void 0),oh(this,"trafficStats",void 0),oh(this,"trafficStatsPeerList",[]),oh(this,"uplinkStats",void 0),oh(this,"exceptionMonitor",void 0),oh(this,"p2pChannel",void 0),oh(this,"scalabilityMode",sb.L1T1),oh(this,"updateStats",(()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))})),this.store=e,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new _P,this.exceptionMonitor.on("exception",((e,t,n)=>{this.onStatsException&&this.onStatsException(e,t,n)}))}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(dI.LocalAudioTrack)||mU({},JC)}getLocalVideoTrackStats(){return this.localStats.get(dI.LocalVideoTrack)||mU({},XC)}getRemoteAudioTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const n=this.trafficStats.peer_delay.find((t=>t.peer_uid===e));return n&&(t.publishDuration=n.B_ppad+(Date.now()-this.trafficStats.timestamp)),t},n={};if(e){var r;const i=null===(r=this.remoteStats.get(e))||void 0===r?void 0:r.audioStats;i&&(n[e]=t(e,i))}else Array.from(this.remoteStats.entries()).forEach((e=>{let[r,{audioStats:i}]=e;i&&(n[r]=t(r,i))}));return n}getRemoteNetworkQualityStats(e){const t={};if(e){var n;const r=null===(n=this.remoteStats.get(e))||void 0===n?void 0:n.networkStats;r&&(t[e]=r)}else Array.from(this.remoteStats.entries()).forEach((e=>{let[n,{networkStats:r}]=e;r&&(t[n]=r)}));return t}getRemoteVideoTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const n=this.trafficStats.peer_delay.find((t=>t.peer_uid===e));return n&&(t.publishDuration=n.B_ppvd+(Date.now()-this.trafficStats.timestamp)),t},n={};if(e){var r;const i=null===(r=this.remoteStats.get(e))||void 0===r?void 0:r.videoStats;i&&(n[e]=t(e,i))}else Array.from(this.remoteStats.entries()).forEach((e=>{let[r,{videoStats:i}]=e;i&&(n[r]=t(r,i))}));return n}getRTCStats(){let e=0,t=0,n=0,r=0;const i=this.localStats.get(dI.LocalAudioTrack);i&&(e+=i.sendBytes,t+=i.sendBitrate);const o=this.localStats.get(dI.LocalVideoTrack);o&&(e+=o.sendBytes,t+=o.sendBitrate);const s=this.localStats.get(dI.LocalVideoLowTrack);s&&(e+=s.sendBytes,t+=s.sendBitrate),this.remoteStats.forEach((e=>{let{audioStats:t,videoStats:i}=e;t&&(n+=t.receiveBytes,r+=t.receiveBitrate),i&&(n+=i.receiveBytes,r+=i.receiveBitrate)}));let a=1;return this.trafficStats&&(a+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:a,SendBitrate:t,SendBytes:e,RecvBytes:n,RecvBitrate:r,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(e){this.localStats.set(e,void 0)}removeLocalStats(e){e?this.localStats.delete(e):this.localStats.clear()}addRemoteStats(e){this.remoteStats.set(e,{})}removeRemoteStats(e){e?this.remoteStats.delete(e):this.remoteStats.clear()}addP2PChannel(e){this.p2pChannel=e}updateTrafficStats(e){e.peer_delay=e.peer_delay.filter((e=>void 0!==e.B_ppad||void 0!==e.B_ppvd)),e.peer_delay.filter((e=>-1===this.trafficStatsPeerList.indexOf(e.peer_uid))).forEach((e=>{var t;const n=null===(t=this.p2pChannel)||void 0===t?void 0:t.getRemoteMedia(e.peer_uid),r=null!=n&&n.videoSSRC?SP.measureFromSubscribeStart(this.store.clientId,n.videoSSRC):0,i=null!=n&&n.audioSSRC?SP.measureFromSubscribeStart(this.store.clientId,n.audioSSRC):0;void 0!==e.B_ppad&&void 0!==e.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(e.peer_uid,e.B_ppad,e.B_ppvd,r>i?r:i),this.trafficStatsPeerList.push(e.peer_uid))})),this.trafficStats=e}updateUplinkStats(e){this.uplinkStats&&this.uplinkStats.B_fir!==e.B_fir&&VT.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(e.B_fir)),this.uplinkStats=e}static isRemoteVideoFreeze(e,t,n){if(!e)return!1;const r=!!n&&t.framesDecodeFreezeTime>n.framesDecodeFreezeTime,i=!n||t.framesDecodeCount>n.framesDecodeCount;return r||!i}static isRemoteAudioFreeze(e){return!!e&&e._isFreeze()}isLocalVideoFreeze(e){return!(!e.inputFrame||!e.sentFrame)&&e.inputFrame.frameRate>5&&e.sentFrame.frameRate<3}updateLocalStats(e){Array.from(this.localStats.entries()).forEach((t=>{let[n,r]=t;switch(n){case dI.LocalVideoTrack:case dI.LocalVideoLowTrack:{const t=r,o=mU({},XC),s=e.getStats(),a=e.getLocalMedia(n);if(s){const n=s.videoSend.find((e=>e.ssrc===(null==a?void 0:a.ssrcs[0].ssrcId)));if(n){const r=e.getLocalVideoSize(),i=e.getEncoderConfig(dI.LocalVideoTrack);"H264"!==n.codec&&"H265"!==n.codec&&"VP8"!==n.codec&&"VP9"!==n.codec&&"AV1X"!==n.codec&&"AV1"!==n.codec||(o.codecType=n.codec),o.sendBytes=n.bytes,o.sendBitrate=t?8*Math.max(0,o.sendBytes-t.sendBytes):0,n.inputFrame?(o.captureFrameRate=n.inputFrame.frameRate,o.captureResolutionHeight=n.inputFrame.height,o.captureResolutionWidth=n.inputFrame.width):r&&(o.captureResolutionWidth=r.width,o.captureResolutionHeight=r.height),n.sentFrame?(o.sendFrameRate=n.sentFrame.frameRate,o.sendResolutionHeight=n.sentFrame.height,o.sendResolutionWidth=n.sentFrame.width):r&&(o.sendResolutionWidth=r.width,o.sendResolutionHeight=r.height),n.avgEncodeMs&&(o.encodeDelay=n.avgEncodeMs),i&&i.bitrateMax&&(o.targetSendBitrate=1e3*i.bitrateMax),o.sendPackets=n.packets,o.sendPacketsLost=n.packetsLost,o.sendJitterMs=n.jitterMs,o.sendRttMs=n.rttMs,o.totalDuration=t?t.totalDuration+1:1,o.totalFreezeTime=t?t.totalFreezeTime:0,this.isLocalVideoFreeze(n)&&(o.totalFreezeTime+=1),n.scalabilityMode&&this.scalabilityMode!==n.scalabilityMode&&(VT.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(n.scalabilityMode)),this.scalabilityMode=n.scalabilityMode)}this.trafficStats&&(o.currentPacketLossRate=(this.trafficStats.B_pvlr4||0)/100)}var i;this.localStats.set(n,o),((null==t?void 0:t.sendResolutionWidth)!==o.sendResolutionWidth||(null==t?void 0:t.sendResolutionHeight)!==o.sendResolutionHeight)&&(null===(i=this.onStatsChanged)||void 0===i||i.call(this,"resolution",{width:o.sendResolutionWidth,height:o.sendResolutionHeight})),o&&a&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,a.track,o);break}case dI.LocalAudioTrack:{const t=r,i=mU({},JC),o=e.getStats(),s=e.getLocalMedia(n);if(o){const n=o.audioSend.find((e=>e.ssrc===(null==s?void 0:s.ssrcs[0].ssrcId)));if(n){if("opus"!==n.codec&&"aac"!==n.codec&&"PCMU"!==n.codec&&"PCMA"!==n.codec&&"G722"!==n.codec||(i.codecType=n.codec),n.inputLevel)i.sendVolumeLevel=Math.round(32767*n.inputLevel);else{const t=e.getLocalAudioVolume();t&&(i.sendVolumeLevel=Math.round(32767*t))}i.sendBytes=n.bytes,i.sendPackets=n.packets,i.sendPacketsLost=n.packetsLost,i.sendJitterMs=n.jitterMs,i.sendRttMs=n.rttMs,i.sendBitrate=t?8*Math.max(0,i.sendBytes-t.sendBytes):0}}this.trafficStats&&(i.currentPacketLossRate=(this.trafficStats.B_palr4||0)/100),this.localStats.set(dI.LocalAudioTrack,i),i&&s&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,s.track,i);break}}}))}updateRemoteStats(e){Array.from(this.remoteStats.entries()).forEach((t=>{var n,r;let[i,{videoStats:o,audioStats:s,videoPcStats:a}]=t;const c=s,l=o,d=a,u=mU({},ZC),h=mU({},ew),p=mU({},$C),{audioTrack:f,videoTrack:m,audioSSRC:g,videoSSRC:y}=e.getRemoteMedia(i);let v;v=e instanceof hU?e.getStats(!0):e.getStats();const _=null===(n=v)||void 0===n?void 0:n.audioRecv.find((e=>e.ssrc===g)),E=null===(r=v)||void 0===r?void 0:r.videoRecv.find((e=>e.ssrc===y)),S=this.trafficStats&&this.trafficStats.peer_delay.find((e=>e.peer_uid===i));if(_&&("opus"!==_.codec&&"aac"!==_.codec&&"PCMU"!==_.codec&&"PCMA"!==_.codec&&"G722"!==_.codec||(u.codecType=_.codec),_.outputLevel?u.receiveLevel=Math.round(32767*_.outputLevel):f&&(u.receiveLevel=Math.round(32767*f.getVolumeLevel())),u.receiveBytes=_.bytes,u.receivePackets=_.packets,u.receivePacketsLost=_.packetsLost,u.packetLossRate=u.receivePacketsLost/(u.receivePackets+u.receivePacketsLost),u.receiveBitrate=c?8*Math.max(0,u.receiveBytes-c.receiveBytes):0,u.totalDuration=c?c.totalDuration+1:1,u.totalFreezeTime=c?c.totalFreezeTime:0,u.freezeRate=u.totalFreezeTime/u.totalDuration,u.receiveDelay=_.jitterBufferMs,u.totalDuration>10&&gU.isRemoteAudioFreeze(f)&&(u.totalFreezeTime+=1)),E){"H264"!==E.codec&&"H265"!==E.codec&&"VP8"!==E.codec&&"VP9"!==E.codec&&"AV1X"!==E.codec&&"AV1"!==E.codec||(h.codecType=E.codec),h.receiveBytes=E.bytes,h.receiveBitrate=l?8*Math.max(0,h.receiveBytes-l.receiveBytes):0,h.decodeFrameRate=E.decodeFrameRate<0?0:E.decodeFrameRate,h.renderFrameRate=E.decodeFrameRate<0?0:E.decodeFrameRate,E.outputFrame&&(h.renderFrameRate=E.outputFrame.frameRate),E.receivedFrame?(h.receiveFrameRate=E.receivedFrame.frameRate,h.receiveResolutionHeight=E.receivedFrame.height,h.receiveResolutionWidth=E.receivedFrame.width):m&&(h.receiveResolutionHeight=m._videoHeight||0,h.receiveResolutionWidth=m._videoWidth||0),void 0!==E.framesRateFirefox&&(h.receiveFrameRate=Math.round(E.framesRateFirefox)),h.receivePackets=E.packets,h.receivePacketsLost=E.packetsLost,h.packetLossRate=h.receivePacketsLost/(h.receivePackets+h.receivePacketsLost),h.totalDuration=l?l.totalDuration+1:1,h.totalFreezeTime=l?l.totalFreezeTime:0,h.receiveDelay=E.jitterBufferMs||0;const t=!!y&&e.getRemoteVideoIsReady(y);m&&t&&gU.isRemoteVideoFreeze(m,E,d)&&(h.totalFreezeTime+=1),h.freezeRate=h.totalFreezeTime/h.totalDuration}S&&(u.end2EndDelay=S.B_ad,h.end2EndDelay=S.B_vd,u.transportDelay=S.B_ed,h.transportDelay=S.B_ed,u.currentPacketLossRate=S.B_ealr4/100,h.currentPacketLossRate=S.B_evlr4/100,p.uplinkNetworkQuality=S.B_punq?S.B_punq:0,p.downlinkNetworkQuality=S.B_pdnq?S.B_pdnq:0),this.remoteStats.set(i,{audioStats:u,videoStats:h,videoPcStats:E,networkStats:p}),f&&this.exceptionMonitor.setRemoteAudioStats(f,u),m&&this.exceptionMonitor.setRemoteVideoStats(m,h)}))}}function yU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yU(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class _U extends l_{constructor(e,t,n,r){super(),oh(this,"spec",void 0),oh(this,"token",void 0),oh(this,"websocket",void 0),oh(this,"pingpongTimer",void 0),oh(this,"reconnectMode","retry"),oh(this,"serviceMode",void 0),oh(this,"reqId",0),oh(this,"commandReqId",0),oh(this,"handleWebSocketOpen",(()=>{this.reconnectMode="retry",this.startPingPong()})),oh(this,"handleWebSocketMessage",(e=>{if(!e.data)return;const t=JSON.parse(e.data);t.requestId?this.emit("@".concat(t.requestId,"-").concat(t.sid),t):this.serviceMode===Sb.INJECT?this.emit(Vb.INJECT_STREAM_STATUS,t):(eb.workerEvent(this.spec.sid,{actionType:"status",serverCode:t.code,workerType:this.serviceMode===Sb.TRANSCODE?1:2}),this.emit(Vb.PUBLISH_STREAM_STATUS,t))})),this.spec=t,this.token=e,this.serviceMode=r,this.websocket=new KI("live-streaming",n),this.websocket.on(Eb.CONNECTED,this.handleWebSocketOpen),this.websocket.on(Eb.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(Eb.REQUEST_NEW_URLS,((e,t)=>{I_(this,Vb.REQUEST_NEW_ADDRESS).then(e).catch(t)})),this.websocket.on(Eb.RECONNECTING,(()=>{this.websocket.reconnectMode=this.reconnectMode}))}init(e){return this.websocket.init(e)}async request(e,t,n,r){this.reqId+=1,"request"===e&&(this.commandReqId+=1);const i=this.commandReqId,o=this.reqId;if(!o||!this.websocket)throw new kb(Hv.UNEXPECTED_ERROR);const s=vU({command:e,sdkVersion:"4.20.2"===mT?"0.0.1":mT,seq:o,requestId:o,allocate:n,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},t);if("closed"===this.websocket.state)throw new kb(Hv.WS_DISCONNECT);const a=()=>new cv(((e,t)=>{this.websocket.once(Eb.CLOSED,(()=>t(new kb(Hv.WS_ABORT)))),this.websocket.once(Eb.CONNECTED,e)}));"connected"!==this.websocket.state&&await a(),s.clientRequest&&(s.clientRequest.workerToken=this.token);const c=new cv(((e,t)=>{const n=()=>{t(new kb(Hv.WS_ABORT))};this.websocket.once(Eb.RECONNECTING,n),this.websocket.once(Eb.CLOSED,n),this.once("@".concat(o,"-").concat(this.spec.sid),(t=>{e(t)}))}));r&&eb.workerEvent(this.spec.sid,vU(vU({},r),{},{requestId:i,actionType:"request",payload:JSON.stringify(t.clientRequest),serverCode:0,code:0}));const l=Date.now();this.websocket.sendMessage(s);let d=null;try{d=await c}catch(r){if("closed"===this.websocket.state)throw r;return await a(),await this.request(e,t,n)}return r&&eb.workerEvent(this.spec.sid,vU(vU({},r),{},{requestId:i,actionType:"response",payload:JSON.stringify(d.serverResponse),serverCode:d.code,success:200===d.code,responseTime:Date.now()-l})),200!==d.code&&this.handleResponseError(d),d}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const e="4.20.2"===mT?"0.0.1":mT;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(e){switch(e.code){case Gb.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void VT.warning("live stream response already exists stream");case Gb.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case Gb.LIVE_STREAM_RESPONSE_BAD_STREAM:case Gb.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new kb(Hv.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case Gb.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new kb(Hv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Gb.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new kb(Hv.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case Gb.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const t=new kb(Hv.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(Vb.WARNING,t,e.serverResponse.url)}case Gb.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const t=new kb(Hv.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(Vb.WARNING,t,e.serverResponse.url)}case Gb.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new kb(Hv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Gb.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new kb(Hv.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:e.code}).throw();case Gb.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const t=new kb(Hv.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(Vb.WARNING,t,e.serverResponse.url)}case Gb.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new kb(Hv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case Gb.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new kb(Hv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case Gb.LIVE_STREAM_RESPONSE_WORKER_LOST:case Gb.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new kb(Hv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Gb.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;if("UpdateTranscoding"===e.serverResponse.command||"ControlStream"===e.serverResponse.command)return new kb(Hv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new kb(Hv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Gb.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Gb.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Gb.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Gb.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new kb(Hv.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval((()=>{"connected"===this.websocket.state&&this.request("ping",{}).catch(oE)}),6e3)}}function EU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EU(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class TU extends l_{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mE;super(),oh(this,"onLiveStreamWarning",void 0),oh(this,"onLiveStreamError",void 0),oh(this,"onInjectStatusChange",void 0),oh(this,"spec",void 0),oh(this,"retryTimeout",1e4),oh(this,"connection",void 0),oh(this,"httpRetryConfig",void 0),oh(this,"wsRetryConfig",void 0),oh(this,"streamingTasks",new Map),oh(this,"isStartingStreamingTask",!1),oh(this,"taskMutex",new pE("live-streaming")),oh(this,"cancelToken",oT.CancelToken.source()),oh(this,"transcodingConfig",void 0),oh(this,"injectConfig",SU({},zb)),oh(this,"injectLoopTimes",0),oh(this,"uapResponse",void 0),oh(this,"lastTaskId",1),oh(this,"statusError",new Map),this.spec=e,this.httpRetryConfig=n,this.wsRetryConfig=t}async setTranscodingConfig(e){const t=SU(SU({},Fb),e);66!==t.videoCodecProfile&&77!==t.videoCodecProfile&&100!==t.videoCodecProfile&&(VT.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(t.videoCodecProfile," -> 100")),t.videoCodecProfile=100),t.transcodingUsers||(t.transcodingUsers=t.userConfigs),t.transcodingUsers&&(t.transcodingUsers=t.transcodingUsers.map((e=>SU(SU(SU({},Pb),e),{},{zOrder:e.zOrder?e.zOrder+1:1})))),function(e){Zv(e.width)||Kv(e.width,"config.width",0,1e4),Zv(e.height)||Kv(e.height,"config.height",0,1e4),Zv(e.videoBitrate)||Kv(e.videoBitrate,"config.videoBitrate",1,1e6),Zv(e.videoFrameRate)||Kv(e.videoFrameRate,"config.videoFrameRate"),Zv(e.lowLatency)||Yv(e.lowLatency,"config.lowLatency"),Zv(e.audioSampleRate)||qv(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),Zv(e.audioBitrate)||Kv(e.audioBitrate,"config.audioBitrate",1,128),Zv(e.audioChannels)||qv(e.audioChannels,"config.audioChannels",[1,2,3,4,5]),Zv(e.videoGop)||Kv(e.videoGop,"config.videoGop"),Zv(e.videoCodecProfile)||qv(e.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),Zv(e.userCount)||Kv(e.userCount,"config.userCount",0,17),Zv(e.backgroundColor)||Kv(e.backgroundColor,"config.backgroundColor",0,16777215),Zv(e.userConfigExtraInfo)||Jv(e.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),e.transcodingUsers&&!Zv(e.transcodingUsers)&&(Xv(e.transcodingUsers,"config.transcodingUsers"),e.transcodingUsers.forEach(((e,t)=>{Lb(e.uid),Zv(e.x)||Kv(e.x,"transcodingUser[".concat(t,"].x"),0,1e4),Zv(e.y)||Kv(e.y,"transcodingUser[".concat(t,"].y"),0,1e4),Zv(e.width)||Kv(e.width,"transcodingUser[".concat(t,"].width"),0,1e4),Zv(e.height)||Kv(e.height,"transcodingUser[".concat(t,"].height"),0,1e4),Zv(e.zOrder)||Kv(e.zOrder-1,"transcodingUser[".concat(t,"].zOrder"),0,100),Zv(e.alpha)||Kv(e.alpha,"transcodingUser[".concat(t,"].alpha"),0,1,!1)}))),Zv(e.watermark)||Ub(e.watermark,"watermark"),Zv(e.backgroundImage)||Ub(e.backgroundImage,"backgroundImage"),e.images&&!Zv(e.images)&&(Xv(e.images,"config.images"),e.images.forEach(((e,t)=>{Ub(e,"images[".concat(t,"]"))})))}(t);const n=[];t.images&&n.push(...t.images.map((e=>SU(SU(SU({},jb),e),{},{zOrder:255})))),t.backgroundImage&&(n.push(SU(SU(SU({},jb),t.backgroundImage),{},{zOrder:0})),delete t.backgroundImage),t.watermark&&(n.push(SU(SU(SU({},jb),t.watermark),{},{zOrder:255})),delete t.watermark),t.images=n,t.transcodingUsers&&(t.userConfigs=t.transcodingUsers.map((e=>SU({},e))),t.userCount=t.transcodingUsers.length,delete t.transcodingUsers);const r=(t.userConfigs||[]).map((e=>"number"==typeof e.uid?cv.resolve(e.uid):pC(e.uid,this.spec,this.cancelToken.token,this.httpRetryConfig)));if((await cv.all(r)).forEach(((e,n)=>{t.userConfigs&&t.userConfigs[n]&&(t.userConfigs[n].uid=e)})),this.transcodingConfig=t,this.connection)try{var i;const e=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(Ob(i=this.streamingTasks).call(i)).map((e=>e.taskId)).join("#")});VT.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(e.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(e){if(!e.data||!e.data.retry)throw e;e.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach((t=>{VT.warning("[".concat(this.spec.clientId,"] live streaming receive error"),e.toString(),"try to republish",t.url),this.startLiveStreamingTask(t.url,t.mode,e).then((()=>{VT.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(t.url," success"))})).catch((e=>{VT.error("[".concat(this.spec.clientId,"] live streaming republish failed"),t.url,e.toString()),this.onLiveStreamError&&this.onLiveStreamError(t.url,e)}))}))}}setInjectStreamConfig(e,t){this.injectConfig=Object.assign({},this.injectConfig,e),this.injectLoopTimes=t}async startLiveStreamingTask(e,t,n){var r;if(Array.from(Ob(r=this.streamingTasks).call(r)).find((e=>e.mode===Sb.INJECT))&&t===Sb.INJECT)return new kb(Hv.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!this.transcodingConfig&&t===Sb.TRANSCODE)throw new kb(Hv.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let i={command:"PublishStream",ts:Date.now(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};VT.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(e,", mode: ").concat(t));const o=await this.taskMutex.lock();if(!this.connection&&n)return void o();if(this.streamingTasks.get(e)&&!n)return o(),new kb(Hv.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(t))}catch(e){throw o(),e}switch(t){case Sb.TRANSCODE:i.transcodingConfig=SU({},this.transcodingConfig);break;case Sb.RAW:break;case Sb.INJECT:i={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:e,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(i.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const s=this.lastTaskId++;try{const r=new cv(((t,r)=>{nE(this.retryTimeout).then((()=>{if(n)return r(n);const t=this.statusError.get(e);return t?(this.statusError.delete(e),r(t)):void 0}))})),a=await cv.race([this.connection.request("request",{clientRequest:i},!0,{url:e,command:"PublishStream",workerType:t===Sb.TRANSCODE?1:2,requestByUser:!n,tid:s.toString()}),r]);this.isStartingStreamingTask=!1,VT.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(a.code)),this.streamingTasks.set(e,{clientRequest:i,mode:t,url:e,taskId:s}),o()}catch(r){if(o(),this.isStartingStreamingTask=!1,!r.data||!r.data.retry||n)throw r;return r.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(e,t,r)):await this.startLiveStreamingTask(e,t,r)}}stopLiveStreamingTask(e){return new cv(((t,n)=>{const r=this.streamingTasks.get(e);if(!r||!this.connection)return new kb(Hv.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const i=r.mode;r.abortTask=()=>{VT.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(e),t()},this.connection.request("request",{clientRequest:{command:i===Sb.INJECT?"UninjectStream":"UnpublishStream",url:r.url}},!1,{url:e,command:"UnPublishStream",workerType:i===Sb.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then((n=>{VT.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(n.code)),this.streamingTasks.delete(e),0===this.streamingTasks.size&&i!==Sb.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),t(),i===Sb.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(Tb.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,e)})).catch(n)}))}async controlInjectStream(e,t,n,r){const i=this.streamingTasks.get(e);if(!i||!this.connection||i.mode!==Sb.INJECT)throw new kb(Hv.INVALID_OPERATION,"can not find inject stream task to control");return(await this.connection.request("request",{clientRequest:{command:"ControlStream",url:e,control:t,audioVolume:n,position:r}})).serverResponse}resetAllTask(){var e;const t=Array.from(Ob(e=this.streamingTasks).call(e));this.terminate();for(const n of t)this.startLiveStreamingTask(n.url,n.mode).catch((e=>{this.onLiveStreamError&&this.onLiveStreamError(n.url,e)}))}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=oT.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(e){if(this.connection)throw new kb(Hv.UNEXPECTED_ERROR,"live streaming connection has already connected");const t=await I_(this,Bb.REQUEST_WORKER_MANAGER_LIST,e);return this.uapResponse=t,this.connection=new _U(t.workerToken,this.spec,this.wsRetryConfig,e),this.connection.on(Vb.WARNING,((e,t)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e))),this.connection.on(Vb.PUBLISH_STREAM_STATUS,(e=>this.handlePublishStreamServer(e))),this.connection.on(Vb.INJECT_STREAM_STATUS,(e=>this.handleInjectStreamServerStatus(e))),this.connection.on(Vb.REQUEST_NEW_ADDRESS,((t,n)=>{if(!this.connection)return n(new kb(Hv.UNEXPECTED_ERROR,"can not get new live streaming address list"));I_(this,Bb.REQUEST_WORKER_MANAGER_LIST,e).then((e=>{this.uapResponse=e,t(e.addressList)})).catch(n)})),await this.connection.init(t.addressList),this.connection}handlePublishStreamServer(e){const t=e.serverStatus&&e.serverStatus.url||"empty_url",n=this.streamingTasks.get(t),r=e.reason;switch(e.code){case Gb.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Gb.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Gb.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Gb.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const r=new kb(Hv.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(n)return VT.error(r.toString()),this.onLiveStreamError&&this.onLiveStreamError(t,r);if(!this.isStartingStreamingTask)return;this.statusError.set(t,r)}case Gb.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const e=new kb(Hv.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,r);return this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e)}case Gb.LIVE_STREAM_RESPONSE_WORKER_LOST:case Gb.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var i;if(!this.connection)return;this.connection.tryNextAddress();const t=Array.from(Ob(i=this.streamingTasks).call(i));for(const n of t)n.abortTask?n.abortTask():(VT.warning("[".concat(this.spec.clientId,"] publish stream status code"),e.code,"try to republish",n.url),this.startLiveStreamingTask(n.url,n.mode,new kb(Hv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then((()=>{VT.debug("[".concat(this.spec.clientId,"] republish live stream success"),n.url)})).catch((e=>{VT.error(e.toString()),this.onLiveStreamError&&this.onLiveStreamError(n.url,e)})));return}}}handleInjectStreamServerStatus(e){const t=Number(e.uid),n=e.serverStatus&&e.serverStatus.url;switch(e.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(Tb.INJECT_STREAM_STATUS_START_SUCCESS,t,n));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(Tb.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,t,n),void this.streamingTasks.delete(n);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(Tb.INJECT_STREAM_STATUS_START_UNAUTHORIZED,t,n),void this.streamingTasks.delete(n);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(Tb.INJECT_STREAM_STATUS_BROKEN,t,n),void this.streamingTasks.delete(n);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(Tb.INJECT_STREAM_STATUS_START_TIMEOUT,t,n),void this.streamingTasks.delete(n);default:return void VT.debug("inject stream server status",e)}}hasUrl(e){return this.streamingTasks.has(e)}}class bU{constructor(){oh(this,"destChannelMediaInfos",new Map),oh(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(e){tI(e),this.srcChannelMediaInfo=e}addDestChannelInfo(e){tI(e),this.destChannelMediaInfos.set(e.channelName,e)}removeDestChannelInfo(e){xb(e),this.destChannelMediaInfos.delete(e)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function IU(e){if(!(e instanceof bU))return new kb(Hv.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const t=e.getSrcChannelMediaInfo(),n=e.getDestChannelMediaInfo();return t?0===n.size?new kb(Hv.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new kb(Hv.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}class NU extends l_{constructor(e,t,n){super(),oh(this,"ws",void 0),oh(this,"requestId",1),oh(this,"heartBeatTimer",void 0),oh(this,"joinInfo",void 0),oh(this,"clientId",void 0),oh(this,"onOpen",(()=>{this.emit("open"),this.startHeartBeatCheck()})),oh(this,"onClose",(e=>{this.emit("close"),this.dispose()})),oh(this,"onMessage",(e=>{const t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(this.emit("status",t.serverStatus),void this.emit(t.serverStatus.command,t.serverStatus)):void 0;this.emit("req_".concat(t.requestId),t)})),this.joinInfo=e,this.clientId=t,this.ws=new KI("cross-channel-".concat(this.clientId),n),this.ws.on(Eb.RECONNECTING,(()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")})),this.ws.on(Eb.CONNECTED,this.onOpen),this.ws.on(Eb.ON_MESSAGE,this.onMessage),this.ws.on(Eb.CLOSED,this.onClose)}isConnect(){return"connected"===this.ws.state}sendMessage(e){const t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t}waitStatus(e){return new cv(((t,n)=>{const r=window.setTimeout((()=>{n(new kb(Hv.TIMEOUT,"wait status timeout, status: ".concat(e)))}),5e3);this.once(e,(i=>{window.clearTimeout(r),i.state&&0!==i.state?n(new kb(Hv.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(e))):t(void 0)})),this.once("dispose",(()=>{window.clearTimeout(r),n(new kb(Hv.WS_ABORT))}))}))}async request(e){if("closed"===this.ws.state)throw new kb(Hv.WS_DISCONNECT);const t=()=>new cv(((e,t)=>{this.ws.once(Eb.CLOSED,(()=>t(new kb(Hv.WS_ABORT)))),this.ws.once(Eb.CONNECTED,e)}));"connected"!==this.ws.state&&await t();const n=this.sendMessage(e),r=new cv(((e,t)=>{const r=()=>{t(new kb(Hv.WS_ABORT))};this.ws.once(Eb.RECONNECTING,r),this.ws.once(Eb.CLOSED,r),this.once("req_".concat(n),e),nE(3e3).then((()=>{this.removeAllListeners("req_".concat(n)),this.ws.off(Eb.RECONNECTING,r),this.ws.off(Eb.CLOSED,r),t(new kb(Hv.TIMEOUT,"cross channel ws request timeout"))}))})),i=await r;if(!i||200!==i.code)throw new kb(Hv.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(i)));return i}async connect(e){this.ws.removeAllListeners(Eb.REQUEST_NEW_URLS),this.ws.on(Eb.REQUEST_NEW_URLS,(t=>{t(e)})),await this.ws.init(e)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(e){const t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval((()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})}),3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class CU extends l_{set state(e){e!==this._state&&(e!==qb.RELAY_STATE_FAILURE&&(this.errorCode=Kb.RELAY_OK),this.emit("state",e,this.errorCode),this._state=e)}get state(){return this._state}constructor(e,t,n,r,i){super(),oh(this,"joinInfo",void 0),oh(this,"sid",void 0),oh(this,"clientId",void 0),oh(this,"cancelToken",oT.CancelToken.source()),oh(this,"workerToken",void 0),oh(this,"requestId",0),oh(this,"signal",void 0),oh(this,"prevChannelMediaConfig",void 0),oh(this,"httpRetryConfig",void 0),oh(this,"_resolution",void 0),oh(this,"_state",qb.RELAY_STATE_IDLE),oh(this,"errorCode",Kb.RELAY_OK),oh(this,"onStatus",(e=>{VT.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(e))),e&&e.command&&("onAudioPacketReceived"===e.command&&this.emit("event",Yb.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===e.command&&this.emit("event",Yb.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===e.command&&(this.errorCode=Kb.SRC_TOKEN_EXPIRED,this.state=qb.RELAY_STATE_FAILURE),"onDestTokenPrivilegeDidExpire"===e.command&&(this.errorCode=Kb.DEST_TOKEN_EXPIRED,this.state=qb.RELAY_STATE_FAILURE))})),oh(this,"onReconnect",(async()=>{VT.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",Yb.NETWORK_DISCONNECTED),this.state=qb.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch((e=>{this.state!==qb.RELAY_STATE_IDLE&&(VT.error("auto restart channel media relay failed",e.toString()),this.errorCode=Kb.SERVER_CONNECTION_LOST,this.state=qb.RELAY_STATE_FAILURE)}))})),this.joinInfo=e,this.clientId=t,this.sid=iE(),this.signal=new NU(this.joinInfo,this.clientId,n),this.httpRetryConfig=r,this._resolution=i}async startChannelMediaRelay(e){if(this.state!==qb.RELAY_STATE_IDLE)throw new kb(Hv.INVALID_OPERATION);this.state=qb.RELAY_STATE_CONNECTING,await this.connect(),VT.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(e)}catch(e){if(e.data&&e.data.serverResponse&&"SetSourceChannel"===e.data.serverResponse.command)throw new kb(Hv.CROSS_CHANNEL_FAILED_JOIN_SRC);if(e.data&&e.data.serverResponse&&"SetDestChannelStatus"===e.serverResponse.command)throw new kb(Hv.CROSS_CHANNEL_FAILED_JOIN_DEST);if(e.data&&e.data.serverResponse&&"StartPacketTransfer"===e.serverResponse.command)throw new kb(Hv.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST);throw e}this.prevChannelMediaConfig=e}async updateChannelMediaRelay(e){if(this.state!==qb.RELAY_STATE_RUNNING)throw new kb(Hv.INVALID_OPERATION);await this.sendUpdateMessage(e),this.prevChannelMediaConfig=e}async setVideoProfile(e){if(this._resolution=e,this.state!==qb.RELAY_STATE_RUNNING)throw new kb(Hv.INVALID_OPERATION);const t=this.genMessage(Wb.SetVideoProfile);await this.signal.request(t),VT.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),VT.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=qb.RELAY_STATE_IDLE,this.dispose()}dispose(){VT.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=oT.CancelToken.source(),this.state=qb.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const e=await yC(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=e.workerToken,await this.signal.connect(e.addressList),this.emit("event",Yb.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(e){const t=this.genMessage(Wb.StopPacketTransfer);await this.signal.request(t),await this.signal.waitStatus("Normal Quit"),VT.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const n=this.genMessage(Wb.SetSdkProfile,e);await this.signal.request(n),VT.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const r=this.genMessage(Wb.SetSourceChannel,e);await this.signal.request(r),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",Yb.PACKET_JOINED_SRC_CHANNEL),VT.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const i=this.genMessage(Wb.SetSourceUserId,e);await this.signal.request(i),VT.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const o=this.genMessage(Wb.SetDestChannel,e);await this.signal.request(o),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",Yb.PACKET_JOINED_DEST_CHANNEL),VT.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const s=this.genMessage(Wb.StartPacketTransfer,e);await this.signal.request(s),this.emit("event",Yb.PACKET_SENT_TO_DEST_CHANNEL),this.state=qb.RELAY_STATE_RUNNING,VT.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(e){const t=this.genMessage(Wb.UpdateDestChannel,e);await this.signal.request(t),this.emit("event",Yb.PACKET_UPDATE_DEST_CHANNEL),VT.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const e=this.genMessage(Wb.StopPacketTransfer);await this.signal.request(e),VT.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(e,t){const n=[],r=[],i=[];this.requestId+=1;const o={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:mT,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.20.2"===o.sdkVersion&&(o.sdkVersion="0.0.1");let s=null,a=null;switch(e){case Wb.SetSdkProfile:return o.clientRequest={command:"SetSdkProfile",type:"multi_channel"},o;case Wb.SetSourceChannel:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new kb(Hv.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceChannel",uid:"0",channelName:a.channelName,token:a.token||this.joinInfo.appId},o;case Wb.SetSourceUserId:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new kb(Hv.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceUserId",uid:a.uid+""},o;case Wb.SetDestChannel:if(s=t&&t.getDestChannelMediaInfo(),!s)throw new kb(Hv.UNEXPECTED_ERROR,"can not find dest config");return s.forEach((e=>{n.push(e.channelName),r.push(e.uid+""),i.push(e.token||this.joinInfo.appId)})),o.clientRequest={command:"SetDestChannel",channelName:n,uid:r,token:i},o;case Wb.StartPacketTransfer:return o.clientRequest={command:"StartPacketTransfer"},o;case Wb.Reconnect:return o.clientRequest={command:"Reconnect"},o;case Wb.StopPacketTransfer:return o.clientRequest={command:"StopPacketTransfer"},o;case Wb.UpdateDestChannel:if(s=t&&t.getDestChannelMediaInfo(),!s)throw new kb(Hv.UNEXPECTED_ERROR,"can not find dest config");return s.forEach((e=>{n.push(e.channelName),r.push(e.uid+""),i.push(e.token||this.joinInfo.appId)})),o.clientRequest={command:"UpdateDestChannel",channelName:n,uid:r,token:i},o;case Wb.SetVideoProfile:o.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return o}}function wU(e){var t={},n=!1;function r(t,r){return n=!0,{done:!1,value:new TP(r=new RP((function(n){n(e[t](r))})),1)}}return t[void 0!==ju&&th||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}var RU=r(AP);function AU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AU(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function MU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MU(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class kU extends OI{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Rr(t=Object.keys(CT)).call(t,e)})))]}constructor(e,t){super(e,t),oh(this,"store",void 0),oh(this,"peerConnection",void 0),oh(this,"remoteSDP",void 0),oh(this,"initialOffer",void 0),oh(this,"statsFilter",void 0),oh(this,"useRTX",!1),oh(this,"localCapabilities",void 0),oh(this,"localCandidateCount",0),oh(this,"allCandidatesReceived",!1),oh(this,"establishPromise",void 0),oh(this,"mutex",new pE("P2PConnection-mutex")),this.store=t,this.peerConnection=new RTCPeerConnection(kU.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),this.statsFilter=mj(this.peerConnection,ST("STATS_UPDATE_INTERVAL"),void 0,Rv()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const e=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=_j(e.sdp),n=vj(e.sdp,{filterRTX:!this.useRTX,filterVideoFec:ST("FILTER_VIDEO_FEC"),filterAudioFec:ST("FILTER_AUDIO_FEC"),filterAudioCodec:["opus"]});return this.localCapabilities=n,this.initialOffer=e,DU(DU({},t),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:n},offerSDP:e.sdp})}catch(e){throw new Wv(Hv.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e,t,n,r,i,o){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new class{constructor(e){oh(this,"sessionDesc",void 0),oh(this,"localCapabilities",void 0),oh(this,"rtpCapabilities",void 0),oh(this,"candidates",void 0),oh(this,"iceParameters",void 0),oh(this,"dtlsParameters",void 0),oh(this,"setup",void 0),oh(this,"currentMidIndex",void 0),oh(this,"cname",void 0),e=Y_(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,remoteSetup:o,localCapabilities:s,sdkCodec:a,cname:c}=e,l=QP.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=i,this.candidates=r,this.iceParameters=t,this.dtlsParameters=n,this.setup=o,this.localCapabilities=s,this.cname=c;for(let d=0;d<l.mediaDescriptions.length;d++){const e=l.mediaDescriptions[d];if(e.attributes.iceUfrag=t.iceUfrag,e.attributes.icePwd=t.icePwd,e.attributes.fingerprints=n.fingerprints,e.attributes.candidates=r,e.attributes.setup=o,"video"===e.media.mediaType){e.media.fmts=i.videoCodecs.map((e=>e.payloadType.toString(10)));let t=i.videoCodecs.filter((e=>{var t,n;return null===(t=e.rtpMap)||void 0===t?void 0:Rr(n=t.encodingName.toLowerCase()).call(n,a)}));0===t.length&&(t=i.videoCodecs),e.attributes.payloads=t,e.attributes.extmaps=i.videoExtensions}"audio"===e.media.mediaType&&(e.media.fmts=i.audioCodecs.map((e=>e.payloadType.toString(10))),e.attributes.payloads=i.audioCodecs,e.attributes.extmaps=i.audioExtensions),l.mediaDescriptions[d]=this.mungMediaDesc(e)}this.sessionDesc=l,this.currentMidIndex=l.mediaDescriptions.length-1}toString(){return QP.print(this.sessionDesc)}send(e,t,n){const{ssrcs:r,ssrcGroups:i}=Tj(t,this.cname),o=this.sessionDesc.mediaDescriptions.find((t=>e===aI.VIDEO?"video"===t.media.mediaType:"audio"===t.media.mediaType)),s=r[0].attributes.label,a=r[0].attributes.mslabel;return o.attributes.ssrcs=o.attributes.ssrcs.concat(r),o.attributes.ssrcGroups=o.attributes.ssrcGroups.concat(i),{id:s,mslabel:a}}batchSend(e){return e.map((e=>{let{kind:t,ssrcMsg:n}=e;return this.send(t,n,void 0)}))}stopSending(e){this.sessionDesc.mediaDescriptions.forEach((t=>{const n=[],r=[],i=[];t.attributes.ssrcs.forEach((t=>{Rr(e).call(e,t.attributes.label||"")?i.push(t):n.push(t)})),t.attributes.ssrcGroups.forEach((e=>{var t;Rr(t=i.map((e=>e.ssrcId))).call(t,e.ssrcIds[0])||r.push(e)})),t.attributes.ssrcs=n,t.attributes.ssrcGroups=r}))}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}receive(e,t,n){e.forEach(((e,t)=>{const n=e._mediaStreamTrack,r=this.sessionDesc.mediaDescriptions.findIndex((e=>e.attributes.mid===n.kind)),i=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r],e);this.sessionDesc.mediaDescriptions[r]=i}))}stopReceiving(e){}updateCandidates(e){e===cI.TCP?this.candidates.forEach((e=>{-1===this.candidates.findIndex((t=>"tcp"===t.transport&&t.connectionAddress===e.connectionAddress&&t.port===e.port))&&this.candidates.push(OU(OU({},e),{},{foundation:"tcpcandidate",priority:Number(e.priority)-1+"",transport:"tcp",port:Number(e.port)+90+""}))})):this.candidates=this.candidates.filter((e=>"tcp"!==e.transport));for(const t of this.sessionDesc.mediaDescriptions)t.attributes.candidates=this.candidates}restartICE(e){e=Y_(e),this.iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}mungRecvMediaDsec(e,t){const n=Y_(e);return bj(n,t),Nj(n,t),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}updateTrackLabel(e,t,n){const r=this.sessionDesc.mediaDescriptions.find((t=>e===aI.VIDEO?"video"===t.attributes.mid:"audio"===t.attributes.mid));if(r){const e=r.attributes.ssrcs.find((e=>e.attributes.label===t));var i;e&&(e.attributes.label=n,null===(i=e.attributes.msid)||void 0===i||i.replace(t,n))}}mungMediaDesc(e){const t=Y_(e);return Ij(t),function(e){const t=e.attributes.extmaps.find((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName));t&&e.attributes.extmaps.splice(e.attributes.extmaps.indexOf(t),1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"transport-cc"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}(t),t}getSSRC(e){for(const t of this.sessionDesc.mediaDescriptions)for(const n of t.attributes.ssrcs)if(n.attributes.label===e)return[n]}}({remoteIceParameters:e,remoteDtlsParameters:t,candidates:n,remoteRTPCapabilities:r.send,remoteSetup:i,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec,cname:o});const s=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:s})}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}async updateRemoteRTPCapabilities(e,t){throw new Wv(Hv.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}send(e,t){var n=this;return DP((function*(){const r=yield bP(n.mutex.lock());try{if(!n.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const r=e.map((e=>n.peerConnection.addTrack(e._mediaStreamTrack))),i=yield bP(n.peerConnection.createOffer()),o=QP.parse(i.sdp),s=e.map((e=>{const t=e._mediaStreamTrack,r=o.mediaDescriptions.find((e=>e.attributes.mid===t.kind));if(!r)throw new Error("Cannot extract ssrc from mediaDescription.");return function(e,t,n){const r=e.attributes.ssrcs.filter((e=>e.attributes.label===t)),i=e.attributes.ssrcGroups;if(0===r.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(i&&r.length>1){const e=i.find((e=>-1!==e.ssrcIds.indexOf(r[0].ssrcId)));return e?[{ssrcId:e.ssrcIds[0],rtx:n?e.ssrcIds[1]:void 0}]:[{ssrcId:r[0].ssrcId}]}return[{ssrcId:r[0].ssrcId}]}(r,t.id,n.useRTX)}));let a;try{a=yield s}catch(e){throw r.forEach((e=>{wv()&&e.replaceTrack(null),n.peerConnection.removeTrack(e)})),e}const c=n.mungSendOfferSDP(i.sdp,e);n.remoteSDP.receive(e,t,a);const l=n.remoteSDP.toString();return yield bP(n.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield bP(n.applySendEncodings(r,e)),yield bP(n.peerConnection.setRemoteDescription({type:"answer",sdp:l})),e.map(((e,t)=>{const n=e._mediaStreamTrack.id;return{localSSRC:s[t],id:n}}))}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{r()}}))()}async stopSending(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");t.map((e=>{wv()&&e.replaceTrack(null),this.peerConnection.removeTrack(e)}));const n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{id:n,mslabel:i}=this.remoteSDP.send(e,t,r),o=new cv(((t,r)=>{const o=setTimeout((()=>{r(new Error("Cannot receive track, id: ".concat(n)))}),1e4),s=r=>{const a=Ev();if(("Safari"===a.name&&11===Number(a.version)||Av())&&r.track.id!==n&&r.streams[0].id===i){var c;const i=r.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(e,n,r.track.id),this.peerConnection.removeEventListener("track",s),clearTimeout(o),void t(i)}if(r.track.id===n)return this.peerConnection.removeEventListener("track",s),clearTimeout(o),void t(r.track)};this.peerConnection.addEventListener("track",s)})),s=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:s});const a=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(a),{track:await o,id:n}}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const n=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(n)}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){}async unmuteRemote(e){}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("sender' length doesn't match mids' length.");t.map((e=>{if(wv()&&e.track)e.track.enabled=!1;else{const t=e.getParameters();t.encodings.forEach((e=>e.active=!1)),e.setParameters(t)}}))}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("Senders' length doesn't match mids' length.");t.map((async e=>{if(wv()&&e.track)e.track.enabled=!0;else{const t=e.getParameters();t.encodings.forEach((e=>e.active=!0)),await e.setParameters(t)}}));const n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n);const r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}restartICE(e){var t=this;return DP((function*(){const n=yield bP(t.mutex.lock("From P2PConnection.restartICE"));try{if(!t.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(bC().supportPCSetConfiguration){const n=t.peerConnection.getConfiguration(),r=e===cI.RELAY?"relay":"all";n.iceTransportPolicy!==r&&(VT.debug("[".concat(t.store.clientId,"] restartICE change iceTransportPolicy from [").concat(n.iceTransportPolicy,"] to [").concat(r,"]")),n.iceTransportPolicy=r,t.peerConnection.setConfiguration(n))}else if(e===cI.RELAY)return;e!==cI.RELAY&&t.remoteSDP.updateCandidates(e);const n=yield bP(t.peerConnection.createOffer({iceRestart:!0}));if(!n.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const r=_j(n.sdp),{remoteIceParameters:i}=yield r.iceParameters;t.remoteSDP.restartICE(i);const o=t.remoteSDP.toString();yield bP(t.peerConnection.setLocalDescription(n)),yield bP(t.peerConnection.setRemoteDescription({type:"answer",sdp:o}))}catch(e){VT.warning("[".concat(t.store.clientId,"] restart ICE failed, abort operation"),e)}finally{n()}}))()}close(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const e=await this.peerConnection.createOffer(),n=this.mungSendOfferSDP(e.sdp,[t]);this.remoteSDP.updateRecvMedia(t._mediaStreamTrack.kind,t);const r=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:n}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getSenders().filter((t=>{var n;return(null===(n=t.track)||void 0===n?void 0:n.id)===e}));1===n.length&&await this.applySendEncodings(n,[t])}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getSenders().find((e=>{var n;return(null===(n=e.track)||void 0===n?void 0:n.id)===t}));n&&await n.replaceTrack(e._mediaStreamTrack)}createDataChannels(e,t){throw new Wv(Hv.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}stopDataChannels(e){throw new Wv(Hv.NOT_SUPPORTED,"Planb mode does not support stopDataChannels.")}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,VT.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,VT.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),ST("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(e){const t={iceServers:[],sdpSemantics:"plan-b"};return e.iceServers?t.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(S_(e.turnServer.servers)?t.iceServers=e.turnServer.servers:(t.iceServers&&t.iceServers.push(...kU.turnServerConfigToIceServers(e.turnServer.servers)),ST("USE_TURN_SERVER_OF_GATEWAY")&&t.iceServers&&e.turnServer.serversFromGateway&&t.iceServers.push(...kU.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(t.iceTransportPolicy="relay")})))),t}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}async updateRtpSenderEncodings(e,t){var n;if(t||(t=this.peerConnection.getSenders().find((t=>{var n;return(null===(n=t.track)||void 0===n?void 0:n.id)===e._mediaStreamTrack.id}))),!t)return VT.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(!bC().supportSetRtpSenderParameters)return VT.warn("Browser not support set rtp-sender parameters");const r={},i={};if(e instanceof SR)switch(e._optimizationMode){case"motion":r.degradationPreference="maintain-framerate";break;case"detail":r.degradationPreference="maintain-resolution";break;default:r.degradationPreference="balanced"}if(ST("DSCP_TYPE")&&Vv()){var o;const e=ST("DSCP_TYPE");Rr(o=["very-low","low","medium","high"]).call(o,e)&&(i.networkPriority=e)}const s=t.getParameters(),a=null===(n=s.encodings)||void 0===n?void 0:n[0];a&&Object.assign(a,i),Object.assign(s,r),VT.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(s.encodings))),await t.setParameters(s)}async applySendEncodings(e,t){try{if(!bC().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];r&&i&&await this.updateRtpSenderEncodings(i,r)}}catch(e){VT.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t){const n=QP.parse(e);return t.forEach(((e,t)=>{const r=e._mediaStreamTrack,i=n.mediaDescriptions.find((e=>e.attributes.mid===r.kind));i&&bj(i,e)})),QP.print(n)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const t=this.remoteSDP.batchSend(e).map(((t,n)=>{let{id:r,mslabel:i}=t;const{kind:o}=e[n];return new cv(((e,t)=>{const n=setTimeout((()=>{t(new Error("Cannot receive track, id: ".concat(r)))}),1e4),s=t=>{const a=Ev();if("Safari"===a.name&&11===Number(a.version)&&t.track.id!==r&&t.streams[0].id===i){var c;const i=t.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(o,r,t.track.id),this.peerConnection.removeEventListener("track",s),clearTimeout(n),void e({track:i,id:r})}if(t.track.id===r)return this.peerConnection.removeEventListener("track",s),clearTimeout(n),void e({track:t.track,id:r})};this.peerConnection.addEventListener("track",s)}))})),n=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:n});const r=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(r),await cv.all(t)}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return null==t?void 0:t[0].ssrcId}setConfiguration(e){if(bC().supportPCSetConfiguration){const t=kU.resolvePCConfiguration(e);this.peerConnection.setConfiguration(t)}}}function xU(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("Locking from P2PConnection.".concat(t));try{for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return await r.apply(this,o)}finally{n()}},n}function LU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LU(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Mb([xU,Db("design:type",Function),Db("design:paramtypes",[Object,Object,Array,Object,String,String]),Db("design:returntype",cv)],kU.prototype,"connect",null),Mb([xU,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],kU.prototype,"stopSending",null),Mb([xU,Db("design:type",Function),Db("design:paramtypes",[String,Array,String,Object]),Db("design:returntype",cv)],kU.prototype,"receive",null),Mb([xU,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],kU.prototype,"stopReceiving",null),Mb([xU,Db("design:type",Function),Db("design:paramtypes",[String]),Db("design:returntype",cv)],kU.prototype,"muteRemote",null),Mb([xU,Db("design:type",Function),Db("design:paramtypes",[String]),Db("design:returntype",cv)],kU.prototype,"unmuteRemote",null),Mb([xU,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],kU.prototype,"muteLocal",null),Mb([xU,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],kU.prototype,"unmuteLocal",null),Mb([xU,Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],kU.prototype,"close",null),Mb([xU,Db("design:type",Function),Db("design:paramtypes",[String,dw]),Db("design:returntype",cv)],kU.prototype,"updateEncoderConfig",null),Mb([xU,Db("design:type",Function),Db("design:paramtypes",[String,dw]),Db("design:returntype",cv)],kU.prototype,"updateSendParameters",null),Mb([xU,Db("design:type",Function),Db("design:paramtypes",[dw,String]),Db("design:returntype",cv)],kU.prototype,"replaceTrack",null),Mb([xU,Db("design:type",Function),Db("design:paramtypes",[String]),Db("design:returntype",cv)],kU.prototype,"getRemoteSSRC",null);const jU="9",UU=4e4;function FU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FU(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class VU extends OI{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.send.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Rr(t=Object.keys(CT)).call(t,e)})))]}constructor(e,t){super(e,t),oh(this,"store",void 0),oh(this,"peerConnection",void 0),oh(this,"remoteSDP",void 0),oh(this,"initialOffer",void 0),oh(this,"transportEventReceiver",void 0),oh(this,"statsFilter",void 0),oh(this,"useXR",ST("USE_XR")),oh(this,"localCapabilities",void 0),oh(this,"remoteCodecs",void 0),oh(this,"localCandidateCount",0),oh(this,"allCandidatesReceived",!1),oh(this,"dataStreamChannelMap",new Map),oh(this,"establishPromise",void 0),oh(this,"recoveredDataChannelIds",[]),oh(this,"currentDataChannelId",1),oh(this,"mutex",new pE("P2PConnection-mutex")),this.store=t,this.peerConnection=new RTCPeerConnection(VU.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),this.statsFilter=mj(this.peerConnection,ST("STATS_UPDATE_INTERVAL"),void 0,Rv()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async updateRemoteRTPCapabilities(e,t){if(this.remoteCodecs=t,this.remoteSDP)if(this.remoteSDP.updateRemoteCodec(e,t,this.store.codec)){const e=await this.peerConnection.createOffer(),t=this.logSDPExchange(e.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(e);const n=this.remoteSDP.toString();null==t||t(n),await this.peerConnection.setRemoteDescription({type:"answer",sdp:n})}else VT.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.");else VT.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(t))}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=_j(e.sdp),n=await Aj({filterRTX:!ST("USE_PUB_RTX")&&!ST("USE_SUB_RTX"),filterVideoFec:ST("FILTER_VIDEO_FEC"),filterAudioFec:ST("FILTER_AUDIO_FEC"),filterVideoCodec:ST("FILTER_VIDEO_CODEC")},{useXR:this.useXR});return this.localCapabilities=Dj(n),this.initialOffer=e,zU(zU({},t),{},{rtpCapabilities:n,offerSDP:e.sdp})}catch(e){throw new Wv(Hv.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e,t,n,r,i,o){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new class{get localCapabilities(){return Y_(this._localCapabilities)}get rtpCapabilities(){return Y_(this._rtpCapabilities)}get candidates(){return Y_(this._candidates)}get iceParameters(){return Y_(this._iceParameters)}get dtlsParameters(){return Y_(this._dtlsParameters)}constructor(e){oh(this,"sessionDesc",void 0),oh(this,"_localCapabilities",void 0),oh(this,"_rtpCapabilities",void 0),oh(this,"_candidates",void 0),oh(this,"_iceParameters",void 0),oh(this,"_dtlsParameters",void 0),oh(this,"setup",void 0),oh(this,"currentMidIndex",void 0),oh(this,"cname",void 0),oh(this,"firefoxSsrcMidMap",new Map),e=Y_(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,remoteSetup:o,localCapabilities:s,cname:a}=e,c=QP.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n");this._rtpCapabilities=i,this._candidates=r,this._iceParameters=t,this._dtlsParameters=n,this._localCapabilities=s,this.setup=o,this.cname=a;const l=this.rtpCapabilities.send;for(const d of c.mediaDescriptions){if(d.attributes.iceUfrag=t.iceUfrag,d.attributes.icePwd=t.icePwd,d.attributes.fingerprints=n.fingerprints,d.attributes.candidates=r,d.attributes.setup=o,"video"===d.media.mediaType&&(d.media.fmts=l.videoCodecs.map((e=>e.payloadType.toString(10))),d.attributes.payloads=l.videoCodecs,d.attributes.extmaps=l.videoExtensions,ST("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Tj([{ssrcId:UU,rtx:ST("USE_SUB_RTX")?40001:void 0}],this.cname);d.attributes.ssrcs=e,d.attributes.ssrcGroups=t}if("audio"===d.media.mediaType&&(d.media.fmts=l.audioCodecs.map((e=>e.payloadType.toString(10))),d.attributes.payloads=l.audioCodecs,d.attributes.extmaps=l.audioExtensions,kj(d),ST("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Tj([{ssrcId:2e4}],this.cname);d.attributes.ssrcs=e,d.attributes.ssrcGroups=t}}this.sessionDesc=c,this.currentMidIndex=c.mediaDescriptions.length-1}preloadRemoteMedia(){const e=ST("PRELOAD_MEDIA_COUNT");this.rtpCapabilities;const t=this.candidates,n=this.dtlsParameters,r=this.iceParameters,i=this.rtpCapabilities.send;for(let o=1;o<e;o++){const e=2*o+2e4,s=2*o+UU,{ssrcs:a,ssrcGroups:c}=Tj([{ssrcId:e}],this.cname),{ssrcs:l,ssrcGroups:d}=Tj([{ssrcId:s,rtx:ST("USE_SUB_RTX")?s+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:jU,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.videoCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.videoExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:l,ssrcGroups:d,rtcpFeedbackWildcards:[],payloads:i.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:jU,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.audioCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.audioExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:a,ssrcGroups:c,rtcpFeedbackWildcards:[],payloads:i.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return QP.print(this.sessionDesc)}send(e,t,n,r){const{ssrcs:i,ssrcGroups:o}=Tj(t,this.cname,ST("SYNC_GROUP")?n:void 0),s=this.findPreloadMediaDesc(i);if(s){if(Rv()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,s.attributes.mid),r&&(r.twcc||r.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(s,r),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,i);let n;return-1===t||1===t&&(wv()||kv())||0===t&&ST("USE_SUB_RTX")||xv()?(n=this.createOrRecycleSendMedia(e,i,o,"sendonly",r),this.updateBundleMids()):(n=Y_(this.sessionDesc.mediaDescriptions[t]),n.attributes.direction="sendonly",n.attributes.ssrcs=i,n.attributes.ssrcGroups=o,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(n,r)),Rv()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,n.attributes.mid),{mid:n.attributes.mid,needExchangeSDP:!0}}}sendDataChannel(){const{mediaDesc:e,needExchangeSDP:t}=this.createOrRecycleDataChannel();return this.updateBundleMids(),{mid:e.attributes.mid,needExchangeSDP:t}}batchSend(e){const t=e.map((e=>{let{kind:t,ssrcMsg:n,mslabel:r}=e;return this.send(t,n,r)})),n=[];let r=!1;return t.forEach((e=>{let{mid:t,needExchangeSDP:i}=e;i&&(r=!0),n.push(t)})),{mids:n,needExchangeSDP:r}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((e=>{"0"===e.attributes.mid||Rv()||xv()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")})),this.updateBundleMids()}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Rr(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="inactive"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Rr(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="recvonly"}))}receive(e,t,n,r){e.forEach(((e,i)=>{this.createOrRecycleRecvMedia(e,[],"recvonly",t,n,r[i])})),this.updateBundleMids()}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((e=>{e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}updateCandidates(e){const t=this._candidates.filter((e=>"udp"===e.transport));if(e===cI.TCP){if(0===t.length)return;if(ST("TCP_CANDIDATE_ONLY")){const e=this._candidates.filter((e=>"tcp"===e.transport));t.forEach((t=>{-1===e.findIndex((e=>e.connectionAddress===t.connectionAddress))&&e.push(PU(PU({},t),{},{foundation:"tcpcandidate",priority:Number(t.priority)-1+"",transport:"tcp",port:Number(t.port)+90+""}))})),this._candidates=e}else{const e=[];t.forEach((t=>{e.push(PU(PU({},t),{},{foundation:"tcpcandidate",priority:Number(t.priority)-1+"",transport:"tcp",port:Number(t.port)+90+""}))})),this._candidates=[...t,...e]}}else if(e===cI.RELAY){if(0!==t.length)return;{const e=this._candidates.filter((e=>"tcp"===e.transport));e.forEach((e=>{t.push(PU(PU({},e),{},{foundation:"udpcandidate",priority:Number(e.priority)+1+"",transport:"udp",port:Number(e.port)-90+""}))})),this._candidates=[...t,...e]}}else 0===t.length?(this._candidates.filter((e=>"tcp"===e.transport)).forEach((e=>{t.push(PU(PU({},e),{},{foundation:"udpcandidate",priority:Number(e.priority)+1+"",transport:"udp",port:Number(e.port)-90+""}))})),this._candidates=t):this._candidates=this._candidates.filter((e=>"tcp"!==e.transport));for(const n of this.sessionDesc.mediaDescriptions)n.attributes.candidates=this.candidates}restartICE(e){e=Y_(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}findAvailableMediaIndex(e,t){return this.sessionDesc.mediaDescriptions.findIndex((n=>{const r=n.media.mediaType===e&&"0"!==n.media.port&&("sendonly"===n.attributes.direction||"sendrecv"===n.attributes.direction)&&0===n.attributes.ssrcs.length;if(Rv()){if(r){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==n.attributes.mid&&"1"!==n.attributes.mid)||!(!e||e!==n.attributes.mid)}return!1}return r}))}createOrRecycleDataChannel(){for(const n of this.sessionDesc.mediaDescriptions)if("application"===n.media.mediaType)return{mediaDesc:n,needExchangeSDP:!1};this.currentMidIndex+=1;const e="".concat(this.currentMidIndex),t={media:{mediaType:"application",port:jU,protos:["UDP","DTLS","SCTP"],fmts:["webrtc-datachannel"]},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:[],fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[],rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,mid:"".concat(e),sctpPort:"5000"}};return this.sessionDesc.mediaDescriptions.push(t),{mediaDesc:t,needExchangeSDP:!0}}createOrRecycleRecvMedia(e,t,n,r,i,o){const s=e._mediaStreamTrack.kind,a=this.rtpCapabilities.recv,c=Lj(s,a,this.localCapabilities.send,s===aI.VIDEO?r:i),l=s===aI.VIDEO?a.videoExtensions:a.audioExtensions;this.currentMidIndex+=1;const d="".concat(this.currentMidIndex);let u={media:{mediaType:s,port:jU,protos:["UDP","TLS","RTP","SAVPF"],fmts:c.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:l,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:c,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(d)}};u=this.mungRecvMediaDsec(u,e,o);const h=this.findFirstClosedMedia(s);if(h){const e=this.sessionDesc.mediaDescriptions.indexOf(h);this.sessionDesc.mediaDescriptions[e]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}updateRemoteCodec(e,t,n){const r=[...new Set(this._rtpCapabilities.recv.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Rr(t=Object.keys(CT)).call(t,e)})))],i=new Set(t);if(r.every((e=>i.has(e))))return VT.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(t)),!1;const o=this._rtpCapabilities.recv.videoCodecs.filter((e=>t.some((t=>{var n;return Rr(n=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(n,t)}))));if(0===o.length)return VT.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(r," codecs: ").concat(t)),!1;const s=[...new Set(o.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")))];let a;if(VT.debug("updateRemoteCodec, from ".concat(r," to ").concat(s)),0===e.length)a=this.sessionDesc.mediaDescriptions.filter((e=>"video"===e.media.mediaType&&"recvonly"===e.attributes.direction));else if(a=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&Rr(e).call(e,t.attributes.mid)&&"recvonly"===t.attributes.direction)),a.length!==e.length)return VT.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(e,", codecs: ").concat(t)),!1;this._rtpCapabilities.recv.videoCodecs=o;const c=this.localCapabilities.send,l=this.rtpCapabilities.recv,d=Lj(aI.VIDEO,l,c,n);return a.forEach((e=>{const t=d.map((e=>e.payloadType.toString(10)));VT.debug("updateRemoteCodec mid: ".concat(e.attributes.mid,", from ").concat(e.attributes.payloads," to ").concat(d)),e.attributes.payloads=d,e.media.fmts=t})),!0}createOrRecycleSendMedia(e,t,n,r,i){const o=this.rtpCapabilities.send,s=e===aI.VIDEO?o.videoCodecs:o.audioCodecs,a=e===aI.VIDEO?o.videoExtensions:o.audioExtensions;this.currentMidIndex+=1;const c="".concat(this.currentMidIndex);let l={media:{mediaType:e,port:jU,protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:a,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};l=this.mungSendMediaDesc(l,i);const d=this.findFirstClosedMedia(e);if(d){const e=this.sessionDesc.mediaDescriptions.indexOf(d);this.sessionDesc.mediaDescriptions[e]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>"0"!==e.media.port)).map((e=>e.attributes.mid))}mungRecvMediaDsec(e,t,n){const r=Y_(e);return Ij(r),bj(r,t),Nj(r,t),Cj(r),wj(r,n,this.localCapabilities.send),r}mungSendMediaDesc(e,t){const n=Y_(e);return wj(n,t,this.localCapabilities.recv),kj(n),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>Rv()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))}getSSRC(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===t?void 0:t.attributes.ssrcs}}({remoteIceParameters:e,remoteDtlsParameters:t,candidates:n,remoteRTPCapabilities:r,remoteSetup:i,localCapabilities:this.localCapabilities,cname:o}),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const s=this.remoteSDP.toString(),a=QP.parse(this.initialOffer.sdp),c=a.mediaDescriptions.find((e=>"audio"===e.media.mediaType));c&&kj(c),this.useXR&&xj(a);const l=QP.print(a),d=this.logSDPExchange(l||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),null==d||d(s),await this.peerConnection.setRemoteDescription({type:"answer",sdp:s});const u=this.peerConnection.getTransceivers()[0];if(null!=u&&u.receiver&&this.tryBindTransportEvents(u.receiver),ST("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia();const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t)}}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}send(e,t,n){var r=this;return DP((function*(){const i=yield bP(r.mutex.lock("From P2PConnection.send"));try{if(!r.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const o=[];e.forEach((e=>{const t=r.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});o.push(t),e._updateRtpTransceiver(t)})),Rv()&&!0===ST("SIMULCAST")&&(yield bP(r.applySimulcastForFirefox(o,e)));const s=yield bP(r.peerConnection.createOffer()),a=r.remoteSDP.predictReceivingMids(e.length),c=r.mungSendOfferSDP(s.sdp,e,a),l=QP.parse(c),d=a.map((e=>{const t=l.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return Ej(t,ST("USE_PUB_RTX"))}));let u;try{u=yield d}catch(i){u=[],r.remoteSDP.receive(e,t,n,u);const o=r.remoteSDP.toString();throw yield bP(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield bP(r.peerConnection.setRemoteDescription({type:"answer",sdp:o})),yield bP(r.stopSending(a,!0)),i}r.remoteSDP.receive(e,t,n,u);const h=r.remoteSDP.toString(),p=r.logSDPExchange(c,"offer","local","send");return yield bP(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield bP(r.applySimulcastEncodings(o,e)),yield bP(r.applySendEncodings(o,e)),null==p||p(h),yield bP(r.peerConnection.setRemoteDescription({type:"answer",sdp:h})),o.map(((e,t)=>{const n=a[t];return{localSSRC:d[t],id:n,transceiver:e}}))}catch(e){throw e instanceof Wv?e:new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{i()}}))()}async createDataChannels(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.createDataChannels before remote SDP created");let n=this.dataStreamChannelMap.get(e);if(n&&"open"===n.readyState)VT.debug("[P2PConnection] Channels are already available and can be reused directly.");else{const t=this.currentDataChannelId<1023?this.currentDataChannelId++:this.recoveredDataChannelIds.shift();if("number"!=typeof t)throw new Error("create DataChannel error, because cannot get dc id");n=this.peerConnection.createDataChannel("datastream-channel",{id:t,negotiated:!0,ordered:!1,maxRetransmits:ST("DATASTREAM_MAX_RETRANSMITS")}),n.binaryType="arraybuffer",this.dataStreamChannelMap.set(e,n)}t.forEach((e=>{e._updateOriginDataChannel(n)}));const{needExchangeSDP:r}=this.remoteSDP.sendDataChannel();if(r){const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t),VT.debug("[P2PConnection] createDataChannels by exchanging SDP.")}else VT.debug("[P2PConnection] createDataChannels no need to exchange SDP.");return}catch(e){throw e instanceof Wv?e:new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.createDataChannels failed; ".concat(e.toString()))}}async stopDataChannels(e){try{const t=this.dataStreamChannelMap.get(e);return t&&(t.id&&this.recoveredDataChannelIds.push(t.id),t.close()),void this.dataStreamChannelMap.delete(e)}catch(e){throw e instanceof Wv?e:new Wv(Hv.DATACHANNEL_FAILED,"P2PConnection.stopDataChannels failed; ".concat(e.toString()))}}async stopSending(e,t){const n=t?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");t.map((e=>{var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}finally{n&&n()}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:i,needExchangeSDP:o}=this.remoteSDP.send(e,t,n,r);if(o){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer(),o=this.mungReceiveAnswerSDP(r.sdp,i,e);null==n||n(o||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:o}),VT.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP."))}else VT.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," no need to exchange SDP."));const s=this.peerConnection.getTransceivers().find((e=>e.mid===i));if(!s)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,id:i,transceiver:s}}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:t,needExchangeSDP:n}=this.remoteSDP.batchSend(e);if(n){const e=this.remoteSDP.toString(),t=this.logSDPExchange(e,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const n=await this.peerConnection.createAnswer();null==t||t(n.sdp||""),await this.peerConnection.setLocalDescription(n),VT.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))}else VT.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive no need to exchange SDP."));return t.map((e=>{const t=this.peerConnection.getTransceivers().find((t=>t.mid===e));if(!t)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:t.receiver.track,id:e,transceiver:t}}))}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.mute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(e.toString()))}}async unmuteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.unmute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(e.toString()))}}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((e=>{e.direction="inactive"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((async(e,t)=>{e.direction="sendonly"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}restartICE(e){var t=this;return DP((function*(){const n=yield bP(t.mutex.lock("From P2PConnection.restartICE"));try{if(!t.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(bC().supportPCSetConfiguration){const n=t.peerConnection.getConfiguration(),r=e===cI.RELAY?"relay":"all";n.iceTransportPolicy!==r&&(VT.debug("[".concat(t.store.clientId,"] restartICE change iceTransportPolicy from [").concat(n.iceTransportPolicy,"] to [").concat(r,"]")),n.iceTransportPolicy=r,t.peerConnection.setConfiguration(n))}else if(e===cI.RELAY)return;t.remoteSDP.updateCandidates(e);const n=yield bP(t.peerConnection.createOffer({iceRestart:!0}));if(!n.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const r=_j(n.sdp),{remoteIceParameters:i}=yield r.iceParameters;t.remoteSDP.restartICE(i);const o=t.remoteSDP.toString(),s=t.logSDPExchange(n.sdp||"","offer","local","restartICE");t.store.descriptionStart(),yield bP(t.peerConnection.setLocalDescription(n)),null==s||s(o),yield bP(t.peerConnection.setRemoteDescription({type:"answer",sdp:o}))}catch(e){VT.warning("[".concat(t.store.clientId,"] restart ICE failed, abort operation"),e)}finally{n()}}))()}close(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear(),this.recoveredDataChannelIds=[],this.currentDataChannelId=1}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const n=await this.peerConnection.createOffer(),r=this.mungSendOfferSDP(n.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const i=this.remoteSDP.toString(),o=this.logSDPExchange(r,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:r}),null==o||o(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new Wv(Hv.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===n.length&&(this.isVP8Simulcast(t)?Rv()||await this.applySimulcastEncodings(n,[t]):await this.applySendEncodings(n,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getTransceivers().find((e=>e.mid===t));n&&await n.sender.replaceTrack(e._mediaStreamTrack)}async getSelectedCandidatePair(){const e=this.peerConnection.getReceivers();if(e.length>0&&e[0].transport&&e[0].transport.iceTransport&&e[0].transport.iceTransport.getSelectedCandidatePair&&e[0].transport.iceTransport.getSelectedCandidatePair()){const t=e[0].transport.iceTransport,{local:n,remote:r}=t.getSelectedCandidatePair();return{local:zU(zU({},$P),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:zU(zU({},$P),{},{candidateType:r.type,protocol:r.protocol,address:r.address,port:r.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,VT.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,VT.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),ST("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(e){const t={iceServers:[]};return e.iceServers?t.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(S_(e.turnServer.servers)?t.iceServers=e.turnServer.servers:(t.iceServers&&t.iceServers.push(...VU.turnServerConfigToIceServers(e.turnServer.servers)),ST("USE_TURN_SERVER_OF_GATEWAY")&&t.iceServers&&e.turnServer.serversFromGateway&&t.iceServers.push(...VU.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),ST("FORCE_TURN_TCP")?t.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(t.iceTransportPolicy="relay")})))),ST("ENABLE_ENCODED_TRANSFORM")&&bC().supportWebRTCEncodedTransform&&(t.encodedInsertableStreams=!0),t}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(vN(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!ST("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}tryBindTransportEvents(e){const t=e.transport;if(t){this.transportEventReceiver=e,t.onstatechange=()=>{var e;null!=t&&t.state&&(null===(e=this.onDTLSTransportStateChange)||void 0===e||e.call(this,t.state))},t.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,"error"in e?e.error:e)};const n=t.iceTransport;n&&(n.onstatechange=()=>{const e=null==t?void 0:t.iceTransport.state;var n;e&&(null===(n=this.onICETransportStateChange)||void 0===n||n.call(this,e))},n.getSelectedCandidatePair&&(n.onselectedcandidatepairchange=()=>{if(n.getSelectedCandidatePair()){const{local:e,remote:t}=n.getSelectedCandidatePair();VT.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:e.type,protocol:e.protocol}),", remote ").concat(JSON.stringify({candidateType:t.type,protocol:t.protocol,address:t.address,port:t.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(e,t){var n;if(t||(t=this.peerConnection.getSenders().find((t=>t.track===e._mediaStreamTrack))),!t)return VT.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(e))return VT.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!bC().supportSetRtpSenderParameters)return VT.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const r={},i={};switch(e._optimizationMode){case"motion":r.degradationPreference="maintain-framerate";break;case"detail":r.degradationPreference="maintain-resolution";break;default:r.degradationPreference="balanced"}if(e._encoderConfig){var o;const{bitrateMax:t,frameRate:n,scaleResolutionDownBy:r}=e._encoderConfig;t&&(i.maxBitrate=1e3*t),(Rr(o=e._hints).call(o,VC.LOW_STREAM)||e.isUseScaleResolutionDownBy)&&(n&&(i.maxFramerate=EN(n)),r&&r>=1&&(i.scaleResolutionDownBy=r))}if(ST("DSCP_TYPE")&&Vv()){var s;const e=ST("DSCP_TYPE");Rr(s=["very-low","low","medium","high"]).call(s,e)&&(i.networkPriority=e)}const a=t.getParameters(),c=null===(n=a.encodings)||void 0===n?void 0:n[0];Rv()&&!c&&(r.encodings=[i]),c&&Object.assign(c,i),Object.assign(a,r),VT.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(a.encodings))),await t.setParameters(a)}async applySendEncodings(e,t){try{if(!bC().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];i instanceof SR&&!this.isVP8Simulcast(i)&&await this.updateRtpSenderEncodings(i,r.sender)}}catch(e){VT.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t,n){const r=QP.parse(e);return t.forEach(((e,t)=>{const i=n[t],o=r.mediaDescriptions.find((e=>e.attributes.mid===i));o&&(bj(o,e),Rj(o,e,this.store.codec))})),QP.print(r)}mungReceiveAnswerSDP(e,t,n){const r=QP.parse(e),i=r.mediaDescriptions.find((e=>e.attributes.mid===t));return i&&(n===aI.AUDIO&&"audio"===i.media.mediaType&&kj(i),this.useXR&&xj(r)),QP.print(r)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var n,r,i,o,s;const c=e[a],l=t[a];if(l instanceof SR&&!Rr(n=l._hints).call(n,VC.LOW_STREAM)&&null!==(r=l._encoderConfig)&&void 0!==r&&r.bitrateMax&&(null===(i=l._encoderConfig)||void 0===i?void 0:i.bitrateMax)>200&&null!==(o=l._scalabilityMode)&&void 0!==o&&o.numSpatialLayers&&(null===(s=l._scalabilityMode)||void 0===s?void 0:s.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const n=c.sender.getParameters();await c.sender.setParameters(Object.assign(n,e))}}}async applySimulcastEncodings(e,t){if(!Rv()&&e.length===t.length)for(let n=0;n<e.length;n++){const r=t[n];if(r instanceof SR&&this.isVP8Simulcast(r)){const t=e[n],i={},o={high:1e3*(r._encoderConfig.bitrateMax-50),medium:5e4};i.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:o.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:o.medium,scaleResolutionDownBy:4}];const s=t.sender.getParameters();await t.sender.setParameters(Object.assign(s,i))}}}isVP8Simulcast(e){var t,n,r,i,o;return!!(e instanceof SR&&ST("SIMULCAST")&&"vp8"===this.store.codec&&!Rr(t=e._hints).call(t,VC.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=e._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(i=e._scalabilityMode)&&void 0!==i&&i.numSpatialLayers&&(null===(o=e._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1)}logSDPExchange(e,t,n,r){if(ST("SDP_LOGGING"))return VT.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return null==t?void 0:t[0].ssrcId}setConfiguration(e){if(bC().supportPCSetConfiguration){const t=VU.resolvePCConfiguration(e);this.peerConnection.setConfiguration(t)}}}function BU(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PConnection.".concat(t));try{for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return await r.apply(this,o)}finally{n()}},n}function GU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GU(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Mb([BU,Db("design:type",Function),Db("design:paramtypes",[Array,Array]),Db("design:returntype",cv)],VU.prototype,"updateRemoteRTPCapabilities",null),Mb([BU,Db("design:type",Function),Db("design:paramtypes",[Object,Object,Array,Object,String,String]),Db("design:returntype",cv)],VU.prototype,"connect",null),Mb([BU,Db("design:type",Function),Db("design:paramtypes",[Object,Array]),Db("design:returntype",cv)],VU.prototype,"createDataChannels",null),Mb([BU,Db("design:type",Function),Db("design:paramtypes",[String,Array,String,Object]),Db("design:returntype",cv)],VU.prototype,"receive",null),Mb([BU,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],VU.prototype,"batchReceive",null),Mb([BU,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],VU.prototype,"stopReceiving",null),Mb([BU,Db("design:type",Function),Db("design:paramtypes",[String]),Db("design:returntype",cv)],VU.prototype,"muteRemote",null),Mb([BU,Db("design:type",Function),Db("design:paramtypes",[String]),Db("design:returntype",cv)],VU.prototype,"unmuteRemote",null),Mb([BU,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],VU.prototype,"muteLocal",null),Mb([BU,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],VU.prototype,"unmuteLocal",null),Mb([BU,Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],VU.prototype,"close",null),Mb([BU,Db("design:type",Function),Db("design:paramtypes",[String,dw]),Db("design:returntype",cv)],VU.prototype,"updateEncoderConfig",null),Mb([BU,Db("design:type",Function),Db("design:paramtypes",[String,dw]),Db("design:returntype",cv)],VU.prototype,"updateSendParameters",null),Mb([BU,Db("design:type",Function),Db("design:paramtypes",[dw,String]),Db("design:returntype",cv)],VU.prototype,"replaceTrack",null),Mb([BU,Db("design:type",Function),Db("design:paramtypes",[String]),Db("design:returntype",cv)],VU.prototype,"getRemoteSSRC",null);const WU="v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0\na=msid-semantic: WMS\na=ice-lite\nm=application 9 UDP/DTLS/SCTP webrtc-datachannel\nc=IN IP4 127.0.0.1\na=mid:0\n",YU="9",qU=2e4,KU=4e4;class QU{get localCapabilities(){return Y_(this._localCapabilities)}get rtpCapabilities(){return Y_(this._rtpCapabilities)}get candidates(){return Y_(this._candidates)}get iceParameters(){return Y_(this._iceParameters)}get dtlsParameters(){return Y_(this._dtlsParameters)}constructor(e){oh(this,"sessionDesc",void 0),oh(this,"_localCapabilities",void 0),oh(this,"_rtpCapabilities",void 0),oh(this,"_candidates",void 0),oh(this,"_iceParameters",void 0),oh(this,"_dtlsParameters",void 0),oh(this,"setup",void 0),oh(this,"currentMidIndex",void 0),oh(this,"cname",void 0),oh(this,"firefoxSsrcMidMap",new Map),e=Y_(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,remoteSetup:o,localCapabilities:s,cname:a}=e,c=QP.parse(WU);this._rtpCapabilities=i,this._candidates=r,this._iceParameters=t,this._dtlsParameters=n,this._localCapabilities=s,this.setup=o,this.cname=a;const l=this.rtpCapabilities.send;for(const d of c.mediaDescriptions){if(d.attributes.iceUfrag=t.iceUfrag,d.attributes.icePwd=t.icePwd,d.attributes.fingerprints=n.fingerprints,d.attributes.candidates=r,d.attributes.setup=o,"application"===d.media.mediaType&&(d.attributes.sctpPort="5000"),"video"===d.media.mediaType&&(d.media.fmts=l.videoCodecs.map((e=>e.payloadType.toString(10))),d.attributes.payloads=l.videoCodecs,d.attributes.extmaps=l.videoExtensions,ST("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Tj([{ssrcId:KU,rtx:ST("USE_SUB_RTX")?40001:void 0}],this.cname);d.attributes.ssrcs=e,d.attributes.ssrcGroups=t}if("audio"===d.media.mediaType&&(d.media.fmts=l.audioCodecs.map((e=>e.payloadType.toString(10))),d.attributes.payloads=l.audioCodecs,d.attributes.extmaps=l.audioExtensions,kj(d),ST("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Tj([{ssrcId:qU}],this.cname);d.attributes.ssrcs=e,d.attributes.ssrcGroups=t}}this.sessionDesc=c,this.currentMidIndex=c.mediaDescriptions.length-1}updateRemoteRTPCapabilities(e){const t=QP.parse(WU);this._rtpCapabilities=e;const n=this.rtpCapabilities.send;for(const r of t.mediaDescriptions){if(r.attributes.iceUfrag=this._iceParameters.iceUfrag,r.attributes.icePwd=this._iceParameters.icePwd,r.attributes.fingerprints=this._dtlsParameters.fingerprints,r.attributes.candidates=this._candidates,r.attributes.setup=this.setup,"application"===r.media.mediaType&&(r.attributes.sctpPort="5000"),"video"===r.media.mediaType&&(r.media.fmts=n.videoCodecs.map((e=>e.payloadType.toString(10))),r.attributes.payloads=n.videoCodecs,r.attributes.extmaps=n.videoExtensions,ST("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Tj([{ssrcId:KU,rtx:ST("USE_SUB_RTX")?40001:void 0}],this.cname);r.attributes.ssrcs=e,r.attributes.ssrcGroups=t}if("audio"===r.media.mediaType&&(r.media.fmts=n.audioCodecs.map((e=>e.payloadType.toString(10))),r.attributes.payloads=n.audioCodecs,r.attributes.extmaps=n.audioExtensions,ST("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Tj([{ssrcId:qU}],this.cname);r.attributes.ssrcs=e,r.attributes.ssrcGroups=t}}this.sessionDesc=t,this.currentMidIndex=t.mediaDescriptions.length-1}preloadRemoteMedia(e){this.rtpCapabilities;const t=this.candidates,n=this.dtlsParameters,r=this.iceParameters,i=this.rtpCapabilities.send;for(let o=1;o<e;o++){const e=2*o+qU,s=2*o+KU,{ssrcs:a,ssrcGroups:c}=Tj([{ssrcId:e}],this.cname),{ssrcs:l,ssrcGroups:d}=Tj([{ssrcId:s,rtx:ST("USE_SUB_RTX")?s+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:YU,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.videoCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.videoExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:l,ssrcGroups:d,rtcpFeedbackWildcards:[],payloads:i.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o-1)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:YU,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.audioCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.audioExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:a,ssrcGroups:c,rtcpFeedbackWildcards:[],payloads:i.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return QP.print(this.sessionDesc)}send(e,t,n,r){const{ssrcs:i,ssrcGroups:o}=Tj(t,this.cname,ST("SYNC_GROUP")?n:void 0),s=this.findPreloadMediaDesc(i);if(s){if(Rv()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,s.attributes.mid),r&&(r.twcc||r.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(s,r),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,i);let n;return-1===t||wv()||Av()||kv()||0===t&&ST("USE_SUB_RTX")?(n=this.createOrRecycleSendMedia(e,i,o,"sendonly",r),this.updateBundleMids()):(n=Y_(this.sessionDesc.mediaDescriptions[t]),n.attributes.direction="sendonly",n.attributes.ssrcs=i,n.attributes.ssrcGroups=o,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(n,r)),Rv()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,n.attributes.mid),{mid:n.attributes.mid,needExchangeSDP:!0}}}batchSend(e){const t=e.map((e=>{let{kind:t,ssrcMsg:n,mslabel:r}=e;return this.send(t,n,r)})),n=[];let r=!1;return t.forEach((e=>{let{mid:t,needExchangeSDP:i}=e;i&&(r=!0),n.push(t)})),{mids:n,needExchangeSDP:r}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((e=>{"0"===e.attributes.mid||Rv()||wv()||Av()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")})),this.updateBundleMids()}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Rr(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="inactive"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Rr(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="recvonly"}))}receive(e,t,n,r){e.forEach(((e,i)=>{this.createOrRecycleRecvMedia(e,[],"recvonly",t,n,r[i])})),this.updateBundleMids()}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((e=>{e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}updateCandidates(e){e===cI.TCP?this._candidates.forEach((e=>{-1===this._candidates.findIndex((t=>"tcp"===t.transport&&t.connectionAddress===e.connectionAddress&&t.port===e.port))&&this._candidates.push(HU(HU({},e),{},{foundation:"tcpcandidate",priority:Number(e.priority)-1+"",transport:"tcp",port:Number(e.port)+90+""}))})):this._candidates=this._candidates.filter((e=>"tcp"!==e.transport));for(const t of this.sessionDesc.mediaDescriptions)t.attributes.candidates=this.candidates}restartICE(e){e=Y_(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}findAvailableMediaIndex(e,t){return this.sessionDesc.mediaDescriptions.findIndex((n=>{const r=n.media.mediaType===e&&"0"!==n.media.port&&("sendonly"===n.attributes.direction||"sendrecv"===n.attributes.direction)&&0===n.attributes.ssrcs.length;if(Rv()){if(r){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==n.attributes.mid&&"1"!==n.attributes.mid)||!(!e||e!==n.attributes.mid)}return!1}return r}))}createOrRecycleRecvMedia(e,t,n,r,i,o){const s=e._mediaStreamTrack.kind,a=this.rtpCapabilities.recv,c=Lj(s,a,this.localCapabilities.send,s===aI.VIDEO?r:i),l=s===aI.VIDEO?a.videoExtensions:a.audioExtensions;this.currentMidIndex+=1;const d="".concat(this.currentMidIndex);let u={media:{mediaType:s,port:YU,protos:["UDP","TLS","RTP","SAVPF"],fmts:c.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:l,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:c,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(d)}};u=this.mungRecvMediaDsec(u,e,o);const h=this.findFirstClosedMedia(s);if(h){const e=this.sessionDesc.mediaDescriptions.indexOf(h);this.sessionDesc.mediaDescriptions[e]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}updateRemoteCodec(e,t,n){const r=[...new Set(this._rtpCapabilities.recv.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Rr(t=Object.keys(CT)).call(t,e)})))],i=new Set(t);if(r.every((e=>i.has(e))))return VT.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(t)),!1;const o=this._rtpCapabilities.recv.videoCodecs.filter((e=>t.some((t=>{var n;return Rr(n=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(n,t)}))));if(0===o.length)return VT.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(r," codecs: ").concat(t)),!1;const s=[...new Set(o.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")))];let a;if(VT.debug("updateRemoteCodec, from ".concat(r," to ").concat(s)),0===e.length)a=this.sessionDesc.mediaDescriptions.filter((e=>"video"===e.media.mediaType&&"recvonly"===e.attributes.direction));else if(a=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&Rr(e).call(e,t.attributes.mid)&&"recvonly"===t.attributes.direction)),a.length!==e.length)return VT.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(e,", codecs: ").concat(t)),!1;this._rtpCapabilities.recv.videoCodecs=o;const c=this.localCapabilities.send,l=this.rtpCapabilities.recv,d=Lj(aI.VIDEO,l,c,n);return a.forEach((e=>{const t=d.map((e=>e.payloadType.toString(10)));VT.debug("updateRemoteCodec mid: ".concat(e.attributes.mid,", from ").concat(e.attributes.payloads," to ").concat(d)),e.attributes.payloads=d,e.media.fmts=t})),!0}createOrRecycleSendMedia(e,t,n,r,i){const o=this.rtpCapabilities.send,s=e===aI.VIDEO?o.videoCodecs:o.audioCodecs,a=e===aI.VIDEO?o.videoExtensions:o.audioExtensions;this.currentMidIndex+=1;const c="".concat(this.currentMidIndex);let l={media:{mediaType:e,port:YU,protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:a,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};l=this.mungSendMediaDesc(l,i);const d=this.findFirstClosedMedia(e);if(d){const e=this.sessionDesc.mediaDescriptions.indexOf(d);this.sessionDesc.mediaDescriptions[e]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>"0"!==e.media.port)).map((e=>e.attributes.mid))}mungRecvMediaDsec(e,t,n){const r=Y_(e);return Ij(r),bj(r,t),Nj(r,t),Cj(r),wj(r,n,this.localCapabilities.send),r}mungSendMediaDesc(e,t){const n=Y_(e);return wj(n,t,this.localCapabilities.recv),kj(n),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>Rv()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))}getSSRC(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===t?void 0:t.attributes.ssrcs}}function JU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JU(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class ZU extends OI{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get localCodecs(){let e;return this.localCapabilities&&(e=Dj(this.localCapabilities)),[...new Set(e&&e.send.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Rr(t=Object.keys(CT)).call(t,e)})))]}constructor(e,t,n){super(e,t),oh(this,"store",void 0),oh(this,"peerConnection",void 0),oh(this,"remoteSDP",void 0),oh(this,"initialOffer",void 0),oh(this,"transportEventReceiver",void 0),oh(this,"statsFilter",void 0),oh(this,"useXR",ST("USE_XR")),oh(this,"localCapabilities",void 0),oh(this,"localCandidateCount",0),oh(this,"allCandidatesReceived",!1),oh(this,"remoteCodecs",void 0),oh(this,"dataStreamChannelMap",new Map),oh(this,"establishPromise",void 0),oh(this,"mutex",new pE("NVExtentionsConnection-mutex")),oh(this,"rtcMedia",void 0),this.store=t,this.peerConnection=n,this.statsFilter=mj(this.peerConnection,ST("STATS_UPDATE_INTERVAL"),void 0,Rv()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(e){try{const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=_j(e.sdp),n=await Aj({filterRTX:!ST("USE_PUB_RTX")&&!ST("USE_SUB_RTX"),filterVideoFec:ST("FILTER_VIDEO_FEC"),filterAudioFec:ST("FILTER_AUDIO_FEC"),filterVideoCodec:ST("FILTER_VIDEO_CODEC")},{useXR:this.useXR});return this.localCapabilities=n,this.initialOffer=e,XU(XU({},t),{},{rtpCapabilities:n,offerSDP:e.sdp})}catch(e){throw new kb(Hv.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e,t,n,r,i,o){try{if(!this.initialOffer)throw new Error("Cannot establish NVConnection without initial offer.");this.remoteSDP=new QU({remoteIceParameters:e,remoteDtlsParameters:t,candidates:n,remoteRTPCapabilities:r,remoteSetup:i,localCapabilities:Dj(this.localCapabilities),cname:o});const s=this.remoteSDP.toString(),a=QP.parse(this.initialOffer.sdp),c=a.mediaDescriptions.find((e=>"audio"===e.media.mediaType));c&&kj(c),this.useXR&&xj(a);const l=QP.print(a),d=this.logSDPExchange(l||"","offer","local","connect");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),null==d||d(s),await this.peerConnection.setRemoteDescription({type:"answer",sdp:s})}catch(e){throw new kb(Hv.EXCHANGE_SDP_FAILED,"NV.connect failed; ".concat(e.toString()))}}async updateRemoteRTPCapabilities(e,t){if(this.remoteCodecs=t,this.remoteSDP)if(this.remoteSDP.updateRemoteCodec(e,t,this.store.codec)){const e=await this.peerConnection.createOffer(),t=this.logSDPExchange(e.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(e);const n=this.remoteSDP.toString();null==t||t(n),await this.peerConnection.setRemoteDescription({type:"answer",sdp:n})}else VT.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.");else VT.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(t))}async updateRemoteConnect(e){var t,n,r,i;null===(t=this.remoteSDP)||void 0===t||t.updateRemoteRTPCapabilities(e),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&(null===(i=this.remoteSDP)||void 0===i||i.updateRemoteCodec([],this.remoteCodecs,this.store.codec)),null===(n=this.remoteSDP)||void 0===n||n.preloadRemoteMedia(2);const o=null===(r=this.remoteSDP)||void 0===r?void 0:r.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const s=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(s),VT.debug("[NVExtentionsConnection] updateRemoteRTPCapabilities by exchanging SDP.")}send(e,t,n){var r=this;return DP((function*(){const i=yield bP(r.mutex.lock("From NVExtentionsConnection.send"));try{if(!r.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.send before remote SDP created");const o=[];e.forEach((e=>{const t=r.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});o.push(t)})),Rv()&&!0===ST("SIMULCAST")&&(yield bP(r.applySimulcastForFirefox(o,e)));const s=yield bP(r.peerConnection.createOffer()),a=r.remoteSDP.predictReceivingMids(e.length),c=r.mungSendOfferSDP(s.sdp,e,a),l=QP.parse(c),d=a.map((e=>{const t=l.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return Ej(t,ST("USE_PUB_RTX"))}));let u;try{u=yield d}catch(i){u=[],r.remoteSDP.receive(e,t,n,u);const o=r.remoteSDP.toString();throw yield bP(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield bP(r.peerConnection.setRemoteDescription({type:"answer",sdp:o})),yield bP(r.stopSending(a,!0)),i}r.remoteSDP.receive(e,t,n,u);const h=r.remoteSDP.toString(),p=r.logSDPExchange(c,"offer","local","send");return yield bP(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield bP(r.applySimulcastEncodings(o,e)),yield bP(r.applySendEncodings(o,e)),null==p||p(h),yield bP(r.peerConnection.setRemoteDescription({type:"answer",sdp:h})),o.map(((e,t)=>{const n=a[t];return{localSSRC:d[t],id:n,transceiver:e}}))}catch(e){throw e instanceof kb?e:new kb(Hv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.send failed; ".concat(e.toString()))}finally{i()}}))()}async stopSending(e,t){const n=t?void 0:await this.mutex.lock("From NVExtentionsConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call NVExtentionsConnection.stopSending.");t.map((e=>{var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new kb(Hv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.stopSending failed; ".concat(e.toString()))}finally{n&&n()}}async createDataChannels(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.createDataChannels before remote SDP created");let n=this.dataStreamChannelMap.get(e);return n&&"open"===n.readyState?VT.debug("[P2PConnection] Channels are already available and can be reused directly."):(n=this.peerConnection.createDataChannel("datastream-channel",{ordered:!1,maxRetransmits:ST("DATASTREAM_MAX_RETRANSMITS")}),n.binaryType="arraybuffer",this.dataStreamChannelMap.set(e,n)),void t.forEach((e=>{e._updateOriginDataChannel(n)}))}catch(e){throw e instanceof kb?e:new kb(Hv.DATACHANNEL_FAILED,"NVExtentionsConnection.createDataChannels failed; ".concat(e.toString()))}}async stopDataChannels(e){try{const t=this.dataStreamChannelMap.get(e);return null==t||t.close(),void this.dataStreamChannelMap.delete(e)}catch(e){throw e instanceof kb?e:new kb(Hv.DATACHANNEL_FAILED,"NVExtentionsConnection.stopDataChannels failed; ".concat(e.toString()))}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.receive ".concat(e," before remoteSDP created."));const{mid:i,needExchangeSDP:o}=this.remoteSDP.send(e,t,n,r);if(o){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer(),o=this.mungReceiveAnswerSDP(r.sdp,i,e);null==n||n(o||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:o}),VT.debug("[NVExtentionsConnection] receive ".concat(e," by exchanging SDP."))}else VT.debug("[NVExtentionsConnection] receive ".concat(e," no need to exchange SDP."));const s=this.peerConnection.getTransceivers().find((e=>e.mid===i));if(!s)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,id:i}}catch(e){throw new kb(Hv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(e.toString()))}}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.batchReceive before remoteSDP created.");const{mids:t,needExchangeSDP:n}=this.remoteSDP.batchSend(e);if(n){const e=this.remoteSDP.toString(),t=this.logSDPExchange(e,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const n=await this.peerConnection.createAnswer();null==t||t(n.sdp||""),await this.peerConnection.setLocalDescription(n),VT.debug("[NVExtentionsConnection] batchReceive by exchanging SDP.")}else VT.debug("[NVExtentionsConnection] batchReceive no need to exchange SDP.");return t.map((e=>{const t=this.peerConnection.getTransceivers().find((t=>t.mid===e));if(!t)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:t.receiver.track,id:e}}))}catch(e){throw new kb(Hv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new kb(Hv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.mute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new kb(Hv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteRemote failed; ".concat(e.toString()))}}async unmuteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.unmute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new kb(Hv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteRemote failed; ".concat(e.toString()))}}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((e=>{e.direction="inactive"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new kb(Hv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((async(e,t)=>{e.direction="sendonly"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new kb(Hv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteLocal failed; ".concat(e.toString()))}}restartICE(e){var t=this;return DP((function*(){const n=yield bP(t.mutex.lock("From NVExtentionsConnection.restartICE"));try{if(!t.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(bC().supportPCSetConfiguration){const n=t.peerConnection.getConfiguration(),r=e===cI.RELAY?"relay":"all";n.iceTransportPolicy!==r&&(VT.debug("restartICE change iceTransportPolicy from [".concat(n.iceTransportPolicy,"] to [").concat(r,"]")),n.iceTransportPolicy=r,t.peerConnection.setConfiguration(n))}else if(e===cI.RELAY)return;e!==cI.RELAY&&t.remoteSDP.updateCandidates(e);const n=yield bP(t.peerConnection.createOffer({iceRestart:!0}));if(!n.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const r=_j(n.sdp),{remoteIceParameters:i}=yield r.iceParameters;t.remoteSDP.restartICE(i);const o=t.remoteSDP.toString(),s=t.logSDPExchange(n.sdp||"","offer","local","restartICE");yield bP(t.peerConnection.setLocalDescription(n)),null==s||s(o),yield bP(t.peerConnection.setRemoteDescription({type:"answer",sdp:o}))}catch(e){VT.warning("restart ICE failed, abort operation",e)}finally{n()}}))()}close(){var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.updateEncoderConfig before remote SDP created.");const n=await this.peerConnection.createOffer(),r=this.mungSendOfferSDP(n.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const i=this.remoteSDP.toString(),o=this.logSDPExchange(r,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:r}),null==o||o(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new kb(Hv.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===n.length&&(this.isVP8Simulcast(t)?Rv()||await this.applySimulcastEncodings(n,[t]):await this.applySendEncodings(n,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getTransceivers().find((e=>e.mid===t));n&&await n.sender.replaceTrack(e._mediaStreamTrack)}getP2PConnectionParams(){var e;if(null===(e=this.peerConnection.currentLocalDescription)||void 0===e||!e.sdp||!this.localCapabilities)throw new Error;return XU(XU({},_j(this.peerConnection.currentLocalDescription.sdp)),{},{rtpCapabilities:this.localCapabilities})}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,VT.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,VT.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),ST("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(e){const t={iceServers:[]};return e.iceServers?t.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(S_(e.turnServer.servers)?t.iceServers=e.turnServer.servers:(t.iceServers&&t.iceServers.push(...ZU.turnServerConfigToIceServers(e.turnServer.servers)),ST("USE_TURN_SERVER_OF_GATEWAY")&&t.iceServers&&e.turnServer.serversFromGateway&&t.iceServers.push(...ZU.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),ST("FORCE_TURN_TCP")?t.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(t.iceTransportPolicy="relay")})))),t}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(vN(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!ST("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}async applySendEncodings(e,t){try{if(!bC().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let d=0;d<e.length;d++){const u=e[d],h=t[d];if(h&&h instanceof SR){var n,r,i;if(this.isVP8Simulcast(h))continue;const e={},t={};switch(h._optimizationMode){case"motion":e.degradationPreference="maintain-framerate";break;case"detail":e.degradationPreference="maintain-resolution";break;default:e.degradationPreference="balanced"}var o,s,a,c;if(null!==(n=h._encoderConfig)&&void 0!==n&&n.bitrateMax&&(t.maxBitrate=1e3*(null===(o=h._encoderConfig)||void 0===o?void 0:o.bitrateMax)),Rr(r=h._hints).call(r,VC.LOW_STREAM)&&(null!==(s=h._encoderConfig)&&void 0!==s&&s.frameRate&&(t.maxFramerate=EN(h._encoderConfig.frameRate)),null!==(a=h._encoderConfig)&&void 0!==a&&a.scaleResolutionDownBy&&(null===(c=h._encoderConfig)||void 0===c?void 0:c.scaleResolutionDownBy)>1&&(t.scaleResolutionDownBy=h._encoderConfig.scaleResolutionDownBy)),ST("DSCP_TYPE")&&Vv()){var l;const e=ST("DSCP_TYPE");Rr(l=["very-low","low","medium","high"]).call(l,e)&&(t.networkPriority=e)}const d=u.sender.getParameters(),p=null===(i=d.encodings)||void 0===i?void 0:i[0];Rv()&&!p&&(e.encodings=[t]),p&&Object.assign(p,t),Object.assign(d,e),await u.sender.setParameters(d)}}}catch(e){VT.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(e,t,n){const r=QP.parse(e);return t.forEach(((e,t)=>{const i=n[t],o=r.mediaDescriptions.find((e=>e.attributes.mid===i));o&&(bj(o,e),Rj(o,e,this.store.codec))})),QP.print(r)}mungReceiveAnswerSDP(e,t,n){const r=QP.parse(e),i=r.mediaDescriptions.find((e=>e.attributes.mid===t));return i&&n===aI.AUDIO&&"audio"===i.media.mediaType&&kj(i),this.useXR&&xj(r),QP.print(r)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var n,r,i,o,s;const c=e[a],l=t[a];if(l instanceof SR&&!Rr(n=l._hints).call(n,VC.LOW_STREAM)&&null!==(r=l._encoderConfig)&&void 0!==r&&r.bitrateMax&&(null===(i=l._encoderConfig)||void 0===i?void 0:i.bitrateMax)>200&&null!==(o=l._scalabilityMode)&&void 0!==o&&o.numSpatialLayers&&(null===(s=l._scalabilityMode)||void 0===s?void 0:s.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const n=c.sender.getParameters();await c.sender.setParameters(Object.assign(n,e))}}}async applySimulcastEncodings(e,t){if(!Rv()&&e.length===t.length)for(let n=0;n<e.length;n++){const r=t[n];if(r instanceof SR&&this.isVP8Simulcast(r)){const t=e[n],i={},o={high:1e3*(r._encoderConfig.bitrateMax-50),medium:5e4};i.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:o.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:o.medium,scaleResolutionDownBy:4}];const s=t.sender.getParameters();await t.sender.setParameters(Object.assign(s,i))}}}isVP8Simulcast(e){var t,n,r,i,o;return!!(e instanceof SR&&ST("SIMULCAST")&&"vp8"===this.store.codec&&!Rr(t=e._hints).call(t,VC.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=e._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(i=e._scalabilityMode)&&void 0!==i&&i.numSpatialLayers&&(null===(o=e._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1)}logSDPExchange(e,t,n,r){if(ST("SDP_LOGGING"))return VT.upload("exchanging ".concat(n," ").concat(t," SDP during NVExtentionsConnection.").concat(r,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return null==t?void 0:t[0].ssrcId}setConfiguration(e){if(bC().supportPCSetConfiguration){const t=ZU.resolvePCConfiguration(e);this.peerConnection.setConfiguration(t)}}}function $U(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From NVExtentionsConnection.".concat(t));try{for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return await r.apply(this,o)}finally{n()}},n}function eF(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=RU,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new tF(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function tF(e){function t(e){if(Object(e)!==e)return cv.reject(new TypeError(e+" is not an object."));var t=e.done;return cv.resolve(e.value).then((function(e){return{value:e,done:t}}))}return tF=function(e){this.s=e,this.n=e.next},tF.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?cv.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?cv.reject(e):t(n.apply(this.s,arguments))}},new tF(e)}Mb([$U,Db("design:type",Function),Db("design:paramtypes",[Object,Object,Array,Object,String,String]),Db("design:returntype",cv)],ZU.prototype,"connect",null),Mb([$U,Db("design:type",Function),Db("design:paramtypes",[Array,Array]),Db("design:returntype",cv)],ZU.prototype,"updateRemoteRTPCapabilities",null),Mb([$U,Db("design:type",Function),Db("design:paramtypes",[Object]),Db("design:returntype",cv)],ZU.prototype,"updateRemoteConnect",null),Mb([$U,Db("design:type",Function),Db("design:paramtypes",[Object,Array]),Db("design:returntype",cv)],ZU.prototype,"createDataChannels",null),Mb([$U,Db("design:type",Function),Db("design:paramtypes",[String,Array,String,Object]),Db("design:returntype",cv)],ZU.prototype,"receive",null),Mb([$U,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],ZU.prototype,"batchReceive",null),Mb([$U,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],ZU.prototype,"stopReceiving",null),Mb([$U,Db("design:type",Function),Db("design:paramtypes",[String]),Db("design:returntype",cv)],ZU.prototype,"muteRemote",null),Mb([$U,Db("design:type",Function),Db("design:paramtypes",[String]),Db("design:returntype",cv)],ZU.prototype,"unmuteRemote",null),Mb([$U,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],ZU.prototype,"muteLocal",null),Mb([$U,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],ZU.prototype,"unmuteLocal",null),Mb([$U,Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],ZU.prototype,"close",null),Mb([$U,Db("design:type",Function),Db("design:paramtypes",[String,dw]),Db("design:returntype",cv)],ZU.prototype,"updateEncoderConfig",null),Mb([$U,Db("design:type",Function),Db("design:paramtypes",[String,dw]),Db("design:returntype",cv)],ZU.prototype,"updateSendParameters",null),Mb([$U,Db("design:type",Function),Db("design:paramtypes",[dw,String]),Db("design:returntype",cv)],ZU.prototype,"replaceTrack",null),Mb([$U,Db("design:type",Function),Db("design:paramtypes",[String]),Db("design:returntype",cv)],ZU.prototype,"getRemoteSSRC",null);class nF extends OI{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get localCodecs(){return this._p2pConnection.localCodecs}constructor(e,t){super(e,t),oh(this,"store",void 0),oh(this,"peerConnection",void 0),oh(this,"cname",void 0),oh(this,"mutex",new pE("DataChannelConnection-mutex")),oh(this,"dataChannel",void 0),oh(this,"_p2pConnection",void 0),oh(this,"establishPromise",void 0),oh(this,"_nvMedia",void 0),this.store=t,this.store.dcId=this.store.dcId+1,this.peerConnection=new RTCPeerConnection(nF.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),this.dataChannel=this.peerConnection.createDataChannel("agora-signal",{ordered:!1,maxPacketLifeTime:50}),this.dataChannel.binaryType="arraybuffer",this._p2pConnection=new ZU(e,t,this.peerConnection),this.bindPCEvents(),this.establishPromise=this._p2pConnection.establishPromise}async establish(){var e;const t=null===(e=this._nvMedia)||void 0===e?void 0:e.getLocalRtpCapabilities();return await this._p2pConnection.establish(t)}getP2PConnectionParams(){return this._p2pConnection.getP2PConnectionParams()}async connect(e,t,n,r,i,o){return this.cname=o,await this._p2pConnection.connect(e,t,n,r,i,o),await new cv(((e,t)=>{const r=setTimeout((()=>{this.closeSignal(),t(new kb(Hv.DATACHANNEL_CONNECTION_TIMEOUT,"Datachannel connection timed out, candidates: ".concat(JSON.stringify(n))))}),2e3);this.dataChannel.onopen=()=>{if("open"===this.dataChannel.readyState)return clearTimeout(r),void e()},this.dataChannel.onerror=e=>{this.closeSignal(),t(e)}})),{transmitter:this.dataChannel,close:this.closeSignal.bind(this)}}async updateRemoteRTPCapabilities(e,t){return this._p2pConnection.updateRemoteRTPCapabilities(e,t)}send(e,t,n){var r=this;return DP((function*(){const i=yield bP(r.mutex.lock("From DataChannelConnection.send"));try{return yield*wU(eF(r._p2pConnection.send(e,t,n)))}finally{i()}}))()}async stopSending(e,t){return this._p2pConnection.stopSending(e,t)}async createDataChannels(e,t){return this._p2pConnection.createDataChannels(e,t)}async stopDataChannels(e){return this._p2pConnection.stopDataChannels(e)}async receive(e,t,n,r){return this._nvMedia?(VT.debug("[DataChannelConnection] receive ".concat(e," by DataChannel.")),await this._nvMedia.reveiveByRTCMedia(e,t,this.cname)):(VT.debug("[DataChannelConnection] receive ".concat(e," by WebRTC.")),await this._p2pConnection.receive(e,t,n,r))}async batchReceive(e){return[...await this._p2pConnection.batchReceive(e)]}async stopReceiving(e){return await this._p2pConnection.stopReceiving(e)}async muteRemote(e){return await this._p2pConnection.muteRemote(e)}async unmuteRemote(e){return await this._p2pConnection.unmuteRemote(e)}async muteLocal(e){return await this._p2pConnection.muteLocal(e)}async unmuteLocal(e){return await this._p2pConnection.unmuteLocal(e)}restartICE(e){var t=this;return DP((function*(){return yield*wU(eF(t._p2pConnection.restartICE(e)))}))()}close(){var e;null===(e=this._nvMedia)||void 0===e||e.close(),this._p2pConnection.close(),this.unbindConnectionEvents(this._p2pConnection)}getStats(){return this._p2pConnection.getStats()}getRemoteVideoIsReady(e){return this._p2pConnection.getRemoteVideoIsReady(e)}updateRemoteConnect(e){var t;null===(t=this._nvMedia)||void 0===t||t.setRemoteRtpCapabilities(e),this._p2pConnection.updateRemoteConnect(e)}async updateEncoderConfig(e,t){return await this._p2pConnection.updateEncoderConfig(e,t)}async updateSendParameters(e,t){return await this._p2pConnection.updateSendParameters(e,t)}setStatsRemoteVideoIsReady(e,t){this._p2pConnection.setStatsRemoteVideoIsReady(e,t)}async replaceTrack(e,t){return await this._p2pConnection.replaceTrack(e,t)}async getRemoteSSRC(e){return this._p2pConnection.getRemoteSSRC(e)}logSDPExchange(e,t,n,r){if(ST("SDP_LOGGING"))return VT.upload("exchanging ".concat(n," ").concat(t," SDP during DataChannelConnection.").concat(r,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}static resolvePCConfiguration(e){const t={iceServers:[]};return e.iceServers?t.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(S_(e.turnServer.servers)?t.iceServers=e.turnServer.servers:(t.iceServers&&t.iceServers.push(...nF.turnServerConfigToIceServers(e.turnServer.servers)),ST("USE_TURN_SERVER_OF_GATEWAY")&&t.iceServers&&e.turnServer.serversFromGateway&&t.iceServers.push(...nF.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),ST("FORCE_TURN_TCP")?t.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(t.iceTransportPolicy="relay")})))),t}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(vN(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!ST("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}bindPCEvents(){this._p2pConnection.onICEConnectionStateChange=e=>{var t;return null===(t=this.onICEConnectionStateChange)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onConnectionStateChange=e=>{var t;return null===(t=this.onConnectionStateChange)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onDTLSTransportStateChange=e=>{var t;return null===(t=this.onDTLSTransportStateChange)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onDTLSTransportError=e=>{var t;return null===(t=this.onDTLSTransportError)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onICETransportStateChange=e=>{var t;return null===(t=this.onICETransportStateChange)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onFirstAudioReceived=e=>{var t;return null===(t=this.onFirstAudioReceived)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onFirstVideoReceived=e=>{var t;return null===(t=this.onFirstVideoReceived)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onFirstAudioDecoded=e=>{var t;return null===(t=this.onFirstAudioDecoded)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onFirstVideoDecoded=(e,t,n)=>{var r;return null===(r=this.onFirstVideoDecoded)||void 0===r?void 0:r.call(this,e,t,n)},this._p2pConnection.onFirstVideoDecodedTimeout=e=>{var t;return null===(t=this.onFirstVideoDecodedTimeout)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onSelectedLocalCandidateChanged=(e,t)=>{var n;return null===(n=this.onSelectedLocalCandidateChanged)||void 0===n?void 0:n.call(this,e,t)},this._p2pConnection.onSelectedRemoteCandidateChanged=(e,t)=>{var n;return null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n?void 0:n.call(this,e,t)}}closeSignal(){this.dataChannel.close(),this.peerConnection.close()}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0}setConfiguration(e){this._p2pConnection.setConfiguration(e)}}function rF(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From DataChannelConnection.".concat(t));try{for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return await r.apply(this,o)}finally{n()}},n}function iF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iF(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sF(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=RU,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new aF(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function aF(e){function t(e){if(Object(e)!==e)return cv.reject(new TypeError(e+" is not an object."));var t=e.done;return cv.resolve(e.value).then((function(e){return{value:e,done:t}}))}return aF=function(e){this.s=e,this.n=e.next},aF.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?cv.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?cv.reject(e):t(n.apply(this.s,arguments))}},new aF(e)}Mb([rF,Db("design:type",Function),Db("design:paramtypes",[Object,Object,Array,Object,String,String]),Db("design:returntype",cv)],nF.prototype,"connect",null),Mb([rF,Db("design:type",Function),Db("design:paramtypes",[Array,Array]),Db("design:returntype",cv)],nF.prototype,"updateRemoteRTPCapabilities",null),Mb([rF,Db("design:type",Function),Db("design:paramtypes",[Object,Array]),Db("design:returntype",cv)],nF.prototype,"createDataChannels",null),Mb([rF,Db("design:type",Function),Db("design:paramtypes",[String,Array,String,Object]),Db("design:returntype",cv)],nF.prototype,"receive",null),Mb([rF,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],nF.prototype,"stopReceiving",null),Mb([rF,Db("design:type",Function),Db("design:paramtypes",[String]),Db("design:returntype",cv)],nF.prototype,"muteRemote",null),Mb([rF,Db("design:type",Function),Db("design:paramtypes",[String]),Db("design:returntype",cv)],nF.prototype,"unmuteRemote",null),Mb([rF,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],nF.prototype,"muteLocal",null),Mb([rF,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],nF.prototype,"unmuteLocal",null),Mb([rF,Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],nF.prototype,"close",null),Mb([rF,Db("design:type",Function),Db("design:paramtypes",[String,dw]),Db("design:returntype",cv)],nF.prototype,"updateEncoderConfig",null),Mb([rF,Db("design:type",Function),Db("design:paramtypes",[String,dw]),Db("design:returntype",cv)],nF.prototype,"updateSendParameters",null),Mb([rF,Db("design:type",Function),Db("design:paramtypes",[dw,String]),Db("design:returntype",cv)],nF.prototype,"replaceTrack",null),Mb([rF,Db("design:type",Function),Db("design:paramtypes",[String]),Db("design:returntype",cv)],nF.prototype,"getRemoteSSRC",null);class cF extends l_{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(hI.StateChange,t,this._state)}constructor(e,t){super(),oh(this,"store",void 0),oh(this,"statsUploader",void 0),oh(this,"connection",void 0),oh(this,"localTrackMap",new Map),oh(this,"remoteUserMap",new Map),oh(this,"localDataChannels",[]),oh(this,"remoteDataChannelMap",new Map),oh(this,"pendingLocalTracks",[]),oh(this,"pendingRemoteTracks",[]),oh(this,"pendingLocalDataChannels",[]),oh(this,"pendingRemoteDataChannels",[]),oh(this,"statsCollector",void 0),oh(this,"isPlanB",!1),oh(this,"shouldForwardP2PCreation",void 0),oh(this,"iceFailedCount",0),oh(this,"dtlsFailedCount",0),oh(this,"mutex",new pE("P2PChannel-mutex")),oh(this,"_state",uI.Disconnected),oh(this,"_pcStatsUploadType",ST("NEW_ICE_RESTART")?lI.FIRST_CONNECTION:lI.OLD_FIRST_CONNECTION),oh(this,"_isInRestartIce",!1),oh(this,"_isStartRestartIce",!1),oh(this,"_restartStates",["disconnected","failed"]),oh(this,"_restartTimer",void 0),oh(this,"_isFirstConnected",!0),oh(this,"handleMuteLocalTrack",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==uI.Connected)return void n(new Wv(Hv.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));const r=this.filterTobeMutedTracks(e);if(0===r.length)return void t();const i=r.find((e=>"videoLowTrack"===e[0]));i&&i[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const o=this.createMuteMessage(r);await N_(this,hI.RequestMuteLocal,o),t()}catch(e){n(e)}finally{r()}})),oh(this,"handleUnmuteLocalTrack",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==uI.Connected)return void n(new Wv(Hv.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));const r=this.filterTobeUnmutedTracks(e);if(0===r.length)return void t();const i=r.find((e=>"videoLowTrack"===e[0]));if(i){const t=i[1];if(t.track._originMediaStreamTrack.stop(),!ST("DISABLE_DUAL_STREAM_USE_ENCODING")&&bC().supportDualStreamEncoding){const n=e._mediaStreamTrack.clone();t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n}else{const n=Bj(e,w_(this,hI.RequestLowStreamParameter));t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n}await new cv(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}await this.connection.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const o=this.createUnmuteMessage(r);await N_(this,hI.RequestUnmuteLocal,o),t()}catch(e){n(e)}finally{r()}})),oh(this,"handleUpdateVideoEncoder",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const n=this.localTrackMap.get(dI.LocalVideoTrack);if(!this.connection||!n||n.track!==e||this.state!==uI.Connected)return void t();const{id:r,track:i}=n;await this.connection.updateSendParameters(r,i),await this.connection.updateEncoderConfig(r,i),this.emit(hI.UpdateVideoEncoder,i),t()}catch(e){n(e)}finally{r()}})),oh(this,"handleSetOptimizationMode",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const n=this.localTrackMap.get(dI.LocalVideoTrack);if(!this.connection||!n||n.track!==e||this.state!==uI.Connected)return;const{id:r,track:i}=n;await this.connection.updateSendParameters(r,i),t()}catch(e){n(e)}finally{r()}})),oh(this,"handleReplaceMixingTrack",(async(e,t,n,r)=>{if(!this.connection||this.state!==uI.Connected)return void t();const i=lU([e]);let o;VT.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(i.getTrackId(),"]")),"boolean"==typeof r&&r||(o=await this.mutex.lock("From P2PChannel.handleReplaceMixingTrack"));try{await this.replaceTrack(e,i),t()}catch(e){n(e)}finally{var s;null===(s=o)||void 0===s||s()}})),oh(this,"handleReplaceTrack",(async(e,t,n,r)=>{let i;VT.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(e.getTrackId(),"]")),"boolean"==typeof r&&r||(i=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var o;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!this.connection||!n||this.state!==uI.Connected)return void t();if(await(null===(o=this.connection)||void 0===o?void 0:o.replaceTrack(e,n[1].id)),this.isPlanB){const t=n[1];t.id=e._mediaStreamTrack.id,this.localTrackMap.set(n[0],t)}if(n[0]===dI.LocalVideoTrack&&!ST("DISABLE_DUAL_STREAM_USE_ENCODING")&&bC().supportDualStreamEncoding){const t=this.localTrackMap.get(dI.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new cv(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}t()}catch(e){n(e)}finally{var s;null===(s=i)||void 0===s||s()}})),oh(this,"handleGetRTCStats",(e=>{e(this.statsCollector.getRTCStats())})),oh(this,"handleGetLocalVideoStats",(e=>{e(this.statsCollector.getLocalVideoTrackStats())})),oh(this,"handleGetLocalAudioStats",(e=>{e(this.statsCollector.getLocalAudioTrackStats())})),oh(this,"handleGetRemoteVideoStats",(e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid])),oh(this,"handleGetRemoteAudioStats",(e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid])),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new iU(this.store),this.bindStatsUploaderEvents(),this.isPlanB=!bC().supportUnifiedPlan||ST("CHROME_FORCE_PLAN_B")&&Vv(),this.shouldForwardP2PCreation=ST("FORWARD_P2P_CREATION")&&bC().supportPCSetConfiguration&&function(){const e=Sv();return e===fv.ANDROID||e===fv.IOS||e===fv.HARMONY_OS}(),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new nF({},this.store):this.isPlanB?new kU({},this.store):new VU({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(e,t){var n;this.state=uI.New;const r=this.shouldForwardP2PCreation&&"closed"===(null===(n=this.connection)||void 0===n?void 0:n.peerConnectionState);if(this.shouldForwardP2PCreation&&!r||(r&&this.connection&&(VT.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.store.useDataChannel?new nF(e,this.store):this.isPlanB?new kU(e,this.store):new VU(e,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new Wv(Hv.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=ST("NEW_ICE_RESTART")?lI.FIRST_CONNECTION:lI.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(e),this.connection.establishPromise}async connect(e,t,n,r,i,o){if(!this.connection)throw new Wv(Hv.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.connection instanceof nF?this.connection.updateRemoteConnect(r):(this.store.peerConnectionStart(),await this.connection.connect(e,t,n,r,i,o),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=uI.Connected)}updateRemoteRTPCapabilities(e){const t=Array.from(this.localTrackMap.entries()).filter((e=>{var t;let[n]=e;return Rr(t=[dI.LocalVideoLowTrack,dI.LocalVideoTrack]).call(t,n)})),n=t.map((e=>{let[,{id:t}]=e;return t})),r=t.map((e=>{let[t]=e;return t}));if(this.connection instanceof VU){if(eb.updateRemoteRTPCapabilities(this.store.sessionId,{trackTypes:JSON.stringify(r),localCodecs:JSON.stringify(this.connection.localCodecs),remoteCodecs:JSON.stringify(e)}),!Rr(e).call(e,this.store.codec)){const t=["vp8","h264"].find((t=>Rr(e).call(e,t)));t&&(this.store.codec=t,VT.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId," updateRemoteRTPCapabilities] default codec is not available, hence the fallback to ").concat(t,".")))}this.connection.updateRemoteRTPCapabilities(n,e)}}async preConnect(e,t,n,r,i,o){if(!this.connection)throw new Wv(Hv.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.store.peerConnectionStart();const s=await this.connection.connect(e,t,n,r,i,o);return this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=uI.Connected,s}getEstablishParams(){if(this.connection instanceof nF)return this.connection.getP2PConnectionParams();throw new Error("Only DataChannelConnection needs to obtain establishParams")}async publishDataChannel(e){if(!this.connection||this.state!==uI.Connected){if(this.state===uI.Disconnected)throw new Wv(Hv.UNEXPECTED_ERROR,"PeerConnection already disconnected.");return void e.forEach((e=>{var t;Rr(t=this.pendingLocalDataChannels).call(t,e)||this.pendingLocalDataChannels.push(e)}))}const t=this.filterTobePublishedDataChannels(e);0!==t.length&&(t.forEach((e=>{const t=Date.now();this.store.publish(e.id.toString(),"datachannel",t)})),await this.connection.createDataChannels(this.store.uid,t),t.forEach((e=>{this.localDataChannels.push(e);const t=Date.now();this.store.publish(e.id+"","datachannel",void 0,t)})))}publish(e,t,n){var r=this;return DP((function*(){const i=yield bP(r.mutex.lock("From P2PChannel.publish"));try{if(!r.connection||r.state!==uI.Connected){if(r.state===uI.Disconnected)throw new Wv(Hv.UNEXPECTED_ERROR,"PeerConnection already disconnected.");r.throwIfTrackTypeNotMatch(e);const t=e.filter((e=>-1===r.pendingLocalTracks.indexOf(e)));return void(r.pendingLocalTracks=r.pendingLocalTracks.concat(t))}r.store.pubId=r.store.pubId+1,SP.markPublishStart(r.store.clientId,r.store.pubId);const i=r.filterTobePublishedTracks(e,t,n);if(0===i.length)return void(yield bP(r.tryToUnmuteAudio(e)));yield*wU(sF(r.doPublish(r.connection,i)))}finally{i()}}))()}doPublish(e,t){var n=this;return DP((function*(){t.forEach((e=>{let{track:t,type:r}=e;const i=Date.now();n.store.publish(t.getTrackId(),r===dI.LocalAudioTrack?"audio":"video",i)})),n.bindLocalTrackEvents(t);const r=t.map((e=>{let{track:t}=e;return t})),i=yield bP(e.send(t.map((e=>{let{track:t}=e;return t})),n.store.codec,n.store.audioCodec)),o=(yield bP(i.next())).value,s=n.createGatewayPublishMessage(t,o);let a;try{a=yield s}catch(e){throw i.throw(e),(null==e?void 0:e.code)===Hv.WS_ABORT&&t.forEach((e=>{let{track:t}=e;-1===n.pendingLocalTracks.indexOf(t)&&n.pendingLocalTracks.push(t)})),n.unbindLocalTrackEvents(t),e}const c=n.mapPubResToRemoteConfig(s,a),l=(yield bP(i.next(c))).value,d=ST("ENABLE_VIDEO_SEI");r.forEach((async e=>{const t=e.getRTCRtpTransceiver();t&&d&&(e.trackMediaType===aI.VIDEO?await async function(e,t){if(!bC().supportWebRTCEncodedTransform)return void VT.warning("browser not support video encoded transform");if(gP.has(e))return;if(!e.track)return;const n={track:e.track};if(Cv()){if(!e.createEncodedStreams)return void VT.warning("browser not support createEncodedStreams() API");let i=null;try{i=e.createEncodedStreams()}catch(e){return void VT.error("create video-encoded-streams error",e&&e.message)}let o=[];t.on("sei-to-send",(e=>{o.push(e)}));const s=new TransformStream({transform(t,i){n.controller||(n.controller=i),e.track&&e.track.id!==n.track.id&&(VT.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r));const s=o.shift();s&&(t.data=mP(t.data,s)),i.enqueue(t)}});i.readable.pipeThrough(s).pipeTo(i.writable)}else{if(!wv())return;{if("undefined"==typeof RTCRtpScriptTransform)return void VT.warning("browser not support RTCRtpScriptTransform");const i=dP(),o=new MessageChannel;await new cv((e=>i.onmessage=t=>{"registered"===t.data&&e(void 0)}));const s=new RTCRtpScriptTransform(i,{name:"tx",port:o.port2},[o.port2]);e.transform=s,await new cv((e=>i.onmessage=t=>{"started"===t.data&&e(void 0)})),t.on("sei-to-send",(e=>{o.port1.postMessage({sei:e})})),o.port1.onmessage=t=>{var i;t.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==n.track.id&&(VT.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r))},n.worker=i}}function r(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",r)}const t=gP.get(e);if(t){gP.delete(e);try{var n,i;null===(n=t.controller)||void 0===n||n.terminate(),null===(i=t.worker)||void 0===i||i.terminate()}catch(e){VT.warning(e&&e.message)}}}gP.set(e,n),e.track.addEventListener("ended",r)}(t.sender,e):e.trackMediaType===aI.AUDIO&&await async function(e){if(!bC().supportWebRTCEncodedTransform)return void VT.warning("browser not support audio encoded transform");if(uP.has(e))return;if(!e.track)return;const t={track:e.track};if(Cv()){if(!e.createEncodedStreams)return void VT.warning("browser not support createEncodedStreams() API");let r=null;try{r=e.createEncodedStreams()}catch(e){return void VT.error("create audio-encoded-streams error",e&&e.message)}const i=new TransformStream({transform(r,i){t.controller||(t.controller=i),e.track&&e.track.id!==t.track.id&&(VT.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n)),i.enqueue(r)}});r.readable.pipeThrough(i).pipeTo(r.writable)}else if(wv()){if("undefined"==typeof RTCRtpScriptTransform)return void VT.warning("browser not support RTCRtpScriptTransform");const r=dP(),i=new MessageChannel;await new cv((e=>r.onmessage=t=>{"registered"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(r,{name:"tx",port:i.port2},[i.port2]);e.transform=o,await new cv((e=>r.onmessage=t=>{"started"===t.data&&e(void 0)})),i.port1.onmessage=r=>{var i;r.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==t.track.id&&(VT.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n))},t.worker=r}function n(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",n)}const t=uP.get(e);if(t){uP.delete(e);try{var r,i;null===(r=t.controller)||void 0===r||r.terminate(),null===(i=t.worker)||void 0===i||i.terminate()}catch(e){VT.warning(e&&e.message)}}}uP.set(e,t),e.track.addEventListener("ended",n)}(t.sender))})),t.forEach((e=>{let{type:t}=e;n.statsCollector.addLocalStats(t)})),n.assignLocalTracks(t,l),n.statsUploader.startUploadOutboundStats(),t.forEach((e=>{let{track:t,type:r}=e;const i=Date.now();n.store.publish(t.getTrackId(),r===dI.LocalAudioTrack?"audio":"video",void 0,i)}))}))()}async updateVideoStreamParameter(e,t){const n=this.localTrackMap.get(t);if(!n)return;if(!(n.track instanceof SR))return VT.warn("[updateVideoStreamParameter]: track is not an instance of LocalVideoTrack");if(!(this.connection instanceof VU||this.connection instanceof kU))return VT.warn("[updateVideoStreamParameter]: connection is not P2PConnection or P2PConnectionPlanB");const{track:r}=n,i=function(e,t){const n={};return e.height&&e.width&&(n.scaleResolutionDownBy=NN(e,t)),n.maxFramerate=e.framerate?EN(e.framerate):void 0,n.maxBitrate=e.bitrate?1e3*e.bitrate:void 0,n}(e,r);if(r._encoderConfig||(r._encoderConfig={}),t!==dI.LocalVideoLowTrack||!ST("DISABLE_DUAL_STREAM_USE_ENCODING")&&bC().supportDualStreamEncoding)null!=i.scaleResolutionDownBy&&(r._encoderConfig.scaleResolutionDownBy=i.scaleResolutionDownBy);else{const t=r._originMediaStreamTrack;if(!t.canvas)return VT.warn("[".concat(r.getTrackId(),"] no canvas on track"));!function(e,t){const n=e.canvas;t.width&&(n.width=EN(t.width)),t.height&&(n.height=EN(t.height)),t.framerate&&(n.stopCapture&&n.stopCapture(),n.stopCapture=_w((()=>{!n.startCapture&&n.stopCapture&&n.stopCapture(),n.startCapture&&n.startCapture()}),EN(t.framerate)))}(t,e)}null!=i.maxBitrate&&(r._encoderConfig.bitrateMax=i.maxBitrate/1e3),null!=i.maxFramerate&&(r._encoderConfig.frameRate&&"object"==typeof r._encoderConfig.frameRate?r._encoderConfig.frameRate.max=i.maxFramerate:r._encoderConfig.frameRate={max:i.maxFramerate}),VT.debug("[".concat(r.getTrackId(),"] LowStreamEncoderConfig: , ").concat(JSON.stringify(r._encoderConfig))),await this.connection.updateRtpSenderEncodings(r)}publishLowStream(e){var t=this;return DP((function*(){if(!t.connection||t.state!==uI.Connected)return;const n=yield bP(t.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const n=t.localTrackMap.get(dI.LocalVideoTrack);if(!n)throw new Wv(Hv.UNEXPECTED_ERROR,"Could not find high stream");if(t.localTrackMap.has(dI.LocalVideoLowTrack))throw new Wv(Hv.UNEXPECTED_ERROR,"[".concat(t.store.clientId,"] Can't publish low stream when stream already publish"));const i=[{track:t.getLowVideoTrack(n.track,e),type:dI.LocalVideoLowTrack}];if(yield*wU(sF(t.doPublish(t.connection,i))),n.track.muted||!n.track.enabled){var r;const e=null===(r=t.localTrackMap.get(dI.LocalVideoLowTrack))||void 0===r?void 0:r.id;void 0!==e&&(yield bP(t.connection.muteLocal([e])))}}finally{n()}}))()}async republish(){this.pendingLocalTracks.length>0&&(VT.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await I_(this,hI.RequestRePublish,this.pendingLocalTracks),this.emit(hI.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[]),this.pendingLocalDataChannels.length>0&&(VT.debug("Emit P2PChannelEvents.RequestRePublishDataChannel to republish datachannels."),await I_(this,hI.RequestRePublishDataChannel,this.pendingLocalDataChannels),this.pendingLocalDataChannels=[])}async reSubscribe(e){for(let t=this.pendingRemoteTracks.length-1;t>=0;t--){const{user:e,kind:n}=this.pendingRemoteTracks[t];(n!==aI.AUDIO||e._audio_added_&&e._audioSSRC)&&(n!==aI.VIDEO||e._video_added_&&e._videoSSRC)||this.pendingRemoteTracks.splice(t,1)}if(e)await I_(this,hI.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:t,kind:n}of this.pendingRemoteTracks)await this.subscribe(t,n,n===aI.VIDEO?t._videoSSRC:t._audioSSRC);this.pendingRemoteTracks.forEach((e=>{let{user:t}=e;this.emit(hI.MediaReconnectEnd,t.uid)})),this.pendingRemoteTracks=[]}async unpublish(e){if(!this.connection||this.state!==uI.Connected)return void e.forEach((e=>{const t=this.pendingLocalTracks.indexOf(e);-1!==t&&this.pendingLocalTracks.splice(t,1)}));const t=this.filterTobeUnpublishedTracks(e);if(0===t.length)return;const n=t.find((e=>"videoLowTrack"===e[0]));return n&&n[1].track.close(),this.doUnpublish(this.connection,t)}async unpublishDataChannel(e){if(!this.connection||this.state!==uI.Connected)return void e.forEach((e=>{const t=this.pendingLocalDataChannels.indexOf(e);-1!==t&&this.pendingLocalDataChannels.splice(t,1)}));const t=this.filterTobeUnpublishedDataChannels(e);return 0!==t.length?(t.forEach((e=>{const t=this.localDataChannels.indexOf(e);-1!==t&&this.localDataChannels.splice(t,1)})),0===this.localDataChannels.length&&await this.connection.stopDataChannels(this.store.uid),t.map((e=>e.id))):void 0}async unpublishLowStream(){if(!this.connection||this.state!==uI.Connected)return;const e=this.localTrackMap.get(dI.LocalVideoLowTrack);if(!e)return;e.track.close();const t=[[dI.LocalVideoLowTrack,e]];return this.doUnpublish(this.connection,t)}async doUnpublish(e,t){const n=this.createGatewayUnpublishMessage(t);return await e.stopSending(t.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map((e=>{let[t,{track:n}]=e;return{type:t,track:n}}))),t.forEach((e=>{let[t]=e;this.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&this.statsUploader.stopUploadOutboundStats(),n}async subscribeDataChannel(e,t){if(!this.connection||this.state!==uI.Connected)throw new Wv(Hv.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");const n=t.filter((t=>{var n;return!(null!==(n=this.remoteDataChannelMap.get(e))&&void 0!==n&&n.get(t.id))}));if(0!==n.length)return await this.connection.createDataChannels(e.uid,n),n.forEach((t=>{var n;this.remoteDataChannelMap.has(e)?null===(n=this.remoteDataChannelMap.get(e))||void 0===n||n.set(t.id,t):this.remoteDataChannelMap.set(e,new Map([[t.id,t]]));const r=this.pendingRemoteDataChannels.findIndex((n=>{let{user:r,id:i}=n;return r.uid===e.uid&&i===t.id}));-1!==r&&this.pendingRemoteDataChannels.splice(r,1)})),n.map((e=>e.id))}async subscribe(e,t,n,r,i){var o;if(!this.connection||this.state!==uI.Connected)throw new Wv(Hv.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if(null!==(o=this.remoteUserMap.get(e))&&void 0!==o&&o.has(t))return;let s,a,c;if(i){const n=i.find((e=>{let{stream_type:n}=e;return n===t}));if(!n)throw new Wv(Hv.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(t," for user: ").concat(e.uid," because subscribe answer from gateway does not contain stream_type: ").concat(t,"."));const r=await this.connection.receive(t,n.ssrcs,String(e._uintid),n.attributes);this.connection instanceof VU&&(c=r.transceiver),s=r.track,a=r.id}else{const i=await this.connection.receive(t,[{ssrcId:n,rtx:r}],String(e._uintid),void 0);this.connection instanceof VU&&(c=i.transceiver),s=i.track,a=i.id}t===aI.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(s):(e._audioTrack=new OR(s,e.uid,e._uintid,this.store),VT.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),c&&e._audioTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(s):(e._videoTrack=new AR(s,e.uid,e._uintid,this.store),VT.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),c&&e._videoTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._videoTrack)),ST("ENABLE_VIDEO_SEI")&&c&&(t==aI.VIDEO?await vP(c.receiver,{onSei:t=>{var n;null===(n=e._videoTrack)||void 0===n||n._onSei(t)}}):t==aI.AUDIO&&await pP(c.receiver));const l=this.remoteUserMap.get(e);l?l.set(t,a):this.remoteUserMap.set(e,new Map([[t,a]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats();const d=this.pendingRemoteTracks.findIndex((n=>{let{user:r,kind:i}=n;return r.uid===e.uid&&t===i}));-1!==d&&(this.pendingRemoteTracks.splice(d,1),this.emit(hI.MediaReconnectEnd,e.uid))}async massSubscribe(e){return this.massSubscribeNoLock(e)}async massSubscribeNoLock(e){if(!this.connection||this.state!==uI.Connected)throw new Wv(Hv.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");e=e.filter((e=>{var t;let{user:n,mediaType:r}=e;return!(null!==(t=this.remoteUserMap.get(n))&&void 0!==t&&t.has(r))}));const t=await this.connection.batchReceive(e.map((e=>{let{user:t,mediaType:n,ssrcId:r,rtxSsrcId:i}=e;return{kind:n,ssrcMsg:[{ssrcId:r,rtx:i}],mslabel:String(t._uintid)}})));e.forEach(((e,n)=>{let{user:r,mediaType:i}=e;const{track:o,id:s,transceiver:a}=t[n];i===aI.AUDIO?(r._audioTrack?r._audioTrack._updateOriginMediaStreamTrack(o):(r._audioTrack=new OR(o,r.uid,r._uintid,this.store),VT.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(r._audioTrack.getTrackId()))),a&&r._audioTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(r,r._audioTrack)):(r._videoTrack?r._videoTrack._updateOriginMediaStreamTrack(o):(r._videoTrack=new AR(o,r.uid,r._uintid,this.store),VT.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(r._videoTrack.getTrackId()))),a&&r._videoTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(r,r._videoTrack));const c=this.remoteUserMap.get(r);c?c.set(i,s):this.remoteUserMap.set(r,new Map([[i,s]])),this.statsCollector.addRemoteStats(r.uid),this.statsUploader.startUploadInboundStats();const l=this.pendingRemoteTracks.findIndex((e=>{let{user:t,kind:n}=e;return t.uid===r.uid&&i===n}));-1!==l&&(this.pendingRemoteTracks.splice(l,1),this.emit(hI.MediaReconnectEnd,r.uid))}))}async unsubscribe(e,t,n){const r=this.pendingRemoteTracks.filter((n=>{let{user:r,kind:i}=n;return void 0!==t?r.uid===e.uid&&t===i:r.uid===e.uid}));if(r.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),this.connection&&this.state===uI.Connected||n||r.forEach((t=>{let{kind:n}=t;var r;if(n===aI.AUDIO)null===(r=e._audioTrack)||void 0===r||r._destroy(),e._audioTrack=void 0;else if(n===aI.VIDEO){var i;null===(i=e._videoTrack)||void 0===i||i._destroy(),e._videoTrack=void 0}})),!this.connection||this.state!==uI.Connected)return;const i=this.filterTobeUnSubscribedTracks(e,t);if(0===i.length)return;await this.connection.stopReceiving(i.map((e=>{let[,{id:t}]=e;return t})));const o=this.createUnsubscribeMessage(i);return this.withdrawRemoteTracks(i),0===this.remoteUserMap.size&&this.statsUploader.stopUploadInboundStats(),i.forEach((e=>{let[t,{kind:r}]=e;var i,o;if(r===aI.VIDEO&&t._videoSSRC&&(null===(i=this.connection)||void 0===i||i.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),r===aI.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),n||(null===(o=t._videoTrack)||void 0===o||o._destroy(),t._videoTrack=void 0);else if(r===aI.AUDIO){var s;this.unbindRemoteTrackEvents(t._audioTrack),n||(null===(s=t._audioTrack)||void 0===s||s._destroy(),t._audioTrack=void 0)}})),o}async unsubscribeDataChannel(e,t){if(t.forEach((e=>{const t=this.pendingRemoteDataChannels.findIndex((t=>t.id===e.id));-1!==t&&this.pendingRemoteDataChannels.splice(t,1)})),!this.connection)return;const n=this.filterTobeUnSubscribedDataChannels(e,t);if(0===n.length)return;t.forEach((e=>{e._close()}));const r=this.remoteDataChannelMap.get(e);return n.forEach((e=>{r&&r.delete(e.id)})),r&&0===r.size&&(this.remoteDataChannelMap.delete(e),await this.connection.stopDataChannels(e.uid)),n.map((e=>e.id))}async massUnsubscribe(e){return this.massUnsubscribeNoLock(e)}async massUnsubscribeNoLock(e){let t=[];for(const{user:i,mediaType:o}of e){const e=this.pendingRemoteTracks.filter((e=>{let{user:t,kind:n}=e;return void 0!==o?t.uid===i.uid&&o===n:t.uid===i.uid}));e.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),t=t.concat(e)}if(!this.connection||this.state!==uI.Connected)return void t.forEach((e=>{let{user:t,kind:n}=e;var r;if(n===aI.AUDIO)null===(r=t._audioTrack)||void 0===r||r._destroy(),t._audioTrack=void 0;else if(n===aI.VIDEO){var i;null===(i=t._videoTrack)||void 0===i||i._destroy(),t._videoTrack=void 0}}));const n=z_(e).call(e,((e,t)=>{let{user:n,mediaType:r}=t;const i=this.filterTobeUnSubscribedTracks(n,r);return e.concat(i)}),[]);if(0===n.length)return;await this.connection.stopReceiving(n.map((e=>{let[,{id:t}]=e;return t})));const r=this.createUnsubscribeAllMessage(n);return this.withdrawRemoteTracks(n),0===this.remoteUserMap.size&&this.statsUploader.stopUploadInboundStats(),n.forEach((e=>{let[t,{kind:n}]=e;var r,i;if(n===aI.VIDEO&&t._videoSSRC&&(null===(r=this.connection)||void 0===r||r.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),n===aI.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),null===(i=t._videoTrack)||void 0===i||i._destroy(),t._videoTrack=void 0;else if(n===aI.AUDIO){var o;this.unbindRemoteTrackEvents(t._audioTrack),null===(o=t._audioTrack)||void 0===o||o._destroy(),t._audioTrack=void 0}})),r}async muteRemote(e,t){if(!this.connection)return;const n=this.remoteUserMap.get(e);if(!n)return void VT.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid,"."));if(!n.get(t))return void VT.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));const r=t===aI.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==r&&this.connection.setStatsRemoteVideoIsReady(r,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.connection)return;const n=this.remoteUserMap.get(e);n?n.get(t)||VT.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,".")):VT.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid,"."))}getAllTracks(e){const t=this.localTrackMap.get(dI.LocalAudioTrack);if((null==t?void 0:t.track)instanceof rR){const n=t.track;return Array.from(this.localTrackMap.entries()).filter((e=>{let[t]=e;return t!==dI.LocalAudioTrack})).filter((t=>{let[n]=t;return!(e&&n===dI.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t})).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter((t=>{let[n]=t;return!(e&&n===dI.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t}))}getAllDataChannels(){return this.localDataChannels}reportPublishEvent(e,t,n,r,i){if(e){const n=this.localTrackMap.get(dI.LocalAudioTrack),o=r?this.localTrackMap.get(dI.LocalVideoLowTrack):this.localTrackMap.get(dI.LocalVideoTrack);eb.publish(this.store.sessionId,{eventElapse:SP.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==n?void 0:n.track.getTrackLabel(),videoName:null==o?void 0:o.track.getTrackLabel(),screenshare:-1!==(null==o?void 0:o.track._hints.indexOf(VC.SCREEN_TRACK)),audio:!!n,video:!!o,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var o;n||(n=[]);const s=n.find((e=>e instanceof eR)),a=r?null===(o=this.localTrackMap.get(dI.LocalVideoTrack))||void 0===o?void 0:o.track:n.find((e=>e instanceof SR));eb.publish(this.store.sessionId,{eventElapse:SP.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==s?void 0:s.getTrackLabel(),videoName:null==a?void 0:a.getTrackLabel(),screenshare:-1!==(null==a?void 0:a._hints.indexOf(VC.SCREEN_TRACK)),audio:!!s,video:!!a,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,n,r){const i=r===aI.VIDEO?n._videoSSRC:n._audioSSRC;i&&eb.subscribe(this.store.sessionId,{succ:e,ec:t,video:r===aI.VIDEO,audio:r===aI.AUDIO,peerid:n.uid,subscribeRequestid:r===aI.VIDEO?n._videoSSRC:n._audioSSRC,p2pid:this.store.p2pId,eventElapse:SP.measureFromSubscribeStart(this.store.clientId,i)})}reset(){VT.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new pE("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new nF({},this.store):this.isPlanB?new kU({},this.store):new VU({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(dI.LocalAudioTrack);if((null==e?void 0:e.track)instanceof rR){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach((e=>{t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.localDataChannels=[],this.remoteDataChannelMap.clear(),this.pendingLocalDataChannels=[],this.pendingRemoteDataChannels=[],this.state=uI.Disconnected}getStats(){var e;return null===(e=this.connection)||void 0===e?void 0:e.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.connection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(dI.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(dI.LocalVideoTrack);if(e)return{width:e.track._videoWidth||0,height:e.track._videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof SR||t&&t.track instanceof eR?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}getRemoteMedia(e){var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t.uid===e));return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map((e=>{let[t]=e;return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}}));const t=this.localTrackMap.get(dI.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=ep(e).call(e,((e,t)=>e.level-t.level)),e}async disconnectForReconnect(){this.connection&&(VT.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=uI.Reconnecting,ST("KEEP_LAST_FRAME")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t]=e;var n;t._videoTrack&&t._videoTrack._player&&(null===(n=t._videoTrack._player.getVideoElement())||void 0===n||n.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())})),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new nF({},this.store):this.isPlanB?new kU({},this.store):new VU({},this.store),this.bindConnectionEvents(this.connection)),0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((e=>{var t;let[n,{track:r}]=e;switch(n){case dI.LocalVideoTrack:Rr(t=r._hints).call(t,VC.LOW_STREAM)?r.close():this.pendingLocalTracks.push(r);break;case dI.LocalAudioTrack:r instanceof rR?this.pendingLocalTracks=this.pendingLocalTracks.concat(r.trackList):this.pendingLocalTracks.push(r);case dI.LocalVideoLowTrack:}})),this.emit(hI.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;Array.from(ph(n).call(n)).forEach((e=>{this.setPendingRemoteMedia(t,e)})),this.emit(hI.MediaReconnectStart,t.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),0!==this.localDataChannels.length&&(this.localDataChannels.forEach((e=>{this.pendingLocalDataChannels.push(e)})),this.localDataChannels.length=0),0!==this.remoteDataChannelMap.size&&(Array.from(this.remoteDataChannelMap.entries()).forEach((e=>{let[t,n]=e;Array.from(ph(n).call(n)).forEach((e=>{this.setPendingRemoteDataChannel(t,e)}))})),this.remoteDataChannelMap.clear()),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),VT.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteDataChannel(e,t){for(const n of this.pendingRemoteDataChannels){const{user:r,id:i}=n;if((e instanceof oU?e.uid:e)===r.uid&&i===t)return!0}return!1}setPendingRemoteDataChannel(e,t){this.hasPendingRemoteDataChannel(e,t)||this.pendingRemoteDataChannels.push({user:e,id:t})}hasPendingRemoteMedia(e,t){for(const n of this.pendingRemoteTracks){const{user:r,kind:i}=n;if((e instanceof oU?e.uid:e)===r.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}restartICE(e){var t=this;return DP((function*(){if(!t.connection||t.state!==uI.Connected||t.connection instanceof nF)return;const n=yield bP(t.mutex.lock("From P2PChannel.restartICE"));let r;try{r=yield bP(t.connection.restartICE(e));const n=yield bP(r.next());if(n.done)return;const i=n.value,o=yield i;switch(t.reportPCDisconnectedOrFailed(e),e){case cI.TCP:t._pcStatsUploadType=lI.TCP_RESTART;break;case cI.RELAY:t._pcStatsUploadType=lI.RELAY_RESTART;break;default:t._pcStatsUploadType=lI.OLD_RESTART}t._isInRestartIce=!0,r.next(o)}catch(e){var i;null===(i=r)||void 0===i||i.throw(e)}finally{n()}}))()}getUplinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats(),t=this.localTrackMap.get(dI.LocalVideoTrack),n=this.localTrackMap.get(dI.LocalAudioTrack),r=e.videoSend.find((e=>e.ssrc===(null==t?void 0:t.ssrcs[0].ssrcId))),i=e.audioSend.find((e=>e.ssrc===(null==n?void 0:n.ssrcs[0].ssrcId)));if(!r||!i)return 1;const o=C_(this,hI.NeedSignalRTT),s=r?r.rttMs:void 0,a=i?i.rttMs:void 0,c=s&&a?(s+a)/2:s||a,l=(c&&o?(c+o)/2:c||o)||0,d=100*e.sendPacketLossRate*.7/50+.3*l/1500,u=d<.17?1:d<.36?2:d<.59?3:d<.1?4:5,h=null==t?void 0:t.track;if(h&&h._encoderConfig&&-1===h._hints.indexOf(VC.SCREEN_TRACK)){const t=h._encoderConfig.bitrateMax,n=e.bitrate.actualEncoded;if(t&&n){const e=(1e3*t-n)/(1e3*t);return rb[e<.15?0:e<.3?1:e<.45?2:e<.6?3:4][u]}}return u}getDownlinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach((n=>{let[r]=n;const i=r._audioSSRC,o=r._videoSSRC,s=e.audioRecv.find((e=>e.ssrc===i)),a=e.videoRecv.find((e=>e.ssrc===o));if(!s&&!a)return void(t+=1);const c=C_(this,hI.NeedSignalRTT),l=e.rtt,d=(l&&c?(l+c)/2:l||c)||0,u=s?s.jitterMs:void 0,h=e.recvPacketLossRate;let p=.7*h*100/50+.3*d/1500;u&&(p=.6*h*100/50+.2*d/1500+.2*u/400),t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5})),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new cv(((t,n)=>{this.handleMuteLocalTrack(e,t,n)}))}async replaceTrack(e,t){var n;if(VT.debug("[".concat(this.store.clientId,"] P2PChannel replaceTrack from [").concat(e.getTrackId(),"] to [").concat(t.getTrackId(),"]")),!this.connection||this.state!==uI.Connected)return;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!r)return;const i=r[0];if(e!==t&&(this.unbindLocalTrackEvents([{track:e,type:i}]),this.bindLocalTrackEvents([{track:t,type:i}]),r[1].track=t),await(null===(n=this.connection)||void 0===n?void 0:n.replaceTrack(t,r[1].id)),this.isPlanB){const e=r[1];e.id=t._mediaStreamTrack.id,this.localTrackMap.set(i,e)}if(i===dI.LocalVideoTrack&&!ST("DISABLE_DUAL_STREAM_USE_ENCODING")&&bC().supportDualStreamEncoding){const t=this.localTrackMap.get(dI.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new cv(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}}filterTobePublishedTracks(e,t,n){const r=[],i=this.getAllTracks();e=H_(e=e.filter((e=>-1===i.indexOf(e))));let o,s=!1;const a=this.localTrackMap.get(dI.LocalAudioTrack);for(const c of e){if(c instanceof SR&&(this.localTrackMap.has(dI.LocalVideoTrack)||s?new Wv(Hv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(r.push({track:c,type:dI.LocalVideoTrack}),s=!0),t)){const e=this.getLowVideoTrack(c,n);r.push({track:e,type:dI.LocalVideoLowTrack})}if(c instanceof eR)if(a){const e=a.track;if(e instanceof rR)cU([c]),e.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0);else{const t=lU([e,c]);VT.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(t.getTrackId(),"]")),this.replaceTrack(e,t)}}else o instanceof rR?(cU([c]),o.addAudioTrack(c)):o=o||!c._useAudioElement&&bC().webAudioMediaStreamDest&&!c._bypassWebAudio?lU(o?[c,o]:[c]):c}return o&&(VT.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will send audioTrack [").concat(o.getTrackId(),"]")),r.push({track:o,type:dI.LocalAudioTrack})),r}filterTobeUnpublishedTracks(e){const t=[],n=this.getAllTracks();e=H_(e=e.filter((e=>-1!==n.indexOf(e))));for(const r of e){if(r instanceof eR){const e=this.localTrackMap.get(dI.LocalAudioTrack);if(!e)continue;e.track instanceof rR?(e.track.removeAudioTrack(r),this.unbindLocalAudioTrackEvents(r),0===e.track.trackList.length&&(t.push([dI.LocalAudioTrack,e]),e.track.close())):t.push([dI.LocalAudioTrack,e])}if(r instanceof SR){const e=this.localTrackMap.get(dI.LocalVideoTrack);if(!e)continue;t.push([dI.LocalVideoTrack,e]);const n=this.localTrackMap.get(dI.LocalVideoLowTrack);n&&t.push([dI.LocalVideoLowTrack,n])}}return t}filterTobePublishedDataChannels(e){return(e=H_(e)).filter((e=>-1===this.localDataChannels.findIndex((t=>t.id===e.id))))}filterTobeUnpublishedDataChannels(e){return(e=(e=H_(e)).filter((e=>-1!==this.localDataChannels.indexOf(e)))).filter((e=>e._originDataChannel))}bindLocalTrackEvents(e){e.forEach((e=>{let{track:t,type:n}=e;switch(n){case dI.LocalVideoTrack:t.addListener(zC.GET_STATS,this.handleGetLocalVideoStats),t.addListener(zC.GET_RTC_STATS,this.handleGetRTCStats),t.addListener(zC.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(zC.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(zC.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.addListener(zC.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),t.addListener(zC.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener(zC.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(zC.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case dI.LocalAudioTrack:this.bindLocalAudioTrackEvents(t);case dI.LocalVideoLowTrack:}}))}bindLocalAudioTrackEvents(e,t){e instanceof rR?e.trackList.forEach((e=>{e.addListener(zC.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(zC.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(zC.GET_STATS,this.handleGetLocalAudioStats),e.addListener(zC.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(zC.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.addListener(zC.GET_STATS,this.handleGetLocalAudioStats),e.addListener(zC.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(zC.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(zC.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(zC.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||(e.addListener(zC.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener(zC.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack)))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map((e=>{let[t,{track:n}]=e;return{track:n,type:t}}))),e.forEach((e=>{let{track:t,type:n}=e;switch(n){case dI.LocalVideoTrack:t.off(zC.GET_STATS,this.handleGetLocalVideoStats),t.off(zC.GET_RTC_STATS,this.handleGetRTCStats),t.off(zC.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(zC.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(zC.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off(zC.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),t.off(zC.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(zC.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(zC.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case dI.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);case dI.LocalVideoLowTrack:}}))}unbindLocalAudioTrackEvents(e){e instanceof rR?e.trackList.forEach((e=>{e.off(zC.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(zC.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(zC.GET_STATS,this.handleGetLocalAudioStats),e.off(zC.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(zC.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.off(zC.GET_STATS,this.handleGetLocalAudioStats),e.off(zC.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(zC.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(zC.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(zC.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack),e.off(zC.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(zC.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof AR&&t.addListener(zC.GET_STATS,(t=>{t(this.handleGetRemoteVideoStats(e))})),t instanceof OR&&t.addListener(zC.GET_STATS,(t=>{t(this.handleGetRemoteAudioStats(e))}))}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(zC.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;n.has(aI.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),n.has(aI.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)}))}createGatewayPublishMessage(e,t){return e.map(((e,n)=>{var r;let i,o,{track:s,type:a}=e;switch(a){case dI.LocalAudioTrack:i=Qb.Audio,o={dtx:s instanceof tR&&s._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case dI.LocalVideoTrack:i=Rr(r=s._hints).call(r,VC.SCREEN_TRACK)?Qb.Screen:Qb.High,o=oF(oF({},SN(s)),{},{codec:this.store.codec});break;case dI.LocalVideoLowTrack:i=Qb.Low,o=oF(oF({},SN(s)),{},{codec:this.store.codec})}return{stream_type:i,attributes:o,ssrcs:t[n]}}))}createGatewayUnpublishMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case dI.LocalVideoTrack:n=Rr(t=i._hints).call(t,VC.SCREEN_TRACK)?Qb.Screen:Qb.High;break;case dI.LocalAudioTrack:n=Qb.Audio;break;case dI.LocalVideoLowTrack:n=Qb.Low}return{stream_type:n,ssrcs:o,mid:s}}))}assignLocalTracks(e,t){e.forEach(((e,n)=>{let{track:r,type:i}=e;this.localTrackMap.set(i,{track:r,id:t[n].id,ssrcs:t[n].localSSRC})}))}withdrawLocalTracks(e){e.forEach((e=>{let[t]=e;this.localTrackMap.delete(t)}))}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{if(VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(t,")")),this.emit(hI.PeerConnectionStateChange,t),"connected"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),"connected"===t&&(this._restartTimer&&(clearTimeout(this._restartTimer),this._restartTimer=void 0),(this._isFirstConnected||this._isInRestartIce)&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isInRestartIce=!1,this._isFirstConnected=!1,this._isStartRestartIce=!1),ST("NEW_ICE_RESTART")){var n;if(Rr(n=this._restartStates).call(n,t)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;const t=t=>{"disconnected"!==e.iceConnectionState&&"checking"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||(VT.debug("[".concat(this.store.clientId,"] [P2PChannel] start use restartICE, type is ").concat(t)),"CONNECTED"===C_(this,hI.QueryClientConnectionState)&&this.emit(hI.RequestRestartICE,t))},n=()=>{"disconnected"!==e.iceConnectionState&&"checking"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),VT.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout((()=>this.emit(hI.P2PLost)),0),this.iceFailedCount+=1,this.requestReconnect())},r=ST("ICE_RESTART_INTERVAL");return void(this._restartTimer=window.setTimeout((()=>{if(ST("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&bC().supportPCSetConfiguration)t(cI.RELAY),this._restartTimer=window.setTimeout(n,r);else if(Rv())t(cI.UDP),this._restartTimer=window.setTimeout(n,4e3);else{if(t(cI.TCP),bC().supportPCSetConfiguration)return void(this._restartTimer=window.setTimeout((()=>{t(cI.RELAY),this._restartTimer=window.setTimeout(n,r)}),r));this._restartTimer=window.setTimeout(n,r)}}),800))}}else{if("disconnected"===t&&"disconnected"===e.iceConnectionState)return setTimeout((()=>{"disconnected"===e.iceConnectionState&&ST("ICE_RESTART")&&"CONNECTED"===C_(this,hI.QueryClientConnectionState)&&this.emit(hI.RequestRestartICE)}),800),void setTimeout((()=>{"disconnected"===e.peerConnectionState&&(VT.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isInRestartIce=!1,setTimeout((()=>this.emit(hI.P2PLost)),0),this.iceFailedCount+=1,this.requestReconnect())}),4e3);"failed"===t&&(VT.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCDisconnectedOrFailed(),setTimeout((()=>this.emit(hI.P2PLost)),0),this.iceFailedCount+=1,await this.requestReconnect())}},e.onICEConnectionStateChange=e=>{"connected"!==e||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),eb.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:p_.TRACER}).onSuccess(),this.emit(hI.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")"))},e.onDTLSTransportStateChange=e=>{VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")"))},e.onDTLSTransportError=e=>{VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")"))},e.onFirstAudioDecoded=e=>{var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));var r;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),null===(r=n.audioTrack)||void 0===r||r.emit(qC.FIRST_FRAME_DECODED),eb.firstRemoteFrame(this.store.sessionId,YT.FIRST_AUDIO_DECODE,qT.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:SP.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));n&&eb.firstRemoteFrame(this.store.sessionId,YT.FIRST_AUDIO_RECEIVED,qT.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:SP.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,n)=>{this.reportVideoFirstFrameDecoded(e,t,n)},e.onFirstVideoReceived=e=>{var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t._videoSSRC===e));n&&eb.firstRemoteFrame(this.store.sessionId,YT.FIRST_VIDEO_RECEIVED,qT.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:SP.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(e,t)=>{const n="relay"===e.candidateType,r="relay"===t.candidateType;"unknown"!==t.candidateType&&n===r||this.emit(hI.ConnectionTypeChange,n),VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(CN(t))," -> ").concat(JSON.stringify(CN(e)),")"))},e.onSelectedRemoteCandidateChanged=(e,t)=>{VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(CN(t))," -> ").concat(JSON.stringify(CN(e)),")"))},e.onFirstVideoDecodedTimeout=e=>{this.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0}filterTobeMutedTracks(e){const t=[];if(-1===this.getAllTracks().indexOf(e))return t;const n=this.localTrackMap.get(dI.LocalAudioTrack);if(e instanceof eR&&(null==n?void 0:n.track)instanceof rR)return n.track.isActive||t.push([dI.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r&&(t.push(r),r[0]===dI.LocalVideoTrack)){const e=this.localTrackMap.get(dI.LocalVideoLowTrack);e&&t.push([dI.LocalVideoLowTrack,e])}return t}filterTobeUnmutedTracks(e){const t=[],n=this.localTrackMap.get(dI.LocalAudioTrack);if(e instanceof eR&&(null==n?void 0:n.track)instanceof rR)return n.track.isActive&&t.push([dI.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r)if(r[0]===dI.LocalVideoTrack){t.push(r);const e=this.localTrackMap.get(dI.LocalVideoLowTrack);e&&t.push([dI.LocalVideoLowTrack,e])}else t.push(r);return t}createMuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case dI.LocalAudioTrack:n=Qb.Audio;break;case dI.LocalVideoTrack:n=Rr(t=i._hints).call(t,VC.SCREEN_TRACK)?Qb.Screen:Qb.High;break;case dI.LocalVideoLowTrack:n=Qb.Low}return{stream_type:n,ssrcs:o,mid:s}}))}createUnmuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case dI.LocalAudioTrack:n=Qb.Audio;break;case dI.LocalVideoTrack:n=Rr(t=i._hints).call(t,VC.SCREEN_TRACK)?Qb.Screen:Qb.High;break;case dI.LocalVideoLowTrack:n=Qb.Low}return{stream_type:n,ssrcs:o,mid:s}}))}filterTobeUnSubscribedTracks(e,t){const n=[],r=this.remoteUserMap.get(e);if(!r)return n;if(t){const i=r.get(t);if(!i)return n;n.push([e,{kind:t,id:i}])}else Array.from(r.entries()).forEach((t=>{let[r,i]=t;n.push([e,{kind:r,id:i}])}));return n}filterTobeUnSubscribedDataChannels(e,t){const n=[];return t.forEach((t=>{var r;null!==(r=this.remoteDataChannelMap.get(e))&&void 0!==r&&r.has(t.id)&&n.push(t)})),n}createUnsubscribeMessage(e){const t=[];return e.forEach((e=>{let[n,{kind:r,id:i}]=e;switch(r){case aI.VIDEO:return void(n._videoSSRC&&t.push({stream_type:aI.VIDEO,ssrcId:n._videoSSRC}));case aI.AUDIO:return void(n._audioSSRC&&t.push({stream_type:aI.AUDIO,ssrcId:n._audioSSRC}))}})),t}createUnsubscribeAllMessage(e){const t=new Map;return e.forEach((e=>{let[n,{kind:r}]=e;if(t.has(n)){let e=t.get(n);r===aI.VIDEO?e|=Zb.Video:e|=Zb.Audio,t.set(n,e)}else r===aI.VIDEO?t.set(n,Zb.Video):t.set(n,Zb.Audio)})),{users:Array.from(t.entries()).map((e=>{let[t,n]=e;return{stream_id:t.uid,stream_type:n}}))}}withdrawRemoteTracks(e){e.forEach((e=>{let[t,{kind:n}]=e;const r=this.remoteUserMap.get(t);r&&(r.delete(n),0===Array.from(r.entries()).length&&this.remoteUserMap.delete(t))}))}async updateBitrateLimit(e){const t=this.localTrackMap.get(dI.LocalVideoTrack),n=this.localTrackMap.get(dI.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),n&&e.low_stream_uplink&&await n.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return!this.connection||"connected"!==this.connection.peerConnectionState}mapPubResToRemoteConfig(e,t){return e.map(((e,n)=>{var r;let{stream_type:i}=e;return null===(r=t.find((e=>{let{stream_type:t}=e;return i===t})))||void 0===r?void 0:r.attributes}))}async tryToUnmuteAudio(e){for(let n=0;n<e.length;n++)if(e[n]instanceof eR){var t;const r=this.filterTobeUnmutedTracks(e[n]);if(0===r.length)continue;await(null===(t=this.connection)||void 0===t?void 0:t.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t}))));const i=this.createUnmuteMessage(r);return void await N_(this,hI.RequestUnmuteLocal,i)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.connection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(hI.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(hI.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await nE(gE(this.dtlsFailedCount,mE)),this.emit(hI.RequestReconnect)}async reconnectP2P(){const e=Array.from(this.localTrackMap.entries()),t=this.createGatewayUnpublishMessage(e);Array.from(this.remoteUserMap.entries()),t.length>0&&await I_(this,hI.RequestUnpublishForReconnectPC,t),this.disconnectForReconnect(),this.emit(hI.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(dI.LocalVideoTrack)||this.pendingLocalTracks.some((e=>e instanceof SR))}throwIfTrackTypeNotMatch(e){if(e.filter((e=>e instanceof SR)).length>1)throw new Wv(Hv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((e=>e instanceof eR)).length>1&&(e.some((e=>e instanceof eR&&e._bypassWebAudio))||!bC().webAudioMediaStreamDest))throw new Wv(Hv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const t of e){if(t instanceof SR&&this.pendingLocalTracks.some((e=>e instanceof SR)))throw new Wv(Hv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof eR&&this.pendingLocalTracks.some((e=>e instanceof eR))&&(!bC().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some((e=>e instanceof eR&&e._bypassWebAudio))))throw new Wv(Hv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){const n=!ST("DISABLE_DUAL_STREAM_USE_ENCODING")&&bC().supportDualStreamEncoding,r=oF(oF({},{width:160,height:120,framerate:15,bitrate:50}),t);let i;i=n?e._mediaStreamTrack.clone():Bj(e,r);const o=rE(8,"track-low-"),s=new SR(i,oF(oF({},n&&{scaleResolutionDownBy:NN(r,e)}),{},{frameRate:r.framerate,bitrateMax:r.bitrate,bitrateMin:r.bitrate}),void 0,void 0,o);return s.on(WC.TRANSCEIVER_UPDATED,(t=>{e._updateRtpTransceiver(t,BC.LOW_STREAM)})),s._hints.push(VC.LOW_STREAM),e.on("sei-to-send",(e=>{s.emit("sei-to-send",e)})),e.addListener(zC.NEED_CLOSE,(()=>{s.close()})),s}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.connection&&this.connection instanceof VU){var i,o,s,a;const c=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:l,dtlsTransportState:d,peerConnectionState:u}=this.connection,{local:h,remote:p}=await this.connection.getSelectedCandidatePair();eb.pcStats(this.store.sessionId,{startTime:c,eventElapse:e-c||0,iceconnectionsate:l,dtlsstate:d,connectionstate:u,intSucc:t?1:2,error:r,selectedLocalCandidateProtocol:null!==(i=null==h?void 0:h.protocol)&&void 0!==i?i:"",selectedLocalCandidateType:null!==(o=h.candidateType)&&void 0!==o?o:"",selectedLocalCandidateAddress:"".concat(h.address,":").concat(h.port),selectedRemoteCandidateProtocol:null!==(s=p.protocol)&&void 0!==s?s:"",selectedRemoteCandidateType:null!==(a=p.candidateType)&&void 0!==a?a:"",selectedRemoteCandidateAddress:"".concat(p.address,":").concat(p.port),restartCnt:n})}}reportVideoFirstFrameDecoded(e,t,n,r){var i;const o=Array.from(ph(i=this.remoteUserMap).call(i)).find((t=>t._videoSSRC===e));if(o){r||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());const i=this.store.keyMetrics,s=i.subscribe.find((e=>e.userId===o.uid&&"video"===e.type));eb.firstRemoteVideoDecode(this.store.sessionId,YT.FIRST_VIDEO_DECODE,qT.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:n,subscribeElapse:SP.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:i.requestAPEnd||0,apStart:i.requestAPStart||0,joinGwEnd:i.joinGatewayEnd||0,joinGwStart:i.joinGatewayStart||0,pcEnd:i.peerConnectionEnd||0,pcStart:i.peerConnectionStart||0,subscriberEnd:(null==s?void 0:s.subscribeEnd)||0,subscriberStart:(null==s?void 0:s.subscribeStart)||0,videoAddNotify:(null==s?void 0:s.streamAdded)||0,state:r?1:0})}}async remoteMediaSsrcChanged(e,t,n){if(!this.connection)return!1;const r=this.remoteUserMap.get(e);if(!r)return!1;const i=r.get(t);if(!i)return!1;const o=await this.connection.getRemoteSSRC(i);return void 0!==o&&o!==n}resetConnection(e){VT.debug("[".concat(this.store.clientId,"] [P2PChannel] reset connection to ").concat(e)),this.state===uI.Connected?(VT.debug("[".concat(this.store.clientId,"] [P2PChannel] fallback to websocket but P2PChannel state still connected, disconnect first")),this.disconnectForReconnect()):(this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=e===$b.datachannel?new nF({},this.store):this.isPlanB?new kU({},this.store):new VU({},this.store),this.bindConnectionEvents(this.connection)))}unbindRtpTransceiver(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((e=>{let[t,{track:n}]=e;t===dI.LocalVideoLowTrack?n._updateRtpTransceiver(void 0,BC.LOW_STREAM):n._updateRtpTransceiver(void 0)}))}reportPCDisconnectedOrFailed(e){this.connection&&this.connection instanceof VU&&("disconnected"!==this.connection.iceConnectionState&&"checking"!==this.connection.iceConnectionState&&"failed"!==this.connection.iceConnectionState||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===lI.TCP_RESTART&&e===cI.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,lI.DISCONNECTED_OR_FAILED)))}}function lF(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PChannel.".concat(t));try{for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return await r.apply(this,o)}finally{n()}},n}function dF(e){let t=SF();return function(e,t){let n=e.appId;void 0!==n&&(LF(t,10),RF(t,n));let r=e.cid;void 0!==r&&(LF(t,16),LF(t,r));let i=e.cname;void 0!==i&&(LF(t,26),RF(t,i));let o=e.deviceId;void 0!==o&&(LF(t,34),RF(t,o));let s=e.elapse;void 0!==s&&(LF(t,40),PF(t,s));let a=e.fileSize;void 0!==a&&(LF(t,48),PF(t,_F(a)));let c=e.height;void 0!==c&&(LF(t,56),PF(t,_F(c)));let l=e.jpg;void 0!==l&&(LF(t,66),LF(t,l.length),function(e,t){let n=NF(e,t.length);e.bytes.set(t,n)}(t,l));let d=e.networkType;void 0!==d&&(LF(t,72),PF(t,_F(d)));let u=e.osType;void 0!==u&&(LF(t,80),PF(t,_F(u)));let h=e.requestId;void 0!==h&&(LF(t,90),RF(t,h));let p=e.sdkVersion;void 0!==p&&(LF(t,98),RF(t,p));let f=e.sequence;void 0!==f&&(LF(t,104),PF(t,_F(f)));let m=e.sid;void 0!==m&&(LF(t,114),RF(t,m));let g=e.timestamp;void 0!==g&&(LF(t,120),PF(t,g));let y=e.uid;void 0!==y&&(LF(t,128),LF(t,y));let v=e.vid;void 0!==v&&(LF(t,136),LF(t,v));let _=e.width;void 0!==_&&(LF(t,144),PF(t,_F(_)));let E=e.service;void 0!==E&&(LF(t,152),LF(t,E));let S=e.callbackData;void 0!==S&&(LF(t,162),RF(t,S));let T=e.jpgEncryption;void 0!==T&&(LF(t,168),LF(t,T));let b=e.requestType;void 0!==b&&(LF(t,176),LF(t,b));let I=e.scorePorn;void 0!==I&&(LF(t,185),kF(t,I));let N=e.scoreSexy;void 0!==N&&(LF(t,193),kF(t,N));let C=e.scoreNeutral;void 0!==C&&(LF(t,201),kF(t,C));let w=e.scene;void 0!==w&&(LF(t,208),LF(t,w));let R=e.ossFilePrefix;void 0!==R&&(LF(t,218),RF(t,R));let A=e.serviceVendor;if(void 0!==A)for(let O of A){LF(t,226);let e=SF();pF(O,e),LF(t,e.limit),AF(t,e),TF(e)}}(e,t),function(e){let t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}(t)}function uF(e){return function(e){let t={};e:for(;!IF(e);){let n=xF(e);switch(n>>>3){case 0:break e;case 1:t.code=xF(e);break;case 2:t.msg=wF(e,xF(e));break;case 3:{let n=fF(e);t.data=hF(e),e.limit=n;break}default:mF(e,7&n)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function hF(e){let t={};e:for(;!IF(e);){let n=xF(e);switch(n>>>3){case 0:break e;case 1:t.requestId=wF(e,xF(e));break;case 2:t.requestType=xF(e)>>>0;break;case 3:t.scorePorn=DF(e);break;case 4:t.scoreSexy=DF(e);break;case 5:t.scoreNeutral=DF(e);break;case 6:t.requestScene=xF(e)>>>0;break;case 7:t.scene=xF(e)>>>0;break;default:mF(e,7&n)}}return t}function pF(e,t){let n=e.service;void 0!==n&&(LF(t,8),LF(t,n));let r=e.vendor;void 0!==r&&(LF(t,16),LF(t,r));let i=e.token;void 0!==i&&(LF(t,26),RF(t,i));let o=e.callbackUrl;void 0!==o&&(LF(t,34),RF(t,o))}function fF(e){let t=xF(e),n=e.limit;return e.limit=e.offset+t,n}function mF(e,t){switch(t){case 0:for(;128&OF(e););break;case 2:bF(e,xF(e));break;case 5:bF(e,4);break;case 1:bF(e,8);break;default:throw new Error("Unimplemented type: "+t)}}Mb([lF,Db("design:type",Function),Db("design:paramtypes",[Object,Boolean]),Db("design:returntype",cv)],cF.prototype,"startP2PConnection",null),Mb([lF,Db("design:type",Function),Db("design:paramtypes",[Object,Object,Array,Object,String,String]),Db("design:returntype",cv)],cF.prototype,"connect",null),Mb([lF,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",void 0)],cF.prototype,"updateRemoteRTPCapabilities",null),Mb([lF,Db("design:type",Function),Db("design:paramtypes",[Object,Object,Array,Object,String,String]),Db("design:returntype",cv)],cF.prototype,"preConnect",null),Mb([lF,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],cF.prototype,"publishDataChannel",null),Mb([lF,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],cF.prototype,"unpublish",null),Mb([lF,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],cF.prototype,"unpublishDataChannel",null),Mb([lF,Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",cv)],cF.prototype,"unpublishLowStream",null),Mb([lF,Db("design:type",Function),Db("design:paramtypes",[oU,Array]),Db("design:returntype",cv)],cF.prototype,"subscribeDataChannel",null),Mb([lF,Db("design:type",Function),Db("design:paramtypes",[oU,String,Number,Number,Array]),Db("design:returntype",cv)],cF.prototype,"subscribe",null),Mb([lF,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],cF.prototype,"massSubscribe",null),Mb([lF,Db("design:type",Function),Db("design:paramtypes",[oU,String,Boolean]),Db("design:returntype",cv)],cF.prototype,"unsubscribe",null),Mb([lF,Db("design:type",Function),Db("design:paramtypes",[oU,Array]),Db("design:returntype",cv)],cF.prototype,"unsubscribeDataChannel",null),Mb([lF,Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],cF.prototype,"massUnsubscribe",null),Mb([lF,Db("design:type",Function),Db("design:paramtypes",[oU,String]),Db("design:returntype",cv)],cF.prototype,"muteRemote",null),Mb([lF,Db("design:type",Function),Db("design:paramtypes",[oU,String]),Db("design:returntype",cv)],cF.prototype,"unmuteRemote",null),Mb([lF,Db("design:type",Function),Db("design:paramtypes",[oU,String]),Db("design:returntype",cv)],cF.prototype,"hasRemoteMediaWithLock",null),Mb([lF,Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",cv)],cF.prototype,"disconnectForReconnect",null),Mb([lF,Db("design:type",Function),Db("design:paramtypes",[Object]),Db("design:returntype",cv)],cF.prototype,"updateBitrateLimit",null),Mb([lF,Db("design:type",Function),Db("design:paramtypes",[oU,String,Number]),Db("design:returntype",cv)],cF.prototype,"remoteMediaSsrcChanged",null);let gF=new Float32Array(1);new Uint8Array(gF.buffer);let yF=new Float64Array(1),vF=new Uint8Array(yF.buffer);function _F(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let EF=[];function SF(){const e=EF.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function TF(e){EF.push(e)}function bF(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function IF(e){return e.offset>=e.limit}function NF(e,t){let n=e.bytes,r=e.offset,i=e.limit,o=r+t;if(o>n.length){let t=new Uint8Array(2*o);t.set(n),e.bytes=t}return e.offset=o,o>i&&(e.limit=o),r}function CF(e,t){let n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function wF(e,t){let n=CF(e,t),r=String.fromCharCode,i=e.bytes,o="\ufffd",s="";for(let a=0;a<t;a++){let e,c,l,d,u=i[a+n];0==(128&u)?s+=r(u):192==(224&u)?a+1>=t?s+=o:(e=i[a+n+1],128!=(192&e)?s+=o:(d=(31&u)<<6|63&e,d<128?s+=o:(s+=r(d),a++))):224==(240&u)?a+2>=t?s+=o:(e=i[a+n+1],c=i[a+n+2],32896!=(49344&(e|c<<8))?s+=o:(d=(15&u)<<12|(63&e)<<6|63&c,d<2048||d>=55296&&d<=57343?s+=o:(s+=r(d),a+=2))):240==(248&u)?a+3>=t?s+=o:(e=i[a+n+1],c=i[a+n+2],l=i[a+n+3],8421504!=(12632256&(e|c<<8|l<<16))?s+=o:(d=(7&u)<<18|(63&e)<<12|(63&c)<<6|63&l,d<65536||d>1114111?s+=o:(d-=65536,s+=r(55296+(d>>10),56320+(1023&d)),a+=3))):s+=o}return s}function RF(e,t){let n=t.length,r=0;for(let s=0;s<n;s++){let e=t.charCodeAt(s);e>=55296&&e<=56319&&s+1<n&&(e=(e<<10)+t.charCodeAt(++s)-56613888),r+=e<128?1:e<2048?2:e<65536?3:4}LF(e,r);let i=NF(e,r),o=e.bytes;for(let s=0;s<n;s++){let e=t.charCodeAt(s);e>=55296&&e<=56319&&s+1<n&&(e=(e<<10)+t.charCodeAt(++s)-56613888),e<128?o[i++]=e:(e<2048?o[i++]=e>>6&31|192:(e<65536?o[i++]=e>>12&15|224:(o[i++]=e>>18&7|240,o[i++]=e>>12&63|128),o[i++]=e>>6&63|128),o[i++]=63&e|128)}}function AF(e,t){let n=NF(e,t.limit),r=e.bytes,i=t.bytes;for(let o=0,s=t.limit;o<s;o++)r[o+n]=i[o]}function OF(e){return e.bytes[CF(e,1)]}function MF(e,t){let n=NF(e,1);e.bytes[n]=t}function DF(e){let t=CF(e,8),n=e.bytes;return vF[0]=n[t++],vF[1]=n[t++],vF[2]=n[t++],vF[3]=n[t++],vF[4]=n[t++],vF[5]=n[t++],vF[6]=n[t++],vF[7]=n[t++],yF[0]}function kF(e,t){let n=NF(e,8),r=e.bytes;yF[0]=t,r[n++]=vF[0],r[n++]=vF[1],r[n++]=vF[2],r[n++]=vF[3],r[n++]=vF[4],r[n++]=vF[5],r[n++]=vF[6],r[n++]=vF[7]}function xF(e){let t,n=0,r=0;do{t=OF(e),n<32&&(r|=(127&t)<<n),n+=7}while(128&t);return r}function LF(e,t){for(t>>>=0;t>=128;)MF(e,127&t|128),t>>>=7;MF(e,t)}function PF(e,t){let n=t.low>>>0,r=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=0===i?0===r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10,s=NF(e,o),a=e.bytes;switch(o){case 10:a[s+9]=i>>>7&1;case 9:a[s+8]=9!==o?128|i:127&i;case 8:a[s+7]=8!==o?r>>>21|128:r>>>21&127;case 7:a[s+6]=7!==o?r>>>14|128:r>>>14&127;case 6:a[s+5]=6!==o?r>>>7|128:r>>>7&127;case 5:a[s+4]=5!==o?128|r:127&r;case 4:a[s+3]=4!==o?n>>>21|128:n>>>21&127;case 3:a[s+2]=3!==o?n>>>14|128:n>>>14&127;case 2:a[s+1]=2!==o?n>>>7|128:n>>>7&127;case 1:a[s]=1!==o?128|n:127&n}}function jF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const UF=new Map([["moderation",1],["supervise",2]]);class FF extends l_{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this._connectionState;this._connectionState=e,this.emit(gI.CONNECTION_STATE_CHANGE,t,e)}get inspectType(){return this._inspectType}set inspectType(e){var t;this._inspectMode=z_(t=e.map((e=>UF.get(e)||0))).call(t,((e,t)=>e+t)),this._inspectType=e}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout((()=>{this.quality=this._quality/this.qualityRatio}),6e4))}constructor(e){super(),oh(this,"name","AgoraRTCVideoContentInspect"),oh(this,"_connectionState",fI.CONNECTING),oh(this,"_innerConnectionState",void 0),oh(this,"sequence",0),oh(this,"inspectStartTime",void 0),oh(this,"workerManagerConnection",void 0),oh(this,"workerConnection",void 0),oh(this,"workerMessageLengthLimit",void 0),oh(this,"inspectIntervalMinimum",void 0),oh(this,"qualityRatio",void 0),oh(this,"_connectInfo",void 0),oh(this,"_cancelTokenSource",oT.CancelToken.source()),oh(this,"_retryConfig",void 0),oh(this,"wmSequence",0),oh(this,"inspectInterval",void 0),oh(this,"inspectTimer",null),oh(this,"ossFilePrefix",void 0),oh(this,"extraInfo",void 0),oh(this,"_inspectType",void 0),oh(this,"_inspectMode",void 0),oh(this,"_quality",1),oh(this,"qualityTimer",null),oh(this,"_inspectId",void 0),oh(this,"_needWorkUrlOnly",!1),oh(this,"inspectImage",(()=>{if(this.connectionState!==fI.CONNECTED)throw new kb(Hv.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval((()=>{this.connectionState===fI.CONNECTED?this.requestToInspectImage():VT.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)}),this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()})),this._inspectId=rE(5,"inspect-"),this.workerMessageLengthLimit=ST("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=ST("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=ST("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=e.interval,this.ossFilePrefix=e.ossFilePrefix,this.extraInfo=e.extraInfo,this.inspectType=e.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new KI("worker-manager-"+this._inspectId,mE),this.on(gI.STATE_CHANGE,((e,t)=>{this._innerConnectionState=e,VT.debug("[".concat(this._inspectId,"] Inspect operation :").concat(mI[e]," ").concat(t||""))})),this.handleWorkerManagerEvents(),this.workerConnection=new KI("worker-"+this._inspectId,mE),this.handleWorkerEvents()}async init(e,t){this.emit(gI.STATE_CHANGE,mI.CONNECT_AP),this._connectInfo=e;const n=this._cancelTokenSource.token;return this._retryConfig=t,new cv(((r,i)=>{this.on(gI.CONNECTION_STATE_CHANGE,((e,t)=>{t===fI.CONNECTED&&r()})),this.requestAP(e,n,t).then((e=>{this.connectWorkerManager(e)})).catch((e=>{i(e)}))}))}async requestAP(e,t,n){const r=ST("WEBCS_DOMAIN").map((e=>"https://".concat(e,"/api/v1"))),i=await function(e,t,n,r){let{appId:i,areaCode:o,cname:s,sid:a,token:c,uid:l}=t;cC++;const d="image_moderation_api",u={service_name:d,json_body:JSON.stringify({appId:i,areaCode:o,cname:s,command:"allocateEdge",requestId:cC,seq:cC,sid:a,token:c,ts:Date.now(),uid:l+""})};let h,p,f=e[0];return yE((async()=>{h=Date.now();const e=await zN(f,{data:u,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(p=Date.now()-h,0!==e.code){const t=new kb(Hv.UNEXPECTED_RESPONSE,"image inspect ap error, code"+e.code,{retry:!0,responseTime:p});throw VT.error(t.toString()),t}const t=JSON.parse(e.json_body);if(200!==t.code){const e=new kb(Hv.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(t.code,", reason: ").concat(t.reason),{code:t.code,responseTime:p});throw VT.error(e.toString()),e}if(!t.servers||!Array.isArray(t.servers)||0===t.servers.length){const e=new kb(Hv.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:t.code,responseTime:p});throw VT.error(e.toString()),e}const r=ST("VIDEO_INSPECT_WORKER_MANAGER_HOST"),i=ST("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:t.servers.map((e=>{let{address:t,wss:n}=e;if(t&&n)return"wss://".concat(t.replace(/\./g,"-"),".").concat(r,":").concat(i||n)})).filter((e=>!!e)),workerToken:t.workerToken,vid:t.vid,responseTime:p}}),((t,n)=>(eb.apworkerEvent(a,{success:!0,sc:200,serviceName:d,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:p,serverIp:e[n%e.length]}),!1)),((t,n)=>(eb.apworkerEvent(a,{success:!1,sc:t.data&&t.data.code||200,serviceName:d,responseTime:p,serverIp:e[n%e.length]}),!!(t.code!==Hv.OPERATION_ABORTED&&t.code!==Hv.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(f=e[(n+1)%e.length],!0))),r)}(r,e,t,n);this.emit(gI.STATE_CHANGE,mI.AP_CONNECTED);const{addressList:o}=i;return this.wmSequence++,o}async connectWorkerManager(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._needWorkUrlOnly=t,this.emit(gI.STATE_CHANGE,mI.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(e,1e4)}async connectWorker(e){await this.workerConnection.init([e])}handleWorkerManagerEvents(){this.workerManagerConnection.on(Eb.CONNECTED,(async()=>{this.emit(gI.STATE_CHANGE,mI.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.20.2",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)})),this.workerManagerConnection.on(Eb.CLOSED,(()=>{this._innerConnectionState<mI.GET_WORKER_MANAGER_RESPONSE&&VT.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))})),this.workerManagerConnection.on(Eb.FAILED,(()=>{this._innerConnectionState<mI.GET_WORKER_MANAGER_RESPONSE&&VT.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))})),this.workerManagerConnection.on(Eb.RECONNECTING,(()=>{this._innerConnectionState<mI.GET_WORKER_MANAGER_RESPONSE&&VT.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))})),this.workerManagerConnection.on(Eb.ON_MESSAGE,(async e=>{this.emit(gI.STATE_CHANGE,mI.GET_WORKER_MANAGER_RESPONSE);const t=this.workerManagerConnection.url;this.workerManagerConnection.close();const n=JSON.parse(e.data);if(200!==n.code)throw VT.error("[".concat(this._inspectId,"] Unexpected code ").concat(n.code," from worker manager")),new kb(Hv.UNEXPECTED_RESPONSE,"response code of worker is unexpected",n);if(!(n.serverResponse&&n.serverResponse.portWss&&t))throw VT.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(n))),new kb(Hv.UNEXPECTED_RESPONSE,"response content of worker is unexpected",n);{const e=ST("VIDEO_INSPECT_WORKER_PORT")||n.serverResponse.portWss,r=t.replace(/:\d+\/?$/,":".concat(e));this.emit(gI.STATE_CHANGE,mI.CONNECT_WORKER,r),this._needWorkUrlOnly?this.emit(gI.REQUEST_NEW_WORKER_URL,r):await this.connectWorker(r)}})),this.workerManagerConnection.on(Eb.WILL_RECONNECT,((e,t,n)=>{n(e)})),this.workerManagerConnection.on(Eb.REQUEST_NEW_URLS,((e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)}))}handleWorkerEvents(){this.workerConnection.on(Eb.CONNECTED,(async()=>{this.emit(gI.STATE_CHANGE,mI.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=fI.CONNECTED})),this.workerConnection.on(Eb.ON_MESSAGE,(async e=>{if(e.data instanceof ArrayBuffer){const n=uF(new Uint8Array(e.data));if(ST("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&VT.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(n)),200===n.code){if(Array.isArray(this.inspectType)&&1===this.inspectType.length&&"supervise"===this.inspectType[0])return void this.emit(gI.INSPECT_RESULT,void 0,void 0);if(n.data&&n.data.scorePorn&&n.data.scoreSexy&&n.data.scoreNeutral){var t;const e={porn:n.data.scorePorn,sexy:n.data.scoreSexy,neutral:n.data.scoreNeutral},r=z_(t=Object.keys(e)).call(t,((t,n)=>e[t]>e[n]?t:n),"porn"),i=Object.keys(e).find((e=>e===r));this.emit(gI.INSPECT_RESULT,i)}else this.emit(gI.INSPECT_RESULT,void 0,new kb(Hv.UNEXPECTED_RESPONSE,n.code+"","There is an unexpected data on message"))}else this.emit(gI.INSPECT_RESULT,void 0,new kb(Hv.UNEXPECTED_RESPONSE,n.code+"",n.msg))}else VT.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(gI.INSPECT_RESULT,void 0,new kb(Hv.UNEXPECTED_RESPONSE,"invalid worker message type"))})),this.workerConnection.on(Eb.CLOSED,(()=>{this.connectionState=fI.CLOSED})),this.workerConnection.on(Eb.FAILED,(()=>{this.connectionState=fI.CLOSED})),this.workerConnection.on(Eb.RECONNECTING,(()=>{this.connectionState=this.connectionState===fI.CONNECTED?fI.RECONNECTING:fI.CONNECTING})),this.workerConnection.on(Eb.WILL_RECONNECT,((e,t,n)=>{"recover"===e&&n(e),n("tryNext")})),this.workerConnection.on(Eb.REQUEST_NEW_URLS,((e,t)=>{this.workerManagerConnection.close(),this.once(gI.REQUEST_NEW_WORKER_URL,(t=>{e([t])})),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then((e=>{this.connectWorkerManager(e,!0)})).catch((e=>{t(e)}))}))}static intToLong(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}async requestToInspectImage(){this.sequence++;const e=C_(this,gI.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void this.emit(gI.INSPECT_RESULT,void 0,new kb(Hv.INVALID_OPERATION,"Only the track being played can be inspected"));const n=await this.generateRequestData(e,t);this.workerConnection.sendMessage(n,!0,!0)}else this.emit(gI.INSPECT_RESULT,void 0,new kb(Hv.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(e,t){let{appId:n,cname:r,cid:i,vid:o,sid:s,uid:a}=t;const c=Date.now(),l=await e.getCurrentFrameImage("image/jpeg",this.quality),d=await vR(l,n,r),u=this.sequence+"-"+i+"-"+a+"-"+c+"-"+rE(12,""),h={appId:n,cid:i,cname:r,deviceId:"",elapse:FF.intToLong(Number(c-this.inspectStartTime)),fileSize:d.byteLength,jpgEncryption:2,height:l.height,width:l.width,jpg:d,networkType:6,osType:7,requestId:u,sdkVersion:"4.20.2",sequence:this.sequence,sid:s,timestamp:FF.intToLong(c),uid:a,vid:o,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};void 0===this.extraInfo&&delete h.callbackData,void 0===this.ossFilePrefix&&delete h.ossFilePrefix;const p=dF(h);if(p.byteLength<this.workerMessageLengthLimit){if(ST("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jF(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h);delete e.jpg,VT.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(e))}return p}{const t=this.quality*this.qualityRatio;return this.quality=t,await this.generateRequestData(e,{appId:n,cname:r,cid:i,vid:o,sid:s,uid:a})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=oT.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=fI.CLOSED,this.emit(gI.STATE_CHANGE,mI.CLOSED)}}function zF(e){let t=function(){const e=HF.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(e,t){let n=e.appId;void 0!==n&&(tz(t,10),XF(t,n));let r=e.cid;void 0!==r&&(tz(t,16),tz(t,r));let i=e.cname;void 0!==i&&(tz(t,26),XF(t,i));let o=e.deviceId;void 0!==o&&(tz(t,34),XF(t,o));let s=e.elapse;void 0!==s&&(tz(t,40),rz(t,s));let a=e.fileSize;void 0!==a&&(tz(t,48),rz(t,GF(a)));let c=e.height;void 0!==c&&(tz(t,56),rz(t,GF(c)));let l=e.jpg;void 0!==l&&(tz(t,66),tz(t,l.length),QF(t,l));let d=e.networkType;void 0!==d&&(tz(t,72),rz(t,GF(d)));let u=e.osType;void 0!==u&&(tz(t,80),rz(t,GF(u)));let h=e.requestId;void 0!==h&&(tz(t,90),XF(t,h));let p=e.sdkVersion;void 0!==p&&(tz(t,98),XF(t,p));let f=e.sequence;void 0!==f&&(tz(t,104),rz(t,GF(f)));let m=e.sid;void 0!==m&&(tz(t,114),XF(t,m));let g=e.timestamp;void 0!==g&&(tz(t,120),rz(t,g));let y=e.uid;void 0!==y&&(tz(t,128),tz(t,y));let v=e.vid;void 0!==v&&(tz(t,136),tz(t,v));let _=e.width;void 0!==_&&(tz(t,144),rz(t,GF(_)));let E=e.service;void 0!==E&&(tz(t,152),tz(t,E));let S=e.callbackData;void 0!==S&&(tz(t,162),tz(t,S.length),QF(t,S));let T=e.ticket;void 0!==T&&(tz(t,170),XF(t,T));let b=e.vendorConfigs;void 0!==b&&(tz(t,178),XF(t,b))}(e,t),function(e){let t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}(t)}function VF(e){return function(e){let t={};e:for(;!YF(e);){let n=ez(e);switch(n>>>3){case 0:break e;case 1:t.code=ez(e);break;case 2:t.msg=JF(e,ez(e));break;case 3:t.requestId=JF(e,ez(e));break;case 4:t.timestamp=nz(e,!1);break;default:BF(e,7&n)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function BF(e,t){switch(t){case 0:for(;128&ZF(e););break;case 2:WF(e,ez(e));break;case 5:WF(e,4);break;case 1:WF(e,8);break;default:throw new Error("Unimplemented type: "+t)}}function GF(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let HF=[];function WF(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function YF(e){return e.offset>=e.limit}function qF(e,t){let n=e.bytes,r=e.offset,i=e.limit,o=r+t;if(o>n.length){let t=new Uint8Array(2*o);t.set(n),e.bytes=t}return e.offset=o,o>i&&(e.limit=o),r}function KF(e,t){let n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function QF(e,t){let n=qF(e,t.length);e.bytes.set(t,n)}function JF(e,t){let n=KF(e,t),r=String.fromCharCode,i=e.bytes,o="\ufffd",s="";for(let a=0;a<t;a++){let e,c,l,d,u=i[a+n];0==(128&u)?s+=r(u):192==(224&u)?a+1>=t?s+=o:(e=i[a+n+1],128!=(192&e)?s+=o:(d=(31&u)<<6|63&e,d<128?s+=o:(s+=r(d),a++))):224==(240&u)?a+2>=t?s+=o:(e=i[a+n+1],c=i[a+n+2],32896!=(49344&(e|c<<8))?s+=o:(d=(15&u)<<12|(63&e)<<6|63&c,d<2048||d>=55296&&d<=57343?s+=o:(s+=r(d),a+=2))):240==(248&u)?a+3>=t?s+=o:(e=i[a+n+1],c=i[a+n+2],l=i[a+n+3],8421504!=(12632256&(e|c<<8|l<<16))?s+=o:(d=(7&u)<<18|(63&e)<<12|(63&c)<<6|63&l,d<65536||d>1114111?s+=o:(d-=65536,s+=r(55296+(d>>10),56320+(1023&d)),a+=3))):s+=o}return s}function XF(e,t){let n=t.length,r=0;for(let s=0;s<n;s++){let e=t.charCodeAt(s);e>=55296&&e<=56319&&s+1<n&&(e=(e<<10)+t.charCodeAt(++s)-56613888),r+=e<128?1:e<2048?2:e<65536?3:4}tz(e,r);let i=qF(e,r),o=e.bytes;for(let s=0;s<n;s++){let e=t.charCodeAt(s);e>=55296&&e<=56319&&s+1<n&&(e=(e<<10)+t.charCodeAt(++s)-56613888),e<128?o[i++]=e:(e<2048?o[i++]=e>>6&31|192:(e<65536?o[i++]=e>>12&15|224:(o[i++]=e>>18&7|240,o[i++]=e>>12&63|128),o[i++]=e>>6&63|128),o[i++]=63&e|128)}}function ZF(e){return e.bytes[KF(e,1)]}function $F(e,t){let n=qF(e,1);e.bytes[n]=t}function ez(e){let t,n=0,r=0;do{t=ZF(e),n<32&&(r|=(127&t)<<n),n+=7}while(128&t);return r}function tz(e,t){for(t>>>=0;t>=128;)$F(e,127&t|128),t>>>=7;$F(e,t)}function nz(e,t){let n,r=0,i=0,o=0;return n=ZF(e),r=127&n,128&n&&(n=ZF(e),r|=(127&n)<<7,128&n&&(n=ZF(e),r|=(127&n)<<14,128&n&&(n=ZF(e),r|=(127&n)<<21,128&n&&(n=ZF(e),i=127&n,128&n&&(n=ZF(e),i|=(127&n)<<7,128&n&&(n=ZF(e),i|=(127&n)<<14,128&n&&(n=ZF(e),i|=(127&n)<<21,128&n&&(n=ZF(e),o=127&n,128&n&&(n=ZF(e),o|=(127&n)<<7))))))))),{low:r|i<<28,high:i>>>4|o<<24,unsigned:t}}function rz(e,t){let n=t.low>>>0,r=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=0===i?0===r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10,s=qF(e,o),a=e.bytes;switch(o){case 10:a[s+9]=i>>>7&1;case 9:a[s+8]=9!==o?128|i:127&i;case 8:a[s+7]=8!==o?r>>>21|128:r>>>21&127;case 7:a[s+6]=7!==o?r>>>14|128:r>>>14&127;case 6:a[s+5]=6!==o?r>>>7|128:r>>>7&127;case 5:a[s+4]=5!==o?128|r:127&r;case 4:a[s+3]=4!==o?n>>>21|128:n>>>21&127;case 3:a[s+2]=3!==o?n>>>14|128:n>>>14&127;case 2:a[s+1]=2!==o?n>>>7|128:n>>>7&127;case 1:a[s]=1!==o?128|n:127&n}}const iz={},oz={},sz=4294967296,az=sz*sz,cz=az/2,lz=fz(0,!0),dz=fz(0),uz=mz(0,-2147483648,!1),hz=mz(-1,2147483647,!1),pz=mz(-1,-1,!0);function fz(e,t){let n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=oz[e],r)?r:(n=mz(e,0,!0),i&&(oz[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=iz[e],r)?r:(n=mz(e,e<0?-1:0,!1),i&&(iz[e]=n),n)}function mz(e,t,n){return{low:0|e,high:0|t,unsigned:!!n}}function gz(e,t){if(isNaN(e))return t?lz:dz;if(t){if(e<0)return lz;if(e>=az)return pz}else{if(e<=-cz)return uz;if(e+1>=cz)return hz}return e<0?t?lz:dz:mz(e%sz|0,e/sz|0,t)}function yz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}class vz extends l_{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this._connectionState;this._connectionState=e,this.emit(TI.CONNECTION_STATE_CHANGE,e,t)}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout((()=>{this.quality=this._quality/this._qualityRatio}),6e4))}constructor(e){var t;super(),oh(this,"name","AgoraRTCImageModeration"),oh(this,"_connectionState",SI.CONNECTING),oh(this,"_sequence",0),oh(this,"_moderationStartTime",void 0),oh(this,"_workerConnection",void 0),oh(this,"_workerMessageLengthLimit",void 0),oh(this,"_qualityRatio",void 0),oh(this,"_connectInfo",void 0),oh(this,"_cancelTokenSource",oT.CancelToken.source()),oh(this,"_retryConfig",void 0),oh(this,"_moderationInterval",void 0),oh(this,"_moderationTimer",null),oh(this,"_moderationMode",1),oh(this,"_quality",1),oh(this,"_qualityTimer",null),oh(this,"_ticket",void 0),oh(this,"_moderationIntervalMinimum",void 0),oh(this,"_uploadFailedNum",0),oh(this,"_uploadNum",0),oh(this,"_uploadTimer",null),oh(this,"_extraInfo",void 0),oh(this,"_vendor",""),oh(this,"_encoder",new TextEncoder),oh(this,"_moderationId",void 0),oh(this,"inspectImage",(()=>{if(this.connectionState!==SI.CONNECTED)throw new kb(Hv.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval((()=>{this.connectionState===SI.CONNECTED?this.requestToInspectImage():VT.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)}),this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()})),this._moderationId=rE(5,"image-moderation-"),this._workerMessageLengthLimit=ST("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=ST("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=null!==(t=e.interval)&&void 0!==t?t:1e3,e.extraInfo&&(this._extraInfo=this._encoder.encode(e.extraInfo)),e.vendor&&(this._vendor=e.vendor),this._qualityRatio=ST("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new KI("worker-"+this._moderationId,mE),this.on(TI.STATE_CHANGE,((e,t)=>{VT.debug("[".concat(this._moderationId,"] Moderation operation :").concat(bI[e]," ").concat(t||""))})),this.handleWorkerEvents()}async init(e,t){this.emit(TI.STATE_CHANGE,bI.CONNECT_AP),this._connectInfo=e;const n=this._cancelTokenSource.token;return this._retryConfig=t,new cv(((r,i)=>{this.on(TI.CONNECTION_STATE_CHANGE,((e,t)=>{e===SI.CONNECTED&&r()})),this.requestAP(e,n,t).then((e=>{this.connectWorker(e)})).catch((e=>{i(e)}))}))}updateConfig(e){var t;this._moderationInterval=null!==(t=e.interval)&&void 0!==t?t:1e3,e.extraInfo&&(this._extraInfo=this._encoder.encode(e.extraInfo)),e.vendor&&(this._vendor=e.vendor),VT.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(e))),this.connectionState===SI.CONNECTED&&this.inspectImage()}async requestAP(e,t,n){const r=ST("WEBCS_DOMAIN").map((e=>"https://".concat(e,"/api/v1"))),i=await function(e,t,n,r){let{appId:i,areaCode:o,cname:s,sid:a,token:c,uid:l}=t;cC++;const d="moderation_plugin",u={service_name:d,json_body:JSON.stringify({appId:i,areaCode:o,cname:s,command:"allocateEdge",requestId:cC,seq:cC,sid:a,appToken:c,ts:Date.now(),uid:l+""})};let h,p,f=e[0];return yE((async()=>{h=Date.now();const e=await zN(f,{data:u,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(p=Date.now()-h,0!==e.code){const t=new kb(Hv.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+e.code,{retry:!0,responseTime:p});throw VT.error(t.toString()),t}const t=JSON.parse(e.json_body);if(200!==t.code){const e=new kb(Hv.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(t.code,", reason: ").concat(t.reason),{code:t.code,responseTime:p});throw VT.error(e.toString()),e}if(!t.servers||!Array.isArray(t.servers)||0===t.servers.length){const e=new kb(Hv.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:t.code,responseTime:p});throw VT.error(e.toString()),e}if(!t.servers.some((e=>!!e.wss))){const e=new kb(Hv.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:t.code,responseTime:p});throw VT.error(e.toString()),e}const r=ST("IMAGE_MODERATION_WORKER_HOST");return{addressList:t.servers.map((e=>{let{address:t,wss:n}=e;if(t&&n)return"wss://".concat(t.replace(/\./g,"-"),".").concat(r,":").concat(n,"/moderation")})).filter((e=>!!e)),workerToken:t.workerToken,vid:t.vid,ticket:t.appTicket,responseTime:p}}),((t,n)=>(eb.apworkerEvent(a,{success:!0,sc:200,serviceName:d,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:p,serverIp:e[n%e.length]}),!1)),((t,n)=>(eb.apworkerEvent(a,{success:!1,sc:t.data&&t.data.code||200,serviceName:d,responseTime:p,serverIp:e[n%e.length]}),!!(t.code!==Hv.OPERATION_ABORTED&&t.code!==Hv.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(f=e[(n+1)%e.length],!0))),r)}(r,e,t,n);this.emit(TI.STATE_CHANGE,bI.AP_CONNECTED);const{addressList:o,ticket:s}=i;return this._ticket=s,o}async connectWorker(e){this.emit(TI.STATE_CHANGE,bI.CONNECT_WORKER),await this._workerConnection.init(e,1e4)}handleWorkerEvents(){this._workerConnection.on(Eb.CONNECTED,(async()=>{this.emit(TI.STATE_CHANGE,bI.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=SI.CONNECTED})),this._workerConnection.on(Eb.CLOSED,(()=>{this.connectionState=SI.CLOSED})),this._workerConnection.on(Eb.FAILED,(()=>{this.connectionState=SI.CLOSED})),this._workerConnection.on(Eb.RECONNECTING,(()=>{this.connectionState=this.connectionState===SI.CONNECTED?SI.RECONNECTING:SI.CONNECTING})),this._workerConnection.on(Eb.ON_MESSAGE,(async e=>{if(e.data instanceof ArrayBuffer){const t=VF(new Uint8Array(e.data));ST("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&VT.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(t)),this._uploadNum++,void 0===t.code||0===t.code||(this._uploadFailedNum++,VT.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(t.code,", msg is ").concat(t.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout((()=>{eb.reportApiInvoke(this._connectInfo.sid||null,{name:h_.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,t.code],tag:p_.TRACER}).onError(new kb(Hv.IMAGE_MODERATION_UPLOAD_FAILED,t.msg)),this._uploadTimer=null}),ST("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else VT.error("[".concat(this._moderationId,"] Unexpected message type from worker"))})),this._workerConnection.on(Eb.WILL_RECONNECT,((e,t,n)=>{"recover"===e&&n(e),n("tryNext")})),this._workerConnection.on(Eb.REQUEST_NEW_URLS,((e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)}))}static intToLong(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}async requestToInspectImage(){const e=C_(this,TI.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void(ST("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&VT.debug("Only the track being played can be inspected"));this._sequence++;const n=await this.generateRequestData(e,t);this._workerConnection.sendMessage(n,!0,!0)}else ST("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&VT.debug("Only the track being published can be inspected")}async generateRequestData(e,t){let{appId:n,cname:r,cid:i,vid:o,sid:s,uid:a}=t;const c=Date.now(),l=await e.getCurrentFrameImage("image/jpeg",this.quality),d=await vR(l,n,r),u=this._sequence+"-"+i+"-"+a+"-"+c+"-"+rE(12,""),h={appId:n,cid:i,cname:r,deviceId:"",elapse:vz.intToLong(Number(c-this._moderationStartTime)),fileSize:l.buffer.byteLength,height:l.height,width:l.width,jpg:d,networkType:6,osType:7,requestId:u,sdkVersion:"4.20.2",sequence:this._sequence,sid:s,timestamp:gz(c),uid:a,vid:o,service:this._moderationMode,ticket:this._ticket,callbackData:this._extraInfo,vendorConfigs:this._vendor};void 0===this._extraInfo&&delete h.callbackData;const p=zF(h);if(p.byteLength<this._workerMessageLengthLimit){if(ST("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yz(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yz(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h);delete e.jpg,VT.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(e))}return p}{const t=this.quality*this._qualityRatio;return this.quality=t,await this.generateRequestData(e,{appId:n,cname:r,cid:i,vid:o,sid:s,uid:a})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=oT.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=SI.CLOSED,this.emit(TI.STATE_CHANGE,bI.CLOSED)}}function _z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ez(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_z(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Sz=Date.now(),Tz=20,bz=new Map,Iz=new Map;async function Nz(e){const t=bz.get(e),n=Array.isArray(t)&&t[t.length-1],r=Iz.get(e);if(!n)return void(r.isSyncing=!1);const i={uid:n.uid,payload:n.payload};0===r.firstRecvTs&&(r.firstRecvTs=n.recvTs,r.firstSendTs=n.sendTs);const o=n.sendTs-r.firstSendTs,s=o-(Date.now()-r.firstRecvTs);s>0&&(r.firstRecvTs=Date.now()-o);let a=n.mediaDelay+s;a<=0?(t.pop(),Cz(n.context,i),a=0):a=Math.min(a,Tz),setTimeout((()=>t.length&&Nz(e)),a)}function Cz(e,t){e.safeEmit(g_.STREAM_MESSAGE,t.uid,t.payload),e.onStreamMessage&&e.onStreamMessage(t)}function wz(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(!e.syncWithAudio)return Cz(n,{uid:e.uid,payload:e.payload});const r="".concat(n.id,"-").concat(e.uid),i=bz.get(r)||[],o=i.findIndex((t=>e.sendTs>=t.sendTs)),s=Ez(Ez({},e),{},{context:n,mediaDelay:t,recvTs:Date.now()});-1===o?i.push(s):i.splice(o,0,s),bz.set(r,i);let a=!1;var c;Iz.has(r)?a=!(null===(c=Iz.get(r))||void 0===c||!c.isSyncing):Iz.set(r,{isSyncing:a,firstRecvTs:0,firstSendTs:0}),a||Nz(r)}const Rz=Ev().name;function Az(){return!function(e,t,n){const r=Ev();if(r.os!==fv.IOS||!r.osVersion)return!1;const i=r.osVersion.split(".");return n?t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e:t?Number(i[0])===e&&Number(i[1])<=t||Number(i[0])<e:Number(i[0])<=e}(16,0,!0)&&!function(e,t,n){const r=Ev();if(r.name!==mv.SAFARI||!r.osVersion)return!1;const i=r.version.split(".");return n?t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e:t?Number(i[0])===e&&Number(i[1])<=t||Number(i[0])<e:Number(i[0])<=e}(16,0,!0)}function Oz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oz(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oz(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}pE.setLogger(VT);class Dz extends l_{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get localDataChannels(){return this._p2pChannel.getAllDataChannels()}get mode(){return this._config.mode}get role(){var e;return(null===(e=this._config)||void 0===e?void 0:e.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(e){let t;if(super(),oh(this,"store",void 0),oh(this,"_uid",void 0),oh(this,"_channelName",void 0),oh(this,"_uintUid",void 0),oh(this,"_users",[]),oh(this,"_config",void 0),oh(this,"_clientId",void 0),oh(this,"_appId",void 0),oh(this,"_sessionId",null),oh(this,"_key",void 0),oh(this,"_rtmConfig",{}),oh(this,"_joinInfo",void 0),oh(this,"_gateway",void 0),oh(this,"_statsCollector",void 0),oh(this,"_configDistribute",void 0),oh(this,"_leaveMutex",new pE("client-leave")),oh(this,"_publishMutex",new pE("client-publish")),oh(this,"_renewTokenMutex",new pE("client-renewtoken")),oh(this,"_subscribeMutex",new pE("client-subscribe")),oh(this,"_encryptionMode","none"),oh(this,"_encryptionSecret",null),oh(this,"_encryptionSalt",null),oh(this,"_encryptDataStream",!1),oh(this,"_encryptDataStreamKey",null),oh(this,"_encryptDataStreamIv",null),oh(this,"_proxyServer",void 0),oh(this,"_turnServer",{servers:[],mode:"auto"}),oh(this,"_cloudProxyServerMode","disabled"),oh(this,"_isDualStreamEnabled",!1),oh(this,"_defaultStreamFallbackType",void 0),oh(this,"_lowStreamParameter",void 0),oh(this,"_streamFallbackTypeCacheMap",new Map),oh(this,"_remoteStreamTypeCacheMap",new Map),oh(this,"_axiosCancelSource",oT.CancelToken.source()),oh(this,"_audioVolumeIndicationInterval",void 0),oh(this,"_networkQualityInterval",void 0),oh(this,"_userOfflineTimeout",void 0),oh(this,"_streamRemovedTimeout",void 0),oh(this,"_injectStreamingClient",void 0),oh(this,"_liveTranscodeStreamingClient",void 0),oh(this,"_liveRawStreamingClient",void 0),oh(this,"_channelMediaRelayClient",void 0),oh(this,"_networkQualitySensitivity","normal"),oh(this,"_p2pChannel",void 0),oh(this,"_useLocalAccessPoint",!1),oh(this,"_setLocalAPVersion",void 0),oh(this,"_joinAndNotLeaveYet",!1),oh(this,"_numberOfJoinCount",0),oh(this,"_remoteDefaultVideoStreamType",void 0),oh(this,"_inspect",void 0),oh(this,"_moderation",void 0),oh(this,"_license",void 0),oh(this,"_pendingPublishedUsers",[]),oh(this,"ntpAlignErrorCount",0),oh(this,"remoteInboundOffset",0),oh(this,"_handleLocalTrackEnable",((e,t,n)=>{this.publish(e,!1).then(t).catch(n)})),oh(this,"_handleLocalTrackDisable",((e,t,n)=>{this.unpublish(e).then(t).catch(n)})),oh(this,"_handleUserOnline",(e=>{if(ST("BLOCK_LOCAL_CLIENT")&&ob(e.uid,this.channelName))return void VT.debug("[".concat(e.uid,"] will be ignored in local"));this.isStringUID&&"string"!=typeof e.uid&&VT.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const t=this._users.find((t=>t.uid===e.uid));if(t)t._trust_in_room_=!0,t._is_pre_created&&(t._is_pre_created=!1,this.safeEmit(g_.USER_JOINED,t));else{const t=new oU(e.uid,e.uint_id||e.uid);this._users.push(t),VT.debug("[".concat(this._clientId,"] user online"),e.uid),this.safeEmit(g_.USER_JOINED,t)}})),oh(this,"_handleUserOffline",(e=>{if(ST("BLOCK_LOCAL_CLIENT")&&ob(e.uid,this.channelName))return;const t=this._users.find((t=>t.uid===e.uid));t&&(this._handleRemoveStream(e),this._handleRemoveDataChannels(e),t._audio_pre_subscribed||t._video_pre_subscribed?t._is_pre_created=!0:G_(this._users,t),this._remoteStreamTypeCacheMap.delete(t.uid),this._streamFallbackTypeCacheMap.delete(t.uid),VT.debug("[".concat(this._clientId,"] user offline"),e.uid,"reason:",e.reason),this.safeEmit(g_.USER_LEAVED,t,e.reason))})),oh(this,"_handleAddAudioOrVideoStream",((e,t,n,r,i,o,s)=>{if(ST("BLOCK_LOCAL_CLIENT")&&ob(t,this.channelName))return;const a=this._users.find((e=>e.uid===t));if(!a)return void VT.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));VT.debug("[".concat(this._clientId,"] stream added with uid ").concat(t,", type ").concat(e)),this.store.subscribe(a.uid,e,void 0,void 0,void 0,Date.now());const c="audio"===e?a.hasAudio:a.hasVideo;a._uintid||(a._uintid=i||t),"audio"===e?a._trust_audio_stream_added_state_=!0:a._trust_video_stream_added_state_=!0,"audio"===e?(a._audio_added_=!0,void 0!==n&&(a._audioSSRC=n),void 0!==r&&(a._cname=r),o&&(a._audioOrtc=o)):(a._video_added_=!0,void 0!==n&&(a._videoSSRC=n),void 0!==r&&(a._cname=r),void 0!==s&&(a._rtxSsrcId=s),o&&(a._videoOrtc=o)),("audio"===e?a.hasAudio:a.hasVideo)&&!c&&(VT.info("[".concat(this._clientId,"] remote user ").concat(a.uid," published ").concat(e)),this.safeEmit(g_.USER_PUBLISHED,a,e)),"video"===e?eb.onGatewayStream(this._sessionId,YT.ON_ADD_VIDEO_STREAM,qT.ON_ADD_VIDEO_STREAM,{peer:i||t,ssrc:a._videoSSRC}):eb.onGatewayStream(this._sessionId,YT.ON_ADD_AUDIO_STREAM,qT.ON_ADD_AUDIO_STREAM,{peer:i||t,ssrc:a._audioSSRC}),this._p2pChannel.remoteMediaSsrcChanged(a,e,n).then((t=>{if(t&&(VT.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(a.uid," after rejoin because SSRC id changed.")),this._p2pChannel instanceof cF))return this._p2pChannel.unsubscribe(a,e,!0).then((()=>this._subscribe(a,e,!0).catch((e=>{VT.error("[".concat(this._clientId,"] resubscribe error"),e.toString())}))))})),this._p2pChannel.hasPendingRemoteMedia(a,e)&&(VT.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(a.uid," after reconnect.")),this._subscribe(a,e,!0).catch((e=>{VT.error("[".concat(this._clientId,"] resubscribe error"),e.toString())})))})),oh(this,"_handleRemoveStream",(e=>{if(ST("BLOCK_LOCAL_CLIENT")&&ob(e.uid,this.channelName))return;const t=this._users.find((t=>t.uid===e.uid));if(!t)return void VT.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));VT.debug("[".concat(this._clientId,"] stream removed with uid ").concat(e.uid));let n=()=>{};t.hasAudio&&t.hasVideo?n=()=>{VT.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished audio track")),this.safeEmit(g_.USER_UNPUBLISHED,t,"audio"),VT.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished video track")),this.safeEmit(g_.USER_UNPUBLISHED,t,"video")}:t.hasVideo?n=()=>{VT.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished video track")),this.safeEmit(g_.USER_UNPUBLISHED,t,"video")}:t.hasAudio&&(n=()=>{VT.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished audio track")),this.safeEmit(g_.USER_UNPUBLISHED,t,"audio")}),t._video_pre_subscribed||t._audio_pre_subscribed||(t._trust_audio_stream_added_state_=!0,t._trust_video_stream_added_state_=!0,t._audio_added_=!1,t._video_added_=!1,this._p2pChannel instanceof cF&&this._p2pChannel.unsubscribe(t).then((e=>{if(e)return this._gateway.unsubscribe(e,t.uid)})),t._audioSSRC=void 0,t._videoSSRC=void 0,t._audioOrtc=void 0,t._videoOrtc=void 0,t._rtxSsrcId=void 0),eb.onGatewayStream(this._sessionId,YT.ON_REMOVE_STREAM,qT.ON_REMOVE_STREAM,{peer:e.uint_id||e.uid}),n()})),oh(this,"_handleSetStreamLocalEnable",((e,t,n)=>{if(ST("BLOCK_LOCAL_CLIENT")&&ob(t,this.channelName))return;const r=this._users.find((e=>e.uid===t));if(!r)return void VT.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));VT.debug("[".concat(this._clientId,"] local ").concat(e," ").concat(n?"enabled":"disabled"," with uid ").concat(t));const i="audio"===e?r.hasAudio:r.hasVideo;if("audio"===e){r._trust_audio_enabled_state_=!0;const e=r._audio_enabled_;if(r._audio_enabled_=n,r._audio_enabled_===e)return;{const e=r._audio_enabled_?"enable-local-audio":"disable-local-audio";VT.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(t,", msg: ").concat(e)),this.safeEmit(g_.USER_INFO_UPDATED,t,e)}}else{r._trust_video_enabled_state_=!0;const e=r._video_enabled_;if(r._video_enabled_=n,r._video_enabled_===e)return;{const e=r._video_enabled_?"enable-local-video":"disable-local-video";VT.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(t,", msg: ").concat(e)),this.safeEmit(g_.USER_INFO_UPDATED,t,e)}}const o="audio"===e?r.hasAudio:r.hasVideo;return i!==o?!i&&o?(VT.info("[".concat(this._clientId,"] remote user ").concat(t," published ").concat(e)),void this.safeEmit(g_.USER_PUBLISHED,r,e)):("video"===e&&r._videoTrack&&r._videoTrack._destroy(),"audio"===e&&r._audioTrack,this._p2pChannel.muteRemote(r,e),VT.info("[".concat(this._clientId,"] remote user ").concat(t," unpublished ").concat(e)),void this.safeEmit(g_.USER_UNPUBLISHED,r,e)):void 0})),oh(this,"_handleMuteStream",((e,t,n)=>{if(ST("BLOCK_LOCAL_CLIENT")&&ob(e,this.channelName))return;VT.debug("[".concat(this._clientId,"] receive mute message"),e,t,n);const r=this._users.find((t=>t.uid===e));if(!r)return void VT.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(e));const i="audio"===t?r.hasAudio:r.hasVideo;if("audio"===t){r._trust_audio_mute_state_=!0;const t=r._audio_muted_;if(r._audio_muted_=n,r._audio_muted_===t)return;{const t=r._audio_muted_?"mute-audio":"unmute-audio";VT.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(t)),this.safeEmit(g_.USER_INFO_UPDATED,e,t)}}else{r._trust_video_mute_state_=!0;const t=r._video_muted_;if(r._video_muted_=n,r._video_muted_===t)return;{const t=r._video_muted_?"mute-video":"unmute-video";VT.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(t)),this.safeEmit(g_.USER_INFO_UPDATED,e,t)}}const o="audio"===t?r.hasAudio:r.hasVideo;if(i!==o){if(!i&&o)return("audio"===t?r._audioSSRC:r._videoSSRC)?(VT.info("[".concat(this._clientId,"] remote user ").concat(e," published ").concat(t)),void this.safeEmit(g_.USER_PUBLISHED,r,t)):void VT.warning("[".concat(this._clientId,"] remote user ").concat(e," receive ").concat(t," unmute message  before add stream message, ").concat(t," SSRC doesn't exist yet."));"video"===t&&r._videoTrack&&!r._video_pre_subscribed&&r._videoTrack._destroy(),"audio"===t&&r._audioTrack,this._p2pChannel.muteRemote(r,t),VT.info("[".concat(this._clientId,"] remote user ").concat(e," unpublished ").concat(t)),this.safeEmit(g_.USER_UNPUBLISHED,r,t)}})),oh(this,"_handleP2PLost",(async e=>{VT.debug("[".concat(this._clientId,"] receive p2p lost"),e),parseInt(e.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():VT.warning("[".concat(this._clientId,"] P2PLost stream not found"),e)})),oh(this,"_handleTokenWillExpire",(()=>{VT.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(g_.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)})),oh(this,"_handleBeforeUnload",(e=>{"beforeunload"===e.type&&void 0!==e.returnValue&&""!==e.returnValue||(this.leave(),VT.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))})),oh(this,"_handleUpdateNetworkQuality",(()=>{if("normal"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.safeEmit(g_.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const e={downlinkNetworkQuality:0,uplinkNetworkQuality:0};e.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),e.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(g_.NETWORK_QUALITY,e)})),oh(this,"_handleP2PAddAudioOrVideoStream",((e,t,n,r)=>{const i=this._users.find((e=>e.uid===t));if(!i)return void VT.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));VT.debug("[".concat(this._clientId,"] stream added with uid ").concat(t,", type ").concat(e)),this.store.subscribe(i.uid,e,void 0,void 0,void 0,Date.now());const o="audio"===e?i.hasAudio:i.hasVideo;"audio"===e?i._trust_audio_stream_added_state_=!0:i._trust_video_stream_added_state_=!0,"audio"===e?(i._audio_added_=!0,void 0!==n&&(i._audioSSRC=n),void 0!==r&&(i._audioMid=r)):(i._video_added_=!0,void 0!==n&&(i._videoSSRC=n),void 0!==r&&(i._videoMid=r)),("audio"===e?i.hasAudio:i.hasVideo)&&!o&&(VT.info("[".concat(this._clientId,"] remote user ").concat(i.uid," published ").concat(e)),this.safeEmit(g_.USER_PUBLISHED,i,e)),this._p2pChannel.hasPendingRemoteMedia(i,e)&&(VT.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(i.uid," after reconnect.")),this._subscribe(i,e,!0).catch((e=>{VT.error("[".concat(this._clientId,"] resubscribe error"),e.toString())})))})),this._config=e,this._clientId=rE(5,"client-"),this.store=new RT(e.codec,e.audioCodec,e.mode,this._clientId),this.store.clientCreated(),e.proxyServer&&this.setProxyServer(e.proxyServer,!0),e.turnServer&&this.setTurnServer(e.turnServer,!0),VT.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(mT," build: ").concat(vT,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),e.clientRoleOptions)try{b_(e.clientRoleOptions),t=Object.assign({},e.clientRoleOptions)}catch(e){VT.warning("[".concat(this._clientId,"] ").concat(e.toString()))}this._statsCollector=new gU(this.store),this._statsCollector.onStatsException=(e,t,n)=>{VT.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(e,", msg: ").concat(t,", uid: ").concat(n)),this.safeEmit(g_.EXCEPTION,{code:e,msg:t,uid:n})},this._statsCollector.onUploadPublishDuration=(e,t,n,r)=>{const i=this._users.find((t=>t.uid===e));i&&eb.peerPublishStatus(this._sessionId,{subscribeElapse:r,audioPublishDuration:t,videoPublishDuration:n,peer:i._uintid})},this.store.useDataChannel=bC().supportDataChannel&&ST("SIGNAL_CHANNEL"),this.store.useP2P="p2p"===e.mode,this._gateway=new jN(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:e.websocketRetryConfig||mE,httpRetryConfig:e.httpRetryConfig||mE,forceWaitGatewayResponse:void 0===e.forceWaitGatewayResponse||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:t}),this._configDistribute=new SC,this.store.useP2P?(this._p2pChannel=new hU(this.store,this._statsCollector),this._handleP2PEvents()):this._p2pChannel=new cF(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async joinMeta(e,t,n,r,i){let o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];ET("JOIN_GATEWAY_USE_443PORT_ONLY",o),ET("JOIN_GATEWAY_USE_DUAL_DOMAIN",s);const a=this._gateway.signal.websocket;return a instanceof qI&&(a.use443PortOnly=o,a.tryDoubleDomain=s),async function(e,t,n){uv.get(e)||uv.set(e,[]),hv.get(e)||hv.set(e,t),pv.get(e)||pv.set(e,0);const r=uv.get(e),i=hv.get(e);if(!r||!i)throw new Error("concurrent: deferQueue or maxConcurrency is null");if(pv.get(e)===i){const e=dv();r.push(e),await e.promise}pv.set(e,pv.get(e)+1);for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];const c=await n(...s);return pv.set(e,pv.get(e)-1),pv.get(e)===i-1&&r.length>0&&(r[0].resolve(),r.shift()),0===pv.get(e)&&(uv.set(e,[]),hv.set(e,0),pv.set(e,0)),c}("client.join",ST("JOIN_MAX_CONCURRENCY"),this.join.bind(this),e,t,n,r,i)}async join(e,t,n,r,i){const o=++this._numberOfJoinCount;this.store.joinStart(),r&&(this.store.uid=r);const s=pT(),a=fT()?window.isSecureContext:"Browser Not Support";if(!fT()&&!s||!window.isSecureContext){const e="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";VT.warning(e)}const c=iE();"DISCONNECTED"===this.connectionState&&(this.store.avoidJoinStart=Math.round(Date.now()),VT.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart)));const l=eb.reportApiInvoke(c,{name:h_.JOIN,options:[e,t,n,r],states:{isHttps:s,isSecureContext:a},tag:p_.TRACER});eb.setAppId(e);try{if(!n&&null!==n)throw new kb(Hv.INVALID_PARAMS,"Invalid token: ".concat(n,". If you don not use token, set it to null"));n&&Jv(n,"token",1,2047),Jv(e,"appid",1,2047),xb(t),r&&Lb(r),i&&Jv(i,"optionalInfo",1,2047)}catch(e){throw l.onError(e),e}if(VT.info("[".concat(this._clientId,"] start join channel ").concat(t,", join number: ").concat(o)),this._leaveMutex.isLocked&&(VT.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),VT.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,"DISCONNECTED"!==this.connectionState){const e=new kb(Hv.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw l.onError(e),e}this._sessionId||(this._sessionId=c,this.store.sessionId=this._sessionId),this._gateway.state="CONNECTING";const d=Mz(Mz({},this._rtmConfig),{},{clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:"string"!=typeof r?r:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:n||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:i,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint},void 0!==this._remoteDefaultVideoStreamType&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(this._useLocalAccessPoint&&(d.setLocalAPVersion=this._setLocalAPVersion),"string"==typeof r&&(d.stringUid=r,this._uintUid?(d.uid=this._uintUid,this._uintUid=void 0):d.uid=0),"none"!==this._encryptionMode&&this._encryptionSecret){if(d.aesmode=this._encryptionMode,d.aespassword=await a_(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new kb(Hv.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(d.aessalt=this._encryptionSalt)}if(this._encryptDataStream&&("aes-128-gcm2"===this._encryptionMode||"aes-256-gcm2"===this._encryptionMode))if(this._encryptionSalt&&this._encryptionSecret)if(window.crypto.subtle){const e=new TextEncoder,t=ST("USE_PURE_ENCRYPTION_MASTER_KEY")?e.encode(d.appId+this._encryptionSecret+this._encryptionSecret):e.encode(d.appId+d.cname+this._encryptionSecret);this._encryptDataStreamIv=await async function(e,t,n){const r=await window.crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits","deriveKey"]),i="aes-128-gcm2"===e?128:256,o=await window.crypto.subtle.deriveBits({name:"PBKDF2",iterations:MT,hash:"SHA-256",salt:n},r,i+OT);return new Uint8Array(o).subarray(i/8)}(this._encryptionMode,t,J_(this._encryptionSalt)),this._encryptDataStreamKey=await async function(e,t,n){const r=await window.crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits","deriveKey"]),i="aes-128-gcm2"===e?128:256;return await window.crypto.subtle.deriveKey({name:"PBKDF2",iterations:MT,hash:"SHA-256",salt:n},r,{name:"AES-GCM",length:i},!0,["encrypt","decrypt"])}(this._encryptionMode,t,J_(this._encryptionSalt))}else a?VT.warning("[".concat(this._clientId,"] encrypt datastream must be running in a secure context, fallback to plain data stream")):VT.warning("[".concat(this._clientId,"] current browser do not support WebCrypto ,fallback to plain data stream")),this._encryptDataStream=!1;else this._encryptDataStream=!1,VT.debug("[".concat(this._clientId,"] no salt / secret, cannot support encrypt data stream, fallback to plain data stream"));this._startSession(this._sessionId,{channel:t,appId:e,stringUid:d.stringUid});const u=this._sessionId;setTimeout((()=>{"CONNECTING"===this.connectionState&&u===this._sessionId&&eb.joinChannelTimeout(this._sessionId,5)}),5e3);try{var h;let r;const i=d.cloudProxyServer;if(Rr(h=["proxy3","proxy4","proxy5"]).call(h,i)){const e=ST("PROXY_SERVER_TYPE3");Array.isArray(e)?d.proxyServer=e[0]:d.proxyServer=e}if(eb.setProxyServer(d.proxyServer),VT.setProxyServer(d.proxyServer),this.store.requestAPStart(),d.stringUid&&!d.uid){let e;[e,r]=await cv.all([pC(d.stringUid,d,this._axiosCancelSource.token,this._config.httpRetryConfig||mE,this.store),hC(d,this._axiosCancelSource.token,this._config.httpRetryConfig||mE,!0,this.store)]),VT.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(d.stringUid," => ").concat(e)),d.uid=e,r.gatewayInfo.uid=e,r.gatewayInfo.res.uid=e}else r=await hC(d,this._axiosCancelSource.token,this._config.httpRetryConfig||mE,!0,this.store);if(!this._joinAndNotLeaveYet)throw new kb(Hv.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this.store.requestAPEnd(),setTimeout((()=>{this._configDistribute.startGetConfigDistribute(d,this._axiosCancelSource.token),this._configDistribute.on(oI.UPDATE_BITRATE_LIMIT,(e=>{this._p2pChannel.updateBitrateLimit(e)}))}),0),this._key=n||e;const o=r.gatewayInfo,s=d.uid?d.uid:o.uid;this._joinInfo=Mz(Mz({},d),{},{cid:o.cid,uid:s,vid:o.vid,apResponse:o.res,uni_lbs_ip:o.uni_lbs_ip,gatewayAddrs:o.gatewayAddrs}),this.store.intUid=s;const a=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new kb(Hv.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));l.onSuccess(a),this._appId=e,this._channelName=d.cname,this._uid=a,this.store.uid=a,setTimeout((()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(wv()?"beforeunload":"pagehide",this._handleBeforeUnload)}),0);const c=d.stringUid?"string uid: ".concat(d.stringUid,",uid: ").concat(d.uid):"uid: ".concat(this._uid);return VT.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(t,",").concat(c)),setTimeout((()=>{VT.startUpload()}),5e3),this.store.joinEnd(),p=this,Rr(ib).call(ib,p)||ib.push(p),a}catch(e){const t=Array.isArray(e)?e[0]:e;throw t&&t.code===Hv.OPERATION_ABORTED?VT.warning("[".concat(this._clientId,"] join number: ").concat(o,", Joining channel failed, rollback"),t):VT.error("[".concat(this._clientId,"] join number: ").concat(o,", Joining channel failed, rollback"),t),t.code!==Hv.OPERATION_ABORTED&&this._numberOfJoinCount===o&&(this._gateway.state="DISCONNECTED",this._reset()),l.onError(t),t}var p}_joinGateway(){if(!this._joinInfo||!this._key)throw new kb(Hv.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!("disabled"!==this._joinInfo.cloudProxyServer||this._joinInfo.proxyServer||!ST("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then((e=>e)).catch((e=>{if(e.code===Hv.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,m_.FALLBACK),e;if(e.code===Hv.INIT_DATACHANNEL_TIMEOUT)return this._gateway.leave(!0,m_.FALLBACK),e;throw e})).then((e=>{if(e instanceof kb){if(e.code===Hv.INIT_WEBSOCKET_TIMEOUT){if(VT.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new kb(Hv.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const e=ST("PROXY_SERVER_TYPE3");if(Array.isArray(e))if(this._joinInfo.apUrl){const t=/^https?:\/\/(.+?)(\/.*)?$/.exec(this._joinInfo.apUrl)[1].split("."),n=t.slice(t.length-2).join(".");e.forEach((e=>{this._joinInfo&&Rr(e).call(e,n)&&(this._joinInfo.proxyServer=e)})),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=e[0])}else this._joinInfo.proxyServer=e[0];else this._joinInfo.proxyServer=e;const t=ST("LOG_UPLOAD_SERVER").match(/.+:(\d{1,5})$/);return t&&t[1]&&"443"!==t[1]&&VT.setProxyServer(this._joinInfo.proxyServer),"443"!==ST("STATS_COLLECTOR_PORT").toString()&&eb.setProxyServer(this._joinInfo.proxyServer),eb.reportApiInvoke(this._sessionId,{name:h_.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:p_.TRACER}).onSuccess(),this.safeEmit(g_.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),ST("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&this._joinInfo.turnServer.servers.forEach((e=>{"forceturn"in e&&(e.forceturn=!0)})),this._gateway.join(this._joinInfo,this._key)}if(VT.info("[".concat(this._clientId,"] join by datachannel timeout, fallback to websocket")),!this._joinInfo||!this._key)throw new kb(Hv.INVALID_OPERATION);return eb.reportApiInvoke(this._sessionId,{name:h_.DATACHANNEL_FAILBACK,options:[this.store.clientId],tag:p_.TRACER}).onSuccess(),this._joinGateway()}return e})).then((e=>e))}async leave(){VT.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(wv()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(e){const t=ib.indexOf(e);-1!==t&&ib.splice(t,1)}(this);const e=await this._leaveMutex.lock();if("DISCONNECTED"===this.connectionState)return VT.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void e();await this._gateway.leave("CONNECTED"!==this.connectionState),VT.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),e()}async publish(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!Array.isArray(e)){if(!(e instanceof dw))return this._publishDataChannel(e);e=[e]}if(0===e.length)throw new kb(Hv.INVALID_PARAMS,"param list is empty");const n=e;if("audience"===this._gateway.role)throw new kb(Hv.INVALID_OPERATION,"audience can not publish stream");for(const i of n){if(!(i instanceof dw))throw new kb(Hv.INVALID_PARAMS,"parameter is not local track");if(!i._enabled&&t)throw new kb(Hv.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(i.getTrackId()))}VT.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(n.map((e=>"".concat(e.getTrackId()," ")))));const r=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),t&&n.forEach((e=>{const t=this._configDistribute.getBitrateLimit();e instanceof SR&&t&&e.setBitrateLimit(t.uplink)}));try{await this._publishHighStream(n),VT.info("[".concat(this._clientId,"] Publish success, id ").concat(n.map((e=>"".concat(e.getTrackId()," ")))))}catch(e){throw VT.error("[".concat(this._clientId,"] publish error"),e.toString()),e}finally{r()}}async _publishDataChannel(e){Kv(e.id,"id",0,65535,!0),Yv(e.ordered,"ordered"),Jv(e.metadata,"metadata",0,512),VT.info("[".concat(this._clientId,"] Publishing datachannels, id ").concat(e.id));const t=await this._publishMutex.lock();try{if(-1!==this._p2pChannel.getAllDataChannels().findIndex((t=>t.id===e.id)))throw new kb(Hv.INVALID_PARAMS,"Invalid id: ".concat(e.id,". If you want to republish the datachannel, unpublish first"));if(!this._joinInfo||void 0===this._uid)throw new kb(Hv.INVALID_OPERATION,"Can't publish datachannel, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new kb(Hv.INVALID_OPERATION,"can not publish datachannel in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&ST("FORCE_TURN")&&!ST("TURN_ENABLE_TCP")&&!ST("TURN_ENABLE_UDP"))throw new kb(Hv.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");const t=new aD(e);if(await this._p2pChannel.publishDataChannel([t]),!this._p2pChannel.isP2PDisconnected()){if("number"!=typeof t._originDataChannelId)throw VT.error("[".concat(this._clientId,"] can not publish with mediaType datachannel, cannot get RTCDatachannel id")),new kb(Hv.CREATE_DATACHANNEL_ERROR);try{const n={streamId:e.id,ordered:e.ordered,maxRetransmits:ST("DATASTREAM_MAX_RETRANSMITS"),metadata:e.metadata,channelId:t._originDataChannelId};await this._gateway.publishDataChannel(this._uid,n,!0),await t._waitTillOpen()}catch(e){if(e.code!==Hv.DISCONNECT_P2P)throw e}}return VT.info("[".concat(this._clientId,"] Publish dataChannels success, id ").concat(t.id)),t}catch(e){throw VT.error("[".concat(this._clientId,"] publish datachannels error"),e.toString()),e}finally{t()}}async unpublish(e){if(!this._joinInfo||void 0===this._uid)throw new kb(Hv.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");let t=[];if(e)if(Array.isArray(e))t=e;else{if(!(e instanceof dw))return this._unpublishDataChannel([e]);t=[e]}else this.store.useP2P||await this._unpublishDataChannel(),t=this._p2pChannel.getAllTracks(!0);VT.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(t.map((e=>"".concat(e.getTrackId()," ")))," "));const n=await this._publishMutex.lock();try{if(this._p2pChannel instanceof hU){const e=await this._p2pChannel.unpublish(t);e&&await this._gateway.sendExtensionMessage(II.UNPUBLISH,{unpubMsg:e},!0)}else{const e=await this._p2pChannel.unpublish(t);e&&await this._gateway.unpublish(e,this._uid),VT.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(t.map((e=>"".concat(e.getTrackId())))))}}catch(e){throw VT.error("[".concat(this._clientId,"] unpublish error"),e.toString()),e}finally{n&&n()}}async _unpublishDataChannel(e){void 0!==e&&0!==e.length||(e=this._p2pChannel.getAllDataChannels()),VT.info("[".concat(this._clientId,"] Unpublish datachannels, datachannels ").concat(e.map((e=>"".concat(e.id," ")))," "));const t=await this._publishMutex.lock();try{const t=await this._p2pChannel.unpublishDataChannel(e);t&&await this._gateway.unpublishDataChannel(t),VT.info("[".concat(this._clientId,"] Unpublish dataChannel success,dataChannel ").concat(e.map((e=>"".concat(e.id)))))}catch(e){throw VT.error("[".concat(this._clientId,"] unpublish dataChannel error"),e.toString()),e}finally{t&&t()}}async subscribe(e,t,n){return"datachannel"===t?this._subscribeDataChannel(e,n):this._subscribe(e,t)}async presubscribe(e,t){if(qv(t,"mediaType",["audio","video"]),this._p2pChannel instanceof hU)throw new kb(Hv.INVALID_OPERATION,"can't presub at p2p mode");if(!this._joinInfo)throw new kb(Hv.INVALID_OPERATION,"can't presub when not join");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new kb(Hv.INVALID_OPERATION,"can't presub in ".concat(this.connectionState," state"));const n=t===aI.AUDIO,r=t===aI.VIDEO,i=await this._subscribeMutex.lock();try{const{ssrcId:i,ortc:o,rtxSsrcId:s,cname:a,uint_id:c}=await this._gateway.presubscribe(e,t,!0);if(null==i)throw new kb(Hv.UNEXPECTED_RESPONSE,"no ssrc id");let l=this._users.find((t=>t.uid===e));l||(l=new oU(e,c||e),l._is_pre_created=!0,this._users.push(l)),a&&(l._cname=a),l._uintid||(l._uintid=c||e),n&&(l._audioSSRC=i,l._audio_pre_subscribed=!0,o&&(l._audioOrtc=o)),r&&(l._videoSSRC=i,l._video_pre_subscribed=!0,o&&(l._videoOrtc=o),null!=s&&(l._rtxSsrcId=s)),VT.info("[".concat(this._clientId,"] presub succeed ssrc: ").concat(i)),await this._p2pChannel.subscribe(l,t,i,s,o);const d=n?l._audioTrack:l._videoTrack;if(!d)throw new kb(Hv.UNEXPECTED_ERROR,"can not find remote track in user");return n&&(l._trust_audio_stream_added_state_=!0,l._audio_added_=!0),r&&(l._trust_video_stream_added_state_=!0,l._video_added_=!0),d}catch(t){throw VT.error("[".concat(this._clientId,"] presub user ").concat(e," error"),t),t}finally{i()}}async _subscribeDataChannel(e,t){var n;if(Kv(t,"channelId",0,65535,!0),!this._joinInfo)throw new kb(Hv.INVALID_OPERATION,"Can't subscribe datachannel, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new kb(Hv.INVALID_OPERATION,"Can't subscribe datachannel in ".concat(this.connectionState," state"));if(!this._users.find((t=>t===e)))throw VT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),new kb(Hv.INVALID_REMOTE_USER,"user is not in the channel");if(!e.hasAudio&&!e.hasVideo&&0===e._dataChannels.length)throw VT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),new kb(Hv.INVALID_REMOTE_USER,"user is not published");const r=null===(n=e._dataChannels)||void 0===n?void 0:n.find((e=>e.id===t));if(!r)throw VT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, remote datachannel is not published")),new kb(Hv.REMOTE_USER_IS_NOT_PUBLISHED);const i=await this._subscribeMutex.lock();VT.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: datachannel"));try{const n=await this._p2pChannel.subscribeDataChannel(e,[r]);if(n&&Rr(n).call(n,r.id))try{var o;if("number"!=typeof r._originDataChannelId)throw VT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, cannot get RTCDatachannel")),new kb(Hv.CREATE_DATACHANNEL_ERROR);const t={id:r.id,datachannelId:r._originDataChannelId,ordered:r.ordered,maxRetransmits:r.maxRetransmits,metadata:null!==(o=r.metadata)&&void 0!==o?o:""};await this._gateway.subscribeDataChannel(e.uid,t,!0),await r._waitTillOpen()}catch(t){if((null==t?void 0:t.code)!==Hv.WS_ABORT)throw await this._p2pChannel.unsubscribeDataChannel(e,[r]),t;await this._p2pChannel.unsubscribeDataChannel(e,[r]),this._p2pChannel.setPendingRemoteDataChannel(e,r.id)}return VT.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: datachannel")),r}finally{i()}}async _p2pSubscribe(e,t,n){if(qv(t,"mediaType",["audio","video"]),!this._joinInfo)throw new kb(Hv.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new kb(Hv.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find((t=>t===e))){const t=new kb(Hv.INVALID_REMOTE_USER,"user is not in the channel");throw VT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),t}if(!e.hasAudio&&!e.hasVideo){const t=new kb(Hv.INVALID_REMOTE_USER,"user is not published");throw VT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),t}if(!n&&("audio"===t&&!e.hasAudio||"video"===t&&!e.hasVideo)){const n=new kb(Hv.REMOTE_USER_IS_NOT_PUBLISHED);throw VT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),n}const r=await this._subscribeMutex.lock();VT.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const n="audio"===t?e._audioSSRC:e._videoSSRC,r="audio"===t?e._audioMid:e._videoMid;this.store.subscribe(e.uid,t,Date.now()),this._p2pChannel instanceof hU&&await this._p2pChannel.subscribe(e,t,n,r)}catch(e){throw e}VT.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{VT.warning("[".concat(this._clientId,"] auto set fallback failed"),e)}));const n="audio"===t?e._audioTrack:e._videoTrack;if(!n)throw new kb(Hv.UNEXPECTED_ERROR,"can not find remote track in user object");return n}catch(t){throw VT.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),t),t}finally{r()}}async _subscribe(e,t,n){if(this._p2pChannel instanceof hU)return this._p2pSubscribe(e,t);if(qv(t,"mediaType",["audio","video"]),!this._joinInfo)throw new kb(Hv.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new kb(Hv.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find((t=>t===e))){const t=new kb(Hv.INVALID_REMOTE_USER,"user is not in the channel");throw VT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),t}if(!e.hasAudio&&!e.hasVideo){const t=new kb(Hv.INVALID_REMOTE_USER,"user is not published");throw VT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),t}if(!(n||("audio"!==t||e.hasAudio&&void 0!==e._audioSSRC)&&("video"!==t||e.hasVideo&&void 0!==e._videoSSRC))){const n=new kb(Hv.REMOTE_USER_IS_NOT_PUBLISHED);throw VT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),n}let r="audio"===t?e._audioSSRC:e._videoSSRC,i="audio"===t?e._audioOrtc:e._videoOrtc,o="video"===t?e._rtxSsrcId:void 0,s={stream_type:"audio"===t?aI.AUDIO:aI.VIDEO,ssrcId:r};const a=await this._subscribeMutex.lock();VT.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const a="audio"===t?e._audioSSRC:e._videoSSRC;void 0!==a&&a!==r&&(r=a,i="audio"===t?e._audioOrtc:e._videoOrtc,o="video"===t?e._rtxSsrcId:void 0,s={stream_type:"audio"===t?aI.AUDIO:aI.VIDEO,ssrcId:r}),SP.markSubscribeStart(this.store.clientId,r),this.store.subscribe(e.uid,t,Date.now()),await this._p2pChannel.subscribe(e,t,r,o,i);try{await this._gateway.subscribe(e.uid,s,!0)}catch(n){if((null==n?void 0:n.code)!==Hv.WS_ABORT)throw await this._p2pChannel.unsubscribe(e,t),n;await this._p2pChannel.unsubscribe(e,t,!0),this._p2pChannel.setPendingRemoteMedia(e,t)}this.store.subscribe(e.uid,t,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,e,t)}catch(n){throw this._p2pChannel.reportSubscribeEvent(!1,null==n?void 0:n.code,e,t),n}VT.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{VT.warning("[".concat(this._clientId,"] auto set fallback failed"),e)}));const a="audio"===t?e._audioTrack:e._videoTrack;if(!a)throw new kb(Hv.UNEXPECTED_ERROR,"can not find remote track in user object");return a}catch(t){throw VT.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),t),t}finally{a()}}async massSubscribe(e){if(Xv(e,"subscribeList"),!this._joinInfo)throw new kb(Hv.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new kb(Hv.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const t=Date.now(),n=new Map,r=await this._subscribeMutex.lock();VT.info("[".concat(this._clientId,"]start massSubscribe user ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; ")));const i=(e=[...e]).map((e=>{let{user:t,mediaType:n}=e;return{user:t,mediaType:n}})),o=await this._p2pChannel.globalLock();try{var s;for(let t=e.length-1;t>=0;t--){const r=e[t],{user:o,mediaType:s}=r;if(qv(s,"mediaType",["audio","video"]),!o){const e=new kb(Hv.INVALID_PARAMS,"user property does not exist in subscribeList item");throw VT.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),e}if(!this._users.find((e=>e===o))){const n=new kb(Hv.INVALID_REMOTE_USER,"user is not in the channel");VT.error("[".concat(this._clientId,"] can not massSubscribe ").concat(o.uid,", this user is not in the channel")),i[t].error=n,e.splice(t,1);continue}if("audio"===s&&(!o.hasAudio||void 0===o._audioSSRC)||"video"===s&&(!o.hasVideo||void 0===o._videoSSRC)){const n=new kb(Hv.REMOTE_USER_IS_NOT_PUBLISHED);VT.error("[".concat(this._clientId,"] can not subscribe ").concat(o.uid," with mediaType ").concat(s,", remote user is not published")),i[t].error=n,e.splice(t,1);continue}const a=Zb.Video|Zb.LwoVideo,c=n.get(o);if(c){if("video"===s?c&a:c&Zb.Audio){e.splice(t,1),VT.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(o.uid,", mediaType:").concat(s," twice"));continue}n.set(o,c|("video"===s?a:Zb.Audio))}else n.set(o,"video"===s?a:Zb.Audio)}for(let t=e.length-1;t>=0;t--){const r=e[t],{user:i,mediaType:o}=r,s=Zb.Video|Zb.LwoVideo;if(this._p2pChannel.hasRemoteMedia(i,o)){await this._p2pChannel.unmuteRemoteNoLock(i,o);const r=n.get(i);n.set(i,"video"===o?r^s:r^Zb.Audio),e.splice(t,1)}}this.store.massSubscribe(e.map((e=>({userId:e.user.uid,type:e.mediaType}))),t);const r=z_(s=Array.from(n.entries())).call(s,((e,t)=>{let[n,r]=t;if(0===r)return e;const i={stream_id:n.uid,stream_type:r};return r&Zb.Audio&&(i.audio_ssrc=n._audioSSRC),r&Zb.Video&&(i.video_ssrc=n._videoSSRC),e.push(i),e}),[]);try{e.length>0&&await this._p2pChannel.massSubscribeNoLock(e.map((e=>{let{user:t,mediaType:n}=e;return{user:t,mediaType:n,ssrcId:n===aI.VIDEO?t._videoSSRC:t._audioSSRC,rtxSsrcId:n===aI.VIDEO?t._rtxSsrcId:void 0}})));const n=new Map;if(r.length>0){const e=await this._gateway.subscribeAll(r,!0);((null==e?void 0:e.users)||[]).forEach((e=>{let{stream_id:t,video_error_code:r,audio_error_code:i,error_code:o}=e;(r||i||o)&&n.set(t,{video_error_code:r,audio_error_code:i,error_code:o})}))}if(Array.from(n.entries()).length>0){const e=[];Array.from(n.entries()).forEach((t=>{let[n,r]=t;const i=this.remoteUsers.find((e=>e.uid===n));if(i){let t;r.error_code||r.video_error_code&&r.audio_error_code?t=void 0:r.video_error_code?t=aI.VIDEO:r.audio_error_code&&(t=aI.AUDIO),e.push({user:i,mediaType:t})}})),e.length>0&&await this._p2pChannel.massUnsubscribeNoLock(e)}for(const e of i){const t=n.get(e.user.uid);if(t){const n=t.error_code||"audio"===e.mediaType&&t.audio_error_code||"video"===e.mediaType&&t.video_error_code;if(n){const t=xI(n);VT.error("user:".concat(e.user.uid," mediaType:").concat(e.mediaType," has massSubscribe error ").concat(t.desc)),e.error=new kb(Hv.SUBSCRIBE_FAILED,"code ".concat(n,": ").concat(t.desc))}}e.error||("video"===e.mediaType?e.track=e.user.videoTrack:e.track=e.user.audioTrack)}return this.store.massSubscribe(i.filter((e=>!e.error)).map((e=>({userId:e.user.uid,type:e.mediaType}))),void 0,Date.now()),i.forEach((e=>{var n;eb.subscribe(this.store.sessionId,{succ:!!e.error,ec:(null===(n=e.error)||void 0===n?void 0:n.code)||null,video:e.mediaType===aI.VIDEO,audio:e.mediaType===aI.AUDIO,peerid:e.user.uid,subscribeRequestid:e.mediaType===aI.VIDEO?e.user._videoSSRC:e.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-t)},!0)})),VT.info("[".concat(this._clientId,"] massSubscribe success ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; "))),i}catch(t){throw await this._p2pChannel.massUnsubscribeNoLock(e),t}}finally{o(),r()}}async unsubscribe(e,t,n){if(t||this.store.useP2P){if("datachannel"===t)return this._unsubscribeDataChannel(e,n)}else await this._unsubscribeDataChannel(e,n);if(t&&qv(t,"mediaType",["audio","video"]),!this._joinInfo)throw new kb(Hv.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find((t=>t===e))){const t=new kb(Hv.INVALID_REMOTE_USER,"user is not in the channel");throw VT.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),t}VT.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: ").concat(t));const r=await this._subscribeMutex.lock();try{if(this._p2pChannel instanceof hU)await this._p2pChannel.unsubscribe(e,t);else{const n=await this._p2pChannel.unsubscribe(e,t);n&&await this._gateway.unsubscribe(n,e.uid),t&&"audio"!==t||(e._audio_pre_subscribed=!1),t&&"video"!==t||(e._video_pre_subscribed=!1),e._is_pre_created&&G_(this._users,e),VT.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(e.uid,", mediaType: ").concat(t))}}catch(t){if(t.code===Hv.DISCONNECT_P2P)return void VT.warning("disconnecting p2p, abort unsubscribe request.");throw VT.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),t.toString()),t}finally{r()}}async _unsubscribeDataChannel(e,t){if(t&&Kv(t,"id",0,65535,!0),!this._joinInfo)throw new kb(Hv.INVALID_OPERATION,"Can't unsubscribe datachannel, haven't joined yet!");if(!this._users.find((t=>t===e))){const t=new kb(Hv.INVALID_REMOTE_USER,"user is not in the channel");throw VT.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),t}let n;if("number"==typeof t){const r=e._dataChannels.find((e=>e.id===t));r&&(n=[r])}else n=e._dataChannels;if(void 0===n){const n=new kb(Hv.REMOTE_USER_IS_NOT_PUBLISHED);throw VT.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid," with channelId ").concat(t,", remote datachannel is not published")),n}VT.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(n.map((e=>e.id))));try{const t=await this._p2pChannel.unsubscribeDataChannel(e,n);t&&await this._gateway.unsubscribeDataChannel(t,e.uid),VT.info("[".concat(this._clientId,"] unsubscribe datachannel success uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(t))}catch(t){if(t.code===Hv.DISCONNECT_P2P)return void VT.warning("disconnecting p2p, abort unsubscribe request.");throw VT.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),t.toString()),t}}async massUnsubscribe(e){if(Xv(e,"unsubscribeList"),!this._joinInfo)throw new kb(Hv.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");VT.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join())),e=[...e];const t=new Map;for(let n=e.length-1;n>=0;n--){const{user:r,mediaType:i}=e[n];if(!r){const e=new kb(Hv.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw VT.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),e}if(qv(i,"mediaType",["video","audio",void 0]),!this._users.find((e=>e===r))){VT.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(r.uid,", user is not in the channel")),e.splice(n,1);continue}const o=Zb.Video|Zb.LwoVideo;if(t.has(r)){const s=t.get(r);let a;switch(i){case"video":a=s&o;break;case"audio":a=s&Zb.Audio;break;default:a=s&(Zb.Audio|o)}if(a){VT.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(r.uid,",mediaType:").concat(i," twice.")),e.splice(n,1);continue}i?"audio"===i?t.set(r,s|Zb.Audio):"video"===i&&t.set(r,s|o):t.set(r,s|Zb.Audio|o)}else i?"audio"===i?t.set(r,Zb.Audio):"video"===i&&t.set(r,o):t.set(r,Zb.Audio|o)}try{const t=await this._p2pChannel.massUnsubscribe(e);t&&await this._gateway.massUnsubscribe(t),VT.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join()))}catch(e){if(e.code===Hv.DISCONNECT_P2P)return void VT.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw VT.error("[".concat(this._clientId,"] massUnsubscribe error"),e.toString()),e}}async setLowStreamParameter(e){!function(e){if(!e)throw new Wv(Hv.INVALID_PARAMS);Zv(e.width)||Qv(e.width,"streamParameter.width"),Zv(e.height)||Qv(e.height,"streamParameter.height"),Zv(e.framerate)||Qv(e.framerate,"streamParameter.framerate"),Zv(e.bitrate)||Kv(e.bitrate,"streamParameter.bitrate")}(e),(!e.width&&e.height||e.width&&!e.height)&&VT.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),VT.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(e));const t=this._configDistribute.getLowStreamConfigDistribute();if(t&&t.bitrate&&e.bitrate&&t.bitrate<e.bitrate&&(e.bitrate=t.bitrate),this._lowStreamParameter=e,this._isDualStreamEnabled)return this._p2pChannel.updateVideoStreamParameter(e,dI.LocalVideoLowTrack)}async enableDualStream(){if(!bC().supportDualStream)throw eb.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new kb(Hv.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new kb(Hv.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(e){throw eb.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),e}this._isDualStreamEnabled=!0,eb.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),VT.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new kb(Hv.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(dI.LocalVideoLowTrack))try{const e=await this._p2pChannel.unpublishLowStream();e&&await this._gateway.unpublish(e,this._joinInfo.stringUid||this._joinInfo.uid)}catch(e){throw eb.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),e}this._isDualStreamEnabled=!1,eb.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),VT.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(e,t){if(function(e){qv(e,"role",["audience","host"])}(e),t&&b_(t),"rtc"===this.mode||"p2p"===this.mode)throw VT.warning("[".concat(this._clientId,"]").concat(this.mode," mode can not use setClientRole")),new kb(Hv.INVALID_OPERATION,"".concat(this.mode," mode can not use setClientRole"));if(t&&t.level&&"host"===e)throw new kb(Hv.INVALID_OPERATION,"host mode can not set audience latency level");if("audience"===e&&this._p2pChannel.hasLocalMedia())throw new kb(Hv.INVALID_OPERATION,"can not set client role to audience when publishing stream");await this._gateway.setClientRole(e,t),this._config.role=e,VT.info("[".concat(this._clientId,"] set client role to ").concat(e,", level: ").concat(t&&t.level))}getRemoteInboundOffset(){var e;const t=null===(e=this._p2pChannel.getStats())||void 0===e?void 0:e.audioSend[0];if(!t||!t.timestamp)return 0;const n=t.timestamp-Date.now();return Math.abs(n)>1e3+t.rttMs+100?this.ntpAlignErrorCount+=1:this.ntpAlignErrorCount=0,this.ntpAlignErrorCount>=3?n:0}getNtpWallTimeInMs(){return"visible"===document.visibilityState&&(this.remoteInboundOffset=this.getRemoteInboundOffset()),this.remoteInboundOffset+Date.now()+this._gateway.ntpOffset}setProxyServer(e,t){if(Jv(e,"proxyServer"),!t){if("DISCONNECTED"!==this.connectionState)throw new kb(Hv.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new kb(Hv.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=e,eb.setProxyServer(this._proxyServer),VT.setProxyServer(this._proxyServer),VT.info("[".concat(this._clientId,"] Set proxy server ").concat(t?"by initialize call":""," success."))}setTurnServer(e,t){if(Array.isArray(e)||(e=[e]),!t){if("DISCONNECTED"!==this.connectionState)throw new kb(Hv.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new kb(Hv.INVALID_OPERATION,"You have already set the proxy")}if(S_(e))return this._turnServer={servers:e,mode:"original-manual"},void VT.info("[".concat(this._clientId,"] Set original turnserver ").concat(t?"by initialize call":""," success: ").concat(e.map((e=>e.urls)).join(","),"."));e.forEach((e=>T_(e))),this._turnServer={servers:e,mode:"manual"},VT.info("[".concat(this._clientId,"] Set turnserver ").concat(t?"by initialize call":""," success."))}setLicense(e){if("DISCONNECTED"!==this.connectionState)throw new kb(Hv.INVALID_OPERATION,"you should set license before join channel");if(Jv(e,"license",32,32),!/^[A-Za-z\d]+$/.test(e))throw new kb(Hv.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=e,VT.info("[".concat(this._clientId,"] set license success"),e)}startProxyServer(e){if("DISCONNECTED"!==this.connectionState)throw new kb(Hv.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint)throw new kb(Hv.INVALID_OPERATION,"You have already set the proxy");const t=[3,4,5];let n;switch(void 0===e&&(e=3),e){case 1:case 2:throw new kb(Hv.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:n="proxy3";break;case 4:n="proxy4";break;case 5:n="proxy5";break;default:throw new kb(Hv.INVALID_PARAMS,"proxy server mode must be ".concat(t.join("|")))}this._cloudProxyServerMode=n,this.store.cloudProxyServerMode=n,VT.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if("DISCONNECTED"!==this.connectionState)throw new kb(Hv.INVALID_OPERATION,"Stop proxy server after leave channel");eb.setProxyServer(),VT.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",VT.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(e){if(!e.accessPoints)throw new kb(Hv.INVALID_PARAMS,"accessPoints is required.");Xv(e.accessPoints.serverList,"accessPoints.serverList"),Jv(e.accessPoints.domain,"accessPoints.domain");const t=(e,t)=>{Kv(e,t,0,65535,!0)};let n=443;if(e.accessPoints.port&&(t(e.accessPoints.port,"accessPoints.port"),n=e.accessPoints.port),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new kb(Hv.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");ST("CLOSE_AFB_FOR_LOCAL_AP")&&(ET("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),ET("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const r=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,i=e.accessPoints.domain,o=e.accessPoints.serverList.map((e=>r.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(i):e)),s=o.map((e=>"".concat(e,":").concat(n)));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,ET("WEBCS_DOMAIN",s),ET("WEBCS_DOMAIN_BACKUP_LIST",s),ET("GATEWAY_DOMAINS",[i]),e.report&&e.report.hostname&&Array.isArray(e.report.hostname)&&e.report.hostname.length?(Xv(e.report.hostname,"report.hostname"),ET("EVENT_REPORT_DOMAIN",e.report.hostname[0]),ET("EVENT_REPORT_BACKUP_DOMAIN",e.report.hostname[1]||e.report.hostname[0])):(ET("EVENT_REPORT_DOMAIN",o[0]),ET("EVENT_REPORT_BACKUP_DOMAIN",o[1]||o[0]));let a=6443;e.report&&e.report.port&&(t(e.report.port,"report.port"),a=e.report.port),ET("STATS_COLLECTOR_PORT",a),e.report?ET("ENABLE_EVENT_REPORT",!0):ET("ENABLE_EVENT_REPORT",!1);let c="";e.log&&e.log.hostname&&Array.isArray(e.log.hostname)&&e.log.hostname.length?(Xv(e.log.hostname,"log.hostname"),c=e.log.hostname[0]):c=o[0];let l=6444;e.log&&e.log.port&&(t(e.log.port,"log.port"),l=e.log.port),ET("LOG_UPLOAD_SERVER","".concat(c,":").concat(l));let d=[];e.cds&&e.cds.hostname&&Array.isArray(e.cds.hostname)&&e.cds.hostname.length?(Xv(e.cds.hostname,"cds.hostname"),d=e.cds.hostname):d=o;let u=443;e.cds&&e.cds.port&&(t(e.cds.port,"cds.port"),u=e.cds.port),ET("CDS_AP",d.map((e=>"".concat(e,":").concat(u)))),e.cds?ET("ENABLE_CONFIG_DISTRIBUTE",!0):ET("ENABLE_CONFIG_DISTRIBUTE",!1),VT.info("set local access point v2 success")}setLocalAccessPoints(e,t){if(Xv(e,"serverList"),Jv(t,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new kb(Hv.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const n=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=e.map((e=>n.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(t):e)),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,ET("WEBCS_DOMAIN",e),ET("WEBCS_DOMAIN_BACKUP_LIST",e),ET("GATEWAY_DOMAINS",[t]),ET("EVENT_REPORT_DOMAIN",e[0]),ET("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),ET("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),VT.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(e){if(qv(e,"streamType",[0,1]),this._remoteDefaultVideoStreamType=e,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(e),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(e){throw VT.error("[".concat(this._clientId,"] set default remote video stream type error"),e.toString()),e}else VT.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(e))}async setRemoteVideoStreamType(e,t){qv(t,"streamType",[0,1]);try{await this._gateway.setRemoteVideoStreamType(e,t),setTimeout((()=>{const t=this._users.find((t=>t.uid===e));t&&t.videoTrack&&t.videoTrack.updateMediaStreamTrackResolution()}),2e3)}catch(e){throw VT.error("[".concat(this._clientId,"] set remote video stream type error"),e.toString()),e}VT.info("[".concat(this._clientId,"] set remote ").concat(e," video stream type to ").concat(t)),this._remoteStreamTypeCacheMap.set(e,t)}async setStreamFallbackOption(e,t){qv(t,"fallbackType",[0,1,2]);try{await this._gateway.setStreamFallbackOption(e,t)}catch(e){throw VT.error("[".concat(this._clientId,"] set stream fallback option"),e.toString()),e}VT.info("[".concat(this._clientId,"] set remote ").concat(e," stream fallback type to ").concat(t)),this._streamFallbackTypeCacheMap.set(e,t)}setEncryptionConfig(e,t,n,r){!function(e){qv(e,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(e),Jv(t,"secret");const i=["aes-128-gcm2","aes-256-gcm2"];if(Rr(i).call(i,e)){if(!n||!(n instanceof Uint8Array&&32===n.length))throw new kb(Hv.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(n)throw new kb(Hv.INVALID_PARAMS,"current encrypt mode does not need salt");if(r){if(Yv(r,"encryptDataStream"),!Rr(i).call(i,e))throw new kb(Hv.INVALID_PARAMS,"current encrypt mode does not support data stream");this._encryptDataStream=!0}new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(t)||VT.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),this._encryptionMode=e,this._encryptionSecret=t,n&&(this._encryptionSalt=X_(n))}async renewToken(e){if(Jv(e,"token",1,2047),!this._key||!this._joinInfo)throw new kb(Hv.INVALID_OPERATION,"renewToken should not be called before user join");const t=this._key;this._key=e,this._joinInfo&&(this._joinInfo.token=e);const n=await this._renewTokenMutex.lock();try{if(ST("USE_NEW_TOKEN")){VT.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));const t=await vC(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||mE);VT.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:e,ticket:t})}else VT.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:e});VT.debug("[".concat(this._clientId,"] renewToken success"))}catch(e){throw this._key=t,this._joinInfo.token=t,VT.error("[".concat(this._clientId,"] renewToken failed"),e.toString()),e}finally{n()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?VT.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval((()=>{const e=this._p2pChannel.getAudioLevels();this.safeEmit(g_.VOLUME_INDICATOR,e)}),ST("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){const e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}async startLiveStreaming(e,t){if(!t){if("h264"!==this.codec)throw new kb(Hv.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new kb(Hv.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e))throw new kb(Hv.LIVE_STREAMING_TASK_CONFLICT);const n=t?Sb.TRANSCODE:Sb.RAW;return this._createLiveStreamingClient(n).startLiveStreamingTask(e,n)}setLiveTranscoding(e){return this._createLiveStreamingClient(Sb.TRANSCODE).setTranscodingConfig(e)}async stopLiveStreaming(e){const t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter((t=>t&&t.hasUrl(e)));if(!t.length)throw new kb(Hv.INVALID_PARAMS,"can not find live streaming url to stop");await cv.all(t.map((t=>t&&t.stopLiveStreamingTask(e))))}async addInjectStreamUrl(e,t){if(!this._joinInfo)throw new kb(Hv.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const n=this._createLiveStreamingClient(Sb.INJECT);n.setInjectStreamConfig(t,0),await n.startLiveStreamingTask(e,Sb.INJECT)}async removeInjectStreamUrl(){var e;const t=this._createLiveStreamingClient(Sb.INJECT),n=Array.from(Ob(e=t.streamingTasks).call(e)).find((e=>e.mode===Sb.INJECT));if(!this._joinInfo||!n)throw new kb(Hv.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");await t.stopLiveStreamingTask(n.url)}async startChannelMediaRelay(e){IU(e);const t=this._createChannelMediaRelayClient();await t.startChannelMediaRelay(e)}async updateChannelMediaRelay(e){IU(e);const t=this._createChannelMediaRelayClient();await t.updateChannelMediaRelay(e)}async stopChannelMediaRelay(){const e=this._createChannelMediaRelayClient();await e.stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}async sendStreamMessage(e){var t;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new kb(Hv.INVALID_OPERATION,"can not send data stream, not joined");if(("string"==typeof e||e instanceof Uint8Array)&&(e={payload:e}),"string"==typeof e.payload){const t=new TextEncoder;e.payload=t.encode(e.payload)}let r=!1;if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Rr(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)&&(r=!0,e.payload=await async function(e,t,n){var r;const i=z_(r=Array.from(n)).call(r,((e,t)=>e+t),0),o={serverTs:0,seq:kT++,length:n.length,checkSum:i},s=new Uint8Array(dE(i,2)),a=new ArrayBuffer(DT),c=new DataView(a);c.setUint32(0,o.serverTs),c.setUint16(4,o.seq),c.setUint16(6,o.length),c.setUint16(8,o.checkSum);const l=16-n.length%16;n=Z_(n,new Uint8Array(l));const d=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:e,tagLength:AT,additionalData:s},t,n);return Z_(new Uint8Array(a),new Uint8Array(d))}(this._encryptDataStreamIv,this._encryptDataStreamKey,e.payload)),new Blob([e.payload]).size>1024)throw new kb(Hv.INVALID_PARAMS,r?"encrypted stream message out of range.":"stream message out of range.");return this._gateway.signal.request(mb.DATA_STREAM,{payload:X_(e.payload),syncWithAudio:e.syncWithAudio,sendTs:Date.now()-Sz},!n)}sendMetadata(e){if(!this._joinInfo)throw new kb(Hv.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new kb(Hv.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(mb.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:X_(e)})}async sendCustomReportMessage(e){if(Array.isArray(e)||(e=[e]),e.forEach(HT),!this._joinInfo)throw new kb(Hv.INVALID_OPERATION,"can not send custom report, not joined");await eb.sendCustomReportMessage(this._joinInfo.sid,e)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(e,t){qv(t.spatialLayer,"spatialLayer",[0,1,2,3]),qv(t.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(e){throw VT.error("[".concat(this._clientId,"] pick SVC layer failed"),e.toString()),e}}async setRTMConfig(e){const{apRTM:t=!1,rtmFlag:n}=e;if(Yv(t,"apRTM"),Kv(n,"rtmFlag",0),this._rtmConfig.apRTM=t,this._rtmConfig.rtmFlag=n,VT.debug("[".concat(this._clientId,"] setRTMconfig ").concat(JSON.stringify(e)," in ").concat(this.connectionState," state")),("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState)&&this._joinInfo)return this._joinInfo.apRTM=t,this._joinInfo.rtmFlag=n,this._gateway.setRTM2Flag(n)}_reset(){if(VT.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=oT.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._encryptDataStreamKey=null,this._encryptDataStreamIv=null,this._pendingPublishedUsers=[],this._users.forEach((e=>{e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy(),e._dataChannels&&(e._dataChannels.forEach((e=>e._close())),e._dataChannels.length=0)})),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),"fallback"===this._cloudProxyServerMode&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new pE("client-publish"),this._subscribeMutex=new pE("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch(e){}if(this._moderation)try{this.setImageModeration(!1)}catch(e){}}_startSession(e,t){var n;const r=e||iE();e?VT.debug("[".concat(this._clientId,"] new Session ").concat(r)):VT.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(r));const i=e?"":this._sessionId||"";this._sessionId=r,this.store.sessionId=r;const o={lts:(new Date).getTime(),mode:this.mode,stringUid:(null==t?void 0:t.stringUid)||(null===(n=this._joinInfo)||void 0===n?void 0:n.stringUid),channelProfile:"live"===this.mode?1:0,channelMode:0,isABTestSuccess:Number(this._configDistribute.isSuccess),lsid:i,clientRole:"audience"===this.role?2:1};t?eb.sessionInit(this._sessionId,Mz({cname:t.channel,appid:t.appId},o)):this._joinInfo?eb.sessionInit(this._sessionId,Mz({cname:this._joinInfo.cname,appid:this._joinInfo.appId},o)):this._gateway.joinInfo&&eb.sessionInit(this._sessionId,Mz({cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId},o)),this._joinInfo&&(this._joinInfo.sid=r),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=r)}async _publishHighStream(e){if(!this._joinInfo||void 0===this._uid)throw new kb(Hv.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new kb(Hv.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&ST("FORCE_TURN")&&!ST("TURN_ENABLE_TCP")&&!ST("TURN_ENABLE_UDP"))throw new kb(Hv.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");VT.debug("[".concat(this._clientId,"] publish high stream"));try{const n=await this._p2pChannel.publish(e,this._isDualStreamEnabled,this._lowStreamParameter);if(this._p2pChannel instanceof hU){const t=(await n.next()).value;if(t){try{await this._gateway.sendExtensionMessage(II.PUBLISH,t,!0)}catch(e){throw n.throw(e),e}await n.next()}this._p2pChannel.reportPublishEvent(!0,null)}else{const r=(await n.next()).value;if(r){var t;let i;try{i=await this._gateway.publish(this._uid,r,!0)}catch(e){if(e.code!==Hv.DISCONNECT_P2P)throw n.throw(e),e}await n.next((null===(t=i)||void 0===t?void 0:t.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const t of e)t instanceof SR&&t._encoderConfig&&this._gateway.setVideoProfile(t._encoderConfig),!t.muted&&t.enabled||await this._p2pChannel.muteLocalTrack(t)}}catch(t){if(this._p2pChannel.reportPublishEvent(!1,null==t?void 0:t.code,e),(null==t?void 0:t.code)===Hv.WS_ABORT)return;throw t}}async _publishLowStream(){if(!this._joinInfo||void 0===this._uid)throw new kb(Hv.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new kb(Hv.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));VT.debug("[".concat(this._clientId,"] publish low stream"));const e=this._configDistribute.getLowStreamConfigDistribute();e&&e.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&e.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=e.bitrate));try{const e=await this._p2pChannel.publishLowStream(this._lowStreamParameter),n=(await e.next()).value;if(n){var t;let r;try{r=await this._gateway.publish(this._uid,n,!0)}catch(t){if(t.code!==Hv.DISCONNECT_P2P)throw e.throw(t),t}e.next((null===(t=r)||void 0===t?void 0:t.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(e){if(this._p2pChannel.reportPublishEvent(!1,null==e?void 0:e.code,void 0,!0),(null==e?void 0:e.code)===Hv.WS_ABORT)return;throw e}}_createLiveStreamingClient(e){if(!this._joinInfo||!this._appId)return new kb(Hv.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const t=()=>new TU(this._joinInfo,this._config.websocketRetryConfig||mE,this._config.httpRetryConfig||mE),n=e=>{e.onLiveStreamError=(e,t)=>{eb.reportApiInvoke(this._sessionId,{name:h_.ON_LIVE_STREAM_ERROR,options:[e,t],tag:p_.TRACER}).onSuccess(),this.safeEmit(g_.LIVE_STREAMING_ERROR,e,t)},e.onLiveStreamWarning=(e,t)=>{eb.reportApiInvoke(this._sessionId,{name:h_.ON_LIVE_STREAM_WARNING,options:[e,t],tag:p_.TRACER}).onSuccess(),this.safeEmit(g_.LIVE_STREAMING_WARNING,e,t)},e.on(Bb.REQUEST_WORKER_MANAGER_LIST,((e,t,n)=>{if(!this._joinInfo)return n(new kb(Hv.INVALID_OPERATION,"can not find join info to get worker manager"));gC(e,this._joinInfo,this._axiosCancelSource.token,mE).then(t).catch(n)}))};switch(e){case Sb.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=t(),n(this._liveRawStreamingClient)),this._liveRawStreamingClient;case Sb.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=t(),n(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case Sb.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=t(),this._injectStreamingClient.on(Bb.REQUEST_WORKER_MANAGER_LIST,((e,t,n)=>{if(!this._joinInfo)return n(new kb(Hv.INVALID_OPERATION,"can not find join info to get worker manager"));gC(e,this._joinInfo,this._axiosCancelSource.token,mE).then(t).catch(n)})),this._injectStreamingClient.onInjectStatusChange=(e,t,n)=>{this.safeEmit(g_.INJECT_STREAM_STATUS,e,t,n)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){if(!this._joinInfo)return new kb(Hv.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){const{sendResolutionWidth:e,sendResolutionHeight:t}=this.getLocalVideoStats(),n={width:e,height:t};this._channelMediaRelayClient=new CU(this._joinInfo,this._clientId,this._config.websocketRetryConfig||mE,this._config.httpRetryConfig||mE,n),this._channelMediaRelayClient.on("state",(e=>{e===qb.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.safeEmit(g_.CHANNEL_MEDIA_RELAY_STATE,e)})),this._channelMediaRelayClient.on("event",(e=>{this.safeEmit(g_.CHANNEL_MEDIA_RELAY_EVENT,e)})),this._statsCollector.onStatsChanged=(e,t)=>{var n;"resolution"===e&&(null===(n=this._channelMediaRelayClient)||void 0===n||n.setVideoProfile(t))}}return this._channelMediaRelayClient}_handleUpdateDataChannel(e,t){const{added:n,deleted:r}=e,i=[];Array.isArray(n)&&n.length>0&&n.forEach((e=>{const{uid:n,stream_id:r,ordered:o,max_retrans_times:s,metadata:a}=e,c=this._users.find((e=>e._uintid===n));if(c){if(VT.debug("[".concat(this._clientId,"] data_channel added with uid ").concat(n)),Rr(i).call(i,c)||i.push(c),c._uintid||(c._uintid=n),-1===c._dataChannels.findIndex((t=>t.id===e.stream_id))){const e={id:r,ordered:!!o,maxRetransmits:s,metadata:a},n=new sD(e);c._dataChannels.push(n),VT.info("[".concat(this._clientId,"] remote user ").concat(c.uid," published datachannel")),t||this.safeEmit(g_.USER_PUBLISHED,c,"datachannel",e)}this._p2pChannel.hasPendingRemoteDataChannel(c,e.stream_id)&&(VT.debug("[".concat(this._clientId,"] resubscribe datachannel for user ").concat(c.uid," after reconnect.")),this._subscribeDataChannel(c,e.stream_id).catch((e=>{VT.error("[".concat(this._clientId,"] resubscribe datachannel error"),e.toString())})))}else VT.error("[".concat(this._clientId,"] can not find target user!(on_add_data_channel)"))})),t&&(this.safeEmit(g_.PUBLISHED_USER_LIST,this._pendingPublishedUsers),this._pendingPublishedUsers=[]),Array.isArray(r)&&r.length>0&&r.forEach((e=>{const{uid:t,stream_id:n}=e,r=this._users.find((e=>e._uintid===t));if(!r)return void VT.error("[".concat(this._clientId,"] can not find target user!(on_delete_data_channel)"));const i=r._dataChannels.find((t=>t.id===e.stream_id));i&&(VT.debug("[".concat(this._clientId,"] data_stream delete with uid ").concat(t)),this._p2pChannel.unsubscribeDataChannel(r,[i]).then((e=>{if(r._dataChannels=r._dataChannels.filter((e=>e!==i)),e)return this._gateway.unsubscribeDataChannel(e,r.uid)})),VT.info("[".concat(this._clientId,"] remote user ").concat(t," unpublished datachannel ,id:").concat(i.id)),this.safeEmit(g_.USER_UNPUBLISHED,r,"datachannel",i._config))}))}_handleRemoveDataChannels(e){const t=this._users.find((t=>t.uid===e.uid));if(t){if(void 0!==t._dataChannels&&t._dataChannels.length>0){VT.debug("[".concat(this._clientId,"] datachannel removed with uid ").concat(e.uid));const n=()=>{VT.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished datachannel")),t._dataChannels.forEach((e=>{this.safeEmit(g_.USER_UNPUBLISHED,t,"datachannel",e._config)}))};this._p2pChannel.unsubscribeDataChannel(t,t._dataChannels).then((e=>{if(e)return this._gateway.unsubscribeDataChannel(e,t.uid)})),n()}}else VT.warning("[".concat(this._clientId,"] can not find target user!(on_remove_datachannel)"))}_handleGatewayEvents(){this._gateway.on(Jb.DISCONNECT_P2P,(async()=>{await this._p2pChannel.disconnectForReconnect()})),this._gateway.on(Jb.CONNECTION_STATE_CHANGE,((e,t,n)=>{var r;if(n===m_.FALLBACK)return;const i=()=>{this.safeEmit(g_.CONNECTION_STATE_CHANGE,e,t,n)};if(eb.reportApiInvoke(this._sessionId||(null===(r=this._gateway.joinInfo)||void 0===r?void 0:r.sid)||null,{name:h_.CONNECTION_STATE_CHANGE,options:[e,t,n],tag:p_.TRACER}).onSuccess(JSON.stringify({cur:e,prev:t,reason:n})),VT.info("[".concat(this._clientId,"] connection state change: ").concat(t," -> ").concat(e)),"DISCONNECTED"===e)return this._reset(),void i();if("RECONNECTING"===e)this._users.forEach((e=>{e._trust_in_room_=!1,e._trust_audio_enabled_state_=!1,e._trust_video_enabled_state_=!1,e._trust_audio_mute_state_=!1,e._trust_video_mute_state_=!1,e._trust_audio_stream_added_state_=!1,e._trust_video_stream_added_state_=!1,e._is_pre_created||(e._audio_pre_subscribed||(e._audioSSRC=void 0,e._audioOrtc=void 0),e._video_pre_subscribed||(e._videoSSRC=void 0,e._videoOrtc=void 0,e._rtxSsrcId=void 0),e._cname=void 0)})),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if("CONNECTED"===e){var o;this._streamFallbackTypeCacheMap.forEach(((e,t)=>{this._gateway.setStreamFallbackOption(t,e).catch((e=>{VT.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),e)}))})),this._remoteStreamTypeCacheMap.forEach(((e,t)=>{this._gateway.setRemoteVideoStreamType(t,e).catch((e=>{VT.warning("[".concat(this._clientId,"] auto set remote stream type failed"),e)}))})),void 0!==this._remoteDefaultVideoStreamType&&void 0===(null===(o=this._joinInfo)||void 0===o?void 0:o.defaultVideoStream)&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then((()=>{VT.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))})).catch((e=>{VT.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(e))})),this.store.useP2P||(this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout((()=>{"CONNECTED"===this.connectionState&&(this._userOfflineTimeout=void 0,this._users.filter((e=>!e._trust_in_room_)).forEach((e=>{VT.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(e.uid)),this._handleUserOffline({uid:e.uid})})))}),3e3),this._streamRemovedTimeout=window.setTimeout((()=>{"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,this._users.forEach((e=>{e._trust_audio_mute_state_||(VT.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(e.uid)),this._handleMuteStream(e.uid,aI.AUDIO,!1)),e._trust_video_mute_state_||(VT.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(e.uid)),this._handleMuteStream(e.uid,aI.VIDEO,!1)),e._trust_audio_enabled_state_||(VT.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(e.uid)),this._handleSetStreamLocalEnable("audio",e.uid,!0)),e._trust_video_enabled_state_||(VT.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(e.uid)),this._handleSetStreamLocalEnable("video",e.uid,!0)),e._trust_video_stream_added_state_||(VT.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(e.uid)),this._handleResetAddStream(e,"video")),e._trust_audio_stream_added_state_||(VT.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(e.uid)),this._handleResetAddStream(e,"audio")),e._video_added_||e._audio_added_||(VT.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(e.uid)),this._handleRemoveStream({uid:e.uid,uint_id:e._uintid}))})))}),1e3))}i()})),this._gateway.on(Jb.REQUEST_NEW_GATEWAY_LIST,((e,t)=>{if(!this._joinInfo)return t(new kb(Hv.UNEXPECTED_ERROR,"can not recover, no join info"));uC(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||mE,this.store).then((t=>{this._joinInfo&&(this._joinInfo.apResponse=t.gatewayInfo.res,this._joinInfo.gatewayAddrs=t.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=t.gatewayInfo.uni_lbs_ip);const n=[];t.gatewayInfo.gatewayAddrs.forEach((e=>{let{address:t}=e;const[r,i]=t.split(":");this._joinInfo&&this._joinInfo.proxyServer?n.push({proxy:this._joinInfo.proxyServer,host:r,port:i}):n.push({host:r,port:i})})),e(n)})).catch(t)})),this._gateway.on(Jb.NETWORK_QUALITY,(e=>{"normal"===this._networkQualitySensitivity&&this.safeEmit(g_.NETWORK_QUALITY,e)})),this._gateway.on(Jb.STREAM_TYPE_CHANGE,((e,t)=>{this.safeEmit(g_.STREAM_TYPE_CHANGED,e,t),eb.reportApiInvoke(this._sessionId,{name:h_.STREAM_TYPE_CHANGE,options:[e,t],tag:p_.TRACER}).onSuccess(JSON.stringify({uid:e,streamType:t}))})),this._gateway.on(Jb.IS_P2P_DISCONNECTED,(e=>{this._p2pChannel.isP2PDisconnected()?e(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?e(!1):e(!0)})),this._gateway.on(Jb.NEED_RENEW_SESSION,(()=>{this._startSession()})),this._gateway.on(Jb.REQUEST_P2P_CONNECTION_PARAMS,(async(e,t,n)=>{try{t(await this._p2pChannel.startP2PConnection(e))}catch(e){n(e)}})),this._gateway.on(Jb.JOIN_RESPONSE,((e,t)=>{if(this.store.useP2P)return;const{dtlsParameters:n,iceParameters:r,candidates:i,rtpCapabilities:o,setup:s,cname:a}=Sj(e.ortc,t);this._p2pChannel.connect(r,n,i,o,s,a)})),this._gateway.on(Jb.REQUEST_DC_CONNECTION_PARAMS,(e=>{e(this._p2pChannel.getEstablishParams())})),this._gateway.on(Jb.RESET_SIGNAL,(e=>{this._p2pChannel.resetConnection(e),this._handleGatewaySignalEvents()})),this._gateway.on(Jb.DATACHANNEL_FAILBACK,(()=>{this._joinGateway()})),this._gateway.on(Jb.DATACHANNEL_PRECONNECT,(async(e,t,n,r)=>{var i,o,s,a,c,l;await this._p2pChannel.startP2PConnection({turnServer:null===(i=this._joinInfo)||void 0===i?void 0:i.turnServer},!0);const d=function(e,t){let n;return t&&t.ip&&"number"==typeof t.port?(n=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip,port:t.port.toString(),type:"host",extension:{}}],VT.debug("Using remote candidate from AP ".concat(t.ip,":").concat(t.port)),t.ip6&&(n.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip6,port:t.port.toString(),type:"host",extension:{}}),VT.debug("Using IPV6 remote candidate from AP ".concat(t.ip6,":").concat(t.port)))):n=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip,port:e.port.toString(),type:"host",extension:{}}],n}(e,t);return this._p2pChannel.preConnect({iceUfrag:"".concat(null===(o=this._joinInfo)||void 0===o?void 0:o.apResponse.cid,"_").concat(null===(s=this._joinInfo)||void 0===s?void 0:s.apResponse.cert),icePwd:"".concat(null===(a=this._joinInfo)||void 0===a?void 0:a.apResponse.cid,"_").concat(null===(c=this._joinInfo)||void 0===c?void 0:c.apResponse.cert)},{fingerprints:[{hashFunction:"sha-256",fingerprint:null!==(l=ST("FINGERPRINT"))&&void 0!==l?l:e.fingerprint}]},d,{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},"active","o/i14u9pJrxRKAsu").then(n).catch(r)}))}_handleGatewaySignalEvents(){this._gateway.signal.on(yb.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(yb.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(yb.ON_ADD_AUDIO_STREAM,(e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc))),this._gateway.signal.on(yb.ON_ADD_VIDEO_STREAM,(e=>this._handleAddAudioOrVideoStream("video",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc,e.rtxSsrcId))),this._gateway.signal.on(yb.ON_REMOTE_DATASTREAM_UPDATE,(e=>{this._handleUpdateDataChannel(e)})),this._gateway.signal.on(yb.ON_REMOTE_FULL_DATASTREAM_INFO,(e=>{this._handleUpdateDataChannel({added:e.datastreams,deleted:[]},!0)})),this._gateway.signal.on(yb.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(yb.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(yb.MUTE_AUDIO,(e=>this._handleMuteStream(e.uid,aI.AUDIO,!0))),this._gateway.signal.on(yb.UNMUTE_AUDIO,(e=>this._handleMuteStream(e.uid,aI.AUDIO,!1))),this._gateway.signal.on(yb.MUTE_VIDEO,(e=>this._handleMuteStream(e.uid,aI.VIDEO,!0))),this._gateway.signal.on(yb.UNMUTE_VIDEO,(e=>this._handleMuteStream(e.uid,aI.VIDEO,!1))),this._gateway.signal.on(yb.RECEIVE_METADATA,(e=>{const t=J_(e.metadata);this.safeEmit(g_.RECEIVE_METADATA,e.uid,t)})),this._gateway.signal.on(yb.ON_DATA_STREAM,(async e=>{var t;if(!e)return;let n=J_(e.payload);if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Rr(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)){if(e.payload.length<DT)throw new kb(Hv.UNEXPECTED_RESPONSE,"payload length ".concat(e.payload.length," is less than header length ").concat(DT));const t=await async function(e,t,n){const r=n.subarray(0,DT),i=r.slice(8,DT),o=(i[0]<<8)+i[1],s=(r[6]<<8)+r[7],a=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:e,tagLength:AT,additionalData:new Uint8Array(dE(o,2))},t,n.subarray(DT));return new Uint8Array(a).subarray(0,s)}(this._encryptDataStreamIv,this._encryptDataStreamKey,n);n=t}let r=0;if(e.ordered||e.syncWithAudio){const t=this._p2pChannel.getStats(),n=this.remoteUsers.find((t=>t.uid===e.uid)),i=null==t?void 0:t.audioRecv.find((e=>e.ssrc===(null==n?void 0:n._audioSSRC)));r=null==i?void 0:i.jitterBufferMs}null==r&&(r=0),wz(Mz(Mz({},e),{},{payload:n}),r,{id:this._clientId,onStreamMessage:"function"==typeof this.onStreamMessage?this.onStreamMessage.bind(this):void 0,safeEmit:this.safeEmit.bind(this)})})),this._gateway.signal.on(yb.ON_CRYPT_ERROR,(()=>{Q_((()=>{VT.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(g_.CRYPT_ERROR)}),this._sessionId)})),this._gateway.signal.on(yb.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(yb.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{VT.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0,m_.TOKEN_EXPIRE),this.safeEmit(g_.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()})),this._gateway.signal.on(yb.ON_STREAM_FALLBACK_UPDATE,(e=>{VT.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(e.stream_id,", attr: ").concat(e.stream_type)),this.safeEmit(g_.STREAM_FALLBACK,e.stream_id,1===e.stream_type?"fallback":"recover")})),this._gateway.signal.on(yb.ON_PUBLISH_STREAM,(e=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:e.proxy})),VT.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(e))))})),this._gateway.signal.on(yb.ENABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)})),this._gateway.signal.on(yb.DISABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)})),this._gateway.signal.on(fb.REQUEST_TIMEOUT,((e,t)=>{if(this._joinInfo)switch(e){case mb.PUBLISH:{if(!t)return;const e=t.ortc;if(e){var n,r;const i=e.some((e=>{let{stream_type:t}=e;return t===Qb.Audio})),o=e.some((e=>{let{stream_type:t}=e;return t!==Qb.Audio})),s=e.some((e=>{let{stream_type:t}=e;return t===Qb.Screen||t===Qb.ScreenLow}));"offer"===t.state&&eb.publish(this._joinInfo.sid,{eventElapse:SP.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:Hv.TIMEOUT,audio:i,video:o,p2pid:t.p2p_id,publishRequestid:this.store.pubId,screenshare:s,audioName:i?null===(n=e.find((e=>{let{stream_type:t}=e;return t===Qb.Audio})))||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId.toString():void 0,videoName:o?null===(r=e.find((e=>{let{stream_type:t}=e;return t!==Qb.Audio})))||void 0===r||null===(r=r.ssrcs[0])||void 0===r?void 0:r.ssrcId.toString():void 0})}break}case mb.SUBSCRIBE:t&&eb.subscribe(this._joinInfo.sid,{succ:!1,ec:Hv.TIMEOUT,audio:t.stream_type===aI.AUDIO,video:t.stream_type===aI.VIDEO,peerid:t.stream_id,subscribeRequestid:t.ssrcId,p2pid:this.store.p2pId,eventElapse:SP.measureFromSubscribeStart(this.store.clientId,t.ssrcId)})}})),this._gateway.signal.on(yb.ON_P2P_OK,(e=>{this.uid,this._uid})),this._gateway.signal.on(yb.ON_PUBLISHED_USER_LIST,(e=>{if(null==e||!e.users)return;ST("BLOCK_LOCAL_CLIENT")&&(e.users=e.users.filter((e=>!ob(e.string_id||e.stream_id,this.channelName))));const t=[],n=[];for(const r of e.users){let e=this._users.find((e=>e._uintid===r.stream_id));e?e._trust_in_room_=!0:(e=new oU(r.string_id||r.stream_id,r.stream_id),this._users.push(e),0===this.getListeners(g_.PUBLISHED_USER_LIST).length&&(VT.debug("[".concat(this._clientId,"] user online"),r.stream_id),this.safeEmit(g_.USER_JOINED,e)));const i=Zb.Audio&r.stream_type,o=(Zb.Video|Zb.LwoVideo)&r.stream_type,s=0!=(65280&r.stream_type),a=i&&e.hasAudio,c=o&&e.hasVideo;o&&(e._trust_video_stream_added_state_=!0,e._video_added_=!0,e._videoSSRC=r.video_ssrc,e._rtxSsrcId=r.video_rtx),i&&(e._trust_audio_stream_added_state_=!0,e._audio_added_=!0,e._audioSSRC=r.audio_ssrc),i&&!a&&0===this.getListeners(g_.PUBLISHED_USER_LIST).length&&(VT.info("[".concat(this._clientId,"] remote user ").concat(e.uid," published audio")),this.safeEmit(g_.USER_PUBLISHED,e,"audio")),o&&!c&&0===this.getListeners(g_.PUBLISHED_USER_LIST).length&&(VT.info("[".concat(this._clientId,"] remote user ").concat(e.uid," published video")),this.safeEmit(g_.USER_PUBLISHED,e,"video")),(i&&!a||o&&!c||s)&&t.push(e),o&&this._p2pChannel.hasPendingRemoteMedia(e,"video")&&n.push({user:e,mediaType:"video"}),i&&this._p2pChannel.hasPendingRemoteMedia(e,"audio")&&n.push({user:e,mediaType:"audio"})}n.length>0&&(VT.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(n.map((e=>"user: ".concat(e.user.uid,", mediaType: ").concat(e.mediaType))).join("; ")," ")),this.massSubscribe(n).catch((e=>{VT.error("[".concat(this._clientId,"] mass resubscribe error"),e.toString())}))),this.getListeners(g_.PUBLISHED_USER_LIST).length>0?ST("ENABLE_DATASTREAM_2")?this._pendingPublishedUsers=t:(VT.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(t.map((e=>e.uid)).join(", "))),this.safeEmit(g_.PUBLISHED_USER_LIST,t)):VT.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(t.map((e=>e.uid)).join(", ")))})),this._gateway.signal.on(yb.ON_RTP_CAPABILITY_CHANGE,(e=>{const{video_codec:t}=e;this._p2pChannel instanceof cF&&this._p2pChannel.updateRemoteRTPCapabilities(t.map((e=>e.toLowerCase())).filter((e=>{var t;return Rr(t=Object.keys(CT)).call(t,e)})))}))}_handleP2PEvents(){this._gateway.signal.on(yb.ON_USER_OFFLINE,(()=>{this._p2pChannel.disconnectForReconnect()})),this._gateway.signal.on(II.PUBLISH,((e,t,n)=>{const{uid:r}=e;e.forEach((e=>{const{kind:i,ssrcs:o,mid:s,isMuted:a}=e;this._handleP2PAddAudioOrVideoStream(i,r,o[0].ssrcId,s);const c=this._users.find((e=>e.uid===r));return c&&this._p2pChannel instanceof hU?this._p2pChannel.mockSubscribe(c,i,o[0].ssrcId,s).then((()=>{t()})).catch(n):t(),this._handleMuteStream(r,i,!!a)}))})),this._gateway.signal.on(II.CALL,(async(e,t,n)=>{if(this._p2pChannel instanceof hU)try{var r;t(await this._p2pChannel.startP2P({turnServer:null===(r=this._joinInfo)||void 0===r?void 0:r.turnServer},e))}catch(e){n(e)}})),this._gateway.signal.on(fb.P2P_CONNECTION,(async e=>{this._p2pChannel instanceof hU&&await this._p2pChannel.p2pConnect(e)})),this._gateway.signal.on(II.UNPUBLISH,(async(e,t,n)=>{if(this._p2pChannel instanceof hU){const{unpubMsg:r,uid:i}=e,o=this._users.find((e=>e.uid===i));if(!o)return VT.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(i)),void t();try{r.forEach((async e=>{let{stream_type:t}=e;const n=t===Qb.Audio?aI.AUDIO:aI.VIDEO;await this._p2pChannel.unsubscribe(o,n),this._handleMuteStream(i,n,!0)})),t()}catch(e){n(e)}}})),this._gateway.signal.on(II.CONTROL,(async(e,t)=>{const{action:n}=e;switch(n){case CI.MUTE_LOCAL_VIDEO:this._handleMuteStream(t,aI.VIDEO,!0);break;case CI.MUTE_LOCAL_AUDIO:this._handleMuteStream(t,aI.AUDIO,!0);break;case CI.UNMUTE_LOCAL_VIDEO:this._handleP2PAddAudioOrVideoStream("video",t),this._handleMuteStream(t,aI.VIDEO,!1);break;case CI.UNMUTE_LOCAL_AUDIO:this._handleP2PAddAudioOrVideoStream("audio",t),this._handleMuteStream(t,aI.AUDIO,!1)}})),this._gateway.signal.on(II.RESTART_ICE,(async(e,t,n)=>{if(this._p2pChannel instanceof hU)try{const{direction:n,iceParameter:r}=e;n!==_b.SEND_ONLY||r?t(await this._p2pChannel.restartICE(n,r)):(this._p2pChannel.handleDisconnect(n),t())}catch(e){n(e)}})),this._gateway.signal.on(II.CANDIDATE,(e=>{if(this._p2pChannel instanceof hU){const{candidate:t,direction:n}=e;this._p2pChannel.addRemoteCandidate(t,n)}})),this._p2pChannel.on(hI.RequestP2PRestartICE,(async(e,t,n)=>{try{const{direction:n}=e;t(await this._gateway.sendExtensionMessage(II.RESTART_ICE,e,n===_b.SEND_ONLY))}catch(e){n(e)}})),this._p2pChannel.on(hI.LocalCandidate,(e=>{this._gateway.sendExtensionMessage(II.CANDIDATE,JSON.stringify(e),!0)})),this._p2pChannel.on(hI.RequestP2PMuteLocal,(async(e,t,n)=>{try{await this._gateway.sendExtensionMessage(II.CONTROL,e,!0),t()}catch(e){n(e)}})),this._p2pChannel.on(hI.RequestP2PUnmuteRemote,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.unmuteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===Hv.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(hI.RequestP2PMuteRemote,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.muteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===Hv.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(hI.StateChange,((e,t)=>{t===uI.Connected&&this._p2pChannel.republish()}))}_handleP2PChannelEvents(){this._p2pChannel.on(hI.RequestMuteLocal,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.muteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===Hv.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(hI.RequestUnmuteLocal,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===Hv.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(hI.RequestRePublish,((e,t,n)=>{this.publish(e,!1).then(t).catch(n)})),this._p2pChannel.on(hI.RequestRePublishDataChannel,((e,t,n)=>{cv.all(e.map((async e=>{await this._p2pChannel.publishDataChannel([e]);const t={streamId:e.id,ordered:e.ordered,maxRetransmits:e.maxRetransmits,metadata:e.metadata,channelId:e._originDataChannelId};try{await this._gateway.publishDataChannel(this._uid,t,!0)}catch(e){if(e.code!==Hv.DISCONNECT_P2P)throw e}}))).then(t).catch(n)})),this._p2pChannel.on(hI.RequestReSubscribe,(async(e,t,n)=>{try{for(const{user:t,kind:n}of e)n===aI.VIDEO?await this.subscribe(t,"video"):await this.subscribe(t,"audio");t()}catch(e){n(e)}})),this._p2pChannel.on(hI.RequestUpload,((e,t)=>{this._gateway.upload(e,t)})),this._p2pChannel.on(hI.RequestUploadStats,(e=>{this._gateway.uploadWRTCStats(e)})),this._p2pChannel.on(hI.MediaReconnectStart,(e=>{this.safeEmit(g_.MEDIA_RECONNECT_START,e)})),this._p2pChannel.on(hI.MediaReconnectEnd,(e=>{this.safeEmit(g_.MEDIA_RECONNECT_END,e)})),this._p2pChannel.on(hI.NeedSignalRTT,(e=>{e(this._gateway.getSignalRTT())})),this._p2pChannel.on(hI.RequestRestartICE,(async e=>{if(this._p2pChannel instanceof hU)return;const t=await this._p2pChannel.restartICE(e),n=await t.next();if(n.done)return;const r=n.value;let i;try{i=await this._gateway.restartICE({iceParameters:r})}catch(e){return void t.throw(e)}const{iceParameters:o}=function(e){const t=e.iceParameters;return{iceParameters:{iceUfrag:t.iceUfrag,icePwd:t.icePwd}}}(i);await t.next({remoteIceParameters:o})})),this._p2pChannel.on(hI.RequestReconnect,(async()=>{this._gateway.reconnect()})),this._p2pChannel.on(hI.RequestReconnectPC,(async()=>{var e;const{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}=await this._p2pChannel.startP2PConnection({turnServer:null===(e=this._joinInfo)||void 0===e?void 0:e.turnServer}),{gatewayEstablishParams:i,gatewayAddress:o}=await this._gateway.reconnectPC({iceParameters:t,dtlsParameters:n,rtpCapabilities:r}),{dtlsParameters:s,iceParameters:a,candidates:c,rtpCapabilities:l,setup:d,cname:u}=Sj(i,o);await this._p2pChannel.connect(a,s,c,l,d,u),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()})),this._p2pChannel.on(hI.RequestUnpublishForReconnectPC,(async(e,t,n)=>{this._joinInfo&&void 0!==this._uid?(await this._gateway.unpublish(e,this._uid),t()):n()})),this._p2pChannel.on(hI.P2PLost,(()=>{this.safeEmit(g_.P2P_LOST,this.store.uid)})),this._p2pChannel.on(hI.UpdateVideoEncoder,(e=>{e._encoderConfig&&this._gateway.setVideoProfile(e._encoderConfig)})),this._p2pChannel.on(hI.ConnectionTypeChange,(e=>{this.safeEmit(g_.IS_USING_CLOUD_PROXY,e)})),this._p2pChannel.on(hI.RequestLowStreamParameter,(e=>{e(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})})),this._p2pChannel.on(hI.QueryClientConnectionState,(e=>{e(this.connectionState)}))}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(e){if("CONNECTED"!==this.connectionState||!this._joinInfo)throw new kb(Hv.INVALID_OPERATION,"[".concat(this._clientId,"] Client did not join channel"));if(this._inspect)throw new kb(Hv.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));if(!e)throw new kb(Hv.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig is necessary"));if(!e.inspectType||!Array.isArray(e.inspectType))throw new kb(Hv.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.inspectType is necessary and is an instance of Array."));{const t=[...new Set(e.inspectType)];t.forEach((e=>{var t;if(!Rr(t=["supervise","moderation"]).call(t,e))throw new kb(Hv.INVALID_PARAMS,"[".concat(this._clientId,"] ").concat(e," is not a valid inspect type."))})),e.inspectType=t}if(e&&e.extraInfo&&e.extraInfo.length>1024)throw new kb(Hv.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));try{const t=new FF(e);this._inspect=t,this.handleVideoInspectEvents(this._inspect),await t.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},mE)}catch(e){throw Array.isArray(e)?e[0]:e}}async disableContentInspect(){if(!this._inspect)throw new kb(Hv.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}async setImageModeration(e,t){if(Yv(e,"enabled"),e){if(!t)throw new kb(Hv.INVALID_PARAMS,"[".concat(this._clientId,"] config is necessary"));if(Kv(t.interval,"interval",1e3,1/0),t&&t.extraInfo&&t.extraInfo.length>1024)throw new kb(Hv.INVALID_PARAMS,"[".concat(this._clientId,"] config.extraInfo length cannot exceed 1024 bytes"));if(t&&t.vendor&&t.vendor.length>1024)throw new kb(Hv.INVALID_PARAMS,"[".concat(this._clientId,"] config.vendor length cannot exceed 1024 bytes"));if("CONNECTED"!==this.connectionState||!this._joinInfo)throw new kb(Hv.INVALID_OPERATION,"[".concat(this._clientId,'] can not enable image moderation, not joined"'));try{if(this._moderation)return void this._moderation.updateConfig(t);const e=new vz(t);this._moderation=e,this.handleImageModerationEvents(this._moderation),await e.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},mE)}catch(e){throw Array.isArray(e)?e[0]:e}}else{if(!this._moderation)throw new kb(Hv.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}}setP2PTransport(e){if(function(e){qv(e,"transport",["default","auto","relay","sd-rtn"])}(e),"p2p"!==this.mode)throw new kb(Hv.INVALID_OPERATION,"only p2p mode can set p2pTransport");this.store.p2pTransport=e,VT.info("[".concat(this._clientId,"] set client p2pTransport to ").concat(e))}handleImageModerationEvents(e){e.on(TI.CONNECTION_STATE_CHANGE,((t,n)=>{if(this.safeEmit(g_.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,t,n),t===SI.CONNECTED){if("CONNECTED"!==this.connectionState)throw this.setImageModeration(!1),new kb(Hv.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");e.inspectImage()}})),e.on(TI.CLIENT_LOCAL_VIDEO_TRACK,(e=>{e(this.localTracks.filter((e=>"video"===e.trackMediaType))[0])}))}handleVideoInspectEvents(e){e.on(gI.CONNECTION_STATE_CHANGE,((t,n)=>{if(this.safeEmit(g_.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,t,n),n===fI.CONNECTED){if("CONNECTED"!==this.connectionState)return void this.safeEmit(g_.CONTENT_INSPECT_ERROR,new kb(Hv.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));e.inspectImage()}})),e.on(gI.INSPECT_RESULT,((e,t)=>{var n;if((null==t?void 0:t.code)===Hv.INVALID_OPERATION&&"DISCONNECTED"===this.connectionState)return VT.debug("Stop inspect content because that has left channel"),null==this||null===(n=this._inspect)||void 0===n||n.close(),void(this._inspect=void 0);this.safeEmit(g_.CONTENT_INSPECT_RESULT,e,t)})),e.on(gI.CLIENT_LOCAL_VIDEO_TRACK,(e=>{e(this.localTracks.filter((e=>"video"===e.trackMediaType))[0])}))}getJoinChannelServiceRecords(){return VT.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(e){Yv(e,"enabled"),ET("ENABLE_PUBLISH_AUDIO_FILTER",e),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(e)}_handleResetAddStream(e,t){switch(t){case"audio":e._audio_added_=!1,e._trust_audio_stream_added_state_=!0;break;case"video":e._video_added_=!1,e._trust_video_stream_added_state_=!0}}}Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",cv)],Dz.prototype,"leave",null),Mb([$T({argsMap:(e,t)=>{if(!Array.isArray(t)){if(!(t instanceof dw))return[t];t=[t]}return t.map((e=>e?Object(e).toString():"null"))}}),Db("design:type",Function),Db("design:paramtypes",[Object,Boolean]),Db("design:returntype",cv)],Dz.prototype,"publish",null),Mb([$T({argsMap:(e,t)=>(t||(t=[]),t instanceof aD?[t.getChannelId()]:(Array.isArray(t)||(t=[t]),t.map((e=>e.getTrackId()))))}),Db("design:type",Function),Db("design:paramtypes",[Object]),Db("design:returntype",cv)],Dz.prototype,"unpublish",null),Mb([$T({argsMap:(e,t,n,r)=>[t.uid,n,r]}),Db("design:type",Function),Db("design:paramtypes",[oU,String,Number]),Db("design:returntype",cv)],Dz.prototype,"subscribe",null),Mb([$T({argsMap:(e,t,n)=>[t,n]}),Db("design:type",Function),Db("design:paramtypes",[Object,String]),Db("design:returntype",cv)],Dz.prototype,"presubscribe",null),Mb([$T({argsMap:(e,t)=>t.map((e=>{let{user:t,mediaType:n}=e;return[null==t?void 0:t.uid,n]}))}),Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],Dz.prototype,"massSubscribe",null),Mb([$T({argsMap:(e,t,n,r)=>[t.uid,n,r]}),Db("design:type",Function),Db("design:paramtypes",[oU,String,Number]),Db("design:returntype",cv)],Dz.prototype,"unsubscribe",null),Mb([$T({argsMap:(e,t)=>t.map((e=>{let{user:t,mediaType:n}=e;return{uid:null==t?void 0:t.uid,mediaType:n}}))}),Db("design:type",Function),Db("design:paramtypes",[Array]),Db("design:returntype",cv)],Dz.prototype,"massUnsubscribe",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[Object]),Db("design:returntype",cv)],Dz.prototype,"setLowStreamParameter",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",cv)],Dz.prototype,"enableDualStream",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",cv)],Dz.prototype,"disableDualStream",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[String,Object]),Db("design:returntype",cv)],Dz.prototype,"setClientRole",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[String,Boolean]),Db("design:returntype",void 0)],Dz.prototype,"setProxyServer",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[Object,Boolean]),Db("design:returntype",void 0)],Dz.prototype,"setTurnServer",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[String]),Db("design:returntype",void 0)],Dz.prototype,"setLicense",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[Number]),Db("design:returntype",void 0)],Dz.prototype,"startProxyServer",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],Dz.prototype,"stopProxyServer",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[Object]),Db("design:returntype",void 0)],Dz.prototype,"setLocalAccessPointsV2",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[Array,String]),Db("design:returntype",void 0)],Dz.prototype,"setLocalAccessPoints",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[Number]),Db("design:returntype",cv)],Dz.prototype,"setRemoteDefaultVideoStreamType",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[Object,Number]),Db("design:returntype",cv)],Dz.prototype,"setRemoteVideoStreamType",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[Object,Number]),Db("design:returntype",cv)],Dz.prototype,"setStreamFallbackOption",null),Mb([$T({argsMap:(e,t)=>[t]}),Db("design:type",Function),Db("design:paramtypes",[String,String,Uint8Array,Boolean]),Db("design:returntype",void 0)],Dz.prototype,"setEncryptionConfig",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[String]),Db("design:returntype",cv)],Dz.prototype,"renewToken",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",void 0)],Dz.prototype,"enableAudioVolumeIndicator",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[String,Boolean]),Db("design:returntype",cv)],Dz.prototype,"startLiveStreaming",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[Object]),Db("design:returntype",cv)],Dz.prototype,"setLiveTranscoding",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[String]),Db("design:returntype",cv)],Dz.prototype,"stopLiveStreaming",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[String,Object]),Db("design:returntype",cv)],Dz.prototype,"addInjectStreamUrl",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",cv)],Dz.prototype,"removeInjectStreamUrl",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[bU]),Db("design:returntype",cv)],Dz.prototype,"startChannelMediaRelay",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[bU]),Db("design:returntype",cv)],Dz.prototype,"updateChannelMediaRelay",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",cv)],Dz.prototype,"stopChannelMediaRelay",null),Mb([$T({argsMap:(e,t)=>(Array.isArray(t)||(t=[t]),[JSON.stringify(t)])}),Db("design:type",Function),Db("design:paramtypes",[Object]),Db("design:returntype",cv)],Dz.prototype,"sendCustomReportMessage",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[Object,Object]),Db("design:returntype",cv)],Dz.prototype,"pickSVCLayer",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[Object]),Db("design:returntype",cv)],Dz.prototype,"setRTMConfig",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[Object]),Db("design:returntype",cv)],Dz.prototype,"enableContentInspect",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",cv)],Dz.prototype,"disableContentInspect",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[Boolean,Object]),Db("design:returntype",cv)],Dz.prototype,"setImageModeration",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[String]),Db("design:returntype",void 0)],Dz.prototype,"setP2PTransport",null),Mb([$T({reportResult:!0}),Db("design:type",Function),Db("design:paramtypes",[]),Db("design:returntype",Array)],Dz.prototype,"getJoinChannelServiceRecords",null),Mb([$T(),Db("design:type",Function),Db("design:paramtypes",[Boolean]),Db("design:returntype",cv)],Dz.prototype,"setPublishAudioFilterEnabled",null);class kz{constructor(e,t){oh(this,"id",0),oh(this,"element",void 0),oh(this,"peerPair",void 0),oh(this,"context",void 0),oh(this,"audioPlayerElement",void 0),oh(this,"audioTrack",void 0),kz.count+=1,this.id=kz.count,this.element=e,this.context=t}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=e=>{const t=document.createElement("audio");t.srcObject=new MediaStream([e.track]),t.play(),this.audioPlayerElement=t}}async switchSdp(){if(!this.peerPair)return;const e=async(e,t)=>{const n="offer"===t?await e.createOffer():await e.createAnswer();return await e.setLocalDescription(n),"complete"===e.iceGatheringState?e.localDescription:new cv((t=>{e.onicegatheringstatechange=()=>{"complete"===e.iceGatheringState&&t(e.localDescription)}}))},t=async(e,t)=>await e.setRemoteDescription(t);try{const n=await e(this.peerPair[0],"offer");await t(this.peerPair[1],n);const r=await e(this.peerPair[1],"answer");await t(this.peerPair[0],r)}catch(e){throw new kb(Hv.LOCAL_AEC_ERROR,e.toString()).print()}}async getTracksFromMediaElement(e){if(this.audioTrack)return this.audioTrack;let t;try{e instanceof HTMLVideoElement&&(e.captureStream?e.captureStream():e.mozCaptureStream()),t=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(e).connect(t)}catch(e){throw new kb(Hv.LOCAL_AEC_ERROR,e.toString()).print()}if(!t)throw new kb(Hv.LOCAL_AEC_ERROR,"no dest node when local aec").print();const n=t.stream.getAudioTracks()[0];return this.audioTrack=n,n}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const e=this.element,t=await this.getTracksFromMediaElement(e);this.peerPair&&this.peerPair[0].addTrack(t),await this.switchSdp()}close(){VT.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach((e=>{e.close()})),this.peerPair=void 0,this.audioPlayerElement=void 0}}oh(kz,"count",0);const xz=window.AudioContext||window.webkitAudioContext;class Lz{constructor(){oh(this,"units",[]),oh(this,"context",void 0)}processExternalMediaAEC(e){if(!this._doesEnvironmentNeedAEC())return VT.debug("the system does not need to process local aec"),-1;this.context||(this.context=new xz);let t=this.units.find((t=>t&&t.getElement()===e));return t||(t=new kz(e,this.context),this.units.push(t)),t.startEchoCancellation(),VT.debug("start processing local audio echo cancellation, id is",t.id),t.id}_doesEnvironmentNeedAEC(){return Ev().name!==mv.SAFARI}}Mb([$T({report:eb}),Db("design:type",Function),Db("design:paramtypes",[HTMLAudioElement]),Db("design:returntype",Number)],Lz.prototype,"processExternalMediaAEC",null);const Pz=new Lz;function jz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jz(Object(n),!0).forEach((function(t){oh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jz(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Fz=window||document;function zz(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Fz)return;const n=Bz._cspEventHandlerPointer;if(n&&t)return void console.error(n,t);const r=e=>{if(!(e&&e.blockedURI&&(Bz.onSecurityPolicyViolation||Bz.getListeners(_I.SECURITY_POLICY_VIOLATION).length>0)))return;const t=e.blockedURI;ST("CSP_DETECTED_HOSTNAME_LIST").some((e=>Rr(t).call(t,e)))&&(Bz.onSecurityPolicyViolation&&"function"==typeof Bz.onSecurityPolicyViolation&&Bz.onSecurityPolicyViolation(e),Bz.getListeners(_I.SECURITY_POLICY_VIOLATION).length>0&&Bz.safeEmit(_I.SECURITY_POLICY_VIOLATION,e))};n&&Fz.removeEventListener("securitypolicyviolation",n),(t||e&&"function"==typeof e||Bz.getListeners(_I.SECURITY_POLICY_VIOLATION).length>0)&&Fz.addEventListener("securitypolicyviolation",r),Bz._cspEventHandlerPointer=r}ET("PROCESS_ID","process-".concat(rE(8,""),"-").concat(rE(4,""),"-").concat(rE(4,""),"-").concat(rE(4,""),"-").concat(rE(12,""))),function(){let e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(e){return void VT.error("Error loading sdk config",e.message)}if(e)try{const t=JSON.parse(window.atob(e)),n=Date.now();VT.debug("Loading global parameters from cache",t),Object.keys(t).forEach((e=>{if(Object.prototype.hasOwnProperty.call(_T,e)){const{value:r,expires:i}=t[e];if(i&&i<=n)return;TT[e]=r,_T[e]=r}}))}catch(t){VT.error("Error loading mutableParamsCache: ".concat(e),t.message)}}(),Array.isArray(TT.AREAS)&&TT.AREAS.length>0&&QN(TT.AREAS,!0);const Vz=(e,t,n)=>{VT.debug("setParameter key:".concat(e,", value:").concat(JSON.stringify(t))),ET(e,t,n)},Bz=function(e){const t=new l_,n=e,r={getListeners:t.getListeners.bind(t),on:(e,n)=>(function(e,t){e===_I.SECURITY_POLICY_VIOLATION&&zz(t,!0)}(e,n),t.on.bind(t)(e,n)),addListener:t.addListener.bind(t),once:t.once.bind(t),off:t.off.bind(t),removeAllListeners:t.removeAllListeners.bind(t),emit:t.emit.bind(t),safeEmit:t.safeEmit.bind(t)};return Uz(Uz({},n),r)}({__TRACK_LIST__:UC,VERSION:mT,BUILD:vT,ESM_BUNDLER:!1,ESM:!1,UMD:!0,DEV:!1,setParameter:Vz,getParameter:ST,getSupportedCodec:async function(){let e={audio:[],video:[]};try{let t=new RTCPeerConnection;t.addTransceiver("video",{direction:"recvonly"}),t.addTransceiver("audio",{direction:"recvonly"});const n=(await t.createOffer()).sdp;if(!n)return e;t.close(),t=null,e=function(e){const t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ VP9/i)&&t.video.push("VP9"),e.match(/ AV1/i)&&t.video.push("AV1"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ H265/i)&&t.video.push("H265"),e.match(/ opus/i)&&t.audio.push("OPUS"),e.match(/ PCMU/i)&&t.audio.push("PCMU"),e.match(/ PCMA/i)&&t.audio.push("PCMA"),e.match(/ G722/i)&&t.audio.push("G722"),t}(n)}catch(e){throw new kb(Hv.CREATE_OFFER_FAILED,e.toString&&e.toString()).print()}return e},checkSystemRequirements:function(){const e=eb.reportApiInvoke(null,{name:h_.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:p_.TRACER});let t=!1;try{const e=window.RTCPeerConnection,n=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,r=window.WebSocket;t=!!(e&&n&&r)}catch(e){return VT.error("check system requirement failed: ",e),!1}let n=!1;const r=Ev();r.name===mv.CHROME&&Number(r.version)>=58&&(!Nv()||Iv())&&(n=!0),r.name===mv.FIREFOX&&Number(r.version)>=56&&(n=!0),r.name===mv.OPERA&&Number(r.version)>=45&&(n=!0),r.name===mv.SAFARI&&Number(r.version)>=11&&(n=!0),(Fv()||Ev().name===mv.QQ)&&(n=!0),VT.debug("checkSystemRequirements, api:",t,"browser",n);const i=t&&n;return e.onSuccess(i),i},getDevices:function(e){return xw.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return xw.getRecordingDevices(e)},getCameras:function(e){return xw.getCamerasDevices(e)},getElectronScreenSources:Nw,getPlaybackDevices:function(e){return xw.getSpeakers(e)},createClient:function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const n=eb.reportApiInvoke(null,{name:h_.CREATE_CLIENT,options:[t],tag:p_.TRACER});try{!function(e){qv(e.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),qv(e.mode,"config.mode",["rtc","live","p2p"]),void 0!==e.audioCodec&&qv(e.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),void 0!==e.proxyServer&&Jv(e.proxyServer,"config.proxyServer",1,1e4),void 0!==e.turnServer&&T_(e.turnServer),void 0!==e.httpRetryConfig&&E_(e.httpRetryConfig),void 0!==e.websocketRetryConfig&&E_(e.websocketRetryConfig)}(t)}catch(e){throw n.onError(e),e}return Az()||("vp9"===t.codec&&(t.codec="vp8",VT.debug("browser not support vp9, force use vp8")),ET("UNSUPPORTED_VIDEO_CODEC",["vp9"])),void 0===t.audioCodec&&(t.audioCodec="opus"),n.onSuccess(),new Dz(Mz(Mz({forceWaitGatewayResponse:!0},t),{},{role:Rr(e=["rtc","p2p"]).call(e,t.mode)?"host":t.role||"audience"}))},createCameraVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=eb.reportApiInvoke(null,{tag:p_.TRACER,name:h_.CREATE_CAM_VIDEO_TRACK,options:[IR({},e)]}),n=iR(e),r=rE(8,"track-cam-");let i=null;const o="720p_auto"===e.encoderConfig;VT.info("start create camera video track with config",JSON.stringify(e),"trackId",r);try{i=(await Ow({video:n},r)).getVideoTracks()[0]||null}catch(e){throw t.onError(e),e}if(!i){const e=new Wv(Hv.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(e),e.throw(VT)}e.optimizationMode&&NR(r,i,e,kC(e.encoderConfig));const s=new TR(i,e,n,e.scalabiltyMode?LC(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,r);return o&&s.startMonitorStats(),t.onSuccess(s.getTrackId()),VT.info("create camera video success, trackId:",r),s},createCustomVideoTrack:function(e){const t=eb.reportApiInvoke(null,{tag:p_.TRACER,name:h_.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),n=new SR(e.mediaStreamTrack,{width:e.width,height:e.height,frameRate:e.frameRate,bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?LC(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,rE(8,"track-cus-"),[VC.CUSTOM_TRACK]);return t.onSuccess(n.getTrackId()),VT.info("create custom video track success with config",e,"trackId",n.getTrackId()),n},createScreenVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"disable";const n=eb.reportApiInvoke(null,{tag:p_.TRACER,name:h_.CREATE_SCREEN_VIDEO_TRACK,options:[IR({},e),t]}),r="720p_auto"===e.encoderConfig;e.encoderConfig?"string"==typeof e.encoderConfig||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig="1080p_2";const i=function(e){const t={};e.screenSourceType&&(t.mediaSource=e.screenSourceType),e.extensionId&&Cv()&&(t.extensionId=e.extensionId);const{displaySurface:n,selfBrowserSurface:r,surfaceSwitching:i,systemAudio:o}=e;(Ov(107)||Mv(107)||Dv(93))&&(n&&(qv(n,"displaySurface",["browser","window","monitor"]),t.displaySurface=n),r?(qv(r,"selfBrowserSurface",["exclude","include"]),t.selfBrowserSurface=r):t.selfBrowserSurface="include",i&&(qv(i,"surfaceSwitching",["exclude","include"]),t.surfaceSwitching=i)),(Ov(105)||Mv(105)||Dv(91))&&o&&(qv(o,"systemAudio",["exclude","include"]),t.systemAudio=o),e.electronScreenSourceId&&(t.sourceId=e.electronScreenSourceId);const s=e.encoderConfig?xC(e.encoderConfig):null;return t.mandatory={chromeMediaSource:"desktop",maxWidth:s?s.width:void 0,maxHeight:s?s.height:void 0},s&&(s.frameRate&&("number"==typeof s.frameRate?(t.mandatory.maxFrameRate=s.frameRate,t.mandatory.minFrameRate=s.frameRate):(t.mandatory.maxFrameRate=s.frameRate.max||s.frameRate.ideal||s.frameRate.exact||void 0,t.mandatory.minFrameRate=s.frameRate.min||s.frameRate.ideal||s.frameRate.exact||void 0),t.frameRate=s.frameRate),s.width&&(t.width=s.width),s.height&&(t.height=s.height)),t}(e),o=rE(8,"track-scr-v-");let s=null,a=null;const c=bC();if(!c.supportShareAudio&&"enable"===t){const e=new Wv(Hv.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return n.onError(e),e.throw(VT)}VT.info("start create screen video track with config",e,"withAudio",t,"trackId",o);try{const e=await Ow({screen:i,screenAudio:"auto"===t?c.supportShareAudio:"enable"===t},o);s=e.getVideoTracks()[0]||null,a=e.getAudioTracks()[0]||null}catch(e){throw n.onError(e),e}if(!s){const e=new Wv(Hv.UNEXPECTED_ERROR,"can not find track in media stream");return n.onError(e),e.throw(VT)}if(!a&&"enable"===t){s&&s.stop();const e=new Wv(Hv.SHARE_AUDIO_NOT_ALLOWED);return n.onError(e),e.throw(VT)}e.optimizationMode||(e.optimizationMode="detail"),e.optimizationMode&&(NR(o,s,e,e.encoderConfig&&xC(e.encoderConfig)||void 0),e.encoderConfig&&"string"!=typeof e.encoderConfig&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax));const l=new SR(s,e.encoderConfig?xC(e.encoderConfig):{},e.scalabiltyMode?LC(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,o,[VC.SCREEN_TRACK]);if(r&&l.startMonitorStats(),!a)return n.onSuccess(l.getTrackId()),VT.info("create screen video track success","video:",l.getTrackId()),l;const d=new eR(a,void 0,rE(8,"track-scr-a-"),!1);return n.onSuccess([l.getTrackId(),d.getTrackId()]),VT.info("create screen video track success","video:",l.getTrackId(),"audio:",d.getTrackId()),[l,d]},createMicrophoneAndCameraTracks:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=eb.reportApiInvoke(null,{tag:p_.TRACER,name:h_.CREATE_MIC_AND_CAM_TRACKS,options:[e,t]}),r="720p_auto"===t.encoderConfig,i=iR(t),o=oR(e),s=rE(8,"track-mic-"),a=rE(8,"track-cam-");let c=null,l=null;VT.info("start create camera video track(".concat(a,") and microphone audio track(").concat(s,") with config, audio: ").concat(JSON.stringify(e),", video: ").concat(JSON.stringify(t)));try{const e=await Ow({audio:o,video:i},"".concat(s,"-").concat(a));c=e.getAudioTracks()[0],l=e.getVideoTracks()[0]}catch(e){throw n.onError(e),e}if(!c||!l){const e=new Wv(Hv.UNEXPECTED_ERROR,"can not find tracks in media stream");return n.onError(e),e.throw(VT)}t.optimizationMode&&NR(a,l,t,kC(t.encoderConfig));const d=new tR(c,e,o,s),u=new TR(l,t,i,t.scalabiltyMode?LC(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,a);return r&&u.startMonitorStats(),n.onSuccess([d.getTrackId(),u.getTrackId()]),VT.info("create camera video track(".concat(a,") and microphone audio track(").concat(s,") success")),[d,u]},createMicrophoneAudioTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=eb.reportApiInvoke(null,{tag:p_.TRACER,name:h_.CREATE_MIC_AUDIO_TRACK,options:[e]}),n=oR(e),r=rE(8,"track-mic-");let i=null;VT.info("start create microphone audio track with config",JSON.stringify(e),"trackId",r);try{i=(await Ow({audio:n},r)).getAudioTracks()[0]||null}catch(e){throw t.onError(e),e}if(!i){const e=new Wv(Hv.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(e),e.throw(VT)}const o=new tR(i,e,n,r);return t.onSuccess(o.getTrackId()),VT.info("create microphone audio track success, trackId:",r),o},createCustomAudioTrack:function(e){const t=eb.reportApiInvoke(null,{tag:p_.TRACER,name:h_.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),n=new eR(e.mediaStreamTrack,e.encoderConfig?jC(e.encoderConfig):{},rE(8,"track-cus-"),!1);return VT.info("create custom audio track success with config",e,"trackId",n.getTrackId()),t.onSuccess(n.getTrackId()),n},createBufferSourceAudioTrack:async function(e){var t;const{cacheOnlineFile:n,encoderConfig:r}=e;let{source:i}=e;const o={source:i instanceof AudioBuffer?"AudioBuffer":i instanceof File?null!==(t=File.name)&&void 0!==t?t:"File":i,cacheOnlineFile:n,encoderConfig:r},s=eb.reportApiInvoke(null,{tag:p_.TRACER,name:h_.CREATE_BUFFER_AUDIO_TRACK,options:[o]});if(ST("DISABLE_WEBAUDIO"))throw new Wv(Hv.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");const a=rE(8,"track-buf-");VT.info("start create buffer source audio track with config",JSON.stringify(o),"trackId",a);const c=i;if(!(i instanceof AudioBuffer))try{i=await cR(i,n)}catch(e){return s.onError(e),e.throw(VT)}const l=new sR(i),d=new nR(c,l,r?jC(r):{},a);return VT.info("create buffer source audio track success, trackId:",a),s.onSuccess(d.getTrackId()),d},setAppType:function(e){if(VT.debug("setAppType: ".concat(e)),!(Number.isInteger(e)&&e>=0))throw VT.debug("Invalid appType"),new kb(Hv.INVALID_PARAMS,"invalid app type",e);ET("APP_TYPE",Math.floor(e))},setLogLevel:function(e){VT.setLogLevel(e)},enableLogUpload:function(){ST("USE_NEW_LOG")?ET("UPLOAD_LOG",!0):VT.enableLogUpload()},disableLogUpload:function(){ST("USE_NEW_LOG")?ET("UPLOAD_LOG",!1):VT.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new bU},checkAudioTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=eb.reportApiInvoke(null,{tag:p_.TRACER,name:h_.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof eR||e instanceof OR)){const e=new kb(Hv.INVALID_TRACK,"the parameter is not a audio track");return n.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const r=e instanceof eR?e.getTrackLabel():"remote_track",i=e.getVolumeLevel();let o=i,s=i;const a=Date.now();return new cv((i=>{const c=setInterval((()=>{const l=e.getVolumeLevel();o=l>o?l:o,s=l<s?l:s;const d=o-s>1e-4,u=Date.now()-a;if(d||u>t){clearInterval(c);const t=d,s={duration:u,deviceLabel:r,maxVolumeLevel:o,result:t};VT.info("[track-".concat(e.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(s))),n.onSuccess(s),i(t)}}),200)}))},checkVideoTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=eb.reportApiInvoke(null,{tag:p_.TRACER,name:h_.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof SR||e instanceof AR)){const e=new kb(Hv.INVALID_TRACK,"the parameter is not a video track");return n.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const r=e instanceof SR?e.getTrackLabel():"remote_track",i=e.getMediaStreamTrack(!0),o=document.createElement("video");o.style.width="1px",o.style.height="1px",o.setAttribute("muted",""),o.muted=!0,o.setAttribute("playsinline",""),o.controls=!1,(wv()||bv())&&(o.style.opacity="0.01",o.style.position="fixed",o.style.left="0",o.style.top="0",document.body.appendChild(o)),o.srcObject=new MediaStream([i]),o.play();const s=document.createElement("canvas");s.width=160,s.height=120;let a=0,c=0;try{const e=Date.now();a=await function(e,t,n,r){let i,o=0,s=null;return new cv(((a,c)=>{function l(){o>r&&i&&(i(),a(o));const t=n.getContext("2d");if(!t){const e=new kb(Hv.UNEXPECTED_ERROR,"can not get canvas 2d context.");return VT.error(e.toString()),void c(e)}t.drawImage(e,0,0,160,120);const l=t.getImageData(0,0,n.width,n.height),d=Math.floor(l.data.length/3);if(s){for(let e=0;e<d;e+=3)if(l.data[e]!==s[e])return o+=1,void(s=l.data);s=l.data}else s=l.data}setTimeout((()=>{i&&(i(),a(o))}),t),i=_w((()=>{l()}),30)}))}(o,t,s,4),c=Date.now()-e}catch(e){throw n.onError(e),e}Rz===mv.SAFARI&&(o.pause(),o.remove()),o.srcObject=null;const l=a>4,d={duration:c,changedPicNum:a,deviceLabel:r,result:l};return VT.info("[track-".concat(e.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(d))),n.onSuccess(d),l},setArea:QN,audioElementPlayCenter:Bw,resumeAudioContext:function(){Bw.autoResumeAfterInterruption(!0)},processExternalMediaAEC:function(e){Pz.processExternalMediaAEC(e)},registerExtensions:function(e){const t=ST("PLUGIN_INFO")||[];e.forEach((e=>{"name"in e&&!Rr(t).call(t,e.name)&&t.push(e.name);const n=e;n.__registered__=!0,n.logger.hookLog=VT.extLog,n.reporter.hookApiInvoke=eb.extApiInvoke,n.parameters&&Object.keys(n.parameters).forEach((e=>{n.parameters[e]=ST(e)}))})),Vz("PLUGIN_INFO",t)},ChannelMediaRelayError:Kb,ChannelMediaRelayEvent:Yb,ChannelMediaRelayState:qb,RemoteStreamFallbackType:HC,RemoteStreamType:GC,ConnectionDisconnectedReason:m_,AudienceLatencyLevelType:f_,AREAS:eI});return Object.defineProperties(Bz,{onAudioAutoplayFailed:{get:()=>Pw.onAudioAutoplayFailed,set:e=>{Pw.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:()=>Pw.onAutoplayFailed,set:e=>{Pw.onAutoplayFailed=e}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>Bz._onSecurityPolicyViolation,set(e){Bz._onSecurityPolicyViolation=e,zz(e)}},__CLIENT_LIST__:{get:()=>ST("SHOW_GLOBAL_CLIENT_LIST")?ib:[]}}),xw.on(iw.CAMERA_DEVICE_CHANGED,(e=>{VT.info("camera device changed",JSON.stringify(e)),Bz.onCameraChanged&&Bz.onCameraChanged(e),Bz.safeEmit(_I.CAMERA_CHANGED,e)})),xw.on(iw.RECORDING_DEVICE_CHANGED,(e=>{VT.info("microphone device changed",JSON.stringify(e)),Bz.onMicrophoneChanged&&Bz.onMicrophoneChanged(e),Bz.safeEmit(_I.MICROPHONE_CHANGED,e)})),xw.on(iw.PLAYOUT_DEVICE_CHANGED,(e=>{VT.debug("playout device changed",JSON.stringify(e)),Bz.onPlaybackDeviceChanged&&Bz.onPlaybackDeviceChanged(e),Bz.safeEmit(_I.PLAYBACK_DEVICE_CHANGED,e)})),Bw.onAutoplayFailed=()=>{VT.info("detect audio element autoplay failed"),Pw.onAudioAutoplayFailed&&Pw.onAudioAutoplayFailed()},fw.on("autoplay-failed",(()=>{VT.info("detect webaudio autoplay failed"),Pw.onAudioAutoplayFailed&&Pw.onAudioAutoplayFailed(),Bz.safeEmit(_I.AUTOPLAY_FAILED)})),fw.on(IC.STATE_CHANGE,((e,t)=>{VT.info("audio context state changed: ".concat(t," => ").concat(e)),Bz.onAudioContextStateChanged&&Bz.onAudioContextStateChanged(e,t),Bz.safeEmit(_I.AUDIO_CONTEXT_STATE_CHANGED,e,t)})),R_.on(__.NETWORK_STATE_CHANGE,((e,t)=>{VT.info("[network-indicator] network state changed, ".concat(t," => ").concat(e))})),window&&(window.__ARTC__=Bz),Bz}()},1604:module=>{var t;window,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=96)}([function(e,t,n){"use strict";n.r(t);var r,i=n(11),o=n.n(i),s=n(14),a=n(2),c=n(1),l=n(48),d=n.n(l),u=n(49),h=n.n(u),p=new Array(32).fill(void 0);function f(e){return p[e]}p.push(void 0,null,!0,!1);var m=p.length;function g(e){var t=f(e);return function(e){e<36||(p[e]=m,m=e)}(e),t}var y=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});y.decode();var v=null;function _(){return null!==v&&v.buffer===r.memory.buffer||(v=new Uint8Array(r.memory.buffer)),v}function E(e,t){return y.decode(_().subarray(e,e+t))}function S(e){m===p.length&&p.push(p.length+1);var t=m;return m=p[t],p[t]=e,t}var T=0,b=new TextEncoder("utf-8"),I="function"==typeof b.encodeInto?function(e,t){return b.encodeInto(e,t)}:function(e,t){var n=b.encode(e);return t.set(n),{read:e.length,written:n.length}},N=null;function C(){return null!==N&&N.buffer===r.memory.buffer||(N=new Int32Array(r.memory.buffer)),N}var w,R=function(){function e(){d()(this,e)}return h()(e,[{key:"free",value:function(){var e=this.ptr;this.ptr=0,r.__wbg_signmanager_free(e)}},{key:"get_digest",value:function(e){return g(r.signmanager_get_digest(this.ptr,S(e)))}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}},{key:"new",value:function(){var t=r.signmanager_new();return e.__wrap(t)}}]),e}(),A=!1,O=null,M=0,D="free",k=[],x=[],L=0;(O?Promise.resolve(O):new Promise((function(e){A||r||function e(){var t={wbg:{}};t.wbg.__wbindgen_object_drop_ref=function(e){g(e)},t.wbg.__wbindgen_string_new=function(e,t){return S(E(e,t))},t.wbg.__wbindgen_string_get=function(e,t){var n=f(t),i="string"==typeof n?n:void 0,o=null==i?0:function(e,t,n){if(void 0===n){var r=b.encode(e),i=t(r.length);return _().subarray(i,i+r.length).set(r),T=r.length,i}for(var o=e.length,s=(i=t(o),_()),a=0;a<o;a++){var c=e.charCodeAt(a);if(c>127)break;s[i+a]=c}if(a!==o){0!==a&&(e=e.slice(a)),i=n(i,o,o=a+3*e.length);var l=_().subarray(i+a,i+o);a+=I(e,l).written}return T=a,i}(i,r.__wbindgen_malloc,r.__wbindgen_realloc),s=T;C()[e/4+1]=s,C()[e/4+0]=o},t.wbg.__wbindgen_throw=function(e,t){throw new Error(E(e,t))};for(var n=Uint8Array.from(atob("55ZBgM/2Bzm2JGhNn//ljJsSorhWUYE66a1Hf8O7pfQGR2zfol8qRP6CDhsi3iG7nFZu9stSyPq/qu2Rr2w8QkTGP6Gm2cg3J5qsQgq5bcHA9mDpGv/b24uEwsixZVl1eGkdV4SB/6ayw2v48hLmNA+w5UlnTCiWwerzESQPidpSUMbamXL3pU815EQm12GhhZ9aWzo568gdZvXevBc/WHfFKQSuTgWva4e4eSmW7UxpH8sY4HlDsCTMu0WwEB8B95XsZwOp3GLgfOQmJBw036DgIKU+XGn4KpIEq77WE/h6R7sZKsFUp+u+2cDnW7IPNe7xfd9areFo0EUh0/9K9CqxUkLqMB5hlgS1fwQHRzKPhQ7gALyc6HwMCPooS0M1NrzjdfH3vUn0PeQ1GBlnrnXgiu8TunfHg5TcbBfPEbxbyiiow1Np+VEBlHNh00PiAWyu024NHaPbDGfMtzu4WF02fgkh8Pxb7bCSpCZndjTytQgAzfZxk2bbe6NoHHFnsviqYzHVpxoPEk7icHRWcZC28d2muthq673KCMQay1fJcPqSTuYhWUZS5eylIguT33lP+TBbOWQI8KtCzBN5FzqILfKzRkzrJ3L192BUF8SILdwmriv10HU9ZlQAyQA1VdegnzOl/dYk2GGsB3724y7w/7aJLHJzEfwrfIzFd5CoAft7ct+zQW2G4Wm2kpoz6uJfgrNyykQgwCO6pkPy1ADrBUuJon9ySjhgcFru6AKa99wTlIhzBw3FKFt9Aa1/1KWWy7W1wAIGzRTs/7rLXRkKFjNqGVXBdoVNTpHFtfEFsuX0X98ISr0Bennlx0h2Yl/CGNb5Kc7i3bio1XJHX24avcMsEAwfdfskCki4/dkStn7QC97YJC3z+7gD84IiEEeGcnn7gHJyeALr0ssbqDUcKqxEyheyFs9FToJziLB+eYw6nMQLmYTrQyrg3b+3YBdgx7pzNEDSyz3tmaPaikwcLSyB/Igo6U/oP/fS2TZLtmN03m4iS76YrDJAgI+2W1GboabuixVcLdxm6SQ4CzUnHSPl1knhcGhW/+OcKa53tB5j5C4wEpiENv6T9PUu4K0YwtEAqFbd/eN2wVAYCKn/nlVA8uiESxCfgs0411mRFk4i1pixJLPP5AFPG9QFZnj6X19TqmhmIhl8D6Q1rOvPCqPZV/z04HjayX4qPzPzP/5NVilN/sHhQe7ulriGmU/3rj5QEuiOymsL7EdCQMc/4mXDPdVrDBfbt6dnv11oLYGmqOP1oSBj02FtsmYrMn9pRg7HJoCh86jAnzuOYn4tGnQ4gw/89sb64NAXcoIbTIjyiHBAQCCK2Yn4I/fNF10rkQlvSvkpqLG2eYpJmpWrcouNDEUtJFR607oNraLdmUKyLc1g7SNpS+ofp1FL6rua/HFSrb5kTF2Vcy2gl+6MACbFRChKoP/un7IbYJuOima/JWFZcs/MXokIx+ijuqjMtVKaYRTzNI5ncPa2y/EXTNdUUFpMhbE7sa39Uoh6Hci/viXy2KFTNbiw+BkWOPnyOr04LjIYKlJ8ud/KvjuvNUGQOHJvj6tpZJxj97tr0OrgZCAxSHGU5JQfqEd/U0QfzGM8Wh3zdsnd9LhoIIRJAtyA2PmjwJk4zTxeYlgwPqAVTU3+9bA1QD+jLZZ3Ffk3MRq+Ar2RT8YN6ASR4bItt3omBj0LJe0zeGY3OzfhljL6LA1m4+IUp+CzeWo0aEjnvRk3iCJeajgdC+NUGB5qh8PWKtBeC58woavnRjvRNphXS4b9M7Aymcfq26B2YY2lS+wLf763OnGJlVdV/srgyAUJJZjarxom4zrYy23kLFB8zFzWuwSMue5Xm1YWape91JGDuRLIctrJWU47/XfLm6Zgei4xOwq1RcjikGuaZtDwcFg9aKtO+JOGJsCjy9AiPnmt+rmdX83GsT3KtTETnLv6ZQcnGtmt4H8AjFgGYePdQc40cj8VAOV8NCLspyW5w63b3g37GXJrzjm9Fym3fh27psjo5RuTs7XCSrNENxKm9jCcXPqWxyuXJSn6dhdWnw5SAnUjixXviWS4HsnYjw4Xt4cSwkqCB9naLstVXt5D2HgG4fzHFNHvnETft0mrhU81IBDTSyNFdDvFEX8cifoc6FcNq7pzXlotl2ZS1FIzNXddZrdXpBNYZPV52gtCok6ePpUR/Y8jyJpE9P3q8dmFVivVGgmKTcBKMDDbzeOfl4MpOGBtBX/Lab/kzqG42sTyOyGUyOoFXYGMUWJ33GPI2KNa/mW8zVl+imshfbj7PiK1qRUn74KjAkH4wjKnu50AONYUaiveSdwnEc1zCjZSJ3dmBKSxhWAcO2PdHBg5m9+JCiPGCVfK9dzoM8Bm7xx9noJiqt4hNiVa5di1Fd1JRN4rnd1DbKglKpAVSoqvJPxmuyH56TFE4BQjhfKbDMZezQJqx+KXDiW1JWGeDYaPVBWPYeZX6STIzC/DjS7UFlqoKgGGAGP17x8wmMRE6O/axG5jDzloCGxCmrymT0ZGCh4g54O1iDYUtmJr7Bo1d+H9RQj2Y10BxcMkLFTIZVjm9e3vtIbeRx0OdXE1Ou37J/WeJZyPXn1fszvp/KonCqVnt862LrxfoB/0sF5gk4Y/f6LVneU5hun9/V1OVre9XrnDBhcVaQa9Ye6gs8sHW9HCNchaFbkUpxSiyxVEFZIlbejbjSPFlkYOLhtQHduwZWRHWA9akqykJNG3PKvOZAaJG5nWQq8+e4K0JF/AXTKIIr4J7zDt8ZR4xb9T2gxjl1nfqzidMRIY5B4rkw0oetta+j8rqkFpTEGA+hU/tw7bDtpkPYvCguwncnCjwULNFT9I9jXx3H4Ws3WWMCit29F7kGq2Ka+rU/MjnuP0lsXkoB1rr8LawHH5gaf8rajq/BhKrGTIfjDiZG5qz+L7SZBZsMSZZ9pM1QhKju+GTD9iC+9HlhfXMtj94gz8U4h7eGXziEO7lo7LwLL6/DVMrGbkv68JYUYhGz2yBm/8cbQEh5vhakbhmpv1K6XYM9rzdsd9bwYcYt3cfKE3m+/NrUa42+RpJBdFg7cAmxsZ7/0TMyVw6Aqu2gzldb2ag4iLrPNEyW1ywaJ2DXMgPi/sjnDzhuo+vIUrc86j4ZLhT4GAN6uqwbnXq5UDzX7TfuB48oMvvE1sK5q6owkdWfklgnC6pSBpK7wl+e3kuvaYnGRGJJMBQuVgWL1awHrVtfOTsSE1vc0ZdG+a/Jbza6pHbyfi5L7FXJAGdQTk0EP3VT54+F7RZ/MJ9fj56aMxzhJRwQJ6df3cM26qSc5bW/zP3PFXypTOBwzCvVtwGQzkGvDW7XGwgLbTNHDpQXOd2BQ5Zd9bjQqGg+S+kIqWZVZCqVLfyFPF9bEOHfPepL6nRDJUD2l5uRnXqeTvidaSIoqS1Fbc6mLPtYnbp6uuts6Qo8TbMzFuI7NuaPuKnQIyVu7vUGJ8jg1uVOjlMNKdVtLPr9/ZEKVZVj7lsFA+nm3zRjjr1DRKhr/wY1CI1iXKVTeQZ0i2PSnN99j4iVTSwNAYQLWWD+KyZ/xRLVxmZQPuSkLeKBRAkavxjWnIFQb1dn72wMSUdcB9cNCNJNdyTkrl44MRR+pUuiVrTAnTlzL33X32eEYwT+vn564yxFJLUDyIMNjJ0nx+GreKSOglI2et0kAwRHKYFclH9GVTiVlB0TWeUJGD+7JYogF7BizjTGyPOUEWQCguIEmtC4fHD5461T80Z3Mp7rhNTI+Cswuknr9hrIZmpRyFSrSrP8R4S1Cf34Tu4RNrDxpofVK9nGTklZPsYM6eiP29Lx264fsX9oLdYhq7vCwcrRMJ1a5d0QHXUYRV5IqTFBoUSpxkQ6IHHL8ckM4NCzwk8K0CA3pj5Jp2a9wZjfKq7R/eukzQFuhMxV2qgHf2E3t7/SA8N7sMvsmF0p3J96QRE3rA85ekH1q8nrBVujlIqahmL0Qto3+JxdqAfnKMCblQGSKVWZgWLMm82MG/9pjhdkMzG7C2GRLGMty2y8NhX1pZWHNbLOmvaC424LNz/Nl5tkPv7fVbCT2ItB+/dx3ZhVhmgSLd1zL+2PsNFmj7VGBruTttezlo1mDKErjY27nTswjf2fY/Uq8lPcVAgRpJM+m7jS/8dk8cdl7fkY7Tuj4TfiSe0tiNSoJgZwom4+9haoBQ65AifaB7pUiTc0MAXCvG+nDydkRIbKx5fL6gAlyMAnBbQf+Qh1naLfzzwLVTP0EEyoenW2W1zKqfMql5rwGlyCB9mSa2s25yHf4SDSBlgEVMJtplpRgegZvDakpWDKgx3UR4W7yKW+RD7bd7rEa/GQmA/q0RYAOIaXfO/2CgEUPtNhPS2uqy29lBYFPPv5SHQ0t/jRxQLBpe09ateAWKypt9TWS7Z5gynOePS5M2NC16AhF0Xz6s7DUjtI0xNho9Y6GK16J5V8HqHypV/OAz7+VBzTaiR57XGH4r62GoAiJqfWOM7okzKCeeSBnOIKPHtwgM0SQbvCvv7rmS6ZAacu4BbXZ5R9gOhdR9H3bi7lWLBNnqqLPIy0k6m4XBhtl40B6z/5AcJxjtKfwvIExl7VsQRqbW8gpPMsmJZfSp3uC35g1AkP+BJlju3RVoFZNo3JR18A5uc60NGD4zvzIdGTAOth4ZAZx0ZGQItHuNcLz/0CiavJdkjD65h4avf1vf7LFZ1uogJz6vLK3uDisXIBIGkXOlIpxTdjjjTQt6Khy50bYbXsG9JBrSUGhsBWpeRUnq2cZWOifhfueY95gFIDAu37oKR3FQ1YxGMg3UMq+L2VN2rtqodelSHof8SyYZVQWs7L0bjtgolId1tAAjHI7J1/+JIRXeUBjjaGGQAU+az9XFfiqn+VRAGG8JDdP/WmEqjhYpcy00LIBIBzCF9I9mbXCv8IX9fhPlI5NqWGO/v0ikpfn+hb5U16FcPYsx+xLb4la6nSbvrTDP5MthPyeLIIY7ZE/rNU4ajgPmI0/3RvD7WtEbo8UGPjnev55N2ELuFpEPzkNu9MzXqq8K0cWxk4lT2DQPi3rDO8x8i5jX7wWQi8e0neCMb0SUO67zRfaekZONGfaFl47LByciUuy5dhqxMPokhTE2WbzxqCyt/s2TqG66R0ocYHmzv9f7tJ+TES8NFyzL3fhNoZoW5IxWNE+stYWutd3LPwa7HKhhRAbl5uCEbEGjrUzTXwbzG0qvpmNtpnYnmKjzTaSAFNCxfw9edcjaxCiRKKIDd6GS/eDsGBgTvJexDfwGmVWm9jadZhee9jRFiZFtL6m7sY1oQa8F9ycxSuPANXCqWkApcaEfQLkt1yyfeRs5yC5O/6XGJ4TEtJmCTPJFRr95au20STIPgkoEF1mzZ+5ZRtWKUYuWJVZDwcA/lTy6oYp0/d0LGPRUXnXRm0qtIXQVdnoVhKZPeWACt9rujRL57MEDi2kHtfV/ucu+k03bN0fQlbalUJ0faY99GC6L8MO8MXTSmqDAxNSpqpIFPhgHgAg0YK/GZhlQjbQXE4tMDEDO9obNfp4W6m8fdznMesSSRINBG5FDf//DkT9pSRQsIdSg4VK7W7j2d2jsQUIyjJmbd/2zCTaqh0Yq0cH6mS/5g/cq3eGOiJbaCNo6oVwGURzXVAeVaGIfJFhd2A59sVp+rVfe1f8B6bVbCLIKgGUgpUokO0vTg6ouAxXGQKtveMhhBT83ukPIRZ02+qF1kvM+nNCVy8uzrB0+W9QIKbMio2m/7zW78xd5Tf9itocpLbRuNC5cuS/GyRGXw6fzFzjM1UITlQ5dlvoyYxuvb7ol4S1MyhkfMNZbif6/xic0wB3uSScez3oFTRbCHBd0cbJL3cLwfQjCBpGBrRVC7174qW4XWnw0eYGSSzTVSEDOlMaTUIGJO+s7/z8JxaZprcEsoB4+vt9/+uwtM/iyqLVPidu8ZTh+F1rsEWKwZhDAg/giVc6VzRq+DJCrhn81b/LYlLJOdgoAjID2VnwgU+mQhCL6KhgIqqiVraD25UIYEqxMcZ1aRcZvHa8x5gh5onPtsVcl53Xek9BOYqkyj64acX921zwqoY0lmNA81NE7BzVts3cwWDZ4Dk6uuzwtfJuJc7vVS+fdVDEg3ATwC9oG5/Vb1swTyzTsl2V4m+93bSQo5STFG5AruTDWTym6Lxtt4OrAeIVgdoyTJL+keHiHTNiL0/nO5oYwftSQK1aYBuA0e12t/FVN+LsCk0L/hfCCcke89LuP4d46qnFo3NLpHb+NFrvekXVT4GiZgMW2H0orIY0TpS15wlxVUaGCUo7YSN0yWDRU5+p41dCOs5/vXq1do7K+Byjj35/mPlQ+VEDqqF7OIBQrXfHgCXYPy8ye3Ih3io+tYA6nK0/2clIERrpA0AMHKLTGEO7q/IzIcOCwYN9W/ISH4v4uk9MhzNu7Fg2IPCq5CQF1GLuzQu+wNv2h94NIA2UJydawv5X2bHkZjv+kB/WQCYjxUNEU8ssUdxDZstpv2qNAHmI6BMD84olxMiwFdK5J80zc9x7de/cz3ZNIkkGIpMCZJqKKkaLVo1MLnR/h/hQeUvfqJmvkPeIre3EjnliNkKJKL0KNaupHzY7Eoztaj0cNOhJ5dxIRB2is3kLcSK1FZswRJR0B5OXX+Q4UlFIrhR10lIge3Fg5DnaGoZoOyFaaHztrdF251JubDsCZRDSWA0y6ysykO+h4jhXtuWF7D5Wp7B4Hx3EQvKsmPPZYcLevowjlWghHbRBEhwPI3bzjhNWXlqtym5ObYAeYxuHyvyYue2X4651f7Om3+m8KT7Y/JqLWXwgayCdzxHuJidti1ITuf/oXzeCfTRbG5ytXlDk/epX061W6BO074jI7nV518OkYtRJDnPqdDFAf0uWcATfk0h17+gP7GHjy0Rc0Ive9XmvA6gCkoMjNjMEA7GQ3xy7e12DzfNpIfND7GKKojMifTrvkDXrfa3o4wNYktY6/VlBdHtrcH9F7uMWICej/BjZXVX83WFGcVHx3nOXxSL59kE9bSmHc3Xp8iDbPuSG5GIRp3fTFHnmTzzGedl6al2gUbGFKtkC0jFNtKTk2rr8LEObiGgfCoSpTWknvAYDQBoj93s0KiRNPOqgY++Xka2cQiDwqUsLl8/i57YC/V6sy5/NvhViRRZgCzcyjNHGzZsYA5YMtUntyfC1gNFP7cL3AwVA+326NJI7MQJoxTqcHL/YhntsnYTR5R6GVVvFYIlW8Nv9qn3daoGXMz0MoAsXpCzbiHZ0XWkfw2qlJkmZjgQtMAEhHXNgokGRPfOprmtlvNZaNlGB1EjQTVX1Y4tCyJFZhdhID4CowB23uQF16NifyxH+DGnQrnxeklnG7UQV2BRVdr6ZEKZYv7Gj+PbpojzAskvbdtaFsataqPrLDoejjc6ZfPA5zA0iYcCvcNjzuy9SuT0uG8NWMTLv2OsImL++PQV1sifUENAwi4O3yBvzTy4J77B7mMBpjCYGXAyjFGFZL4eAazSmvZ8thJ0FFW+keLHL+ft1dQBKmXY6JatelGebcIC/PyLBHdfX9bRcauGg4xEO7mMl8AjlcPMczkPniNQpiQFqcDJYrFGoxMV2hskxMn0bRQT8Ajc6w6sQYkGl0CQUImPrGfie9dsk4mrCLMIFOqcm0WT8O8AiREEGmooBTO7WI0qk506NsV7ffvc0rVJERJKcyRyCmFZdTSn/SrBfjV7SXT3pQlgluoY4FBUCDDkzwBgjkrE1oFUA3ls+xVP10w5jjBIMwKBSQqRVAEDXw+Dyj+jH3ila8czULWsCKhWd4qGsMFN7++OGBAz9eXHjAO9m++mTXF6qiyG35Q+61yjYQKsBrjR4NNexrwVGqBwAZA6cr5mp8AhoyzPomJ6TLfWEJjEeRI3QsX5oQkNuyF7u650QFka+VjFeNRY6ALklleTW9I0v4ABKDCXTGkjv80vqVNk+FTL0bJK7ndSjjMJD7OBFIEywBPJFrxTdyzocmxEgG0zu1VDgsQuXITYCx1RRty89A/F+CdSAlbMlIkptCC0GrF/jFS8PAU+6TNV1eBqJrCr9BgH1mth8FtdfE7druR+xyZKn5idfUKzGW6ACGF4M61IRoSs9o6xmaj3dnAVQvFWUsMcR6MI3xTKJNyMxkhXhhvT0IxialnG7i/BBzXfMXYh5jl4BXzCSNlxU4+aboEgIDr48/+pfj8J3WcNccFfzV6eiX05qkNktmafoBcxrEsrM8WQV0VVSRybQyXPOqJ1yndwBI6BOGO9oGxGDAd+HcKaZlptCMJsR1Cp3m7F9HpBFSu/NYVj+WSDY7jWSFBlTBSCFyyPEUn8S9NmBVa+mwGVsz0Q+fxe23w1w6wVO7sVnZqRpmXJeXg72QFkl7Qda1lBzn/FW+rRwLvFxCsuad67Wmzab1RJdzPGsuq8AzW6tL+JiwW/VPUSBbBmV1+EjqQ28x1u9W5Eoy7zhsU8NT87CtNbZ0lPEpsoWMewxC80kPanfWPrQXmixWDXXz7uf1kBTr1J/iYuls7fUsyAChXjKcKOaCF4ySqkhMTGmjNqYiG5joBUi/SZpWvgxk28pyIPhf28YULINiqmbWPBKuTCLFruV7JfRgGM87XfNEFc7tgnYx503k/0UXJfpmjx6wKbKcvV5fqrctx+OrIn++TxRxSKlTScEIwd2vG5mg/p5wsQDpiD+X91XbkReKLB25Jvp/IJaJh715RXqBzwCwlY3URonyy+oZoTD8Ym8XMMv/dMllh0LCFZkZFn2gYcLG9iO+I5S/GyxwjajQLQtwH7o+n50vimC+ES8ePOpPDwlu4oG8KhS7NL/OTdIWPIHbSa6/9DfjOq9W66EpaK57R78PpEzVNLkTP2L6lllqDT6SDhIDIvQS3SQbxG96khXgvW/rME+tiXFXi+BC0udi9keyGlc3sLBN3CP3QXzswhBGTxvz2LmRMkU3rLuSkYR1Gzr7vj1VxTN1y1iciA0DswsPZ38eB6X10Uzk6HZqjzBK+EJ5osJJJ/s3b0MFRIWYlM15TPm1uzeOk1zQ96quClQLEZbpxmV/eAduIotXUYQZjWAkTulBJt7kw9uEnLo7OpZrf8k+0ZQP0agcOTLbfrekHji86Mxr7rTwve82mePKoAkkEthE45VI+f1VqpyWNW1kbBbVVfuatKt6MEKqyTUyxSFGHk81kY7CxkgMNexiikN0+IeiUNsfuktjfOAiMfDhbTe4rtxSEPvO4CCUGaktA58TGnSO8rHdCicmGkNrwWsnXgUWjhp8bllNcnQN10TbwxYPAwQKW/JJiYQadr4THXO+vWudiq3I47vqmEM/Ab3Dlq11Q7RmRWntYOEyESbTI8PZYwbtsmjcSwBtTAIHQ5h3I633h3FpOkT2c0PlMjzj0Q/OuqaTVt639fowVppqvSlNcK5KupBnrxfKHQK+SoKSuaO8PNMkYkbcEAc9F0I4uzPfRVP/q5QkvJVsVoJ8BEWW/q1+kivHEMQfb+J2NfJjSTG+WhjHjL8eqi7FgfVewxwmqG9IOnTkwDjAHUaJMIyhVkadW/+GQjLyNP4zyHcLAdWcB5zQ2kc/blAx2RKfG+ON3RfC+iQ5Th7V2i5abkoy0pjfyOwTjIvaq9slSCtoNGBZggBDOiWwau0CX4NAIThFyqu9VWCLr8TsqhQZvQP+xrywovGs6A079U7YBjhEXyQw4Q3rbQY1EQnxTPXNlHfn9vQnuhsJnzx6PZrCqry8fidPz2U1scmAMVPHxa/injIf+hDziEU02xWm9ou67OgebktON9V6wwVotoNOzVNJhiDBlHbktBwOjX1BlJHybLox5y/7NhR7uc8f85O6xdxueabhwtJjYcBzac56v6RbuI9IRvPzOnNbltj8Hh0ftwwhWyHAyiEat0oDSEVZ925jmxJKAqTo4/uHnkozgMDsnkzXPXBDJ1sDTawXy23mXuTJOYV6ZVWrervMaGGGQpgQjAnfP7KPZro+OKt/MpnoM0NeGQgIFAiH7dU7Nl1QbcMiwO6/5nIosJtrFB8w1kpqb6OjI9BgZHG1nzTMGA++HNrl4WQNcq3SajD4C9utQYAu/fETPFMMJeCDwHRCnPuRAlqJ5t0E5h3Wlh1Nw57LQ36kDjC3lS9w0a89eI8ym6BzEA25Cdz3LQAyz94Fvjqp7MyHrpm3PzmsV/tbSLF9NJBjFmzWPQ8Tfgvj3fi8dg78tXvEatqtUhLxsNp2VCU6IzSqafxWw93+Wk47skJv5qxM+tv7CrpYKvWLEylJNEXlh7GHm9UenNf2/szZOl+54P4ZWksh1r6+rphL68QYhmqW7DqKVrc2rjzPYcvFDmKtCGL/F62i3riMV9z+LoLnuVaMn4dtpNNFmQEQ4uEhDfLYU4x8G2OHCz7gnxLCa4zE4CFo9m/+ECmdzziVumHM/P00/BESH2rxUYMBL8/9NRG5fiskFJr4AO0qNUKUCgTRgEiFsTbGXtP4DTTzc8ZAmfNJuJQE5Kp7W7U7QZnBXKepfSHkYTEqgOhqo95Jw9i56kYGt4BWwX50mC27CCW92SVMl4tbUEhBDSB36zgztz5Zts0563Kjc34B+6ZUnMIk+BiQNvqSkZHnk3rHNSaYthO72IWLIxij0hcv7n228yc82FsQLK9jmptjY6estDfH3OSMaAj+poCLKwRFXvXWb6jwM9mG4nu1yug0Cc4L89w4EYek6dnV17VBfIxB2dmFFQdp0kqx3BM9gdMAr0KS7WLOSf3cn5eDItDLP2UW7MWaIR+GJ0EGcEL3ejBdu0to6vDh04JcRMNU55usmSn3jp74myzWE3azMIT96wr39F62c3G/ldGskbqTIMTk3gMg61vNBQ0cJSIxVdcgNb3xFDowwVyIqYz54F8Rqg0uQE4FIiUGZxJhND/AWhkukqIqLLZEpxj07kPBN6Zb2pWht/X5JrC8yJzPlvFhfJndQ4jcgjFyhvymr/a17uxTKHpKNWDEoL4nNa9/Prf7TYRw6Gyo6vcwYcUHk17SMb9aEdVnx24msNCDEKbj0OVzRaA3gFJeXZPObqJKvWqFlavGpxXnP+4ZYTl0Dmcri6vMdwX687ApG+ygiGHZDwNzU68F4JMPQ9JB45vLkCsE2w50QNP1kJZlI56dVGzfK1MyRqP4J6VshesfOT4hzR6MYq373IoONlLvENdYXN6pTxo5eRzQkwk2tZ1zmZqczCytqTEhpweKcBCCZ/FhizgLm8/x5ScBlO0wEXHZm90mpmL1gR/J2CUnz3wDU99YFFKqm01AZ8q2S5Fnh81CbD687c7K2OjWlZgdvEJA9M0JT3eKdIRd9GCx6g1TO5PWTE8OOphUDKdazyYnmMqFhFxfJ//cWJTsgYbol2a7Ob/Q69Fy3kb9K7aZLzH+Kl/uCzWnqTOrQonVL7LTFPr7wbTaepfAl5zSgMInjrGXY+Gspw+fCNgEU1zyC0Suum6VFyHBjdKWft7strrOXqOSQwxsYXp4F013mN9gZyu4Hc84A4dzIHN5UNXmxNn+vPjS82JM6klySWB9pLCzLBUgXiMDllaG6fT2PSBv/b+yaruyWBVcpsOKuEaQ37W3A3t9YFRcgB5rFMDjwOn3c0lfsg+5V+dBX2EmWLTSelNZkeq67CFnxaKtnlsAJRPBqYvoWVZcJKn0zSelrO2TwnailO7zgAHaMRmQYbXo9beBs16JWf7V8LjYGS/DYUKTTE1zKECC/pK1EKf6mxIgmV+mJ+Mc8h04qep+okIIEXaN351J3N0VUk7cEEaOLE1rFF3W4vqRcodPfbLqINF6QtTsfny1+O46J5ahlamZEyxglZtpjEkKd9yKDsgwnzqoAPN5o76IsI+FRaBc8u1qLBWxpKU615chTVegNFR5V4o1T2JGwVkueD6CjAhOplPnRyv8sauMnMy2wEMARR6AmCQ8S5ebL0nCEqjSztMoUyAEjQ6FDYqkGweu48DkBR5HjwlBloKVawYcDezxKBH8WWnMpJKZj1Ol+OHMmg5iq9xDswLx0iTNkujgatOkeRU0c/GmSSH+7GTTMLQJdj51l3EkojjEwWOjw8XBOm88GqC4bWPEE+U/5XYtZNJG/X4FYjgIvVd69RYVbMEMfPSKJ825e3XQ6RBesp/G+lkMk4VIxRakyUBPLO1u0UYnNG9ExAnPdOO0OfFvcPOL9rBJO8bR+q9Lp9/i+fH32KkaNR2WgoxQY3FY+rS2NUvtCOgZAaF9vny16WG/3zeUtRP9V28PcGivAHAwwCcRk0D0iohjAfgL/EKXJkr8gIFqbNq7lXUFRKqMbpBa182ol77SqJq1M5setGUJuSBKqYBYKdDZv3XdT/u6J5aKKkLvA5ez6PuWX0RT7kELSKDKfg9w9nwSmMmJHjbnr0blM2WvpiirR/nLid6SRN9+5KoLUb+pLw3QzD8JlS3X2q0m4BNRxfltr5KWqryOuuGDt6IOHSE8/zqGXMiTqgrUOfDH58NoWe0te4mFc1GxswvhZXWJZmaWaMJo2SBnuXa7+jIfFbnhNH74Z6jygwcqXsldYfI/Zh8BZbqTh2I7Hu44dilfbX8Uh18NVB3phRnTwpUonKquUs/iZXRnDFjtEmKg2YRQm2CP1FWRb/B92HqJlHT7Hs/Tpl3RrlxvkoskpNlW53/6Ujse0fkHLNeUm97TlDsaRXpfZkR1uWMTwhPv4oYM2Bv941R+c7nQ0yBdFNVQpZRkpejmIfjFrdQUA7DPwR69aq6Pzmk3IXarIMKG6R4MBdkB3j3HWxohnZLWpaNy/BMxS+84e4vPPfO/7+nLWVZsdpUY/nGDkQts0NGnRpZK/lW60tmncMoTepY5fMbow1GyKhqSXLbOZkz59l8DG9v9ZHPwA1roKz3MW/j2tN/U+lPQVYXTa6h1ePQkSWR2bp9OHmCCvT6s8v9PVG2ufK7dkbpY500gNx7fdArzH3yCjY33Fa5TbOuybLNdW8juJyJtikDn+5jMnMzIWP/+v12XkaXj195xk6eOKuvA5zeKk1i1PrSnmWA46Ca2ldgNqJ0rvLqM9X2EPn/QuMjLnLg0iVJ4H4r5S2PgpGdSdfVoiX/rBAq6yVDc30v8DOUae4oquSM0YDCIafLQ+hvEmB5b/f+QsTFtAR0zIVWeLyYbmrx3g9gHhVRfelCz9/exh19AGsyXcwuSaBiCzQIoctYvyhhkdCsC/cdZDce/1Fav35JQt+RJFAjiMRQhCdE4eS3SmfsREHe9LZa0ElOLhxxvs5uS/SnMYssyK9FxiucRjjOqfaIp2N8CmuNJqg3WvtMk+MlbAYeji9K94rx6U7nj9L1TGhVcAyz+Gb4sib21AW94HRzWbTrRKEkx5+KLE69Vc+8Cj1Vu2GkZ1AA2E4kaJ2aTjsEL2C0srAINXRAjnxwI3p5ED0NRYn9sT1iY9GPBJwhhd6WXEJ/Z44D0rufaDOA8dUj1SIqywRs2b7SjYcCYS8eefkwdWlpN0DvnecdwHVc3TqyCcUy7K2PMS2l2KZHzZfLCTCPaPq/NVc/Nlc5hVJoFvnNUpKWZcTsxVeHfH1mnELREECq9YES9v6FcvONCxXLQmf0k3S2dyNmsxbvlXM0u7lSqkx81md0rad3E33PPuPpDGM9UiBhSeJn3Sejmx+LdLCiZYcVxow59nCqrUmXGAbsR4O7wVQzyHdL6DX5s8k5BjHXlONz0PaIqS89xMhkYetMw6w7JZ5c/oJBH2jdZPbS6KbR0RpEe16BATLzU4QiHybxArrjBM8MKKP8Zz6MVbg/d8yb76U8nQzCK4Eqa5ombBm7/6xo2dR9O/ByfcU6qDu+efdLFAP4LiCr6C3aihDPjigUYuy0voLuX3Flevl7xXRtRZ4Vc48j2tgA7tK0wqv4OjLwCzZJn9lYIQuScQBEFMBjA6Vj8FTp4h3OphB6g0uA13nTnVLmKQ+zfELl+6znWX5nCWvbwak0t3q4qwWK3MAPKE2vqDEeCsFKvmJ2Ws+VOqnrA+ekCk9jaszBsZd71InADWijT4SHnyVmc55dv5ivXl1fED4vwNrxbiZHWeGinS3ImcoDAT1vGiLpP/D3NaiIPq9A2h5DT5SgaCVCh0JKu7DKsHjW9ZAACRxHgTSo5jrVWUJfGKweg2auQuittVidB+JaCdwYd0x9oJ4jyI5UygrB9Nzi2gbLVcCnpu+1ytsiWCbJb1Xxas8FhG/EX86taG6flZZauhaGnpRyfBB5ojGdsdPBVHEtb8R951oaNTvKXK7CddSeWaeOi2FIDPEhWhAk19RzuR9wSKEwvvi8nQFz649+fUlBMuDL7VmUBSsC1ExWwqY+uSdNKowEkpsBb+/KpWl6oGxymyR/e4uKjipBJrVPXg0nE2j6HL2JbCHNh01lV+/+6FUglhV8GTypzdvdfhYc7t0ZYtkyH/17wDakU7r1GAdUIXXmtxamhK2FdelBa4BPryblCC9gJG9htJue9LMrNS7mM6gbRA1xSFnWNsziDuGZeS3Dcu4bjsWaIebrgNnxpl/pLGxV5EtkFwDeh8fPyfPU8CZAM/Ljk3+Vi7jUtNZmZM8+f7d4wlUIkTHiAULRUKu0ODFIeyk20BiqLB7vvAT342SIDP+z5FPaa6Tjyqh/AsX2jFhbeIXKxDMb8fid0jHAWk6JKhswbtvtP6bDz+lYjvXIPwV1Y+nyft2uM8c1aUxmDHAUmZnJBvZXT43mxjXDHP05R1/dKfoExcgcYzv3wO5mazi7ugS01z6oUmByKtfQ6fA2+MQynPCoDHcp1eDtag/E3HQpHMWAgGkNh9wWR5Y48YG0W4CgvOrngI111j/x+MIuH5xFlVkxqptSjW+hnVbt9qxtXndEH5RtnxWfd9eP+kli/x3LU1WGsZVAkVElXD274LBGK0bMveEUbj/6EpnocEnvRSlglpE4GiAO5S4JdYb4uYd6oeK8vuZvTQaWMS3dEIJ2ssCxWz8DqYmc/b38ynz0DWCCeF1gCyipaLG2Kq9wqfHz3S6m7CS+H42nmDYAz2dYcx77M8purGOS5tQ4aykJXIDQBwHjIGSU+52M+1OV53rp4B3JbIXecQWEjfk9gkVoz8T6HJbIhFgm3quNMk+cIyRHlj/BdURXY8o7H7dBQfsdpLJhAsxS/1JtMkY8JoP4YdyOxzJY5x/+A9scOTXvPVoQAMqgmP899s6GvRtzNFGXLX7VHSnUj7VPO8K1qxaS/a/6v/YhRlUtNgnqnth3Jo/DKbdhdPn6HgB9YjU5GuN1uPyUXZJDZYfFwMfdqNPVoI8d1csoHMK5tquGoK060mIwBHMk3pFGqBosajr9g/5kBPrrtuIIEPFZnaAKSCQqLdeQq2B6Bs8WxD8+DfzGJ2nu0Xeb58spPoiHZAVV+I5lRUseUE0IA4E844UzFYADNYcLBW3zsP7aWzLnUZoQPuIDR3FX3bkM5mCunvXaPSi4PRkKnItEv8/OYiq8RSKQcaTwxX9YgdNbgPuXLwb5ARofv0Zj3WpHhNnlTq2Qu/lwvM3PUaqv8L7kpFqQR9aRaXfFanbLgbyxJ2kAx9oA1kRMyH3JXI06oQhRiZQ1LtWz+QKKxme0zAgI2q6/dmYApsA7WGeBae5+Y3eqkqDjXyS7Q+LzYgrM3EiqGHsibaKZKgFecxpGiMLXY5+kkuDKBdMkj2Bd8uTKI+aTWpu97gNp78fm891zYuT68sIEzE5JggpWjlWFSpzYayxvnOxJ3JYK/q8WbCy14KhtCFhdLOxCEAvyqXN3K+oP52ZzdxHiCAac5LX2TO5CTmkxp6zCT5JZDIBgnnmQU8GBowEvogfPni17fE1sljd55P2C4mWCNDr8l3hMH+4zpyZqp3iFbJx20nGtU+9LJozl0OxNrk/c0C9chEe+k4vUECnUaXbS8JqdnymqbZ1SCI+4+1BYMW4nzYKDLaqL3Nm08C/Ug7zNg2BuwhWepXrkqaRX58LCWLPDQyUzn369E1drtekeuNcI4SgdmyQZ/7xhXZ6sOKg9G/HEiJQsriRQThvHz4BhaFaXic4nlrz4LhUthGBLbnnB6tufJizYx4c6b2rY1E63pLDA8QdZsTOD7euNMku1a0T2nNQ9rOPBYPDyksaP+EmKTvqcgRycKMtzhHh37mAqVERuzIIMs/zXE9jGBpJBBWb8KCPZne6Sxw0+UFlY6/VeXJUHunHXY1csfc40Tw95XrkpLzxqX/LrsaYM7Y0UQ/Qe6PTjMQUXDseSMhYwHTXCohySQ+1fIjz/yjZWRFI1/a4d9eQzWLoGjz8O8ldPhzhpWFwwlaR0T1gpMP3VeHvDOx4RJocHJOSRQ+H4/nHJsiuXWDKowYZZW8Jk9vUiw2jExedn7glAsC/bgN1NrgIp1y+y3tmLd2V9x7yKVC+QK6MOFq19dlQflj350qUavBULMCTn0BvCRQY4q6VjniU6XHISUsaApCVoQeevAOuCUFcnwWfK+44XDo1qSpPF1wcnbH7N9aO+AzD212PgFlGkXlaQ3Gbfz9XIUMjulgGUREelr6IX+tR2K9H/yep959z5WLXlZ81Z8HCIV8CyU0JKYzkIeFqf6o2ywb2O73oRi7i8F6Vcn2zU1VWZpLfSXgTNkRtqM7r5s13UimLWtAVZs97rLcMRlwXzYp98ZnKvQLj/dpKn8nfNnU9V2Bp90frlQedeKt6zd4mPR53FKQ1J4r95n1G8ph0XG37DC9b185sWbnoyC4Q1iUvyy5IOxBrIqbqn/JSUWzdrlOiZGDJrU5IGuzUl5TaupUTIgFeLfT6uh0gIEJ5nZQ/8XjB0mmEZxTvocrU/BFoOaUvV/N48W3W/aQu5nR3KwsSByfSDAEq6qBqTVTkZtkaAd/1Rie2jkdRlZvxFMu0MGnLc0SHPII8eOz/bjfIhSQhAb38dSRcFmfRb+fpDrDHeazED6EHNayy0kESoRG+XFbJa6xWB6OlbwHVDwdO9Ka7bIOqLRHpZjwXmv/2DR9nu+2xwxE39cBHq/7Vv99HcvH8ZJeGmgHr8mBKQmOCTkvLkxf5k4FrqZuNpaRNhCB3puFuF5d2nnQbhgAaANLMCYAiGsJhX2bFM/r3BGhR/dkGPXeBQUJ4tTARQnVqA07mW/42Dv2k7Wa7hWU/wv7FTIWLwWyHX0Vqdg4BHrlJ7zh+b+T6fH+W3d53LS5rkXK5GIctMIttK+osfGYIvOD0BkkXBJR0EYUmteToIxpoaMVKZmCRC2BbmBLdUTIZiI1kVYKYnq9Q5xMGODu+6vCT2ofvYE0pmGbQ9Ln6wnBDYZUD/BL9rmiPn3n28Zs33OsHUQcLp2vjUEV5sOBLO2ScyescGu0N58y1q1NSNJuXCzI4fu4RWJtSIn3P3+9eAsMo/2NupFeaf70/usLGd2Z0F27EjLoIj+nmJ4/Q5edPFhVNpPURQrUzPALNNzEvx3e82rDtPpbZjugv7Abm2q2vMGwz5W+hGH0hkCzXdZhPFbLk0sR5vVhScLgAPdZIVZIjTuzwIKVuWmvpMr7Gwxgiglpy8ecfOAZcCpXRzG6lNuRB64D4G9AWD9vQi/crWV4Xq5VjJnRjQc3g4bJe+MmksjEctghn27n5i5PHZvW/gM0BsXzo8Pou6yOLnp49dGXpK/oLAbOdOel9h+kDqEtZunvsXa9EFomdl0QbDvk+H58SjszCVqVOXSgDpOdZjXWfZpFL6S/fd1Lq8FQS3LklgiNhdvE5GzgSO8uq3gtj8I2o+JzucnrUSrtoxa6IejmVQLGzF3rSCy3fdhBPhZnDdgctC89dRJ+PTfW4ga5WWAyaWspzFg5251FoByB8LUbD3AxhvV6M1ARNXRJ4NhPe2j9WOlu5I2KmCMGvGP5CbHAyZk3YhiuIdtDgOvre9Cz0yOWvHH5FpZQzqzyHE5XkTTFMU2JhG1nvne9SCi9zNvPnGj9h/bQXgpue78rpogXJl8oDSfMwz9fp4ocyOxEV1JCEslSsRvodEzPbUsMUYWDERNzR6f45Ku6EmW3qdD48dcFQtc9rr2wF3o85edZ/2SY0BSkOdQX1ahwPVBP554Q1Z4lbd0d/vrRCO5k3QBWOb3iML0vI4MRkiKwqt735Q2fkq0Xl1pI3nk4ll51cSEHOrFTctkxwLOiQl6HJh2q3iqHFmtOCSo0A4YLl+mllolm7FLpe/79gMoe7A5cbFPCbX9Z3GhI43FgBbWoq8pwaIoDlklRimVauOx355pv7v26P0MLrgiqWTOxJaIGO/UhHf7GSOm0r1O5m1sPYYn1bathmEkYfrQLiEWQ2/3IjunsIxgAmi6t4JsxalYxE4YyvD59EpzvswOjZUvSgkHwPZonVtaiMTLXnV3p0dKpCSSz38Kv8QbNFzqLbwbBBRUHw/nHSxNipNm5vtjfkuf06jWRwkctgu8wZqKwS/7IcGnFtmwnbJFPhpGcyV9GVFzCCG+TOeNgAWxOUPgmtLdD8JawVVDV+e3iR8kHuaZXIknncI/3uFnblTd2P/OdWvxl+9CXbqJb1CS8osg2fg/qaA9KvM3FQoZQ79JRZC/Upm90ABPCGzksTWJ7Xy9VHpnPZCgGzAVbJhmurq8tm24BjBvnm1GOKfotvCqXyIXFE1bYTRS1WtzgZrGWgR/oOUDnNgDPXqUfTmyFPfNCD9MX22hvuBans/Kl1DustiTunl9Kravj0NG1Ds5nkTqlQSYOfhgvRIowimmWAYWma55eqvaQL9GvHmuH/hIVB/tiN6s7yOW2iahReL8dNddIbMJ6BLVguJ4n1dnquV3ZNqi6V0H/Vn00j0cE80ERsZTgsHPJ0eUjxYik+eDtaEHnyAsYeR2AjRcGw=="),(function(e){return e.charCodeAt(0)})),i=new Uint8Array([177,156,215,89,13,111,230,1]),o=new Uint8Array(n.length),s=new Uint8Array(256),a=0;a<256;a++)s[a]=a;var c,l=0;for(a=0;a<256;a++){var d=[s[l=(l+s[a]+i[a%i.length])%256],s[a]];s[a]=d[0],s[l]=d[1]}a=0,l=0;for(var u=0;u<0+n.length;u++){var h=[s[l=(l+s[a=(a+1)%256])%256],s[a]];s[a]=h[0],s[l]=h[1],c=s[(s[a]+s[l])%256],u>=0&&(o[u-0]=n[u-0]^c)}return A=!0,new Promise((function(n){(function(e,t){return WebAssembly.instantiate(e,t)})(o.buffer,t).then((function(t){A=!1,r=t.instance.exports,e.__wbindgen_wasm_module=t.module,n()}))}))}().then((function(){O=R.new(),e(O)}))}))).then((function(e){w=e}));var P=!0;setInterval((function(){Object(a.getParameter)("UPLOAD_LOG")&&j.info("console log upload")}),9e5);var j=function(){var e,t,n,r,i,l,d=null,u=["DEBUG","INFO","WARNING","ERROR","NONE"],h=0,p=function(e,t){if(Object(a.getParameter)("UPLOAD_LOG"))try{t=Array.prototype.slice.call(t);var n="";if(t.forEach((function(e){"object"===o()(e)&&(e=JSON.stringify(e)),n=n+e+" "})),k.push({payload:n,log_level:e}),P)return;"free"===D&&function e(t){D="uploading",setTimeout((function(){!function(e,t,n){var r={};Array.isArray(e)||(e=[e]),e=e.map((function(e){return{log_item_id:M++,log_level:e.log_level,payload_str:e.payload}})),r={timestamp:Date.now(),sdk_version:a.VERSION,process_id:Object(c.getProcessId)(),payload:JSON.stringify(e)},w?r.hash=w.get_digest("".concat(r.payload).concat(r.process_id).concat(r.timestamp)):n&&n();try{var i=d,o=d||"https://".concat(Object(a.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v2");Object(s.post)(o,r,(function(e){"OK"===e?t&&t(e):n&&n(e)}),(function(e){n&&n(e)}),i?{withCredentials:!0}:{withCredentials:!0,"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})}catch(e){n&&n(e)}}(t,(function(){L=0,0!==k.length?(x=k.length<10?k.splice(0,k.length):k.splice(0,10),e(x)):D="free"}),(function(){setTimeout((function(){e(x)}),L++<2?200:1e4)}))}),3e3)}(x=k.length<10?k.splice(0,k.length):k.splice(0,10))}catch(e){}};t=function(){for(var t=[0],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)},n=function(){for(var t=[1],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)},r=function(){for(var t=[2],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)},i=function(){for(var t=[3],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)};var f={};return l=function(e){f[e]||(r.apply(void 0,arguments),f[e]=!0)},{DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4,stopWaitJoin:function(){P=!1},enableLogUpload:function(){Object(a.setParameter)("UPLOAD_LOG",!0)},disableLogUpload:function(){Object(a.setParameter)("UPLOAD_LOG",!1)},setProxyServer:function(e){d=e?"https://".concat(e,"/ls/?h=").concat(Object(a.getParameter)("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v2"):"https://".concat(Object(a.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v2")},setLogLevel:function(e){e>4?e=4:e<0&&(e=0),h=e},log:e=function(){var e=arguments[0],t=arguments;if(t[0]=function(){var e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}()+" Agora-SDK ["+(u[e]||"DEFAULT")+"]:",p(e,t),!(e<h))switch(e){case 0:case 1:case 3:console.log.apply(console,t);break;case 2:console.warn.apply(console,t);break;default:return void console.log.apply(console,t)}},debug:t,info:n,warning:r,deprecate:l,error:i}}();t.default=j},function(e,t,n){"use strict";n.r(t),n.d(t,"report",(function(){return C})),n.d(t,"SESSION_INIT",(function(){return y})),n.d(t,"JOIN_CHOOSE_SERVER",(function(){return v})),n.d(t,"JOIN_GATEWAY",(function(){return _})),n.d(t,"PUBLISH",(function(){return E})),n.d(t,"SUBSCRIBE",(function(){return S})),n.d(t,"getProcessId",(function(){return N}));var r=n(46),i=n.n(r),o=n(7),s=n.n(o),a=n(2),c=n(0),l=n(14),d=n(28),u=n.n(d),h=n(47);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m,g,y="session_init",v="join_choose_server",_="join_gateway",E="publish",S="subscribe",T=new(n.n(h).a),b={eventType:null,sid:null,lts:null,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0},I=null,N=function(){return I||(I="process-"+u()(),c.default.info("processId: "+I)),I},C=(g=0,(m={list:{},setProxyServer:function(e){T.setProxy(e),m.proxyServerURL=e},getUrl:function(){return m.proxyServerURL?"https://".concat(m.proxyServerURL,"/rs/?h=").concat(Object(a.getParameter)("EVENT_REPORT_DOMAIN"),"&p=6443&d=events/message"):"https://".concat(Object(a.getParameter)("EVENT_REPORT_DOMAIN"),":6443/events/message")},getBackUrl:function(){return m.proxyServerURL?"https://".concat(m.proxyServerURL,"/rs/?h=").concat(Object(a.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),"&p=6443&d=events/message"):"https://".concat(Object(a.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6443/events/message")},getSessionStartTime:function(e){return m.list[e]?m.list[e].startTime:(c.default.DEBUG("[getSessionStartTime]: session ".concat(e," no exit")),0)},sessionInit:function(e,t){var n=s()({},b);n.startTime=+new Date,n.sid=e,n.cname=t.cname,m.list[e]=n;var r=s()({},{willUploadConsoleLog:Object(a.getParameter)("UPLOAD_LOG"),areaVersion:"global"},t.extend),i=s()({},n);i.eventType=y,i.appid=t.appid,i.browser=navigator.userAgent,i.build=a.BUILD,i.lts=+new Date,i.elapse=i.lts-i.startTime,i.extend=JSON.stringify(r),i.mode=t.mode,i.process=N(),i.success=t.succ,i.version=a.VERSION,delete i.startTime,m.send({type:"Session",data:i}),m._flushInvokeReport(e)},joinChooseServer2:function(e,t,n){if(m.list[e]){m.list[e].uid||(t.uid&&(m.list[e].uid=parseInt(t.uid)),t.cid&&(m.list[e].cid=parseInt(t.cid)),t.vid&&(m.list[e].vid=parseInt(t.vid)));var r=s()({},m.list[e]);r.eventType=v;var i=t.lts;r.lts=Date.now(),r.eventElapse=r.lts-i,r.chooseServerAddr=t.csAddr,r.errorCode=t.ec,r.elapse=r.lts-r.startTime,r.success=t.succ,r.chooseServerIp=t.chooseServerIp||"",r.chooseServerAddrList=JSON.stringify(t.serverList),delete r.startTime,m.send({type:"JoinChooseServer",data:r})}},joinChooseServer:function(e,t,n){if(m.list[e]){n&&(t.uid&&(m.list[e].uid=parseInt(t.uid)),t.cid&&(m.list[e].cid=parseInt(t.cid)),t.vid&&(m.list[e].vid=parseInt(t.vid)));var r=s()({},m.list[e]);r.eventType=v;var i=t.lts;r.lts=Date.now(),r.eventElapse=r.lts-i,r.chooseServerAddr=t.csAddr,r.errorCode=t.ec,r.elapse=r.lts-r.startTime,r.success=t.succ,r.chooseServerIp=t.chooseServerIp||"",r.chooseServerAddrList=JSON.stringify(t.serverList),delete r.startTime,m.send({type:"JoinChooseServer",data:r})}},reqUserAccount:function(e,t){t.vid&&(m.list[e].vid=parseInt(t.vid));var n=s()({},m.list[e]),r=t.lts;n.eventType="req_user_account",n.lts=Date.now(),n.success=t.success,n.serverAddress=t.serverAddress,n.stringUid=t.stringUid,n.uid=t.uid,n.errorCode=t.errorCode,n.elapse=n.lts-n.startTime,n.eventElapse=n.lts-r,n.extend="string"==typeof t.extend?t.extend:JSON.stringify(t.extend),delete n.startTime,m.send({type:"ReqUserAccount",data:n})},joinGateway:function(e,t){t.vid&&(m.list[e].vid=parseInt(t.vid)),t.uid&&(m.list[e].uid=parseInt(t.uid));var n=s()({},m.list[e]),r=t.lts;n.eventType=_,n.firstSuccess=t.firstSuccess,n.lts=Date.now(),n.gatewayAddr=t.addr,n.success=t.succ,n.errorCode=t.ec,n.elapse=n.lts-n.startTime,n.eventElapse=n.lts-r,delete n.startTime,m.send({type:"JoinGateway",data:n})},publish:function(e,t){var n=s()({},m.list[e]);n.eventType=E;var r=t.lts;n.lts=Date.now(),n.eventElapse=n.lts-r,n.elapse=n.lts-n.startTime,n.success=t.succ,n.errorCode=t.ec,n.audio=t.audio,n.video=t.video,n.screenshare=t.screenshare,n.publishRequestid=t.publishRequestid,n.p2pid=t.p2pid,t.videoName&&(n.videoName=t.videoName),t.audioName&&(n.audioName=t.audioName),t.screenName&&(n.screenName=t.screenName),delete n.startTime,m.send({type:"Publish",data:n}),m._flushInvokeReport(e)},subscribe:function(e,t){var n=s()({},m.list[e]);n.eventType=S;var r=t.lts;n.lts=Date.now(),n.eventElapse=n.lts-r,n.elapse=n.lts-n.startTime,n.errorCode=t.ec,n.success=t.succ,n.subscribeRequestid=t.subscribeRequestid,n.p2pid=t.p2pid,isFinite(t.peerid)?n.peer=t.peerid:n.peerSuid=""+t.peerid,"boolean"==typeof t.video&&(n.video=t.video),"boolean"==typeof t.audio&&(n.audio=t.audio),delete n.startTime,m.send({type:"Subscribe",data:n}),m._flushInvokeReport(e)},firstRemoteFrame:function(e,t){var n=s()({},m.list[e]);n.eventType="first_remote_frame";var r=t.lts;n.lts=Date.now(),n.eventElapse=n.lts-r,n.elapse=n.lts-n.startTime,n.width=t.width,n.height=t.height,n.success=t.succ,n.errorCode=t.ec,isFinite(t.peerid)?n.peer=t.peerid:n.peerSuid=""+t.peerid,delete n.startTime,m.send({type:"FirstFrame",data:n})},firstVideoReceived:function(e,t){var n=s()({},m.list[e]);n.eventType="first_video_received",n.lts=Date.now(),n.peer=t.peerid,n.uid=t.uid,n.elapse=t.elapse,n.subscribeElapse=t.subscribeElapse,n.subscribeRequestid=t.subscribeRequestid,n.p2pid=t.p2pid,m.send({type:"FirstVideoReceived",data:n})},firstAudioReceived:function(e,t){var n=s()({},m.list[e]);n.eventType="first_audio_received",n.lts=Date.now(),n.peer=t.peerid,n.uid=t.uid,n.elapse=t.elapse,n.subscribeElapse=t.subscribeElapse,n.subscribeRequestid=t.subscribeRequestid,n.p2pid=t.p2pid,m.send({type:"FirstAudioReceived",data:n})},firstVideoDecode:function(e,t){var n=s()({},m.list[e]);n.eventType="first_video_decode",n.lts=Date.now(),n.peer=t.peerid,n.uid=t.uid,n.elapse=t.elapse,n.videowidth=t.width,n.videoheight=t.height,n.subscribeElapse=t.subscribeElapse,n.subscribeRequestid=t.subscribeRequestid,n.p2pid=t.p2pid,m.send({type:"FirstVideoDecode",data:n})},firstAudioDecode:function(e,t){var n=s()({},m.list[e]);n.eventType="first_audio_decode",n.lts=Date.now(),n.uid=t.uid,n.peer=t.peerid,n.elapse=t.elapse,n.subscribeElapse=t.subscribeElapse,n.subscribeRequestid=t.subscribeRequestid,n.p2pid=t.p2pid,m.send({type:"FirstAudioDecode",data:n})},onAddAudioStream:function(e,t){var n=s()({},m.list[e]);n.eventType="on_add_audio_stream",n.lts=Date.now(),n.uid=t.uid,n.peer=t.peerid,m.send({type:"OnAddAudioStream",data:n})},onAddVideoStream:function(e,t){var n=s()({},m.list[e]);n.eventType="on_add_video_stream",n.lts=Date.now(),n.uid=t.uid,n.peer=t.peerid,m.send({type:"OnAddVideoStream",data:n})},onUpdateStream:function(e,t){var n=s()({},m.list[e]);n.eventType="on_update_stream",n.lts=Date.now(),n.uid=t.uid,n.peer=t.peerid,n.audio=t.audio,n.video=t.video,m.send({type:"OnUpdateStream",data:n})},onRemoveStream:function(e,t){var n=s()({},m.list[e]);n.eventType="on_remove_stream",n.lts=Date.now(),n.uid=t.uid,n.peer=t.peerid,m.send({type:"OnRemoveStream",data:n})},streamSwitch:function(e,t){var n=s()({},m.list[e]);n.eventType="stream_switch",n.lts=Date.now(),n.isDual=t.isdual,n.elapse=n.lts-n.startTime,n.success=n.succ,delete n.startTime,m.send({type:"StreamSwitch",data:n})},audioSendingStopped:function(e,t){var n=s()({},m.list[e]);n.eventType="audio_sending_stopped",n.lts=Date.now(),n.elapse=n.lts-n.startTime,n.reason=t.reason,n.success=t.succ,delete n.startTime,m.send({type:"AudioSendingStopped",data:n})},videoSendingStopped:function(e,t){var n=s()({},m.list[e]);n.eventType="video_sending_stopped",n.lts=Date.now(),n.elapse=n.lts-n.startTime,n.reson=t.reason,n.success=t.succ,delete n.startTime,m.send({type:"VideoSendingStopped",data:n})},requestProxyAppCenter:function(e,t){var n=s()({},m.list[e]),r=t.lts;n.eventType="request_proxy_appcenter",n.lts=Date.now(),n.eventElapse=n.lts-r,n.elapse=n.lts-n.startTime,n.extend=t.extend+"",n.APAddr=t.APAddr,n.workerManagerList=t.workerManagerList,n.response=t.response,n.errorCode=t.ec,n.success=t.succ,delete n.startTime,m.send({type:"RequestProxyAppCenter",data:n})},requestProxyWorkerManager:function(e,t){var n=s()({},m.list[e]),r=t.lts;n.eventType="request_proxy_worker_manager",n.lts=Date.now(),n.eventElapse=n.lts-r,n.elapse=n.lts-n.startTime,n.extend=t.extend,n.workerManagerAddr=t.workerManagerAddr,n.response=t.response,n.errorCode=t.ec,n.success=t.succ,delete n.startTime,m.send({type:"RequestProxyWorkerManager",data:n})},requestWorkerEvent:function(e,t){var n=s()({},m.list[e]),r=n.startTime,i=Date.now();delete(n=f({},n,{},t,{elapse:i-r,lts:i,productType:"WebRTC"})).startTime,m.send({type:"WorkerEvent",data:n})},requestApWorkerEvent:function(e,t){var n=s()({},m.list[e]),r=n.startTime,i=Date.now();n=f({},n,{},t,{elapse:i-r,lts:i}),m.send({type:"APWorkerEvent",data:n})},sendCustomReportMessage:function(e,t,n){var r={type:"UserAnalytics",data:f({sid:e},t)},i=m.getUrl(),o=!!m.proxyServerURL;Object(l.post)(i,r,(function(e){n&&n()}),(function(e){var t=m.getBackUrl();Object(l.post)(t,r,(function(e){n&&n()}),(function(e){n&&n("Failed")}),o?{timeout:Object(a.getParameter)("CUSTOMER_REPORT_TIMEOUT")}:{timeout:Object(a.getParameter)("CUSTOMER_REPORT_TIMEOUT"),"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})}),o?{timeout:Object(a.getParameter)("CUSTOMER_REPORT_TIMEOUT")}:{timeout:Object(a.getParameter)("CUSTOMER_REPORT_TIMEOUT"),"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})},joinChannelTimeOut:function(e){m.send({type:"JoinChannelTimeout",data:f({},e)})},peerPublishStatus:function(e){m.send({type:"PeerPublishStatus",data:f({},e)})},joinWebProxyAP:function(e){m.send({type:"JoinWebProxyAP",data:f({},e)})},webSocketQuit:function(e){m.send({type:"WebSocketQuit",data:f({},e)})}}).reportApiInvoke=function(e,t){var n=t.tag,r=t.name,i=t.getStates,o=t.options,s=t.timeout,l=void 0===s?6e4:s,d=t.callback,u=t.reportResult,h=void 0===u||u,p=Date.now(),m=0,y=g++,v=function(){return f({tag:n,invokeId:y,sid:e,name:r,apiInvokeTime:p,options:o},i&&{states:(t=i(),Object.keys(t).reduce((function(e,n){var r=e;return null!=t[n]&&(r[n]=t[n]),r}),{}))});var t},_=!!Object(a.getParameter)("SHOW_REPORT_INVOKER_LOG");_&&c.default.info("".concat(r," start"));var E=setTimeout((function(){C._sendApiInvoke(f({},v(),{error:"API_INVOKE_TIMEOUT",success:!1}))}),l);return function(e,t){if(clearTimeout(E),++m>1&&(e="EXECUTOR_INVOKE_".concat(m)),e)return C._sendApiInvoke(f({},v(),{success:!1,error:e},i&&{states:i()})),_&&c.default.info("".concat(r," onFailure"),e),d&&d(e);C._sendApiInvoke(f({},v(),{success:!0},h&&{result:t},{},i&&{states:i()})),_&&c.default.info("".concat(r," onSuccess")),d&&d(null,t)}},m._cachedItems=[],m._cacheInvokeReport=function(e){e.lts||(e.lts=Date.now()),m._cachedItems.push(e),m._cachedItems.length>50&&m._cachedItems.shift()},m._flushInvokeReport=function(e){if(m._cachedItems.length){var t=m._cachedItems;m._cachedItems=[],c.default.debug("Flush cached event reporting:",t.length),t.forEach((function(t,n){t.sid=e,setTimeout((function(){m._sendApiInvoke(t)}),5e3+500*n)}))}},m._sendApiInvoke=function(e){var t=e.tag,n=e.invokeId,r=e.sid,i=e.name,o=e.result,s=e.states,c=e.options,l=e.error,d=e.success,u=e.apiInvokeTime,h=e.lts,p=Object(a.getParameter)("NOT_REPORT_EVENT");if(!(t&&p instanceof Array&&-1!==p.indexOf(t)))if(m.list[r]){var g=m.list[r],y=g.startTime,v=g.cname,_=g.uid,E=g.cid,S=(h=h||Date.now())-y,T=h-u,b="";if(c)try{b=JSON.stringify(c)}catch(e){b=c.toString()}var I=f({invokeId:n,sid:r,cname:v,cid:E,lts:h,uid:_,success:d,elapse:S,apiName:i,execElapse:T},void 0!==c&&{options:b},{},void 0!==s&&{execStates:JSON.stringify(s)},{},void 0!==l&&{errorCode:JSON.stringify(l)},{},void 0!==o&&{execResult:JSON.stringify(o)});m.send({type:"ApiInvoke",data:I})}else m._cacheInvokeReport(arguments[0])},m.sendCache=[],m.sendTimer=null,m.send=function(e){if(e.data){var t=e.data;m._lastLts&&m._lastLts>=t.lts&&(t.lts=m._lastLts+1),m._lastLts=t.lts}if(m.sendCache.push(e),null===m.sendTimer)return function e(){m.sendTimer=setTimeout((function(){if(0!==m.sendCache.length){var t=m.sendCache.length<10?m.sendCache.splice(0,m.sendCache.length):m.sendCache.splice(0,10),n=m.list[t[0].data.sid].vid;return T.sendReportList(t,n),e()}m.sendTimer=null}),Object(a.getParameter)("EVENT_REPORT_SEND_INTERVAL"))}()},m)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BUILD="v3.6.11-0-gbdacc5f-dirty",t.VERSION="3.6.11";var r=0*Date.now()+11499+86604+5615+6547+846;t.SUPPORT_RESOLUTION_LIST={"90p_1":[160,90,null,null,null,null],"120p_1":[160,120,15,15,30,65],"120p_3":[120,120,15,15,30,50],"120p_4":[212,120,null,null,null,null],"180p_1":[320,180,15,15,30,140],"180p_3":[180,180,15,15,30,100],"180p_4":[240,180,15,15,30,120],"240p_1":[320,240,15,15,40,200],"240p_3":[240,240,15,15,40,140],"240p_4":[424,240,15,15,40,220],"360p_1":[640,360,15,15,80,400],"360p_3":[360,360,15,15,80,260],"360p_4":[640,360,30,30,80,600],"360p_6":[360,360,30,30,80,400],"360p_7":[480,360,15,15,80,320],"360p_8":[480,360,30,30,80,490],"360p_9":[640,360,15,15,80,800],"360p_10":[640,360,24,24,80,800],"360p_11":[640,360,24,24,80,1e3],"480p_1":[640,480,15,15,100,500,1,5],"480p_2":[640,480,30,30,100,1e3,25,30],"480p_3":[480,480,15,15,100,400],"480p_4":[640,480,30,30,100,750],"480p_6":[480,480,30,30,100,600],"480p_8":[848,480,15,15,100,610],"480p_9":[848,480,30,30,100,930],"480p_10":[640,480,10,10,100,400],"720p_1":[1280,720,15,15,120,1130,1,5],"720p_2":[1280,720,30,30,120,2e3,25,30],"720p_3":[1280,720,30,30,120,1710],"720p_5":[960,720,15,15,120,910],"720p_6":[960,720,30,30,120,1380],"1080p_1":[1920,1080,15,15,120,2080,1,5],"1080p_2":[1920,1080,30,30,120,3e3,25,30],"1080p_3":[1920,1080,30,30,120,3150],"1080p_5":[1920,1080,60,60,120,4780],"1440p_1":[2560,1440,30,30,120,4850],"1440p_2":[2560,1440,60,60,120,7350],"4k_1":[3840,2160,30,30,120,8910],"4k_3":[3840,2160,60,60,120,13500]},t.AUDIO_PROFILE_SETTINGS={speech_low_quality:[!1,!1,!0,!0],speech_standard:[!1,!1,!0,!1],music_standard:[!1,!1,!1,!1],standard_stereo:[!1,!0,!1,!1],high_quality:[!0,!1,!1,!1],high_quality_stereo:[!0,!0,!1,!1],default:[!1,!1,!1,!1]};var i={AREA_SETTING:["NORTH_AMERICA","OVERSEA"],WEBCS_DOMAIN:["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],LOG_UPLOAD_SERVER:"logservice-oversea.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1-oversea.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"statscollector-2-oversea.agora.io",ENABLE_LIVE_SERVER_LIST:!1,LIVE_SERVER_LIST:[],ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,GATEWAY_DOMAINS:["edge.agora.io"],WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,LIVESTREAMING_ALIGN:!0,HTTP_CONNECT_TIMEOUT:5e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_TIMEOUT:1e7,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,REPORT_STATS:!0,REPORT_STATS_TIMEOUT:3e3,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],FILEPATH_LENMAX:255,SUBSCRIBE_TCC:!1,PING_PONG_TIME_OUT:10,DUALSTREAM_OPERATION_CHECK:!0,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:1e3,MEDIA_ELEMENT_EXISTS_DEPTH:3,CANDIDATE_TIMEOUT:2e3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,TICKET_RENEW_TIMEOUT:828e5,LIVE_STREAMING_TIMEOUT:12e4,SHOW_REPORT_INVOKER_LOG:!1,STATS_FILTER:{transportId:!0,googTrackId:!0},FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,FORCE_CHANGED_GATEWAY_FLAG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",CHROME_NEW_STATS:!1,AP_BACKOFF_MAX_TIME:8,SET_DEFAULT_TURNSERVER:!0,TURN_SERVER_PASSWORD:r.toString(),PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",NGINX:"webrtc-cloud-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CR:!0,CRL:10,CRI:6,CUSTOMER_REPORT_TIMEOUT:5e3,LIVE_STREAMING_ADDRESS:"",CHOOSE_SERVER_FRAGEMENT_LENGTH:4,PLAN:"plan-b"};i.AREA_SETTING=["CHINA","GLOBAL"],i.WEBCS_DOMAIN=["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],i.WEBCS_DOMAIN_BACKUP_LIST=["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],i.PROXY_CS=["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],i.CDS_AP=["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],i.ACCOUNT_REGISTER=["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],i.UAP_AP=["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],i.LOG_UPLOAD_SERVER="logservice.agora.io",i.EVENT_REPORT_DOMAIN="web-2.statscollector.sd-rtn.com",i.EVENT_REPORT_BACKUP_DOMAIN="web-3.statscollector.sd-rtn.com",i.GATEWAY_DOMAINS=["edge.agora.io","edge.sd-rtn.com"],i.NGINX="webrtc-cloud-proxy.sd-rtn.com",i.PROXY_SERVER_TYPE3=["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],t.setParameter=function(e,t){return void 0!==i[e]&&(i[e]=t,!0)},t.getParameter=function(e){return void 0!==i[e]?i[e]:null}},function(e,t,n){"use strict";n.r(t),n.d(t,"checkValidObject",(function(){return c})),n.d(t,"checkValidString",(function(){return l})),n.d(t,"checkValidNumber",(function(){return d})),n.d(t,"checkValidArray",(function(){return u})),n.d(t,"checkValidFloatNumber",(function(){return h})),n.d(t,"checkValidBoolean",(function(){return p})),n.d(t,"checkValidEnum",(function(){return a})),n.d(t,"checkValidUID",(function(){return f})),n.d(t,"isValidString",(function(){return m})),n.d(t,"isValidNumber",(function(){return g})),n.d(t,"isValidBoolean",(function(){return v})),n.d(t,"isASCII",(function(){return S})),n.d(t,"isInteger",(function(){return T})),n.d(t,"isNumber",(function(){return b})),n.d(t,"isString",(function(){return I})),n.d(t,"isArray",(function(){return N})),n.d(t,"isEmpty",(function(){return C})),n.d(t,"isValidToken",(function(){return _})),n.d(t,"isValidChannelName",(function(){return E}));var r=n(11),i=n.n(r),o=n(10),s=n(0),a=function(e,t,n){for(var r=0;r<n.length;r++)if(e===n[r])return!0;throw new Error("".concat(t," can only be set as ").concat(JSON.stringify(n)))},c=function(e,t){if(!e)throw new Error("Invalid param: ".concat(t||"param"," cannot be empty"));if("object"!==i()(e))throw new Error("".concat(t||"This paramter"," is of the object type"));return!0},l=function(e,t,n,r,i){if(C(n)&&(n=1),r=r||255,C(i)&&(i=!0),C(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!m(e,n,r,i))throw new Error("Invalid ".concat(t||"string param",": Length of the string: [").concat(n,",").concat(r,"].").concat(i?" ASCII characters only.":""))},d=function(e,t,n,r){if(C(n)&&(n=1),r=r||1e4,C(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!g(e,n,r))throw new Error("Invalid ".concat(t||"number param",": The value range is [").concat(n,",").concat(r,"]. integer only"))},u=function(e,t){if(!Array.isArray(e))throw new Error("".concat(t," should be an array"))},h=function(e,t,n,r){if(null==e)throw new Error("".concat(t||"param"," cannot be null"));if(C(n)&&(n=0),r=r||1e4,C(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!y(e,n,r))throw new Error("Invalid ".concat(t||"number param",": The value range is [").concat(n,",").concat(r,"]."))},p=function(e,t){if(C(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!v(e))throw new Error("Invalid ".concat(t||"boolean param",": The value is of the boolean type."))},f=function(e){if(!Object(o.is32Uint)(e)&&!m(e,1,255))throw s.default.error("Invalid UID ".concat(e," ").concat(i()(e))),new Error("[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]")},m=function(e,t,n,r){return t||(t=0),n||(n=Number.MAX_SAFE_INTEGER),C(r)&&(r=!0),I(e)&&(!r||S(e))&&e.length>=t&&e.length<=n},g=function(e,t,n){return T(e)&&e>=t&&e<=n},y=function(e,t,n){return b(e)&&e>=t&&e<=n},v=function(e){return"boolean"==typeof e},_=function(e){return m(e,1,2047)},E=function(e){return I(e)&&/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e)},S=function(e){if("string"==typeof e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(n<0||n>255)return!1}return!0}},T=function(e){return"number"==typeof e&&e%1==0},b=function(e){return"number"==typeof e},I=function(e){return"string"==typeof e},N=function(e){return e instanceof Array},C=function(e){return null==e}},function(e,t,n){"use strict";n.r(t),n.d(t,"getBrowserInfo",(function(){return v})),n.d(t,"getBrowserVersion",(function(){return h})),n.d(t,"getBrowserOS",(function(){return p})),n.d(t,"isChrome",(function(){return r})),n.d(t,"isSafari",(function(){return i})),n.d(t,"isFireFox",(function(){return s})),n.d(t,"isOpera",(function(){return a})),n.d(t,"isEdge",(function(){return o})),n.d(t,"isQQBrowser",(function(){return c})),n.d(t,"isWeChatBrowser",(function(){return l})),n.d(t,"isLegacyChrome",(function(){return m})),n.d(t,"isSupportedPC",(function(){return d})),n.d(t,"isSupportedMobile",(function(){return u})),n.d(t,"getChromeKernelVersion",(function(){return y})),n.d(t,"isChromeKernel",(function(){return f}));var r=function(){var e=v();return e.name&&"Chrome"===e.name},i=function(){var e=v();return e.name&&"Safari"===e.name},o=function(){var e=v();return e.name&&"Edge"===e.name},s=function(){var e=v();return e.name&&"Firefox"===e.name},a=function(){var e=v();return e.name&&"OPR"===e.name},c=function(){var e=v();return e.name&&"QQBrowser"===e.name},l=function(){var e=v();return e.name&&"MicroMessenger"===e.name},d=function(){var e=p();return"Linux"===e||"Mac OS X"===e||"Mac OS"===e||-1!==e.indexOf("Windows")},u=function(){var e=p();return"Android"===e||"iOS"===e},h=function(){return v().version},p=function(){return v().os},f=function(){return!!navigator.userAgent.match(/chrome\/[\d]+/i)};function m(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}var g,y=function(){var e=navigator.userAgent.match(/chrome\/[\d]+/i);return e&&e[0]&&e[0].split("/")[1]},v=(g=function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];"Chrome"===n[1]&&null!=(e=t.match(/(OPR(?=\/))\/?(\d+)/i))&&(n=e),"Safari"===n[1]&&null!=(e=t.match(/version\/(\d+)/i))&&(n[2]=e[1]),~t.toLowerCase().indexOf("qqbrowser")&&null!=(e=t.match(/(qqbrowser(?=\/))\/?(\d+)/i))&&(n=e),~t.toLowerCase().indexOf("micromessenger")&&null!=(e=t.match(/(micromessenger(?=\/))\/?(\d+)/i))&&(n=e),~t.toLowerCase().indexOf("edge")&&null!=(e=t.match(/(edge(?=\/))\/?(\d+)/i))&&(n=e),~t.toLowerCase().indexOf("trident")&&null!=(e=/\brv[ :]+(\d+)/g.exec(t)||[])&&(n=[null,"IE",e[1]]);var r=void 0,i=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var o in i){var s=i[o];if(s.r.test(navigator.userAgent)){r=s.s;break}}return{name:n[1],version:n[2],os:r}}(),function(){return g})},function(e,t,n){"use strict";n.r(t),n.d(t,"APErrorCode",(function(){return r})),n.d(t,"GatewayErrorCode",(function(){return i})),n.d(t,"StringUidErrorCode",(function(){return o})),n.d(t,"JOIN_GS_TRYNEXT_LIST",(function(){return s})),n.d(t,"JOIN_CS_RETRY_LIST",(function(){return a})),n.d(t,"JOIN_PROXY_RETRY_LIST",(function(){return c})),n.d(t,"INJECT_STREAM_STATUS",(function(){return l})),n.d(t,"WEBSOCKET_CLOSE_REASON",(function(){return d}));var r={1010100:"NO_FLAG_SET",1010101:"FLAG_SET_BUT_EMPTY",1010102:"INVALID_FALG_SET",2010005:"INVALID_VENDOR_KEY",2010007:"INVALID_CHANNEL_NAME",2010008:"INTERNAL_ERROR",2010009:"NO_AUTHORIZED",2010010:"DYNAMIC_KEY_TIMEOUT",2010011:"NO_ACTIVE_STATUS",2010013:"DYNAMIC_KEY_EXPIRED",2010014:"STATIC_USE_DYANMIC_KEY",2010015:"DYNAMIC_USE_STATIC_KEY",2010016:"USER_OVERLOAD",2010018:"FORBIDDEN_REGION",2010019:"CANNOT_MEET_AREA_DEMAND"},i={2e3:"ERR_NO_VOCS_AVAILABLE",2001:"ERR_NO_VOS_AVAILABLE",2002:"ERR_JOIN_CHANNEL_TIMEOUT",2003:"WARN_REPEAT_JOIN",2004:"ERR_JOIN_BY_MULTI_IP",2011:"ERR_NOT_JOINED",2012:"WARN_REPEAT_JOIN",2013:"ERR_INVALID_VENDOR_KEY",2014:"ERR_INVALID_CHANNEL_NAME",2015:"ERR_INVALID_STRINGUID",2016:"ERR_TOO_MANY_USERS",2017:"ERR_SET_CLIENT_ROLE_TIMEOUT",2018:"ERR_SET_CLIENT_ROLE_NO_PERMISSION",2019:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",2020:"ERR_PUBLISH_REQUEST_INVALID",2021:"ERR_SUBSCRIBE_REQUEST_INVALID",2022:"ERR_NOT_SUPPORTED_MESSAGE",2023:"ERR_ILLEAGAL_PLUGIN",2028:"ILLEGAL_AES_PASSWORD",101:"ERR_INVALID_VENDOR_KEY",102:"ERR_INVALID_CHANNEL_NAME",103:"WARN_NO_AVAILABLE_CHANNEL",104:"WARN_LOOKUP_CHANNEL_TIMEOUT",105:"WARN_LOOKUP_CHANNEL_REJECTED",106:"WARN_OPEN_CHANNEL_TIMEOUT",107:"WARN_OPEN_CHANNEL_REJECTED",108:"WARN_REQUEST_DEFERRED",109:"ERR_DYNAMIC_KEY_TIMEOUT",110:"ERR_NO_AUTHORIZED",111:"ERR_VOM_SERVICE_UNAVAILABLE",112:"ERR_NO_CHANNEL_AVAILABLE_CODE",113:"ERR_TOO_MANY_USERS",114:"ERR_MASTER_VOCS_UNAVAILABLE",115:"ERR_INTERNAL_ERROR",116:"ERR_NO_ACTIVE_STATUS",117:"ERR_INVALID_UID",118:"ERR_DYNAMIC_KEY_EXPIRED",119:"ERR_STATIC_USE_DYANMIC_KE",120:"ERR_DYNAMIC_USE_STATIC_KE",2:"K_TIMESTAMP_EXPIRED",3:"K_CHANNEL_PERMISSION_INVALID",4:"K_CERTIFICATE_INVALID",5:"K_CHANNEL_NAME_EMPTY",6:"K_CHANNEL_NOT_FOUND",7:"K_TICKET_INVALID",8:"K_CHANNEL_CONFLICTED",9:"K_SERVICE_NOT_READY",10:"K_SERVICE_TOO_HEAVY",14:"K_UID_BANNED",15:"K_IP_BANNED",16:"K_CHANNEL_BANNED"},o={1:"ERROR_ILLEAGAL_APPID",2:"ERROR_ILLEAGAL_UID",3:"INTERNAL_SERVER_ERROR"},s=["ERR_NO_VOCS_AVAILABLE","ERR_NO_VOS_AVAILABLE","ERR_JOIN_CHANNEL_TIMEOUT","WARN_LOOKUP_CHANNEL_TIMEOUT","WARN_OPEN_CHANNEL_TIMEOUT","ERR_VOM_SERVICE_UNAVAILABLE","ERR_TOO_MANY_USERS","ERR_MASTER_VOCS_UNAVAILABLE","ERR_INTERNAL_ERROR"],a=["NO_SERVICE_AVAILABLE"],c=["NO_SERVICE_AVAILABLE","REQUEST_PROXY_SERVER_FAILED","REQUEST_PROXY_SERVER_TIME_OUT"],l={INJECT_STREAM_STATUS_START_SUCCESS:0,INJECT_STREAM_STATUS_START_ALREADY_EXISTS:1,INJECT_STREAM_STATUS_START_UNAUTHORIZED:2,INJECT_STREAM_STATUS_START_TIMEDOUT:3,INJECT_STREAM_STATUS_START_FAILED:4,INJECT_STREAM_STATUS_STOP_SUCCESS:5,INJECT_STREAM_STATUS_STOP_NOT_FOUND:6,INJECT_STREAM_STATUS_STOP_UNAUTHORIZED:7,INJECT_STREAM_STATUS_STOP_TIMEDOUT:8,INJECT_STREAM_STATUS_STOP_FAILED:9,INJECT_STREAM_STATUS_BROKEN:10},d={WS_DISCONNECT:"WS_DISCONNECT"};t.default={FAILED:"FAILED",INVALID_KEY:"INVALID_KEY",INVALID_CLIENT_MODE:"INVALID_CLIENT_MODE",INVALID_CLIENT_CODEC:"INVALID_CLIENT_CODEC",CLIENT_MODE_CODEC_MISMATCH:"CLIENT_MODE_CODEC_MISMATCH",WEB_API_NOT_SUPPORTED:"WEB_API_NOT_SUPPORTED",INVALID_PARAMETER:"INVALID_PARAMETER",NO_TRACK_IN_STREAM:"NO_TRACK_IN_STREAM",INVALID_OPERATION:"INVALID_OPERATION",INVALID_LOCAL_STREAM:"INVALID_LOCAL_STREAM",INVALID_REMOTE_STREAM:"INVALID_REMOTE_STREAM",INVALID_DYNAMIC_KEY:"INVALID_DYNAMIC_KEY",DYNAMIC_KEY_TIMEOUT:"DYNAMIC_KEY_TIMEOUT",NO_VOCS_AVAILABLE:"NO_VOCS_AVAILABLE",NO_VOS_AVAILABLE:"ERR_NO_VOS_AVAILABLE",JOIN_CHANNEL_TIMEOUT:"ERR_JOIN_CHANNEL_TIMEOUT",NO_AVAILABLE_CHANNEL:"NO_AVAILABLE_CHANNEL",LOOKUP_CHANNEL_TIMEOUT:"LOOKUP_CHANNEL_TIMEOUT",LOOKUP_CHANNEL_REJECTED:"LOOKUP_CHANNEL_REJECTED",OPEN_CHANNEL_TIMEOUT:"OPEN_CHANNEL_TIMEOUT",OPEN_CHANNEL_REJECTED:"OPEN_CHANNEL_REJECTED",REQUEST_DEFERRED:"REQUEST_DEFERRED",STREAM_ALREADY_PUBLISHED:"STREAM_ALREADY_PUBLISHED",STREAM_NOT_YET_PUBLISHED:"STREAM_NOT_YET_PUBLISHED",JOIN_TOO_FREQUENT:"JOIN_TOO_FREQUENT",SOCKET_ERROR:"SOCKET_ERROR",SOCKET_DISCONNECTED:"SOCKET_DISCONNECTED",PEERCONNECTION_FAILED:"PEERCONNECTION_FAILED",CONNECT_GATEWAY_ERROR:"CONNECT_GATEWAY_ERROR",SERVICE_NOT_AVAILABLE:"SERVICE_NOT_AVAILABLE",JOIN_CHANNEL_FAILED:"JOIN_CHANNEL_FAILED",PUBLISH_STREAM_FAILED:"PUBLISH_STREAM_FAILED",UNPUBLISH_STREAM_FAILED:"UNPUBLISH_STREAM_FAILED",SUBSCRIBE_STREAM_FAILED:"SUBSCRIBE_STREAM_FAILED",UNSUBSCRIBE_STREAM_FAILED:"UNSUBSCRIBE_STREAM_FAILED",NO_SUCH_REMOTE_STREAM:"NO_SUCH_REMOTE_STREAM",ERR_FAILED:"1",ERR_INVALID_VENDOR_KEY:"101",ERR_INVALID_CHANNEL_NAME:"102",WARN_NO_AVAILABLE_CHANNEL:"103",WARN_LOOKUP_CHANNEL_TIMEOUT:"104",WARN_LOOKUP_CHANNEL_REJECTED:"105",WARN_OPEN_CHANNEL_TIMEOUT:"106",WARN_OPEN_CHANNEL_REJECTED:"107",WARN_REQUEST_DEFERRED:"108",ERR_DYNAMIC_KEY_TIMEOUT:"109",ERR_INVALID_DYNAMIC_KEY:"110",ERR_NO_VOCS_AVAILABLE:"2000",ERR_NO_VOS_AVAILABLE:"2001",ERR_JOIN_CHANNEL_TIMEOUT:"2002",IOS_NOT_SUPPORT:"IOS_NOT_SUPPORT",WECHAT_NOT_SUPPORT:"WECHAT_NOT_SUPPORT",SHARING_SCREEN_NOT_SUPPORT:"SHARING_SCREEN_NOT_SUPPORT",STILL_ON_PUBLISHING:"STILL_ON_PUBLISHING",LOW_STREAM_ALREADY_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",LOW_STREAM_NOT_YET_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",HIGH_STREAM_NOT_VIDEO_TRACE:"HIGH_STREAM_NOT_VIDEO_TRACE",NOT_FIND_DEVICE_BY_LABEL:"NOT_FIND_DEVICE_BY_LABEL",ENABLE_DUALSTREAM_FAILED:"ENABLE_DUALSTREAM_FAILED",DISABLE_DUALSTREAM_FAILED:"DISABLE_DUALSTREAM_FAILED",PLAYER_NOT_FOUND:"PLAYER_NOT_FOUND",ELECTRON_NOT_SUPPORT_SHARING_SCREEN:"ELECTRON_NOT_SUPPORT_SHARING_SCREEN",BAD_ENVIRONMENT:"BAD_ENVIRONMENT",LOAD_AUDIO_FAILED:"LOAD_AUDIO_FAILED"}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n(0);var r=function(e,t,n){if(["End2EndDelay","TransportDelay","PacketLossRate","RecvLevel","RecvBitrate","CodecType","MuteState","TotalFreezeTime","TotalPlayDuration","RecordingLevel","SendLevel","SamplingRate","SendBitrate","CodecType","MuteState","End2EndDelay","TransportDelay","PacketLossRate","RecvBitrate","RecvResolutionWidth","RecvResolutionHeight","RenderResolutionHeight","RenderResolutionWidth","RenderFrameRate","TotalFreezeTime","TotalPlayDuration","TargetSendBitrate","SendFrameRate","SendFrameRate","SendBitrate","SendResolutionWidth","SendResolutionHeight","CaptureResolutionHeight","CaptureResolutionWidth","EncodeDelay","MuteState","TotalFreezeTime","TotalDuration","CaptureFrameRate","RTT","OutgoingAvailableBandwidth","Duration","UserCount","SendBytes","RecvBytes","SendBitrate","RecvBitrate","accessDelay","audioSendBytes","audioSendPackets","videoSendBytes","videoSendPackets","videoSendPacketsLost","videoSendFrameRate","audioSendPacketsLost","videoSendResolutionWidth","videoSendResolutionHeight","accessDelay","audioReceiveBytes","audioReceivePackets","audioReceivePacketsLost","videoReceiveBytes","videoReceivePackets","videoReceivePacketsLost","videoReceiveFrameRate","videoReceiveDecodeFrameRate","videoReceiveResolutionWidth","videoReceiveResolutionHeight","endToEndDelay","videoReceiveDelay","audioReceiveDelay","FirstFrameTime","VideoFreezeRate","AudioFreezeRate","RenderResolutionWidth","RenderResolutionHeight","VideoPublishDuration","AudioPublishDuration"].indexOf(t)>-1&&("string"==typeof n||isFinite(n)))return e[t]=""+n},i=function(e){var t={};return e.forEach((function(e){e.id&&e.type&&(-1===e.id.indexOf("send")&&-1===e.type.toLowerCase().indexOf("outbound")&&-1===e.id.indexOf("outbound_rtp")&&-1===e.id.indexOf("OutboundRTP")||("audio"===e.mediaType?(r(t,"audioSendBytes",e.bytesSent),r(t,"audioSendPackets",e.packetsSent),r(t,"audioSendPacketsLost",e.packetsLost)):(r(t,"videoSendBytes",e.bytesSent),r(t,"videoSendPackets",e.packetsSent),r(t,"videoSendPacketsLost",e.packetsLost),r(t,"videoSendFrameRate",e.googFrameRateSent),r(t,"videoSendResolutionWidth",e.googFrameWidthSent),r(t,"videoSendResolutionHeight",e.googFrameHeightSent))))})),t},o=function(e){var t={};return e.forEach((function(e){e.id&&e.type&&(-1===e.id.indexOf("recv")&&-1===e.type.toLowerCase().indexOf("inbound")&&-1===e.id.indexOf("inbound_rtp")&&-1===e.id.indexOf("inbound-rtp")&&-1===e.id.indexOf("InboundRTP")||("audio"===e.mediaType?(r(t,"audioReceiveBytes",e.bytesReceived),r(t,"audioReceivePackets",e.packetsReceived),r(t,"audioReceivePacketsLost",e.packetsLost)):(r(t,"videoReceiveBytes",e.bytesReceived),r(t,"videoReceivePacketsLost",e.packetsLost),r(t,"videoReceivePackets",e.packetsReceived),r(t,"videoReceiveFrameRate",e.googFrameRateReceived),r(t,"videoReceiveDecodeFrameRate",e.googFrameRateDecoded),r(t,"videoReceiveResolutionWidth",e.googFrameWidthReceived),r(t,"videoReceiveResolutionHeight",e.googFrameHeightReceived))))})),t}},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l}));var r=n(0),i=function(){var e={dispatcher:{}};return e.dispatcher.eventListeners={},e.addEventListener=function(t,n){void 0===e.dispatcher.eventListeners[t]&&(e.dispatcher.eventListeners[t]=[]),e.dispatcher.eventListeners[t].push(n)},e.hasListeners=function(t){return!(!e.dispatcher.eventListeners[t]||!e.dispatcher.eventListeners[t].length)},e.on=e.addEventListener,e.removeEventListener=function(t,n){var r;e.dispatcher.eventListeners[t]&&-1!==(r=e.dispatcher.eventListeners[t].indexOf(n))&&e.dispatcher.eventListeners[t].splice(r,1)},e.dispatchEvent=function(t){var n;for(n in e.dispatcher.eventListeners[t.type])if(e.dispatcher.eventListeners[t.type]&&e.dispatcher.eventListeners[t.type].hasOwnProperty(n)&&"function"==typeof e.dispatcher.eventListeners[t.type][n])try{e.dispatcher.eventListeners[t.type][n](t)}catch(n){r.default.debug("[".concat(e.clientId,"] Error in ").concat(t.type," event"),n)}},e.dispatchSocketEvent=function(t){var n;for(n in e.dispatcher.eventListeners[t.type])e.dispatcher.eventListeners[t.type]&&e.dispatcher.eventListeners[t.type].hasOwnProperty(n)&&"function"==typeof e.dispatcher.eventListeners[t.type][n]&&e.dispatcher.eventListeners[t.type][n](t.msg)},e},o=function(e){var t={};return t.type=e.type,t},s=function(e){var t=o(e);return t.stream=e.stream,t.reason=e.reason,t.msg=e.msg,t},a=function(e){var t=o(e);return t.uid=e.uid,t.attr=e.attr,t.stream=e.stream,t},c=function(e){var t=o(e);return t.msg=e.msg,t},l=function(e){var t=o(e);return t.url=e.url,t.uid=e.uid,t.status=e.status,t.reason=e.reason,t}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=a(n(69)),l=n(2),d=a(n(0)),u=n(3),h=n(14),p=n(10),f=function(e){function t(t,n){var r=e.call(this)||this;return r._state=_.RELAY_STATE_IDLE,r._onStatus=function(e){d.default.debug("["+r.clientId+"] ChannelMediaStatus: "+JSON.stringify(e)),e&&e.command&&("onAudioPacketReceived"===e.command&&r.emit("event",v.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===e.command&&r.emit("event",v.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===e.command&&(r._state=_.RELAY_STATE_FAILURE,r.emit("state",_.RELAY_STATE_FAILURE,E.SRC_TOKEN_EXPIRED)),"onDestTokenPrivilegeDidExpire"===e.command&&(r._state=_.RELAY_STATE_FAILURE,r.emit("state",_.RELAY_STATE_FAILURE,E.DEST_TOKEN_EXPIRED,e.channelName?{came:e.channelName}:null)))},r._onClose=function(){return o(r,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:if(d.default.debug("["+this.clientId+"] ChannelMediaSocket onClose"),this.emit("event",v.NETWORK_DISCONNECTED),this.state=_.RELAY_STATE_IDLE,!this._prevChannelMediaConfig)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.startChannelMediaRelay(this._prevChannelMediaConfig)];case 2:return t.sent(),[3,4];case 3:return(e=t.sent())instanceof T&&(e.message===g.WS_ABORT||e.message===g.AP_REQUEST_ABORT)?[2]:(this.emit("state",_.RELAY_STATE_FAILURE,E.SERVER_CONNECTION_LOST),[3,4]);case 4:return[2]}}))}))},r.token=t.appId,r.appId=t.appId,r.cname=t.cname,r.uid=t.uid,r.sid=t.sid,r.clientId=n,r}return i(t,e),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){var t=this._state;this._state=e,t!==e&&this.emit("state",e)},enumerable:!0,configurable:!0}),t.prototype.startChannelMediaRelay=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:if(this.state!==_.RELAY_STATE_IDLE)throw new T(g.BAD_STATE);return this.state=_.RELAY_STATE_CONNECTING,[4,this._connect()];case 1:return t.sent(),d.default.debug("["+this.clientId+"] startChannelMediaRelay: connect success"),[4,this._sendStartRelayMessage(e)];case 2:return t.sent(),this._prevChannelMediaConfig=e,[2]}}))}))},t.prototype.updateChannelMediaRelay=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:if(this.state!==_.RELAY_STATE_RUNNING)throw new T(g.BAD_STATE);return[4,this._sendUpdateMessage(e)];case 1:return t.sent(),this._prevChannelMediaConfig=e,[2]}}))}))},t.prototype.stopChannelMediaRelay=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this._sendStopRelayMessage()];case 1:return e.sent(),d.default.debug("["+this.clientId+"] stopChannelMediaRelay: send stop message success"),this.state=_.RELAY_STATE_IDLE,this.dispose(),[2]}}))}))},t.prototype.dispose=function(){d.default.debug("["+this.clientId+"] disposeChannelMediaRelay"),this.state=_.RELAY_STATE_IDLE,this.emit("dispose"),this._signal&&this._signal.dispose(),this._prevChannelMediaConfig=null,this.removeEvent()},t.prototype._requestOneAP=function(e){var t=this;return new Promise((function(n,r){var i={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:"",ts:+new Date,version:l.VERSION,cname:t.cname,uid:t.uid+"",seq:1,requestId:1},o={service_name:"tele_channel",json_body:JSON.stringify(i)},s="https://"+e;h.post(s,o,(function(e){var t=null,i=null;try{t=JSON.parse(e)}catch(e){r(new T(g.AP_JSON_PARSE_ERROR,e))}0!==t.code&&r(new T(g.AP_REQUEST_ERROR,t));try{i=JSON.parse(t.json_body)}catch(e){r(new T(g.AP_JSON_PARSE_ERROR,e))}200!==i.code&&r(new T(g.AP_REQUEST_ERROR,i)),i.servers?n(i.servers):r(new T(g.AP_JSON_PARSE_ERROR,i))}),(function(e){return r(e)}),{"X-Packet-Service-Type":0,"X-Packet-URI":61})}))},t.prototype._requestAP=function(){var e=this,t=l.getParameter("UAP_AP");return new Promise((function(n,r){setTimeout((function(){r(new T(g.AP_REQUEST_TIMEOUT))}),5e3),e.on("dispose",(function(){r(new T(g.AP_REQUEST_ABORT))})),t.forEach((function(t){t+="/api/v1",e._requestOneAP(t).then((function(r){d.default.debug("["+e.clientId+"] startChannelMediaRelay request AP "+t+" success: "+JSON.stringify(r));var i=r[0],o="wss://"+i.address.replace(/\./g,"-")+".edge.agora.io:"+i.wss;n(o)})).catch((function(n){d.default.debug("["+e.clientId+"] startChannelMediaRelay request AP "+t+" failed: "+JSON.stringify(n))}))}))}))},t.prototype._connectWebsocket=function(e){return this._signal=new S(this.appId,this.cname,this.uid,this.sid),this._signal.connect(e)},t.prototype._connect=function(){return o(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return[4,this._requestAP()];case 1:return e=t.sent(),[4,this._connectWebsocket(e)];case 2:return t.sent(),this._signal.on("close",this._onClose.bind(this)),this._signal.on("status",this._onStatus.bind(this)),this.emit("event",v.NETWORK_CONNECTED),[2]}}))}))},t.prototype._sendStartRelayMessage=function(e){return o(this,void 0,void 0,(function(){var t,n,r,i,o,a;return s(this,(function(s){switch(s.label){case 0:return this._checkSignal(),t=this._genMessage(y.StopPacketTransfer),[4,this._signal.request(t)];case 1:return s.sent(),[4,this._signal.waitStatus("Normal Quit")];case 2:return s.sent(),d.default.debug("["+this.clientId+"] startChannelMediaRelay: StopPacketTransfer success"),n=this._genMessage(y.SetSdkProfile,e),[4,this._signal.request(n)];case 3:return s.sent(),d.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSdkProfile success"),r=this._genMessage(y.SetSourceChannel,e),[4,this._signal.request(r)];case 4:return s.sent(),[4,this._signal.waitStatus("SetSourceChannelStatus")];case 5:return s.sent(),this.emit("event",v.PACKET_JOINED_SRC_CHANNEL),d.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceChannel success"),i=this._genMessage(y.SetSourceUserId,e),[4,this._signal.request(i)];case 6:return s.sent(),d.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceUserId success"),o=this._genMessage(y.SetDestChannel,e),[4,this._signal.request(o)];case 7:return s.sent(),[4,this._signal.waitStatus("SetDestChannelStatus")];case 8:return s.sent(),this.emit("event",v.PACKET_JOINED_DEST_CHANNEL),d.default.debug("["+this.clientId+"] startChannelMediaRelay: SetDestChannel success"),a=this._genMessage(y.StartPacketTransfer,e),[4,this._signal.request(a)];case 9:return s.sent(),this.emit("event",v.PACKET_SENT_TO_DEST_CHANNEL),this.state=_.RELAY_STATE_RUNNING,d.default.debug("["+this.clientId+"] startChannelMediaRelay: StartPacketTransfer success"),[2]}}))}))},t.prototype._sendReconnectMessage=function(e){return o(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return this._checkSignal(),t=this._genMessage(y.Reconnect,e),[4,this._signal.request(t)];case 1:return n.sent(),[2]}}))}))},t.prototype._sendUpdateMessage=function(e){return o(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return this._checkSignal(),t=this._genMessage(y.UpdateDestChannel,e),[4,this._signal.request(t)];case 1:return n.sent(),this.emit("event",v.PACKET_UPDATE_DEST_CHANNEL),d.default.debug("["+this.clientId+"] sendUpdateMessage: UpdateDestChannel success"),[2]}}))}))},t.prototype._sendStopRelayMessage=function(){return o(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return this._checkSignal(),e=this._genMessage(y.StopPacketTransfer),[4,this._signal.request(e)];case 1:return t.sent(),d.default.debug("["+this.clientId+"] sendStopRelayMessage: StopPacketTransfer success"),[2]}}))}))},t.prototype._genMessage=function(e,t){var n=this,r=[],i=[],o=[],s={appId:this.appId,cname:this.cname,uid:this.uid+"",sdkVersion:l.VERSION,sid:this.sid,ts:+new Date,requestId:0,seq:0,allocate:!0,clientRequest:{}},a=null;switch(e){case y.SetSdkProfile:return s.clientRequest={command:"SetSdkProfile",type:"multi_channel"},s;case y.SetSourceChannel:return a=t.getSrcChannelMediaInfo(),s.clientRequest={command:"SetSourceChannel",uid:a.uid+"",channelName:a.channelName,token:a.token||this.appId},s;case y.SetSourceUserId:return a=t.getSrcChannelMediaInfo(),s.clientRequest={command:"SetSourceUserId",uid:this.uid+""},s;case y.SetDestChannel:return t.getDestChannelMediaInfos().forEach((function(e){r.push(e.channelName),i.push(e.uid+""),o.push(e.token||n.appId)})),s.clientRequest={command:"SetDestChannel",channelName:r,uid:i,token:o},s;case y.StartPacketTransfer:return s.clientRequest={command:"StartPacketTransfer"},s;case y.Reconnect:return s.clientRequest={command:"Reconnect"},s;case y.StopPacketTransfer:return s.clientRequest={command:"StopPacketTransfer"},s;case y.UpdateDestChannel:return t.getDestChannelMediaInfos().forEach((function(e){r.push(e.channelName),i.push(e.uid+""),o.push(e.token||n.appId)})),s.clientRequest={command:"UpdateDestChannel",channelName:r,uid:i,token:o},s}},t.prototype._checkSignal=function(){if(!this._signal||!this._signal.isConnect())throw new T(g.WS_DISCONNECTED)},t}(c.default);t.default=f;var m=function(){function e(){this.destChannelMediaInfos=new Map}return e.prototype.setSrcChannelInfo=function(e){u.checkValidObject(e,"srcInfo");var t=e.uid,n=e.channelName,r=e.token;if(r&&!u.isValidToken(r))throw new Error("Invalid token in SrcChannelInfo");if(!u.isValidChannelName(n))throw new Error("Invalid channelName in SrcChannelInfo");if(!p.is32Uint(t))throw new Error("Invalid uid in SrcChannelInfo");this.srcChannelMediaInfo=e},e.prototype.setDestChannelInfo=function(e,t){if(!u.isValidChannelName(e))throw new Error("Invalid channelName in DestChannelInfo");u.checkValidObject(t,"destInfo");var n=t.uid,r=t.token,i=t.channelName;if(r&&!u.isValidToken(r))throw new Error("Invalid token in DestChannelInfo");if(!u.isValidChannelName(i))throw new Error("Invalid channelName in DestChannelInfo");if(!p.is32Uint(n))throw new Error("Invalid uid in DestChannelInfo");this.destChannelMediaInfos.set(e,t)},e.prototype.removeDestChannelInfo=function(e){if(!u.isValidChannelName(e))throw new Error("Invalid channelName when invoke removeDestChannelInfo");this.destChannelMediaInfos.delete(e)},e.prototype.getSrcChannelMediaInfo=function(){return this.srcChannelMediaInfo},e.prototype.getDestChannelMediaInfos=function(){return this.destChannelMediaInfos},e}();t.ChannelMediaRelayConfiguration=m;var g,y,v,_,E,S=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o._onOpen=function(){o.emit("open")},o._onClose=function(e){o.emit("close"),o.dispose()},o._onMessage=function(e){var t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(o.emit("status",t.serverStatus),void o.emit(t.serverStatus.command,t.serverStatus)):void 0;o.emit("req_"+t.requestId,t)},o._requestId=1,o.appId=t,o.cname=n,o.uid=r,o.sid=i,o}return i(t,e),t.prototype.isConnect=function(){return this._ws&&this._ws.readyState===WebSocket.OPEN},t.prototype.sendMessage=function(e){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new T(g.WS_DISCONNECTED);var t=this._requestId++;return e.requestId=t,e.seq=t,this._ws.send(JSON.stringify(e)),t},t.prototype.waitStatus=function(e){var t=this;return new Promise((function(n,r){var i=window.setTimeout((function(){r(new T(g.WAIT_STATUS_TIMEOUT,e))}),5e3);t.once(e,(function(t){clearTimeout(i),t.state&&0!==t.state?r(new T(g.WAIT_STATUS_ERROR,e)):n()})),t.once("dispose",(function(){clearTimeout(i),r(new T(g.WS_ABORT))}))}))},t.prototype.request=function(e){var t=this;return new Promise((function(n,r){var i=t.sendMessage(e),o=window.setTimeout((function(){t.removeAllListeners("req_"+i),r(new T(g.REQUEST_TIMEOUT))}),3e3);t.once("req_"+i,(function(e){clearTimeout(o),e&&200===e.code?n(e):r(new T(g.REQUEST_FAILED,e))})),t.once("dispose",(function(){clearTimeout(o),r(new T(g.WS_ABORT))}))}))},t.prototype.connect=function(e){var t=this;return new Promise((function(n,r){t._ws=new WebSocket(e),t._ws.onopen=function(){t._onOpen(),t._prvUrl=e,t._ws.onmessage=t._onMessage,t._ws.onclose=t._onClose,t._startHeartBeatCheck(),n()},t._ws.onclose=function(e){t._ws=null,r(new T(g.CONNECT_FAILED,"websocket error code: "+e.code))},setTimeout((function(){t._ws&&t._ws.readyState!==WebSocket.OPEN&&(t._ws.onopen=null,t._ws.onclose=null,t._ws.close(),t._ws=null,r(new T(g.CONNECT_TIMEOUT)))}),5e3),t.once("dispose",(function(){r(new T(g.WS_ABORT))}))}))},t.prototype.dispose=function(){this._clearHeartBeatCheck(),this.emit("dispose"),this.removeEvent(),this._ws&&(this._ws.onopen=null,this._ws.onclose=null,this._ws.onmessage=null,this._ws.close()),this._ws=null},t.prototype._sendPing=function(e){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new T(g.WS_DISCONNECTED);var t=this._requestId++;return e.requestId=t,this._ws.send(JSON.stringify(e)),t},t.prototype._startHeartBeatCheck=function(){var e=this;this._heartBeatTimer=window.setInterval((function(){e._sendPing({command:"ping",appId:e.appId,cname:e.cname,uid:e.uid+"",sid:e.sid,ts:+new Date,requestId:0})}),3e3)},t.prototype._clearHeartBeatCheck=function(){window.clearInterval(this._heartBeatTimer)},t}(c.default),T=function(e,t,n){void 0===e&&(e=""),this.code=n,this.data=t,this.message=e};t.ChannelMediaError=T,function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(g=t.CHANNEL_MEDIA_ERROR||(t.CHANNEL_MEDIA_ERROR={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(y||(y={})),function(e){e[e.NETWORK_DISCONNECTED=0]="NETWORK_DISCONNECTED",e[e.NETWORK_CONNECTED=1]="NETWORK_CONNECTED",e[e.PACKET_JOINED_SRC_CHANNEL=2]="PACKET_JOINED_SRC_CHANNEL",e[e.PACKET_JOINED_DEST_CHANNEL=3]="PACKET_JOINED_DEST_CHANNEL",e[e.PACKET_SENT_TO_DEST_CHANNEL=4]="PACKET_SENT_TO_DEST_CHANNEL",e[e.PACKET_RECEIVED_VIDEO_FROM_SRC=5]="PACKET_RECEIVED_VIDEO_FROM_SRC",e[e.PACKET_RECEIVED_AUDIO_FROM_SRC=6]="PACKET_RECEIVED_AUDIO_FROM_SRC",e[e.PACKET_UPDATE_DEST_CHANNEL=7]="PACKET_UPDATE_DEST_CHANNEL",e[e.PACKET_UPDATE_DEST_CHANNEL_REFUSED=8]="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e[e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE=9]="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(v=t.CHANNEL_MEDIA_RELAY_EVENT||(t.CHANNEL_MEDIA_RELAY_EVENT={})),function(e){e[e.RELAY_STATE_IDLE=0]="RELAY_STATE_IDLE",e[e.RELAY_STATE_CONNECTING=1]="RELAY_STATE_CONNECTING",e[e.RELAY_STATE_RUNNING=2]="RELAY_STATE_RUNNING",e[e.RELAY_STATE_FAILURE=3]="RELAY_STATE_FAILURE"}(_=t.CHANNEL_MEDIA_RELAY_STATE||(t.CHANNEL_MEDIA_RELAY_STATE={})),function(e){e[e.RELAY_OK=0]="RELAY_OK",e[e.SERVER_ERROR_RESPONSE=1]="SERVER_ERROR_RESPONSE",e[e.SERVER_NO_RESPONSE=2]="SERVER_NO_RESPONSE",e[e.NO_RESOURCE_AVAILABLE=3]="NO_RESOURCE_AVAILABLE",e[e.FAILED_JOIN_SRC=4]="FAILED_JOIN_SRC",e[e.FAILED_JOIN_DEST=5]="FAILED_JOIN_DEST",e[e.FAILED_PACKET_RECEIVED_FROM_SRC=6]="FAILED_PACKET_RECEIVED_FROM_SRC",e[e.FAILED_PACKET_SENT_TO_DEST=7]="FAILED_PACKET_SENT_TO_DEST",e[e.SERVER_CONNECTION_LOST=8]="SERVER_CONNECTION_LOST",e[e.INTERNAL_ERROR=9]="INTERNAL_ERROR",e[e.SRC_TOKEN_EXPIRED=10]="SRC_TOKEN_EXPIRED",e[e.DEST_TOKEN_EXPIRED=11]="DEST_TOKEN_EXPIRED",e[e.RELAY_ALREADY_START=12]="RELAY_ALREADY_START",e[e.RELAY_NOT_START=13]="RELAY_NOT_START",e[e.OPERATION_ABORT=14]="OPERATION_ABORT"}(E=t.CHANNEL_MEDIA_RELAY_ERROR||(t.CHANNEL_MEDIA_RELAY_ERROR={}))},function(e,t,n){"use strict";n.r(t),n.d(t,"isLiveTranscodingValid",(function(){return E})),n.d(t,"generateSessionId",(function(){return y})),n.d(t,"audioLevelHelper",(function(){return f})),n.d(t,"vsResHack",(function(){return v})),n.d(t,"is32Uint",(function(){return _})),n.d(t,"safeCall",(function(){return u})),n.d(t,"random",(function(){return T})),n.d(t,"popBanTip",(function(){return N})),n.d(t,"lengthInUtf8Bytes",(function(){return b})),n.d(t,"audioTimerLoop",(function(){return I})),n.d(t,"generateId",(function(){return g})),n.d(t,"uint8ArrayToBase64",(function(){return h})),n.d(t,"base64ToUint8Array",(function(){return p}));var r=n(11),i=n.n(r),o=n(4),s=n(0),a=n(28),c=n.n(a),l=n(25),d=n(15),u=function(){var e=arguments[0];if("function"==typeof e){var t=Array.prototype.slice.call(arguments,1);e.apply(null,t)}},h=function(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)},p=function(e){for(var t=window.atob(e),n=new Uint8Array(new ArrayBuffer(t.length)),r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n},f=function(e){return this.audioContext=Object(l.a)(),this.sourceNode=e.otWebkitAudioSource||this.audioContext.createMediaStreamSource(e),this.analyser=this.audioContext.createAnalyser(),this.timeDomainData=new Uint8Array(this.analyser.frequencyBinCount),this.sourceNode.connect(this.analyser),this.getAudioLevel=function(){if(this.analyser){this.analyser.getByteTimeDomainData(this.timeDomainData);for(var e=0,t=0;t<this.timeDomainData.length;t++)e=Math.max(e,Math.abs(this.timeDomainData[t]-128));return e/128}return s.default.warning("can't find analyser in audioLevelHelper"),0},this},m=1e4;function g(){return++m}function y(){return c()().replace(/-/g,"").toUpperCase()}var v=function(e,t,n){try{s.default.debug("start vsResHack",e);var r=document.createElement("video");r.setAttribute("autoplay",""),r.setAttribute("muted",""),r.muted=!0,r.setAttribute("playsinline",""),r.setAttribute("style","position: absolute; top: 0; left: 0; width:1px; high:1px;"),document.body.appendChild(r);var i=!1;r.addEventListener("playing",(function(n){o.isFireFox()?r.videoWidth&&(i=!0,s.default.debug("[vsResHack] get stream resolution: ","".concat(r.videoWidth," x ").concat(r.videoHeight),e),t(r.videoWidth,r.videoHeight),r.srcObject=null,r.remove()):(i=!0,s.default.debug("[vsResHack] get stream resolution: ","".concat(r.videoWidth," x ").concat(r.videoHeight),e),t(r.videoWidth,r.videoHeight),r.srcObject=null,r.remove())})),Object(d.setSrcObject)(r,e),r.play().catch((function(){})),setTimeout((function(){!i&&r&&(t(r.videoWidth,r.videoHeight),r.srcObject=null,r.remove())}),4e3)}catch(e){n(e)}},_=function(e){return"number"==typeof e&&0<=e&&e<=4294967295},E=function(e){var t=["lowLatency","userConfigExtraInfo","transcodingUsers"];for(var n in e)if("lowLatency"===n&&"boolean"!=typeof e[n]||"userConfigExtraInfo"===n&&"object"!==i()(e[n])||"transcodingUsers"===n&&!S(e[n])||!~t.indexOf(n)&&"number"!=typeof e[n])throw new Error("Param ["+n+"] is inValid");return!0},S=function(e){for(var t=0;t<e.length;t++)for(var n in e[t])if("number"!=typeof e[t][n])throw new Error("Param user["+t+"] - ["+n+"] is inValid");return!0},T=function(e){isNaN(e)&&(e=1e3);var t=+new Date,n=(t=(9301*t+49297)%233280)/233280;return Math.ceil(n*e)},b=function(e){var t=encodeURIComponent(e).match(/%[89ABab]/g);return e.length+(t?t.length:0)},I=function(e,t){var n=1/t,r=Object(l.a)(),i=r.createGain();i.gain.value=0,i.connect(r.destination);var o=!1;return function t(){var s=r.createOscillator();s.onended=t,s.connect(i),s.start(0),s.stop(r.currentTime+n),e(r.currentTime),o&&(s.onended=function(){})}(),function(){o=!0}},N=function(){if(!document.getElementById("agora-ban-tip")){var e=document.createElement("div");e.id="agora-ban-tip",e.style="position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; color: #fff;",document.querySelector("body").prepend(e);var t=document.createElement("div");t.style="background: #000; width: 346px; height: 116px; z-index: 100000; opacity: 0.6; border-radius: 10px; box-shadow: 0 2px 4px #000;",e.append(t);var n=document.createElement("div");n.style="height: 76px; display: flex; justify-content: center; align-items: center;";var r=document.createElement("span");r.style="height: 28px; width: 28px; color: #000; text-align: center; line-height: 30px; background: #fff; border-radius: 50%; font-weight: 600; font-size: 20px;margin-right: 5px;",r.innerText="!";var i=document.createElement("span");i.innerText="This browser does not support webRTC",n.append(r),n.append(i);var o=document.createElement("div");o.style="height: 38px; display: flex; border-top: #fff 1px solid; justify-content: center; align-items: center;",o.innerText="OK",t.append(n),t.append(o),o.onclick=function(){var e=document.getElementById("agora-ban-tip");e.parentNode.removeChild(e)}}}},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){e.exports=n(64)},function(t,n,r){"use strict";var i=r(12),o=r.n(i),s=r(17),a=r.n(s),c=r(11),l=r.n(c),d=r(32),u=r.n(d),h=r(7),p=r.n(h),f=r(22),m=r(8),g=function(e){e&&e.apply(this,[].slice.call(arguments,1))},y=r(0),v=r(1),_=r(10),E=r(14),S=r(2),T=function(e){var t=Object(m.b)(e);t.needReconnect=!0,t.isTimeout=!1,t.isInit=!0,t.sendbytes=0,t.recvbytes=0,t.startTime=Date.now(),t.lastMsgTime=null,t.clientId=e.clientId,t.hostIndex=0,t.requestID=0,e.host instanceof Array?t.host=e.host:t.host=[e.host],t.getSendBytes=function(){return t.sendbytes},t.getRecvBytes=function(){return t.recvbytes},t.getDuration=function(){return Math.ceil((Date.now()-t.startTime)/1e3)},t.getURL=function(){return t.connection.url},t.reconnect=function(){t.isInit=!0,t.creatConnection()},t.connectNext=function(){t.isInit=!0,++t.hostIndex,y.default.debug("["+t.clientId+"] Gateway length:"+t.host.length+" current index:"+t.hostIndex),t.hostIndex>=t.host.length?t.dispatchEvent(Object(m.d)({type:"recover"})):t.creatConnection()},t.replaceHost=function(e){t.host=e||t.host,t.hostIndex=0,t.creatConnection()},t.creatConnection=function(){t.needReconnect=!0,t.lts=(new Date).getTime(),t.connection=new WebSocket("wss://"+t.host[t.hostIndex]),t.connection.binaryType="arraybuffer",t.turnConfig={};var n=e.proxyServerType;if(t.connection.url&&3!==n&&4!==n&&5!==n){var r=t.connection.url.match(/wss\:\/\/([^:]+):(\d+)/),i=t.host[t.hostIndex].split(":"),o=t.connection.url.match(/h=([^:]+)&p=(\d+)/);r?(t.turnConfig.url=r[1],Object(S.getParameter)("TURN_ENABLE_TCP")&&(t.turnConfig.tcpport=parseInt(r[2])+30),Object(S.getParameter)("TURN_ENABLE_UDP")&&(t.turnConfig.udpport=parseInt(r[2])+30)):o?(t.turnConfig.url=o[1],Object(S.getParameter)("TURN_ENABLE_TCP")&&(t.turnConfig.tcpport=parseInt(o[2])+30),Object(S.getParameter)("TURN_ENABLE_UDP")&&(t.turnConfig.udpport=parseInt(o[2])+30)):i&&(t.turnConfig.url=i[0],Object(S.getParameter)("TURN_ENABLE_TCP")&&(t.turnConfig.tcpport=parseInt(i[1])+30),Object(S.getParameter)("TURN_ENABLE_UDP")&&(t.turnConfig.udpport=parseInt(i[1])+30))}t.connection.onopen=function(e){t.needReconnect=!0,t.isTimeout=!1,t.isInit=!1,t.sendbytes=0,t.recvbytes=0,t.startTime=Date.now(),Object(E.resetHTTPByetsCount)(),clearTimeout(t.timeoutCheck),t.dispatchEvent(Object(m.d)({type:"onopen",event:e,socket:t}))},t.connection.onmessage=function(e){if(e.data instanceof ArrayBuffer)t.dispatchEvent({type:"onBinaryData",data:e.data});else{t.recvbytes+=Object(_.lengthInUtf8Bytes)(e.data);var n=JSON.parse(e.data);t.lastMsgTime=Date.now(),n.hasOwnProperty("_id")?t.dispatchEvent(Object(m.d)({type:n._id,msg:n})):n.hasOwnProperty("_type")&&t.dispatchSocketEvent(Object(m.d)({type:n._type,msg:n._message}))}},t.connection.onclose=function(n){t.needReconnect?t.isTimeout||t.isInit?(y.default.debug("["+t.clientId+"] websockect connect timeout"),v.report.joinGateway(e.sid,{lts:t.lts,succ:!1,ec:"timeout",addr:t.connection.url}),t.connectNext()):(t.dispatchEvent(Object(m.d)({type:"disconnect",event:n})),t.requests&&t.requests instanceof Array&&(t.requests.map((function(e){e.callback("REQUEST_ABORT")})),t.requests=[])):(y.default.debug("["+t.clientId+"] websockect closeed"),g(e.onFailure,n),clearTimeout(t.timeoutCheck),t.dispatchEvent(Object(m.d)({type:"close",event:n})),t.connection.onopen=void 0,t.connection.onclose=void 0,t.connection.onerror=void 0,t.connection.onmessage=void 0,t.connection=void 0)},t.connection.onerror=function(e){},setTimeout((function(){t.connection&&t.connection.readyState!=WebSocket.OPEN&&(t.isTimeout=!0,t.connection.close())}),5e3)},t.creatConnection(),t.sendMessage=function(e,n){if(t.connection&&t.connection.readyState==WebSocket.OPEN){var r=JSON.stringify(e);t.sendbytes+=Object(_.lengthInUtf8Bytes)(r),t.connection.send(r)}else n({error:"Gateway not connected"})},t.disconnect=function(){t.needReconnect=!0,t.connection.close()},t.close=function(){t.needReconnect=!1,t.connection.onclose=void 0,t.connection.close(),clearInterval(t.requestTimer),t.requests&&t.requests instanceof Array&&(t.requests.map((function(e){e.callback("REQUEST_ABORT")})),t.requests=[])},t.sendSignalCommand=function(e,n){e._id="_request_"+t.requestID,t.requestID+=1,"publish_stats"!==e._type&&"subscribe_stats"!==e._type&&"publish_stats_low"!==e._type&&t.on(e._id,(function(r){r.msg&&n&&n(r.msg._result,r.msg.message),delete t.dispatcher.eventListeners[e._id]})),t.sendMessage(e,(function(e){e.reason="NOT_CONNECTED",n&&n(e.reason,e)}))},t.requests=[];var n=function(e){var n=t.requests.findIndex((function(t){return t.id===e.type}));if(n>=0)var r=t.requests.splice(n,1)[0];r&&t.dispatcher.eventListeners[e.type]?(delete t.dispatcher.eventListeners[e.type],e.msg&&r.callback&&r.callback(e.msg._result,e.msg._message)):y.default.warning("Detached Response",e.type,e.msg)},r=function(e){var n=this,r=t.requests.findIndex((function(e){return e.id===n.id}));r>=0&&(n=t.requests.splice(r,1)[0]),n&&t.dispatcher.eventListeners[e.type]?(delete t.dispatcher.eventListeners[e.type],e.reason="NOT_CONNECTED",n.callback&&n.callback(e.reason,e)):y.default.warning("handleSendError",n)};return t.sendRequest=function(e,i){e=p()({_id:"_request_"+t.requestID},e),t.requestID+=1;var o={id:e._id,timeoutCounter:0,stalledAt:Date.now(),message:e,callback:i};t.requests.push(o),t.addEventListener(e._id,n),t.sendMessage(e,r.bind(o))},t.checkRequestTimeout=function(){for(var e=Math.ceil(Object(S.getParameter)("SIGNAL_REQUEST_TIMEOUT")/Object(S.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),n=t.requests.length-1;n>=0;n--){var r=t.requests[n];r.timeoutCounter>=e?(t.requests.splice(n,1),y.default.error("Request Timeout",r.timeoutCounter,r.message),r.callback&&r.callback("TIMEOUT")):r.timeoutCounter++}},clearInterval(t.requestTimer),t.requestTimer=setInterval(t.checkRequestTimeout,Object(S.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),t.sendReport=function(e){t.sendMessage(e,(function(){}))},t},b=function(e,t){var n={connect:function(){t.host=e,n.signal=T(t),n.on=n.signal.on,n.dispatchEvent=n.signal.dispatchEvent,n.signal.on("onopen",(function(e){n.signal.onEvent=function(e){n.dispatchEvent(Object(m.d)({type:e.event,msg:e}))},n.dispatchEvent(Object(m.d)({type:"connect",msg:e}))})),n.signal.on("onError",(function(e){var t=e.msg;onError(t.code,"error")}))},getLastMsgTime:function(){return n.signal&&n.signal.lastMsgTime},getSendBytes:function(){return n.signal.getSendBytes()},getRecvBytes:function(){return n.signal.getRecvBytes()},getDuration:function(){return n.signal.getDuration()},disconnect:function(){n.signal.disconnect()},close:function(){n.signal.close()},getURL:function(){return n.signal.getURL()},reconnect:function(){n.signal.reconnect()},connectNext:function(){n.signal.connectNext()},replaceHost:function(e){n.signal.replaceHost(e)},emitSimpleMessage:function(e,t){n.signal.sendSignalCommand(e,t)},emitRequest:function(e,t){n.signal.sendRequest(e,t)},emitReport:function(e){n.signal.sendReport(e)}};return n.connect(),n},I=r(23),N=r(5),C=r(20),w=r(4),R={ERR_NO_VOCS_AVAILABLE:"tryNext",ERR_NO_VOS_AVAILABLE:"tryNext",ERR_JOIN_CHANNEL_TIMEOUT:"tryNext",WARN_REPEAT_JOIN:"quit",ERR_JOIN_BY_MULTI_IP:"recover",WARN_LOOKUP_CHANNEL_TIMEOUT:"tryNext",WARN_OPEN_CHANNEL_TIMEOUT:"tryNext",ERR_VOM_SERVICE_UNAVAILABLE:"tryNext",ERR_TOO_MANY_USERS:"tryNext",ERR_MASTER_VOCS_UNAVAILABLE:"tryNext",ERR_INTERNAL_ERROR:"tryNext",K_SERVICE_NOT_READY:"tryNext",K_SERVICE_TOO_HEAVY:"tryNext",notification_test_recover:"recover",notification_test_tryNext:"tryNext",notification_test_retry:"retry"},A={googActualEncBitrate:"A_aeb",googAvailableSendBandwidth:"A_asb",googRetransmitBitrate:"A_rb",googAvailableReceiveBandwidth:"A_arb",googTargetEncBitrate:"A_teb",googBucketDelay:"A_bd",googTransmitBitrate:"A_tb",googCodecName:"A_cn",bytesSent:"bytesSent",packetsLost:"packetsLost",packetsSent:"packetsSent",googAdaptationChanges:"A_ac",googAvgEncodeMs:"A_aem",googEncodeUsagePercent:"A_eup",googFirsReceived:"A_fr",googFrameHeightInput:"A_fhi",googFrameHeightSent:"A_fhs",googFrameRateInput:"A_fri",googFrameRateSent:"A_frs",googFrameWidthInput:"A_fwi",googFrameWidthSent:"A_fws",googNacksReceived:"A_nr",googPlisReceived:"A_pr",googRtt:"A_rtt",aecDivergentFilterFraction:"A_adff",audioInputLevel:"A_ail",googEchoCancellationReturnLoss:"A_ecrl",googEchoCancellationReturnLossEnhancement:"A_ecrle",googResidualEchoLikelihood:"A_rel",googResidualEchoLikelihoodRecentMax:"A_relrm",googTargetDelayMs:"A_tdm",bytesReceived:"bytesReceived",packetsReceived:"packetsReceived",googDecodeMs:"A_dm",googMaxDecodeMs:"A_mdm",googRenderDelayMs:"A_rdm",googFrameWidthReceived:"A_fwr",googFrameHeightReceived:"A_fhr",googFrameRateReceived:"A_frr",googFrameRateDecoded:"A_frd",googFrameRateOutput:"A_fro",googJitterBufferMs:"A_jbm",googCurrentDelayMs:"A_cdm",googMinPlayoutDelayMs:"A_mpdm",googNacksSent:"A_ns",googPlisSent:"A_ps",googFirsSent:"A_fs",audioOutputLevel:"A_aol",googAccelerateRate:"A_ar",googDecodingCNG:"A_dcng",googDecodingCTN:"A_dctn",googDecodingCTSG:"A_dctsg",googDecodingNormal:"A_dn",googDecodingPLC:"A_dplc",googDecodingPLCCNG:"A_dplccng",googExpandRate:"A_er",googJitterReceived:"A_jr",googPreemptiveExpandRate:"A_per",googPreferredJitterBufferMs:"A_pjbm",googSecondaryDecodedRate:"A_sdr",googSpeechExpandRate:"A_ser",uplink_fraction_lost:"B_ufl",uplink_cumulative_lost:"B_ucl",uplink_available_bandwidth:"B_uab",period_fir:"B_fir",access_delay:"B_acd",uplink_network_quality:"B_unq",downlink_network_quality:"B_dnq",pub_audio_lost_ratio_400ms:"B_palr4",pub_video_lost_ratio_400ms:"B_pvlr4",e2e_delay:"B_ed",audio_delay:"B_ad",video_delay:"B_vd",stream_type:"B_st",e2e_audio_lost_ratio_400ms:"B_ealr4",e2e_video_lost_ratio_400ms:"B_evlr4",downlink_estimate_bandwidth:"B_deb",peer_publish_audio_duration:"B_ppad",peer_publish_video_duration:"B_ppvd"},O={};for(var M in A){var D=A[M];O[D]&&y.default.error("Key Conflict: ".concat(D,": ").concat(A[D],"| ").concat(M)),O[D]=M}var k=function(e){return A[e]||e},x=function(e){return O[e]||e},L=r(9),P=r.n(L),j=r(54),U=function t(n){var r=!1,i=function(e){return{_type:"control",_message:e}},s=function(e,t){var n={};return Object.keys(t).forEach((function(e){Object(S.getParameter)("STATS_FILTER")[e]||(n[k(e)]=t[e])})),{_type:"subscribe_related_stats",_message:{stream_type:"high",stream_id:e,stats:n}}},c=function(e){return{_type:"publish",_message:e}},d=function(e,t){var n={};return Object.keys(t).forEach((function(e){Object(S.getParameter)("STATS_FILTER")[e]||(n[k(e)]=t[e])})),{_type:"subscribe_stats",_message:{stream_id:e,stats:n}}},h=t.DISCONNECTED,E=t.CONNECTING,T=t.CONNECTED,A=t.DISCONNECTING,O=h,M=Object(m.b)(n);Object.defineProperty(M,"state",{set:function(e){var n=O;O=e,Object(C._setClientConnectionStateRecord)(M.clientId,e),e!==t.CONNECTED&&e!==t.DISCONNECTING&&(M.hasJoined=!1),n!==e&&M.dispatchEvent({type:"connection-state-change",prevState:t.connetionStateMap[n],curState:t.connetionStateMap[e]})},get:function(){return O}}),M.socket=void 0,M.state=h,M.mode=n.mode,M.role=n.role,M.codec=n.codec,M.config={},M.timers={},M.timer_counter={},M.localStreams={},M.remoteStreams={},M.remoteMuteState={},M.attemps=1,M.p2p_attemps=1,M.audioLevel={},M.activeSpeaker=void 0,M.reconnectMode="tryNext",M.rejoinAttempt=0,M.hasChangeBGPAddress=!1,M.traffic_stats={},M.clientId=n.clientId,M.pingpongCounter=0,M.hasInvokeLeave=!1,M.p2ps=new Map,M.liveStreams=new Map,M.injectLiveStreams=new Map,M.remoteStreamsInChannel=new Set,M.subscribeRequestId=new Map,M.publishRequestId=0,M.hasJoined=!1,M.isFirstSuccess=!0,M.peerPublishDurationMap=new Map,function(e){var t=g;e.makeRequest=function(n,r,i){if(void 0===e.socket)return y.default.debug("[".concat(e.clientId,"] No socket available")),void t(i,N.default.INVALID_OPERATION);try{e.socket.emitRequest(n,(function(e,t){var n;"success"===e?"function"==typeof r&&r(t):"function"==typeof i&&(n=t&&t.error_code&&N.GatewayErrorCode[t.error_code]?N.GatewayErrorCode[t.error_code]:t&&t.error_str?t.error_str:t&&t.error_code?"UNKNOW_ERROR_".concat(t.error_code):e,i(n,t))}))}catch(r){y.default.debug("[".concat(e.clientId,"] Socket emit message failed ").concat(JSON.stringify(n))),y.default.debug("[".concat(e.clientId,"] "),r),t(i,N.default.SOCKET_ERROR)}},e.makeReport=function(t){void 0===e.socket&&y.default.debug("[".concat(e.clientId,"] No socket available"));try{e.socket.emitReport(t)}catch(n){y.default.debug("[".concat(e.clientId,"] Socket emit report failed ").concat(JSON.stringify(t)))}}}(M),M.inChannelInfo={joinAt:null,duration:0},M._sendMessage=function(e,t){switch(e){case"SubscribeStats":M.makeReport(d.apply(void 0,u()(t)));break;case"SubscribeRelatedStats":M.makeReport(s.apply(void 0,u()(t)))}};var D=g;M.p2pCounter=Object(_.random)(1e5),M.generateP2PId=function(){return++M.p2pCounter},M.audioVolumeIndication={enabled:!1,sortedAudioVolumes:[],smooth:3,interval:2e3},M.remoteVideoStreamTypes={REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2},M.streamFallbackTypes={STREAM_FALLBACK_OPTION_DISABLED:0,STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:1,STREAM_FALLBACK_OPTION_AUDIO_ONLY:2},M.configPublisher=function(e){M.config=e},M.getGatewayInfo=function(e,t){M.makeRequest({_type:"gateway_info"},e,t)},M.setClientRole=function(e,t){y.default.debug("[".concat(M.clientId,"] setClientRole to ").concat(e));var n=v.report.reportApiInvoke(M.joinInfo.sid,{name:"_setClientRole",callback:t});M.makeRequest({_type:"set_client_role",_message:{role:e}},(function(){M.role=e,M.dispatchEvent({type:"client-role-changed",role:e}),n&&n(null,{role:e})}),(function(t,r){if(r&&r.code&&(t=N.GatewayErrorCode[r.code]||"UNKNOW_ERROR_"+r.code),"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE"===t)return n&&n(null);y.default.error("set Client role error to "+e+": "+t),n&&n(t)}))},M.join=function(e,t,r,i){M.hasInvokeLeave=!1,e.useProxyServer&&(M.hasChangeBGPAddress=!0);var o=(new Date).getTime(),s=e.uid;if(M.inChannelInfo.joinAt&&(M.inChannelInfo.duration+=o-M.inChannelInfo.joinAt),M.inChannelInfo.joinAt=o,M.state!==E)return y.default.error("[".concat(M.clientId,"] GatewayClient.join Failed: state "),M.state),i&&i(N.default.INVALID_OPERATION),void v.report.joinGateway(e.sid,{lts:o,succ:!1,ec:N.default.INVALID_OPERATION,addr:null});if(null!=s&&parseInt(s)!==s)return y.default.error("[".concat(M.clientId,"] Input uid is invalid")),M.state=h,i&&i(N.default.INVALID_PARAMETER),void v.report.joinGateway(e.sid,{lts:o,succ:!1,ec:N.default.INVALID_PARAMETER,addr:null});var a=F.register(M,{uid:s,cname:e&&e.cname});if(a)return M.state=h,i&&i(a),void v.report.joinGateway(e.sid,{lts:o,succ:!1,ec:a,addr:null});M.joinInfo=p()({},e),M.uid=s,M.key=t,M.pingpongCounter=0,B(e,(function(t){if(e.useLocalAccessPoint)try{var a=M.socket.signal.connection.url.match(/wss\:\/\/([^:]+):(\d+)/)[1];Object(S.setParameter)("EVENT_REPORT_DOMAIN",a),Object(S.setParameter)("EVENT_REPORT_BACKUP_DOMAIN",a),Object(S.setParameter)("LOG_UPLOAD_SERVER","".concat(a,":6444"))}catch(e){y.default.debug("[".concat(M.clientId,"] LocalAccessPoint error: ").concat(e))}if(M.state===A||M.state===h)return i&&i("LEAVE_BEFORE_JOIN_SUCCESS");M.state=T,y.default.debug("[".concat(M.clientId,"] Connected to gateway server")),clearInterval(M.pingTimer),M.pingTimer=setInterval((function(){var e=Object(S.getParameter)("PING_PONG_TIME_OUT");if(++M.pingpongCounter>=e){var t=Date.now();M.socket&&y.default.warning("PINGPONG Timeout. Last Socket Message: ".concat(t-M.socket.getLastMsgTime(),"ms")),M.socket&&M.socket.getLastMsgTime()&&t-M.socket.getLastMsgTime()>Object(S.getParameter)("WEBSOCKET_TIMEOUT_MIN")&&(M.pingpongCounter=0,M.socket.close(),M.socket.dispatchEvent(Object(m.d)({type:"disconnect",event:{msg:"PING_PONG_TIME_OUT"}})))}var n=Date.now();M.makeRequest({_type:"ping"},(function(){M.pingpongCounter=0;var e=Date.now()-n;Object(S.getParameter)("REPORT_STATS")&&M.makeRequest({_type:"ping_back",_message:{pingpongElapse:e}})}),(function(e,t){"TIMEOUT"!==e&&(y.default.error("Ping Error ".concat(e," ").concat(JSON.stringify(t))),t&&t.error_code&&M.socket&&M.socket.signal&&M.socket.signal.connection&&M.socket.signal.connection.readyState===WebSocket.OPEN&&(y.default.info("Disconnecting websocket connection"),M.socket.signal.connection.close()))}))}),3e3),function(e,t){var r=e.role,i=p()({},M.joinInfo.apResponse),o={session_id:M.joinInfo.sid,app_id:n.appId,channel_key:M.key,channel_name:M.joinInfo.cname,sdk_version:S.VERSION,browser:navigator.userAgent,process_id:Object(v.getProcessId)(),mode:M.mode,codec:M.codec,role:r,has_changed_gateway:Object(S.getParameter)("FORCE_CHANGED_GATEWAY_FLAG")||M.hasChangeBGPAddress,ap_response:i,optionalInfo:M.joinInfo.optionalInfo,extend:Object(S.getParameter)("JOIN_EXTEND"),details:{}};if(M.joinInfo.hasOwnProperty("stringUid")&&(o.string_uid=M.joinInfo.stringUid),M.socket&&M.socket.signal&&M.socket.signal&&(i.addresses&&i.addresses[M.socket.signal.hostIndex]&&(o.ap_response.ticket=i.addresses[M.socket.signal.hostIndex].ticket,delete i.addresses),Object(S.getParameter)("SET_DEFAULT_TURNSERVER")&&M.socket.signal.turnConfig)){var s={username:M.joinInfo.uid.toString(),credential:M.joinInfo.token,forceturn:Object(S.getParameter)("FORCE_TURN")};s.url=M.socket.signal.turnConfig.url,M.socket.signal.turnConfig.tcpport&&(s.tcpport=""+M.socket.signal.turnConfig.tcpport),M.socket.signal.turnConfig.udpport&&(s.udpport=""+M.socket.signal.turnConfig.udpport),M.joinInfo.turnServers.find((function(e){if(e.url===s.url)return!0}))||M.joinInfo.turnServers.push(s)}3===M.joinInfo.proxyServerType&&(o.plugin="web_cloud_proxy",o.details.cservice_map="1"),M.joinInfo.aesmode&&M.joinInfo.aespassword?(o.aes_mode=M.joinInfo.aesmode,o.aes_encrypt=!0,M.joinInfo.aes_salt&&(o.aes_salt=M.joinInfo.aes_salt),Object(j.encryptRSA)(M.joinInfo.aespassword).then((function(e){o.aes_secret=e,M.dispatchEvent({type:"join-message-hook",joinMessage:o}),t(null,{_type:"join",_message:o})})).catch((function(e){y.default.error("[".concat(M.clientId,"] encrypt password failed "),e),t("ENCRYPT_PASSWORD_FAILED")}))):(M.dispatchEvent({type:"join-message-hook",joinMessage:o}),t(null,{_type:"join",_message:o}))}({role:M.role},(function(t,n){if(t)return i&&i(t);M.makeRequest(n,(function(t){if(v.report.joinGateway(e.sid,{lts:o,succ:!0,ec:null,vid:e.vid,uid:e.uid,addr:M.socket.getURL(),firstSuccess:M.isFirstSuccess}),M.joinSuccessLts=Date.now(),M.isFirstSuccess=!1,M.rejoinAttempt=0,M.hasJoined=!0,r&&r(t.uid),!0===t.return_vosip||!0===Object(S.getParameter)("ENABLE_LIVE_SERVER_LIST")){var n=null;try{n=M.socket.signal.connection.url}catch(e){y.default.debug("[".concat(M.clientId,"] Can not get gateway ip: ").concat(e))}n?Object(S.setParameter)("LIVE_SERVER_LIST",[n]):Object(S.setParameter)("LIVE_SERVER_LIST",[])}M.dispatchEvent({type:"join"}),clearInterval(M.timers.trafficStats),M.timers.trafficStats=setInterval((function(){M.makeRequest({_type:"traffic_stats"},(function(e){var t={};for(var n in e)t[x(n)]=e[n];if(t.peer_delay&&t.peer_delay.length){var r=[];t.peer_delay.forEach((function(e){var t={};for(var n in e)t[x(n)]=e[n];r.push(t)})),t.peer_delay=r}M.traffic_stats=t,M.traffic_stats.timestamp=Date.now();var i=M.joinInfo.stringUid,o=M.localStreams[s]||M.localStreams[i];o&&(o.traffic_stats={access_delay:t.access_delay}),t.peer_delay&&t.peer_delay.forEach((function(e){var n=M.remoteStreams[e.peer_uid];n&&(n.traffic_stats={access_delay:t.access_delay,e2e_delay:e.e2e_delay,audio_delay:e.audio_delay,video_delay:e.video_delay})})),M.dispatchEvent({type:"after-getTrafficStats",trafficStats:t})}))}),3e3)}),(function(t,n){if(y.default.error("[".concat(M.clientId,"] User join failed [").concat(t,"]")),"ERR_JOIN_BY_MULTI_IP"===t){try{v.report.joinGateway(e.sid,{lts:o,succ:!1,ec:"ERR_JOIN_BY_MULTI_IP",addr:M.socket.getURL()})}catch(e){}return M.dispatchEvent({type:"onMultiIP",option:n.option})}R[t]&&M.rejoinAttempt<4?M._doWithAction(R[t],r,i):i&&i(t),v.report.joinGateway(e.sid,{lts:o,succ:!1,ec:t,addr:M.socket&&M.socket.getURL()})}))}))}),(function(t){y.default.error("[".concat(M.clientId,"] User join failed [").concat(t,"]")),i&&i(t),v.report.joinGateway(e.sid,{lts:o,succ:!1,ec:t,addr:M.socket.getURL()})})),this.remoteMuteState={},M.resetAudioVolumeIndication()},M.leave=function(e,t){var n=F.unregister(M);switch(n&&y.default.debug("[".concat(M.clientId,"] "),n),M.p2ps.clear(),M.state){case h:return y.default.debug("[".concat(M.clientId,"] Client Already in DISCONNECTED status")),void D(e);case A:return y.default.debug("[".concat(M.clientId,"] Client Already in DISCONNECTING status")),void D(t,N.default.INVALID_OPERATION);case E:return M.socket&&M.socket.close(),M.socket=void 0,y.default.info("[".concat(M.clientId,"] Client connecting, Leave channel success")),M.state=h,e&&e()}for(var r in M.state=A,M.channelMediaConfig&&(M.channelMediaRelayController&&M.channelMediaRelayController.dispose(),M.channelMediaConfig,M.channelMediaRelayController=null),clearInterval(M.pingTimer),M.timers)M.timers.hasOwnProperty(r)&&clearInterval(M.timers[r]);for(var r in M.inChannelInfo.joinAt&&(M.inChannelInfo.duration+=Date.now()-M.inChannelInfo.joinAt,M.inChannelInfo.joinAt=null),M.hasJoined?M.makeRequest({_type:"leave"},(function(t){M.socket.close(),M.socket=void 0,y.default.info("[".concat(M.clientId,"] Leave channel success")),M.state=h,e&&e(t)}),(function(e){"TIMEOUT"!==e&&"REQUEST_ABORT"!==e&&(y.default.error("[".concat(M.clientId,"] Leave Channel Failed"),e),M.state=T,t&&t(e))})):(M.socket&&(M.socket.close(),M.socket=void 0),y.default.info("[".concat(M.clientId,"] Leave channel before joined")),M.state=h,e&&e()),M.localStreams)if(M.localStreams.hasOwnProperty(r)){var i=M.localStreams[r];delete M.localStreams[r],void 0!==i.pc&&(i.pc.close(),i.pc=void 0)}W()},M.publish=function(e,t,n,r){var o=(new Date).getTime(),s=!1;if(e.publishLTS=o,"object"!==l()(e)||null===e)return y.default.error("[".concat(M.clientId,"] Invalid local stream")),r&&r(N.default.INVALID_LOCAL_STREAM),void v.report.publish(M.joinInfo.sid,{lts:o,succ:!1,audio:!1,video:!1,screenshare:!1,audioName:"",videoName:"",screenName:"",ec:N.default.INVALID_LOCAL_STREAM});if(!e.stream&&void 0===e.url)return y.default.error("[".concat(M.clientId,"] Invalid local media stream")),r&&r(N.default.INVALID_LOCAL_STREAM),void v.report.publish(M.joinInfo.sid,{lts:o,succ:!1,audio:!1,video:!1,screenshare:!1,audioName:"",videoName:"",screenName:"",ec:N.default.INVALID_LOCAL_STREAM});if(M.state!==T)return y.default.error("[".concat(M.clientId,"] User is not in the session")),r&&r(N.default.INVALID_OPERATION),void v.report.publish(M.joinInfo.sid,{lts:o,succ:!1,audio:e.hasAudio(),video:e.hasVideo(),screenshare:e.hasScreen(),audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:N.default.INVALID_OPERATION});var a=e.getAttributes()||{};if(e.local&&void 0===M.localStreams[e.getId()]&&(e.hasAudio()||e.hasVideo()||e.hasScreen())){var d=M.generateP2PId();if(M.p2ps.set(d,e),e.p2pId=d,void 0!==e.url)G(c({state:"url",audio:e.hasAudio(),video:e.hasVideo(),attributes:e.getAttributes()},e.url),(function(t,n){"success"===t?(e.getUserId()!==n&&e.setUserId(n),M.localStreams[n]=e,e.onClose=function(){M.unpublish(e)}):y.default.error("[".concat(M.clientId,"] Publish local stream failed"),t)}));else{M.localStreams[e.getId()]=e,e.connectionSpec={callback:function(a){a||r&&r("CANNOT_GET_OFFER"),"motion"===e.optimizationMode&&e.pc.setRtpSenderParameters("maintain-framerate"),"detail"===e.optimizationMode&&e.pc.setRtpSenderParameters("maintain-resolution"),M.makeRequest(c({state:"offer",stream_type:1==t.streamType?"low":"high",p2p_id:d,sdp:a,audio:e.audio||e.screenAudio,video:e.screen||e.video,screen:e.screen,attributes:e.getAttributes(),dtx:e.DTX,hq:e.highQuality,lq:e.lowQuality,stereo:e.stereo,speech:e.speech,codec:M.codec,extend:Object(S.getParameter)("PUB_EXTEND")}),(function(t){e.getUserId()!==t.uid&&e.setUserId(t.uid),y.default.info("[".concat(M.clientId,"] Local stream published with uid"),t.uid),e.onClose=function(){M.unpublish(e)},e._onAudioUnmute=function(){M.makeReport(i({action:"unmute_local_audio",stream_id:e.getId()}))},e._onVideoUnmute=function(){M.makeReport(i({action:"unmute_local_video",stream_id:e.getId()}))},e._onAudioMute=function(){M.makeReport(i({action:"mute_local_audio",stream_id:e.getId()}))},e._onVideoMute=function(){M.makeReport(i({action:"mute_local_video",stream_id:e.getId()}))},e.getId()===e.getUserId()&&(e.isAudioOn()||e.hasAudio()&&(y.default.debug("[".concat(M.clientId,"] local stream audio mute")),e._onAudioMute()),e.isVideoOn()||(e.hasVideo()||e.hasScreen())&&(y.default.debug("[".concat(M.clientId,"] local stream video mute")),e._onVideoMute())),e.pc.oniceconnectionstatechange=function(t){if("failed"===t){if(null!=M.timers[e.getId()]&&(clearInterval(M.timers[e.getId()]),clearInterval(M.timers[e.getId()]+"_RelatedStats")),y.default.error("[".concat(M.clientId,"] Publisher connection is lost -- streamId: ").concat(e.getId(),", p2pId: ").concat(d)),M.p2ps.delete(d),y.default.debug("[".concat(M.clientId,"] publish p2p failed: "),M.p2ps),!s)return s=!0,v.report.publish(M.joinInfo.sid,{lts:o,succ:!1,audio:e.hasAudio(),video:e.hasVideo(),screenshare:e.hasScreen(),audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:N.default.PEERCONNECTION_FAILED,publishRequestid:M.publishRequestId||0,p2pid:d}),M.dispatchEvent(Object(m.a)({type:"pubP2PLost",stream:e})),r&&r(N.default.PEERCONNECTION_FAILED);M.dispatchEvent(Object(m.a)({type:"pubP2PLost",stream:e}))}else if("connected"===t&&(y.default.debug("[".concat(M.clientId,"] publish p2p connected: "),M.p2ps),e.getId()===e.getUserId()&&(e._isAudioMuted()?M.makeReport(i({action:"mute_local_audio",stream_id:e.getId()})):M.makeReport(i({action:"unmute_local_audio",stream_id:e.getId()})),e._isVideoMuted()?M.makeReport(i({action:"mute_local_video",stream_id:e.getId()})):M.makeReport(i({action:"unmute_local_video",stream_id:e.getId()}))),!s))return s=!0,v.report.publish(M.joinInfo.sid,{lts:o,succ:!0,audio:e.hasAudio(),video:e.hasVideo(),screenshare:e.hasScreen(),audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:null,publishRequestid:M.publishRequestId||0,p2pid:d}),n&&n()},e.pc.processSignalingMessage(t.sdp)}),(function(t,n){y.default.error("Publish Failed: ".concat(t)),v.report.publish(M.joinInfo.sid,{lts:o,succ:!1,audio:e.hasAudio(),video:e.hasVideo(),screenshare:e.hasScreen(),audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:t,publishRequestid:M.publishRequestId||0,p2pid:d}),"TIMEOUT"!=t&&(M.processPublishFailure(e),r&&r(t))}))},audio:e.hasAudio(),video:e.hasVideo(),screen:e.hasScreen(),optimizationMode:e.optimizationMode,isSubscriber:!1,stunServerUrl:M.stunServerUrl,turnServers:M.joinInfo.turnServers,maxAudioBW:a.maxAudioBW,minVideoBW:a.minVideoBW,maxVideoBW:a.maxVideoBW,mode:M.mode,codec:M.codec,isVideoMute:e.userMuteVideo||e.peerMuteVideo,isAudioMute:e.userMuteAudio||e.peerMuteAudio,maxFrameRate:e.attributes.maxFrameRate,agoraStream:e,clientId:M.clientId,isCloudProxy3:3===M.joinInfo.proxyServerType,onNoIceCandidate:function(){M.dispatchEvent({type:"no_ice_candidate",stream:e})}},e.pc=Object(I.a)(e.connectionSpec),e.pc.addStream(e.stream),y.default.debug("[".concat(M.clientId,"] PeerConnection add stream :"),e.stream),e.pc.onnegotiationneeded=function(n){"motion"===e.optimizationMode&&e.pc.setRtpSenderParameters("maintain-framerate"),"detail"===e.optimizationMode&&e.pc.setRtpSenderParameters("maintain-resolution");var r={state:"negotiation",stream_type:1===t.streamType?"low":"high",p2p_id:d,sdp:n};M.makeRequest(c(r),(function(t){y.default.debug("Negotating Stream ".concat(e.getId())),e.pc.processSignalingMessage(t.sdp)}),(function(e,t){y.default.error("Negotiation failed ".concat(e),t,r)}))},clearInterval(M.timers[e.getId()]),M.timers[e.getId()]=setInterval((function(){if(Object(S.getParameter)("REPORT_STATS")){var t=0;e&&e.pc&&e.pc.getStats&&e.pc.getStatsRate((function(n){n.forEach((function(n){if(n&&n.id&&!(/_recv$/.test(n.id)||/^time$/.test(n.id)||~n.type.toLowerCase().indexOf("inbound"))&&e.getUserId()){if(-1===n.id.indexOf("outbound_rtp")&&-1===n.id.indexOf("OutboundRTP")&&-1===n.type.toLowerCase().indexOf("outbound")||"video"!==n.mediaType||(n.googFrameWidthSent=e.videoWidth+"",n.googFrameHeightSent=e.videoHeight+""),"video"===n.mediaType)try{var r=e.stream.getVideoTracks()[0];n.A_vstd=r.enabled?"0":"1"}catch(e){}if("audio"===n.mediaType)try{var i=e.stream.getAudioTracks()[0];n.A_astd=i.enabled?"0":"1"}catch(e){}if(e.getId()==e.getUserId()){var o=200*t;t++,setTimeout((function(){var e=M.socket&&M.socket.getLastMsgTime()&&Date.now()-M.socket.getLastMsgTime();e>Object(S.getParameter)("REPORT_STATS_TIMEOUT")?y.default.debug("PublishStats report blocked by REPORT_STATS_TIMEOUT ".concat(e)):M.makeReport(function(e){var t={};return Object.keys(e).forEach((function(n){Object(S.getParameter)("STATS_FILTER")[n]||(t[k(n)]=e[n])})),{_type:"publish_stats",_message:{stream_type:"high",stats:t}}}(n))}),o)}else o=200*t,t++,setTimeout((function(){var e=M.socket&&M.socket.getLastMsgTime()&&Date.now()-M.socket.getLastMsgTime();e>Object(S.getParameter)("REPORT_STATS_TIMEOUT")?y.default.debug("PublishStatsLow report blocked by REPORT_STATS_TIMEOUT ".concat(e)):M.makeReport(function(e){var t={};return Object.keys(e).forEach((function(n){Object(S.getParameter)("STATS_FILTER")[n]||(t[k(n)]=e[n])})),{_type:"publish_stats",_message:{stream_type:"low",stats:t}}}(n))}),o)}}))}))}}),3e3);var u=function(){Object(S.getParameter)("REPORT_STATS")&&e&&e.pc&&e.pc.getVideoRelatedStats&&e.pc.getVideoRelatedStats((function(t){var n,r,i=M.socket&&M.socket.getLastMsgTime()&&Date.now()-M.socket.getLastMsgTime();i>Object(S.getParameter)("REPORT_STATS_TIMEOUT")?y.default.debug("PublishRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(i)):e.getId()===e.getUserId()?M.makeReport((n=t,r={},Object.keys(n).forEach((function(e){Object(S.getParameter)("STATS_FILTER")[e]||(r[k(e)]=n[e])})),{_type:"publish_related_stats",_message:{stream_type:"high",stats:r}})):M.makeReport(function(e){var t={};return Object.keys(e).forEach((function(n){Object(S.getParameter)("STATS_FILTER")[n]||(t[k(n)]=e[n])})),{_type:"publish_related_stats",_message:{stream_type:"low",stats:t}}}(t))}))};u(),clearInterval(M.timers[e.getId()+"_RelatedStats"]),M.timers[e.getId()+"_RelatedStats"]=setInterval(u,1e3)}}},M.unpublish=function(e,t,n,r){if("object"!==l()(e)||null===e)return y.default.error("[".concat(M.clientId,"] Invalid local stream")),void D(r,N.default.INVALID_LOCAL_STREAM);if(M.state!==T)return y.default.error("[".concat(M.clientId,"] User not in the session")),void D(r,N.default.INVALID_OPERATION);if(null!=M.timers[e.getId()]&&(clearInterval(M.timers[e.getId()]),clearInterval(M.timers[e.getId()+"_RelatedStats"])),void 0!==M.socket)if(e.local&&void 0!==M.localStreams[e.getId()]){delete M.localStreams[e.getId()];var i={stream_id:e.getUserId(),stream_type:1===t.streamType?"low":"high"};M.makeRequest({_type:"unpublish",_message:i}),(e.hasAudio()||e.hasVideo()||e.hasScreen())&&void 0===e.url&&void 0!==e.pc&&(e.pc.close(),e.pc=void 0),e.onClose=void 0,e._onAudioMute=void 0,e._onAudioUnute=void 0,e._onVideoMute=void 0,e._onVideoUnmute=void 0,M.p2ps.delete(e.p2pId),n&&n()}else y.default.error("[".concat(M.clientId,"] Invalid local stream")),D(r,N.default.INVALID_LOCAL_STREAM);else y.default.error("[".concat(M.clientId,"] User not in the session")),D(r,N.default.INVALID_OPERATION)},M.subscribe=function(e,t,n){var r=(new Date).getTime();e.subscribeLTS=r;var o=!1;if(y.default.info("[".concat(M.clientId,"] Gatewayclient ").concat(M.uid," Subscribe ").concat(e.getId(),": ").concat(JSON.stringify(e.subscribeOptions))),"object"!==l()(e)||null===e)return y.default.error("[".concat(M.clientId,"] Invalid remote stream")),n&&n(N.default.INVALID_REMOTE_STREAM),void v.report.subscribe(M.joinInfo.sid,{lts:r,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:N.default.INVALID_REMOTE_STREAM});if(M.state!==T&&(y.default.error("[".concat(M.clientId,"] User is not in the session")),!o))return o=!0,v.report.subscribe(M.joinInfo.sid,{lts:r,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:N.default.INVALID_OPERATION}),n&&n(N.default.INVALID_OPERATION);if(!e.local&&M.remoteStreams.hasOwnProperty(e.getId()))if(e.hasAudio()||e.hasVideo()||e.hasScreen()){var a=M.generateP2PId();M.p2ps.set(a,e),e.p2pId=a,e.pc=Object(I.a)({callback:function(t){t||n&&n("CANNOT_GET_OFFER");var i={stream_id:e.getId(),audio:!e.subscribeOptions||e.subscribeOptions.audio,video:!e.subscribeOptions||e.subscribeOptions.video,codec:M.codec,p2p_id:a,sdp:t,tcc:Object(S.getParameter)("SUBSCRIBE_TCC"),extend:Object(S.getParameter)("SUB_EXTEND")};M.makeRequest({_type:"subscribe",_message:i},(function(t){e.pc.processSignalingMessage(t.sdp)}),(function(t,i){y.default.error("[".concat(M.clientId,"] Subscribe remote stream Failed: ").concat(t,", closing stream "),e.getId(),i),v.report.subscribe(M.joinInfo.sid,{lts:r,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:t}),"TIMEOUT"!=t&&(M.processSubscribeFailure(e),n&&n(t))}))},nop2p:!0,audio:!0,video:!0,screen:e.hasScreen(),isSubscriber:!0,stunServerUrl:M.stunServerUrl,turnServers:M.joinInfo.turnServers,isVideoMute:e.userMuteVideo,isAudioMute:e.userMuteAudio,uid:e.getId(),agoraStream:e,clientId:M.clientId}),e.pc.onaddstream=function(t,n){if(e._onAudioUnmute=function(){M.makeReport(i({action:"unmute_remote_audio",stream_id:e.getId()}),(function(){}),(function(){}))},e._onAudioMute=function(){M.makeReport(i({action:"mute_remote_audio",stream_id:e.getId()}),(function(){}),(function(){}))},e._onVideoUnmute=function(){M.makeReport(i({action:"unmute_remote_video",stream_id:e.getId()}),(function(){}),(function(){}))},e._onVideoMute=function(){M.makeReport(i({action:"mute_remote_video",stream_id:e.getId()}),(function(){}),(function(){}))},"ontrack"===n&&"video"===t.track.kind||"onaddstream"===n){y.default.info("[".concat(M.clientId,"] Remote stream subscribed with uid "),e.getId());var r=M.remoteStreams[e.getId()];if(M.remoteStreams[e.getId()].stream="onaddstream"===n?t.stream:t.streams[0],M.remoteStreams[e.getId()].hasVideo()){if(Object(w.isFireFox)()||Object(w.isSafari)()){var o=M.remoteStreams[e.getId()].stream;Object(_.vsResHack)(o,(function(t,n){e.videoWidth=t,e.videoHeight=n}),(function(e){return y.default.warning("[".concat(M.clientId,"] vsResHack failed: ")+e)}))}}else{var s=M.remoteStreams[e.getId()];s.peerMuteVideo=!0,M._adjustPCMuteStatus(s)}r&&r.isPlaying()&&r.elementID&&(y.default.debug("[".concat(M.clientId,"] Reload Player ").concat(r.elementID," StreamId ").concat(r.getId())),e.audioOutput=r.audioOutput,r.stop(),e.play(r.elementID,r.playOptions)),delete e.audioLevelHelper;var a=Object(m.e)({type:"stream-subscribed",stream:M.remoteStreams[e.getId()]});M.dispatchEvent(a)}},clearInterval(M.timers[e.getId()]),M.timers[e.getId()]=setInterval((function(){if(Object(S.getParameter)("REPORT_STATS")){var t=0;e&&e.pc&&e.pc.getStats&&e.pc.getStatsRate((function(n){n.forEach((function(n){if(n&&n.id){if(/_send$/.test(n.id)||/^time$/.test(n.id)||/^bweforvideo$/.test(n.id))return;-1===n.id.indexOf("inbound_rtp")&&-1===n.id.indexOf("inbound-rtp")&&-1===n.type.toLowerCase().indexOf("inbound")||"video"!==n.mediaType||(n.googFrameWidthReceived=e.videoWidth+"",n.googFrameHeightReceived=e.videoHeight+"");var r=200*t;t++;var i=e.getId();setTimeout((function(){var t=M.socket&&M.socket.getLastMsgTime()&&Date.now()-M.socket.getLastMsgTime();if(t>Object(S.getParameter)("REPORT_STATS_TIMEOUT"))y.default.debug("SubscribeStats report blocked by REPORT_STATS_TIMEOUT ".concat(t));else{if("video"===n.mediaType)try{var r=e.stream.getVideoTracks()[0];n.A_vrtd=r.enabled?"0":"1",e.player&&e.player.freezeTimeCounterList.length>0&&(n.A_vrft=e.player.freezeTimeCounterList.splice(0,1)[0].toString())}catch(e){}if("audio"===n.mediaType)try{var o=e.stream.getAudioTracks()[0];n.A_artd=o.enabled?"0":"1"}catch(e){}M.makeReport(d(i,n))}}),r)}}))}))}}),3e3),clearInterval(M.timers[e.getId()+"_RelatedStats"]),M.timers[e.getId()+"_RelatedStats"]=setInterval((function(){if(Object(S.getParameter)("REPORT_STATS")&&e&&e.pc){var t=M.socket&&M.socket.getLastMsgTime()&&Date.now()-M.socket.getLastMsgTime();if(t>Object(S.getParameter)("REPORT_STATS_TIMEOUT"))return void y.default.debug("SubscribeRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(t));e.pc.getVideoRelatedStats&&e.pc.getVideoRelatedStats((function(t){e.player&&(e.hasVideo()&&!e.peerMuteVideo&&(t.isFreeze=e.player.freezeCount>e.player.lastFreezeCount),e.player.lastFreezeCount=e.player.freezeCount),M.makeReport(s(e.getId(),t))})),e.pc.getAudioRelatedStats&&e.pc.getAudioRelatedStats((function(t){M.makeReport(s(e.getId(),t))}))}}),1e3),M.audioLevel[e.getId()]=0,clearInterval(M.timers[e.getId()+"audio"]),M.timers[e.getId()+"audio"]=setInterval((function(){M.hasListeners("active-speaker")&&e&&e.pc&&"established"===e.pc.state&&e.pc.getStats&&e.pc.getStats((function(t){t.forEach((function(t){if("audio"===t.mediaType){if(t.audioOutputLevel>5e3)for(var n in M.audioLevel[e.getId()]<20&&(M.audioLevel[e.getId()]+=1),M.audioLevel)n!==""+e.getId()&&M.audioLevel[n]>0&&(M.audioLevel[n]-=1);var r=Object.keys(M.audioLevel).sort((function(e,t){return M.audioLevel[t]-M.audioLevel[e]}));if(M.activeSpeaker!==r[0]){var i=Object(m.a)({type:"active-speaker",uid:r[0]});M.dispatchEvent(i),M.activeSpeaker=r[0],y.default.debug("[".concat(M.clientId,"] Update active speaker: ").concat(M.activeSpeaker))}}}))}),50)}),50),e.pc.oniceconnectionstatechange=function(i){if("failed"===i)null!=M.timers[e.getId()]&&(clearInterval(M.timers[e.getId()]),clearInterval(M.timers[e.getId()]+"audio")),y.default.error("[".concat(M.clientId,"] Subscriber connection is lost -- streamId: ").concat(e.getId(),", p2pId: ").concat(a)),y.default.debug("[".concat(M.clientId,"] subscribe p2p failed: "),M.p2ps),o||(o=!0,n&&n(N.default.PEERCONNECTION_FAILED),v.report.subscribe(M.joinInfo.sid,{lts:r,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:N.default.PEERCONNECTION_FAILED,subscribeRequestid:M.subscribeRequestId.get(e.getId())||0,p2pid:a})),M.remoteStreams[e.getId()]&&M.p2ps.has(a)&&(M.p2ps.delete(a),M.dispatchEvent(Object(m.a)({type:"subP2PLost",stream:e})));else if("connected"===i&&(y.default.debug("[".concat(M.clientId,"] subscribe p2p connected: "),M.p2ps),!o)){o=!0,v.report.subscribe(M.joinInfo.sid,{lts:r,succ:!0,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:null,subscribeRequestid:M.subscribeRequestId.get(e.getId())||0,p2pid:a}),M._adjustPCMuteStatus(e);var s=!1,c=!1,l=!1,d=setInterval((function(){s&&c||(e.pc?e.pc.getStats((function(t){t.forEach((function(t){if((-1!==t.id.indexOf("recv")||t.type&&-1!==t.type.toLowerCase().indexOf("inbound")||-1!==t.id.indexOf("inbound_rtp")||-1!==t.id.indexOf("inbound-rtp")||-1!==t.id.indexOf("InboundRTP"))&&"audio"===t.mediaType){if((t.googDecodingNormal>0||t.audioOutputLevel>0)&&!s){s=!0,M.dispatchEvent({type:"first-audio-frame-decode",stream:e}),s&&c&&clearInterval(d);var n=Date.now(),r=v.report.getSessionStartTime(M.joinInfo.sid);v.report.firstAudioDecode(M.joinInfo.sid,{peerid:e.uintId,uid:M.uid,elapse:n-r,subscribeElapse:n-e.subscribeLTS,subscribeRequestid:M.subscribeRequestId.get(e.getId())||0,p2pid:a})}parseInt(t.packetsReceived)>0&&!c&&(c=!0,M.dispatchEvent({type:"first-audio-packet-received",stream:e}),s&&c&&clearInterval(d),n=Date.now(),r=v.report.getSessionStartTime(M.joinInfo.sid),v.report.firstAudioReceived(M.joinInfo.sid,{peerid:e.uintId,uid:M.uid,elapse:n-r,subscribeElapse:n-e.subscribeLTS,subscribeRequestid:M.subscribeRequestId.get(e.getId())||0,p2pid:a}))}}))}),100):clearInterval(d))}),100),u=!1,h=!1,p=setInterval((function(){u&&h||(e.pc?e.pc.getStats((function(t){t.forEach((function(t){if((-1!==t.id.indexOf("recv")||t.type&&-1!==t.type.toLowerCase().indexOf("inbound")||-1!==t.id.indexOf("inbound_rtp")||-1!==t.id.indexOf("inbound-rtp")||-1!==t.id.indexOf("InboundRTP"))&&"video"===t.mediaType){if((t.framesDecoded>0||t.googFramesDecoded>0)&&!u){u=!0,M.dispatchEvent({type:"first-video-frame-decode",stream:e}),u&&h&&clearInterval(p);var n=Date.now(),r=v.report.getSessionStartTime(M.joinInfo.sid);e.firstFrameTime=(new Date).getTime()-e.subscribeLTS,v.report.firstVideoDecode(M.joinInfo.sid,{peerid:e.uintId,width:parseInt(t.googFrameWidthReceived)||0,height:parseInt(t.googFrameHeightReceived)||0,uid:M.uid,elapse:n-r,subscribeElapse:n-e.subscribeLTS,subscribeRequestid:M.subscribeRequestId.get(e.getId())||0,p2pid:a})}t.packetsReceived>0&&!h&&(h=!0,M.dispatchEvent({type:"first-video-packet-received",stream:e}),u&&h&&clearInterval(p),n=Date.now(),r=v.report.getSessionStartTime(M.joinInfo.sid),v.report.firstVideoReceived(M.joinInfo.sid,{peerid:e.uintId,uid:M.uid,elapse:n-r,subscribeElapse:n-e.subscribeLTS,subscribeRequestid:M.subscribeRequestId.get(e.getId())||0,p2pid:a}))}}))}),100):clearInterval(p))}),100),f=setInterval((function(){if(!l){var t=e.getId(),n=M.traffic_stats;if(n&&n.peer_delay){var r=n.peer_delay.find((function(e){return e.peer_uid==t}));if(r){if(l=!0,M.peerPublishDurationMap.get(e.getId()))return void clearInterval(f);var i=r.peer_publish_audio_duration,o=r.peer_publish_video_duration;if(void 0===i||void 0===o)return;M.peerPublishDurationMap.set(e.getId(),!0);var s=v.report.getSessionStartTime(M.joinInfo.sid),a=(i||o)+(Date.now()-n.timestamp),c=Date.now();v.report.peerPublishStatus({audiotag:i?1:-1,videotag:o?1:-1,lts:c,sid:M.joinInfo.sid,cname:M.joinInfo.cname,cid:M.joinInfo.cid,uid:M.joinInfo.uid,elapse:c-s,peer:e.uintId,peerPublishDuration:a,joinChannelSuccessElapse:c-M.joinSuccessLts,subscribeElapse:c-e.subscribeLTS}),clearInterval(f)}}}}),1e3);return e.sid=M.joinInfo.sid,t&&t()}}}else y.default.error("[".concat(M.clientId,"] Invalid remote stream")),o||(o=!0,n&&n(N.default.INVALID_REMOTE_STREAM),v.report.subscribe(M.joinInfo.sid,{lts:r,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:N.default.INVALID_REMOTE_STREAM}));else y.default.error("[".concat(M.clientId,"] No such remote stream")),o||(o=!0,n&&n(N.default.NO_SUCH_REMOTE_STREAM),v.report.subscribe(M.joinInfo.sid,{lts:r,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:N.default.NO_SUCH_REMOTE_STREAM}))},M.subscribeChange=function(e,t,n){var r=Date.now();y.default.info("[".concat(M.clientId,"] Gatewayclient ").concat(M.uid," SubscribeChange ").concat(e.getId(),": ").concat(JSON.stringify(e.subscribeOptions))),M._adjustPCMuteStatus(e);var i={stream_id:e.getId(),audio:e.subscribeOptions.audio,video:e.subscribeOptions.video};M.makeRequest({_type:"subscribe_change",_message:i},(function(n){var i=Object(m.e)({type:"stream-subscribe-changed",stream:M.remoteStreams[e.getId()]});v.report.subscribe(M.joinInfo.sid,{lts:r,succ:!0,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:null,subscribeRequestid:M.subscribeRequestId.get(e.getId())||0,p2pid:M.p2ps.get(e.getId())}),M.dispatchEvent(i),t&&t()}),(function(t,r){y.default.error("[".concat(M.clientId,"] Subscribe Change Failed ").concat(e.getId()),t,r),n&&n(t,r)}))},M.processPublishFailure=function(e){e.publishLTS=null,e.p2pId&&M.p2ps.get(e.p2pId)===e&&M.p2ps.delete(e.p2pId),M.localStreams[e.getUserId()]===e&&delete M.localStreams[e.getUserId()],M.localStreams[e.getId()]===e&&delete M.localStreams[e.getId()],e.pc&&(e.pc.processSignalingMessage=function(){},e.pc.oniceconnectionstatechange=function(){},e.pc.close(),delete e.pc),delete e.onClose,delete e._onAudioUnmute,delete e._onVideoUnmute,delete e._onAudioMute,delete e._onVideoMute,delete e._onAudioUnmute},M.processSubscribeFailure=function(e){e.p2pId&&M.p2ps.get(e.p2pId)===e&&M.p2ps.delete(e.p2pId),e.pc&&(e.pc.onaddstream=function(){},e.pc.processSignalingMessage=function(){},e.pc.oniceconnectionstatechange=function(){},e.pc.close(),delete e.pc),delete e.onClose,delete e._onAudioUnmute,delete e._onVideoUnmute,delete e._onAudioMute,delete e._onVideoMute,delete e._onAudioUnmute},M._adjustPCMuteStatus=function(e){y.default.debug("[".concat(M.clientId,"]: use _adjustPCMuteStatus: ").concat(e.getId())),y.default.debug("[".concat(M.clientId,"]: video: ").concat(e.video,", audio: ").concat(e.audio,", suboption: ").concat(JSON.stringify(e.subscribeOptions),",userMuteVideo: ").concat(e.userMuteVideo,", peerMuteVideo: ").concat(e.peerMuteVideo,", userMuteAudio: ").concat(e.userMuteAudio,", peerMuteAudio: ").concat(e.peerMuteAudio)),!e.local&&e.pc&&e.pc.peerConnection.getReceivers&&e.pc.peerConnection.getReceivers().forEach((function(t){if(t&&t.track&&"audio"===t.track.kind){var n=!e.userMuteAudio&&!e.peerMuteAudio;e.subscribeOptions&&!e.subscribeOptions.audio&&(n=!1),y.default.debug("[".concat(M.clientId,"]: set receiver audio track: ").concat(n)),t.track.enabled=!!n}else if(t&&t.track&&"video"===t.track.kind){var r=!e.userMuteVideo&&!e.peerMuteVideo;e.subscribeOptions&&!e.subscribeOptions.video&&(r=!1),y.default.debug("[".concat(M.clientId,"]: set receiver video track: ").concat(r)),t.track.enabled=!!r}}))},M.unsubscribe=function(e,t,n){if("object"!==l()(e)||null===e)return y.default.error("[".concat(M.clientId,"] Invalid remote stream")),void D(n,N.default.INVALID_REMOTE_STREAM);if(M.state!==T)return y.default.error("[".concat(M.clientId,"] User is not in the session")),void D(n,N.default.INVALID_OPERATION);if(null!=M.timers[e.getId()]&&(clearInterval(M.timers[e.getId()]),clearInterval(M.timers[e.getId()]+"audio")),null!=M.audioLevel[e.getId()]&&delete M.audioLevel[e.getId()],null!=M.timer_counter[e.getId()]&&delete M.timer_counter[e.getId()],M.remoteStreams.hasOwnProperty(e.getId())){if(!M.socket)return y.default.error("[".concat(M.clientId,"] User is not in the session")),void D(n,N.default.INVALID_OPERATION);if(e.local)return y.default.error("[".concat(M.clientId,"] Invalid remote stream")),void D(n,N.default.INVALID_REMOTE_STREAM);e.close(),e.stop();var r={stream_id:e.getId()};M.makeRequest({_type:"unsubscribe",_message:r}),void 0!==e.pc&&(e.pc.close(),e.pc=void 0),e.onClose=void 0,e._onAudioMute=void 0,e._onAudioUnute=void 0,e._onVideoMute=void 0,e._onVideoUnmute=void 0,delete e.subscribeOptions,M.p2ps.delete(e.p2pId),y.default.info("[".concat(M.clientId,"] Unsubscribe stream success")),t&&t()}else D(n,N.default.NO_SUCH_REMOTE_STREAM)},M.setRemoteVideoStreamType=function(e,t){if(y.default.debug("[".concat(M.clientId,"] Switching remote video stream ").concat(e.getId()," to ").concat(t)),"object"===l()(e)&&null!==e)if(M.state===T){if(!e.local){switch(t){case M.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_HIGH:case M.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_LOW:case M.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_MEDIUM:break;default:return}var n={stream_id:e.getId(),stream_type:t};M.makeRequest({_type:"switch_video_stream",_message:n},(function(){y.default.debug("SwitchVideoStream Success ".concat(n.stream_id," ").concat(n.stream_type))}),(function(e,t){y.default.error("SwitchVideoStream Error ".concat(e," ").concat(n.stream_id," ").concat(n.stream_type),t)}))}}else y.default.error("[".concat(M.clientId,"] User is not in the session"));else y.default.error("[".concat(M.clientId,"] Invalid remote stream"))},M.renewToken=function(e,t,n){e?M.key?M.state!==T?(y.default.debug("[".concat(M.clientId,"] Client is not connected. Trying to rejoin")),M.key=e,M.rejoin(),t&&t()):(y.default.debug("[".concat(M.clientId,"] renewToken from ").concat(M.key," to ").concat(e)),M.key=e,M.makeRequest({_type:"renew_token",_message:{token:e}},t,n)):(y.default.error("[".concat(M.clientId,"] Client is previously joined without token")),n&&n(N.default.INVALID_PARAMETER)):(y.default.error("[".concat(M.clientId,"] Invalid Token ").concat(e)),n&&n(N.default.INVALID_PARAMETER))},M.setStreamFallbackOption=function(e,t){if(y.default.debug("[".concat(M.clientId,"] Set stream fallback option ").concat(e.getId()," to ").concat(t)),"object"===l()(e)&&null!==e)if(M.state===T){if(!e.local){switch(t){case M.streamFallbackTypes.STREAM_FALLBACK_OPTION_DISABLED:case M.streamFallbackTypes.STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:case M.streamFallbackTypes.STREAM_FALLBACK_OPTION_AUDIO_ONLY:break;default:return}var n={stream_id:e.getId(),fallback_type:t};M.makeRequest({_type:"set_fallback_option",_message:n},(function(){y.default.debug("SetStreamFallbackOption success ".concat(n.stream_id," ").concat(t))}),(function(e,r){y.default.error("Failed to SetStreamFallbackOption ".concat(n.stream_id," ").concat(t," ").concat(e),r)}))}}else y.default.error("[".concat(M.clientId,"] User is not in the session"));else y.default.error("[".concat(M.clientId,"] Invalid remote stream"))},M.enableAudioVolumeIndicator=function(e,t){M.audioVolumeIndication.enabled=!0,M.audioVolumeIndication.interval=e,M.audioVolumeIndication.smooth=t,M.resetAudioVolumeIndication()},M.resetAudioVolumeIndication=function(){if(clearInterval(M.timers.audioVolumeIndication),clearInterval(M.timers.audioVolumeSampling),M.audioVolumeIndication.enabled&&M.audioVolumeIndication.interval){var e=Math.floor(1e3*M.audioVolumeIndication.smooth/100);clearInterval(M.timers.audioVolumeSampling),M.timers.audioVolumeSampling=setInterval((function(){M.audioVolumeSampling||(M.audioVolumeSampling={});var t={};for(var n in M.remoteStreams){var r=M.remoteStreams[n];if(r.stream&&r.hasAudio()){var i=r.getAudioLevel();i>0&&i<1&&(i*=100);var o=M.audioVolumeSampling[n]||[];for(o.push(i);o.length>e;)o.shift();t[n]=o}}M.audioVolumeSampling=t}),100),clearInterval(M.timers.audioVolumeIndication),M.timers.audioVolumeIndication=setInterval((function(){if(M.socket&&M.socket.signal&&M.socket.signal.connection&&M.socket.signal.connection.readyState===WebSocket.OPEN){var e=[];for(var t in M.remoteStreams)if(M.audioVolumeSampling&&M.audioVolumeSampling[t]){var n=M.audioVolumeSampling[t],r=0;n.forEach((function(e){r+=e}));var i={uid:t,level:Math.floor(r/n.length)};i.level&&e.push(i)}var o=e.sort((function(e,t){return e.level-t.level}));y.default.debug("[".concat(M.clientId,"] volume-indicator "),JSON.stringify(o)),M.audioVolumeIndication.sortedAudioVolumes=o;var s=Object(m.a)({type:"volume-indicator",attr:o});M.dispatchEvent(s)}}),M.audioVolumeIndication.interval)}},M.closeGateway=function(){y.default.debug("[".concat(M.clientId,"] close gateway")),M.state=h,M.socket.close(),z()},M.startChannelMediaRelay=function(){var e=a()(o.a.mark((function e(t){var n,r,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M.channelMediaRelayController){e.next=2;break}throw new L.ChannelMediaError("RELAY_ALREADY_START","",L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_ALREADY_START);case 2:return n=function(e){M.dispatchEvent({type:"channel-media-relay-event",code:e})},r=function(e,t,n){e===L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE&&t===L.CHANNEL_MEDIA_RELAY_ERROR.SERVER_CONNECTION_LOST&&(M.channelMediaRelayController.dispose(),M.channelMediaRelayController=null),M.dispatchEvent({type:"channel-media-relay-state",state:e,code:t,data:n})},M.channelMediaRelayController=new P.a(M.joinInfo,M.clientId),M.channelMediaRelayController.on("event",n),M.channelMediaRelayController.on("state",r),e.prev=7,e.next=10,M.channelMediaRelayController.startChannelMediaRelay(t);case 10:e.next=22;break;case 12:throw e.prev=12,e.t0=e.catch(7),y.default.debug("[".concat(M.clientId,"] startChannelMediaRelay exception: ").concat(JSON.stringify(e.t0))),i=L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,s=e.t0 instanceof L.ChannelMediaError?"SetSourceChannelStatus"===e.t0.data||e.t0.data&&e.t0.data.serverResponse&&"SetSourceChannel"===e.t0.data.serverResponse.command?"FAILED_JOIN_SRC":"SetDestChannelStatus"===e.t0.data||e.t0.data&&e.t0.data.serverResponse&&"SetDestChannel"===e.t0.data.serverResponse.command?"FAILED_JOIN_DEST":e.t0.data&&e.t0.data.serverResponse&&"StartPacketTransfer"===e.t0.data.serverResponse.command?"FAILED_PACKET_SENT_TO_DEST":e.t0.message===L.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.t0.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.t0.message===L.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.t0.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":e.t0.message===L.CHANNEL_MEDIA_ERROR.AP_REQUEST_TIMEOUT?"NO_RESOURCE_AVAILABLE":e.t0.message===L.CHANNEL_MEDIA_ERROR.WS_ABORT||e.t0.message===L.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR",M.dispatchEvent({type:"channel-media-relay-state",state:i,code:L.CHANNEL_MEDIA_RELAY_ERROR[s]}),M.channelMediaRelayController&&(M.channelMediaRelayController.dispose(),M.channelMediaConfig=null,M.channelMediaRelayController=null),M.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new L.ChannelMediaError(s,null,L.CHANNEL_MEDIA_RELAY_ERROR[s]);case 22:M.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_RUNNING,code:L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_OK}),M.channelMediaConfig=t;case 24:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(t){return e.apply(this,arguments)}}(),M.updateChannelMediaRelay=function(){var t=a()(o.a.mark((function t(n){var r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(M.channelMediaRelayController){t.next=2;break}throw new L.ChannelMediaError("RELAY_NOT_START",null,L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return t.prev=2,t.next=5,M.channelMediaRelayController.updateChannelMediaRelay(n);case 5:t.next=18;break;case 7:throw t.prev=7,t.t0=t.catch(2),y.default.debug("[".concat(M.clientId,"] updateChannelMediaRelay exception: ").concat(JSON.stringify(e))),r=L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,i=e instanceof L.ChannelMediaError?e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":e.message===L.CHANNEL_MEDIA_ERROR.WS_ABORT||e.message===L.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR",M.dispatchEvent({type:"channel-media-relay-event",code:L.CHANNEL_MEDIA_RELAY_EVENT.PACKET_UPDATE_DEST_CHANNEL_REFUSED}),M.dispatchEvent({type:"channel-media-relay-state",state:r,code:L.CHANNEL_MEDIA_RELAY_ERROR[i]}),M.channelMediaRelayController&&(M.channelMediaRelayController.dispose(),M.channelMediaConfig=null,M.channelMediaRelayController=null),M.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new L.ChannelMediaError(i,null,L.CHANNEL_MEDIA_RELAY_ERROR[i]);case 18:M.channelMediaConfig=n;case 19:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),M.stopChannelMediaRelay=a()(o.a.mark((function t(){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(M.channelMediaRelayController){t.next=2;break}throw new L.ChannelMediaError("RELAY_NOT_START",null,L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return t.prev=2,t.next=5,M.channelMediaRelayController.stopChannelMediaRelay();case 5:t.next=17;break;case 7:throw t.prev=7,t.t0=t.catch(2),y.default.debug("[".concat(M.clientId,"] stopChannelMediaRelay exception: ").concat(JSON.stringify(e))),n=L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,r=e instanceof L.ChannelMediaError?e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":"INTERNAL_ERROR":"INTERNAL_ERROR",M.dispatchEvent({type:"channel-media-relay-state",state:n,code:L.CHANNEL_MEDIA_RELAY_ERROR[r]}),M.channelMediaRelayController&&(M.channelMediaRelayController.dispose(),M.channelMediaConfig=null,M.channelMediaRelayController=null),M.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new L.ChannelMediaError(r,null,L.CHANNEL_MEDIA_RELAY_ERROR[r]);case 17:M.channelMediaConfig=null,M.channelMediaRelayController=null;case 19:case"end":return t.stop()}}),t,null,[[2,7]])}))),M.sendMetadata=function(e,t){M.makeRequest(function(e){return{_type:"send_metadata",_message:{session_id:M.joinInfo.sid,metadata:window.btoa(unescape(encodeURIComponent(e)))}}}(e),(function(){y.default.debug("[".concat(M.clientId,'] send metadata "').concat(e,'" success')),t&&t(null)}),(function(n){y.default.error("[".concat(M.clientId,'] send metadata "').concat(e,'" failed'),n),t&&t(n)}))},M._reportWebsocketCloseEvent=function(e,t){try{var n=v.report.getSessionStartTime(M.joinInfo.sid),r=Date.now();v.report.webSocketQuit({lts:r,sid:M.joinInfo.sid,cname:M.joinInfo.cname,cid:M.joinInfo.cid,uid:M.joinInfo.uid,elapse:r-n,succ:e,errorCode:t,ip:null})}catch(e){y.default.debug("[".concat(M.clientId,"]: _reportWebsocketCloseEvent exception, ").concat(e))}};var U=function(){y.default.debug("[".concat(M.clientId,"] Reconnect gateway")),M.state=h,M.socket.close(),z(),M.reconnectMode="recover",M.state=E,V()};M.recover=U;var z=function(){for(var e in M.dispatchEvent({type:"before-clear-connection"}),M.timers)M.timers.hasOwnProperty(e)&&clearInterval(M.timers[e]);for(var e in M.remoteStreams)if(M.remoteStreams.hasOwnProperty(e)){var t=M.remoteStreams[e],n=Object(m.a)({type:"stream-removed",uid:t.getId(),stream:t});M.dispatchEvent(n)}M.p2ps.clear(),W(),H(),clearInterval(M.pingTimer)};M.rejoin=function(){M.socket&&(clearInterval(M.pingTimer),M.socket.close(),M.socket=void 0),M.state=E,V()};var V=function(e,t){M.dispatchEvent(Object(m.a)({type:"rejoin-start"})),e=e||function(e){y.default.info("[".concat(M.clientId,"] User ").concat(e," is re-joined to ").concat(M.joinInfo.cname)),M.dispatchEvent(Object(m.a)({type:"rejoin"})),M.channelMediaConfig&&M.startChannelMediaRelay(M.channelMediaConfig).then((function(){y.default.debug("[".concat(M.clientId,"] restartChannelMediaRelay success"))})).catch((function(e){y.default.debug("[".concat(M.clientId,"] restartChannelMediaRelay failed: ").concat(JSON.stringify(e)))})),M.liveStreams&&M.liveStreams.size&&M.liveStreams.forEach((function(e,t){e&&M.setLiveTranscoding(M.transcoding),M.startLiveStreaming(t,e)})),M.injectLiveStreams&&M.injectLiveStreams.size&&M.injectLiveStreams.forEach((function(e,t){M.addInjectStreamUrl(t,e)}))},t=t||function(e){y.default.error("[".concat(M.clientId,"] Re-join to channel failed "),e),M.dispatchEvent(Object(m.e)({type:"error",reason:e}))},M.key?(++M.rejoinAttempt,M.join(M.joinInfo,M.key,e,t)):y.default.error("[".concat(M.clientId,"] Connection recover failed [Invalid channel key]"))},B=function(e,t,n){if(M.onConnect=t,M.socket){if(M.dispatchEvent({type:"reconnect"}),"retry"===M.reconnectMode)y.default.debug("[".concat(M.clientId,"] Retry current gateway")),M.socket.reconnect();else if("tryNext"===M.reconnectMode)y.default.debug("[".concat(M.clientId,"] Try next gateway")),M.socket.connectNext();else if("recover"===M.reconnectMode){y.default.debug("[".concat(M.clientId,"] Recover gateway")),y.default.debug("[".concat(M.clientId,"] Try to reconnect choose server and get gateway list again ")),M.reconnectingCS=!0;var i=M.joinInfo&&M.joinInfo.sid;Object(C.getGatewayList)(M.joinInfo,(function(e){y.default.debug("[".concat(M.clientId,"] session:  ").concat(i," get gateway list success")),M.joinInfo.apResponse=e.res,M.reconnectingCS?M.socket.replaceHost(e.gateway_addr):y.default.debug("[".concat(M.clientId,"] session:  ").concat(i," already leave"))}))}}else o=e.gatewayAddr,M.socket=b(o,{sid:M.joinInfo.sid,clientId:M.clientId,proxyServerType:M.joinInfo.proxyServerType}),M.socket.on("start-connection",(function(e){M.ticket=e&&e.msg&&e.msg.ticket})),M.socket.on("on_uplink_stats",(function(e){var t={};for(var n in e)t[x(n)]=e[n];if(M.OutgoingAvailableBandwidth=t.uplink_available_bandwidth,M.localStreams[M.uid]){var r=M.localStreams[M.uid].uplinkStats;r&&r.period_fir===t.period_fir||y.default.debug("[".concat(M.clientId,"]: Period fir change to: ").concat(t.period_fir)),M.localStreams[M.uid].uplinkStats=t}})),M.socket.on("connect",(function(){M.dispatchEvent({type:"connected"}),M.attemps=1,M.onConnect()})),M.socket.on("recover",(function(){M.state=E,y.default.debug("[".concat(M.clientId,"] Try to reconnect choose server and get gateway list again ")),M.reconnectingCS=!0;var e=M.joinInfo&&M.joinInfo.sid;Object(C.getGatewayList)(M.joinInfo,(function(t){y.default.debug("[".concat(M.clientId,"] session:  ").concat(e," get gateway list success")),M.reconnectingCS?M.socket.replaceHost(t.gateway_addr):y.default.debug("[".concat(M.clientId,"] session:  ").concat(e," already leave"))}))})),M.socket.on("disconnect",(function(e){if(y.default.debug("[".concat(M.clientId,"] Receive disconnect message")),M.state!==h){M.state=h,M._reportWebsocketCloseEvent(-1,N.WEBSOCKET_CLOSE_REASON.WS_DISCONNECT);var t=Object(m.e)({type:"error",reason:N.default.SOCKET_DISCONNECTED});if(M.dispatchEvent(t),0===M.p2ps.size?M.reconnectMode="tryNext":M.reconnectMode="retry",z(),M.channelMediaRelayController&&M.channelMediaRelayController.dispose(),M.channelMediaRelayController=null,1!=r){var n,i=(n=M.attemps,1e3*Math.min(30,Math.pow(2,n)-1));if(y.default.error("[".concat(M.clientId,"] Disconnect from server [").concat(JSON.stringify(e),"], attempt to recover [#").concat(M.attemps,"] after ").concat(i/1e3," seconds")),M.hasInvokeLeave)return y.default.debug("[".concat(M.clientId,"] No reconnection because Client.leave has been invoked")),void(M.hasInvokeLeave=!1);setTimeout((function(){M.attemps++,M.state=E,M.inChannelInfo&&Date.now()-M.inChannelInfo.joinAt>Object(S.getParameter)("TICKET_RENEW_TIMEOUT")?(y.default.debug("Recovering to renew ticket"),U()):V()}),i)}else{var o=F.unregister(M);o&&y.default.debug("[".concat(M.clientId,"] "),o)}}})),M.socket.on("on_add_audio_stream",(function(e){if(y.default.info("[".concat(M.clientId,"] Newly added audio stream with uid ").concat(e.uid)),M.joinInfo.stringUid&&"string"!=typeof e.uid&&y.default.error("StringUID is Mixed with UintUID"),M.remoteStreamsInChannel.has(e.uid)||M.remoteStreamsInChannel.add(e.uid),void 0===M.remoteStreams[e.uid]){var t=Object(f.a)({streamID:e.uid,local:!1,audio:e.audio,video:e.video,uintUID:e.uint_id||e.uid});t.peerMuteVideo=!0,M.remoteStreams[e.uid]=t;var n=Object(m.e)({type:"stream-added",stream:t});M.dispatchEvent(n);var r=M.remoteMuteState[e.uid];r&&r.audio&&(n=Object(m.a)({type:"mute-audio",uid:e.uid}),M.dispatchEvent(n)),r&&r.video&&(n=Object(m.a)({type:"mute-video",uid:e.uid}),M.dispatchEvent(n))}v.report.onAddAudioStream(M.joinInfo.sid,{peerid:e.uint_id||e.uid,uid:M.uid})})),M.socket.on("on_update_stream",(function(e){y.default.info("[".concat(M.clientId,"] on_update_stream:"),e);var t=M.remoteStreams[e.uid];if(M.joinInfo.stringUid&&"string"!=typeof e.uid&&y.default.error("StringUID is Mixed with UintUID"),t){t.audio=e.audio,t.video=e.video,t.screen=e.screen,t.pc&&M._adjustPCMuteStatus(t);var n=Object(m.e)({type:"stream-updated",stream:t});M.dispatchEvent(n)}else y.default.debug("[".concat(M.clientId,"] Ignoring onUpdateStream event before onAddStream for uid ").concat(e.uid));v.report.onUpdateStream(M.joinInfo.sid,{peerid:e.uint_id||e.uid,audio:e.audio,video:e.video,uid:M.uid})})),M.socket.on("on_add_video_stream",(function(e){if(y.default.info("[".concat(M.clientId,"] Newly added remote stream with uid ").concat(e.uid,".")),M.joinInfo.stringUid&&"string"!=typeof e.uid&&y.default.error("StringUID is Mixed with UintUID"),M.remoteStreamsInChannel.has(e.uid)||M.remoteStreamsInChannel.add(e.uid),void 0===M.remoteStreams[e.uid]){var t=Object(f.a)({streamID:e.uid,local:!1,audio:e.audio,video:e.video,uintUID:e.uint_id||e.uid});M.remoteStreams[e.uid]=t;var n=Object(m.e)({type:"stream-added",stream:t});M.dispatchEvent(n);var r=M.remoteMuteState[e.uid];r&&r.audio&&(n=Object(m.a)({type:"mute-audio",uid:e.uid}),M.dispatchEvent(n)),r&&r.video&&(n=Object(m.a)({type:"mute-video",uid:e.uid}),M.dispatchEvent(n))}else{var i=M.remoteStreams[e.uid];if(i.video=!0,i.peerMuteVideo=!1,i.pc&&M._adjustPCMuteStatus(i),y.default.info("[".concat(M.clientId,"] Stream changed: enable video ").concat(e.uid)),void 0!==i.stream&&i.isPlaying()){var o=i.player.elementID;i.stop(),i.play(o,i.playOptions)}}v.report.onAddVideoStream(M.joinInfo.sid,{peerid:e.uint_id||e.uid,uid:M.uid})})),M.socket.on("on_remove_stream",(function(e){y.default.info("[".concat(M.clientId,"] on_remove_stream:"),e),M.remoteStreamsInChannel.has(e.uid)&&M.remoteStreamsInChannel.delete(e.uid);var t=M.remoteStreams[e.uid];if(t){delete M.remoteStreams[e.uid],delete M.remoteMuteState[e.uid];var n=Object(m.e)({type:"stream-removed",stream:t});M.dispatchEvent(n),t.close(),void 0!==t.pc&&(t.pc.close(),t.pc=void 0,M.p2ps.delete(t.p2pId)),v.report.onRemoveStream(M.joinInfo.sid,{peerid:e.uint_id||e.uid,uid:M.uid})}else y.default.error("ERROR stream ",e.uid," not found onRemoveStream ",e)})),M.socket.on("on_publish_stream",(function(e){y.default.info("[".concat(M.clientId,"] on_publish_stream:"),e);var t=M.localStreams[e.uid];M.dispatchEvent({type:"streamPublished",stream:t,proxy:e.proxy}),v.report.reportApiInvoke(M.joinInfo.sid,{name:"on_publish_stream",options:{proxy:e.proxy}})()})),M.socket.on("mute_audio",(function(e){y.default.info("[".concat(M.clientId,"] rcv peer mute audio: ").concat(e.uid)),M.remoteMuteState[e.uid]=M.remoteMuteState[e.uid]||{audio:!1,video:!1},M.remoteMuteState[e.uid].audio=!0;var t=Object(m.a)({type:"mute-audio",uid:e.uid}),n=M.remoteStreams[e.uid];n?(n.peerMuteAudio=!0,n.pc&&M._adjustPCMuteStatus(n),M.dispatchEvent(t)):y.default.debug("Ignoring event ".concat(e.type),e)})),M.socket.on("unmute_audio",(function(e){y.default.info("[".concat(M.clientId,"] rcv peer unmute audio: ").concat(e.uid)),M.remoteMuteState[e.uid]=M.remoteMuteState[e.uid]||{audio:!1,video:!1},M.remoteMuteState[e.uid].audio=!1;var t=Object(m.a)({type:"unmute-audio",uid:e.uid}),n=M.remoteStreams[e.uid];n?(n.peerMuteAudio=!1,n.pc&&M._adjustPCMuteStatus(n),M.dispatchEvent(t)):y.default.debug("Ignoring event ".concat(e.type),e)})),M.socket.on("mute_video",(function(e){y.default.info("[".concat(M.clientId,"] rcv peer mute video: ").concat(e.uid)),M.remoteMuteState[e.uid]=M.remoteMuteState[e.uid]||{audio:!1,video:!1},M.remoteMuteState[e.uid].video=!0;var t=Object(m.a)({type:"mute-video",uid:e.uid}),n=M.remoteStreams[e.uid];n?(n.peerMuteVideo=!0,n.player&&(n.player.peerVideoReady=!1),n.pc&&M._adjustPCMuteStatus(n),M.dispatchEvent(t)):y.default.debug("Ignoring event ".concat(e.type),e)})),M.socket.on("unmute_video",(function(e){y.default.info("[".concat(M.clientId,"] rcv peer unmute video: ").concat(e.uid)),M.remoteMuteState[e.uid]=M.remoteMuteState[e.uid]||{audio:!1,video:!1},M.remoteMuteState[e.uid].video=!1;var t=Object(m.a)({type:"unmute-video",uid:e.uid}),n=M.remoteStreams[e.uid];n?(n.peerMuteVideo=!1,n.pc&&M._adjustPCMuteStatus(n),M.dispatchEvent(t)):y.default.debug("Ignoring event ".concat(e.type),e)})),M.socket.on("on_crypt_error",(function(e){y.default.warning("[".concat(M.clientId,"] stream crypt error"));var t=Object(m.a)({type:"crypt-error",cryptType:e.crypt_type});M.dispatchEvent(t)})),M.socket.on("on_user_banned",(function(e){y.default.info("[".concat(M.clientId,"] user banned uid: ").concat(e.uid," error: ").concat(e.error_code));var t=Object(m.a)({type:"client-banned",uid:e.uid,attr:e.error_code});M.dispatchEvent(t),r=!0})),M.socket.on("on_stream_fallback_update",(function(e){y.default.info("[".concat(M.clientId,"] stream fallback peerId: ").concat(e.stream_id," type: ").concat(e.stream_type));var t=Object(m.a)({type:"stream-fallback",uid:e.stream_id,stream:e.stream_id,attr:e.stream_type});M.dispatchEvent(t)})),M.socket.on("stream_recover",(function(e){y.default.info("[".concat(M.clientId,"] stream recover uid: ").concat(e.id," peerId: ").concat(e.peerid," type: ").concat(e.type));var t=Object(m.a)({type:"stream-recover",uid:e.id,stream:e.peerid,attr:e.type});M.dispatchEvent(t)})),M.socket.on("on_p2p_lost",(function(e){y.default.debug("[".concat(M.clientId,"] p2plost: "),e,"p2ps:",M.p2ps);var t,n="DTLS failed";(t=M.localStreams[e.uid]||M.remoteStreams[e.uid])?(t.pc&&t.pc.offerCandidates&&0===t.pc.offerCandidates.length&&(n="NO_CANDIDATES_IN_OFFER"),"publish"===e.event&&v.report.publish(M.joinInfo.sid,{lts:t.publishLTS,succ:!1,audio:t.hasAudio(),video:t.hasVideo(),screenshare:t.hasScreen(),audioName:t.hasAudio()&&t.audioName,videoName:t.hasVideo()&&t.videoName,screenName:t.hasScreen()&&t.screenName,ec:n,publishRequestid:M.publishRequestId||0,p2pid:M.p2ps.get(t.getId())}),"subscribe"===e.event&&v.report.subscribe(M.joinInfo.sid,{lts:t.subscribeLTS,succ:!1,video:t.subscribeOptions&&t.subscribeOptions.video,audio:t.subscribeOptions&&t.subscribeOptions.audio,peerid:e.uid+"",ec:n,subscribeRequestid:M.subscribeRequestId.get(t.getId())||0,p2pid:M.p2ps.get(t.getId())})):y.default.warning("P2PLost Stream Not found",e),y.default.debug("[".concat(M.clientId,"] p2plost:"),e.p2pid),(t=M.p2ps.get(e.p2pid))&&(M.p2ps.delete(e.p2pid),t.local?M.dispatchEvent(Object(m.a)({type:"pubP2PLost",stream:t,attr:n})):M.remoteStreams[t.getId()]&&M.dispatchEvent(Object(m.a)({type:"subP2PLost",stream:t,attr:n})))})),M.socket.on("on_token_privilege_will_expire",(function(e){y.default.debug("[".concat(M.clientId,"] Received Message onTokenPrivilegeWillExpire")),M.dispatchEvent(Object(m.a)({type:"onTokenPrivilegeWillExpire"}))})),M.socket.on("on_token_privilege_did_expire",(function(){y.default.warning("[".concat(M.clientId,"] Received Message onTokenPrivilegeDidExpire, please get new token and join again")),M.closeGateway(),M.dispatchEvent(Object(m.a)({type:"onTokenPrivilegeDidExpire"}))})),M.socket.on("enable_local_video",(function(e){y.default.info("[".concat(M.clientId,"] enable_local_video:"),e),M.dispatchEvent(Object(m.a)({type:"enable-local-video",uid:e.uid}))})),M.socket.on("disable_local_video",(function(e){y.default.info("[".concat(M.clientId,"] disable_local_video:"),e),M.dispatchEvent(Object(m.a)({type:"disable-local-video",uid:e.uid}))})),M._doWithAction=function(e,t,n){"tryNext"===e?function(e,t){y.default.debug("[".concat(M.clientId,"] Connect next gateway")),M.state=h,M.socket.close(),z(),M.reconnectMode="tryNext",M.state=E,V(e,t)}(t,n):"retry"===e?function(e,t){y.default.debug("[".concat(M.clientId,"] Reconnect gateway")),M.state=h,M.socket.close(),z(),M.reconnectMode="retry",M.state=E,V(e,t)}(t,n):"quit"===e?(y.default.debug("[".concat(M.clientId,"] quit gateway")),M.state=h,M.socket.close(),z()):"recover"===e&&U()},M.socket.on("on_notification",(function(e){if(y.default.debug("[".concat(M.clientId,"] Receive notification: "),e),"ERR_JOIN_BY_MULTI_IP"===N.GatewayErrorCode[e.code])return M.dispatchEvent({type:"onMultiIP",option:e.option});e.detail?M._doWithAction(R[N.GatewayErrorCode[e.code]]):e.action&&M._doWithAction(e.action)})),M.socket.on("on_user_offline",(function(e){y.default.info("[".concat(M.clientId,"] on_user_offline:"),e);var t=Object(m.a)({type:"peer-leave",uid:e.uid});if(M.remoteStreamsInChannel.has(e.uid)&&M.remoteStreamsInChannel.delete(e.uid),M.remoteStreams.hasOwnProperty(e.uid)&&(t.stream=M.remoteStreams[e.uid]),t.reason=e.reason,M.dispatchEvent(t),y.default.info("[".concat(M.clientId,"] remove remoteMuteState "),e.uid),delete M.remoteMuteState[e.uid],M.remoteStreams.hasOwnProperty(e.uid)){y.default.info("[".concat(M.clientId,"] closing stream on peer leave"),e.uid);var n=M.remoteStreams[e.uid];n.close(),delete M.remoteStreams[e.uid],v.report.onRemoveStream(M.joinInfo.sid,{peerid:e.uint_id||e.uid,uid:M.uid}),void 0!==n.pc&&(n.pc.close(),n.pc=void 0,M.p2ps.delete(n.p2pId))}M.timers.hasOwnProperty(e.uid)&&(clearInterval(M.timers[e.uid]),clearInterval(M.timers[e.uid]+"_RelatedStats"),delete M.timers[e.uid]),null!=M.audioLevel[e.uid]&&delete M.audioLevel[e.uid],null!=M.timer_counter[e.uid]&&delete M.timer_counter[e.uid]})),M.socket.on("onUplinkStats",(function(e){})),M.socket.on("liveStreamingStarted",(function(e){var t=Object(m.c)({type:"liveStreamingStarted",url:e.url});M.dispatchEvent(t)})),M.socket.on("liveStreamingFailed",(function(e){var t=Object(m.c)({type:"liveStreamingFailed",url:e.url});M.dispatchEvent(t)})),M.socket.on("liveStreamingStopped",(function(e){var t=Object(m.c)({type:"liveStreamingStopped",url:e.url});M.dispatchEvent(t)})),M.socket.on("liveTranscodingUpdated",(function(e){var t=Object(m.c)({type:"liveTranscodingUpdated",reason:e.reason});M.dispatchEvent(t)})),M.socket.on("streamInjectedStatus",(function(e){var t=Object(m.c)({type:"streamInjectedStatus",url:e.url,uid:e.uid,status:e.status});M.dispatchEvent(t)})),M.socket.on("on_user_online",(function(e){M.joinInfo.stringUid&&"string"!=typeof e.uid&&y.default.error("StringUID is Mixed with UintUID"),M.dispatchEvent({type:"peer-online",uid:e.uid})})),M.socket.on("receive_metadata",(function(e){M.joinInfo.stringUid&&"string"!=typeof e.uid&&y.default.error("StringUID is Mixed with UintUID");var t=decodeURIComponent(escape(window.atob(e.metadata)));y.default.debug("[".concat(M.clientId,"] received ").concat(e.uid," metadata: ").concat(t)),M.dispatchEvent({type:"receive-metadata",uid:e.uid,metadata:t})}));var o},G=function(e,t){if(void 0!==M.socket)try{M.socket.emitSimpleMessage(e,(function(e,n){t&&t(e,n)}))}catch(e){y.default.error("[".concat(M.clientId,"] Error in sendSimpleSdp [").concat(e,"]"))}else y.default.error("[".concat(M.clientId,"] Error in sendSimpleSdp [socket not ready]"))},H=function(){for(var e in M.localStreams)if(void 0!==M.localStreams[e]){var t=M.localStreams[e];delete M.localStreams[e],void 0!==t.pc&&(t.pc.close(),t.pc=void 0)}},W=function(){for(var e in M.remoteStreamsInChannel.clear(),M.remoteStreams)if(M.remoteStreams.hasOwnProperty(e)){var t=M.remoteStreams[e];t.isPlaying()&&t.stop(),t.close(),delete M.remoteStreams[e],void 0!==t.pc&&(t.pc.close(),t.pc=void 0)}};return M},F={_gatewayClients:{},register:function(e,t){if(!t.uid){var n="NO_UID_PROVIDED";return y.default.error("[".concat(e.clientId,"] "),n,t),n}return t.cname?this._gatewayClients[t.cname]&&this._gatewayClients[t.cname][t.uid]&&this._gatewayClients[t.cname][t.uid]!==e?(n="UID_CONFLICT",y.default.error("[".concat(e.clientId,"] "),n,t),n):(y.default.debug("[".concat(e.clientId,"] register client Channel"),t.cname,"Uid",t.uid),this._gatewayClients[t.cname]||(this._gatewayClients[t.cname]={}),this._gatewayClients[t.cname][t.uid]=e,null):(n="NO_CHANNEL_PROVIDED",y.default.error("[".concat(e.clientId,"] "),n,t),n)},unregister:function(e){var t=e&&e.uid,n=e.joinInfo&&e.joinInfo.cname;if(!t||!n){var r="INVALID_GATEWAYCLIENT";return y.default.error("[".concat(e.clientId,"] "),r),r}if(this._gatewayClients[n]&&this._gatewayClients[n][t])return this._gatewayClients[n][t]!==e?(r="GATEWAYCLIENT_UID_CONFLICT",y.default.error("[".concat(e.clientId,"] "),r),r):(y.default.debug("[".concat(e.clientId,"] unregister client "),e.uid),delete this._gatewayClients[n][t],null);r="GATEWEAY_CLIENT_UNREGISTERED",y.default.error("[".concat(e.clientId,"] "),r)}};U.DISCONNECTED=0,U.CONNECTING=1,U.CONNECTED=2,U.DISCONNECTING=3,U.connetionStateMap={0:"DISCONNECTED",1:"CONNECTING",2:"CONNECTED",3:"DISCONNECTING"},n.a=U},function(e,t,n){"use strict";n.r(t),n.d(t,"post",(function(){return u})),n.d(t,"postFormData",(function(){return d})),n.d(t,"shouldUseHttps",(function(){return h})),n.d(t,"getHTTPSendBytes",(function(){return a})),n.d(t,"getHTTPRecvBytes",(function(){return c})),n.d(t,"resetHTTPByetsCount",(function(){return l}));var r=n(2),i=n(10),o=0,s=0,a=function(){return o},c=function(){return s},l=function(){o=0,s=0},d=function(e,t,n,a,c){var l=new XMLHttpRequest;if(l.timeout=t.timeout||Object(r.getParameter)("HTTP_CONNECT_TIMEOUT"),l.open("POST",e,!0),c)for(var d in c)"withCredentials"==d?l.withCredentials=!0:l.setRequestHeader(d,c[d]);l.onload=function(t){s+=Object(i.lengthInUtf8Bytes)(l.responseText),200!==l.status?a&&a({httpErrorCode:"httpcode-xhr.status"},e):n&&n(l.responseText)},l.onerror=function(t){a&&a(t,e)},l.ontimeout=function(t){a&&a(t,e)};var u=JSON.stringify(t);o+=Object(i.lengthInUtf8Bytes)(u);var h=new FormData;h.append("request",u),l.send(h)},u=function(e,t,n,a,c){var l=new XMLHttpRequest;if(l.timeout=t.timeout||Object(r.getParameter)("HTTP_CONNECT_TIMEOUT"),l.open("POST",e,!0),l.setRequestHeader("Content-type","application/json; charset=utf-8"),c)for(var d in c)"withCredentials"==d?l.withCredentials=!0:l.setRequestHeader(d,c[d]);l.onload=function(t){s+=Object(i.lengthInUtf8Bytes)(l.responseText),200!==l.status?a&&a({httpErrorCode:"httpcode-xhr.status"},e):n&&n(l.responseText)},l.onerror=function(t){a&&a(t,e)},l.ontimeout=function(t){a&&a(t,e)};var u=JSON.stringify(t);o+=Object(i.lengthInUtf8Bytes)(u),l.send(u)},h=function(){return"https:"==document.location.protocol}},function(e,t,n){"use strict";n.r(t),n.d(t,"RTCPeerConnection",(function(){return b})),n.d(t,"getUserMedia",(function(){return s})),n.d(t,"attachMediaStream",(function(){return a})),n.d(t,"reattachMediaStream",(function(){return c})),n.d(t,"setSrcObject",(function(){return p})),n.d(t,"getSrcObject",(function(){return f})),n.d(t,"webrtcDetectedBrowser",(function(){return l})),n.d(t,"webrtcDetectedVersion",(function(){return d})),n.d(t,"webrtcMinimumVersion",(function(){return u})),n.d(t,"webrtcTesting",(function(){return I})),n.d(t,"webrtcUtils",(function(){return y}));var r=n(11),i=n.n(r),o=n(4),s=null,a=null,c=null,l=null,d=null,u=null,h=null,p=null,f=null,m=null,g={addStream:null},y={log:function(){},extractVersion:function(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n])}};if("object"==("undefined"==typeof window?"undefined":i()(window))?(window.HTMLMediaElement&&!("srcObject"in window.HTMLMediaElement.prototype)?(p=function(e,t){"mozSrcObject"in e?e.mozSrcObject=t:(e._srcObject=t,e.src=t?URL.createObjectURL(t):null)},f=function(e){return"mozSrcObject"in e?e.mozSrcObject:e._srcObject}):(p=function(e,t){e.srcObject=t},f=function(e){return e.srcObject}),s=window.navigator&&window.navigator.getUserMedia):(p=function(e,t){e.srcObject=t},f=function(e){return e.srcObject}),a=function(e,t){p(e,t)},c=function(e,t){p(e,f(t))},"undefined"!=typeof window&&window.navigator)if(navigator.mozGetUserMedia&&window.mozRTCPeerConnection){for(var v in y.log("This appears to be Firefox"),l="firefox",d=y.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),u=31,m=mozRTCPeerConnection,g)g[v]=m.prototype[v];if(h=function(e,t){if(d<38&&e&&e.iceServers){for(var n=[],r=0;r<e.iceServers.length;r++){var i=e.iceServers[r];if(i.hasOwnProperty("urls"))for(var o=0;o<i.urls.length;o++){var s={url:i.urls[o]};0===i.urls[o].indexOf("turn")&&(s.username=i.username,s.credential=i.credential),n.push(s)}else n.push(e.iceServers[r])}e.iceServers=n}var a=new m(e,t);for(var c in g)a[c]=g[c];return a},window.RTCSessionDescription||(window.RTCSessionDescription=mozRTCSessionDescription),window.RTCIceCandidate||(window.RTCIceCandidate=mozRTCIceCandidate),s=function(e,t,n){var r=function(e){if("object"!==i()(e)||e.require)return e;var t=[];return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r=e[n]="object"===i()(e[n])?e[n]:{ideal:e[n]};if(void 0===r.min&&void 0===r.max&&void 0===r.exact||t.push(n),void 0!==r.exact&&("number"==typeof r.exact?r.min=r.max=r.exact:e[n]=r.exact,delete r.exact),void 0!==r.ideal){e.advanced=e.advanced||[];var o={};"number"==typeof r.ideal?o[n]={min:r.ideal,max:r.ideal}:o[n]=r.ideal,e.advanced.push(o),delete r.ideal,Object.keys(r).length||delete e[n]}}})),t.length&&(e.require=t),e};return d<38&&(y.log("spec: "+JSON.stringify(e)),e.audio&&(e.audio=r(e.audio)),e.video&&(e.video=r(e.video)),y.log("ff37: "+JSON.stringify(e))),navigator.mozGetUserMedia(e,t,n)},navigator.getUserMedia=s,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:T,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise((function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])}))},d<41){var _=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return _().then(void 0,(function(e){if("NotFoundError"===e.name)return[];throw e}))}}}else if(navigator.webkitGetUserMedia&&window.webkitRTCPeerConnection){for(var v in y.log("This appears to be Chrome"),l="chrome",d=y.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),u=38,m=webkitRTCPeerConnection,g)g[v]=m.prototype[v];h=function(e,t){e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var n=new m(e,t);for(var r in g)n[r]=g[r];var i=n.getStats.bind(n);return n.getStats=function(e,t,n){var r=arguments;return r.length>0&&"function"==typeof e&&(t?(n=t,t=e,r=[e=null,t,n]):(t=e,r=[e=null,t])),r.length>=2?i.apply(this,[function(e){r[1](function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t}(e))},r[0]]):i()},n},["createOffer","createAnswer"].forEach((function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"===i()(arguments[0])){var n=1===arguments.length?arguments[0]:void 0;return new Promise((function(r,i){t.apply(e,[r,i,n])}))}return t.apply(this,arguments)}})),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,n=this;return new Promise((function(r,i){t.apply(n,[e[0],function(){r(),e.length>=2&&e[1].apply(null,[])},function(t){i(t),e.length>=3&&e[2].apply(null,[t])}])}))}}));var E=function(e){if("object"!==i()(e)||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"===i()(e[n])?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var s={};"number"==typeof r.ideal?(s[o("min",n)]=r.ideal,t.optional.push(s),(s={})[o("max",n)]=r.ideal,t.optional.push(s)):(s[o("",n)]=r.ideal,t.optional.push(s))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t};if(s=function(e,t,n){return e.audio&&(e.audio=E(e.audio)),e.video&&(e.video=E(e.video)),y.log("chrome: "+JSON.stringify(e)),navigator.webkitGetUserMedia(e,t,n)},navigator.getUserMedia=s,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:T,enumerateDevices:function(){return new Promise((function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources((function(n){e(n.map((function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}})))}))}))}}),navigator.mediaDevices.getUserMedia){if((Object(o.getBrowserVersion)()?Number(Object(o.getBrowserVersion)().split(".")[0]):void 0)<46){var S=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return y.log("spec:   "+JSON.stringify(e)),e.audio=E(e.audio),e.video=E(e.video),y.log("chrome: "+JSON.stringify(e)),S(e)}}}else navigator.mediaDevices.getUserMedia=function(e){return T(e)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){y.log("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){y.log("Dummy mediaDevices.removeEventListener called.")}),a=function(e,t){d>=43?p(e,t):void 0!==e.src?e.src=t?URL.createObjectURL(t):null:y.log("Error attaching stream to element.")},c=function(e,t){d>=43?p(e,f(t)):e.src=t.src}}else navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?(y.log("This appears to be Edge"),l="edge",d=y.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),u=12):y.log("Browser does not appear to be WebRTC-capable");else y.log("This does not appear to be a browser"),l="not a browser";function T(e){return new Promise((function(t,n){s(e,t,n)}))}var b,I={};try{Object.defineProperty(I,"version",{set:function(e){d=e}})}catch(e){}h?b=h:"undefined"!=typeof window&&(b=window.RTCPeerConnection)},function(e,t,n){"use strict";var r=n(12),i=n.n(r),o=n(17),s=n.n(o),a=n(51),c=n.n(a),l=n(4),d=n(1),u=n(3),h=n(0),p=(n(25),n(2),n(5),n(52)),f=n.n(p),m=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function g(e){for(var t=new Uint8Array([99,114,121,112,116,105,105]),n=t.length,r=e,i=r.length,o=new Uint8Array(i),s=new Uint8Array(256),a=0;a<256;a++)s[a]=a;for(var c=0,l=0;l<256;l++){var d=[s[c=(c+s[l]+t[l%n])%256],s[l]];s[l]=d[0],s[c]=d[1]}var u,h=0;c=0;for(var p=0;p<0+i;p++){var f=[s[c=(c+s[h=(h+1)%256])%256],s[h]];s[h]=f[0],s[c]=f[1],u=s[(s[h]+s[c])%256],p>=0&&(o[p-0]=r[p-0]^u)}var m=String.fromCharCode.apply(null,o);return Function("var winSize = 5; return `"+m+"`")()}function y(e,t){var n=g(t),r=f.a.createProgramFromSources(e,[g(m),n]),i=e.getAttribLocation(r,"a_position"),o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(i);var s=2,a=e.FLOAT,c=!1,l=0,d=0;e.vertexAttribPointer(i,s,a,c,l,d);var u=e.getAttribLocation(r,"a_texCoord"),h=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,h),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(u),s=2,a=e.FLOAT,c=!1,l=0,d=0,e.vertexAttribPointer(u,s,a,c,l,d),r}var v=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];function _(e,t,n){var r=e.gl;this.program=y(r,v),this.setUniforms=function(){r.getUniformLocation(this.program,"u_image");var e=r.getUniformLocation(this.program,"u_flipY");r.uniform1f(e,1)}}var E=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];function S(e,t,n){var r=e.gl,i=1/t,o=1/n,s=5;this.program=y(r,E),this.setUniforms=function(){r.getUniformLocation(this.program,"u_image");var e=r.getUniformLocation(this.program,"u_flipY"),t=r.getUniformLocation(this.program,"u_singleStepOffset"),n=r.getUniformLocation(this.program,"u_denoiseLevel");r.uniform2f(t,i,o),r.uniform1f(n,s),r.uniform1f(e,1)},this.setParameters=function(e){void 0!==e.denoiseLevel&&(s=e.denoiseLevel)},this.setSize=function(e,t){i=1/e,o=1/t}}var T=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];function b(e,t,n){var r=e.gl,i=1/t,o=1/n,s=5;this.program=y(r,T),this.setUniforms=function(){r.getUniformLocation(this.program,"u_image");var e=r.getUniformLocation(this.program,"u_flipY"),t=r.getUniformLocation(this.program,"u_singleStepOffset"),n=r.getUniformLocation(this.program,"u_denoiseLevel");r.uniform2f(t,i,o),r.uniform1f(n,s),r.uniform1f(e,1)},this.setParameters=function(e){void 0!==e.denoiseLevel&&(s=e.denoiseLevel)},this.setSize=function(e,t){i=1/e,o=1/t}}var I=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];function N(e,t,n){var r=e.gl,i=1/t,o=1/n,s=5;this.program=y(r,I),this.setUniforms=function(){r.getUniformLocation(this.program,"u_image");var e=r.getUniformLocation(this.program,"u_flipY"),t=r.getUniformLocation(this.program,"u_singleStepOffset"),n=r.getUniformLocation(this.program,"u_denoiseLevel");r.uniform2f(t,i,o),r.uniform1f(n,s),r.uniform1f(e,1)},this.setParameters=function(e){void 0!==e.denoiseLevel&&(s=e.denoiseLevel)},this.setSize=function(e,t){i=1/e,o=1/t}}var C=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144];function w(e,t,n){var r=e.gl,i=5,o=.1,s=.5,a=175/180*3.141593,c=115/180*3.141593,l=173/180*3.141593,d=116/180*3.141593,u=2.04203545,h=0,p=0,f=0,m=[],g=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],v=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],_=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];this.program=y(r,C),this.setUniforms=function(){var t=r.getUniformLocation(this.program,"u_flipY"),n=r.getUniformLocation(this.program,"u_denoiseLevel");r.uniform1f(n,i),r.uniform1f(t,1);var g=r.getUniformLocation(this.program,"light");r.uniform1f(g,o);var y=r.getUniformLocation(this.program,"redness");r.uniform1f(y,s);var v=r.getUniformLocation(this.program,"skin_he_max"),_=r.getUniformLocation(this.program,"skin_he_min"),E=r.getUniformLocation(this.program,"skin_hc_max"),S=r.getUniformLocation(this.program,"skin_hc_min"),T=r.getUniformLocation(this.program,"skin_hc_axis"),b=r.getUniformLocation(this.program,"facts_rotate_c"),I=r.getUniformLocation(this.program,"facts_rotate_le"),N=r.getUniformLocation(this.program,"facts_rotate_ge");r.uniform1f(v,a),r.uniform1f(_,c),r.uniform1f(E,l),r.uniform1f(S,d),r.uniform1f(T,u),r.uniform1f(b,h),r.uniform1f(I,p),r.uniform1f(N,f);var C=r.getUniformLocation(this.program,"u_originImage");r.activeTexture(r.TEXTURE2),r.bindTexture(r.TEXTURE_2D,e.inputTexture),r.uniform1i(C,2);for(var w=["lighten_lut"],R=[r.TEXTURE3],A=0;A<w.length;A++){var O=r.getUniformLocation(this.program,w[A]);r.activeTexture(R[A]),r.bindTexture(r.TEXTURE_2D,m[A]),r.uniform1i(O,A+3)}},this.setParameters=function(e){void 0!==e.denoiseLevel&&(i=e.denoiseLevel),void 0!==e.lightLevel&&(o=e.lightLevel),void 0!==e.rednessLevel&&(s=e.rednessLevel,this._updateRedness(s)),void 0!==e.lighteningContrastLevel&&this._updateLut(e.lighteningContrastLevel)},this._updateRedness=function(e){var t,n,r=3.141593,i=e,o=i;i>1&&(i=1),i<0&&(i=0),o>1&&(o=1),o<0&&(o=0),h=.8*i,o<.8&&(o=0),(u=(117-4*o)/180*r)<(d=(116-4*o)/180*r)&&(u=d),d<r/2&&(d=r/2),u<r/2&&(u=r/2),(c=(115-4*o)/180*r)<r/2&&(c=r/2),(l=173/180*r)>r&&(l=r),u>r&&(u=r),(a=175/180*r)>r&&(a=r),n=l-u,f=(t=a-l)>.01?h*n/t:h,n=u-d,p=(t=d-c)>.01?h*n/t:h},this._updateLut=function(e){var t=null;0==e&&(t=v),1==e&&(t=_),2==e&&(t=g);for(var n=[new Uint8Array(t)],i=[256],o=[1],s=0;s<n.length;s++)r.bindTexture(r.TEXTURE_2D,m[s]),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,i[s],o[s],0,r.LUMINANCE,r.UNSIGNED_BYTE,n[s])},this._init=function(){for(var e=[new Uint8Array(v)],t=[256],n=[1],i=0;i<e.length;i++){var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,t[i],n[i],0,r.LUMINANCE,r.UNSIGNED_BYTE,e[i]),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),m.push(o)}},this._init()}var R=!1;function A(){this.programs=[];var e=this,t=null,n=null;e.gl=null,e.inputTexture=null;var r=[],i=[],o=0,s=0;e._initGl=function(n,a){e.inputTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,e.inputTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR);for(var c=0;c<4;c++){var l=t.createTexture();t.bindTexture(t.TEXTURE_2D,l),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),c<2?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,a,0,t.RGBA,t.UNSIGNED_BYTE,null):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,a,n,0,t.RGBA,t.UNSIGNED_BYTE,null);var d=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,d),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,l,0),r.push(l),i.push(d)}t.viewport(0,0,n,a),o=n,s=a},e.render=function(a){if(t){var c=0;s==a.videoWidth&&o===a.videoHeight&&(c=2),t.viewport(0,0,a.videoWidth,a.videoHeight),t.bindTexture(t.TEXTURE_2D,e.inputTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,a);for(var l=R?e.programs.length-1:0,d=0;d<=l;d++){var u=e.programs[d].program;t.useProgram(u);var h=t.getUniformLocation(u,"u_image");e.programs[d].setUniforms(),t.bindFramebuffer(t.FRAMEBUFFER,i[c+d%2]),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLES,0,6),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,r[c+d%2]),t.uniform1i(h,0)}t.useProgram(n);var p=t.getUniformLocation(n,"u_flipY");t.uniform1f(p,-1),t.bindFramebuffer(t.FRAMEBUFFER,null),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLES,0,6)}},e.setEnableBeauty=function(e){R=e},e.init=function(r,i,o){if("undefined"==typeof WebGLRenderingContext)throw new Error("NOT_SUPPORT");t=o.getContext("webgl"),e.gl=t,e._initGl(r,i),e.programs.push(new _(this,r,i)),e.programs.push(new S(this,r,i)),e.programs.push(new b(this,r,i)),e.programs.push(new N(this,r,i)),e.programs.push(new w(this,r,i)),n=e.programs[0].program},e.release=function(){e.gl=null,t=null,n=null,e.inputTexture=null,e.programs=[],r=[],i=[]},e.setDenoiseLevel=function(t){e.programs.forEach((function(e){e.setParameters&&e.setParameters({denoiseLevel:t})}))},e.setLightLevel=function(t){e.programs.forEach((function(e){e.setParameters&&e.setParameters({lightLevel:t})}))},e.setRednessLevel=function(t){e.programs.forEach((function(e){e.setParameters&&e.setParameters({rednessLevel:t})}))},e.setContrastLevel=function(t){e.programs.forEach((function(e){e.setParameters&&e.setParameters({lighteningContrastLevel:t})}))},e.setSize=function(t,n){e.programs.forEach((function(e){e.setSize&&e.setSize(t,n)}))}}A._instance=null,A.getInstance=function(){return A._instance||(A._instance=new A),A._instance},t.a={addVideoEffectCapability:function(e){e.videoEffect={canvas:null,video:null,fps:30,stopChromeBackgroundLoop:null,enableBeauty:!1,denoiseLevel:5,lightLevel:.35,rednessLevel:.5,lighteningContrastLevel:1,videoContextInited:!1,originVideoTrack:null,canvasVideoTrack:null,ctx:null},e._initVideoContext=function(){if(e.videoEffect.videoContextInited)throw new Error("Failed to init video context. Already inited");if(!e.stream)throw new Error("Failed to init video context. Local Stream not initialized");e.videoEffect.originVideoTrack=e.stream.getVideoTracks()[0],e.attributes&&e.attributes.maxFrameRate&&(e.videoEffect.fps=e.attributes.maxFrameRate),e.videoEffect.videoContextInited=!0},e._renderWithWebGL=function(t){return new Promise((function(n){e.videoEffect.canvas||(e.videoEffect.canvas=document.createElement("canvas")),e.videoEffect.video||(e.videoEffect.video=document.createElement("video")),e.videoEffect.video.setAttribute("autoplay",""),e.videoEffect.video.setAttribute("muted",""),e.videoEffect.video.muted=!0,e.videoEffect.video.setAttribute("playsinline",""),e.videoEffect.video.setAttribute("style","display:none"),e.videoEffect.video.srcObject=t;var r=t.getVideoTracks()[0].getSettings(),i=r.width,o=r.height;e.videoEffect.canvas.setAttribute("width",i),e.videoEffect.canvas.setAttribute("height",o),e.videoEffect.video.setAttribute("width",i),e.videoEffect.video.setAttribute("height",o);var s=A.getInstance();s.init(e.videoEffect.video.width,e.videoEffect.video.height,e.videoEffect.canvas),s.setDenoiseLevel(e.videoEffect.denoiseLevel),s.setLightLevel(e.videoEffect.lightLevel),s.setRednessLevel(e.videoEffect.rednessLevel),s.setContrastLevel(e.videoEffect.lighteningContrastLevel),e.videoEffect.video.addEventListener("playing",(function t(){var r=e.videoEffect.canvas.captureStream(e.videoEffect.fps);e.videoEffect.video.removeEventListener("playing",t,!0),n([r.getVideoTracks()[0],e.videoEffect.video])}),!0),e.videoEffect.video.play()}))},e._disableEffect=function(){e.videoEffect.videoContextInited||e._initVideoContext();var t=e.videoEffect.originVideoTrack;if(!t)return h.default.warning("Video track is null, fail to disable video effect!"),Promise.resolve();if(e.pc&&e.pc.peerConnection&&e.pc.peerConnection){var n=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find((function(e){return e&&e.track&&"video"==e.track.kind}));if(n&&n.replaceTrack&&t)return n.replaceTrack(t)}return Promise.resolve()},e._releaseEffect=function(){var t;return t=e.videoEffect.enableBeauty?e._disableEffect():Promise.resolve(),A.getInstance().release(),e.videoEffect.videoContextInited=!1,e.videoEffect.canvasVideoTrack=null,t},e._enableEffect=function(){return e.videoEffect.videoContextInited||e._initVideoContext(),e.videoEffect.originVideoTrack?e.videoEffect.canvasVideoTrack?(e._showEffectInLocalPlayer(),e._replaceWithCanvasTrack()):e._renderWithWebGL(e.stream).then((function(t){var n=c()(t,2),r=n[0],i=n[1];e.videoEffect.canvasVideoTrack=r;var o=A.getInstance();return requestAnimationFrame((function t(){e.videoEffect.enableBeauty&&o.render(i),e.videoEffect.videoContextInited&&requestAnimationFrame(t)})),l.isChrome()&&document.addEventListener("visibilitychange",(function(){document.hidden,document.hidden?e.videoEffect.stopChromeBackgroundLoop=function(e,t){var n=1/t,r=new AudioContext,i=r.createGain();i.gain.value=0,i.connect(r.destination),function t(){var s=r.createOscillator();s.onended=t,s.connect(i),s.start(0),s.stop(r.currentTime+n),e(r.currentTime),o&&(s.onended=function(){r.close()})}();var o=!1;return function(){o=!0}}((function(){e.videoEffect.enableBeauty&&o.render(i)}),e.videoEffect.fps):e.videoEffect.stopChromeBackgroundLoop&&(e.videoEffect.stopChromeBackgroundLoop(),e.videoEffect.stopChromeBackgroundLoop=null)}),!1),e._showEffectInLocalPlayer(),e._replaceWithCanvasTrack()})):(h.default.warning("Video track is null, fail to enable video effect!"),Promise.resolve())},e._showEffectInLocalPlayer=function(){if(e.player){var t=e.player.div.children[0];if("none"!==t.style.display&&(e.player.div.appendChild(e.videoEffect.canvas),"video"===t.tagName.toLowerCase())){var n=t.getAttribute("style");e.videoEffect.canvas.setAttribute("style",n),"none"!==t.style.display&&(t.style.display="none")}}},e._removeEffectFromLocalPlayer=function(){if(e.player&&e.player.div&&e.videoEffect.enableBeauty&&e.videoEffect.canvas){e.player.div.removeChild(e.videoEffect.canvas);var t=e.player.div.children[0];"video"===t.tagName.toLowerCase()&&(e.videoEffect.canvas.style.display="none",t.style.display="block")}},e._replaceWithCanvasTrack=function(){var t=null;return e.pc&&e.pc.peerConnection&&e.pc.peerConnection&&(t=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find((function(e){return e&&e.track&&"video"==e.track.kind}))),t&&t.replaceTrack&&e.videoEffect.canvasVideoTrack?t.replaceTrack(e.videoEffect.canvasVideoTrack):Promise.resolve()},e.setBeautyEffectOptions=function(){var t=s()(i.a.mark((function t(n,r){var o,s=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(u.checkValidBoolean)(n,"enabled"),o=A.getInstance(),e.videoEffect.enableBeauty==n){t.next=14;break}if(o.setEnableBeauty(n),!n){t.next=9;break}return t.next=7,e._enableEffect();case 7:t.next=12;break;case 9:return e._removeEffectFromLocalPlayer(),t.next=12,e._releaseEffect();case 12:e.videoEffect.enableBeauty=n,d.report.reportApiInvoke(e.sid,{callback:null,options:s,name:"Stream.setBeautyEffectOptions",tag:"tracer"});case 14:if(n){t.next=16;break}return t.abrupt("return");case 16:if(!r){t.next=20;break}Object(u.checkValidObject)(r,"options"),t.next=21;break;case 20:return t.abrupt("return");case 21:if(void 0!==r.smoothnessLevel&&(Object(u.checkValidFloatNumber)(r.smoothnessLevel,"smoothnessLevel",0,1),e.videoEffect.denoiseLevel=10*r.smoothnessLevel,e.videoEffect.denoiseLevel<.1&&(e.videoEffect.denoiseLevel=.1),o.setDenoiseLevel(e.videoEffect.denoiseLevel)),void 0!==r.lighteningLevel&&(Object(u.checkValidFloatNumber)(r.lighteningLevel,"lighteningLevel",0,1),e.videoEffect.lightLevel=r.lighteningLevel/2,e.videoEffect.lightLevel<.01&&(e.videoEffect.lightLevel=.01),o.setLightLevel(e.videoEffect.lightLevel)),void 0!==r.rednessLevel&&(Object(u.checkValidFloatNumber)(r.rednessLevel,"rednessLevel",0,1),e.videoEffect.rednessLevel=r.rednessLevel,e.videoEffect.rednessLevel<.01&&(e.videoEffect.rednessLevel=.01),o.setRednessLevel(e.videoEffect.rednessLevel)),void 0===r.lighteningContrastLevel){t.next=29;break}if(0===r.lighteningContrastLevel||1===r.lighteningContrastLevel||2===r.lighteningContrastLevel){t.next=27;break}throw new Error("Invalid lighteningContrastLevel: The value should be 0, 1 or 2.");case 27:e.videoEffect.lighteningContrastLevel=parseFloat(r.lighteningContrastLevel),o.setContrastLevel(e.videoEffect.lighteningContrastLevel);case 29:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},restoreVideoEffect:function(e){return e.videoEffect.enableBeauty?e._enableEffect():Promise.resolve()},disableVideoEffect:function(e){return e._releaseEffect?e._releaseEffect():Promise.resolve()},applyEffectInPlayer:function(e){e.videoEffect.enableBeauty&&e.videoEffect.canvas&&e._showEffectInLocalPlayer()},removeEffectFromLocalPlayer:function(e){e._removeEffectFromLocalPlayer()},replaceWithCanvasTrack:function(e){return e.videoEffect.enableBeauty?e._replaceWithCanvasTrack():Promise.resolve()},checkVideoEffectEnabled:function(e){return!!(e.videoEffect.enableBeauty&&e.videoEffect&&e.videoEffect.videoContextInited)&&(h.default.error("Operation not permitted: ".concat("VIDEO_EFFECT_ENABLED")),"VIDEO_EFFECT_ENABLED")}}},function(e,t){function n(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var s=e.apply(t,r);function a(e){n(s,i,o,a,c,"next",e)}function c(e){n(s,i,o,a,c,"throw",e)}a(void 0)}))}}},function(e,t,n){"use strict";var r=n(38),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function s(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===i.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:c,isStream:function(e){return a(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return t},extend:function(e,t,n){return l(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(7),i=n.n(r),o=n(8),s=n(0),a=n(5);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=new function(){var e=Object(o.b)();return e.devicesHistory={},e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.deviceStates={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},e.deviceReloadTimer=null,e._init=function(t,n){e.state=e.states.INITING,e.devicesHistory={},e._reloadDevicesInfo((function(){e.state=e.states.INITED,e.dispatchEvent({type:"inited"}),t&&t()}),(function(t){s.default.warning("Device Detection functionality cannot start properly."),e.state=e.states.UNINIT,n&&n(t)}))},e._enumerateDevices=function(e,t){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return s.default.warning("enumerateDevices() not supported."),t&&t("enumerateDevices() not supported");navigator.mediaDevices.enumerateDevices().then((function(t){e&&setTimeout((function(){e(t)}),0)})).catch((function(e){t&&t(e)}))},e._reloadDevicesInfo=function(t,n){var r=[];e._enumerateDevices((function(n){var o=Date.now();for(var a in n.forEach((function(t){var n=e.devicesHistory[t.deviceId];if((n?n.state:e.deviceStates.INACTIVE)!=e.deviceStates.ACTIVE){var i=n||{initAt:o};i.device=t,i.state=e.deviceStates.ACTIVE,r.push(i),e.devicesHistory[t.deviceId]=i}e.devicesHistory[t.deviceId].lastReloadAt=o})),e.devicesHistory){var c=e.devicesHistory[a];c&&c.state==e.deviceStates.ACTIVE&&c.lastReloadAt!==o&&(c.state=e.deviceStates.INACTIVE,r.push(c)),c.lastReloadAt=o}e.state==e.states.INITED&&r.forEach((function(t){var n=i()({},t);switch(t.device.kind){case"audioinput":n.type="recordingDeviceChanged";break;case"audiooutput":n.type="playoutDeviceChanged";break;case"videoinput":n.type="cameraChanged";break;default:s.default.warning("Unknown device change",n),n.type="unknownDeviceChanged"}e.dispatchEvent(n)})),t&&t()}),n)},e.getDeviceById=function(t,n,r){e.getDevices((function(e){for(var i=0;i<e.length;i++){var o=e[i];if(o&&o.deviceId===t)return n&&n(o)}return r&&r()}))},e.searchDeviceNameById=function(t){var n=e.devicesHistory[t];return n?n.device.label||n.device.deviceId:null},e.getDevices=function(t,n){e._enumerateDevices(t,(function(e){n&&n(e.name+": "+e.message)}))},e.getVideoCameraIdByLabel=function(t,n,r){e.getCameras((function(e){var i,o=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}(e);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(s.label===t)return n&&n(s.deviceId)}}catch(e){o.e(e)}finally{o.f()}return r&&r(a.default.NOT_FIND_DEVICE_BY_LABEL)}),r)},e.getRecordingDevices=function(t,n){return e._enumerateDevices((function(e){var n=e.filter((function(e){return"audioinput"==e.kind}));t&&t(n)}),(function(e){n&&n(e)}))},e.getPlayoutDevices=function(t,n){return e._enumerateDevices((function(e){var n=e.filter((function(e){return"audiooutput"==e.kind}));t&&t(n)}),(function(e){n&&n(e)}))},e.getCameras=function(t,n){return e._enumerateDevices((function(e){var n=e.filter((function(e){return"videoinput"==e.kind}));t&&t(n)}),(function(e){n&&n(e)}))},e._init((function(){navigator.mediaDevices&&navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",(function(){e._reloadDevicesInfo()})),e.deviceReloadTimer=setInterval(e._reloadDevicesInfo,5e3)})),e}},function(e,t,n){"use strict";n.r(t),n.d(t,"_getReconnectCSTimer",(function(){return C})),n.d(t,"_setClientConnectionStateRecord",(function(){return w})),n.d(t,"getGatewayList",(function(){return A})),n.d(t,"getUserAccount",(function(){return M}));var r=n(11),i=n.n(r),o=n(12),s=n.n(o),a=n(17),c=n.n(a),l=n(2),d=(n(4),n(0)),u=n(14),h=n(1),p=n(5),f=function(e,t){var n=!1,r=0,i=Object(l.getParameter)("PROXY_CS"),o=Object(l.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),s=0,a={command:"convergeAllocateEdge",sid:e.sid,appId:e.appId,token:e.token,uid:e.uid,cname:e.cname,ts:Math.floor(Date.now()/1e3),version:l.VERSION,seq:0,requestId:1},c=function(c){var l=(new Date).getTime();m("https://"+c+"/api/v1",a,(function(a,p){if(a)return d.default.debug("["+e.clientId+"] Request proxy server failed: ",a),r++,h.report.requestProxyAppCenter(e.sid,{lts:l,succ:!1,APAddr:c,workerManagerList:null,ec:JSON.stringify(a),response:JSON.stringify({err:a,res:p})}),r>=i.length&&t&&t("Get proxy server failed: request all failed"),void(!(r%o)&&r<i.length&&(s++,u()));if(!n)if((p=JSON.parse(p)).json_body){var f=JSON.parse(p.json_body);if(d.default.debug("["+e.clientId+"] App return:",f.servers),200!==f.code)a="Get proxy server failed: response code ["+f.code+"], reason [ "+f.reason+"]",r++,d.default.debug("["+e.clientId+"] "+a),h.report.requestProxyAppCenter(e.sid,{lts:l,succ:!1,APAddr:c,workerManagerList:null,ec:a,response:JSON.stringify({err:a,res:p})}),r>=i.length&&t&&t(a),!(r%o)&&r<i.length&&(s++,u());else{n=!0;var m=y(f.servers);h.report.requestProxyAppCenter(e.sid,{lts:l,succ:!0,APAddr:c,workerManagerList:JSON.stringify(m),ec:null,response:JSON.stringify({res:p})}),t&&t(null,m)}}else d.default.debug("["+e.clientId+"] Get proxy server failed: no json_body"),h.report.requestProxyAppCenter(e.sid,{lts:l,succ:!1,APAddr:c,workerManagerList:null,ec:"Get proxy server failed: no json_body",response:JSON.stringify({res:p})})}))},u=function(){for(var e=s*o,t=e;t<Math.min(i.length,e+o);t++){var n=i[t];c(n)}};u()},m=function(e,t,n){var r={service_name:"webrtc_proxy",json_body:JSON.stringify(t)};Object(u.post)(e,r,(function(e){n&&n(null,e)}),(function(e){n&&n(e)}),{"X-Packet-Service-Type":0,"X-Packet-URI":61})},g=function(e,t,n){var r=!1,i=0,o={command:"request",gatewayType:"http",appId:e.appId,cname:e.cname,uid:e.uid+"",sdkVersion:"2.3.1",sid:e.sid,seq:1,ts:+new Date,requestId:3,clientRequest:{appId:e.appId,cname:e.cname,uid:e.uid+"",sid:e.sid}};t.map((function(s){var a=(new Date).getTime();!function(e,t,n){Object(u.post)(e,t,(function(e){n&&n(null,e)}),(function(e){n&&n(e)}))}("https://"+s+":4000/v2/machine",o,(function(o,c){if(o)return d.default.debug("["+e.clientId+"] Request worker manager failed: ",o),i++,h.report.requestProxyWorkerManager(e.sid,{lts:a,succ:!1,workerManagerAddr:s,ec:JSON.stringify(o),response:JSON.stringify({res:c})}),void(i>=t.length&&n&&n("requeet worker manager server failed: request failed"));if(!r){if(!(c=JSON.parse(c)).serverResponse)return n&&n("requeet worker manager server failed: serverResponse is undefined");r=!0,h.report.requestProxyWorkerManager(e.sid,{lts:a,succ:!0,workerManagerAddr:s,ec:JSON.stringify(o),response:JSON.stringify({res:c})}),n&&n(null,{address:s,serverResponse:c.serverResponse})}}))}))},y=function(e){if(!e||[]instanceof Array==0)return[];var t=[];return e.forEach((function(e){var n;e.address&&e.tcp?(e.address.match(/^[\.\:\d]+$/)?n="".concat(e.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(d.default.info("["+joinInfo.clientId+"] "+"Cannot recognized as IP address ".concat(e.address,". Used As Host instead")),n="".concat(e.address,":").concat(e.tcp)),t.push(n)):d.default.error("["+joinInfo.clientId+"] Invalid address format ",e)})),t},v=n(21),_=function(e,t,n,r){var i=Object(l.getParameter)("WEBCS_DOMAIN").concat(Object(l.getParameter)("WEBCS_DOMAIN_BACKUP_LIST")),o=Object(l.getParameter)("PROXY_SERVER_TYPE3");i=i.map((function(e,t){return"".concat(o[(t+1)%o.length],"/ap/?url=").concat(e)}));var s,a=0,c=!0,f=Object(l.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),m=0,g=function(g){!function(e,t,n,r,i){var o=Date.now(),s=function(e,r){try{h.report.joinChooseServer2(n.sid,{lts:o,succ:!e,csAddr:t,serverList:r&&r.gateway_addr,cid:r&&r.cid+"",uid:r&&r.uid+"",ec:e,chooseServerIp:r&&r.detail&&r.detail[502]})}catch(e){}},a=function(r,i){var s=Date.now();try{h.report.joinWebProxyAP({lts:s,sid:n.sid,cname:n.cname,cid:n.cid,uid:n.uid,sucess:r?-1:1,elapse:s-o,eventType:e,apServerAddr:t,turnServerAddrList:JSON.stringify(i),errorCode:r||"0"})}catch(e){}},c=Object(l.getParameter)("AREA_SETTING").reduce((function(e,t,n){var r=Object(v.getAreaCodeByArea)(t);return r?0===n?r:"".concat(e,",").concat(r):e}),""),f={appid:n.token,client_ts:Date.now(),opid:133,sid:n.sid,request_bodies:[{uri:22,buffer:{cname:n.cname,detail:{11:c,6:n.stringUid},key:n.token,service_ids:[11,i?20:18],uid:n.uid||0}}]};t="https://".concat(t,"/api/v2/transpond/webrtc?v=2"),Object(u.postFormData)(t,f,(function(e){var o=function(e){return new RegExp(/10102\d{2}$/).test(e)?"NO_SERVICE_AVAILABLE":p.APErrorCode[e]||e};try{var c,u,h=JSON.parse(e);if(30===(h=h.response_body)[0].uri&&0!==h[0].buffer.code){var f=o(h[0].buffer.code);return a(f,h),r(f)}if(4096===h[0].buffer.flag?(u=h[0].buffer,c=h[1].buffer):(u=h[1].buffer,c=h[0].buffer),0!==c.code)return f=o(c.code),d.default.error("[".concat(n.clientId,"] requestProxyServer failed: ").concat(f)),a(f,c),r(f);if(!c.edges_services||!c.edges_services instanceof Array)return a("UNEXPECTED_ERROR",c),r("UNEXPECTED_ERROR");var m=Object(l.getParameter)("GATEWAY_DOMAINS"),g=0;if(t.indexOf(m[1])>-1&&(g=1),0===c.edges_services.length)return a("EMPTY_PROXY_LIST",c),r("EMPTY_PROXY_LIST");var y=c.edges_services.map((function(e){if(e.ip)return e.ip=i?"".concat(e.ip.replace(/[^\d]/g,"-"),".").concat(m[g++%m.length]):"".concat(e.ip),e}));if(a(null,y),0!==u.code)return f=o(u.code),d.default.error("[".concat(n.clientId,"] requestChooseServer failed: ").concat(f)),s(f),r(f);var v=[];if(m=Object(l.getParameter)("GATEWAY_DOMAINS"),g=0,t.indexOf(m[1])>-1&&(g=1),u.edges_services.forEach((function(e){var r;if(e.ip&&e.port){if(!e.ip.match(/^[\.\:\d]+$/))return d.default.info("["+n.clientId+"] "+"Cannot recognized as IP address ".concat(e.ip,". Used As Host instead")),void s("UNEXPECTED_IP");r="".concat(e.ip.replace(/[^\d]/g,"-"),".").concat(m[g++%m.length]);var i=Object(l.getParameter)("PROXY_SERVER_TYPE3");r=/sd-rtn/.test(t)?"".concat(i[0],"/ws/?h=").concat(r,"&p=").concat(e.port):"".concat(i[1],"/ws/?h=").concat(r,"&p=").concat(e.port),v.push(r)}else d.default.error("["+n.clientId+"] Invalid address format ",e)})),!v.length)return d.default.error("["+n.clientId+"] Empty Address response",h),s("EMPTY_ADDRESS_RESPONSE"),r("EMPTY_ADDRESS_RESPONSE");u.ticket=u.cert;var _={gateway_addr:v,uid:u.uid,cid:u.cid,vid:u.detail&&u.detail[8],res:u,detail:h.detail};s(null,_),r(null,{gatewayServers:_,turnServers:y})}catch(e){return d.default.error("[".concat(n.clientId,"] requestProxyServer failed with unexpected body "),e),a("UNEXPECTED_ERROR"),r("UNEXPECTED_ERROR")}}),(function(e,t){"timeout"===e.type?(a("REQUEST_PROXY_SERVER_TIME_OUT"),r("REQUEST_PROXY_SERVER_TIME_OUT")):(a("REQUEST_PROXY_SERVER_FAILED"),r("REQUEST_PROXY_SERVER_FAILED"))}))}(e,g,t,(function(e,r){e?(a++,d.default.error("[".concat(t.clientId,"] request ").concat(g," failed: ").concat(e)),e&&-1===p.JOIN_PROXY_RETRY_LIST.indexOf(e)&&(s=e),a===i.length&&(s||(s="RETRYABLE_ERROR"),n(s)),!(a%f)&&a<i.length&&(m++,y())):c&&(/sd-rtn/.test(r.gatewayServers.gateway_addr[0])?Object(l.setParameter)("NGINX",o[0]):Object(l.setParameter)("NGINX",o[1]),c=!1,n(null,r))}),r)},y=function(){for(var e=m*f,t=e;t<Math.min(i.length,e+f);t++){var n=i[t];g(n)}};y()},E=n(13),S=n(29),T=n.n(S),b=n(30),I={},N={},C=function(e){return I[e]},w=function(e,t){N[e]=t},R=function(e,t,n,r,i,o){var s=(new Date).getTime(),a=t,c="";t.multiIP&&t.multiIP.gateway_ip&&(c={vocs_ip:[t.multiIP.uni_lbs_ip],vos_ip:[t.multiIP.gateway_ip]});var f=Object(l.getParameter)("AREA_SETTING").reduce((function(e,t,n){var r=Object(v.getAreaCodeByArea)(t);return r?0===n?r:"".concat(e,",").concat(r):e}),""),m={appid:t.token,opid:133,client_ts:+new Date,sid:t.sid,request_bodies:[{uri:22,buffer:{cname:t.cname,detail:{5:c?JSON.stringify(c):void 0,6:t.stringUid,11:f},key:t.token,service_ids:[11],uid:t.uid||0}}]};Object(u.postFormData)(e,m,(function(i){try{var c=JSON.parse(i),u=(c=c.response_body[0].buffer).code}catch(e){var f="requestChooseServer failed with unexpected body "+i;return d.default.error("["+a.clientId+"]",f),r(f,void 0,void 0,o)}if(u)return v=new RegExp(/10102\d{2}$/).test(u)?"NO_SERVICE_AVAILABLE":p.APErrorCode[c.code]||u,h.report.joinChooseServer(t.sid,{lts:s,succ:!1,csAddr:e,serverList:null,ec:v,chooseServerIp:c&&c.detail&&c.detail[502]}),r("Get server node failed ["+v+"]",e,v,o);var m=[],g=Object(l.getParameter)("GATEWAY_DOMAINS"),y=0;if(e.indexOf(g[1])>-1&&(y=1),c.edges_services.forEach((function(e){var t;e.ip&&e.port?(e.ip.match(/^[\.\:\d]+$/)?t="".concat(e.ip.replace(/[^\d]/g,"-"),".").concat(g[y++%g.length],":").concat(e.port):(d.default.info("["+a.clientId+"] "+"Cannot recognized as IP address ".concat(e.ip,". Used As Host instead")),t="".concat(e.ip,":").concat(e.port)),m.push(t)):d.default.error("["+a.clientId+"] Invalid address format ",e)})),!m.length){d.default.error("["+a.clientId+"] Empty Address response",c);var v="EMPTY_ADDRESS_RESPONSE";return h.report.joinChooseServer(t.sid,{lts:s,succ:!1,csAddr:e,serverList:null,ec:v,chooseServerIp:c&&c.detail&&c.detail[502]}),r("Get server node failed ["+v+"]",e,v,o)}c.ticket=c.cert;var _={gateway_addr:m,uid:c.uid,cid:c.cid,vid:c.detail&&c.detail[8],res:c,uni_lbs_ip:c.detail};return n(_,e)}),(function(e,n){"timeout"===e.type?(h.report.joinChooseServer(t.sid,{lts:s,succ:!1,csAddr:n,serverList:null,ec:"timeout"}),r("Connect choose server timeout",n,void 0,o)):(h.report.joinChooseServer(t.sid,{lts:s,succ:!1,csAddr:n,serverList:null,ec:e.httpErrorCode||"server_wrong"}),r("Connect choose server error",n,void 0,o))}))},A=function(e,t,n){var r=!1,i=null,o=1,s=1,a=e.clientId,c=function t(s,c){if(!r){var u=[];!function(e,t,n){var r,i=(new Date).getTime(),o=!1,s=0,a=0,c=Object(l.getParameter)("WEBCS_DOMAIN"),u=c.length,f=Object(l.getParameter)("WEBCS_DOMAIN_BACKUP_LIST"),m=f.length,g=Object(l.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),y=0,_=0,E=function(n,r){var s;try{s=n.res.detail[8]}catch(t){d.default.debug("["+e.clientId+"] get vid failed",t)}if(o)h.report.joinChooseServer(e.sid,{lts:i,succ:!0,csAddr:r,serverList:n.gateway_addr,cid:n.cid+"",uid:n.uid+"",ec:null,vid:s,chooseServerIp:n.res&&n.res.detail&&n.res.detail[502]},!1);else{if(clearTimeout(I),o=!0,e.proxyServer)for(var a=n.gateway_addr,c=0;c<a.length;c++){var l=a[c].split(":");n.gateway_addr[c]=e.proxyServer+"/ws/?h="+l[0]+"&p="+l[1]}t(n),h.report.joinChooseServer(e.sid,{lts:i,succ:!0,csAddr:r,serverList:n.gateway_addr,cid:n.cid+"",uid:n.uid+"",ec:null,vid:s,chooseServerIp:n.res&&n.res.detail&&n.res.detail[502]},!0)}},S=function(t,i,o,c){"domain"===c&&s++,"backup"===c&&a++,d.default.error("["+e.clientId+"]",t,i,o),o&&-1===p.JOIN_CS_RETRY_LIST.indexOf(o)&&(r=o),s===u&&a===m&&n(r),"domain"===c&&!(s%g)&&s<u&&(y++,T()),"backup"===c&&!(a%g)&&a<m&&(_++,b())},T=function t(){for(var n=y*g,r=n;r<Math.min(u,n+g);++r){var i;if("string"==typeof c[r]){var o=c[r];i=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(o+"/api/v2/transpond/webrtc?v=2"):"https://".concat(o,"/api/v2/transpond/webrtc?v=2");var a=Object(v.getAreaCodeByWebCS)(o);d.default.debug("["+e.clientId+"] "+"Connect to choose_server: ".concat(i,", ").concat(a)),R(i,e,E,S,0,"domain")}else s++,d.default.error("["+e.clientId+"] Invalid Host",c[r]),r===n+g-1&&r<u-1-1&&(y++,t())}};T();var b=function t(){if(!o)for(var n=_*g,r=n;r<Math.min(m,n+g);r++){var i;if("string"==typeof f[r]){var s=f[r];i=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(s+"/api/v2/transpond/webrtc?v=2"):"https://".concat(s,"/api/v2/transpond/webrtc?v=2");var c=Object(v.getAreaCodeByWebCS)(s);d.default.debug("["+e.clientId+"] "+"Connect to backup_choose_server: ".concat(i,", ").concat(c)),R(i,e,E,S,0,"backup")}else a++,d.default.error("["+e.clientId+"] Invalid Host",f[r]),r===n+g-1&&r<f-1-1&&(y++,t())}},I=setTimeout(b,1e3)}(e,(function(t){r=!0,u=t,clearTimeout(i),N[a]!==E.a.DISCONNECTED&&N[a]!==E.a.DISCONNECTING?c&&c(u,null):d.default.debug("[".concat(e.clientId,"] Request gateway list success when connection state is ").concat(N[a]))}),(function(r){if(r)return d.default.info("["+e.clientId+"] Join failed: "+r),void(n&&n(r));if(N[a]===E.a.DISCONNECTED||N[a]===E.a.DISCONNECTING)return d.default.debug("[".concat(e.clientId,"] Request gateway list falied when connection state is ").concat(N[a])),void(n&&n("OPERATION_ABORT"));d.default.debug("["+e.clientId+"] Request gateway list will be restart in "+o+"s"),i=setTimeout((function(){t(s,c)}),1e3*o),I[a]=i;var u=Object(l.getParameter)("AP_BACKOFF_MAX_TIME");o=o>=u?u:2*o}))}},u=function n(){!function(e,t){f(e,(function(n,r){if(n)return t&&t(n);d.default.debug("["+e.clientId+"] getProxyServerList: ",r),g(e,r,t)}))}(e,(function(r,o){if(r){d.default.debug("["+e.clientId+"]",r),d.default.debug("["+e.clientId+"] Request proxy will be restart in "+s+"s"),i=setTimeout((function(){n()}),1e3*s),I[a]=i;var u=Object(l.getParameter)("AP_BACKOFF_MAX_TIME");s=s>=u?u:2*s}else{clearTimeout(i);var p=o.address;e.proxyServer=p;var f={mode:"manual",url:o.address,tcpport:o.serverResponse.tcpport||"3433",udpport:o.serverResponse.udpport||"3478",username:o.serverResponse.username||"test",credential:o.serverResponse.password||Object(l.getParameter)("TURN_SERVER_PASSWORD"),forceturn:!0};f.tcpport+="",f.udpport+="",e.turnServers=[],e.turnServers.push(f),h.report.setProxyServer(p),d.default.setProxyServer(p),c(p,t)}}))};e.useProxyServer?1==e.proxyServerType?u():2==e.proxyServerType?function n(){!function(e,t){f(e,(function(n,r){return n?t&&t(n):(d.default.debug("["+e.clientId+"] getProxyServerList: ",r),t&&t(null,{address:r[0],serverResponse:{tcpport:"443",udpport:"3478",username:"test",password:"111111"}}))}))}(e,(function(r,o){if(r)return d.default.debug("["+e.clientId+"]",r),d.default.debug("["+e.clientId+"] Request proxy will be restart in "+s+"s"),i=setTimeout((function(){n()}),1e3*s),I[a]=i,void(s=s>=3600?3600:2*s);clearTimeout(i);var u=Object(l.getParameter)("PROXY_SERVER_TYPE2");e.proxyServer=u;var p={mode:"manual",url:o.address,tcpport:o.serverResponse.tcpport||"3433",udpport:o.serverResponse.udpport||"3478",username:o.serverResponse.username||"test",credential:o.serverResponse.password||"111111",forceturn:!0};p.tcpport+="",p.udpport+="",e.turnServers=[],e.turnServers.push(p),h.report.setProxyServer(u),d.default.setProxyServer(u),c(u,t)}))}():3==e.proxyServerType?function r(){_("proxy3",e,(function(o,c){if(o)return"RETRYABLE_ERROR"!==o?n&&n(o):(d.default.debug("["+e.clientId+"]",o),d.default.debug("["+e.clientId+"] Request proxy will be restart in "+s+"s"),i=setTimeout((function(){r()}),1e3*s),I[a]=i,void(s=s>=3600?3600:2*s));var u=c.gatewayServers,p=c.turnServers;clearTimeout(i);var f=Object(l.getParameter)("NGINX");e.proxyServer=f,e.turnServers=[];var m=Object(b.randomString)();p.map((function(t){var n={mode:"manual",url:t.ip,tcpport:"",udpport:t.port||"3478",username:t.username||m,credential:t.password||T()(m).toString(),forceturn:!0};n.tcpport+="",n.udpport+="",e.turnServers.push(n)})),h.report.setProxyServer(f),d.default.setProxyServer(f),t(u)}))}():4==e.proxyServerType?function r(){_("proxy4",e,(function(o,c){if(o)return"RETRYABLE_ERROR"!==o?n&&n(o):(d.default.debug("["+e.clientId+"]",o),d.default.debug("["+e.clientId+"] Request proxy will be restart in "+s+"s"),i=setTimeout((function(){r()}),1e3*s),I[a]=i,void(s=s>=3600?3600:2*s));var u=c.gatewayServers,p=c.turnServers;clearTimeout(i);var f=Object(l.getParameter)("NGINX");e.proxyServer=f,e.turnServers=[];var m=Object(b.randomString)();p.map((function(t){var n={mode:"manual",url:t.ip,tcpport:t.port||"443",udpport:"",username:t.username||m,credential:t.password||T()(m).toString(),forceturn:!1};n.tcpport+="",n.udpport+="",e.turnServers.push(n)})),h.report.setProxyServer(f),d.default.setProxyServer(f),t(u)}))}():5==e.proxyServerType?function r(){_("proxy5",e,(function(o,c){if(o)return"RETRYABLE_ERROR"!==o?n&&n(o):(d.default.debug("["+e.clientId+"]",o),d.default.debug("["+e.clientId+"] Request proxy will be restart in "+s+"s"),i=setTimeout((function(){r()}),1e3*s),I[a]=i,void(s=s>=3600?3600:2*s));var u=c.gatewayServers,p=c.turnServers;clearTimeout(i);var f=Object(l.getParameter)("NGINX");e.proxyServer=f,e.turnServers=[];var m=Object(b.randomString)();p.map((function(t){var n={mode:"manual",url:t.ip,tcpport:t.port||"443",udpport:"",username:t.username||m,credential:t.password||T()(m).toString(),forceturn:!1,useTurns:!0};n.tcpport+="",n.udpport+="",e.turnServers.push(n)})),h.report.setProxyServer(f),d.default.setProxyServer(f),t(u)}),!0)}():u():c(null,t)},O=function(e,t,n,r,i){var o=Date.now();r=r||t.stringUid;var s={sid:t.sid,opid:10,appid:t.appId,string_uid:r};return new Promise((function(i,a){Object(u.post)(e+"".concat(-1===e.indexOf("?")?"?":"&","action=stringuid"),s,(function(c){try{var l=JSON.parse(c),u=l.code}catch(i){var f="requestUserAccount failed with unexpected body "+c;return d.default.error("["+t.clientId+"]",f),a({retryable:!0,info:f,url:e,error:"UNEXPECTED_ERROR"}),n&&n.dispatchEvent({type:"error",reason:"USER_ACCOUNT_BODY_NOT_JSON"}),void h.report.reqUserAccount(s.sid,{lts:o,success:!1,serverAddress:e,stringUid:r,uid:null,extend:c,errorCode:"USER_ACCOUNT_BODY_NOT_JSON"})}if(u){var m=!1;return"INTERNAL_SERVER_ERROR"===(y=p.StringUidErrorCode[l.code%1e4]||"REQ_ACCOUNT_ERR_".concat(u))&&(m=!0),n&&n.dispatchEvent({type:"error",reason:y}),h.report.reqUserAccount(s.sid,{lts:o,success:!1,serverAddress:e,stringUid:r,uid:null,errorCode:y,extend:s}),a({retryable:m,info:f="Get String Uid Failed ["+y+"]",url:e,error:y})}var g=l.uid;if(!(g>0&&g<Math.pow(2,32))){d.default.error("["+t.clientId+"] "+"Invalid Uint Uid ".concat(r," => ").concat(g),l);var y="INVALID_UINT_UID_".concat(g);return n&&n.dispatchEvent({type:"error",reason:y}),h.report.reqUserAccount(s.sid,{lts:o,success:!1,serverAddress:e,stringUid:r,uid:null,errorCode:y,extend:s}),a({retryable:!0,error:y,info:"Get String Uid failed ["+y+"]",url:e})}i({uid:g,url:e}),h.report.reqUserAccount(s.sid,{lts:o,success:!0,serverAddress:e,stringUid:r,uid:g,errorCode:null,extend:s})}),(function(e,t){if("timeout"===e.type){var i="USER_ACCOUNT_TIMEOUT";n&&n.dispatchEvent({type:"error",reason:i}),h.report.reqUserAccount(s.sid,{lts:o,success:!1,serverAddress:t,stringUid:r,uid:null,errorCode:i,extend:s}),a({retryable:!0,info:i,url:t,error:i})}else{var c="USER_ACCOUNT_SERVER_WRONG_".concat(e.type);n&&n.dispatchEvent({type:"error",reason:c}),h.report.reqUserAccount(s.sid,{lts:o,success:!1,serverAddress:t,stringUid:r,uid:null,errorCode:c,extend:s}),a({retryable:!0,info:c,url:t,error:c})}}),{"X-Packet-Service-Type":0,"X-Packet-URI":72})}))},M=function(e,t,n){Date.now();var r,o=Object(l.getParameter)("ACCOUNT_REGISTER"),a=!1,u=Object(l.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT"),h=null,p=null,f=new Promise(function(){var f=c()(s.a.mark((function c(f,m){var g,y,v;return s.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:h=f,p=m,r=0;case 3:if(!(r<Object(l.getParameter)("ACCOUNT_REGISTER_RETRY_COUNT_MAX"))){c.next=33;break}if(!a){c.next=6;break}return c.abrupt("return");case 6:return g=o[r%o.length],y=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(g+"/api/v1"):"https://".concat(g,"/api/v1"),c.prev=8,c.delegateYield(s.a.mark((function r(){var i;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.proxyServer,r.next=3,O(y,e,t,n);case 3:if(i=r.sent,!a){r.next=6;break}return r.abrupt("return",{v:void 0});case 6:a=!0,setTimeout((function(){d.default.debug("Get UserAccount Successfully",i),h(i)}),0);case 8:case"end":return r.stop()}}),r)}))(),"t0",10);case 10:if(v=c.t0,"object"!==i()(v)){c.next=13;break}return c.abrupt("return",v.v);case 13:c.next=30;break;case 15:if(c.prev=15,c.t1=c.catch(8),!a){c.next=19;break}return c.abrupt("return");case 19:if(!c.t1.retryable){c.next=27;break}return(u=Math.ceil(u*Object(l.getParameter)("ACCOUNT_REGISTER_RETRY_RATIO")))>Object(l.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")&&(u=Object(l.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")),d.default.error("".concat(c.t1.info," ").concat(c.t1.url," Will Fetch User Account in ").concat(u/1e3," seconds")),c.next=25,new Promise((function(e){setTimeout(e,u)}));case 25:c.next=30;break;case 27:d.default.error("Get UserAccount Error: ".concat(c.t1.info," ").concat(c.t1.url),c.t1.error),a=!0,p(c.t1.error);case 30:r++,c.next=3;break;case 33:case"end":return c.stop()}}),c,null,[[8,15]])})));return function(e,t){return f.apply(this,arguments)}}());return f.cancel=function(){a||(a=!0,p({info:"Request Cancelled",retryable:!1}))},f.isFinished=function(){return a},f}},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o,s,a=i(n(0));!function(e){e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(o||(o={})),t.AREAS=o,function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(s||(s={}));var c={ASIA:{CODE:s.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],NGINX:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:s.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],NGINX:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:s.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],NGINX:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:s.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],NGINX:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:s.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],NGINX:["india.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:s.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],NGINX:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:s.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],NGINX:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:s.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],NGINX:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:s.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],NGINX:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:s.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],NGINX:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};t.AREA_DOMAIN_MAP=c;var l={GLOBAL:{ASIA:[o.CHINA,o.JAPAN,o.INDIA],EUROPE:[],NORTH_AMERICA:[],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},d=Object.keys(l[o.GLOBAL]),u=[o.CHINA,o.NORTH_AMERICA,o.EUROPE,o.ASIA,o.JAPAN,o.INDIA,o.OCEANIA,o.SOUTH_AMERICA,o.AFRICA];t.getAreaCodeByConfig=function(e){var t=e.areaCode,n=e.excludedArea;return n?function(e,t){var n,i=[];if("string"==typeof e&&(e=[e]),t&&!e.includes(o.GLOBAL)&&(i=e),t||(i=e),t&&e.includes(o.GLOBAL)){var s=[o.GLOBAL,o.OVERSEA],a=Object.keys(c);if(t===o.GLOBAL)throw new Error("Can not set excludedArea to 'GLOBAL'");if(t===o.CHINA)i=[o.OVERSEA];else if(n=t,d.includes(n)){var h=function(e){return void 0===e&&(e=""),l[o.GLOBAL][e]||[]}(t),p=r(s,[t],h);i=a.filter((function(e){return!p.includes(e)}))}else if(function(e){var t=!1;return d.forEach((function(n){l.GLOBAL[n].includes(e)&&(t=!0)})),t}(t)){var f=function(e){void 0===e&&(e="");var t="";return d.forEach((function(n){l.GLOBAL[n].includes(e)&&(t=n)})),t}(t),m=r(s,[f,t]);i=a.filter((function(e){return!m.includes(e)}))}else i=e;i=function(e){var t=[];return u.forEach((function(n){e.includes(n)&&t.push(n)})),t.concat(e.filter((function(e){return!u.includes(e)})))}(i)}return i}(t,n):t},c.CHINA={CODE:s.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],NGINX:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]},t.getAreaCodeByWebCS=function(e){for(var t=Object.keys(c),n=0;n<t.length;n++){var r=t[n],i=c[r];if(i.WEBCS_DOMAIN.includes(e)||i.WEBCS_DOMAIN_BACKUP_LIST.includes(e))return i.CODE===s.OVERSEA?s.ASIA+","+s.EUROPE+","+s.AFRICA+","+s.NORTH_AMERICA+","+s.SOUTH_AMERICA+","+s.OCEANIA:i.CODE}},t.getAreaCodeByArea=function(e){return e===o.OVERSEA?s.ASIA+","+s.EUROPE+","+s.AFRICA+","+s.NORTH_AMERICA+","+s.SOUTH_AMERICA+","+s.OCEANIA:s[e]},t.getAreaDomainConfig=function(e){var t={WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],NGINX:[]};return e.map((function(e){var n=c[e];if(n){var r=Object.keys(n);r?r.map((function(e){"CODE"!==e&&(t[e]=t[e].concat(n[e]))})):a.default.info(e+" is not exist")}else a.default.info(e+" is not exist")})),t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return N})),n.d(t,"b",(function(){return C}));var r=n(7),i=n.n(r),o=n(4),s=n(8),a=function(e){var t=Object(s.b)(e);return t.url=".",t},c=n(0),l=n(15),d=n(5),u=n(2),h=n(1),p=0,f=function(e){var t=a({});t.id=e.id,t.playerId=p++,t.destroyed=!1,t.fit=e.options&&e.options.fit,"contain"!==t.fit&&"cover"!==t.fit&&(t.fit=null),t.url=e.url,t.stream=e.stream.stream,t.peerVideoReady=!1,t.isFreeze=!1,t.freezeTimeCounterList=[],t.freezeCount=0,t.lastFreezeCount=0,t.lastTimeupdateTime=0,t.elementID=e.elementID,t.setAudioOutput=function(e,n,r){var i=t.video||t.audio;return i?i.setSinkId?void i.setSinkId(e).then((function(){return c.default.debug("["+t.id+"] "+"video ".concat(t.id," setAudioOutput ").concat(e," SUCCESS")),i==t.video&&t.audio?t.audio.setSinkId(e):Promise.resolve()})).then((function(){return c.default.debug("["+t.id+"] "+"audio ".concat(t.id," setAudioOutput ").concat(e," SUCCESS")),n&&n()})).catch((function(e){return c.default.error("["+t.id+"] VideoPlayer.setAudioOutput",e),r&&r(e)})):(c.default.error("["+t.id+"] ",d.default.WEB_API_NOT_SUPPORTED),r&&r(d.default.WEB_API_NOT_SUPPORTED)):(c.default.error("["+t.id+"] ",d.default.PLAYER_NOT_FOUND),r&&r(d.default.PLAYER_NOT_FOUND))},t.destroy=function(){c.default.debug("[".concat(t.id,"] destroy ").concat(e.stream.local?"local":"remote"," Player ").concat(t.id)),Object(l.setSrcObject)(t.video,null),Object(l.setSrcObject)(t.audio,null),t.video.load(),t.audio.load(),t.video.pause(),t.video.remove(),t.audio.remove(),t.freezeCheckInterval&&clearInterval(t.freezeCheckInterval),t.destroyed=!0,delete t.resizer,document.getElementById(t.div.id)&&t.parentNode.contains(t.div)&&t.div.remove()&&t.parentNode.removeChild(t.div),["video","audio"].forEach((function(n){t[n];var r=s[n];clearTimeout(r.playDeferTimeout),r.formerMediaState=null;var i={playerId:t.playerId,stateId:r.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"stop",updatedAt:Date.now()};s[n]=i;var o={type:"player-status-change",playerId:t.playerId,mediaType:n,status:i.status,reason:i.reason,isErrorState:!1,streamId:t.id};c.default.debug("[".concat(t.id,"] Media Player Status Change Triggered by destroy()"),o),e.stream.dispatchEvent(o),h.report.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:o,tag:"tracer"})()}))},t.div=document.createElement("div"),t.div.setAttribute("id","player_"+t.id),e.stream.video?t.div.setAttribute("style","width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;"):t.div.setAttribute("style","width: 100%; height: 100%; position: relative; overflow: hidden;"),t.video=document.createElement("video"),t.video.setAttribute("id","video"+t.id),e.stream.local&&!e.stream.screen?e.stream.mirror?t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; transform: rotateY(180deg); object-fit: ".concat(t.fit||"cover",";")):t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"cover",";")):e.stream.video?t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"cover",";")):e.stream.screen?t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"contain")):t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; display: none; object-fit: ".concat(t.fit||"cover"));var n={autoplay:!0,muted:!!e.stream.local||!(!o.isSafari()&&"iOS"!==o.getBrowserOS())&&"video_element_muted",playsinline:!0,controls:!1,volume:null},r=i()({},n,e.options);!0!==r.muted||r.volume||(r.volume=0),t.video.setAttribute("autoplay",""),t.video.setAttribute("muted",""),t.video.muted=!0,t.video.autoplay=!0,r.playsinline&&t.video.setAttribute("playsinline",""),r.controls&&t.video.setAttribute("controls",""),r.contains&&(t.video.controls=!0),Number.isFinite(r.volume)&&(t.video.volume=r.volume),t.audio=document.createElement("audio"),t.audio.setAttribute("id","audio"+t.id),!0===r.muted&&t.audio.setAttribute("muted",""),!0===r.muted&&(t.audio.muted=!0),r.playsinline&&t.audio.setAttribute("playsinline",""),Number.isFinite(r.volume)&&(t.audio.volume=r.volume),void 0!==t.elementID?(document.getElementById(t.elementID).appendChild(t.div),t.container=document.getElementById(t.elementID)):(document.body.appendChild(t.div),t.container=document.body),t.parentNode=t.div.parentNode;var s={video:{playerId:t.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()},audio:{playerId:t.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()}};t.mediaElemExists=function(e){for(var t=e,n=0;n<Object(u.getParameter)("MEDIA_ELEMENT_EXISTS_DEPTH")&&t;n++)t=t.parentNode;return!!t};var f=function(e){return t.mediaElemExists(e)?e.paused?"paused":"play":"aborted"},m=function(e,t,n){var r=f(e),i=!0;return"paused"===r?("audio"===t&&!0===n.muted&&(i=!1),n.autoplay||(i=!1)):"play"===r?"video"===t?i=!1:!0===n.muted?e.muted&&(i=!1):e.muted||(i=!1):"aborted"===r&&(i=!1),i},g=function(n){var i,o=this;if(o===t.video?i="video":o===t.audio&&(i="audio"),i){if(n.type||c.default.error("[".concat(t.id,"] Unexpected evt"),n),"video"===i&&o.muted&&o.paused)return c.default.debug("[".concat(t.id,"] auto resume video element")),void o.play();var a=f(o);clearTimeout(s[i].playDeferTimeout),s[i].playDeferTimeout=setTimeout((function(){s[i].playDeferTimeout=null;var l=s[i],d=f(o);if(a===d){var u={playerId:t.playerId,stateId:l.stateId+1,playDeferTimeout:null,error:m(o,i,r),status:f(o),reason:n.type,updatedAt:Date.now()};if(l.status!==u.status){s[i]=u;var p={type:"player-status-change",playerId:t.playerId,mediaType:i,status:u.status,reason:u.reason,isErrorState:u.error,streamId:t.id};c.default.debug("[".concat(t.id,"] Media Player Status Change"),p),e.stream.dispatchEvent(p),h.report.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:p,tag:"tracer"})()}}else c.default.debug("[".concat(t.id,"] Status Change after event Triggered.")+"Stream ".concat(t.id," PlayerId ").concat(t.playerId," mediaType ").concat(i," Status ").concat(a,"=>").concat(d))}),Object(u.getParameter)("PLAYER_STATE_DEFER"))}else c.default.error("[".concat(t.id,"] Unknown media element"),o)};t.video.addEventListener("playing",(function(e){!function e(){t.video.videoWidth*t.video.videoHeight>4?c.default.debug("["+t.id+"] video dimensions:",t.video.videoWidth,t.video.videoHeight):setTimeout(e,50)}()}));var y=0,v=0,_=0;t.freezeCheckInterval=setInterval((function(){Date.now()-t.lastTimeupdateTime>500&&t.peerVideoReady?(t.isFreeze=!0,t.freezeCount+=1):t.isFreeze=!1}),500),t.video.addEventListener("playing",g),t.video.addEventListener("canplay",g),t.video.addEventListener("abort",g),t.video.addEventListener("onerror",g),t.video.addEventListener("suspend",g),t.video.addEventListener("stalled",g),t.video.addEventListener("pause",g),t.audio.addEventListener("playing",g),t.audio.addEventListener("canplay",g),t.audio.addEventListener("abort",g),t.audio.addEventListener("onerror",g),t.audio.addEventListener("suspend",g),t.audio.addEventListener("stalled",g),t.audio.addEventListener("pause",g);var E=t.audio,S="audio";if(e.stream.hasVideo()||e.stream.hasScreen())t.div.appendChild(t.video),t.div.appendChild(t.audio),o.isEdge()?t.video.srcObject=e.stream.stream:(Object(l.attachMediaStream)(t.video,e.stream.stream),Object(l.attachMediaStream)(t.audio,e.stream.stream)),t.video.addEventListener("timeupdate",(function(){var e=Date.now();if((y+=1)<10)t.lastTimeupdateTime=e;else for(e-t.lastTimeupdateTime>500&&(t.peerVideoReady?v+=e-t.lastTimeupdateTime:t.peerVideoReady=!0),_+=e-t.lastTimeupdateTime,t.lastTimeupdateTime=e;_>=6e3;)_-=6e3,t.freezeTimeCounterList.push(Math.min(6e3,v)),v-=6e3,v=Math.max(v,0)}));else{!1!==r.muted&&"video_element_muted"!==r.muted||(t.video.removeAttribute("muted"),t.video.muted=!1),t.video.removeAttribute("autoplay"),t.video.autoplay=!1,t.div.appendChild(t.video),E=t.video,S="video";var T=s.audio,b={playerId:t.playerId,stateId:T.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"audioonly",updatedAt:Date.now()};s.audio=b;var I={type:"player-status-change",playerId:t.playerId,mediaType:"audio",status:b.status,reason:b.reason,isErrorState:b.error,streamId:t.id};if(c.default.debug("[".concat(t.id,"] Media Player Status Change"),I),Promise.resolve().then((function(){return e.stream.dispatchEvent(I)})),h.report.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:I,tag:"tracer"})(),window.MediaStream&&(o.isSafari()||"iOS"===o.getBrowserOS())){var N=new MediaStream(e.stream.stream.getAudioTracks());Object(l.setSrcObject)(t.video,N)}else Object(l.setSrcObject)(t.video,e.stream.stream)}if(r.autoplay&&E){var C=E.play();C&&C.catch&&C.catch((function(n){if(!t.destroyed&&E){var i=s[S],o={playerId:t.playerId,stateId:i.stateId+1,playDeferTimeout:null,error:m(E,S,r),status:f(E),reason:"error",updatedAt:Date.now()};if(i.status!==o.status){c.default.debug("[".concat(t.id,"] Player ").concat(t.playerId," Status Changed Detected by promise error: ").concat(i.status,"=>").concat(o.status),n),s[S]=o;var a={type:"player-status-change",playerId:t.playerId,mediaType:S,status:o.status,reason:o.reason,isErrorState:o.error,streamId:t.id};c.default.debug("[".concat(t.id,"] Media Player Status Change"),a),e.stream.dispatchEvent(a),h.report.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:a,tag:"tracer"})()}}}))}return t.setAudioVolume=function(e){var n=parseInt(e)/100;isFinite(n)&&(n<0?n=0:n>1&&(n=1),t.video&&(t.video.volume=n),t.audio&&(t.audio.volume=n))},t},m=n(23),g=n(10),y=n(6),v=n(19),_=n(3),E=n(25),S=n(16),T=n(11),b=n.n(T),I=function(e){Object(_.checkValidString)(e,"profileName"),-1===(e=e.toLowerCase()).indexOf("_")&&(e+="_1"),Object(_.checkValidEnum)(e,"profileName",Object.keys(u.SUPPORT_RESOLUTION_LIST));var t=u.SUPPORT_RESOLUTION_LIST[e];t||(e=Object(u.getParameter)("DEFAULT_PROFILE"),t=u.SUPPORT_RESOLUTION_LIST[e]);var n={profileName:e,video:{width:t[0],height:t[1]},attributes:{resolution:"".concat(t[0],"x").concat(t[1]),minFrameRate:t[2],maxFrameRate:t[3],minVideoBW:t[4],maxVideoBW:t[5]}};return t[2]&&(n.video.frameRate=t[2]),t[6]&&t[7]&&(n.screen={width:t[0],height:t[1],frameRate:{min:t[6],max:t[7]}}),n},N=function(e){var t=Object(s.b)();if(t.params=i()({},e),t.stream=e.stream,t.url=e.url,t.onClose=void 0,t.local=!1,t.videoSource=e.videoSource,t.audioSource=e.audioSource,e.video=!(!e.videoSource&&!e.video),t.video=e.video,e.audio=!(!e.audioSource&&!e.audio),t.audio=e.audio,t.screen=!!e.screen,t.screenAudio=!!e.screenAudio,t.screenAttributes={width:1920,height:1080,maxFr:5,minFr:1},t.videoSize=e.videoSize,t.player=void 0,t.audioLevelHelper=null,e.attributes=e.attributes||{},t.attributes=e.attributes,t.microphoneId=e.microphoneId,t.cameraId=e.cameraId,t.facingMode=e.facingMode,t.inSwitchDevice=!1,t.userMuteVideo=!1,t.userMuteAudio=!1,t.peerMuteVideo=!1,t.peerMuteAudio=!1,t.lowStream=null,t.videoWidth=0,t.videoHeight=0,t.streamId=e.streamID,t.userId=null,t.uintId=e.uintUID||null,t.mirror=!1!==e.mirror,t.DTX=e.audioProcessing&&e.audioProcessing.DTX,t.audioProcessing=e.audioProcessing,t.optimizationMode=e.optimizationMode,t.highQuality=!1,t.stereo=!1,t.speech=!1,t.screen||delete t.screen,!(void 0===t.videoSize||t.videoSize instanceof Array&&4===t.videoSize.length))throw Error("Invalid Video Size");function n(){var e={};t.getVideoTrack()===this?(c.default.debug("Video Track Ended"),e.type="videoTrackEnded",e.track=this):t.getAudioTrack()===this?(c.default.debug("Audio Track Ended"),e.type="audioTrackEnded",e.track=this):c.default.debug("Detached Track ended",this.kind,this.label,this),e.type&&t.dispatchEvent(e)}return t.videoSize=[640,480,640,480],void 0!==e.local&&!0!==e.local||(t.local=!0),t.initialized=!t.local,t._streamInitID=null,function(e){e.audioMixing={audioContextInited:!1,defaultVolume:100,inEarMonitoring:"FILE",sounds:{},states:{IDLE:"IDLE",STARTING:"STARTING",BUSY:"BUSY",PAUSED:"PAUSED"},inEarMonitoringModes:{NONE:"NONE",FILE:"FILE",MICROPHONE:"MOCROPHONE",ALL:"ALL"},ctx:null,mediaStreamSource:null,mediaStreamDest:null,buffer:{}},e._initSoundIfNotExists=function(t,n){e.audioMixing.sounds[t]||(e.audioMixing.sounds[t]={soundId:t,state:"IDLE",muted:e.userMuteAudio,filePath:n,volume:e.audioMixing.defaultVolume,startAt:null,startOffset:null,pauseAt:null,pauseOffset:null,resumeAt:null,resumeOffset:null,stopAt:null,options:null,source:null})},e._initSoundIfNotExists(-1),e.loadAudioBuffer=function(t,n,r){var i=h.report.reportApiInvoke(e.sid,{callback:r,name:"Stream.loadAudioBuffer",options:arguments,tag:"tracer"});Object(_.checkValidString)(n,"url",1,1024,!1),Object(_.checkValidString)(t,"id",1,1024,!1);var o=function(t){c.default.error("[".concat(e.streamId,"] loadAudioBuffer Failed: ")+t),i(d.default.LOAD_AUDIO_FAILED)},s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType="arraybuffer",s.onload=function(){if(s.status>400)o("".concat(s.status," ").concat(s.statusText));else{var n=s.response;e.audioMixing.audioContextInited||e._initAudioContext(),e.audioMixing.ctx.decodeAudioData(n,(function(n){e.audioMixing.buffer[t]=n,i(null)}),(function(t){c.default.error("[".concat(e.streamId,"] decodeAudioData Failed: "),t),i(t)}))}},s.onerror=function(){return o("load error")},s.ontimeout=function(){return o("timeout")},s.send()},e.createAudioBufferSource=function(t){var n=h.report.reportApiInvoke(e.sid,{name:"Stream.createAudioBufferSource",options:arguments,tag:"tracer"});if(e.audioMixing.buffer[t.id]){var r=e.audioMixing.buffer[t.id],i=e.audioMixing.ctx.createBufferSource();i.buffer=r;var s=e.audioMixing.ctx.createGain();if(i.connect(s),s.connect(e.audioMixing.mediaStreamDest),i.gainNode=s,t.loop)i.loop=!0,i.start(0,t.playTime/1e3);else if(t.cycle>1)if(Object(o.isChrome)()){i.loop=!0;var a=t.cycle*r.duration*1e3-(t.playTime||0);i.start(0,t.playTime/1e3,a/1e3)}else c.default.warning("[".concat(e.streamId,"] Cycle Param is ignored by current browser")),i.start(0,t.playTime/1e3);else i.start(0,t.playTime/1e3);var l=e.audioMixing.sounds[t.soundId];return l.source=i,e._flushAudioMixingMuteStatus(),i.addEventListener("ended",(function(){i===l.source&&e.dispatchEvent({type:"audioSourceEnded",soundId:t.soundId,source:i,sound:l})})),n(),i}return c.default.error("[".concat(e.streamId,"] "),"AUDIOBUFFER_NOT_FOUND",t.id),n(!1),!1},e.on("audioSourceEnded",(function(t){var n=t.source,r=t.sound;r&&r.state===e.audioMixing.states.BUSY&&!r.pauseAt&&(r.state=e.audioMixing.states.IDLE,r.startAt=null,r.startOffset=null,r.resumeAt=null,r.resumeOffset=null,n.gainNode&&n.gainNode.disconnect&&n.gainNode.disconnect(),n.buffer=null,e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest))})),e.clearAudioBufferSource=function(){e.audioBufferSource.forEach((function(e){e.stop()}))},e._isSoundExists=function(t){return!!e.audioMixing.sounds[t.soundId]||(c.default.error("SoundId not exists. #".concat(t.soundId)),!1)},e._initAudioContext=function(){if(e.audioMixing.audioContextInited)throw new Error("Failed to init audio context. Already inited");if(!e.stream)throw new Error("Failed to init audio context. Local Stream not initialized");e.audioMixing.ctx=Object(E.a)(),e.audioMixing.mediaStreamSource=e.audioMixing.ctx.createMediaStreamSource(e.stream),e.audioMixing.mediaStreamDest=e.audioMixing.ctx.createMediaStreamDestination(),e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest);var t=e.stream.getVideoTracks()[0];if(t&&e.audioMixing.mediaStreamDest.stream.addTrack(t),e._originStream=e.stream,e._isAudioMuted()?(e._unmuteAudio(),e.stream=e.audioMixing.mediaStreamDest.stream,e._muteAudio()):e.stream=e.audioMixing.mediaStreamDest.stream,e.audioLevelHelper=null,e.pc&&e.pc.peerConnection&&e.pc.peerConnection){var n=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find((function(e){return e&&e.track&&"audio"==e.track.kind})),r=e.audioMixing.mediaStreamDest.stream.getAudioTracks()[0];n&&n.replaceTrack&&r&&n.replaceTrack(r)}e.audioMixing.audioContextInited=!0},e._cleanupAudioMixing=function(){if(e.audioMixing.audioContextInited){for(var t in e.audioMixing.sounds){var n=e.audioMixing.sounds[t];n.state!==e.audioMixing.states.BUSY&&n.state!==e.audioMixing.states.PAUSED||e._stopOneEffect({soundId:t})}e.audioLevelHelper=null,e.audioMixing.audioContextInited=!1}},e._reloadInEarMonitoringMode=function(t){if(t){if(!e.audioMixing.inEarMonitoringModes[t])return c.default.error("[".concat(e.streamId,"] Invalid InEarMonitoringMode ").concat(t));e.audioMixing.inEarMonitoring=t}switch(e.audioMixing.audioContextInited||e._initAudioContext(),e.audioMixing.inEarMonitoring){case e.audioMixing.inEarMonitoringModes.FILE:e.audioMixing.mediaStreamSource.connectedToDestination&&(e.audioMixing.mediaStreamSource.disconnect(e.audioMixing.ctx.destination),e.audioMixing.mediaStreamSource.connectedToDestination=!1);case e.audioMixing.inEarMonitoringModes.ALL:for(var n in e.audioMixing.sounds){var r=e.audioMixing.sounds[n];r&&r.source&&!r.source.connectedToDestination&&(r.source.gainNode.connect(e.audioMixing.ctx.destination),r.source.connectedToDestination=!0)}}switch(e.audioMixing.inEarMonitoring){case e.audioMixing.inEarMonitoringModes.MICROPHONE:e.audioMixing.source.forEach((function(t){t.connectedToDestination&&(t.gainNode.disconnect(e.audioMixing.ctx.destination),t.connectedToDestination=!1)}));case e.audioMixing.inEarMonitoringModes.ALL:e.audioMixing.mediaStreamSource.connectedToDestination||(e.audioMixing.mediaStreamSource.connect(e.audioMixing.ctx.destination),e.audioMixing.mediaStreamSource.connectedToDestination=!0)}},e._startAudioMixingBufferSource=function(t){e.audioMixing.audioContextInited||e._initAudioContext();var n={soundId:t.soundId,id:t.filePath,loop:t.loop,cycle:t.cycle,playTime:t.playTime||0},r=t.replace,i=e.createAudioBufferSource(n);return i.sound=e.audioMixing.sounds[t.soundId],i?(i.addEventListener("ended",e._audioMixingFinishedListener,{once:!0}),e._reloadInEarMonitoringMode(),r&&e.audioMixing.mediaStreamSource.disconnect(e.audioMixing.mediaStreamDest),i):null},e._stopAudioMixingBufferSource=function(t){var n=e.audioMixing.sounds[t.soundId].source;return n?(n.removeEventListener("ended",e._audioMixingFinishedListener),e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest),n.stop(),n.gainNode&&n.gainNode.disconnect&&n.gainNode.disconnect(),n.buffer=null,n):null},e._flushAudioMixingMuteStatus=function(t){for(var n in e.audioMixing.sounds){var r=e.audioMixing.sounds[n];r&&(void 0!==t&&(r.muted=!!t),r.source&&(r.muted?r.source.gainNode.gain.value=0:r.source.gainNode.gain.value=r.volume/100))}},e._handleAudioMixingInvalidStateError=function(t,n,r){var i=e.audioMixing.sounds[n.soundId],o=-1===n.soundId?"INVALID_AUDIO_MIXING_STATE":"INVALID_PLAY_EFFECT_STATE";c.default.error("[".concat(e.streamId,"] Cannot ").concat(t,": ").concat(o,", state is ").concat(i.state)),r&&r(o)},e._handleAudioMixingNoSourceError=function(t,n,r){e.audioMixing.sounds[n.soundId].state=e.audioMixing.states.IDLE;var i=-1===n.soundId?"NO_AUDIO_MIXING_SOURCE":"NO_EFFECT_SOURCE";c.default.error("[".concat(e.streamId,"] Cannot ").concat(t,": ").concat(i)),r&&r(i)},e._getOneEffectStates=function(t){var n=e.audioMixing.sounds[t.soundId];return function(){return n?{state:n.state,startAt:n.startAt,resumeAt:n.resumeAt,pauseOffset:n.pauseOffset,pauseAt:n.pauseAt,resumeOffset:n.resumeOffset,stopAt:n.stopAt,duration:e._getOneEffectDuration(t),position:e._getOneEffectCurrentPosition(t)}:{}}},e._audioMixingFinishedListener=function(){var t=this.sound;t.state===e.audioMixing.states.IDLE&&e.audioMixing.buffer[t.options.filePath]&&!t.options.cacheResource&&(c.default.debug("Recycled buffer ".concat(t.options.filePath)),delete e.audioMixing.buffer[t.options.filePath]),-1===t.soundId&&e.dispatchEvent({type:"audioMixingFinished"})},e._playOneEffect=function(t,n){Object(_.checkValidObject)(t,"options");var r=t.soundId,i=(t.filePath,t.cacheResource);if(t.cycle,t.loop,t.playTime,t.replace,Object(o.isSafari)()&&Object(o.getBrowserVersion)()<12){var s="BROWSER_NOT_SUPPORT";return c.default.error("[".concat(e.streamId,"] Cannot _playOneEffect: "),s),n(s)}e.audioMixing.audioContextInited||e._initAudioContext(),e._initSoundIfNotExists(r);var a=e.audioMixing.sounds[r];if(a.state===e.audioMixing.states.IDLE){if(void 0!==t.cycle&&!t.cycle>0)return s="Invalid Parmeter cycle: "+t.cycle,c.default.error("[".concat(e.streamId,"] ").concat(r),s),n(s);if(Object(_.isEmpty)(i)&&(t.cacheResource=!0),a.state=e.audioMixing.states.STARTING,a.options=t,e.audioMixing.buffer[t.filePath]){var l=e._startAudioMixingBufferSource(t);if(l)return a.source=l,a.startAt=Date.now(),a.resumeAt=null,a.pauseOffset=null,a.pauseAt=null,a.resumeOffset=null,a.stopAt=null,a.startOffset=t.playTime||0,a.state=e.audioMixing.states.BUSY,e._flushAudioMixingMuteStatus(),n(null);a.state=e.audioMixing.states.IDLE;var d="CREATE_BUFFERSOURCE_FAILED";if(n)return n(d);c.default.error("[".concat(e.streamId,"] "),d)}else e.loadAudioBuffer(t.filePath,t.filePath,(function(r){if(r)a.state=e.audioMixing.states.IDLE,n?n(r):c.default.error("[".concat(e.streamId,"] "),r);else{var i=e._startAudioMixingBufferSource(t);if(i)return a.source=i,a.startAt=Date.now(),a.resumeAt=null,a.pauseOffset=null,a.pauseAt=null,a.resumeOffset=null,a.stopAt=null,a.startOffset=t.playTime||0,a.state=e.audioMixing.states.BUSY,e._flushAudioMixingMuteStatus(),n(null);if(a.state=e.audioMixing.states.IDLE,r="CREATE_BUFFERSOURCE_FAILED",n)return n(r);c.default.error("[".concat(e.streamId,"] "),r)}}))}else e._handleAudioMixingInvalidStateError("_playEffect",t,n)},e._stopOneEffect=function(t,n){var r=e.audioMixing.sounds[t.soundId];return e._isSoundExists(t)?r.state===e.audioMixing.states.BUSY||r.state===e.audioMixing.states.PAUSED?(e._stopAudioMixingBufferSource(t),r.stopAt=Date.now(),r.state=e.audioMixing.states.IDLE,e.audioMixing.buffer[r.options.filePath]&&!r.options.cacheResource&&(c.default.debug("Recycled buffer ".concat(r.options.filePath)),delete e.audioMixing.buffer[r.options.filePath]),void(n&&n(null))):void e._handleAudioMixingInvalidStateError("_stopOneEffect",t,n):n("SOUND_NOT_EXISTS")},e._pauseOneEffect=function(t,n){var r=e.audioMixing.sounds[t.soundId];if(r.state===e.audioMixing.states.BUSY)return e._stopAudioMixingBufferSource(t)?(r.pauseAt=Date.now(),r.state=e.audioMixing.states.PAUSED,r.resumeAt?r.pauseOffset=r.pauseAt-r.resumeAt+r.resumeOffset:r.pauseOffset=r.pauseAt-r.startAt+r.startOffset,n&&n(null)):void e._handleAudioMixingNoSourceError("_pauseOneEffect",t,n);e._handleAudioMixingInvalidStateError("_pauseOneEffect",t,n)},e._resumeOneEffect=function(t,n){var r=e.audioMixing.sounds[t.soundId];if(r.state===e.audioMixing.states.PAUSED){var i={soundId:t.soundId,filePath:r.options.filePath,cycle:r.options.cycle,loop:r.options.loop,playTime:r.pauseOffset,replace:r.options.replace},o=e._startAudioMixingBufferSource(i);if(!o){var s="CREATE_BUFFERSOURCE_FAILED";return n(s),void c.default.error("[".concat(e.streamId,"] "),s)}r.source=o,r.resumeAt=Date.now(),r.resumeOffset=r.pauseOffset,r.state=e.audioMixing.states.BUSY,r.pauseAt=null,r.pauseOffset=null,n(null)}else e._handleAudioMixingInvalidStateError("_resumeOneEffect",t,n)},e._getOneEffectDuration=function(t){var n=e.audioMixing.sounds[t.soundId];return n.options&&n.options.filePath&&e.audioMixing.buffer[n.options.filePath]?1e3*e.audioMixing.buffer[n.options.filePath].duration:null},e._getOneEffectCurrentPosition=function(t,n){var r=e.audioMixing.sounds[t.soundId];return r.state===e.audioMixing.states.PAUSED?r.pauseOffset%e._getOneEffectDuration(t):r.state===e.audioMixing.states.BUSY?r.resumeAt?(Date.now()-r.resumeAt+r.resumeOffset)%e._getOneEffectDuration(t):(Date.now()-r.startAt+r.startOffset)%e._getOneEffectDuration(t):void(n&&e._handleAudioMixingInvalidStateError("_getOneEffectCurrentPosition",t))},e._setOneEffectPosition=function(t,n,r){var i=e.audioMixing.sounds[t.soundId];if(i.state===e.audioMixing.states.BUSY){if(!e._stopAudioMixingBufferSource(t))return void e._handleAudioMixingNoSourceError("_setOneEffectPosition",t,r);var o={soundId:t.soundId,filePath:i.options.filePath,loop:i.options.loop,cycle:i.options.cycle,playTime:n},s=e._startAudioMixingBufferSource(o);if(!s){var a="CREATE_BUFFERSOURCE_FAILED";return r&&r(a),void c.default.error("[".concat(e.streamId,"] "),a)}i.source=s,i.startAt=Date.now(),i.startOffset=n,i.resumeAt=null,i.resumeOffset=null,i.pauseOffset=null,i.pauseAt=null}else{if(i.state!==e.audioMixing.states.PAUSED)return void e._handleAudioMixingInvalidStateError("_setOneEffectPosition",t,r);i.pauseOffset=n}r&&r(null)},e.startAudioMixing=function(t,n){var r=h.report.reportApiInvoke(e.sid,{callback:function(t){if(t)return n&&n(t);e.dispatchEvent({type:"audioMixingPlayed"}),n&&n(null)},getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.startAudioMixing",options:t});Object(_.checkValidObject)(t,"options");var o=t.filePath,s=t.cacheResource,a=t.cycle,c=t.loop,l=t.playTime,d=t.replace;Object(_.checkValidString)(o,"filePath",1,Object(u.getParameter)("FILEPATH_LENMAX"),!1),Object(_.checkValidNumber)(l,"playTime",0,1e8),!Object(_.isEmpty)(a)&&Object(_.checkValidNumber)(a,"cycle"),!Object(_.isEmpty)(c)&&Object(_.checkValidBoolean)(c,"loop"),!Object(_.isEmpty)(d)&&Object(_.checkValidBoolean)(d,"replace"),!Object(_.isEmpty)(s)&&Object(_.checkValidBoolean)(s,"cacheResource");var p=i()({soundId:-1},t);e._playOneEffect(p,r)},e.stopAudioMixing=function(t){var n=h.report.reportApiInvoke(e.sid,{callback:t,getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.stopAudioMixing"});e._stopOneEffect({soundId:-1},n)},e.pauseAudioMixing=function(t){var n=h.report.reportApiInvoke(e.sid,{callback:t,getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.pauseAudioMixing"});return e._pauseOneEffect({soundId:-1},n)},e.resumeAudioMixing=function(t){var n=h.report.reportApiInvoke(e.sid,{callback:function(n,r){if(n)return t&&t(n);e.dispatchEvent({type:"audioMixingPlayed"}),t&&t(null)},getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.resumeAudioMixing"});e._resumeOneEffect({soundId:-1},n)},e.adjustAudioMixingVolume=function(t){var n=h.report.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.adjustAudioMixingVolume",options:arguments,tag:"tracer"});Object(_.checkValidNumber)(t,"volume",0,100),e.audioMixing.sounds[-1].volume=t,e._flushAudioMixingMuteStatus(),n()},e.getAudioMixingDuration=function(){var t=h.report.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingDuration"}),n=e._getOneEffectDuration({soundId:-1});return t(null,n),n},e.getAudioMixingCurrentPosition=function(){var t=h.report.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingCurrentPosition"}),n=e._getOneEffectCurrentPosition({soundId:-1},!0);return t(null,n),n},e.setAudioMixingPosition=function(t,n){var r=h.report.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.setAudioMixingPosition"});Object(_.checkValidNumber)(t,"position",0,1e8),e._setOneEffectPosition({soundId:-1},t,r)},e.playEffect=function(t,n){var r=h.report.reportApiInvoke(e.sid,{callback:function(t){if(t)return n&&n(t);e.dispatchEvent({type:"effectPlayed"}),n&&n(null)},name:"Stream.playEffect",options:t});Object(_.checkValidObject)(t,"options");var i=t.soundId,o=t.filePath,s=t.cycle;Object(_.checkValidNumber)(i,"soundId",1,1e4),Object(_.checkValidString)(o,"filePath",0,Object(u.getParameter)("FILEPATH_LENMAX"),!1),!Object(_.isEmpty)(s)&&Object(_.checkValidNumber)(s,"cycle"),e._playOneEffect(t,r)},e.stopEffect=function(t,n){var r=h.report.reportApiInvoke(e.sid,{callback:n,getStates:e._getOneEffectStates({soundId:t}),name:"Stream.stopEffect"});Object(_.checkValidNumber)(t,"soundId",1,1e4),e._stopOneEffect({soundId:t},r)},e.stopAllEffects=function(t){var n=h.report.reportApiInvoke(e.sid,{callback:t,name:"Stream.stopAllEffect"}),r=!1,i=0,o=0,s=function(e){r||(e?(n(e),r=!0):i+=1,i===o&&(n(null),r=!0))};for(var a in e.audioMixing.sounds){var c=e.audioMixing.sounds[a];-1!==c.soundId&&(c.state!==e.audioMixing.states.BUSY&&c.state!==e.audioMixing.states.PAUSED||(o++,e._stopOneEffect({soundId:a},s)))}o||n(null)},e.preloadEffect=function(t,n,r){var i=h.report.reportApiInvoke(e.sid,{callback:r,options:arguments,tag:"tracer",name:"Stream.preloadEffect"});Object(_.checkValidNumber)(t,"soundId",1,1e4),Object(_.checkValidString)(n,"filePath",1,Object(u.getParameter)("FILEPATH_LENMAX"),!1),e._initSoundIfNotExists(t,n),e.audioMixing.buffer[n]?i(null):e.loadAudioBuffer(n,n,i)},e.unloadEffect=function(t,n){var r=h.report.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",name:"Stream.unloadEffect"});Object(_.checkValidNumber)(t,"soundId",1,1e4);var i=e.audioMixing.sounds[t];if(!i){var o="SOUND_NOT_EXISTS";return c.default.error(o,t),void r(o)}var s=i.options?i.options.filePath:i.filePath;if(s)delete e.audioMixing.buffer[s],delete e.audioMixing.sounds[t],r(null);else{var a="SOUND_BUFFER_NOT_FOUND";c.default.error(a,t),r(a)}},e.pauseEffect=function(t,n){var r=h.report.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",name:"Stream.pauseEffect"});return e._pauseOneEffect({soundId:t},r)},e.pauseAllEffects=function(t){var n=h.report.reportApiInvoke(e.sid,{callback:t,name:"Stream.pauseAllEffects"}),r=!1,i=0,o=0,s=function(e){r||(e?(n(e),r=!0):i+=1,i===o&&(n(null),r=!0))};for(var a in e.audioMixing.sounds)"-1"!==a&&e.audioMixing.sounds[a].state===e.audioMixing.states.BUSY&&(o++,e._pauseOneEffect({soundId:a},s));o||n(null)},e.resumeEffect=function(t,n){Object(_.checkValidNumber)(t,"soundId",1,1e4);var r=h.report.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",name:"Stream.resumeEffect"});return e._resumeOneEffect({soundId:t},r)},e.resumeAllEffects=function(t){var n=h.report.reportApiInvoke(e.sid,{callback:t,name:"Stream.resumeAllEffects"}),r=!1,i=0,o=0,s=function(e){r||(e?(n(e),r=!0):i+=1,i===o&&(n(null),r=!0))};for(var a in e.audioMixing.sounds)"-1"!==a&&e.audioMixing.sounds[a].state===e.audioMixing.states.PAUSED&&(o++,e._resumeOneEffect({soundId:a},s));o||n(null)},e.getEffectsVolume=function(){var t=[];for(var n in e.audioMixing.sounds){var r=e.audioMixing.sounds[n];r&&"-1"!==n&&t.push({soundId:parseInt(n),volume:r.volume})}return t},e.setEffectsVolume=function(t,n){var r=h.report.reportApiInvoke(e.sid,{name:"Stream.setEffectsVolume",options:arguments,tag:"tracer",callback:n});for(var i in Object(_.checkValidNumber)(t,"volume",0,100),e.audioMixing.defaultVolume=t,e.audioMixing.sounds){var o=e.audioMixing.sounds[i];"-1"!==i&&(o.volume=t)}e._flushAudioMixingMuteStatus(),r(null)},e.setVolumeOfEffect=function(t,n,r){var i=h.report.reportApiInvoke(e.sid,{name:"Stream.setVolumeOfEffect",options:arguments,tag:"tracer",callback:r});Object(_.checkValidNumber)(t,"soundId",0,1e4),Object(_.checkValidNumber)(n,"volume",0,100),e._initSoundIfNotExists(t),e.audioMixing.sounds[t].volume=n,e._flushAudioMixingMuteStatus(),i(null)}}(t),S.a.addVideoEffectCapability(t),function(e,t){e.videoConstraint={},t.cameraId&&(e.videoConstraint.deviceId={exact:t.cameraId}),t.facingMode&&(e.videoConstraint.facingMode=t.facingMode),e.videoSize&&(e.videoConstraint.width=e.videoSize[0],e.videoConstraint.height=e.videoSize[1]),Object(o.isLegacyChrome)()||(e.videoConstraint.frameRate=30),e.audioConstraint={},t.microphoneId&&(e.audioConstraint.deviceId={exact:t.microphoneId}),Object(o.isLegacyChrome)()||e.audioProcessing&&(void 0!==e.audioProcessing.AGC&&(Object(o.isFireFox)()?e.audioConstraint.autoGainControl=e.audioProcessing.AGC:Object(o.isChrome)()&&(e.audioConstraint.googAutoGainControl=e.audioProcessing.AGC,e.audioConstraint.googAutoGainControl2=e.audioProcessing.AGC)),void 0!==e.audioProcessing.AEC&&(e.audioConstraint.echoCancellation=e.audioProcessing.AEC),void 0!==e.audioProcessing.ANS&&(Object(o.isFireFox)()?e.audioConstraint.noiseSuppression=e.audioProcessing.ANS:Object(o.isChrome)()&&(e.audioConstraint.googNoiseSuppression=e.audioProcessing.ANS))),e.screenConstraint={},t.sourceId&&(e.screenConstraint.sourceId=t.sourceId),t.extensionId&&Object(o.isChrome)()?(e.screenConstraint.extensionId=t.extensionId,e.screenConstraint.mandatory={chromeMediaSource:"desktop",maxWidth:e.screenAttributes.width,maxHeight:e.screenAttributes.height,maxFrameRate:e.screenAttributes.maxFr,minFrameRate:e.screenAttributes.minFr}):(e.screenConstraint.mediaSource="screen",e.screenConstraint.width=e.screenAttributes.width,e.screenConstraint.height=e.screenAttributes.height,e.screenConstraint.frameRate={ideal:e.screenAttributes.maxFr,max:e.screenAttributes.maxFr}),t.mediaSource&&(e.screenConstraint.mediaSource=t.mediaSource),e.setVideoResolution=function(n){var r=h.report.reportApiInvoke(e.sid,{name:"Stream.setVideoResolution",options:arguments,tag:"tracer"});if(!(n instanceof Array)){var o=I(n+="");return o&&o.video?(e.videoConstraint=i()(e.videoConstraint,{width:{ideal:o.video.width},height:{ideal:o.video.height}}),t.attributes.resolution=o.attributes.resolution,(s=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0])&&s.applyConstraints?(c.default.debug("setVideoResolution applyConstraints",e.videoConstraint),s.applyConstraints(e.videoConstraint).then(r).catch(r)):r(),!0):(r("NO_PROFILE_".concat(n)),!1)}var s,a=n[0],l=n[1];e.videoConstraint=i()(e.videoConstraint,{width:{ideal:a},height:{ideal:l}}),t.attributes.resolution="".concat(a,"x").concat(l),(s=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0])&&s.applyConstraints?(c.default.debug("setVideoResolution applyConstraints",e.videoConstraint),S.a.disableVideoEffect(e).then((function(){return s.applyConstraints(e.videoConstraint).then(r).catch(r)})).then((function(){return S.a.restoreVideoEffect(e)}))):r()},e.setVideoFrameRate=function(t){var n=h.report.reportApiInvoke(e.sid,{name:"Stream.setVideoFrameRate",options:arguments,tag:"tracer"});if(Object(o.isFireFox)())return n("FIREFOX_NOT_SUPPORTED"),!1;if("object"===b()(t)&&t instanceof Array&&t.length>1){e.videoConstraint=i()(e.videoConstraint,{frameRate:t[0]}),e.attributes.minFrameRate=t[0],e.attributes.maxFrameRate=t[1];var r=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0];return r&&r.applyConstraints?(c.default.debug("setVideoFrameRate applyConstraints",e.videoConstraint),r.applyConstraints(e.videoConstraint).then(n).catch(n)):n(),!0}return n("INVALID_PARAM_".concat(JSON.stringify(t))),!1},e.setVideoBitRate=function(n){var r=h.report.reportApiInvoke(e.sid,{name:"Stream.setVideoBitRate",options:arguments,tag:"tracer"});return"object"===b()(n)&&n instanceof Array&&n.length>1?(t.attributes.minVideoBW=n[0],t.attributes.maxVideoBW=n[1],e.connectionSpec&&(e.connectionSpec.minVideoBW=n[0],e.connectionSpec.maxVideoBW=n[1]),e.pc&&e.pc.renegotiate&&e.pc.renegotiate(),r(),!0):(r("INVALID_PARAM_".concat(JSON.stringify(n))),!1)},e.setScreenBitRate=function(t){var n=h.report.reportApiInvoke(e.sid,{name:"Stream.setScreenBitRate",options:arguments,tag:"tracer"});return"object"===b()(t)&&t instanceof Array&&t.length>1?(e.screenAttributes.minVideoBW=t[0],e.screenAttributes.maxVideoBW=t[1],n(),!0):(n("INVALID_PARAM_".concat(JSON.stringify(t))),!1)},e.setScreenProfile=function(t){var n=h.report.reportApiInvoke(e.sid,{name:"Stream.setScreenProfile",options:arguments,tag:"tracer"});Object(_.checkValidEnum)(t,"profile",["480p_1","480p_2","720p_1","720p_2","1080p_1","1080p_2"]);var r=I(t);return r&&r.screen?(e.screenConstraint.mandatory?(e.screenConstraint.mandatory.maxWidth=r.screen.width,e.screenConstraint.mandatory.maxHeight=r.screen.height,r.screen.frameRate&&r.screen.frameRate.min&&r.screen.frameRate.max&&(e.screenConstraint.mandatory.minFrameRate=r.screen.frameRate.min,e.screenConstraint.mandatory.maxFrameRate=r.screen.frameRate.max)):e.screenConstraint=i()(e.screenConstraint,r.screen),e.screenAttributes.width=r.screen.width,e.screenAttributes.height=r.screen.height,e.screenAttributes.minFr=r.screen.frameRate.min,e.screenAttributes.maxFr=r.screen.frameRate.max,n(),!0):(n("NO_SCREEN_PROFILE_".concat(JSON.stringify(t))),!1)},e.setVideoProfileCustom=function(t){var n=h.report.reportApiInvoke(e.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});e.setVideoResolution(t[0]),e.setVideoFrameRate([t[1],t[1]]),e.setVideoBitRate([t[2],t[2]]),n()},e.setVideoProfileCustomPlus=function(n){var r=h.report.reportApiInvoke(e.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});e.setVideoResolution([n.width,n.height]),t.attributes.resolution="".concat(n.width,"x").concat(n.height),e.setVideoFrameRate([n.framerate,n.framerate]),e.setVideoBitRate([n.bitrate,n.bitrate]),r()},e.setVideoProfile=function(n){var r=h.report.reportApiInvoke(e.sid,{name:"Stream.setVideoProfile",options:arguments,tag:"tracer"}),s=I(n);if(!s){var a="Invalid Profile ".concat(n);throw new Error(a)}if(e.profile=n,s&&s.video){e.profile=s.profileName,e.videoConstraint=i()(e.videoConstraint,s.video),e.connectionSpec&&s.attributes.maxVideoBW&&(e.connectionSpec.minVideoBW=s.attributes.minVideoBW,e.connectionSpec.maxVideoBW=s.attributes.maxVideoBW),Object(o.isEdge)()&&(e.videoConstraint.frameRate.max=60),Object(o.isFireFox)()&&(e.videoConstraint.frameRate=30),t.attributes=i()(t.attributes,s.attributes),e.pc&&e.pc.renegotiate&&e.pc.renegotiate();var l=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0];return l&&l.applyConstraints?(c.default.debug("setVideoProfile applyConstraints",e.videoConstraint),S.a.disableVideoEffect(e).then((function(){return l.applyConstraints(e.videoConstraint)})).then((function(){return S.a.restoreVideoEffect(e)})).then((function(t){return new Promise((function(n,i){r(t),setTimeout((function(){Object(g.vsResHack)(e.stream,(function(t,r){e.videoWidth=t,e.videoHeight=r,n()}),(function(t){c.default.warning("[".concat(e.streamId,"] vsResHack failed: "),t),i()}))}),2500)}))})).catch(r)):r(),!0}return r("INVALID_VIDEO_PROFILE_".concat(n)),!1},e.setAudioProfile=function(t){var n=h.report.reportApiInvoke(e.sid,{name:"Stream.setAudioProfile",options:arguments,tag:"tracer"});Object(_.checkValidEnum)(t,"profile",["speech_low_quality","speech_standard","music_standard","standard_stereo","high_quality","high_quality_stereo"]),e.audioProfile=t;var r=function(e){var t=u.AUDIO_PROFILE_SETTINGS[e]||u.AUDIO_PROFILE_SETTINGS.default;return{highQuality:t[0],stereo:t[1],speech:t[2],lowQuality:t[3]}}(t);return e.highQuality=r.highQuality,e.stereo=r.stereo,e.speech=r.speech,e.lowQuality=r.lowQuality,e.stereo&&Object(o.isChrome)()&&(e.audioConstraint.googAutoGainControl=!1,e.audioConstraint.googAutoGainControl2=!1,e.audioConstraint.echoCancellation=!1,e.audioConstraint.googNoiseSuppression=!1),n(),!0},e.setVideoEncoderConfiguration=function(t){Object(_.checkValidObject)(t,"config");var n=h.report.reportApiInvoke(e.sid,{name:"Stream.setVideoEncoderConfiguration",options:t,tag:"tracer"});t.resolution&&(Object(_.checkValidNumber)(t.resolution.width,"config.resolution.width"),Object(_.checkValidNumber)(t.resolution.height,"config.resolution.height"),e.setVideoResolution([t.resolution.width,t.resolution.height])),t.frameRate&&(Object(_.checkValidNumber)(t.frameRate.min,"config.frameRate.min"),Object(_.checkValidNumber)(t.frameRate.max,"config.frameRate.max"),e.setVideoFrameRate([t.frameRate.min,t.frameRate.max])),t.bitrate&&(Object(_.checkValidNumber)(t.bitrate.min,"config.bitrate.min",1,1e7),Object(_.checkValidNumber)(t.bitrate.max,"config.bitrate.max",1,1e7),e.setVideoBitRate([t.bitrate.min,t.bitrate.max])),n()},e.getSupportedProfile=function(t){var n=h.report.reportApiInvoke(e.sid,{name:"Stream.getSupportedProfile",options:arguments,tag:"tracer",callback:t});if(!e.local){var r="ONLY_LOCAL_STREAM_SUPPORTED";return c.default.error(r),n(r)}if(!e.stream)return r="STREAM_NOT_INIT",c.default.error(r),n(r);if(!e.stream.getVideoTracks)return r="TRACK_NOT_SUPPORT",c.default.error(r),n(r);var i=e.stream.getVideoTracks()[0];if(!i)return r="NO_VIDEO_TRACK_FOUND",c.default.error(r),n(r);if(!i.getCapabilities)return r="GETCAPABILITY_NOT_SUPPORT",c.default.error(r),n(r);var o=function(e){return Object.keys(u.SUPPORT_RESOLUTION_LIST).filter((function(t){var n=u.SUPPORT_RESOLUTION_LIST[t],r=["width","height","frameRate"];for(var i in r){var o=r[i];if(e[o]&&n[i]){if("number"==typeof e[o].max&&e[o].max<n[i])return!1;if("number"==typeof e[o].min&&e[o].min>n[i])return!1}}return!0})).reverse()}(i.getCapabilities());return n(null,o)}}(t,e),t.getId=function(){return t.streamId},t.getUserId=function(){return t.userId},t.checkDualStreamEnabled=function(){return!(!Object(u.getParameter)("DUALSTREAM_OPERATION_CHECK")||!t.isDualStream)&&(c.default.error("Operation not permitted: ".concat("DUAL_STREAM_ENABLED")),"DUAL_STREAM_ENABLED")},t.setUserId=function(e){var n=h.report.reportApiInvoke(t.sid,{name:"Stream.setUserId",options:arguments,tag:"tracer"});t.userId&&c.default.warning("[".concat(t.streamId,"] Stream.userId ").concat(t.userId," => ").concat(e)),t.userId=e,n()},t.getAttributes=function(){return e.screen?t.screenAttributes:e.attributes},t.hasAudio=function(){return!!t.audio},t.hasVideo=function(){return!!t.video},t.hasScreen=function(){return!!t.screen},t.hasScreenAudio=function(){return!!t.screenAudio},t.isVideoOn=function(){return(t.hasVideo()||t.hasScreen())&&!t.userMuteVideo},t.isAudioOn=function(){return t.hasAudio()&&!t.userMuteAudio},t.init=function(r,i){var o=h.report.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return i&&i(e);r&&r(t)},name:"Stream.init",options:arguments,tag:"tracer"}),s=((new Date).getTime(),arguments[2]);if(void 0===s&&(s=2),!0===t.initialized)return o({type:"warning",msg:"STREAM_ALREADY_INITIALIZED"});if(!0!==t.local)return o({type:"warning",msg:"STREAM_NOT_LOCAL"});var a=Math.random().toString().slice(3);t._streamInitID=a,t.videoSource?t.videoName="videoSource":t.video&&(t.videoName=v.a.searchDeviceNameById(e.cameraId)||"default"),t.audioSource?t.audioName="audioSource":t.audio&&(t.audioName=v.a.searchDeviceNameById(e.microphoneId)||"default"),t.screen&&(t.screenName=e.extensionId||"default");try{if(e.audio||e.video||e.screen||e.screenAudio||e.videoSource||e.audioSource){c.default.debug("[".concat(t.streamId,"] Requested access to local media"));var l={streamId:t.streamId};e.videoSource?l.videoSource=e.videoSource:e.screen?l.screen=t.screenConstraint:e.video&&(l.video=t.videoConstraint),e.audioSource?l.audioSource=e.audioSource:e.screenAudio?l.screenAudio=e.screenAudio:e.audio&&(l.audio=t.audioConstraint),Object(m.b)(l,(function(r){if(l.screenAudio&&!r.getAudioTracks()[0]&&c.default.warning("[".concat(t.streamId,"] Audio sharing is not selected")),l.screen&&c.default.debug("[".concat(t.streamId,"] User has granted access to screen sharing")),(l.video||l.audio)&&c.default.debug("[".concat(t.streamId,"] User has granted access to local media")),null===t._streamInitID){r.getTracks().forEach((function(e){e.stop()}));var i={type:"error",msg:"STREAM_IS_CLOSED",info:"stream is closed and cannot be initialized"};return c.default.error(t.streamId,i.info),void o(i)}if(t._streamInitID!==a)return r.getTracks().forEach((function(e){e.stop()})),i={type:"error",msg:"ABORT_OTHER_INIT",info:"stream initialization is aborted because of another stream.init"},c.default.error(t.streamId,i.info),void o(i);t.dispatchEvent({type:"accessAllowed"}),t.stream=r,t.initialized=!0,t.reloadDeviceName(),t.hasVideo()&&Object(g.vsResHack)(r,(function(e,n){t.videoWidth=e,t.videoHeight=n}),(function(e){c.default.warning("[".concat(t.streamId,"] vsResHack failed: "),e)})),e.screen&&t.stream&&t.stream.getVideoTracks()[0]&&(t.stream.getVideoTracks()[0].onended=function(){t.dispatchEvent({type:"stopScreenSharing"})}),t.stream&&t.stream.getTracks&&t.stream.getTracks().forEach((function(r){r&&!r.onended&&(r.onended=n),"video"===r.kind&&e.optimizationMode&&(r.contentHint=e.optimizationMode,r.contentHint===e.optimizationMode&&c.default.debug("[".concat(t.streamId,"] set content hint to"),e.optimizationMode))})),o()}),(function(e){var n={type:"error",info:null};switch(e&&(n.msg=e.name||e.code||e,e.message&&(n.info=e.message),e.code&&(n.info?n.info+=". "+e.code:n.info=" "+e.code),e.constraint&&(n.info?n.info+=". Constraint: "+e.constraint:n.info="constraint: "+e.constraint)),n.msg){case"Starting video failed":case"TrackStartError":if(t.videoConstraint&&(delete t.videoConstraint.width,delete t.videoConstraint.height),s>0)return void setTimeout((function(){t.init((function(e){return o(e)}),o,s-1)}),1);n.msg="MEDIA_OPTION_INVALID";break;case"DevicesNotFoundError":n.msg="DEVICES_NOT_FOUND";break;case"NotSupportedError":n.msg="NOT_SUPPORTED";break;case"PermissionDeniedError":case"InvalidStateError":n.msg="PERMISSION_DENIED",t.dispatchEvent({type:"accessDenied"});break;case"PERMISSION_DENIED":case"NotAllowedError":t.dispatchEvent({type:"accessDenied"});break;case"ConstraintNotSatisfiedError":n.msg="CONSTRAINT_NOT_SATISFIED";break;default:n.msg||(n.msg="UNDEFINED")}var r="Media access ".concat(n.msg).concat(n.info?": "+n.info:"");c.default.error("[".concat(t.streamId,"] "),r),o(n)}))}else o({type:"warning",msg:"STREAM_HAS_NO_MEDIA_ATTRIBUTES"})}catch(e){c.default.error("[".concat(t.streamId,"] Stream init: "),e),o({type:"error",msg:e.message||e})}},t.reloadDeviceName=function(){if(t.stream){if(t.stream.getVideoTracks){var e=t.stream.getVideoTracks()[0];e&&e.label&&(t.videoName=e.label)}if(t.stream.getAudioTracks){var n=t.stream.getAudioTracks()[0];n&&n.label&&(t.audioName=n.label)}}},t.close=function(){var e=h.report.reportApiInvoke(null,{name:"Stream.close",options:arguments,tag:"tracer"});if(c.default.debug("[".concat(t.streamId,"] Close stream with id"),t.streamId),t._originStream)try{t._originStream.getTracks().map((function(e){return e.stop()}))}catch(e){}if(void 0!==t.stream){var n=t.stream.getTracks();for(var r in n)n.hasOwnProperty(r)&&(n[r].stop(),n[r].onended=null);!t.isLowStream&&t.local?S.a.disableVideoEffect(t).then((function(){t.stream=void 0})):(t.stream&&t.stream.clean&&t.stream.clean(),t.stream=void 0)}if(t._originStream){for(var r in n=t._originStream.getTracks())n.hasOwnProperty(r)&&(n[r].stop(),n[r].onended=null);!t.isLowStream&&t.local?S.a.disableVideoEffect(t).then((function(){t._originStream=void 0})):(t._originStream&&t._originStream.clean&&t._originStream.clean(),t._originStream=void 0)}Object(o.isSafari)()&&t.pc&&t.pc.peerConnection&&t.pc.peerConnection.removeTrack&&t.pc.peerConnection.getSenders&&t.pc.peerConnection.getSenders().forEach((function(e){e&&(c.default.debug("[".concat(t.streamId,"] Remove Track"),e),t.pc.peerConnection.removeTrack(e))})),t.local&&(t.initialized=!1),t._streamInitID=null,t._onAudioMute=void 0,t._onAudioUnmute=void 0,t._onVideoMute=void 0,t._onVideoUnmute=void 0,t.lowStream&&t.lowStream.close(),t.player&&t.player.video&&t.player.video.srcObject&&(t.player.video.srcObject=null),t.player&&t.player.audio&&t.player.audio.srcObject&&(t.player.audio.srcObject=null),e()},t.enableAudio=function(){var e,n=h.report.reportApiInvoke(t.sid,{name:"Stream.enableAudio",options:arguments,tag:"tracer"});return c.default.deprecate("[".concat(t.streamId,"] Stream.enableAudio is deprecated and will be removed in the future. Use Stream.unmuteAudio instead")),t.userMuteAudio||c.default.warning("[".concat(t.streamId,"] User already enableAudio")),t.userMuteAudio=!1,n(null,e=!t.peerMuteAudio&&t._unmuteAudio()),e},t.disableAudio=function(){var e=h.report.reportApiInvoke(t.sid,{name:"Stream.disableAudio",options:arguments,tag:"tracer"});c.default.deprecate("[".concat(t.streamId,"] Stream.disableAudio is deprecated and will be removed in the future. Use Stream.muteAudio instead")),t.userMuteAudio&&c.default.warning("[".concat(t.streamId,"] User already disableAudio")),t.userMuteAudio=!0;var n=t._muteAudio();return e(null,n),n},t.enableVideo=function(){var e,n=h.report.reportApiInvoke(t.sid,{name:"Stream.enableVideo",options:arguments,tag:"tracer"});return c.default.deprecate("[".concat(t.streamId,"] Stream.enableVideo is deprecated and will be removed in the future. Use Stream.unmuteVideo instead")),t.userMuteVideo||c.default.warning("[".concat(t.streamId,"] User already enableVideo")),t.userMuteVideo=!1,t.lowStream&&(t.lowStream.userMuteVideo=!1),n(null,e=!t.peerMuteVideo&&t._unmuteVideo()),e},t.disableVideo=function(){var e=h.report.reportApiInvoke(t.sid,{name:"Stream.disableVideo",options:arguments,tag:"tracer"});c.default.deprecate("[".concat(t.streamId,"] Stream.disableVideo is deprecated and will be removed in the future. Use Stream.muteVideo instead")),t.userMuteVideo&&c.default.warning("[".concat(t.streamId,"] User already disableVideo")),t.userMuteVideo=!0,t.lowStream&&(t.lowStream.userMuteVideo=!0);var n=t._muteVideo();return e(null,n),n},t.unmuteAudio=function(){var e,n=h.report.reportApiInvoke(t.sid,{name:"Stream.unmuteAudio",options:arguments,tag:"tracer"});return t.userMuteAudio||c.default.warning("[".concat(t.streamId,"] User already unmuteAudio")),t.userMuteAudio=!1,n(null,e=!t.peerMuteAudio&&t._unmuteAudio()),e},t.muteAudio=function(){var e=h.report.reportApiInvoke(t.sid,{name:"Stream.muteAudio",options:arguments,tag:"tracer"});t.userMuteAudio&&c.default.warning("[".concat(t.streamId,"] User already muteAudio")),t.userMuteAudio=!0;var n=t._muteAudio();return e(null,n),n},t.unmuteVideo=function(){var e,n=h.report.reportApiInvoke(t.sid,{name:"Stream.unmuteVideo",options:arguments,tag:"tracer"});return t.userMuteVideo||c.default.warning("[".concat(t.streamId,"] User already unmuteVideo")),t.userMuteVideo=!1,t.lowStream&&(t.lowStream.userMuteVideo=!1),n(null,e=!t.peerMuteVideo&&t._unmuteVideo()),e},t.muteVideo=function(){var e=h.report.reportApiInvoke(t.sid,{name:"Stream.muteVideo",options:arguments,tag:"tracer"});t.userMuteVideo&&c.default.warning("[".concat(t.streamId,"] User already muteVideo")),t.userMuteVideo=!0,t.lowStream&&(t.lowStream.userMuteVideo=!0);var n=t._muteVideo();return e(null,n),n},t._unmuteAudio=function(){return c.default.debug("[".concat(t.streamId,"] Unmuted audio stream with id "),t.streamId),t._flushAudioMixingMuteStatus(!1),!(!t.hasAudio()||!t.initialized||void 0===t.stream||!0===t.stream.getAudioTracks()[0].enabled)&&(t._onAudioUnmute&&t._onAudioUnmute(),t.pc&&(t.pc.isAudioMute=!1),t.stream.getAudioTracks()[0].enabled=!0,!0)},t._isAudioMuted=function(){if(t.stream&&t.hasAudio()){var e=t.stream.getAudioTracks();return e.length>0&&!e[0].enabled}return!1},t._isVideoMuted=function(){if(t.stream&&t.hasVideo()){var e=t.stream.getVideoTracks();return e.length>0&&!e[0].enabled}return!1},t._muteAudio=function(){return c.default.debug("[".concat(t.streamId,"] Muted audio stream with id "),t.streamId),t._flushAudioMixingMuteStatus(!0),!!(t.hasAudio()&&t.initialized&&void 0!==t.stream&&t.stream.getAudioTracks()[0].enabled)&&(t._onAudioMute&&t._onAudioMute(),t.pc&&(t.pc.isAudioMute=!0),t.stream.getAudioTracks()[0].enabled=!1,t.sid&&h.report.audioSendingStopped(t.sid,{succ:!0,reason:"muteAudio"}),!0)},t._unmuteVideo=function(){return c.default.debug("[".concat(t.streamId,"] Unmuted video stream with id"),t.streamId),!(!t.initialized||void 0===t.stream||!t.stream.getVideoTracks().length||!0===t.stream.getVideoTracks()[0].enabled)&&(t._onVideoUnmute&&t._onVideoUnmute(),t.pc&&(t.pc.isVideoMute=!1),t.stream.getVideoTracks()[0].enabled=!0,t.lowStream&&t.lowStream._unmuteVideo(),!0)},t._muteVideo=function(){return c.default.debug("[".concat(t.streamId,"] Muted video stream with id"),t.streamId),!!(t.initialized&&void 0!==t.stream&&t.stream.getVideoTracks().length&&t.stream.getVideoTracks()[0].enabled)&&(t._onVideoMute&&t._onVideoMute(),t.pc&&(t.pc.isVideoMute=!0),t.stream.getVideoTracks()[0].enabled=!1,t.lowStream&&t.lowStream._muteVideo(),t.sid&&h.report.videoSendingStopped(t.sid,{succ:!0,reason:"muteVideo"}),!0)},t.addTrack=function(r){if(t.audio&&"audio"===r.kind)c.default.warning("already added audio track");else if(t.video&&"video"===r.kind)c.default.warning("already added video track");else{var i=h.report.reportApiInvoke(t.sid,{name:"Stream.addTrack",options:arguments,tag:"tracer"});if(t.pc&&t.pc.addTrack(r,t.stream),"audio"==r.kind){t._cleanupAudioMixing();var o=new MediaStream;t.userMuteAudio&&(r.enabled=!1),o.addTrack(r);var s=t.stream.getVideoTracks()[0];s&&o.addTrack(s),t.audio=!0,e.audio=!0,t.stream=o,t.audioLevelHelper=null,t.player&&t.player.video&&(t.player.video.srcObject=t.stream)}else t.userMuteVideo&&(r.enabled=!1),t.stream.addTrack(r),t.video=!0,e.video=!0;r.onended||(r.onended=n),i()}},t.removeTrack=function(n){if(n)if(t.audio||"audio"!==n.kind)if(t.video||"video"!==n.kind){var r=h.report.reportApiInvoke(t.sid,{name:"Stream.removeTrack",options:arguments,tag:"tracer"});t.pc&&t.pc.removeTrack(n,t.stream),t.stream.removeTrack(n),t._cleanupAudioMixing(),"audio"===n.kind?(t.audio=!1,e.audio=!1):(t.video=!1,e.video=!1),t.audioLevelHelper=null,"live"==n.readyState&&(n.stop(),c.default.debug("[".concat(t.streamId,"] Track ").concat(n.kind," Stopped"))),r()}else c.default.warning("already removed video track");else c.default.warning("already removed audio track");else c.default.warning("track doesn't exist.")},t.setAudioOutput=function(e,n,r){var i=h.report.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return r&&r(e);n&&n(t)},name:"Stream.setAudioOutput",options:arguments,tag:"tracer"});return Object(_.isValidString)(e,1,255)?(t.audioOutput=e,t.player?void t.player.setAudioOutput(e,(function(){return i()}),i):i()):(c.default.error("[".concat(t.streamId,"] setAudioOutput Invalid Parameter"),e),i(d.default.INVALID_PARAMETER))},t.play=function(e,n,r){"function"==typeof n&&(r=n,n=null),c.default.debug("[".concat(t.streamId,"] play()."),e,n);var i=h.report.reportApiInvoke(t.sid,{name:"Stream.play",options:arguments,tag:"tracer",callback:r});if(Object(_.checkValidString)(e,"elementID"),Object(_.isEmpty)(n)||(Object(_.isEmpty)(n.fit)||Object(_.checkValidEnum)(n.fit,"fit",["cover","contain"]),Object(_.isEmpty)(n.muted)||Object(_.checkValidBoolean)(n.muted,"muted")),t.player)c.default.warning("[".concat(t.streamId,"] Stream.play(): Stream is already playing. Fallback to resume stream")),t.resume().then((function(){i(null)})).catch(i);else{t.elementID=e,t.playOptions=n,!t.local||t.video||t.screen?(t.player=new f({id:t.getId(),stream:t,elementID:e,options:n}),t.local&&S.a.applyEffectInPlayer(t)):t.hasAudio()&&(t.player=new f({id:t.getId(),stream:t,elementID:e,options:n}));var o={video:null,audio:null};t.on("player-status-change",(function e(n){if(o[n.mediaType]=n,o.video&&o.audio)if(t.removeEventListener("player-status-change",e),o.video.isErrorState||o.audio.isErrorState){var r=o.video.isErrorState?o.video:o.audio;i({isErrorState:!0,status:r.status,reason:r.reason,video:o.video,audio:o.audio})}else"aborted"===o.video.status&&"aborted"===o.audio.status?i({status:"aborted",reason:"stop",video:o.video,audio:o.audio}):i(null)})),t.audioOutput&&t.player.setAudioOutput(t.audioOutput),void 0!==t.audioLevel&&t.player.setAudioVolume(t.audioLevel),t._flushAudioMixingMuteStatus(!1)}},t.stop=function(){var e=h.report.reportApiInvoke(t.sid,{name:"Stream.stop",options:arguments,tag:"tracer"});c.default.debug("[".concat(t.streamId,"] Stop stream player with id "),t.streamId),t.player?(S.a.removeEffectFromLocalPlayer(t),t.player.destroy(),delete t.player):c.default.error("[".concat(t.streamId,"] Stream.stop(): Stream is not playing")),t._flushAudioMixingMuteStatus(!0),e()},t.isPlaying=function(){return!!t.player},t.isPaused=function(){return!!t.player&&(!!(t.player.video&&t.player.video.paused&&t.player.mediaElemExists(t.player.video))||!!(t.player.audio&&t.player.audio.paused&&t.player.mediaElemExists(t.player.audio)))},t.resume=function(){var e,n;return t.player?(t.player.video&&t.player.video.play&&(e=t.player.video.play()),e=e||Promise.resolve(),t.player.audio&&t.player.audio.play&&(n=t.player.audio.play()),n=n||Promise.resolve(),Promise.all([e,n])):Promise.reject("NO_PLAYER_FOUND")},t.getVideoTrack=function(){var e=h.report.reportApiInvoke(t.sid,{name:"Stream.getVideoTrack",options:arguments,tag:"tracer"});if(t.stream&&t.stream.getVideoTracks){var n=t.stream.getVideoTracks()[0];if(n)return c.default.info("[".concat(t.streamId,"] getVideoTrack"),n),e(),n}c.default.info("[".concat(t.streamId,"] getVideoTrack None")),e(null,"getVideoTrack None")},t.getAudioTrack=function(){var e=h.report.reportApiInvoke(t.sid,{name:"Stream.getAudioTrack",options:arguments,tag:"tracer"});if(t.stream&&t.stream.getAudioTracks){var n=t.stream.getAudioTracks()[0];if(n)return c.default.info("[".concat(t.streamId,"] getAudioTracks"),n),e(),n}c.default.info("[".concat(t.streamId,"] getAudioTracks None")),e(null,"getAudioTracks None")},t._hasVideoTracks=function(){return!!(t.stream&&t.stream.getVideoTracks&&t.stream.getVideoTracks()[0])},t._hasAudioTracks=function(){return!!(t.stream&&t.stream.getAudioTracks&&t.stream.getAudioTracks()[0])},t._replaceMediaStreamTrack=function(e,n,r){if(t.stream){if("video"==e.kind){if(o=t.stream.getVideoTracks()[0])return t.userMuteVideo&&(e.enabled=!1),t.stream.removeTrack(o),t.stream.addTrack(e),c.default.debug("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(e.kind," SUCCESS")),"live"==o.readyState&&(o.stop(),c.default.debug("[".concat(t.streamId,"] Track ").concat(o.kind," Stopped"))),n&&n();var i="MEDIASTREAM_TRACK_NOT_FOUND";return c.default.error("[".concat(t.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(e.kind)),r(i)}if("audio"==e.kind){var o;if(o=t.stream.getAudioTracks()[0]){t.userMuteAudio&&(e.enabled=!1);var s=new MediaStream;s.addTrack(e);var a=t.stream&&t.stream.getVideoTracks()[0];return a&&s.addTrack(a),t.stream=s,t.audioLevelHelper=null,t.player&&t.player.video&&(t.player.video.srcObject=t.stream),c.default.debug("[".concat(t.streamId,"] _replaceMediaStreamTrack SUCCESS")),"live"==o.readyState&&(o.stop(),c.default.debug("[".concat(t.streamId,"] Track ").concat(o.kind," Stopped"))),n&&n()}return i="MEDIASTREAM_TRACK_NOT_FOUND",c.default.error("[".concat(t.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(e.kind)),r(i)}return i="INVALID_TRACK_TYPE",c.default.error("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(i," ").concat(e.kind)),r&&r(i)}return i="NO_STREAM_FOUND",c.default.error("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(i)),r&&r(i)},t.replaceTrack=function(e,r,i){var o=h.report.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return i&&i(e);r&&r(t)},name:"Stream.replaceTrack",options:arguments,tag:"tracer"});return e&&e.kind?(t._cleanupAudioMixing(),e.onended||(e.onended=n),t.pc&&t.pc.hasSender&&t.pc.hasSender(e.kind)?void t.pc.replaceTrack(e,(function(){return c.default.debug("[".concat(t.streamId,"] PeerConnection.replaceTrack ").concat(e.kind," SUCCESS")),t._replaceMediaStreamTrack(e,(function(e){return o(null,e)}),o)}),(function(n){return c.default.error("[".concat(t.streamId,"] PeerConnection.replaceTrack ").concat(e.kind," Failed ").concat(n)),o(n)})):t._replaceMediaStreamTrack(e,(function(e){return o(null,e)}),o)):o("INVALID_TRACK")},t.setAudioVolume=function(e){var n=h.report.reportApiInvoke(t.sid,{name:"Stream.setAudioVolume",options:arguments,tag:"tracer"});Object(_.checkValidNumber)(e,"level",0,100),t.audioLevel=e,t.player&&t.player.setAudioVolume(e),n()},t.getStats=function(e,n,r){var s=[];s.push(t._getPCStats(r)),s.push(new Promise((function(e){var n={};t.pc&&t.pc.isSubscriber?null!==window.navigator.userAgent.match("Firefox")&&(Object(y.b)(n,"videoReceiveResolutionHeight",t.videoHeight),Object(y.b)(n,"videoReceiveResolutionWidth",t.videoWidth)):t.pc&&!t.pc.isSubscriber&&((Object(o.isSafari)()||Object(o.isFireFox)())&&(Object(y.b)(n,"videoSendResolutionHeight",t.videoHeight),Object(y.b)(n,"videoSendResolutionWidth",t.videoWidth)),(Object(o.isSafari)()||Object(o.isFireFox)())&&t.uplinkStats&&Object(y.b)(n,"videoSendPacketsLost",t.uplinkStats.uplink_cumulative_lost)),e(n)}))),s.push(new Promise((function(e){var n={};return t.traffic_stats&&t.pc&&t.pc.isSubscriber?(Object(y.b)(n,"accessDelay",t.traffic_stats.access_delay),Object(y.b)(n,"endToEndDelay",t.traffic_stats.e2e_delay),Object(y.b)(n,"videoReceiveDelay",t.traffic_stats.video_delay),Object(y.b)(n,"audioReceiveDelay",t.traffic_stats.audio_delay)):t.traffic_stats&&t.pc&&!t.pc.isSubscriber&&Object(y.b)(n,"accessDelay",t.traffic_stats.access_delay),e(n)}))),Promise.all(s).then((function(n){for(var r={},o=n.length-1;o>=0;o--){var s=n[o];i()(r,s)}e&&setTimeout(e.bind(t,r),0)})).catch((function(e){n&&setTimeout(n.bind(t,e),0)}))},t._getPCStats=function(e){return new Promise((function(n,r){if(!t.pc||"established"!==t.pc.state||!t.pc.getStats)return r("PEER_CONNECTION_NOT_ESTABLISHED");t.pc.getStats((function(e){if(!t.pc||"established"!==t.pc.state||!t.pc.getStats)return r("PEER_CONNECTION_STATE_CHANGE");var i=t.pc.isSubscriber?Object(y.c)(e):Object(y.a)(e);return n(i)}),e)})).then((function(e){return t.pc.isSubscriber?(Object(o.isFireFox)()||Object(o.isSafari)())&&(e.videoReceiveResolutionHeight&&"0"!==e.videoReceiveResolutionHeight||e.videoReceiveResolutionWidth&&"0"!==e.videoReceiveResolutionWidth||(Object(y.b)(e,"videoReceiveResolutionHeight",t.videoHeight),Object(y.b)(e,"videoReceiveResolutionWidth",t.videoWidth))):((Object(o.isSafari)()||Object(o.isFireFox)())&&(e.videoSendResolutionHeight&&"0"!==e.videoSendResolutionHeight||e.videoSendResolutionWidth&&"0"!==e.videoSendResolutionWidth||(Object(y.b)(e,"videoSendResolutionHeight",t.videoHeight),Object(y.b)(e,"videoSendResolutionWidth",t.videoWidth))),(Object(o.isSafari)()||Object(o.isFireFox)())&&t.uplinkStats&&Object(y.b)(e,"videoSendPacketsLost",t.uplinkStats.uplink_cumulative_lost)),Promise.resolve(e)}))},t.getAudioLevel=function(){if(t.audioLevelHelper)return t.audioLevelHelper.getAudioLevel();if(t.stream){if(0!==t.stream.getAudioTracks().length)return t.audioLevelHelper=new g.audioLevelHelper(t.stream),t.audioLevelHelper.getAudioLevel();c.default.warning("[".concat(t.streamId,"] can't get audioLevel beacuse no audio trace in stream"))}else c.default.warning("[".concat(t.streamId,"] can't get audioLevel beacuse no stream exist"))},t.setVideoProfile("480p_1"),t._switchVideoDevice=function(e,n,r){if(e===t.cameraId)return n&&n();var o={video:i()({},t.videoConstraint,{deviceId:{exact:e}}),audio:!1};c.default.debug("[".concat(t.streamId,"] ").concat(o)),Object(m.b)(o,(function(i){try{var o=function(){t.isPlaying()&&(t.stop(),t.elementID&&t.play(t.elementID,t.playOptions)),t.cameraId=e,t.videoConstraint.deviceId={exact:e},t.userMuteVideo&&(t.stream.getVideoTracks()[0].enabled=!1),S.a.restoreVideoEffect(t).then((function(){n&&n()}))};S.a.disableVideoEffect(t).then((function(){var e=!1;window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack&&(e=!0),e?t.replaceTrack(i.getVideoTracks()[0],o,r):(t.removeTrack(t.stream.getVideoTracks()[0]),t.addTrack(i.getVideoTracks()[0]),o())}))}catch(e){return r&&r(e)}}),(function(e){return r&&r(e)}))},t._switchAudioDevice=function(e,n,r){if(e===t.microphoneId)return n&&n();var o={video:!1,audio:i()({},t.audioConstraint,{deviceId:{exact:e}})};c.default.debug("[".concat(t.streamId,"] "),o);var s=t.stream.getAudioTracks()[0];s&&s.stop(),Object(m.b)(o,(function(i){var o=function(){t._cleanupAudioMixing(),t.userMuteAudio&&(t.stream.getAudioTracks()[0].enabled=!1),t.isPlaying()&&(t.stop(),t.elementID&&t.play(t.elementID,t.playOptions)),t.microphoneId=e,t.audioConstraint.deviceId={exact:e},n&&n()};try{var s=!1;window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack&&(s=!0),s?t.replaceTrack(i.getAudioTracks()[0],o,r):(t.removeTrack(t.stream.getAudioTracks()[0]),t.addTrack(i.getAudioTracks()[0]),o())}catch(e){return r&&r(e)}}),(function(e){return r&&r(e)}))},t.switchDevice=function(e,n,r,i){var o=h.report.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return i&&i(e);r&&r(t)},name:"Stream.switchDevice",options:arguments,tag:"tracer"});Object(_.checkValidString)(n,"deviceId");var s=function(){return t.inSwitchDevice=!1,o()},a=function(e){t.inSwitchDevice=!1,c.default.error("[".concat(t.streamId,"] "),e),o(e)};if(t.inSwitchDevice)return o("Device switch is in process.");if(t.inSwitchDevice=!0,!t.local)return a("Only the local stream can switch the device.");if(t.screen&&"video"===e)return a("The device cannot be switched during screen-sharing.");if(!t.video&&"video"===e)return a("Video track not exist.");if(!t.audio&&"audio"===e)return a("Audio track not exist.");if(t.videoSource||t.audioSource)return a("The device cannot be switched when using videoSource or audioSource.");var l=!1;for(var d in t.audioMixing.sounds)if(t.audioMixing.sounds[d].state!==t.audioMixing.states.IDLE){l=!0;break}if(t.audioMixing.audioContextInited&&l)return a("The device cannot be switched when using audio Mixing.");v.a.getDeviceById(n,(function(){if("video"===e)t._switchVideoDevice(n,s,a);else{if("audio"!==e)return a("Invalid type.");t._switchAudioDevice(n,s,a)}}),(function(){return a("The device does not exist.")}))},t},C=function(e){var t=h.report.reportApiInvoke(null,{name:"createStream",options:arguments,tag:"tracer",getStates:function(){return{audioTrackEnable:e&&e.audioSource?e.audioSource.enabled:null,videoTrackEnable:e&&e.videoSource?e.videoSource.enabled:null}}});Object(_.checkValidObject)(e,"StreamSpec");var n=e.streamID,r=e.audio,i=e.video,o=e.screen,s=e.screenAudio,a=(e.audioSource,e.videoSource,e.cameraId),l=e.facingMode,d=e.microphoneId,u=e.mirror,p=e.extensionId,f=e.mediaSource,m=e.audioProcessing,y=e.optimizationMode;if(!Object(_.isEmpty)(n)&&!Object(g.is32Uint)(n)&&!Object(_.isValidString)(n,1,255))throw new Error("[String streamID] Length of the string: [1,255]. ASCII characters only. [Number streamID] The value range is Uint32");if(Object(_.checkValidBoolean)(r,"audio"),Object(_.checkValidBoolean)(i,"video"),Object(_.isEmpty)(o)||Object(_.checkValidBoolean)(o,"screen"),Object(_.isEmpty)(s)||Object(_.checkValidBoolean)(s,"screenAudio"),Object(_.isEmpty)(a)||Object(_.checkValidString)(a,"cameraId",0,255,!1),Object(_.isEmpty)(l)||Object(_.checkValidEnum)(l,"facingMode",["user","environment","left","right"]),Object(_.isEmpty)(d)||Object(_.checkValidString)(d,"microphoneId",0,255,!1),Object(_.isEmpty)(p)||Object(_.checkValidString)(p,"extensionId"),Object(_.isEmpty)(f)||Object(_.checkValidEnum)(f,"mediaSource",["screen","application","window"]),Object(_.isEmpty)(u)||Object(_.checkValidBoolean)(u,"mirror"),!Object(_.isEmpty)(m)){var v=m.AGC,E=m.AEC,S=m.ANS;Object(_.isEmpty)(v)||Object(_.checkValidBoolean)(v,"AGC"),Object(_.isEmpty)(E)||Object(_.checkValidBoolean)(E,"AEC"),Object(_.isEmpty)(S)||Object(_.checkValidBoolean)(S,"ANS")}Object(_.isEmpty)(y)||Object(_.checkValidEnum)(y,"optimizationMode",["detail","motion"]),c.default.debug("Create stream"),!0===s&&!0===r&&c.default.warning("Do not set both 'screenAudio' and 'audio' to true at the same time"),e.screen&&!y&&(e.optimizationMode="detail");var T=N(e);return t(),T}},function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return T}));var r=n(4),i=n(7),o=n.n(i),s=n(12),a=n.n(s),c=n(17),l=n.n(c),d=n(0),u=n(15),h=n(2);function p(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=n(50),v=n.n(y),_=n(26),E=(n(5),103),S=function(e){var t={};if(t.clientId=e.clientId,e.session_id=E+=1,"undefined"==typeof window||!window.navigator)throw d.default.error("["+t.streamId+"]["+t.clientId+"]Publish/subscribe video/audio streams not supported yet"),new Error("NON_BROWSER_ENV_DETECTED");return null!==window.navigator.userAgent.match("Firefox")?(t.browser="mozilla",t=function(e){var t={},n=(mozRTCPeerConnection,mozRTCSessionDescription),r=!1;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[]},e.iceServers instanceof Array?e.iceServers.map((function(e){0===e.url.indexOf("stun:")&&t.pc_config.iceServers.push({url:e.url})})):(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map((function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})})):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServers&&(e.turnServers instanceof Array?e.turnServers.map((function(e){e.udpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:(e.useTurns?"turns:":"turn:")+e.url+":"+e.udpport+"?transport=udp"}),"string"==typeof e.tcpport&&""!==e.tcpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:(e.useTurns?"turns:":"turn:")+e.url+":"+e.tcpport+"?transport=tcp"}),!0===e.forceturn&&(t.pc_config.iceTransportPolicy="relay")})):d.default.error("[".concat(t.clientId,"] turnServers is not a array")))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints={offerToReceiveAudio:e.audio,offerToReceiveVideo:e.video,mozDontOfferDataChannel:!0},t.roapSessionId=103,t.peerConnection=new u.RTCPeerConnection(t.pc_config),t.iceCandidateTimer=setTimeout((function(){t.iceCandidateTimer=null,d.default.debug("[".concat(t.clientId,"]Candidates collected: ").concat(t.iceCandidateCount)),t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),Object(h.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var n,r,i,o;r=(n=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),i=n.match(/a=candidate:.+typ\shost.+\r\n/),o=n.match(/a=candidate:.+typ\srelay.+\r\n/),null===r&&null===i&&null===o||void 0!==t.ice||!t.iceCandidateTimer||(clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1},t.checkMLineReverseInSDP=function(e){return!(!~e.indexOf("m=audio")||!~e.indexOf("m=video"))&&e.indexOf("m=audio")>e.indexOf("m=video")},t.reverseMLineInSDP=function(e){var t=e.split("m=audio"),n=t[1].split("m=video"),r="m=video"+n[1],i="m=audio"+n[0];return t[0]+r+i},t.processSignalingMessage=function(r){var i,o=JSON.parse(r);t.incomingMessage=o,"new"===t.state?"OFFER"===o.messageType?(o.sdp=y(o.sdp),i={sdp:o.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new n(i),(function(){d.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){d.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)})),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+o.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===o.messageType?(o.sdp=y(o.sdp),o.sdp=o.sdp.replace(/ generation 0/g,""),o.sdp=o.sdp.replace(/ udp /g," UDP "),-1!==o.sdp.indexOf("a=group:BUNDLE")?(o.sdp=o.sdp.replace(/a=group:BUNDLE audio video/,"a=group:BUNDLE sdparta_0 sdparta_1"),o.sdp=o.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),o.sdp=o.sdp.replace(/a=mid:video/,"a=mid:sdparta_1")):(o.sdp=o.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),o.sdp=o.sdp.replace(/a=mid:video/,"a=mid:sdparta_0")),i={sdp:o.sdp,type:"answer"},e.screen&&"detail"===e.optimizationMode&&(d.default.debug("[".concat(t.client,"] remove screen share abs ext")),o.sdp=v(i.sdp)),t.peerConnection.setRemoteDescription(new n(i),(function(){d.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){d.default.info("["+t.clientId+"]setRemoteDescription failed: "+e)})),t.state="established"):"pr-answer"===o.messageType?(i={sdp:o.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new n(i),(function(){d.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){d.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)}))):"offer"===o.messageType?t.error("Not written yet"):t.error("Illegal message for this state: "+o.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===o.messageType?(i={sdp:o.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new n(i),(function(){d.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){d.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)})),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+o.messageType+" in state "+t.state))},t.setRtpSenderParameters=function(){var e=l()(a.a.mark((function e(n){var r,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.peerConnection.getSenders(),i=r.find((function(e){return"video"===e.track.kind}))){e.next=4;break}return e.abrupt("return");case 4:return(o=i.getParameters()).degradationPreference=n,e.prev=6,d.default.debug("[".concat(t.clientId,"] setParameters"),o),e.next=10,i.setParameters(o);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),d.default.debug("[".concat(t.clientId,"] setParameters failed, ignore"));case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();var i={id:"",type:"",mediaType:"opus",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},o={id:"",type:"",mediaType:"",googCodecName:e.codec?e.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},s={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},c={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesDecoded:"0"},p=0,f=0,g=0;t.getVideoRelatedStats=function(e){t.peerConnection.getStats().then((function(n){var r,i=m(n.values());try{for(i.s();!(r=i.n()).done;){var o=r.value;if(t.isSubscriber){if(("inbound-rtp"===o.type||"inboundrtp"===o.type)&&"video"===o.mediaType){if(!t.lastReport)return void(t.lastReport=o);e&&e({browser:"firefox",mediaType:"video",peerId:t.uid,isVideoMute:t.isVideoMute,frameRateReceived:Math.round(o.framerateMean)+"",frameRateDecoded:o.framesDecoded-t.lastReport.framesDecoded+"",bytesReceived:o.bytesReceived+"",packetsReceived:o.packetsReceived+"",packetsLost:o.packetsLost+""}),t.lastReport=o}}else if(("outbound-rtp"===o.type||"outboundrtp"===o.type)&&"video"===o.mediaType){if(!t.lastReport)return void(t.lastReport=o);e&&e({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:Math.round(o.framerateMean)+"",frameRateSent:o.framesEncoded-t.lastReport.framesEncoded+""}),t.lastReport=o}}}catch(e){i.e(e)}finally{i.f()}}))},t.getAudioRelatedStats=function(e){t.peerConnection.getStats().then((function(n){var r,i=m(n.values());try{for(i.s();!(r=i.n()).done;){var o=r.value;t.isSubscriber&&("inbound-rtp"!==o.type&&"inboundrtp"!==o.type||"audio"!==o.mediaType||e&&e({browser:"firefox",mediaType:"audio",peerId:t.uid,isAudioMute:t.isAudioMute,frameDropped:o.packetsLost+"",frameReceived:o.packetsReceived+"",googJitterReceived:o.jitter+"",bytesReceived:o.bytesReceived+"",packetsReceived:o.packetsReceived+"",packetsLost:o.packetsLost+""}))}}catch(e){i.e(e)}finally{i.f()}}))},t.getStatsRate=function(e){t.getStats((function(t){t.forEach((function(e){})),e(t)}))},t.getStats=function(e,n){n=(n=n||500)>500?500:n,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<n?e&&e(t.filterStatsCache,t.originStatsCache):this._getStats((function(n,r){t.filterStatsCache=n,t.originStatsCache=r,t.lastTimeGetStats=Date.now(),e&&e(n,r)}))},t._getStats=function(n){t.peerConnection.getStats().then((function(r){var a,l=[],d=m(r.values());try{for(d.s();!(a=d.n()).done;){var u=a.value;l.push(u),"outbound-rtp"!==u.type&&"outboundrtp"!==u.type||"video"!==u.mediaType||-1!==u.id.indexOf("rtcp")||(o.id=u.id,o.type=u.type,o.mediaType=u.mediaType,o.bytesSent=u.bytesSent?u.bytesSent+"":"0",o.packetsSent=u.packetsSent?u.packetsSent+"":"0",o.googPlisReceived=u.pliCount?u.pliCount+"":"0",o.googNacksReceived=u.nackCount?u.nackCount+"":"0",o.googFirsReceived=u.firCount?u.firCount+"":"0",o.googFrameRateSent=u.framerateMean?Math.round(u.framerateMean)+"":"0"),"outbound-rtp"!==u.type&&"outboundrtp"!==u.type||"audio"!==u.mediaType||-1!==u.id.indexOf("rtcp")||(i.id=u.id,i.type=u.type,i.mediaType=u.mediaType,i.bytesSent=u.bytesSent?u.bytesSent+"":"0",i.packetsSent=u.packetsSent?u.packetsSent+"":"0",e.agoraStream.local&&(i.audioInputLevel=Math.round(32767*e.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==u.type&&"inboundrtp"!==u.type||"audio"!==u.mediaType||u.isRemote||-1!==u.id.indexOf("rtcp")||(s.id=u.id,s.type=u.type,s.mediaType=u.mediaType,s.bytesReceived=u.bytesReceived?u.bytesReceived+"":"0",s.packetsLost=u.packetsLost?u.packetsLost+"":"0",s.packetsReceived=u.packetsReceived?u.packetsReceived+"":"0",s.googJitterReceived=u.jitter?u.jitter+"":"0",e.agoraStream.local||(s.audioOutputLevel=Math.round(32767*e.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==u.type&&"inboundrtp"!==u.type||"video"!==u.mediaType||u.isRemote||-1!==u.id.indexOf("rtcp")||(c.id=u.id,c.type=u.type,c.mediaType=u.mediaType,c.bytesReceived=u.bytesReceived?u.bytesReceived+"":"0",c.googFrameRateReceived=u.framerateMean?Math.round(u.framerateMean)+"":"0",c.googFramesDecoded=u.framesDecoded?u.framesDecoded+"":"0",Date.now()-g>=1e3?(c.googFrameRateDecoded=(u.framesDecoded-p)/((Date.now()-g)/1e3),c.googFrameRateDecoded=Math.round(Math.max(0,c.googFrameRateDecoded)),g=Date.now(),f=c.googFrameRateDecoded,p=u.framesDecoded,c.googFrameRateDecoded=c.googFrameRateDecoded.toString()):c.googFrameRateDecoded=f.toString(),c.packetsLost=u.packetsLost?u.packetsLost+"":"0",c.packetsReceived=u.packetsReceived?u.packetsReceived+"":"0",c.googJitterBufferMs=u.jitter?u.jitter+"":"0",c.googNacksSent=u.nackCount?u.nackCount+"":"0",c.googPlisSent=u.pliCount?u.pliCount+"":"0",c.googFirsSent=u.firCount?u.firCount+"":"0"),-1!==u.id.indexOf("outbound_rtcp_video")&&(o.packetsLost=u.packetsLost?u.packetsLost+"":"0")}}catch(e){d.e(e)}finally{d.f()}var h=[o,i,s,c];h.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),n(h,l)}),(function(e){d.default.error("["+t.clientId+"]"+e)}))},t.addStream=function(e){r=!0,t.peerConnection.addStream(e),t.markActionNeeded()},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater((function(){t.onstablestate()}))},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){if(t.actionNeeded){if("new"===t.state||"established"===t.state)r&&(t.mediaConstraints=void 0),t.peerConnection.createOffer((function(e){if(e.sdp=y(e.sdp),e.sdp=e.sdp.replace(/a=extmap:1 http:\/\/www.webrtc.org\/experiments\/rtp-hdrext\/abs-send-time/,"a=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"),e.sdp!==t.prevOffer)return t.peerConnection.setLocalDescription(e),t.state="preparing-offer",void t.markActionNeeded();d.default.debug("["+t.clientId+"]Not sending a new offer")}),(function(e){d.default.debug("["+t.clientId+"]Ups! create offer failed ",e)}),t.mediaConstraints);else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(e.isCloudProxy3&&e.onNoIceCandidate&&e.onNoIceCandidate(),d.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),Object(h.getParameter)("SHIM_CANDIDATE")?(d.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):d.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer((function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var n=new Date;d.default.debug("["+t.clientId+"]"+n.getTime()+": Starting ICE in responder"),t.iceStarted=!0}}),(function(){d.default.debug("["+t.clientId+"]Ups! Something went wrong")}));else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;var n=t.peerConnection.localDescription.sdp;t.sendMessage("ANSWER",n),t.state="established"}else t.debug("Dazed and confused in state "+t.state+", stopping here");t.actionNeeded=!1}},t.sendMessage=function(e,n){var r={};r.messageType=e,r.sdp=n,"OFFER"===e?(r.offererSessionId=t.sessionId,r.answererSessionId=t.otherSessionId,r.seq=t.sequenceNumber+=1,r.tiebreaker=Math.floor(429496723*Math.random()+1)):(r.offererSessionId=t.incomingMessage.offererSessionId,r.answererSessionId=t.sessionId,r.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(r))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var n=t.peerConnection.getSenders().find((function(t){return t.track.kind==e}));if(n)return n}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,n,r){var i=t._getSender(e.kind);if(!i)return r("NO_SENDER_FOUND");try{i.replaceTrack(e)}catch(e){return r&&r(e)}setTimeout((function(){return n&&n()}),50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){t.onaddstream&&t.onaddstream(e,"ontrack")},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)};var y=function(t){var n;if(e.video&&e.maxVideoBW&&(null==(n=t.match(/m=video.*\r\n/))&&(n=t.match(/m=video.*\n/)),n&&n.length>0)){var r=n[0]+"b=TIAS:"+1e3*e.maxVideoBW+"\r\n";t=t.replace(n[0],r)}return e.audio&&e.maxAudioBW&&(null==(n=t.match(/m=audio.*\r\n/))&&(n=t.match(/m=audio.*\n/)),n&&n.length>0)&&(r=n[0]+"b=TIAS:"+1e3*e.maxAudioBW+"\r\n",t=t.replace(n[0],r)),t},v=function(e){return(e=e.replace(/a=.*abs-send-time\r\n/g,"")).replace(/a=.*goog-remb\r\n/g,"")};return t.onaddstream=null,t.onremovestream=null,t.state="new",t.markActionNeeded(),t}(e)):"iOS"===r.getBrowserOS()||r.isSafari()?(d.default.debug("["+t.streamId+"]["+t.clientId+"]Safari"),(t=function(e){var t={},n=u.RTCPeerConnection;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[],bundlePolicy:"max-bundle"},t.con={optional:[{DtlsSrtpKeyAgreement:!0}]},e.iceServers instanceof Array?t.pc_config.iceServers=e.iceServers:(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map((function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})})):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServers&&(e.turnServers instanceof Array?e.turnServers.map((function(e){e.udpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:(e.useTurns?"turns:":"turn:")+e.url+":"+e.udpport+"?transport=udp"}),"string"==typeof e.tcpport&&""!==e.tcpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:(e.useTurns?"turns:":"turn:")+e.url+":"+e.tcpport+"?transport=tcp"}),!0===e.forceturn&&(t.pc_config.iceTransportPolicy="relay")})):d.default.error("[".concat(t.clientId,"] turnServers is not a array")))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints={mandatory:{OfferToReceiveVideo:e.video,OfferToReceiveAudio:e.audio}},t.roapSessionId=103;try{t.pc_config.sdpSemantics=Object(h.getParameter)("PLAN"),t.peerConnection=new n(t.pc_config,t.con)}catch(e){delete t.pc_config.sdpSemantics,t.peerConnection=new n(t.pc_config,t.con)}t.iceCandidateTimer=setTimeout((function(){t.iceCandidateTimer=null,t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),Object(h.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var n,r,i,o;r=(n=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),i=n.match(/a=candidate:.+typ\shost.+\r\n/),o=n.match(/a=candidate:.+typ\srelay.+\r\n/),0===t.iceCandidateCount&&(t.timeout=setTimeout((function(){t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),1e3)),null===r&&null===i&&null===o||void 0!==t.ice||!t.iceCandidateTimer||(clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1};var r=function(t){return e.screen&&(t=t.replace("a=x-google-flag:conference\r\n","")),t},i=function(n){var r,i;return(r=n.match(/m=video.*\r\n/))&&e.minVideoBW&&e.maxVideoBW&&(i=r[0]+"b=AS:"+e.maxVideoBW+"\r\n",n=n.replace(r[0],i),d.default.debug("["+t.clientId+"]Set Video Bitrate - min:"+e.minVideoBW+" max:"+e.maxVideoBW)),(r=n.match(/m=audio.*\r\n/))&&e.maxAudioBW&&(i=r[0]+"b=AS:"+e.maxAudioBW+"\r\n",n=n.replace(r[0],i)),n};t.processSignalingMessage=function(n){var o,s=JSON.parse(n);t.incomingMessage=s,"new"===t.state?"OFFER"===s.messageType?(o={sdp:s.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(o)),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+s.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===s.messageType?((o={sdp:s.sdp,type:"answer"}).sdp=r(o.sdp),o.sdp=i(o.sdp),o.sdp=o.sdp.replace(/a=x-google-flag:conference\r\n/g,""),e.screen&&"detail"===e.optimizationMode&&(d.default.debug("[".concat(t.client,"] remove screen share abs ext")),o.sdp=o.sdp.replace(/a=.*abs-send-time\r\n/g,"").replace(/a=.*goog-remb\r\n/g,"")),t.peerConnection.setRemoteDescription(new RTCSessionDescription(o)),t.state="established"):"pr-answer"===s.messageType?(o={sdp:s.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(o))):"offer"===s.messageType?t.error("Not written yet"):t.error("Illegal message for this state: "+s.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===s.messageType?(o={sdp:s.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(o)),t.state="offer-received",t.markActionNeeded()):"ANSWER"===s.messageType?((o={sdp:s.sdp,type:"answer"}).sdp=r(o.sdp),o.sdp=i(o.sdp),t.peerConnection.setRemoteDescription(new RTCSessionDescription(o))):t.error("Illegal message for this state: "+s.messageType+" in state "+t.state))},t.setRtpSenderParameters=function(){var e=l()(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.degradation=n;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t._setRtpSenderParameters=function(){var e=l()(a.a.mark((function e(n){var r,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.peerConnection.getSenders(),i=r.find((function(e){return e&&e.track&&"video"===e.track.kind}))){e.next=4;break}return e.abrupt("return");case 4:return(o=i.getParameters()).degradationPreference=n,e.prev=6,d.default.debug("[".concat(t.clientId,"] setParameters"),o),e.next=10,i.setParameters(o);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),d.default.debug("[".concat(t.clientId,"] setParameters failed, ignore"));case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();var o={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},s={id:"",type:"",mediaType:"",googCodecName:e.codec?e.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},c={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},p={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"},f={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"},m=0,g=0,y=0;return t.isRemoteVideoStats=function(e){return!!(e.frameHeight&&e.frameWidth&&e.remoteSource)},t.getVideoRelatedStats=function(n){t.peerConnection.getStats().then((function(r){r.forEach((function(r){if(t.isSubscriber){var i={peerId:t.uid,mediaType:"video",isVideoMute:t.isVideoMute};if("track"===r.type&&(~r.id.indexOf("video")||~r.trackIdentifier.indexOf("v")||t.isRemoteVideoStats(r))){if(!t.lastReport)return void(t.lastReport=r);i.frameRateReceived=r.framesReceived-t.lastReport.framesReceived+"",i.frameRateDecoded=r.framesDecoded-t.lastReport.framesDecoded+"",t.lastReport=r}"inbound-rtp"===r.type&&~r.id.indexOf("Video")&&(i.bytesReceived=r.bytesReceived+"",i.packetsReceived=r.packetsReceived+"",i.packetsLost=r.packetsLost+""),n&&n(i)}else if("outbound-rtp"===r.type&&~r.id.indexOf("Video")){if(!t.lastReport)return void(t.lastReport=r);n&&n({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:e.maxFrameRate+"",frameRateSent:r.framesEncoded-t.lastReport.framesEncoded+""}),t.lastReport=r}}))}))},t.getAudioRelatedStats=function(e){t.peerConnection.getStats().then((function(n){n.forEach((function(n){t.isSubscriber&&"inbound-rtp"===n.type&&~n.id.indexOf("Audio")&&e&&e({peerId:t.uid,mediaType:"audio",isAudioMute:t.isAudioMute,frameDropped:n.packetsLost+"",frameReceived:n.packetsReceived+"",googJitterReceived:n.jitter+"",bytesReceived:n.bytesReceived+"",packetsReceived:n.packetsReceived+"",packetsLost:n.packetsLost+""})}))}))},t.getStatsRate=function(e){t.getStats((function(t){t.forEach((function(e){"outbound-rtp"===e.type&&"video"===e.mediaType&&e.googFramesEncoded&&(e.googFrameRateSent=Math.ceil((e.googFramesEncoded-m)/3).toString(),m=e.googFramesEncoded),"inbound-rtp"===e.type&&-1!=e.id.indexOf("55543")&&(e.googFrameRateReceived&&(e.googFrameRateReceived=Math.ceil((e.googFrameReceived-y)/3).toString(),y=e.googFrameReceived),e.googFrameRateDecoded&&(e.googFrameRateDecoded=Math.ceil((e.googFramesDecoded-g)/3).toString(),g=e.googFramesDecoded))})),e(t)}))},t.getStats=function(e,n){n=(n=n||500)>500?500:n,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<n?e&&e(t.filterStatsCache,t.originStatsCache):this._getStats((function(n,r){t.filterStatsCache=n,t.originStatsCache=r,t.lastTimeGetStats=Date.now(),e&&e(n,r)}))},t._getStats=function(n){var r=[];t.peerConnection.getStats().then((function(i){i.forEach((function(t){var n;r.push(t),"outbound-rtp"===t.type&&"audio"===t.mediaType&&(o.id=t.id,o.type=t.type,o.mediaType=t.mediaType,o.bytesSent=t.bytesSent?t.bytesSent+"":"0",o.packetsSent=t.packetsSent?t.packetsSent+"":"0",e.agoraStream.local&&(o.audioInputLevel=Math.round(32767*e.agoraStream.getAudioLevel()).toString())),"outbound-rtp"===t.type&&"video"===t.mediaType&&(s.id=t.id,s.type=t.type,s.mediaType=t.mediaType,s.bytesSent=t.bytesSent?t.bytesSent+"":"0",s.packetsSent=t.packetsSent?t.packetsSent+"":"0",s.googPlisReceived=t.pliCount?t.pliCount+"":"0",s.googNacksReceived=t.nackCount?t.nackCount+"":"0",s.googFirsReceived=t.firCount?t.firCount+"":"0",s.googFramesEncoded=t.framesEncoded?t.framesEncoded+"":"0",(n=i.get(t.trackId))&&(s.googFrameHeightSent=n.frameHeight&&n.frameHeight.toString(),s.googFrameWidthSent=n.frameWidth&&n.frameWidth.toString())),"inbound-rtp"!==t.type||-1==t.id.indexOf("44444")&&"audio"!==t.mediaType||(c.id=t.id,c.type=t.type,c.mediaType="audio",c.packetsReceived=t.packetsReceived?t.packetsReceived+"":"0",c.bytesReceived=t.bytesReceived?t.bytesReceived+"":"0",c.packetsLost=t.packetsLost?t.packetsLost+"":"0",c.packetsReceived=t.packetsReceived?t.packetsReceived+"":"0",c.googJitterReceived=t.jitter?t.jitter+"":"0",(n=i.get(t.trackId))&&(c.audioOutputLevel=n.audioLevel&&Math.round(32767*n.audioLevel).toString()),e.agoraStream.local||c.audioOutputLevel||(c.audioOutputLevel=Math.round(32767*e.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==t.type||-1==t.id.indexOf("55543")&&"video"!==t.mediaType||(p.id=t.id,p.type=t.type,p.mediaType="video",p.packetsReceived=t.packetsReceived?t.packetsReceived+"":"0",p.bytesReceived=t.bytesReceived?t.bytesReceived+"":"0",p.packetsLost=t.packetsLost?t.packetsLost+"":"0",p.googJitterBufferMs=t.jitter?t.jitter+"":"0",p.googNacksSent=t.nackCount?t.nackCount+"":"0",p.googPlisSent=t.pliCount?t.pliCount+"":"0",p.googFirsSent=t.firCount?t.firCount+"":"0",(n=i.get(t.trackId))&&(p.googFrameHeightReceived=n.frameHeight&&n.frameHeight.toString(),p.googFrameWidthReceived=n.frameWidth&&n.frameWidth.toString(),p.googFrameReceived=n.framesReceived&&n.framesReceived.toString(),p.googFramesDecoded=n.framesDecoded&&n.framesDecoded.toString())),"candidate-pair"===t.type&&(0==t.availableIncomingBitrate?f.googAvailableSendBandwidth=t.availableOutgoingBitrate+"":f.googAvailableReceiveBandwidth=t.availableIncomingBitrate+"")}));var a=[f,o,s,c,p];a.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),n(a,r)})).catch((function(e){d.default.error("["+t.clientId+"] ",e)}))},t.addTrack=function(e,n){t.peerConnection.addTrack(e,n)},t.removeTrack=function(e,n){var r=t.peerConnection.getSenders().find((function(t){return t.track==e}));r.replaceTrack(null),t.peerConnection.removeTrack(r)},t.addStream=function(e){window.navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")?e.getTracks().forEach((function(n){return t.peerConnection.addTrack(n,e)})):t.peerConnection.addStream(e),t.markActionNeeded()},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater((function(){t.onstablestate()}))},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){var n;if(t.actionNeeded){if("new"===t.state||"established"===t.state)e.isSubscriber&&(t.peerConnection.addTransceiver("audio",{direction:"recvonly"}),t.peerConnection.addTransceiver("video",{direction:"recvonly"})),t.peerConnection.createOffer(t.mediaConstraints).then((function(n){if(n.sdp=i(n.sdp),e.isSubscriber||(n.sdp=n.sdp.replace(/a=.*video-orientation\r\n/g,"")),n.sdp!==t.prevOffer)return t.peerConnection.setLocalDescription(n),t.state="preparing-offer",void t.markActionNeeded();d.default.debug("["+t.clientId+"]Not sending a new offer")})).catch((function(e){d.default.debug("["+t.clientId+"]peer connection create offer failed ",e)}));else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(d.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),e.isCloudProxy3&&e.onNoIceCandidate&&e.onNoIceCandidate(),Object(h.getParameter)("SHIM_CANDIDATE")?(d.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):d.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer((function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var n=new Date;d.default.debug("["+t.clientId+"]"+n.getTime()+": Starting ICE in responder"),t.iceStarted=!0}}),(function(e){d.default.debug("["+t.clientId+"]peer connection create answer failed ",e)}),t.mediaConstraints);else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;n=t.peerConnection.localDescription.sdp,t.sendMessage("ANSWER",n),t.state="established"}else t.debug("Dazed and confused in state "+t.state+", stopping here");t.actionNeeded=!1}},t.sendMessage=function(e,n){var r={};r.messageType=e,r.sdp=n,"OFFER"===e?(r.offererSessionId=t.sessionId,r.answererSessionId=t.otherSessionId,r.seq=t.sequenceNumber+=1,r.tiebreaker=Math.floor(429496723*Math.random()+1)):(r.offererSessionId=t.incomingMessage.offererSessionId,r.answererSessionId=t.sessionId,r.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(r))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var n=t.peerConnection.getSenders().find((function(t){return t.track.kind==e}));if(n)return n}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,n,r){var i=t._getSender(e.kind);if(!i)return r("NO_SENDER_FOUND");try{i.replaceTrack(e)}catch(e){return r&&r(e)}setTimeout((function(){return n&&n()}),50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){t.onaddstream&&t.onaddstream(e,"ontrack")},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date,t._setRtpSenderParameters(t.degradation)),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},t.renegotiate=function(){t.isSubscriber||(d.default.debug("[".concat(t.uid,"]"),"renegotiating"),void 0!==t.prevOffer&&t.peerConnection.createOffer().then((function(e){return e.sdp=e.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n"),e.sdp=r(e.sdp),e.sdp=i(e.sdp),t.peerConnection.setLocalDescription(e)})).then((function(){t.onnegotiationneeded&&t.onnegotiationneeded(t.peerConnection.localDescription.sdp)})).catch((function(e){d.default.error("createOffer error: ",e)})))},t.isSubscriber||(t.peerConnection.onnegotiationneeded=t.renegotiate),t.onaddstream=null,t.onremovestream=null,t.state="new",t.markActionNeeded(),t}(e)).browser="safari"):~window.navigator.userAgent.indexOf("Edge")?t=new v.a(e):(t=function(e){var t={},n=u.RTCPeerConnection;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[]};var i={id:"outbound_audio_ssrc_send",type:"ssrc",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},s={id:"outbound_video_ssrc_send",type:"ssrc",mediaType:"",googCodecName:e.codec?e.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},c={id:"inbound_audio_ssrc_recv",type:"ssrc",mediaType:"",googCodecName:"opus",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},f={id:"inbound_video_ssrc_recv",type:"ssrc",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesReceived:"0",googFramesDecoded:"0"},m={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"};t.con={optional:[{DtlsSrtpKeyAgreement:!0}]},e.iceServers instanceof Array?t.pc_config.iceServers=e.iceServers:(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map((function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})})):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServers&&(e.turnServers instanceof Array?e.turnServers.map((function(e){e.udpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:(e.useTurns?"turns:":"turn:")+e.url+":"+e.udpport+"?transport=udp"}),"string"==typeof e.tcpport&&""!==e.tcpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:(e.useTurns?"turns:":"turn:")+e.url+":"+e.tcpport+"?transport=tcp"}),!0===e.forceturn&&(t.pc_config.iceTransportPolicy="relay")})):d.default.error("[".concat(t.clientId,"] turnServers is not a array")))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints=r.isChromeKernel()&&r.getChromeKernelVersion()<103?{mandatory:{OfferToReceiveVideo:e.video,OfferToReceiveAudio:e.audio}}:{offerToReceiveVideo:e.video,offerToReceiveAudio:e.audio},t.roapSessionId=103;try{t.pc_config.sdpSemantics=Object(h.getParameter)("PLAN"),t.peerConnection=new n(t.pc_config,t.con)}catch(e){delete t.pc_config.sdpSemantics,t.peerConnection=new n(t.pc_config,t.con);var g=t.peerConnection.getConfiguration();g.sdpSemantics&&Object(h.setParameter)("PLAN",g.sdpSemantics)}t.iceCandidateTimer=setTimeout((function(){t.iceCandidateTimer=null,d.default.debug("[".concat(t.clientId,"]Candidates collected: ").concat(t.iceCandidateCount)),t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),Object(h.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var n,r,i,o;r=(n=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),i=n.match(/a=candidate:.+typ\shost.+\r\n/),o=n.match(/a=candidate:.+typ\srelay.+\r\n/),null===r&&null===i&&null===o||void 0!==t.ice||!t.iceCandidateTimer||(clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1};var y=function(e){return e.replace("a=x-google-flag:conference\r\n","")},v=function(n){var r,i;if((r=n.match(/m=video.*\r\n/))&&e.minVideoBW&&e.maxVideoBW){i=r[0]+"b=AS:"+e.maxVideoBW+"\r\n";var o=0,s=0;"h264"===e.codec?(o=n.search(/a=rtpmap:(\d+) H264\/90000\r\n/),s=n.search(/H264\/90000\r\n/)):"vp8"===e.codec?(o=n.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),s=n.search(/VP8\/90000\r\n/)):"vp9"===e.codec&&(o=n.search(/a=rtpmap:(\d+) VP9\/90000\r\n/),s=n.search(/VP9\/90000\r\n/)),-1!==o&&-1!==s&&s-o>10&&(i=i+"a=fmtp:"+n.slice(o+9,s-1)+" x-google-min-bitrate="+e.minVideoBW+"\r\n"),n=(n=(n=n.replace(r[0],i)).replace("a=fmtp:102 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f","a=fmtp:102 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f")).replace("a=fmtp:125 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f","a=fmtp:125 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f"),d.default.debug("["+t.clientId+"]Set Video Bitrate - min:"+e.minVideoBW+" max:"+e.maxVideoBW)}return(r=n.match(/m=audio.*\r\n/))&&e.maxAudioBW&&(i=r[0]+"b=AS:"+e.maxAudioBW+"\r\n",n=n.replace(r[0],i)),n};t.processSignalingMessage=function(n){var r,i=JSON.parse(n);t.incomingMessage=i,"new"===t.state?"OFFER"===i.messageType?(r={sdp:i.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).catch((function(e){})),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+i.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===i.messageType?((r={sdp:i.sdp,type:"answer"}).sdp=y(r.sdp),r.sdp=v(r.sdp),e.screen&&"detail"===e.optimizationMode&&(d.default.debug("[".concat(t.client,"] remove screen share abs ext")),r.sdp=r.sdp.replace(/a=.*abs-send-time\r\n/g,"").replace(/a=.*goog-remb\r\n/g,"")),e.isSubscriber&&(r.sdp=r.sdp.replace("minptime=10","minptime=10;stereo=1; sprop-stereo=1")),t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).catch((function(e){})),t.state="established"):"pr-answer"===i.messageType?(r={sdp:i.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).catch((function(e){}))):"offer"===i.messageType?t.error("Not written yet"):t.error("Illegal message for this state: "+i.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===i.messageType?(r={sdp:i.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).catch((function(e){})),t.state="offer-received",t.markActionNeeded()):"ANSWER"===i.messageType?((r={sdp:i.sdp,type:"answer"}).sdp=y(r.sdp),r.sdp=v(r.sdp),t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).catch((function(e){}))):t.error("Illegal message for this state: "+i.messageType+" in state "+t.state))},t.setRtpSenderParameters=function(){var e=l()(a.a.mark((function e(n){var r,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.peerConnection.getSenders(),i=r.find((function(e){return"video"===e.track.kind}))){e.next=4;break}return e.abrupt("return");case 4:return(o=i.getParameters()).degradationPreference=n,e.prev=6,d.default.debug("[".concat(t.clientId,"] setParameters"),o),e.next=10,i.setParameters(o);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),d.default.debug("[".concat(t.clientId,"] setParameters failed, ignore"));case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();var _=0,E=0;return t.getVideoRelatedStats=function(e){t.getStats((function(n){n.forEach((function(n){if(t.isSubscriber){if("video"===n.mediaType&&n.id&&~n.id.indexOf("recv")){if(r.isChromeKernel()&&+r.getBrowserVersion()>=76){var i=+n.googFramesReceived-_,o=+n.googFramesDecoded-E;t._setStat(f,"googFrameRateReceived",i),t._setStat(f,"googFrameRateDecoded",o),t._setStat(f,"googFrameRateOutput",o),_=+n.googFramesReceived,E=+n.googFramesDecoded}e&&e({mediaType:"video",peerId:t.uid,isVideoMute:t.isVideoMute,frameRateReceived:n.googFrameRateReceived,frameRateDecoded:n.googFrameRateDecoded,bytesReceived:n.bytesReceived,packetsReceived:n.packetsReceived,packetsLost:n.packetsLost})}}else"video"===n.mediaType&&n.id&&~n.id.indexOf("send")&&e&&e({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:n.googFrameRateInput,frameRateSent:n.googFrameRateSent,googRtt:n.googRtt})}))}))},t.getAudioRelatedStats=function(e){t.getStats((function(n){n.forEach((function(n){t.isSubscriber&&"audio"===n.mediaType&&n.id&&~n.id.indexOf("recv")&&e&&e({mediaType:"audio",peerId:t.uid,isAudioMute:t.isAudioMute,frameDropped:parseInt(n.googDecodingPLC)+parseInt(n.googDecodingPLCCNG)+"",frameReceived:n.googDecodingCTN,googJitterReceived:n.googJitterReceived,bytesReceived:n.bytesReceived,packetsReceived:n.packetsReceived,packetsLost:n.packetsLost})}))}))},t.getStatsRate=function(e){t.getStats((function(t){e(t)}))},t.getStats=function(e,n){n=(n=n||500)>500?500:n,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<n?e&&e(t.filterStatsCache,t.originStatsCache):(t.lastTimeGetStats=Date.now(),this._getStats((function(n,r){t.filterStatsCache=n,t.originStatsCache=r,e&&e(n,r)})))},t._setStat=function(e,t,n){e.hasOwnProperty(t)&&(null!=n&&n!==1/0&&n==n||(n=0),e[t]=n+"")},t._processGetStatsAfterChrome76=function(e){var n=this;t.lastStats||(t.lastStats=new Map),t.peerConnection.getStats().then((function(r){var a,l=[],d=[],u=new Map,h=new Date,g=p(r.values());try{for(g.s();!(a=g.n()).done;){var y=a.value;"codec"!=y.type?"candidate-pair"!=y.type?("inbound-rtp"===y.type&&"video"===y.mediaType&&u.set("inbound-video",y),"inbound-rtp"===y.type&&"audio"===y.mediaType&&u.set("inbound-audio",y),"outbound-rtp"===y.type&&"audio"===y.mediaType&&u.set("outbound-audio",y),"outbound-rtp"===y.type&&"video"===y.mediaType&&u.set("outbound-video",y),"track"===y.type&&"video"===y.kind&&y.remoteSource&&u.set("remote-video-track",y),"track"===y.type&&"audio"===y.kind&&y.remoteSource&&u.set("remote-audio-track",y),"remote-inbound-rtp"===y.type&&"video"===y.mediaType&&u.set("remote-inbound-video",y),"remote-inbound-rtp"===y.type&&"audio"===y.mediaType&&u.set("remote-inbound-audio",y),"track"!==y.type||"video"!==y.kind||y.remoteSource||u.set("local-video-track",y),"track"!==y.type||"audio"!==y.kind||y.remoteSource||u.set("local-audio-track",y),"media-source"===y.type&&"video"===y.kind&&u.set("media-source-video",y),"media-source"===y.type&&"audio"===y.kind&&u.set("media-source-audio",y)):d.push(y):l.push(y)}}catch(e){g.e(e)}finally{g.f()}u.set("codec",l),u.set("candidatePairs",d),u.set("timestamp",+h);var v=null,_=null;if(f.timestamp=h,c.timestamp=h,i.timestamp=h,i.timestamp=h,m.timestamp=h,n.isSubscriber)(v=u.get("inbound-video"))&&(t._setStat(f,"id","inbound_video_ssrc_recv"),t._setStat(f,"mediaType",v.mediaType),t._setStat(f,"packetsLost",v.packetsLost),t._setStat(f,"googDecodeMs",null),t._setStat(f,"googMaxDecodeMs",null),t._setStat(f,"googRenderDelayMs",null),t._setStat(f,"googMinPlayoutDelayMs",null),t._setStat(f,"googNacksSent",v.nackCount),t._setStat(f,"googPlisSent",v.pliCount),t._setStat(f,"googFirsSent",v.firCount),t._setStat(f,"bytesReceived",v.bytesReceived),t._setStat(f,"packetsReceived",v.packetsReceived)),(v=u.get("inbound-audio"))&&(t._setStat(c,"id","inbound_audio_ssrc_recv"),t._setStat(c,"mediaType",v.mediaType),t._setStat(c,"bytesReceived",v.bytesReceived),t._setStat(c,"packetsLost",v.packetsLost),t._setStat(c,"packetsReceived",v.packetsReceived),t._setStat(c,"googAccelerateRate",v.removedSamplesForAcceleration),t._setStat(c,"googCurrentDelayMs",v.jitterBufferDelay),t._setStat(c,"googDecodingCNG",null),t._setStat(c,"googDecodingCTN",null),t._setStat(c,"googDecodingCTSG",null),t._setStat(c,"googDecodingNormal",null),t._setStat(c,"googDecodingPLC",null),t._setStat(c,"googDecodingPLCCNG",null),t._setStat(c,"googJitterReceived",v.jitter),t._setStat(c,"googPreferredJitterBufferMs",null),t._setStat(c,"googSecondaryDecodedRate",null)),(v=u.get("remote-video-track"))&&(t._setStat(f,"googTargetDelayMs",v.jitterBufferDelay),t._setStat(f,"googFrameWidthReceived",v.frameWidth),t._setStat(f,"googFrameHeightReceived",v.frameHeight),t._setStat(f,"googJitterBufferMs",v.jitterBufferDelay/v.jitterBufferEmittedCount*1e3),t._setStat(f,"googCurrentDelayMs",v.jitterBufferDelay),t._setStat(f,"googFramesDecoded",v.framesDecoded),t._setStat(f,"googFramesReceived",v.framesReceived)),(v=u.get("remote-audio-track"))&&(t._setStat(c,"audioOutputLevel",32767*v.audioLevel),t._setStat(c,"googJitterBufferMs",v.jitterBufferDelay/v.jitterBufferEmittedCount*1e3),t._setStat(c,"googExpandRate",v.concealedSamples),t._setStat(c,"googPreemptiveExpandRate",v.insertedSamplesForDeceleration),t._setStat(c,"googSpeechExpandRate",v.silentConcealedSamples));else{var E=t.lastStats.get("timestamp"),S=t.lastStats.get("outbound-video");if((v=u.get("outbound-audio"))&&(t._setStat(i,"id","outbound_audio_ssrc_send"),t._setStat(i,"mediaType",v.mediaType),t._setStat(i,"aecDivergentFilterFraction",null),t._setStat(i,"bytesSent",v.bytesSent),t._setStat(i,"packetsSent",v.packetsSent),_=v.transportId),v=u.get("outbound-video")){if(t._setStat(s,"id","outbound_video_ssrc_send"),t._setStat(s,"mediaType",v.mediaType),t._setStat(s,"bytesSent",v.bytesSent),t._setStat(s,"packetsSent",v.packetsSent),t._setStat(s,"googAdaptationChanges",v.qualityLimitationDurations),t._setStat(s,"googAvgEncodeMs",null),t._setStat(s,"googEncodeUsagePercent",null),_=v.transportId,v.totalEncodedBytesTarget&&S&&S.totalEncodedBytesTarget){var T=(v.totalEncodedBytesTarget-S.totalEncodedBytesTarget)/(+new Date-E);t._setStat(m,"googTargetEncBitrate",Math.floor(8*T*1e3))}if(v.retransmittedBytesSent&&S&&S.retransmittedBytesSent){var b=(v.retransmittedBytesSent-S.retransmittedBytesSent)/(+new Date-E);t._setStat(m,"googRetransmitBitrate",Math.floor(8*b*1e3))}if(v.bytesSent&&S&&S.bytesSent){var I=(v.bytesSent-S.bytesSent)/(+new Date-E);t._setStat(m,"googTransmitBitrate",Math.floor(8*I*1e3)),t._setStat(m,"googActualEncBitrate",Math.floor(8*I*1e3))}if(v.totalPacketSendDelay&&S&&S.totalPacketSendDelay){var N=(v.totalPacketSendDelay-S.totalPacketSendDelay)/(+new Date-E);t._setStat(m,"googBucketDelay",Math.floor(1e3*N))}}if((v=u.get("remote-inbound-video"))&&(t._setStat(s,"packetsLost",v.packetsLost),t._setStat(s,"googRtt",v.roundTripTime)),(v=u.get("local-video-track"))&&(t._setStat(s,"googFrameHeightSent",v.frameHeight),t._setStat(s,"googFrameWidthSent",v.frameWidth),void 0!==v.framesPerSecond&&t._setStat(s,"googFrameRateSent",v.framesPerSecond)),(v=u.get("local-audio-track"))&&(t._setStat(i,"googEchoCancellationReturnLoss",v.echoReturnLoss),t._setStat(i,"googEchoCancellationReturnLossEnhancement",v.echoReturnLossEnhancement)),(v=u.get("media-source-video"))&&(t._setStat(s,"googFrameHeightInput",v.height),t._setStat(s,"googFrameWidthInput",v.width),t._setStat(s,"googFrameRateInput",v.framesPerSecond)),(v=u.get("media-source-audio"))&&t._setStat(i,"audioInputLevel",32767*v.totalAudioEnergy),(v=u.get("inbound-video"))&&(t._setStat(s,"googFirsReceived",v.firCount),t._setStat(s,"googNacksReceived",v.nackCount),t._setStat(s,"googPlisReceived",v.pliCount)),_)u.get("candidatePairs").map((function(e){_==e.transportId&&t._setStat(m,"googAvailableSendBandwidth",e.availableOutgoingBitrate)}));else{var C=u.get("candidatePairs")[0];C&&t._setStat(m,"googAvailableSendBandwidth",C.availableOutgoingBitrate)}}t.lastStats=u;var w=[o()({},s),o()({},i),o()({},f),o()({},c),o()({},m)];w.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),e(w)}))},t._processGetStatsBeforeChrome76=function(e){t.peerConnection.getStats((function(n){var r=[],a=[],l=null;Object.keys(n).forEach((function(e){var t=n[e];t&&(a.push(t),l=t.timestamp,"VideoBwe"===t.type?m=t:t.id.indexOf("_send")>-1&&"video"===t.mediaType?s=t:t.id.indexOf("_send")>-1&&"audio"===t.mediaType?i=t:t.id.indexOf("_recv")>-1&&"video"===t.mediaType?f=t:t.id.indexOf("_recv")>-1&&"audio"===t.mediaType&&(c=t))})),(r=[o()({},s),o()({},i),o()({},f),o()({},c),o()({},m)]).push({id:"time",startTime:t.connectedTime,timestamp:l||new Date}),e(r,a)}))},t._getStats=function(e){Object(h.getParameter)("CHROME_NEW_STATS")&&r.isChromeKernel()&&+r.getBrowserVersion()>=76?t._processGetStatsAfterChrome76(e):t._processGetStatsBeforeChrome76(e)},t.addTrack=function(e,n){if("unified-plan"===Object(h.getParameter)("PLAN")){var r="audio"===e.kind?t._audioSender:t._videoSender;if(r){var i=t.peerConnection.getTransceivers().find((function(e){return e.sender===r}));r.replaceTrack(e).then((function(){i.direction="sendrecv",t.renegotiate()}))}else r=t.peerConnection.addTrack(e,n),"audio"===e.kind?t._audioSender=r:t._videoSender=r}else t.peerConnection.addTrack(e,n)},t.removeTrack=function(e,n){if("unified-plan"===Object(h.getParameter)("PLAN")){var r=t.peerConnection.getTransceivers().find((function(t){return t.sender.track===e}));r&&(r.direction="inactive",t.peerConnection.removeTrack(r.sender))}else t.peerConnection.removeTrack(t.peerConnection.getSenders().find((function(t){return t.track==e})))},t.addStream=function(e){"unified-plan"===Object(h.getParameter)("PLAN")?e.getTracks().forEach((function(n){var r=t.peerConnection.addTrack(n,e);"audio"===n.kind?t._audioSender=r:t._videoSender=r})):(t.peerConnection.addStream(e),t.markActionNeeded())},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater((function(){t.onstablestate()}))},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){var n;if(t.actionNeeded){if("new"===t.state||"established"===t.state)t.peerConnection.createOffer(t.mediaConstraints).then((function(n){return n?n.sdp!==t.prevOffer?(e.isSubscriber&&(n.sdp=n.sdp.replace("minptime=10","minptime=10;stereo=1; sprop-stereo=1")),t.peerConnection.setLocalDescription(n),t.state="preparing-offer",void t.markActionNeeded()):void d.default.debug("["+t.clientId+"]Not sending a new offer"):(d.default.debug("["+t.clientId+"]sessionDescription is null"),void t.onsignalingmessage(null))})).catch((function(e){d.default.debug("["+t.clientId+"]peer connection create offer failed ",e)}));else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(e.isCloudProxy3&&e.onNoIceCandidate&&e.onNoIceCandidate(),d.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),Object(h.getParameter)("SHIM_CANDIDATE")?(d.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):d.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer((function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var n=new Date;d.default.debug("["+t.clientId+"]"+n.getTime()+": Starting ICE in responder"),t.iceStarted=!0}}),(function(e){d.default.debug("["+t.clientId+"]peer connection create answer failed ",e)}),t.mediaConstraints);else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;n=t.peerConnection.localDescription.sdp,t.sendMessage("ANSWER",n),t.state="established"}else d.default.debug("[".concat(t.clientId,"] Dazed and confused in state ").concat(t.state,", stopping here'"));t.actionNeeded=!1}},t.sendMessage=function(e,n){var r={};r.messageType=e,r.sdp=n,"OFFER"===e?(r.offererSessionId=t.sessionId,r.answererSessionId=t.otherSessionId,r.seq=t.sequenceNumber+=1,r.tiebreaker=Math.floor(429496723*Math.random()+1)):(r.offererSessionId=t.incomingMessage.offererSessionId,r.answererSessionId=t.sessionId,r.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(r))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var n=t.peerConnection.getSenders().find((function(t){return t.track.kind==e}));if(n)return n}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,n,r){var i=t._getSender(e.kind);if(!i)return r("NO_SENDER_FOUND");try{i.replaceTrack(e)}catch(e){return r&&r(e)}setTimeout((function(){return n&&n()}),50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){t.onaddstream&&(t.onaddstream(e,"ontrack"),t.peerConnection.onaddstream=null)},t.peerConnection.onaddstream=function(e){t.onaddstream&&(t.onaddstream(e,"onaddstream"),t.peerConnection.ontrack=null)},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){d.default.debug(t.peerConnection.iceConnectionState),"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},t.renegotiate=function(){void 0!==t.prevOffer&&t.peerConnection.createOffer().then((function(e){return"unified-plan"!==Object(h.getParameter)("PLAN")&&(e.sdp=e.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n")),e.sdp=y(e.sdp),e.sdp=v(e.sdp),t.peerConnection.setLocalDescription(e)})).then((function(){t.onnegotiationneeded&&t.onnegotiationneeded(t.peerConnection.localDescription.sdp)})).catch((function(e){d.default.error("createOffer error: ",e.message||e)}))},t.peerConnection.onnegotiationneeded=t.renegotiate,t.onaddstream=null,t.onremovestream=null,t.onnegotiationneeded=null,t.state="new",t.markActionNeeded(),t}(e)).browser="chrome-stable",t},T=function(e,t,n){var i={};i.config=e,i.streamId=e.streamId,delete e.streamId,navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var o=0,s=1,a=!1,c=null,l=function(e){if(o++,c)if(c===e)d.default.debug("Using Video Source/ Audio Source");else{var n=c.getVideoTracks()[0],r=c.getAudioTracks()[0],i=e.getVideoTracks()[0],l=e.getAudioTracks()[0];i&&(n&&c.removeTrack(n),c.addTrack(i)),l&&(r&&c.removeTrack(r),c.addTrack(l))}else c=e;o!==s||a||(a=!0,setTimeout((function(){t(c)}),0))},u=function(e){d.default.error("Failed to GetUserMedia",e.name,e.code,e.message,e),o++,a||(a=!0,setTimeout((function(){n&&n(e)}),0))},h=function(){var t={video:e.video,audio:e.audio};if(d.default.debug("GetUserMedia",JSON.stringify(t)),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia(t).then(l).catch(u);else if("undefined"!=typeof navigator&&navigator.getMedia)navigator.getMedia(e,l,u);else{var r={name:"MEDIA_NOT_SUPPORT",message:"Video/audio streams not supported yet"};d.default.error("["+i.streamId+"]"+r.message),n&&n(r)}};if((e.videoSource||e.audioSource)&&(c=new MediaStream,e.videoSource&&c.addTrack(e.videoSource),e.audioSource&&c.addTrack(e.audioSource)),e.video||e.audio||e.screen||e.screenAudio){if(!e.screen&&e.screenAudio)return n&&n({code:"Set screen to true before sharing the audio"});if(e.screen){if(_.a.isElectron())return e.screen.sourceId?_.a.getScreenStream(e.screen.sourceId,e.screen,(function(t,n){t?u(t):(e.audio&&(s++,h()),l(n))})):_.a.shareScreen(e.screen,(function(t,n){t?u(t):(e.audio&&(s++,h()),l(n))}));if(r.isFireFox()){if(d.default.debug("["+i.streamId+"]Screen access requested"),!~["screen","window","application"].indexOf(e.screen.mediaSource))return n&&n({code:"Invalid mediaSource, mediaSource should be one of [screen, window, application]"});navigator.getMedia({video:e.screen},(function(t){e.audio&&(s++,h()),l(t)}),u)}else if(r.isChromeKernel()&&e.screen.extensionId){if(window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<34)return void n({code:"This browser does not support screen sharing"});d.default.debug("["+i.streamId+"]Screen access on chrome stable, looking for extension");try{chrome.runtime.sendMessage(e.screen.extensionId,{getStream:!0},(function(t){void 0===t?(d.default.error("["+i.streamId+"]No response from Chrome Plugin. Plugin not installed properly"),u({name:"PluginNotInstalledProperly",message:"No response from Chrome Plugin. Plugin not installed properly."})):(e.screen.mandatory.chromeMediaSourceId=t.streamId,navigator.getMedia({video:e.screen},(function(t){e.audio&&(s++,h()),l(t)}),u))}))}catch(e){return d.default.debug("["+i.streamId+"]AgoraRTC screensharing plugin is not accessible"),void n({code:"no_plugin_present"})}}else{if(window.navigator.mediaDevices.getDisplayMedia){var p={};return"number"==typeof e.screen.width&&"number"==typeof e.screen.height?p.video={width:{ideal:e.screen.width},height:{ideal:e.screen.height}}:p.video={width:e.screen.width,height:e.screen.height},e.screen.frameRate&&e.screen.frameRate.min?p.video.frameRate={ideal:e.screen.frameRate.max,max:e.screen.frameRate.max}:p.video.frameRate=e.screen.frameRate,e.screenAudio&&(p.audio=e.screenAudio),d.default.debug("use getDisplayMedia, constraints:",p),window.navigator.mediaDevices.getDisplayMedia(p).then((function(t){!e.screenAudio&&e.audio&&(s++,h()),l(t)})).catch(u)}d.default.error("["+i.streamId+"]This browser does not support screenSharing"),n({code:"This browser does not support screen sharing"})}}else h()}else l(c)}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(0)),o=function(){function e(e,t,n){void 0===t&&(t=""),this.name="AgoraRTCException",this.code=e,this.message="AgoraRTCError "+this.code+": "+t,this.data=n}return e.prototype.toString=function(){return this.data?this.message+" data: "+JSON.stringify(this.data):this.message},e.prototype.throw=function(){throw i.default.error(this.toString()),this},e}();t.AgoraRTCError=o,function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_SUPPORT="NOT_SUPPORT",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORT="OPERATION_ABORT",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.STREAM_ALREADY_INITIALIZED="STREAM_ALREADY_INITIALIZED",e.STREAM_IS_CLOSED="STREAM_IS_CLOSED",e.ABORT_OTHER_INIT="ABORT_OTHER_INIT",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.CAN_NOT_AUTOPLAY="CAN_NOT_AUTOPLAY",e.HIGH_STREAM_NO_VIDEO_TRACK="HIGH_STREAM_NO_VIDEO_TRACK",e.SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM="SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.TOKEN_GENERATOR_FUNCTION_ERROR="TOKEN_GENERATOR_FUNCTION_ERROR",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.UID_CONFLICT="UID_CONFLICT",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.SUBSCRIPTION_IS_IN_PROGRESS="SUBSCRIPTION_IS_IN_PROGRESS",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.EFFECT_ID_CONFLICTED="EFFECT_ID_CONFLICTED",e.EFFECT_SOUND_ID_NOT_FOUND="EFFECT_SOUND_ID_NOT_FOUND",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER="CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT="LIVE_STREAMING_TRANSCODING_NOT_SUPPORT",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE"}(t.AgoraRTCErrorCode||(t.AgoraRTCErrorCode={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),i=window.AudioContext||window.webkitAudioContext,o=n(2),s=o.getParameter,a=o.setParameter,c=function(){return s("AUDIO_CONTEXT")||a("AUDIO_CONTEXT",function(){if(i){var e=new i;return window.ctx=e,new Promise((function(e){document.body?e():window.addEventListener("load",e)})).then((function(){var t=function t(){"suspended"==e.state?(r.default.debug("AudioContext is suspended, auto resume"),e.resume().then((function(){r.default.debug("AudioContext resume success"),document.body.removeEventListener("touchend",t,!0),document.body.removeEventListener("mousedown",t,!0)}))):(r.default.debug("AudioContext is running"),document.body.removeEventListener("touchend",t,!0),document.body.removeEventListener("mousedown",t,!0))};document.body.addEventListener("touchend",t,!0),document.body.addEventListener("mousedown",t,!0)})),e}throw new Error("AUDIO_CONTEXT_NOT_SUPPORTED")}()),s("AUDIO_CONTEXT")};c()},function(e,t,n){"use strict";var r=n(1),i=null,o=function(){try{i=window.require("electron")}catch(e){}return i},s=function(e){var t=r.report.reportApiInvoke(null,{callback:e,name:"getScreenSources",options:arguments,tag:"tracer"}),n=o();if(!n)return t&&t("electron is null");try{var i=n.desktopCapturer.getSources({types:["window","screen"]})}catch(e){console.log(e)}i instanceof Promise?i.then((function(e){return t&&t(null,e)})).catch((function(e){return t&&t(e)})):i=n.desktopCapturer.getSources({types:["window","screen"]},(function(e,n){t&&t(null,n)}))},a=function(e,t,n){var r=t.width;t={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:t.height,maxWidth:r,maxFrameRate:t.frameRate&&t.frameRate.max,minFrameRate:t.frameRate&&t.frameRate.min}}},navigator.webkitGetUserMedia(t,(function(e){n&&n(null,e)}),(function(e){n&&n(e)}))};t.a={isElectron:function(){return!!o()},getElectronInstance:o,getScreenSources:s,getScreenStream:a,shareScreen:function(e,t){s((function(n,r){if(n)return t&&t(n);!function(e,t){var n=document.createElement("div");n.innerText="share screen",n.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");var r=document.createElement("div");r.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");var i=document.createElement("div");i.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",i.setAttribute("style","height: 12%;");var o=document.createElement("div");o.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");var s=document.createElement("div");s.setAttribute("style","text-align: right; padding: 16px 0;");var a=document.createElement("button");a.innerHTML="cancel",a.setAttribute("style","width: 85px;"),a.onclick=function(){document.body.removeChild(c),t&&t("NotAllowedError")},s.appendChild(a),r.appendChild(i),r.appendChild(o),r.appendChild(s);var c=document.createElement("div");c.setAttribute("style","position: absolute; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),c.appendChild(n),c.appendChild(r),document.body.appendChild(c),e.map((function(e){if(e.id){var n=document.createElement("div");n.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");var r=e.thumbnail;r.getSize().width>1920&&(r=r.resize({width:1920})),n.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+r.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+e.name.replace(/[\u00A0-\u9999<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))+"</span>",n.onclick=function(){document.body.removeChild(c),t&&t(null,e.id)},o.appendChild(n)}}))}(r,(function(n,r){if(n)return t&&t(n);a(r,e,t)}))}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);!function(e){e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e.INJECT="inject_streaming"}(t.LiveStreamingServiceMode||(t.LiveStreamingServiceMode={})),t.DEFAULT_LIVE_STREAMING_TRANSCODING_USER={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},t.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK={x:0,y:0,width:160,height:160,zOrder:255,alpha:1},t.isLiveStreamingTranscodingConfig=function(e){return r.isEmpty(e.width)||r.checkValidNumber(e.width,"config.width",0),r.isEmpty(e.height)||r.checkValidNumber(e.height,"config.height",0),r.isEmpty(e.videoBitrate)||r.checkValidNumber(e.videoBitrate,"config.videoBitrate",1,1e6),r.isEmpty(e.videoFramerate)||r.checkValidNumber(e.videoFramerate,"config.videoFramerate"),r.isEmpty(e.lowLatency)||r.checkValidBoolean(e.lowLatency,"config.lowLatency"),r.isEmpty(e.audioSampleRate)||r.checkValidEnum(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),r.isEmpty(e.audioBitrate)||r.checkValidNumber(e.audioBitrate,"config.audioBitrate",1,128),r.isEmpty(e.audioChannels)||r.checkValidEnum(e.audioChannels,"config.audioChannels",[1,2,3,4,5]),r.isEmpty(e.videoGop)||r.checkValidNumber(e.videoGop,"config.videoGop"),r.isEmpty(e.videoCodecProfile)||r.checkValidEnum(e.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),r.isEmpty(e.userCount)||r.checkValidNumber(e.userCount,"config.userCount",0,17),r.isEmpty(e.backgroundColor)||r.checkValidNumber(e.backgroundColor,"config.backgroundColor",0,16777215),e.transcodingUsers&&!r.isEmpty(e.transcodingUsers)&&(r.checkValidArray(e.transcodingUsers,"config.transcodingUsers"),e.transcodingUsers.forEach((function(e,t){r.checkValidUID(e.uid),r.isEmpty(e.x)||r.checkValidNumber(e.x,"transcodingUser["+t+"].x",0,1e4),r.isEmpty(e.y)||r.checkValidNumber(e.y,"transcodingUser["+t+"].y",0,1e4),r.isEmpty(e.width)||r.checkValidNumber(e.width,"transcodingUser["+t+"].width",0,1e4),r.isEmpty(e.height)||r.checkValidNumber(e.height,"transcodingUser["+t+"].height",0,1e4),r.isEmpty(e.zOrder)||r.checkValidNumber(e.zOrder-1,"transcodingUser["+t+"].zOrder",0,100),r.isEmpty(e.alpha)||r.checkValidFloatNumber(e.alpha,"transcodingUser["+t+"].alpha",0,1)}))),e.images&&!r.isEmpty(e.images)&&(r.checkValidArray(e.images,"config.images"),e.images.forEach((function(e,t){r.checkValidString(e.url,"images["+t+"].url",1,1e3,!1),r.isEmpty(e.x)||r.checkValidNumber(e.x,"images["+t+"].x",0,1e4),r.isEmpty(e.y)||r.checkValidNumber(e.y,"images["+t+"].y",0,1e4),r.isEmpty(e.width)||r.checkValidNumber(e.width,"images["+t+"].width",0,1e4),r.isEmpty(e.height)||r.checkValidNumber(e.height,"images["+t+"].height",0,1e4),r.isEmpty(e.zOrder)||r.checkValidNumber(e.zOrder,"images["+t+"].zOrder",0,255),r.isEmpty(e.alpha)||r.checkValidFloatNumber(e.alpha,"images["+t+"].alpha",0,1)}))),!0},t.DEFAULT_TRANSCODING_CONFIG={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFramerate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},t.isInjectStreamConfig=function(e){return r.isEmpty(e.audioVolume)||r.checkValidNumber(e.audioVolume,"config.audioVolume",0,1e3),r.isEmpty(e.audioBitrate)||r.checkValidNumber(e.audioBitrate,"config.audioBitrate",1,1e4),r.isEmpty(e.audioChannels)||r.checkValidEnum(e.audioChannels,"config.audioChannels",[1,2]),r.isEmpty(e.audioSampleRate)||r.checkValidEnum(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),r.isEmpty(e.width)||r.checkValidNumber(e.width,"config.width",0,1e4),r.isEmpty(e.height)||r.checkValidNumber(e.height,"config.height",0,1e4),r.isEmpty(e.videoBitrate)||r.checkValidNumber(e.videoBitrate,"config.videoBitrate",1,1e4),r.isEmpty(e.videoFramerate)||r.checkValidNumber(e.videoFramerate,"config.videoFramerate",1,1e4),r.isEmpty(e.videoGop)||r.checkValidNumber(e.videoGop,"config.videoGop",1,1e4),!0},t.DEFAULT_INJECT_CONFIG={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30},function(e){e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.INJECT_STREAM_STATUS="@live_uap-inject-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(t.LiveStreamingUapSignalEvents||(t.LiveStreamingUapSignalEvents={})),function(e){e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(t.LiveStreamingInternalEvents||(t.LiveStreamingInternalEvents={})),function(e){e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.LIVE_STREAM_RESPONSE_INGNORE_MESSAGE=505]="LIVE_STREAM_RESPONSE_INGNORE_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(t.LIVE_STREAM_ERROR_CODE||(t.LIVE_STREAM_ERROR_CODE={})),function(e){e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls"}(t.WebSocketManagerEvents||(t.WebSocketManagerEvents={}))},function(e,t,n){var r=n(57),i=n(58);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},function(e,t,n){var r;e.exports=(r=n(73),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,s=t.algo,a=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(a[i]=n(e.pow(r,.5))),c[i]=n(e.pow(r,1/3)),i++),r++}();var l=[],d=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],d=n[5],u=n[6],h=n[7],p=0;p<64;p++){if(p<16)l[p]=0|e[t+p];else{var f=l[p-15],m=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,g=l[p-2],y=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;l[p]=m+l[p-7]+y+l[p-16]}var v=r&i^r&o^i&o,_=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),E=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&d^~a&u)+c[p]+l[p];h=u,u=d,d=a,a=s+E|0,s=o,o=i,i=r,r=E+(_+v)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+d|0,n[6]=n[6]+u|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(d),t.HmacSHA256=o._createHmacHelper(d)}(Math),r.SHA256)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomString=function(e){void 0===e&&(e=8);for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n="",r=0;r<e;r++)n+=t.charAt(Math.floor(48*Math.random()));return n}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),c=s(n(37)),l=n(24),d=s(n(0)),u=n(1);function h(e){return new Promise((function(t){window.setTimeout(t,e)}))}function p(e,t){return new Promise((function(n,r){t.timeout=t.timeout||a.getParameter("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&(t.data=JSON.stringify(t.data)),t.headers=t.headers||{},t.headers["Content-Type"]="application/json",t.method="POST",t.url=e,c.default.request(t).then((function(e){n(e.data)})).catch((function(e){c.default.isCancel(e)?r(new l.AgoraRTCError(l.AgoraRTCErrorCode.OPERATION_ABORT,"cancel token canceled")):"ECONNABORTED"===e.code?r(new l.AgoraRTCError(l.AgoraRTCErrorCode.NETWORK_TIMEOUT,e.message)):e.response?r(new l.AgoraRTCError(l.AgoraRTCErrorCode.NETWORK_RESPONSE_ERROR,e.response.status)):r(new l.AgoraRTCError(l.AgoraRTCErrorCode.NETWORK_ERROR,e.message))}))}))}function f(e,n,r,s){var a=this,c=Object.assign({},t.DEFAULT_RETRY_CONFIG,s),d=c.timeout,u=function(){return i(a,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,h(d)];case 1:return e.sent(),d*=c.timeoutFactor,d=Math.min(c.maxRetryTimeout,d),[2]}}))}))},p=!1,f=new Promise((function(t,s){return i(a,void 0,void 0,(function(){var i,a,d;return o(this,(function(o){switch(o.label){case 0:n=n||function(){return!1},r=r||function(){return!0},i=0,o.label=1;case 1:if(!(i<c.maxRetryCount))return[3,12];if(p)return[2,s(new l.AgoraRTCError(l.AgoraRTCErrorCode.OPERATION_ABORT))];o.label=2;case 2:return o.trys.push([2,7,,11]),[4,e()];case 3:return a=o.sent(),n(a,i)?i+1===c.maxRetryCount?[2,t(a)]:[4,u()]:[3,5];case 4:return o.sent(),[3,6];case 5:return[2,t(a)];case 6:return[3,11];case 7:return d=o.sent(),r(d,i)?i+1===c.maxRetryCount?[2,s(d)]:[4,u()]:[3,9];case 8:return o.sent(),[3,10];case 9:return[2,s(d)];case 10:return[3,11];case 11:return i+=1,[3,1];case 12:return[2]}}))}))}));return f.cancel=function(){return p=!0},f}function m(e,t){return{addressList:e.servers.map((function(e,n){return"wss://"+e.address.replace(/\./g,"-")+".edge.agora.io:"+e.wss+"?serviceName="+encodeURIComponent(t)})),workerToken:e.workerToken,vid:e.vid}}t.wait=h,t.post=p,t.DEFAULT_RETRY_CONFIG={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4},t.getRetryWaitTime=function(e,t){var n=t.timeout*Math.pow(t.timeoutFactor,e);return Math.min(t.maxRetryTimeout,n)},t.retryable=f,t.liveStreamingServerResponseToResult=m;var g=1;function y(e,n,s,c,h){var y=this;void 0===h&&(h=t.DEFAULT_RETRY_CONFIG),g+=1;var v,_,E={sid:s.sid,command:"convergeAllocateEdge",uid:"666",appId:s.appId,ts:Math.floor(Date.now()/1e3),seq:g,requestId:g,version:a.VERSION,cname:s.cname},S={service_name:n,json_body:JSON.stringify(E)},T=e[0];return f((function(){return i(y,void 0,void 0,(function(){var e,t,i,s,u;return o(this,(function(o){switch(o.label){case 0:return v=Date.now(),[4,p(T,{data:S,cancelToken:c,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}})];case 1:if(e=o.sent(),_=Date.now()-v,0!==e.code)throw i=new l.AgoraRTCError(l.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming ap error, code"+e.code,{retry:!0}),d.default.error(i.toString()),i;if(200!==(t=JSON.parse(e.json_body)).code)throw i=new l.AgoraRTCError(l.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming app center error, code: "+t.code+", reason: "+t.reason),d.default.error(i.toString()),i;if(!t.servers||0===t.servers.length)throw i=new l.AgoraRTCError(l.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming app center empty server"),d.default.error(i.toString()),i;if(s=m(t,n),a.getParameter("LIVE_STREAMING_ADDRESS"))try{u=JSON.parse(a.getParameter("LIVE_STREAMING_ADDRESS")),s.addressList=u}catch(e){s.addressList=[a.getParameter("LIVE_STREAMING_ADDRESS")]}return[2,r(r({},s),{responseTime:_})]}}))}))}),(function(t,r){return u.report.requestApWorkerEvent(s.sid,{success:!0,sc:200,serviceName:n,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===r,responseTime:_,serverIp:e[r%e.length]}),!1}),(function(t,r){return u.report.requestApWorkerEvent(s.sid,{success:!1,sc:t.data&&t.data.code||200,serviceName:n,responseTime:_,serverIp:e[r%e.length]}),!!(t.code!==l.AgoraRTCErrorCode.OPERATION_ABORT&&t.code!==l.AgoraRTCErrorCode.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(T=e[(r+1)%e.length],!0)}),h)}t.requestLiveStreamingWorkerManager=y,t.getLiveStreamingWorkerMangerResult=function(e,t,n){return i(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:r=a.getParameter("UAP_AP").map((function(e){return t.proxyServer?"https://"+t.proxyServer+"/ap/?url="+e+"/api/v1?action=uap":"https://"+e+"/api/v1?action=uap"})),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,y(r,e,t,n)];case 2:return[2,o.sent()];case 3:throw i=o.sent(),u.report.requestApWorkerEvent(t.sid,{success:!1,sc:i.data&&i.data.code||200,serviceName:e,responseTime:i.data&&i.data.responseTime}),i;case 4:return[2]}}))}))}},function(e,t,n){var r=n(70),i=n(71),o=n(34),s=n(72);e.exports=function(e){return r(e)||i(e)||o(e)||s()}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(35);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r};Object.defineProperty(t,"__esModule",{value:!0});var i=n(24),o=function(){function e(){this._events={},this.addListener=this.on}return e.prototype.getListeners=function(e){return this._events[e]?this._events[e].map((function(e){return e.listener})):[]},e.prototype.on=function(e,t){this._events[e]||(this._events[e]=[]);var n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!1})},e.prototype.once=function(e,t){this._events[e]||(this._events[e]=[]);var n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!0})},e.prototype.off=function(e,t){if(this._events[e]){var n=this._events[e],r=this._indexOfListener(n,t);-1!==r&&n.splice(r,1),0===this._events[e].length&&delete this._events[e]}},e.prototype.removeAllListeners=function(e){e?delete this._events[e]:this._events={}},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._events[e]||(this._events[e]=[]);for(var r=this._events[e].map((function(e){return e})),i=0;i<r.length;i+=1){var o=r[i];o.once&&this.off(e,o.listener),o.listener.apply(this,t||[])}},e.prototype._indexOfListener=function(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1},e}();function s(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var s=null,a=null;if(e.emit.apply(e,r([t],n,[function(e){s=e},function(e){a=e}])),null!==a)throw a;if(null===s)throw new i.AgoraRTCError(i.AgoraRTCErrorCode.UNEXPECTED_ERROR,"handler is not sync");return s}t.EventEmitter=o,t.emitAsPromise=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return 0===e.getListeners(t).length?Promise.reject(new i.AgoraRTCError(i.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not emit promise")):new Promise((function(i,o){e.emit.apply(e,r([t],n,[i,o]))}))},t.emitAsInvokerNoResponse=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return 0===e.getListeners(t).length?null:s.apply(void 0,r([e,t],n))},t.emitAsInvoker=s},function(e,t,n){e.exports=n(78)},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(18);function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var r=n(18),i=n(84),o={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,c={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(a=n(42)),a),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(o)})),e.exports=c}).call(this,n(83))},function(e,t,n){"use strict";var r=n(18),i=n(85),o=n(39),s=n(87),a=n(90),c=n(91),l=n(43);e.exports=function(e){return new Promise((function(t,d){var u=e.data,h=e.headers;r.isFormData(u)&&delete h["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var f=e.auth.username||"",m=e.auth.password||"";h.Authorization="Basic "+btoa(f+":"+m)}var g=s(e.baseURL,e.url);if(p.open(e.method.toUpperCase(),o(g,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:n,config:e,request:p};i(t,d,r),p=null}},p.onabort=function(){p&&(d(l("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){d(l("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),d(l(t,e,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var y=n(92),v=(e.withCredentials||c(g))&&e.xsrfCookieName?y.read(e.xsrfCookieName):void 0;v&&(h[e.xsrfHeaderName]=v)}if("setRequestHeader"in p&&r.forEach(h,(function(e,t){void 0===u&&"content-type"===t.toLowerCase()?delete h[t]:p.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),d(e),p=null)})),void 0===u&&(u=null),p.send(u)}))}},function(e,t,n){"use strict";var r=n(86);e.exports=function(e,t,n,i,o){var s=new Error(e);return r(s,t,n,i,o)}},function(e,t,n){"use strict";var r=n(18);e.exports=function(e,t){t=t||{};var n={},i=["url","method","params","data"],o=["headers","auth","proxy"],s=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];r.forEach(i,(function(e){void 0!==t[e]&&(n[e]=t[e])})),r.forEach(o,(function(i){r.isObject(t[i])?n[i]=r.deepMerge(e[i],t[i]):void 0!==t[i]?n[i]=t[i]:r.isObject(e[i])?n[i]=r.deepMerge(e[i]):void 0!==e[i]&&(n[i]=e[i])})),r.forEach(s,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}));var a=i.concat(o).concat(s),c=Object.keys(t).filter((function(e){return-1===a.indexOf(e)}));return r.forEach(c,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(59)),c=s(n(62)),l=s(n(63)),d=o(n(0)),u=n(2),h=a.default.Root.fromJSON(l),p=function(){function e(){this.requestArray=[],this.retryBackoffCount=0,this.state=0}return e.prototype.setProxy=function(e){this.proxyServer=e},e.prototype.sendReportList=function(e,t){var n=this,r=this._dataConvert("ProtoRaws",{vid:t,sendTs:Math.round(Date.now()/1e3),payloads:e.map((function(e){return{id:c[e.type],msg:n._dataConvert(e.type,e.data)}}))});this.send(r)},e.prototype._dataConvert=function(e,t){var n;try{n=h.lookupType("protobuf."+e)}catch(t){d.default.error("[send-proto] invalid proto name "+e)}var r=n.create(t);return n.encode(r).finish()},e.prototype.send=function(e){0==this.state?this._send(e):this.requestArray.push(e)},e.prototype._send=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),this.state=1,[4,this.request(e)];case 1:return t.sent(),this.retryBackoffCount=0,0!==this.requestArray.length?this._send(this.requestArray.shift()):this.state=0,[3,4];case 2:return t.sent(),[4,f(this.retryBackoffCount++<2?200:1e4)];case 3:return t.sent(),this._send(e),[3,4];case 4:return[2]}}))}))},e.prototype.request=function(e){return r(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:t=this._getAddress(),n=this._getBackupAddress(),r.label=1;case 1:return r.trys.push([1,3,,5]),[4,this._request(t,e)];case 2:return r.sent(),[3,5];case 3:return r.sent(),[4,this._request(n,e)];case 4:return r.sent(),[3,5];case 5:return[2]}}))}))},e.prototype._request=function(e,t){return this._post(e,t)},e.prototype._post=function(e,t){var n=this;return new Promise((function(r,i){var o=new XMLHttpRequest;o.timeout=u.getParameter("HTTP_CONNECT_TIMEOUT"),o.open("POST",e,!0),o.setRequestHeader("Content-type","application/octet-stream"),n.proxyServer||(o.setRequestHeader("Cache-Control","no-cache, no-store"),o.setRequestHeader("Pragma","no-cache"),o.setRequestHeader("Expires","0")),o.onload=function(e){r(o.responseText)},o.onerror=function(e){i(e)},o.ontimeout=function(e){i(e)},o.send(t)}))},e.prototype._getAddress=function(){return this.proxyServer?"https://"+this.proxyServer+"/rs/?h="+u.getParameter("EVENT_REPORT_DOMAIN")+"&p=6443&d=events/proto-raws":"https://"+u.getParameter("EVENT_REPORT_DOMAIN")+":6443/events/proto-raws"},e.prototype._getBackupAddress=function(){return this.proxyServer?"https://"+this.proxyServer+"/rs/?h="+u.getParameter("EVENT_REPORT_BACKUP_DOMAIN")+"&p=6443&d=events/proto-raws":"https://"+u.getParameter("EVENT_REPORT_BACKUP_DOMAIN")+":6443/events/proto-raws"},e}();t.default=p;var f=function(e){return new Promise((function(t){window.setTimeout(t,e)}))}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s,a=o(n(0)),c=n(15);!function(e){e.NEW="new",e.PREPARING_OFFER="preparing-offer",e.OFFER_SENT="offer-sent",e.ESTABLISHED="established",e.CLOSED="closed"}(s||(s={}));var l=function(){function e(e){this.candidate=null,this.state=s.NEW,this.config=e,this.isSubscriber=this.config.isSubscriber,this.peerConnection=this.initPeecConnection(e),this.peerConnection.onicecandidate=this._onicecandidate.bind(this),this.peerConnection.oniceconnectionstatechange=this._oniceconnectionstatechange.bind(this),this.peerConnection.onaddstream=this._onaddstream.bind(this),this.peerConnection.ontrack=this._ontrack.bind(this),this.processSignalingMessage=this.setAnswer.bind(this),this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.setLocalSDP.bind(this)),this.sendVideoStats={id:"",type:"",mediaType:"",googCodecName:this.config.codec.toUpperCase(),bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},this.sendAudioStats={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},this.receiveAudioStats={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},this.receiveVideoStats={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"}}return e.prototype.addStream=function(e){this.peerConnection.addStream(e)},e.prototype.setRtpSenderParameters=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(e){return[2]}))}))},e.prototype.setAnswer=function(e){var t=JSON.parse(e);this.peerConnection.setRemoteDescription(new RTCSessionDescription({sdp:t.sdp,type:"answer"})),this.onsignalingmessage&&this.onsignalingmessage("")},e.prototype.close=function(){this.peerConnection.close()},e.prototype.getStats=function(e,t){if(void 0===t&&(t=500),t=t>500?500:t,Date.now()-this.lastTimeGetStats<t){var n=[];this.config.isSubscriber?(n.push(this.receiveVideoStats),n.push(this.receiveAudioStats)):(n.push(this.sendAudioStats),n.push(this.sendVideoStats)),n.push({id:"time",startTime:this.connectedTime,timestamp:Date.now()}),e&&e(n)}else this._getStats(e)},e.prototype._getStats=function(e){var t=this,n=[];this.peerConnection.getStats(null).then((function(r){t.lastTimeGetStats=Date.now(),Object.keys(r).map((function(e){var n=r[e];t.config.isSubscriber?n.type&&"inboundrtp"===n.type&&n.mediaType&&"audio"===n.mediaType?(t.receiveAudioStats.id=n.id+"recv",t.receiveAudioStats.type=n.type+"",t.receiveAudioStats.mediaType=n.mediaType+"",t.receiveAudioStats.packetsReceived=n.packetsReceived+"",t.receiveAudioStats.bytesReceived=n.bytesReceived+"",t.receiveAudioStats.packetsLost=n.packetsLost+"",t.receiveAudioStats.googJitterReceived=n.jitter+""):n.type&&"inboundrtp"===n.type&&n.mediaType&&"video"===n.mediaType?(t.receiveVideoStats.id=n.id+"recv",t.receiveVideoStats.type=n.type+"",t.receiveVideoStats.mediaType=n.mediaType+"",t.receiveVideoStats.packetsReceived=n.packetsReceived+"",t.receiveVideoStats.bytesReceived=n.bytesReceived+"",t.receiveVideoStats.packetsLost=n.packetsLost+"",t.receiveVideoStats.googJitterBufferMs=n.jitter+"",t.receiveVideoStats.googPlisSent=n.pliCount+"",t.receiveVideoStats.googFirsSent=n.firCount+"",t.receiveVideoStats.googNacksSent=n.nackCount+""):n.remoteSource&&n.type&&"track"===n.type&&n.trackIdentifier&&-1!==n.trackIdentifier.indexOf("v")?(t.receiveVideoStats.googFrameHeightReceived=n.frameHeight+"",t.receiveVideoStats.googFrameWidthReceived=n.frameWidth+"",t.receiveVideoStats.googFrameRateDecoded=n.framesPerSecond+"",t.receiveVideoStats.googFrameRateOutput=n.framesPerSecond+"",t.receiveVideoStats.googFrameRateReceived=n.framesPerSecond+"",t.receiveVideoStats.googFramesDecoded=n.framesDecoded+"",t.receiveVideoStats.googFrameReceived=n.framesReceived+""):n.remoteSource&&n.type&&"track"===n.type&&n.trackIdentifier&&-1!==n.trackIdentifier.indexOf("a")&&(t.receiveAudioStats.audioOutputLevel=n.audioLevel+""):!n.isRemote&&n.type&&"outboundrtp"===n.type&&n.mediaType&&"audio"===n.mediaType?(t.sendAudioStats.id=n.id+"send",t.sendAudioStats.type=n.type+"",t.sendAudioStats.mediaType=n.mediaType+"",t.sendAudioStats.packetsSent=n.packetsSent+"",t.sendAudioStats.bytesSent=n.bytesSent+""):!n.isRemote&&n.type&&"outboundrtp"===n.type&&n.mediaType&&"video"===n.mediaType?(t.sendVideoStats.id=n.id+"send",t.sendVideoStats.type=n.type+"",t.sendVideoStats.mediaType=n.mediaType+"",t.sendVideoStats.packetsSent=n.packetsSent+"",t.sendVideoStats.bytesSent=n.bytesSent+"",t.sendVideoStats.googRtt=n.roundTripTime+"",t.sendVideoStats.googPlisReceived=n.pliCount+"",t.sendVideoStats.googFirsReceived=n.firCount+"",t.sendVideoStats.googNacksReceived=n.nackCount+""):!n.remoteSource&&n.type&&"track"===n.type&&n.framesSent&&0!==n.framesSent&&(t.sendVideoStats.googFrameHeightSent=n.frameHeight+"",t.sendVideoStats.googFrameHeightInput=n.frameHeight+"",t.sendVideoStats.googFrameWidthSent=n.frameWidth+"",t.sendVideoStats.googFrameWidthInput=n.frameWidth+"",t.sendVideoStats.googFramesEncoded=n.framesSent+"",t.sendVideoStats.googFrameRateSent=n.framesPerSecond+"")})),t.config.isSubscriber?(n.push(t.receiveVideoStats),n.push(t.receiveAudioStats)):(n.push(t.sendAudioStats),n.push(t.sendVideoStats)),n.push({id:"time",startTime:t.connectedTime,timestamp:Date.now()}),e&&e(n)}))},e.prototype.getStatsRate=function(e){this.getStats(e)},e.prototype.initPeecConnection=function(e){var t=e.stunServerUrl,n=e.turnServer,r=e.iceServers;return this.pcConfig={iceServers:[]},r instanceof Array?this.pcConfig.iceServers=e.iceServers:t&&(t instanceof Array?t.map((function(e){"string"==typeof e&&""!==e&&this.pcConfig.iceServers.push({urls:e})})):"string"==typeof t&&""!==t&&this.pcConfig.iceServers.push({urls:t})),n&&(n instanceof Array?n.map((function(e){"string"==typeof e.url&&""!==e.url&&this.pcConfig.iceServers.push({username:e.username,credential:e.credential,url:e.url})})):"auto"!==n.mode&&"manual"!==n.mode||(n.udpport&&this.pcConfig.iceServers.push({username:n.username,credential:n.credential,credentialType:"password",urls:"turn:"+n.url+":"+n.udpport+"?transport=udp"}),"string"==typeof n.tcpport&&""!==n.tcpport&&this.pcConfig.iceServers.push({username:n.username,credential:n.credential,credentialType:"password",urls:"turn:"+n.url+":"+n.tcpport+"?transport=tcp"}),!0===n.forceturn&&(this.pcConfig.iceTransportPolicy="relay"))),new c.RTCPeerConnection(this.pcConfig)},e.prototype._ontrack=function(e){this.onaddstream&&this.onaddstream(e,"ontrack")},e.prototype._onaddstream=function(e){this.onaddstream&&this.onaddstream(e,"onaddstream")},e.prototype._oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(this.state=s.ESTABLISHED,this.connectedTime=Date.now()),this.oniceconnectionstatechange&&this.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},e.prototype._onicecandidate=function(e){!this.candidate&&e&&(this.candidate=e.candidate,this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.editLocalSDP.bind(this)).then(this.setLocalSDP.bind(this)).then(this.sendOffer.bind(this)).catch())},e.prototype.setLocalSDP=function(e){return this.peerConnection.setLocalDescription(new RTCSessionDescription({sdp:e.sdp,type:"offer"})),this.state=s.PREPARING_OFFER,e},e.prototype.editLocalSDP=function(e){return e.sdp=this.setBandWidth(e.sdp),e.sdp=this.reviseOpus(e.sdp),e.sdp=this.addCandidate(e.sdp),e},e.prototype.setSendRecv=function(e){return(e=(e=e.replace(/a=recvonly\r\n/g,"a=sendrecv\r\n")).replace(/a=sendonly\r\n/g,"a=sendrecv\r\n")).replace(/a=inactive\r\n/g,"a=sendrecv\r\n")},e.prototype.setBandWidth=function(e){var t,n,r=this.config,i=r.codec,o=r.minVideoBW,s=r.maxVideoBW,c=r.maxAudioBW,l=r.clientId;if((t=e.match(/m=video.*\r\n/))&&o&&s){n=t[0]+"b=AS:"+s+"\r\n";var d=0,u=0;"h264"===i?(d=e.search(/a=rtpmap:(\d+) H264\/90000\r\n/),u=e.search(/H264\/90000\r\n/)):"vp8"===i?(d=e.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),u=e.search(/VP8\/90000\r\n/)):"vp9"===i&&(d=e.search(/a=rtpmap:(\d+) VP9\/90000\r\n/),u=e.search(/VP9\/90000\r\n/)),-1!==d&&-1!==u&&u-d>10&&(n=n+"a=fmtp:"+e.slice(d+9,u-1)+" x-google-min-bitrate="+o+"\r\n"),e=e.replace(t[0],n),a.default.debug("["+l+"]Set Video Bitrate - min:"+o+" max:"+s)}return(t=e.match(/m=audio.*\r\n/))&&c&&(n=t[0]+"b=AS:"+c+"\r\n",e=e.replace(t[0],n)),e},e.prototype.reviseOpus=function(e){return(e=e.replace(/a=rtpmap:102 opus\/48000\/2/g,"a=rtpmap:111 opus/48000/2")).replace(/m=audio 9 UDP\/TLS\/RTP\/SAVPF 102 0 8 97 13 118 101/g,"m=audio 9 UDP/TLS/RTP/SAVPF 111 0 8 97 13 118 101")},e.prototype.addCandidate=function(e){return e+"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"},e.prototype.sendOffer=function(e){this.config.callback(JSON.stringify({sdp:e.sdp,messageType:"OFFER",tiebreaker:Math.floor(429496723*Math.random()+1)})),this.state=s.OFFER_SENT},e}();t.default=l},function(e,t,n){var r=n(65),i=n(66),o=n(34),s=n(67);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||s()}},function(e,t,n){var r,i,o;i=this,o=function(){"use strict";var e,t=this;function n(e){t.console&&(t.console.error?t.console.error(e):t.console.log&&t.console.log(e))}function r(e,t,r,i){var o=i||n,s=e.createShader(r);return e.shaderSource(s,t),e.compileShader(s),e.getShaderParameter(s,e.COMPILE_STATUS)?s:(o("*** Error compiling shader '"+s+"':"+e.getShaderInfoLog(s)),e.deleteShader(s),null)}function i(e,t,r,i,o){var s=o||n,a=e.createProgram();return t.forEach((function(t){e.attachShader(a,t)})),r&&r.forEach((function(t,n){e.bindAttribLocation(a,i?i[n]:n,t)})),e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)?a:(s("Error in program linking:"+e.getProgramInfoLog(a)),e.deleteProgram(a),null)}(e=e||t)===e.top&&(console.log("%c%s","color:blue;font-weight:bold;","for more about webgl-utils.js see:"),console.log("%c%s","color:blue;font-weight:bold;","http://webglfundamentals.org/webgl/lessons/webgl-boilerplate.html"));var o,s=["VERTEX_SHADER","FRAGMENT_SHADER"];return!document.documentMode&&!!window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(o=HTMLCanvasElement.prototype.getContext,function(){var e=arguments;return"webgl"===e[0]&&((e=[].slice.call(arguments))[0]="experimental-webgl"),o.apply(this,e)})),{createProgram:i,createProgramFromSources:function(e,t,n,o,a){for(var c=[],l=0;l<t.length;++l)c.push(r(e,t[l],e[s[l]],a));return i(e,c,n,o,a)}}},void 0===(r=function(){return o.call(i)}.apply(t,[]))||(e.exports=r)},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(68),a=n(4),c=o(n(0));t.getSupportedCodec=function(e){return r(void 0,void 0,void 0,(function(){var t,n,r,o,d;return i(this,(function(i){switch(i.label){case 0:return t={video:[],audio:[]},"undefined"!=typeof window?[3,1]:(c.default.error("getSupportedCodec: NOT_BROWSER_ENV"),[2,Promise.reject("NOT_BROWSER_ENV")]);case 1:try{n=s.createRTCPeerConnection({iceServers:[]})}catch(e){return c.default.error("Failed to init RTCPeerConnection",e),[2,Promise.reject(e)]}return n?[3,2]:(c.default.warning("getSupportedCodec: no RTCPeerConnection constructor is detected"),[2,Promise.resolve(t)]);case 2:return e&&e.stream?[3,7]:(r={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},o=void 0,(a.isSafari()||a.isFireFox()||a.isWeChatBrowser())&&n.addTransceiver?(n.addTransceiver("audio"),n.addTransceiver("video"),[4,n.createOffer()]):[3,4]);case 3:return o=i.sent(),[3,6];case 4:return[4,new Promise((function(e,t){var i=setTimeout((function(){t("CREATEOFFER_TIMEOUT")}),3e3);n.createOffer((function(t){clearTimeout(i),e(t)}),(function(e){clearTimeout(i),t(e)}),r)}))];case 5:o=i.sent(),i.label=6;case 6:return n.close(),d=o.sdp,[2,l(d)];case 7:return e.stream.getTracks&&n.addTrack?e.stream.getTracks().forEach((function(t){n.addTrack(t,e.stream)})):n.addStream(e.stream),o=void 0,a.isSafari()||a.isFireFox()?[4,n.createOffer()]:[3,9];case 8:return o=i.sent(),[3,11];case 9:return[4,new Promise((function(e,t){n.createOffer(e,t)}))];case 10:o=i.sent(),i.label=11;case 11:return n.close(),d=o.sdp,[2,l(d)]}}))}))};var l=function(e){var t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ VP9/i)&&t.video.push("VP9"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ opus/i)&&t.audio.push("OPUS"),Promise.resolve(t)}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(10);function s(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}t.encryptRSA=function(e){return r(void 0,void 0,void 0,(function(){var t,n,r,a;return i(this,(function(i){switch(i.label){case 0:return t=o.base64ToUint8Array("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),[4,window.crypto.subtle.importKey("spki",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"])];case 1:return n=i.sent(),c=e,r=(new TextEncoder).encode(c),[4,window.crypto.subtle.encrypt({name:"RSA-OAEP"},n,r)];case 2:return a=i.sent(),[2,s(new Uint8Array(a))]}var c}))}))}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(0)),a=n(75),c=n(24),l=n(1),d=n(27);t.addLiveStreamingCapability=function(e,t){var n=this,o=function(t){var n=t.type;if(!e.joinInfo)return new c.AgoraRTCError(c.AgoraRTCErrorCode.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();switch(n){case d.LiveStreamingServiceMode.INJECT:return e._injectStreamingClient||(e._injectStreamingClient=new a.AgoraRTCLiveStreamingClient(e.joinInfo),e._injectStreamingClient.onInjectStatusChange=function(t,n,r){e.gatewayClient.dispatchEvent({type:"streamInjectedStatus",url:r,status:t})}),e._injectStreamingClient;case d.LiveStreamingServiceMode.RAW:return e._liveRawStreamingClient||(e._liveRawStreamingClient=new a.AgoraRTCLiveStreamingClient(e.joinInfo),e._liveRawStreamingClient.setGatewayConnectionState(e.getConnectionState()),e.on("connection-state-change",(function(t){e._liveRawStreamingClient.setGatewayConnectionState(t.curState),"CONNECTING"===t.prevState&&"CONNECTED"===t.curState&&e._liveRawStreamingClient&&e._liveRawStreamingClient.resetAllTask()})),e._liveRawStreamingClient.onLiveStreamError=function(t,n){s.default.error("LIVE_STREAMING_ERROR",n.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:t,reason:n.code})},e._liveRawStreamingClient.onLiveStreamWarning=function(t,n){s.default.warning("LIVE_STREAMING_WARNING",n.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingWarning",url:t,reason:n.code})}),e._liveRawStreamingClient;case d.LiveStreamingServiceMode.TRANSCODE:return e._liveTranscodeStreamingClient||(e._liveTranscodeStreamingClient=new a.AgoraRTCLiveStreamingClient(e.joinInfo),e._liveTranscodeStreamingClient.setGatewayConnectionState(e.getConnectionState()),e.on("connection-state-change",(function(t){e._liveTranscodeStreamingClient.setGatewayConnectionState(t.curState),"CONNECTING"===t.prevState&&"CONNECTED"===t.curState&&e._liveTranscodeStreamingClient&&e._liveTranscodeStreamingClient.resetAllTask()})),e._liveTranscodeStreamingClient.onLiveStreamError=function(t,n){s.default.error("LIVE_STREAMING_ERROR",n.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:t,reason:n.code})},e._liveTranscodeStreamingClient.onLiveStreamWarning=function(t,n){s.default.warning("LIVE_STREAMING_WARNING",n.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingWarning",url:t,reason:n})}),e._liveTranscodeStreamingClient}};e.gatewayClient.addEventListener("join",(function(t){e._injectStreamingClient&&e._injectStreamingClient.resetAllTask()})),e.gatewayClient.addEventListener("stream-unpublished",(function(t){t.options&&0===t.options.streamType&&(e._liveRawStreamingClient&&e._liveRawStreamingClient.resetAllTask(),e._liveTranscodeStreamingClient&&e._liveTranscodeStreamingClient.resetAllTask())})),e.gatewayClient.addEventListener("stream-published",(function(e){})),e.startLiveStreaming=function(n,r){s.default.debug("startLiveStreaming");var i=l.report.reportApiInvoke(t.sessionId,{name:"Client.startLiveStreaming",options:arguments,tag:"tracer"});if(e.gatewayClient&&"audience"===e.gatewayClient.role){var o={code:403,reason:"AUDIENCE_STREAMING_FORBIDDEN"};throw i(o),o}var a=e._startLiveStreaming(n,r);return a.then((function(e){i(null,e)})).catch((function(t){s.default.error("LIVE_STREAMING_ERROR",t.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:n,reason:t.code}),i(t)})),a},e._startLiveStreaming=function(a,l){return r(n,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return l||("vp8"===t.codec&&s.default.warning("VP8 is not supported by raw_streaming. Subscriber side will suffer"),"vp9"===t.codec&&s.default.warning("VP9 is not supported by raw_streaming. Subscriber side will suffer"),"rtc"===t.mode&&s.default.warning("RTC mode is not supported by raw_streaming. Subscriber side will suffer")),(e._liveRawStreamingClient&&e._liveRawStreamingClient.haveUrl(a)||e._liveTranscodeStreamingClient&&e._liveTranscodeStreamingClient.haveUrl(a))&&new c.AgoraRTCError(c.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw(),n=l?d.LiveStreamingServiceMode.TRANSCODE:d.LiveStreamingServiceMode.RAW,[4,o({type:n}).startLiveStreamingTask(a,n)];case 1:return r.sent(),e.gatewayClient.dispatchEvent({type:"liveStreamingStarted",url:a}),[2]}}))}))},e.setLiveTranscoding=function(n){s.default.debug("setLiveTranscoding: "+JSON.stringify(n));var r=l.report.reportApiInvoke(t.sessionId,{name:"Client.setLiveTranscoding",options:arguments,tag:"tracer"});return o({type:d.LiveStreamingServiceMode.TRANSCODE}).setTranscodingConfig(n).then((function(){e.gatewayClient.dispatchEvent({type:"liveTranscodingUpdated"}),r(null)})).catch((function(t){s.default.error("SET_LIVE_TRANSCODING_ERROR",t.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",reason:t.code}),r(t)}))},e.stopLiveStreaming=function(n){var r=l.report.reportApiInvoke(t.sessionId,{name:"Client.stopLiveStreaming",options:arguments,tag:"tracer"}),i=e._stopLiveStreaming(n);return i.then((function(e){r(null,e)})).catch((function(t){s.default.error("STOP_LIVE_STREAMING_ERROR",t.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:n,reason:t.code}),r(t)})),i},e._stopLiveStreaming=function(t){return r(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return s.default.debug("stopLiveStreaming: "+JSON.stringify(t)),n=[e._liveRawStreamingClient,e._liveTranscodeStreamingClient],[4,Promise.all(n.map((function(e){return e&&e.haveUrl(t)&&e.stopLiveStreamingTask(t)})))];case 1:return r.sent(),s.default.debug("stopLiveStreaming sucess: "+JSON.stringify(t)),e.gatewayClient.dispatchEvent({type:"liveStreamingStopped",url:t}),[2]}}))}))},e.addInjectStreamUrl=function(n,r){var i=l.report.reportApiInvoke(t.sessionId,{name:"Client.addInjectStreamUrl",options:[n,r],tag:"tracer"});if("audience"===e.gatewayClient.role){var o={code:403,reason:"AUDIENCE_INJECTING_FORBIDDEN"};throw i(o),o}var a=e._addInjectStreamUrl(n,r);return a.then((function(e){i(null,e)})).catch((function(e){s.default.error("ADD_INJECT_STREAM_ERROR",e.toString()),i(e)})),a},e._addInjectStreamUrl=function(e,t){return r(n,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return(n=o({type:d.LiveStreamingServiceMode.INJECT})).setInjectStreamConfig(t,0),[4,n.startLiveStreamingTask(e,d.LiveStreamingServiceMode.INJECT)];case 1:return r.sent(),[2]}}))}))},e.removeInjectStreamUrl=function(n){return r(this,void 0,void 0,(function(){var r,o;return i(this,(function(i){return r=l.report.reportApiInvoke(t.sessionId,{name:"Client.removeInjectStreamUrl",options:[n],tag:"tracer"}),(o=e._removeInjectStreamUrl(n)).then((function(e){r(null,e)})).catch((function(e){s.default.error("REMOVE_INJECT_STREAM_ERROR",e.toString()),r(e)})),[2,o]}))}))},e._removeInjectStreamUrl=function(e){return r(n,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o({type:d.LiveStreamingServiceMode.INJECT}).stopLiveStreamingTask(e)];case 1:return t.sent(),[2]}}))}))},e._terminateLiveStreaming=function(){return r(n,void 0,void 0,(function(){return i(this,(function(t){return[e._injectStreamingClient,e._liveRawStreamingClient,e._liveTranscodeStreamingClient].forEach((function(e){e&&e.terminate()})),[2]}))}))}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(5)),o=r(n(0)),s=n(10);t.default=function(e,t){void 0===t&&(t={width:160,height:120,framerate:15});var n=t.width,r=t.height,a=t.framerate,c=e.stream;if(!c)throw i.default.INVALID_LOCAL_STREAM;if(!c.getVideoTracks()[0])throw i.default.HIGH_STREAM_NOT_VIDEO_TRACE;var l=c.getVideoTracks()[0];o.default.debug("Start getLowStream");var d=document.createElement("video"),u=document.createElement("canvas");d.setAttribute("style","display:none"),d.setAttribute("muted",""),d.muted=!0,d.setAttribute("autoplay",""),d.autoplay=!0,d.setAttribute("playsinline",""),u.setAttribute("style","display:none"),u.setAttribute("width",n.toString()),u.setAttribute("height",r.toString());var h=u.getContext("2d");if(!h)throw new Error("not get canvas context");d.srcObject=c,document.body.append(d),document.body.append(u),d.play(),o.default.debug("Start render lowStream");var p=s.audioTimerLoop((function(){return function(){if(d.paused&&d.play(),d.videoHeight>2&&d.videoWidth>2){var t=d.videoWidth,n=d.videoHeight/t,r=u.width*n;Math.abs(r-u.height)>=2&&(o.default.debug("adjust low stream resolution",u.width+"x"+u.height+" -> "+u.width+"x"+r),u.height=r)}h.drawImage(d,0,0,u.width,u.height);var i=e.stream;if(i){var s=i.getVideoTracks()[0];l!==s&&(o.default.debug("adjust low stream track"),d.srcObject=i,l=s)}}()}),a),f=u.captureStream(a),m=f.getVideoTracks()[0];return m.requestFrame&&m.requestFrame(),f.clean=function(){o.default.debug("Start clean lowStream"),p(),(d||d.parentNode||d.parentNode.removeChild)&&d.parentNode.removeChild(d),(u||u.parentNode||u.parentNode.removeChild)&&u.parentNode.removeChild(u),o.default.debug("Clean lowStream")},f}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(module,exports,__nested_webpack_require_657211__){(function(global,module){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(undefined){"use strict";!function(e,t,n){var r=function n(r){var i=t[r];return i||e[r][0].call(i=t[r]={exports:{}},n,i,i.exports),i.exports}(16);r.util.global.protobuf=r,__WEBPACK_AMD_DEFINE_ARRAY__=[__nested_webpack_require_657211__(61)],(__WEBPACK_AMD_DEFINE_RESULT__=function(e){return e&&e.isLong&&(r.util.Long=e,r.configure()),r}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))===undefined||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),module&&module.exports&&(module.exports=r)}({1:[function(e,t,n){t.exports=function(e,t){for(var n=new Array(arguments.length-1),r=0,i=2,o=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,s){n[r]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,s(e))}}))}},{}],2:[function(e,t,n){var r=n;r.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var i=new Array(64),o=new Array(123),s=0;s<64;)o[i[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(e,t,n){for(var r,o=null,s=[],a=0,c=0;t<n;){var l=e[t++];switch(c){case 0:s[a++]=i[l>>2],r=(3&l)<<4,c=1;break;case 1:s[a++]=i[r|l>>4],r=(15&l)<<2,c=2;break;case 2:s[a++]=i[r|l>>6],s[a++]=i[63&l],c=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=i[r],s[a++]=61,1===c&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))},r.decode=function(e,t,n){for(var r,i=n,s=0,a=0;a<e.length;){var c=e.charCodeAt(a++);if(61===c&&s>1)break;if((c=o[c])===undefined)throw Error("invalid encoding");switch(s){case 0:r=c,s=1;break;case 1:t[n++]=r<<2|(48&c)>>4,r=c,s=2;break;case 2:t[n++]=(15&r)<<4|(60&c)>>2,r=c,s=3;break;case 3:t[n++]=(3&r)<<6|c,s=0}}if(1===s)throw Error("invalid encoding");return n-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},{}],3:[function(e,t,n){function r(e,t){"string"==typeof e&&(t=e,e=undefined);var n=[];function i(e){if("string"!=typeof e){var t=o();if(r.verbose&&console.log("codegen: "+t),t="return "+t,e){for(var s=Object.keys(e),a=new Array(s.length+1),c=new Array(s.length),l=0;l<s.length;)a[l]=s[l],c[l]=e[s[l++]];return a[l]=t,Function.apply(null,a).apply(null,c)}return Function(t)()}for(var d=new Array(arguments.length-1),u=0;u<d.length;)d[u]=arguments[++u];if(u=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var n=d[u++];switch(t){case"d":case"f":return String(Number(n));case"i":return String(Math.floor(n));case"j":return JSON.stringify(n);case"s":return String(n)}return"%"})),u!==d.length)throw Error("parameter count mismatch");return n.push(e),i}function o(r){return"function "+(r||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return i.toString=o,i}t.exports=r,r.verbose=!1},{}],4:[function(e,t,n){function r(){this._listeners={}}t.exports=r,r.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},r.prototype.off=function(e,t){if(e===undefined)this._listeners={};else if(t===undefined)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},{}],5:[function(e,t,n){t.exports=o;var r=e(1),i=e(7)("fs");function o(e,t,n){return"function"==typeof t?(n=t,t={}):t||(t={}),n?!t.xhr&&i&&i.readFile?i.readFile(e,(function(r,i){return r&&"undefined"!=typeof XMLHttpRequest?o.xhr(e,t,n):r?n(r):n(null,t.binary?i:i.toString("utf8"))})):o.xhr(e,t,n):r(o,this,e,t)}o.xhr=function(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4!==r.readyState)return undefined;if(0!==r.status&&200!==r.status)return n(Error("status "+r.status));if(t.binary){var e=r.response;if(!e){e=[];for(var i=0;i<r.responseText.length;++i)e.push(255&r.responseText.charCodeAt(i))}return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return n(null,r.responseText)},t.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",e),r.send()}},{1:1,7:7}],6:[function(e,t,n){function r(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function o(e,r,i){t[0]=e,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function a(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?i:o,e.writeFloatBE=r?o:i,e.readFloatLE=r?s:a,e.readFloatBE=r?a:s}():function(){function t(e,t,n,r){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function n(e,t,n){var r=e(t,n),i=2*(r>>31)+1,o=r>>>23&255,s=8388607&r;return 255===o?s?NaN:i*(1/0):0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,o),e.readFloatLE=n.bind(null,s),e.readFloatBE=n.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function o(e,r,i){t[0]=e,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function a(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?i:o,e.writeDoubleBE=r?o:i,e.readDoubleLE=r?s:a,e.readDoubleBE=r?a:s}():function(){function t(e,t,n,r,i,o){var s=r<0?1:0;if(s&&(r=-r),0===r)e(0,i,o+t),e(1/r>0?0:2147483648,i,o+n);else if(isNaN(r))e(0,i,o+t),e(2146959360,i,o+n);else if(r>17976931348623157e292)e(0,i,o+t),e((s<<31|2146435072)>>>0,i,o+n);else{var a;if(r<22250738585072014e-324)e((a=r/5e-324)>>>0,i,o+t),e((s<<31|a/4294967296)>>>0,i,o+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=r*Math.pow(2,-c))>>>0,i,o+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,i,o+n)}}}function n(e,t,n,r,i){var o=e(r,i+t),s=e(r,i+n),a=2*(s>>31)+1,c=s>>>20&2047,l=4294967296*(1048575&s)+o;return 2047===c?l?NaN:a*(1/0):0===c?5e-324*a*l:a*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=n.bind(null,s,0,4),e.readDoubleBE=n.bind(null,a,4,0)}(),e}function i(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function o(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.exports=r(r)},{}],7:[function(require,module,exports){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},{}],8:[function(e,t,n){var r=n,i=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},o=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=i(e),r="";n&&(r=t.shift()+"/");for(var o=0;o<t.length;)".."===t[o]?o>0&&".."!==t[o-1]?t.splice(--o,2):n?t.splice(o,1):++o:"."===t[o]?t.splice(o,1):++o;return r+t.join("/")};r.resolve=function(e,t,n){return n||(t=o(t)),i(t)?t:(n||(e=o(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?o(e+"/"+t):t)}},{}],9:[function(e,t,n){t.exports=function(e,t,n){var r=n||8192,i=r>>>1,o=null,s=r;return function(n){if(n<1||n>i)return e(n);s+n>r&&(o=e(r),s=0);var a=t.call(o,s,s+=n);return 7&s&&(s=1+(7|s)),a}}},{}],10:[function(e,t,n){var r=n;r.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},r.read=function(e,t,n){if(n-t<1)return"";for(var r,i=null,o=[],s=0;t<n;)(r=e[t++])<128?o[s++]=r:r>191&&r<224?o[s++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(r>>10),o[s++]=56320+(1023&r)):o[s++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},r.write=function(e,t,n){for(var r,i,o=n,s=0;s<e.length;++s)(r=e.charCodeAt(s))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(s+1)))?(r=65536+((1023&r)<<10)+(1023&i),++s,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-o}},{}],11:[function(e,t,n){var r=n,i=e(14),o=e(33);function s(e,t,n,r){if(t.resolvedType)if(t.resolvedType instanceof i){e("switch(d%s){",r);for(var o=t.resolvedType.values,s=Object.keys(o),a=0;a<s.length;++a)t.repeated&&o[s[a]]===t.typeDefault&&e("default:"),e("case%j:",s[a])("case %i:",o[s[a]])("m%s=%j",r,o[s[a]])("break");e("}")}else e('if(typeof d%s!=="object")',r)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,n,r);else{var c=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",r,r);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,c)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length)",r)("m%s=d%s",r,r);break;case"string":e("m%s=String(d%s)",r,r);break;case"bool":e("m%s=Boolean(d%s)",r,r)}}return e}function a(e,t,n,r){if(t.resolvedType)t.resolvedType instanceof i?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",r,n,r,r):e("d%s=types[%i].toObject(m%s,o)",r,n,r);else{var o=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,o?"true":"",r);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:e("d%s=m%s",r,r)}}return e}r.fromObject=function(e){var t=e.fieldsArray,n=o.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return n("return new this.ctor");n("var m=new this.ctor");for(var r=0;r<t.length;++r){var a=t[r].resolve(),c=o.safeProp(a.name);a.map?(n("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),s(n,a,r,c+"[ks[i]]")("}")("}")):a.repeated?(n("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),s(n,a,r,c+"[i]")("}")("}")):(a.resolvedType instanceof i||n("if(d%s!=null){",c),s(n,a,r,c),a.resolvedType instanceof i||n("}"))}return n("return m")},r.toObject=function(e){var t=e.fieldsArray.slice().sort(o.compareFieldsById);if(!t.length)return o.codegen()("return {}");for(var n=o.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],s=[],c=[],l=0;l<t.length;++l)t[l].partOf||(t[l].resolve().repeated?r:t[l].map?s:c).push(t[l]);if(r.length){for(n("if(o.arrays||o.defaults){"),l=0;l<r.length;++l)n("d%s=[]",o.safeProp(r[l].name));n("}")}if(s.length){for(n("if(o.objects||o.defaults){"),l=0;l<s.length;++l)n("d%s={}",o.safeProp(s[l].name));n("}")}if(c.length){for(n("if(o.defaults){"),l=0;l<c.length;++l){var d=c[l],u=o.safeProp(d.name);if(d.resolvedType instanceof i)n("d%s=o.enums===String?%j:%j",u,d.resolvedType.valuesById[d.typeDefault],d.typeDefault);else if(d.long)n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",d.typeDefault.low,d.typeDefault.high,d.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",u)("}else")("d%s=o.longs===String?%j:%i",u,d.typeDefault.toString(),d.typeDefault.toNumber());else if(d.bytes){var h="["+Array.prototype.slice.call(d.typeDefault).join(",")+"]";n("if(o.bytes===String)d%s=%j",u,String.fromCharCode.apply(String,d.typeDefault))("else{")("d%s=%s",u,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",u,u)("}")}else n("d%s=%j",u,d.typeDefault)}n("}")}var p=!1;for(l=0;l<t.length;++l){d=t[l];var f=e._fieldsArray.indexOf(d);u=o.safeProp(d.name),d.map?(p||(p=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",u,u)("d%s={}",u)("for(var j=0;j<ks2.length;++j){"),a(n,d,f,u+"[ks2[j]]")("}")):d.repeated?(n("if(m%s&&m%s.length){",u,u)("d%s=[]",u)("for(var j=0;j<m%s.length;++j){",u),a(n,d,f,u+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",u,d.name),a(n,d,f,u),d.partOf&&n("if(o.oneofs)")("d%s=%j",o.safeProp(d.partOf.name),d.name)),n("}")}return n("return d")}},{14:14,33:33}],12:[function(e,t,n){t.exports=function(e){var t=o.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var n=0;n<e.fieldsArray.length;++n){var a=e._fieldsArray[n].resolve(),c=a.resolvedType instanceof r?"int32":a.type,l="m"+o.safeProp(a.name);t("case %i:",a.id),a.map?(t("if(%s===util.emptyObject)",l)("%s={}",l)("var c2 = r.uint32()+r.pos"),i.defaults[a.keyType]!==undefined?t("k=%j",i.defaults[a.keyType]):t("k=null"),i.defaults[c]!==undefined?t("value=%j",i.defaults[c]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),i.basic[c]===undefined?t("value=types[%i].decode(r,r.uint32())",n):t("value=r.%s()",c),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),i.long[a.keyType]!==undefined?t('%s[typeof k==="object"?util.longToHash(k):k]=value',l):t("%s[k]=value",l)):a.repeated?(t("if(!(%s&&%s.length))",l,l)("%s=[]",l),i.packed[c]!==undefined&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",l,c)("}else"),i.basic[c]===undefined?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",l,n):t("%s.push(r.%s())",l,c)):i.basic[c]===undefined?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",l,n):t("%s=r.%s()",l,c),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),n=0;n<e._fieldsArray.length;++n){var d=e._fieldsArray[n];d.required&&t("if(!m.hasOwnProperty(%j))",d.name)("throw util.ProtocolError(%j,{instance:m})",s(d))}return t("return m")};var r=e(14),i=e(32),o=e(33);function s(e){return"missing required '"+e.name+"'"}},{14:14,32:32,33:33}],13:[function(e,t,n){t.exports=function(e){for(var t,n=o.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(o.compareFieldsById),c=0;c<a.length;++c){var l=a[c].resolve(),d=e._fieldsArray.indexOf(l),u=l.resolvedType instanceof r?"int32":l.type,h=i.basic[u];t="m"+o.safeProp(l.name),l.map?(n("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,l.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(l.id<<3|2)>>>0,8|i.mapKey[l.keyType],l.keyType),h===undefined?n("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",d,t):n(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,u,t),n("}")("}")):l.repeated?(n("if(%s!=null&&%s.length){",t,t),l.packed&&i.packed[u]!==undefined?n("w.uint32(%i).fork()",(l.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",u,t)("w.ldelim()"):(n("for(var i=0;i<%s.length;++i)",t),h===undefined?s(n,l,d,t+"[i]"):n("w.uint32(%i).%s(%s[i])",(l.id<<3|h)>>>0,u,t)),n("}")):(l.optional&&n("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,l.name),h===undefined?s(n,l,d,t):n("w.uint32(%i).%s(%s)",(l.id<<3|h)>>>0,u,t))}return n("return w")};var r=e(14),i=e(32),o=e(33);function s(e,t,n,r){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,r,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,r,(t.id<<3|2)>>>0)}},{14:14,32:32,33:33}],14:[function(e,t,n){t.exports=s;var r=e(22);((s.prototype=Object.create(r.prototype)).constructor=s).className="Enum";var i=e(21),o=e(33);function s(e,t,n,i,o){if(r.call(this,e,n),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=o||{},this.reserved=undefined,t)for(var s=Object.keys(t),a=0;a<s.length;++a)"number"==typeof t[s[a]]&&(this.valuesById[this.values[s[a]]=t[s[a]]]=s[a])}s.fromJSON=function(e,t){var n=new s(e,t.values,t.options,t.comment,t.comments);return n.reserved=t.reserved,n},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"comment",t?this.comment:undefined,"comments",t?this.comments:undefined])},s.prototype.add=function(e,t,n){if(!o.isString(e))throw TypeError("name must be a string");if(!o.isInteger(t))throw TypeError("id must be an integer");if(this.values[e]!==undefined)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[t]!==undefined){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=n||null,this},s.prototype.remove=function(e){if(!o.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},s.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},s.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)}},{21:21,22:22,33:33}],15:[function(e,t,n){t.exports=l;var r=e(22);((l.prototype=Object.create(r.prototype)).constructor=l).className="Field";var i,o=e(14),s=e(32),a=e(33),c=/^required|optional|repeated$/;function l(e,t,n,i,o,l,d){if(a.isObject(i)?(d=o,l=i,i=o=undefined):a.isObject(o)&&(d=l,l=o,o=undefined),r.call(this,e,l),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(n))throw TypeError("type must be a string");if(i!==undefined&&!c.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(o!==undefined&&!a.isString(o))throw TypeError("extend must be a string");this.rule=i&&"optional"!==i?i:undefined,this.type=n,this.id=t,this.extend=o||undefined,this.required="required"===i,this.optional=!this.required,this.repeated="repeated"===i,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&s.long[n]!==undefined,this.bytes="bytes"===n,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=d}l.fromJSON=function(e,t){return new l(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(l.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),l.prototype.setOption=function(e,t,n){return"packed"===e&&(this._packed=null),r.prototype.setOption.call(this,e,t,n)},l.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])},l.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=s.defaults[this.type])===undefined&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof i?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof o&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(this.options.packed===undefined||!this.resolvedType||this.resolvedType instanceof o)||delete this.options.packed,Object.keys(this.options).length||(this.options=undefined)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof i&&(this.parent.ctor.prototype[this.name]=this.defaultValue),r.prototype.resolve.call(this)},l.d=function(e,t,n,r){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==typeof t&&(t=a.decorateEnum(t).name),function(i,o){a.decorateType(i.constructor).add(new l(o,e,t,n,{default:r}))}},l._configure=function(e){i=e}},{14:14,22:22,32:32,33:33}],16:[function(e,t,n){var r=t.exports=e(17);r.build="light",r.load=function(e,t,n){return"function"==typeof t?(n=t,t=new r.Root):t||(t=new r.Root),t.load(e,n)},r.loadSync=function(e,t){return t||(t=new r.Root),t.loadSync(e)},r.encoder=e(13),r.decoder=e(12),r.verifier=e(36),r.converter=e(11),r.ReflectionObject=e(22),r.Namespace=e(21),r.Root=e(26),r.Enum=e(14),r.Type=e(31),r.Field=e(15),r.OneOf=e(23),r.MapField=e(18),r.Service=e(30),r.Method=e(20),r.Message=e(19),r.wrappers=e(37),r.types=e(32),r.util=e(33),r.ReflectionObject._configure(r.Root),r.Namespace._configure(r.Type,r.Service,r.Enum),r.Root._configure(r.Type),r.Field._configure(r.Type)},{11:11,12:12,13:13,14:14,15:15,17:17,18:18,19:19,20:20,21:21,22:22,23:23,26:26,30:30,31:31,32:32,33:33,36:36,37:37}],17:[function(e,t,n){var r=n;function i(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=e(38),r.BufferWriter=e(39),r.Reader=e(24),r.BufferReader=e(25),r.util=e(35),r.rpc=e(28),r.roots=e(27),r.configure=i,i()},{24:24,25:25,27:27,28:28,35:35,38:38,39:39}],18:[function(e,t,n){t.exports=s;var r=e(15);((s.prototype=Object.create(r.prototype)).constructor=s).className="MapField";var i=e(32),o=e(33);function s(e,t,n,i,s,a){if(r.call(this,e,t,i,undefined,undefined,s,a),!o.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0}s.fromJSON=function(e,t){return new s(e,t.id,t.keyType,t.type,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])},s.prototype.resolve=function(){if(this.resolved)return this;if(i.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return r.prototype.resolve.call(this)},s.d=function(e,t,n){return"function"==typeof n?n=o.decorateType(n).name:n&&"object"==typeof n&&(n=o.decorateEnum(n).name),function(r,i){o.decorateType(r.constructor).add(new s(i,e,t,n))}}},{15:15,32:32,33:33}],19:[function(e,t,n){t.exports=i;var r=e(35);function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)this[t[n]]=e[t[n]]}i.create=function(e){return this.$type.create(e)},i.encode=function(e,t){return this.$type.encode(e,t)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions)}},{35:35}],20:[function(e,t,n){t.exports=o;var r=e(22);((o.prototype=Object.create(r.prototype)).constructor=o).className="Method";var i=e(33);function o(e,t,n,o,s,a,c,l){if(i.isObject(s)?(c=s,s=a=undefined):i.isObject(a)&&(c=a,a=undefined),t!==undefined&&!i.isString(t))throw TypeError("type must be a string");if(!i.isString(n))throw TypeError("requestType must be a string");if(!i.isString(o))throw TypeError("responseType must be a string");r.call(this,e,c),this.type=t||"rpc",this.requestType=n,this.requestStream=!!s||undefined,this.responseType=o,this.responseStream=!!a||undefined,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=l}o.fromJSON=function(e,t){return new o(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["type","rpc"!==this.type&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:undefined])},o.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),r.prototype.resolve.call(this))}},{22:22,33:33}],21:[function(e,t,n){t.exports=d;var r=e(22);((d.prototype=Object.create(r.prototype)).constructor=d).className="Namespace";var i,o,s,a=e(15),c=e(33);function l(e,t){if(!e||!e.length)return undefined;for(var n={},r=0;r<e.length;++r)n[e[r].name]=e[r].toJSON(t);return n}function d(e,t){r.call(this,e,t),this.nested=undefined,this._nestedArray=null}function u(e){return e._nestedArray=null,e}d.fromJSON=function(e,t){return new d(e,t.options).addJSON(t.nested)},d.arrayToJSON=l,d.isReservedId=function(e,t){if(e)for(var n=0;n<e.length;++n)if("string"!=typeof e[n]&&e[n][0]<=t&&e[n][1]>t)return!0;return!1},d.isReservedName=function(e,t){if(e)for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1},Object.defineProperty(d.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=c.toArray(this.nested))}}),d.prototype.toJSON=function(e){return c.toObject(["options",this.options,"nested",l(this.nestedArray,e)])},d.prototype.addJSON=function(e){if(e)for(var t,n=Object.keys(e),r=0;r<n.length;++r)t=e[n[r]],this.add((t.fields!==undefined?i.fromJSON:t.values!==undefined?s.fromJSON:t.methods!==undefined?o.fromJSON:t.id!==undefined?a.fromJSON:d.fromJSON)(n[r],t));return this},d.prototype.get=function(e){return this.nested&&this.nested[e]||null},d.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof s)return this.nested[e].values;throw Error("no such enum: "+e)},d.prototype.add=function(e){if(!(e instanceof a&&e.extend!==undefined||e instanceof i||e instanceof s||e instanceof o||e instanceof d))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof d&&e instanceof d)||t instanceof i||t instanceof o)throw Error("duplicate name '"+e.name+"' in "+this);for(var n=t.nestedArray,r=0;r<n.length;++r)e.add(n[r]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),u(this)},d.prototype.remove=function(e){if(!(e instanceof r))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=undefined),e.onRemove(this),u(this)},d.prototype.define=function(e,t){if(c.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var n=this;e.length>0;){var r=e.shift();if(n.nested&&n.nested[r]){if(!((n=n.nested[r])instanceof d))throw Error("path conflicts with non-namespace objects")}else n.add(n=new d(r))}return t&&n.addJSON(t),n},d.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof d?e[t++].resolveAll():e[t++].resolve();return this.resolve()},d.prototype.lookup=function(e,t,n){if("boolean"==typeof t?(n=t,t=undefined):t&&!Array.isArray(t)&&(t=[t]),c.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var r=this.get(e[0]);if(r){if(1===e.length){if(!t||t.indexOf(r.constructor)>-1)return r}else if(r instanceof d&&(r=r.lookup(e.slice(1),t,!0)))return r}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof d&&(r=this._nestedArray[i].lookup(e,t,!0)))return r;return null===this.parent||n?null:this.parent.lookup(e,t)},d.prototype.lookupType=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such type: "+e);return t},d.prototype.lookupEnum=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},d.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[i,s]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},d.prototype.lookupService=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},d._configure=function(e,t,n){i=e,o=t,s=n}},{15:15,22:22,33:33}],22:[function(e,t,n){t.exports=o,o.className="ReflectionObject";var r,i=e(33);function o(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(o.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),o.prototype.toJSON=function(){throw Error()},o.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof r&&t._handleAdd(this)},o.prototype.onRemove=function(e){var t=e.root;t instanceof r&&t._handleRemove(this),this.parent=null,this.resolved=!1},o.prototype.resolve=function(){return this.resolved||this.root instanceof r&&(this.resolved=!0),this},o.prototype.getOption=function(e){return this.options?this.options[e]:undefined},o.prototype.setOption=function(e,t,n){return n&&this.options&&this.options[e]!==undefined||((this.options||(this.options={}))[e]=t),this},o.prototype.setParsedOption=function(e,t,n){this.parsedOptions||(this.parsedOptions=[]);var r=this.parsedOptions;if(n){var o=r.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(o){var s=o[e];i.setProperty(s,n,t)}else(o={})[e]=i.setProperty({},n,t),r.push(o)}else{var a={};a[e]=t,r.push(a)}return this},o.prototype.setOptions=function(e,t){if(e)for(var n=Object.keys(e),r=0;r<n.length;++r)this.setOption(n[r],e[n[r]],t);return this},o.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},o._configure=function(e){r=e}},{33:33}],23:[function(e,t,n){t.exports=s;var r=e(22);((s.prototype=Object.create(r.prototype)).constructor=s).className="OneOf";var i=e(15),o=e(33);function s(e,t,n,i){if(Array.isArray(t)||(n=t,t=undefined),r.call(this,e,n),t!==undefined&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}s.fromJSON=function(e,t){return new s(e,t.oneof,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:undefined])},s.prototype.add=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},s.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},s.prototype.onAdd=function(e){r.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var n=e.get(this.oneof[t]);n&&!n.partOf&&(n.partOf=this,this.fieldsArray.push(n))}a(this)},s.prototype.onRemove=function(e){for(var t,n=0;n<this.fieldsArray.length;++n)(t=this.fieldsArray[n]).parent&&t.parent.remove(t);r.prototype.onRemove.call(this,e)},s.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,n){o.decorateType(t.constructor).add(new s(n,e)),Object.defineProperty(t,n,{get:o.oneOfGetter(e),set:o.oneOfSetter(e)})}}},{15:15,22:22,33:33}],24:[function(e,t,n){t.exports=c;var r,i=e(35),o=i.LongBits,s=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l,d="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},u=function(){return i.Buffer?function(e){return(c.create=function(e){return i.Buffer.isBuffer(e)?new r(e):d(e)})(e)}:d};function h(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new o(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=u(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return l}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e,c.create=u(),r._configure();var t=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},{35:35}],25:[function(e,t,n){t.exports=o;var r=e(24);(o.prototype=Object.create(r.prototype)).constructor=o;var i=e(35);function o(e){r.call(this,e)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},{24:24,35:35}],26:[function(e,t,n){t.exports=u;var r=e(21);((u.prototype=Object.create(r.prototype)).constructor=u).className="Root";var i,o,s,a=e(15),c=e(14),l=e(23),d=e(33);function u(e){r.call(this,"",e),this.deferred=[],this.files=[]}function h(){}u.fromJSON=function(e,t){return t||(t=new u),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},u.prototype.resolvePath=d.path.resolve,u.prototype.fetch=d.fetch,u.prototype.load=function e(t,n,r){"function"==typeof n&&(r=n,n=undefined);var i=this;if(!r)return d.asPromise(e,i,t,n);var a=r===h;function c(e,t){if(r){var n=r;if(r=null,a)throw e;n(e,t)}}function l(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var n=e.substring(t);if(n in s)return n}return null}function u(e,t){try{if(d.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),d.isString(t)){o.filename=e;var r,s=o(t,i,n),u=0;if(s.imports)for(;u<s.imports.length;++u)(r=l(s.imports[u])||i.resolvePath(e,s.imports[u]))&&p(r);if(s.weakImports)for(u=0;u<s.weakImports.length;++u)(r=l(s.weakImports[u])||i.resolvePath(e,s.weakImports[u]))&&p(r,!0)}else i.setOptions(t.options).addJSON(t.nested)}catch(e){c(e)}a||f||c(null,i)}function p(e,t){if(!(i.files.indexOf(e)>-1))if(i.files.push(e),e in s)a?u(e,s[e]):(++f,setTimeout((function(){--f,u(e,s[e])})));else if(a){var n;try{n=d.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||c(e))}u(e,n)}else++f,i.fetch(e,(function(n,o){--f,r&&(n?t?f||c(null,i):c(n):u(e,o))}))}var f=0;d.isString(t)&&(t=[t]);for(var m,g=0;g<t.length;++g)(m=i.resolvePath("",t[g]))&&p(m);return a?i:(f||c(null,i),undefined)},u.prototype.loadSync=function(e,t){if(!d.isNode)throw Error("not supported");return this.load(e,t,h)},u.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return r.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function f(e,t){var n=t.parent.lookup(t.extend);if(n){var r=new a(t.fullName,t.id,t.type,t.rule,undefined,t.options);return r.declaringField=t,t.extensionField=r,n.add(r),!0}return!1}u.prototype._handleAdd=function(e){if(e instanceof a)e.extend===undefined||e.extensionField||f(0,e)||this.deferred.push(e);else if(e instanceof c)p.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof l)){if(e instanceof i)for(var t=0;t<this.deferred.length;)f(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);p.test(e.name)&&(e.parent[e.name]=e)}},u.prototype._handleRemove=function(e){if(e instanceof a){if(e.extend!==undefined)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof c)p.test(e.name)&&delete e.parent[e.name];else if(e instanceof r){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);p.test(e.name)&&delete e.parent[e.name]}},u._configure=function(e,t,n){i=e,o=t,s=n}},{14:14,15:15,21:21,23:23,33:33}],27:[function(e,t,n){t.exports={}},{}],28:[function(e,t,n){n.Service=e(29)},{29:29}],29:[function(e,t,n){t.exports=i;var r=e(35);function i(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,n,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return r.asPromise(e,a,t,n,i,o);if(!a.rpcImpl)return setTimeout((function(){s(Error("already ended"))}),0),undefined;try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return a.emit("error",e,t),s(e);if(null===n)return a.end(!0),undefined;if(!(n instanceof i))try{n=i[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",n,t),s(null,n)}))}catch(e){return a.emit("error",e,t),setTimeout((function(){s(e)}),0),undefined}},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{35:35}],30:[function(e,t,n){t.exports=a;var r=e(21);((a.prototype=Object.create(r.prototype)).constructor=a).className="Service";var i=e(20),o=e(33),s=e(28);function a(e,t){r.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var n=new a(e,t.options);if(t.methods)for(var r=Object.keys(t.methods),o=0;o<r.length;++o)n.add(i.fromJSON(r[o],t.methods[r[o]]));return t.nested&&n.addJSON(t.nested),n.comment=t.comment,n},a.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return o.toObject(["options",t&&t.options||undefined,"methods",r.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||undefined,"comment",n?this.comment:undefined])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=o.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||r.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return r.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof i?(this.methods[e.name]=e,e.parent=this,c(this)):r.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return r.prototype.remove.call(this,e)},a.prototype.create=function(e,t,n){for(var r,i=new s.Service(e,t,n),a=0;a<this.methodsArray.length;++a){var c=o.lcFirst((r=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");i[c]=o.codegen(["r","c"],o.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return i}},{20:20,21:21,28:28,33:33}],31:[function(e,t,n){t.exports=v;var r=e(21);((v.prototype=Object.create(r.prototype)).constructor=v).className="Type";var i=e(14),o=e(23),s=e(15),a=e(18),c=e(30),l=e(19),d=e(24),u=e(38),h=e(33),p=e(13),f=e(12),m=e(36),g=e(11),y=e(37);function v(e,t){r.call(this,e,t),this.fields={},this.oneofs=undefined,this.extensions=undefined,this.reserved=undefined,this.group=undefined,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function _(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(v.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var n=this.fields[e[t]],r=n.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=n}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=h.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=h.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=v.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof l||((e.prototype=new l).constructor=e,h.merge(e.prototype,t)),e.$type=e.prototype.$type=this,h.merge(e,l,!0),this._ctor=e;for(var n=0;n<this.fieldsArray.length;++n)this._fieldsArray[n].resolve();var r={};for(n=0;n<this.oneofsArray.length;++n)r[this._oneofsArray[n].resolve().name]={get:h.oneOfGetter(this._oneofsArray[n].oneof),set:h.oneOfSetter(this._oneofsArray[n].oneof)};n&&Object.defineProperties(e.prototype,r)}}}),v.generateConstructor=function(e){for(var t,n=h.codegen(["p"],e.name),r=0;r<e.fieldsArray.length;++r)(t=e._fieldsArray[r]).map?n("this%s={}",h.safeProp(t.name)):t.repeated&&n("this%s=[]",h.safeProp(t.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},v.fromJSON=function(e,t){var n=new v(e,t.options);n.extensions=t.extensions,n.reserved=t.reserved;for(var l=Object.keys(t.fields),d=0;d<l.length;++d)n.add((void 0!==t.fields[l[d]].keyType?a.fromJSON:s.fromJSON)(l[d],t.fields[l[d]]));if(t.oneofs)for(l=Object.keys(t.oneofs),d=0;d<l.length;++d)n.add(o.fromJSON(l[d],t.oneofs[l[d]]));if(t.nested)for(l=Object.keys(t.nested),d=0;d<l.length;++d){var u=t.nested[l[d]];n.add((u.id!==undefined?s.fromJSON:u.fields!==undefined?v.fromJSON:u.values!==undefined?i.fromJSON:u.methods!==undefined?c.fromJSON:r.fromJSON)(l[d],u))}return t.extensions&&t.extensions.length&&(n.extensions=t.extensions),t.reserved&&t.reserved.length&&(n.reserved=t.reserved),t.group&&(n.group=!0),t.comment&&(n.comment=t.comment),n},v.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return h.toObject(["options",t&&t.options||undefined,"oneofs",r.arrayToJSON(this.oneofsArray,e),"fields",r.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",t&&t.nested||undefined,"comment",n?this.comment:undefined])},v.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var n=this.oneofsArray;for(t=0;t<n.length;)n[t++].resolve();return r.prototype.resolveAll.call(this)},v.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},v.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof s&&e.extend===undefined){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),_(this)}return e instanceof o?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),_(this)):r.prototype.add.call(this,e)},v.prototype.remove=function(e){if(e instanceof s&&e.extend===undefined){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),_(this)}if(e instanceof o){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),_(this)}return r.prototype.remove.call(this,e)},v.prototype.isReservedId=function(e){return r.isReservedId(this.reserved,e)},v.prototype.isReservedName=function(e){return r.isReservedName(this.reserved,e)},v.prototype.create=function(e){return new this.ctor(e)},v.prototype.setup=function(){for(var e=this.fullName,t=[],n=0;n<this.fieldsArray.length;++n)t.push(this._fieldsArray[n].resolve().resolvedType);this.encode=p(this)({Writer:u,types:t,util:h}),this.decode=f(this)({Reader:d,types:t,util:h}),this.verify=m(this)({types:t,util:h}),this.fromObject=g.fromObject(this)({types:t,util:h}),this.toObject=g.toObject(this)({types:t,util:h});var r=y[e];if(r){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=r.fromObject.bind(i),i.toObject=this.toObject,this.toObject=r.toObject.bind(i)}return this},v.prototype.encode=function(e,t){return this.setup().encode(e,t)},v.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},v.prototype.decode=function(e,t){return this.setup().decode(e,t)},v.prototype.decodeDelimited=function(e){return e instanceof d||(e=d.create(e)),this.decode(e,e.uint32())},v.prototype.verify=function(e){return this.setup().verify(e)},v.prototype.fromObject=function(e){return this.setup().fromObject(e)},v.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},v.d=function(e){return function(t){h.decorateType(t,e)}}},{11:11,12:12,13:13,14:14,15:15,18:18,19:19,21:21,23:23,24:24,30:30,33:33,36:36,37:37,38:38}],32:[function(e,t,n){var r=n,i=e(33),o=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function s(e,t){var n=0,r={};for(t|=0;n<e.length;)r[o[n+t]]=e[n++];return r}r.basic=s([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=s([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),r.long=s([0,0,0,1,1],7),r.mapKey=s([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=s([1,5,0,0,0,5,5,0,0,0,1,1,0])},{33:33}],33:[function(e,t,n){var r,i,o=t.exports=e(35),s=e(27);o.codegen=e(3),o.fetch=e(5),o.path=e(8),o.fs=o.inquire("fs"),o.toArray=function(e){if(e){for(var t=Object.keys(e),n=new Array(t.length),r=0;r<t.length;)n[r]=e[t[r++]];return n}return[]},o.toObject=function(e){for(var t={},n=0;n<e.length;){var r=e[n++],i=e[n++];i!==undefined&&(t[r]=i)}return t};var a=/\\/g,c=/"/g;o.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},o.safeProp=function(e){return!/^[$\w_]+$/.test(e)||o.isReserved(e)?'["'+e.replace(a,"\\\\").replace(c,'\\"')+'"]':"."+e},o.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var l=/_([a-z])/g;o.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(l,(function(e,t){return t.toUpperCase()}))},o.compareFieldsById=function(e,t){return e.id-t.id},o.decorateType=function(t,n){if(t.$type)return n&&t.$type.name!==n&&(o.decorateRoot.remove(t.$type),t.$type.name=n,o.decorateRoot.add(t.$type)),t.$type;r||(r=e(31));var i=new r(n||t.name);return o.decorateRoot.add(i),i.ctor=t,Object.defineProperty(t,"$type",{value:i,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:i,enumerable:!1}),i};var d=0;o.decorateEnum=function(t){if(t.$type)return t.$type;i||(i=e(14));var n=new i("Enum"+d++,t);return o.decorateRoot.add(n),Object.defineProperty(t,"$type",{value:n,enumerable:!1}),n},o.setProperty=function(e,t,n){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,n,r){var i=n.shift();if(n.length>0)t[i]=e(t[i]||{},n,r);else{var o=t[i];o&&(r=[].concat(o).concat(r)),t[i]=r}return t}(e,t=t.split("."),n)},Object.defineProperty(o,"decorateRoot",{get:function(){return s.decorated||(s.decorated=new(e(26)))}})},{14:14,26:26,27:27,3:3,31:31,35:35,5:5,8:8}],34:[function(e,t,n){t.exports=i;var r=e(35);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(r.isString(e)){if(!r.Long)return i.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):o},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===s?o:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},{35:35}],35:[function(e,t,n){var r=n;function i(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)e[r[i]]!==undefined&&n||(e[r[i]]=t[r[i]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=e(1),r.base64=e(2),r.EventEmitter=e(4),r.float=e(6),r.inquire=e(7),r.utf8=e(10),r.pool=e(9),r.LongBits=e(34),r.isNode=Boolean(void 0!==global&&global&&global.process&&global.process.versions&&global.process.versions.node),r.global=r.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=i,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&this[e[n]]!==undefined&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},{1:1,10:10,2:2,34:34,4:4,6:6,7:7,9:9}],36:[function(e,t,n){t.exports=function(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n={};e.oneofsArray.length&&t("var p={}");for(var r=0;r<e.fieldsArray.length;++r){var c=e._fieldsArray[r].resolve(),l="m"+i.safeProp(c.name);if(c.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",l,c.name),c.map)t("if(!util.isObject(%s))",l)("return%j",o(c,"object"))("var k=Object.keys(%s)",l)("for(var i=0;i<k.length;++i){"),a(t,c,"k[i]"),s(t,c,r,l+"[k[i]]")("}");else if(c.repeated)t("if(!Array.isArray(%s))",l)("return%j",o(c,"array"))("for(var i=0;i<%s.length;++i){",l),s(t,c,r,l+"[i]")("}");else{if(c.partOf){var d=i.safeProp(c.partOf.name);1===n[c.partOf.name]&&t("if(p%s===1)",d)("return%j",c.partOf.name+": multiple values"),n[c.partOf.name]=1,t("p%s=1",d)}s(t,c,r,l)}c.optional&&t("}")}return t("return null")};var r=e(14),i=e(33);function o(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function s(e,t,n,i){if(t.resolvedType)if(t.resolvedType instanceof r){e("switch(%s){",i)("default:")("return%j",o(t,"enum value"));for(var s=Object.keys(t.resolvedType.values),a=0;a<s.length;++a)e("case %i:",t.resolvedType.values[s[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",n,i)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",o(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",o(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",o(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",o(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",o(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",o(t,"buffer"))}return e}function a(e,t,n){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",n)("return%j",o(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",n)("return%j",o(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",n)("return%j",o(t,"boolean key"))}return e}},{14:14,33:33}],37:[function(e,t,n){var r=n,i=e(19);r[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),n=this.lookup(t);if(n){var r="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return-1===r.indexOf("/")&&(r="/"+r),this.create({type_url:r,value:n.encode(n.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var n="",r="";if(t&&t.json&&e.type_url&&e.value){r=e.type_url.substring(e.type_url.lastIndexOf("/")+1),n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var o=this.lookup(r);o&&(e=o.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof i){var s=e.$type.toObject(e,t);return""===n&&(n="type.googleapis.com/"),r=n+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),s["@type"]=r,s}return this.toObject(e,t)}}},{19:19}],38:[function(e,t,n){t.exports=u;var r,i=e(35),o=i.LongBits,s=i.base64,a=i.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=undefined,this.val=n}function l(){}function d(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function u(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var h=function(){return i.Buffer?function(){return(u.create=function(){return new r})()}:function(){return new u}};function p(e,t,n){t[n]=255&e}function f(e,t){this.len=e,this.next=undefined,this.val=t}function m(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function g(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}u.create=h(),u.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(u.alloc=i.pool(u.alloc,i.Array.prototype.subarray)),u.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},u.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},u.prototype.int32=function(e){return e<0?this._push(m,10,o.fromNumber(e)):this.uint32(e)},u.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},u.prototype.uint64=function(e){var t=o.from(e);return this._push(m,t.length(),t)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(m,t.length(),t)},u.prototype.bool=function(e){return this._push(p,1,e?1:0)},u.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(e){var t=o.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},u.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var y=i.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};u.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(i.isString(e)){var n=u.alloc(t=s.length(e));s.decode(e,n,0),e=n}return this.uint32(t)._push(y,t,e)},u.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},u.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new c(l,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},u.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},u.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},u._configure=function(e){r=e,u.create=h(),r._configure()}},{35:35}],39:[function(e,t,n){t.exports=o;var r=e(38);(o.prototype=Object.create(r.prototype)).constructor=o;var i=e(35);function o(){r.call(this)}function s(e,t,n){e.length<40?i.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},o.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},o._configure()},{35:35,38:38}]},{})}()}).call(this,__nested_webpack_require_657211__(33),__nested_webpack_require_657211__(60)(module))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function i(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=i;var o={},s={};function a(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=s[e])?r:(n=l(e,(0|e)<0?-1:0,!0),i&&(s[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=o[e])?r:(n=l(e,e<0?-1:0,!1),i&&(o[e]=n),n)}function c(e,t){if(isNaN(e))return t?v:y;if(t){if(e<0)return v;if(e>=f)return b}else{if(e<=-m)return I;if(e+1>=m)return T}return e<0?c(-e,t).neg():l(e%p|0,e/p|0,t)}function l(e,t,n){return new r(e,t,n)}r.fromInt=a,r.fromNumber=c,r.fromBits=l;var d=Math.pow;function u(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return y;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return u(e.substring(1),t,n).neg();for(var i=c(d(n,8)),o=y,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),l=parseInt(e.substring(s,s+a),n);if(a<8){var h=c(d(n,a));o=o.mul(h).add(c(l))}else o=(o=o.mul(i)).add(c(l))}return o.unsigned=t,o}function h(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?u(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=u,r.fromValue=h;var p=4294967296,f=p*p,m=f/2,g=a(1<<24),y=a(0);r.ZERO=y;var v=a(0,!0);r.UZERO=v;var _=a(1);r.ONE=_;var E=a(1,!0);r.UONE=E;var S=a(-1);r.NEG_ONE=S;var T=l(-1,2147483647,!1);r.MAX_VALUE=T;var b=l(-1,-1,!0);r.MAX_UNSIGNED_VALUE=b;var I=l(0,-2147483648,!1);r.MIN_VALUE=I;var N=r.prototype;N.toInt=function(){return this.unsigned?this.low>>>0:this.low},N.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},N.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(I)){var t=c(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=c(d(e,6),this.unsigned),o=this,s="";;){var a=o.div(i),l=(o.sub(a.mul(i)).toInt()>>>0).toString(e);if((o=a).isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}},N.getHighBits=function(){return this.high},N.getHighBitsUnsigned=function(){return this.high>>>0},N.getLowBits=function(){return this.low},N.getLowBitsUnsigned=function(){return this.low>>>0},N.getNumBitsAbs=function(){if(this.isNegative())return this.eq(I)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},N.isZero=function(){return 0===this.high&&0===this.low},N.eqz=N.isZero,N.isNegative=function(){return!this.unsigned&&this.high<0},N.isPositive=function(){return this.unsigned||this.high>=0},N.isOdd=function(){return 1==(1&this.low)},N.isEven=function(){return 0==(1&this.low)},N.equals=function(e){return i(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},N.eq=N.equals,N.notEquals=function(e){return!this.eq(e)},N.neq=N.notEquals,N.ne=N.notEquals,N.lessThan=function(e){return this.comp(e)<0},N.lt=N.lessThan,N.lessThanOrEqual=function(e){return this.comp(e)<=0},N.lte=N.lessThanOrEqual,N.le=N.lessThanOrEqual,N.greaterThan=function(e){return this.comp(e)>0},N.gt=N.greaterThan,N.greaterThanOrEqual=function(e){return this.comp(e)>=0},N.gte=N.greaterThanOrEqual,N.ge=N.greaterThanOrEqual,N.compare=function(e){if(i(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},N.comp=N.compare,N.negate=function(){return!this.unsigned&&this.eq(I)?I:this.not().add(_)},N.neg=N.negate,N.add=function(e){i(e)||(e=h(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,c=e.low>>>16,d=0,u=0,p=0,f=0;return p+=(f+=o+(65535&e.low))>>>16,u+=(p+=r+c)>>>16,d+=(u+=n+a)>>>16,d+=t+s,l((p&=65535)<<16|(f&=65535),(d&=65535)<<16|(u&=65535),this.unsigned)},N.subtract=function(e){return i(e)||(e=h(e)),this.add(e.neg())},N.sub=N.subtract,N.multiply=function(e){if(this.isZero())return y;if(i(e)||(e=h(e)),n)return l(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return y;if(this.eq(I))return e.isOdd()?I:y;if(e.eq(I))return this.isOdd()?I:y;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return c(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,o=this.low>>>16,s=65535&this.low,a=e.high>>>16,d=65535&e.high,u=e.low>>>16,p=65535&e.low,f=0,m=0,v=0,_=0;return v+=(_+=s*p)>>>16,m+=(v+=o*p)>>>16,v&=65535,m+=(v+=s*u)>>>16,f+=(m+=r*p)>>>16,m&=65535,f+=(m+=o*u)>>>16,m&=65535,f+=(m+=s*d)>>>16,f+=t*p+r*u+o*d+s*a,l((v&=65535)<<16|(_&=65535),(f&=65535)<<16|(m&=65535),this.unsigned)},N.mul=N.multiply,N.divide=function(e){if(i(e)||(e=h(e)),e.isZero())throw Error("division by zero");var t,r,o;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return E;o=v}else{if(this.eq(I))return e.eq(_)||e.eq(S)?I:e.eq(I)?_:(t=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?_:S:(r=this.sub(e.mul(t)),o=t.add(r.div(e)));if(e.eq(I))return this.unsigned?v:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=y}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(t)/Math.LN2),a=s<=48?1:d(2,s-48),u=c(t),p=u.mul(e);p.isNegative()||p.gt(r);)p=(u=c(t-=a,this.unsigned)).mul(e);u.isZero()&&(u=_),o=o.add(u),r=r.sub(p)}return o},N.div=N.divide,N.modulo=function(e){return i(e)||(e=h(e)),n?l((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},N.mod=N.modulo,N.rem=N.modulo,N.not=function(){return l(~this.low,~this.high,this.unsigned)},N.and=function(e){return i(e)||(e=h(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},N.or=function(e){return i(e)||(e=h(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},N.xor=function(e){return i(e)||(e=h(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},N.shiftLeft=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},N.shl=N.shiftLeft,N.shiftRight=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},N.shr=N.shiftRight,N.shiftRightUnsigned=function(e){if(i(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},N.shru=N.shiftRightUnsigned,N.shr_u=N.shiftRightUnsigned,N.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},N.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},N.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},N.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},N.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e){e.exports=JSON.parse('{"PeerPublishStatus":408,"JoinChannelTimeout":407,"OnUpdateStream":356,"OnRemoveStream":355,"OnAddVideoStream":353,"OnAddAudioStream":352,"FirstAudioDecode":351,"FirstVideoDecode":350,"FirstAudioReceived":349,"FirstVideoReceived":348,"ReqUserAccount":196,"ApiInvoke":41,"RequestProxyWorkerManager":36,"RequestProxyAppCenter":35,"VideoSendingStopped":34,"AudioSendingStopped":33,"StreamSwitch":32,"FirstFrame":31,"Publish":30,"Subscribe":29,"JoinGateway":28,"JoinChooseServer":27,"Session":26,"APWorkerEvent":160,"WorkerEvent":156,"JoinWebProxyAP":700,"WebSocketQuit":671}')},function(e){e.exports=JSON.parse('{"nested":{"protobuf":{"nested":{"Session":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"version":{"type":"string","id":11},"browser":{"type":"string","id":12},"appid":{"type":"string","id":13},"mode":{"type":"string","id":14},"extend":{"type":"string","id":15},"process":{"type":"string","id":16},"build":{"type":"string","id":17},"ipv6":{"type":"string","id":18},"sourceHost":{"type":"string","id":19},"sourcePath":{"type":"string","id":20},"collectorHost":{"type":"string","id":21},"collectorName":{"type":"string","id":22}}},"JoinChooseServer":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"chooseServerAddr":{"type":"string","id":11},"chooseServerAddrList":{"type":"string","id":12},"errorCode":{"type":"string","id":13},"eventElapse":{"type":"int64","id":14},"chooseServerIp":{"type":"string","id":15}}},"JoinGateway":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"gatewayAddr":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"eventElapse":{"type":"int64","id":13},"firstSuccess":{"type":"bool","id":14}}},"Subscribe":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"localSdp":{"type":"string","id":11},"remoteSdp":{"type":"string","id":12},"extend":{"type":"string","id":13},"errorCode":{"type":"string","id":14},"eventElapse":{"type":"int64","id":15},"video":{"type":"bool","id":16},"audio":{"type":"bool","id":17},"subscribeRequestid":{"type":"int32","id":18},"p2pid":{"type":"int32","id":19}}},"Publish":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"localSdp":{"type":"string","id":11},"remoteSdp":{"type":"string","id":12},"extend":{"type":"string","id":13},"errorCode":{"type":"string","id":14},"eventElapse":{"type":"int64","id":15},"videoName":{"type":"string","id":16},"audioName":{"type":"string","id":17},"screenName":{"type":"string","id":18},"video":{"type":"bool","id":19},"audio":{"type":"bool","id":20},"publishRequestid":{"type":"int32","id":21},"p2pid":{"type":"int32","id":22},"screenshare":{"type":"bool","id":23}}},"FirstFrame":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"extend":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"width":{"type":"int64","id":13},"height":{"type":"int64","id":14}}},"StreamSwitch":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"isDual":{"type":"bool","id":11}}},"AudioSendingStopped":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"reason":{"type":"string","id":10},"eventType":{"type":"string","id":11}}},"VideoSendingStopped":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"reason":{"type":"string","id":10},"eventType":{"type":"string","id":11}}},"RequestProxyAppCenter":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"APAddr":{"type":"string","id":11},"workerManagerList":{"type":"string","id":12},"errorCode":{"type":"string","id":13},"eventElapse":{"type":"int64","id":14},"extend":{"type":"string","id":15},"response":{"type":"string","id":16}}},"RequestProxyWorkerManager":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"workerManagerAddr":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"eventElapse":{"type":"int64","id":13},"extend":{"type":"string","id":14},"response":{"type":"string","id":15}}},"ApiInvoke":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"apiName":{"type":"string","id":9},"errorCode":{"type":"string","id":10},"options":{"type":"string","id":11},"execElapse":{"type":"int64","id":12},"execStates":{"type":"string","id":13},"execResult":{"type":"string","id":14},"invokeId":{"type":"int64","id":15}}},"ReqUserAccount":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"eventType":{"type":"string","id":9},"serverAddress":{"type":"string","id":10},"stringUid":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"extend":{"type":"string","id":13}}},"FirstVideoReceived":{"fields":{"lts":{"type":"int64","id":1},"peer":{"type":"int64","id":2},"elapse":{"type":"int64","id":3},"sid":{"type":"string","id":4},"cname":{"type":"string","id":5},"cid":{"type":"int64","id":6},"uid":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"FirstAudioReceived":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"FirstVideoDecode":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"videowidth":{"type":"int32","id":9},"videoheight":{"type":"int32","id":10},"subscribeRequestid":{"type":"int32","id":11},"p2pid":{"type":"int32","id":12},"subscribeElapse":{"type":"int64","id":13}}},"FirstAudioDecode":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"OnAddAudioStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnAddVideoStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnRemoveStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnUpdateStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"audio":{"type":"bool","id":8},"video":{"type":"bool","id":9}}},"JoinChannelTimeout":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"elapse":{"type":"int64","id":6},"timeout":{"type":"int32","id":7}}},"PeerPublishStatus":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"peer":{"type":"int64","id":6},"elapse":{"type":"int64","id":7},"peerPublishDuration":{"type":"int64","id":8},"joinChannelSuccessElapse":{"type":"int64","id":9},"subscribeElapse":{"type":"int64","id":10},"audiotag":{"type":"int32","id":11},"videotag":{"type":"int32","id":12},"screensharetag":{"type":"int32","id":13},"firsttimetag":{"type":"int32","id":14}}},"WebSocketQuit":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"elapse":{"type":"int64","id":6},"succ":{"type":"int32","id":7},"errorCode":{"type":"string","id":8},"ip":{"type":"string","id":9}}},"Message":{"fields":{"id":{"type":"int64","id":1},"msg":{"type":"bytes","id":2}}},"ProtoRaws":{"fields":{"sendTs":{"type":"int64","id":1},"payloads":{"rule":"repeated","type":"Message","id":2},"vid":{"type":"int32","id":3}}},"APWorkerEvent":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"ec":{"type":"int32","id":10},"sc":{"type":"int32","id":11},"serverIp":{"type":"string","id":12},"firstSuccess":{"type":"bool","id":13},"responseTime":{"type":"int32","id":14},"serviceName":{"type":"string","id":15},"responseDetail":{"type":"string","id":16}}},"WorkerEvent":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"command":{"type":"string","id":10},"actionType":{"type":"string","id":11},"url":{"type":"string","id":12},"payload":{"type":"string","id":13},"serverCode":{"type":"int32","id":14},"code":{"type":"int32","id":15},"traceId":{"type":"string","id":16},"workerType":{"type":"int32","id":17},"responseTime":{"type":"int32","id":18},"requestId":{"type":"int64","id":19},"packIndex":{"type":"int32","id":20},"requestByUser":{"type":"bool","id":21},"tid":{"type":"string","id":22}}},"JoinWebProxyAP":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"sucess":{"type":"int32","id":7},"elapse":{"type":"int64","id":8},"eventType":{"type":"string","id":9},"apServerAddr":{"type":"string","id":10},"turnServerAddrList":{"type":"string","id":11},"errorCode":{"type":"string","id":12}}}}}}}')},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function a(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),s=new T(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=_(s,n);if(a){if(a===l)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var d=c(e,t,n);if("normal"===d.type){if(r=n.done?"completed":"suspendedYield",d.arg===l)continue;return{value:d.arg,done:n.done}}"throw"===d.type&&(r="completed",n.method="throw",n.arg=d.arg)}}}(e,n,s),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=a;var l={};function d(){}function u(){}function h(){}var p={};p[i]=function(){return this};var f=Object.getPrototypeOf,m=f&&f(f(b([])));m&&m!==t&&n.call(m,i)&&(p=m);var g=h.prototype=d.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function v(e,t){var r;this._invoke=function(i,o){function s(){return new t((function(r,s){!function r(i,o,s,a){var l=c(e[i],e,o);if("throw"!==l.type){var d=l.arg,u=d.value;return u&&"object"==typeof u&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(u).then((function(e){d.value=e,s(d)}),(function(e){return r("throw",e,s,a)}))}a(l.arg)}(i,o,r,s)}))}return r=r?r.then(s,s):s()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function b(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return u.prototype=g.constructor=h,h.constructor=u,h[s]=u.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===u||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(v.prototype),v.prototype[o]=function(){return this},e.AsyncIterator=v,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var s=new v(a(t,n,r,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},y(g),g[s]="Generator",g[i]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=b,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:b(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="object"==typeof window&&window.RTCPeerConnection,i="object"==typeof window&&window.webkitRTCPeerConnection,o="object"==typeof window&&window.mozRTCPeerConnection;t.createRTCPeerConnection=function(e){var t=r||i||o;return t?new t(e):null}},function(e,t,n){var r;!function(t){"use strict";function i(){}var o=i.prototype,s=t.EventEmitter;function a(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function c(e){return function(){return this[e].apply(this,arguments)}}o.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},o.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},o.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},o.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(e),i="object"==typeof t;for(n in r)r.hasOwnProperty(n)&&-1===a(r[n],t)&&r[n].push(i?t:{listener:t,once:!1});return this},o.on=c("addListener"),o.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},o.once=c("addOnceListener"),o.defineEvent=function(e){return this.getListeners(e),this},o.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},o.removeListener=function(e,t){var n,r,i=this.getListenersAsObject(e);for(r in i)i.hasOwnProperty(r)&&-1!==(n=a(i[r],t))&&i[r].splice(n,1);return this},o.off=c("removeListener"),o.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},o.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},o.manipulateListeners=function(e,t,n){var r,i,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)o.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?o.call(this,r,i):s.call(this,r,i));return this},o.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},o.removeAllListeners=c("removeEvent"),o.emitEvent=function(e,t){var n,r,i,o,s=this.getListenersAsObject(e);for(o in s)if(s.hasOwnProperty(o))for(n=s[o].slice(0),i=0;i<n.length;i++)!0===(r=n[i]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},o.trigger=c("emitEvent"),o.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},o.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},o._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},o._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return t.EventEmitter=s,i},void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}("undefined"!=typeof window?window:this||{})},function(e,t,n){var r=n(35);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){(function(t){var r;e.exports=(r=r||function(e,r){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==t&&t.crypto&&(i=t.crypto),!i)try{i=n(74)}catch(e){}var o=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),a={},c=a.lib={},l=c.Base={extend:function(e){var t=s(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},d=c.WordArray=l.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=s<<24-(r+o)%4*8}else for(var a=0;a<i;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(o());return new d.init(t,e)}}),u=a.enc={},h=u.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new d.init(n,t/2)}},p=u.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new d.init(n,t)}},f=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},m=c.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,s=this.blockSize,a=o/(4*s),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,l=e.min(4*c,o);if(c){for(var u=0;u<c;u+=s)this._doProcessBlock(i,u);n=i.splice(0,c),r.sigBytes-=l}return new d.init(n,l)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(c.Hasher=m.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}}),a.algo={});return a}(Math),r)}).call(this,n(33))},function(e,t){},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(76),c=n(27),l=n(95),d=n(20),u=n(24),h=n(31),p=s(n(0)),f=s(n(37)),m=function(){function e(e){this.retryTimeout=1e4,this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.taskMutex=new l.PromiseMutex("LS"),this.cancelToken=f.default.CancelToken.source(),this.injectConfig=r({},c.DEFAULT_INJECT_CONFIG),this.injectLoopTimes=0,this.lastTaskId=1,this.statusError=new Map,this.spec=e}return Object.defineProperty(e.prototype,"isNeedReset",{get:function(){for(var e=this,t=0,n=Array.from(this.streamingTasks.values());t<n.length;t++){var r=n[t];if(r.mode===c.LiveStreamingServiceMode.INJECT)return!0;if(r.mode===c.LiveStreamingServiceMode.TRANSCODE&&(this.transcodingConfig&&(this.transcodingConfig.userConfigs||this.transcodingConfig.transcodingUsers)||[]).find((function(t){return t.uid===e.spec.uid})))return!0}return!1},enumerable:!0,configurable:!0}),e.prototype.setTranscodingConfig=function(e){return i(this,void 0,void 0,(function(){var t,n,i,s,a,l=this;return o(this,(function(o){switch(o.label){case 0:(t=r(r({},c.DEFAULT_TRANSCODING_CONFIG),e)).transcodingUsers||(t.transcodingUsers=t.userConfigs),66!==t.videoCodecProfile&&77!==t.videoCodecProfile&&100!==t.videoCodecProfile&&(p.default.debug("["+this.spec.clientId+"] set transcoding config, fix video codec profile: "+t.videoCodecProfile+" -> 100"),t.videoCodecProfile=100),t.transcodingUsers&&(t.transcodingUsers=t.transcodingUsers.map((function(e){return r(r(r({},c.DEFAULT_LIVE_STREAMING_TRANSCODING_USER),e),{zOrder:e.zOrder?e.zOrder+1:1})}))),t.images&&(t.images=t.images.map((function(e){return r(r({},c.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK),e)})));try{c.isLiveStreamingTranscodingConfig(t)}catch(e){throw e}return t.transcodingUsers&&(t.userConfigs=t.transcodingUsers.map((function(e){return r({},e)})),t.userCount=t.transcodingUsers.length,delete t.transcodingUsers),n=(t.userConfigs||[]).map((function(e){return"number"==typeof e.uid?Promise.resolve(e.uid):d.getUserAccount(l.spec,null,e.uid)})),[4,this.taskMutex.lock()];case 1:return i=o.sent(),[4,Promise.all(n)];case 2:if(o.sent().forEach((function(e,n){t.userConfigs&&t.userConfigs[n]&&(t.userConfigs[n].uid=e&&e.uid||e)})),this.transcodingConfig=t,!this.connection)return i(),[2];o.label=3;case 3:return o.trys.push([3,5,,6]),[4,this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(this.streamingTasks.values()).map((function(e){return e.taskId})).join("#")})];case 4:return s=o.sent(),i(),p.default.debug("["+this.spec.clientId+"] update live transcoding config success, code: "+s.code+", config:",JSON.stringify(this.transcodingConfig)),[3,6];case 5:if(a=o.sent(),i(),!a.data||!a.data.retry)throw a;return a.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach((function(e){p.default.warning("["+l.spec.clientId+"] live streaming receive error",a.toString(),"try to republish",e.url),l.startLiveStreamingTask(e.url,e.mode,a).then((function(){p.default.debug("["+l.spec.clientId+"] live streaming republish "+e.url+" success")})).catch((function(t){p.default.error("["+l.spec.clientId+"] live streaming republish failed",e.url,t.toString()),l.onLiveStreamError&&l.onLiveStreamError(e.url,t)}))})),[3,6];case 6:return[2]}}))}))},e.prototype.setInjectStreamConfig=function(e,t){this.injectConfig=Object.assign({},this.injectConfig,e),this.injectLoopTimes=t},e.prototype.startLiveStreamingTask=function(e,t,n){return i(this,void 0,void 0,(function(){var i,s,a,l,d,f,m,g,y=this;return o(this,(function(o){switch(o.label){case 0:return Array.from(this.streamingTasks.values()).find((function(e){return e.mode===c.LiveStreamingServiceMode.INJECT}))&&t===c.LiveStreamingServiceMode.INJECT?[2,new u.AgoraRTCError(u.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw()]:(i={command:"PublishStream",ts:Date.now(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:30},p.default.debug("["+this.spec.clientId+"] start live streaming "+e+", mode: "+t),[4,this.taskMutex.lock()]);case 1:if(s=o.sent(),!this.transcodingConfig&&t===c.LiveStreamingServiceMode.TRANSCODE)throw s(),new u.AgoraRTCError(u.AgoraRTCErrorCode.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");if(!this.connection&&n)return s(),[2];if(this.streamingTasks.get(e)&&!n)return s(),[2,new u.AgoraRTCError(u.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw()];if(!this.transcodingConfig&&t===c.LiveStreamingServiceMode.TRANSCODE)throw s(),new u.AgoraRTCError(u.AgoraRTCErrorCode.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");o.label=2;case 2:return o.trys.push([2,5,,6]),this.connection?[3,4]:(a=this,[4,this.connect(t)]);case 3:a.connection=o.sent(),o.label=4;case 4:return[3,6];case 5:throw l=o.sent(),s(),l;case 6:switch(t){case c.LiveStreamingServiceMode.TRANSCODE:i.transcodingConfig=r({},this.transcodingConfig);break;case c.LiveStreamingServiceMode.RAW:break;case c.LiveStreamingServiceMode.INJECT:i={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:e,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(i.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0,d=this.lastTaskId++,o.label=7;case 7:return o.trys.push([7,9,,14]),f=new Promise((function(t,r){h.wait(y.retryTimeout).then((function(){if(n)return r(n);var t=y.statusError.get(e);return t?(y.statusError.delete(e),r(t)):void 0}))})),[4,Promise.race([this.connection.request("request",{clientRequest:i},!0,{url:e,command:"PublishStream",workerType:t===c.LiveStreamingServiceMode.TRANSCODE?1:2,requestByUser:!n,tid:d.toString()}),f])];case 8:return m=o.sent(),this.isStartingStreamingTask=!1,p.default.debug("["+this.spec.clientId+"] live streaming started, code: "+m.code),this.streamingTasks.set(e,{clientRequest:i,mode:t,url:e,taskId:d}),s(),[3,14];case 9:if(g=o.sent(),s(),this.isStartingStreamingTask=!1,!g.data||!g.data.retry||n)throw g;return g.data.changeAddress?[3,11]:[4,this.startLiveStreamingTask(e,t,g)];case 10:return[2,o.sent()];case 11:return this.connection.tryNextAddress(),[4,this.startLiveStreamingTask(e,t,g)];case 12:return[2,o.sent()];case 13:return[3,14];case 14:return[2]}}))}))},e.prototype.stopLiveStreamingTask=function(e){var t=this;return new Promise((function(n,r){var i=t.streamingTasks.get(e);if(!i||!t.connection)return new u.AgoraRTCError(u.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();var o=i.mode;i.abortTask=function(){p.default.debug("["+t.spec.clientId+"] stop live streaming success(worker exception)"),t.streamingTasks.delete(e),n()},p.default.debug("stop live streaming task request: "+JSON.stringify(e)),t.connection.request("request",{clientRequest:{command:o===c.LiveStreamingServiceMode.INJECT?"UninjectStream":"UnpublishStream",url:i.url}},!1,{url:e,command:"UnPublishStream",workerType:o===c.LiveStreamingServiceMode.TRANSCODE?1:2,requestByUser:!0,tid:(t.lastTaskId++).toString()}).then((function(r){p.default.debug("["+t.spec.clientId+"] stop live streaming success, code: "+r.code),t.streamingTasks.delete(e),0===t.streamingTasks.size&&o!==c.LiveStreamingServiceMode.INJECT&&(t.connection.close(),t.connection=void 0),n()})).catch(r)}))},e.prototype.controlInjectStream=function(e,t,n,r){return i(this,void 0,void 0,(function(){var i;return o(this,(function(o){switch(o.label){case 0:if(!(i=this.streamingTasks.get(e))||!this.connection||i.mode!==c.LiveStreamingServiceMode.INJECT)throw new u.AgoraRTCError(u.AgoraRTCErrorCode.INVALID_OPERATION,"can not find inject stream task to control");return[4,this.connection.request("request",{clientRequest:{command:"ControlStream",url:e,control:t,audioVolume:n,position:r}})];case 1:return[2,o.sent().serverResponse]}}))}))},e.prototype.resetAllTask=function(){var e=this,t=Array.from(this.streamingTasks.values());this.terminate();for(var n=function(t){r.startLiveStreamingTask(t.url,t.mode).catch((function(n){e.onLiveStreamError&&e.onLiveStreamError(t.url,n)}))},r=this,i=0,o=t;i<o.length;i++)n(o[i])},e.prototype.setGatewayConnectionState=function(e){this.connection&&(this.connection.gatewayConnectionState=e)},e.prototype.terminate=function(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=f.default.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0},e.prototype.connect=function(e){return i(this,void 0,void 0,(function(){var t,n=this;return o(this,(function(r){switch(r.label){case 0:if(this.connection)throw new u.AgoraRTCError(u.AgoraRTCErrorCode.UNEXPECTED_ERROR,"live streaming connection has already connected");return[4,h.getLiveStreamingWorkerMangerResult(e,this.spec,this.cancelToken.token)];case 1:return t=r.sent(),this.uapResponse=t,this.connection=new a.AgoraLiveStreamingUapSignal(t.workerToken,this.spec,e),this.connection.on(c.LiveStreamingUapSignalEvents.WARNING,(function(e,t){return n.onLiveStreamWarning&&n.onLiveStreamWarning(t,e)})),this.connection.on(c.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS,(function(e){return n.handlePublishStreamServer(e)})),this.connection.on(c.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS,(function(e){return n.handleInjectStreamServerStatus(e)})),this.connection.on(c.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS,(function(t,r){if(!n.connection)return r(new u.AgoraRTCError(u.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not get new live streaming address list"));h.getLiveStreamingWorkerMangerResult(e,n.spec,n.cancelToken.token).then((function(e){n.uapResponse=e,t(e.addressList)})).catch(r)})),[4,this.connection.init(t.addressList)];case 2:return r.sent(),[2,this.connection]}}))}))},e.prototype.handlePublishStreamServer=function(e){var t=this,n=e.serverStatus&&e.serverStatus.url;if(!n)throw new u.AgoraRTCError(u.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"empty url",{code:e.code});var r=this.streamingTasks.get(n);switch(e.code){case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:var i=new u.AgoraRTCError(u.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(r)return p.default.error(i.toString()),this.onLiveStreamError&&this.onLiveStreamError(n,i);if(!this.isStartingStreamingTask)return;this.statusError.set(n,i);case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(!this.connection||0===this.streamingTasks.size)return;this.connection.tryNextAddress();for(var o=Array.from(this.streamingTasks.values()),s=function(n){if(n.abortTask)return n.abortTask(),"continue";p.default.warning("["+a.spec.clientId+"] publish stream status code",e.code,"try to republish",n.url),a.startLiveStreamingTask(n.url,n.mode,new u.AgoraRTCError(u.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then((function(){p.default.debug("["+t.spec.clientId+"] republish live stream success",n.url)})).catch((function(e){p.default.error(e.toString()),t.onLiveStreamError&&t.onLiveStreamError(n.url,e)}))},a=this,l=0,d=o;l<d.length;l++)s(d[l]);return}},e.prototype.handleInjectStreamServerStatus=function(e){var t=Number(e.uid),n=e.serverStatus&&e.serverStatus.url;switch(e.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(0,t,n));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(1,t,n),void this.streamingTasks.delete(n);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(2,t,n),void this.streamingTasks.delete(n);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(10,t,n),void this.streamingTasks.delete(n);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(3,t,n),void this.streamingTasks.delete(n);default:return void p.default.debug("inject stream server status",e)}},e.prototype.haveUrl=function(e){return this.streamingTasks.has(e)||void 0},e}();t.AgoraRTCLiveStreamingClient=m},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(27),d=n(77),u=n(36),h=n(24),p=n(2),f=c(n(0)),m=n(1),g=n(31),y=function(e){function t(t,n,r){var i=e.call(this)||this;return i._gatewayConnectionState="CONNECTED",i.reconnectMode="retry",i.reqId=0,i.commandReqId=0,i.waitingResponseList=[],i.handleWebSocketOpen=function(){i.reconnectMode="retry",i.startPingPong()},i.handleWebSocketMessage=function(e){if(e.data){var t=JSON.parse(e.data);if(t.requestId)i.emit("@"+t.requestId,t);else if(i.serviceMode===l.LiveStreamingServiceMode.INJECT)i.emit(l.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS,t);else{m.report.requestWorkerEvent(i.spec.sid,{actionType:"status",serverCode:t.code,workerType:i.serviceMode===l.LiveStreamingServiceMode.TRANSCODE?1:2});var n=t.serverStatus&&t.serverStatus.url;n&&i.waitingResponseList.includes(n)&&200===t.code&&i.emit(n),i.emit(l.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS,t)}}},i.spec=n,i.token=t,i.serviceMode=r,i.websocket=new d.AgoraWebSocketManager("live-streaming"),i.websocket.on(l.WebSocketManagerEvents.CONNECTED,i.handleWebSocketOpen),i.websocket.on(l.WebSocketManagerEvents.ON_MESSAGE,i.handleWebSocketMessage),i.websocket.on(l.WebSocketManagerEvents.REQUEST_NEW_URLS,(function(e,t){u.emitAsPromise(i,l.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS).then(e).catch(t)})),i.websocket.on(l.WebSocketManagerEvents.RECONNECTING,(function(){i.websocket.reconnectMode=i.reconnectMode})),i}return i(t,e),Object.defineProperty(t.prototype,"gatewayConnectionState",{get:function(){return this._gatewayConnectionState},set:function(e){this._gatewayConnectionState=e,"CONNECTED"===e&&this.emit("gateway-connected",e)},enumerable:!0,configurable:!0}),t.prototype.init=function(e){return this.websocket.init(e)},t.prototype.request=function(e,t,n,r){return s(this,void 0,void 0,(function(){var i,s,c,d,u,f,y,v,_,E,S=this;return a(this,(function(a){switch(a.label){case 0:if(this.reqId+=1,i=this.reqId,"request"===e&&(this.commandReqId+=1),s=this.commandReqId,!i||!this.websocket)throw new h.AgoraRTCError(h.AgoraRTCErrorCode.UNEXPECTED_ERROR);if(c=p.VERSION,"closed"===this.websocket.state)throw new h.AgoraRTCError(h.AgoraRTCErrorCode.WS_DISCONNECT);return d=function(){return new Promise((function(e,t){var n=function(){"CONNECTED"===S.gatewayConnectionState&&"connected"===S.websocket.state&&(S.off("gateway-connected",n),S.websocket.off(l.WebSocketManagerEvents.CONNECTED,n),e(void 0))};S.on("gateway-connected",n),S.websocket.once(l.WebSocketManagerEvents.CLOSED,(function(){return t(new h.AgoraRTCError(h.AgoraRTCErrorCode.WS_ABORT))})),S.websocket.on(l.WebSocketManagerEvents.CONNECTED,n)}))},"connected"===this.websocket.state&&"CONNECTED"===this.gatewayConnectionState?[3,2]:[4,d()];case 1:a.sent(),a.label=2;case 2:u=Promise.race([new Promise((function(e,t){var n=function(){t(new h.AgoraRTCError(h.AgoraRTCErrorCode.WS_ABORT))};S.websocket.once(l.WebSocketManagerEvents.RECONNECTING,n),S.websocket.once(l.WebSocketManagerEvents.CLOSED,n),S.once("@"+i,(function(t){e(t)}))})),g.wait(p.getParameter("LIVE_STREAMING_TIMEOUT")).then((function(){return!1}))]),(f=o({command:e,sdkVersion:c,seq:i,requestId:i,allocate:n,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},t)).clientRequest&&(f.clientRequest.workerToken=this.token),r&&m.report.requestWorkerEvent(this.spec.sid,o(o({},r),{requestId:s,actionType:"request",payload:JSON.stringify(t.clientRequest),serverCode:0,code:0})),y=Date.now(),this.websocket.sendMessage(f),v=null,a.label=3;case 3:return a.trys.push([3,5,,8]),[4,u];case 4:return v=a.sent(),[3,8];case 5:if(_=a.sent(),"closed"===this.websocket.state)throw _;return[4,d()];case 6:return a.sent(),[4,this.request(e,t,n,r)];case 7:return[2,a.sent()];case 8:if(!1===v)throw E=new h.AgoraRTCError(h.AgoraRTCErrorCode.NETWORK_TIMEOUT,(t&&t.clientRequest&&t.clientRequest.command)+" timeout",{changeAddress:!0,retry:!0}),this.emit(l.LiveStreamingUapSignalEvents.WARNING,E,r&&r.url||"unknown url"),r&&m.report.requestWorkerEvent(this.spec.sid,o(o({},r),{requestId:s,actionType:"response",payload:"TIMEOUT",serverCode:0,success:0,responseTime:Date.now()-y})),E;return r&&m.report.requestWorkerEvent(this.spec.sid,o(o({},r),{requestId:s,actionType:"response",payload:JSON.stringify(v.serverResponse),serverCode:v.code,success:200===v.code,responseTime:Date.now()-y})),200===v.code?[3,10]:[4,this.handleResponseError(v)];case 9:a.sent(),a.label=10;case 10:return[2,v]}}))}))},t.prototype.tryNextAddress=function(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")},t.prototype.close=function(){var e="__VERSION__"===p.VERSION?"0.0.1":p.VERSION;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)},t.prototype.handleResponseError=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i,o=this;return a(this,(function(s){switch(f.default.debug("[live-streaming] receive response error "+e.code),e.code){case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return f.default.warning("live stream response already exists stream"),t=e.serverResponse.url,this.emit(l.LiveStreamingUapSignalEvents.WARNING,"live stream response already exists stream, code 454",t),this.waitingResponseList.includes(t)||this.waitingResponseList.push(t),[2,new Promise((function(n,r){o.once(t,(function(){o.waitingResponseList.splice(o.waitingResponseList.indexOf(t),1),n()})),setTimeout((function(){o.waitingResponseList.splice(o.waitingResponseList.indexOf(t),1),r(new h.AgoraRTCError(h.AgoraRTCErrorCode.TIMEOUT,"live stream timeout waiting 454",{code:e.code}))}),1e4)}))];case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_BAD_STREAM:case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return[2,new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw()];case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_INGNORE_MESSAGE:throw new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_INVALID_ARGUMENT,"",{retry:!0,changeAddress:!0});case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return[2];throw new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return[2,new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw()];case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:return n=new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE),[2,this.emit(l.LiveStreamingUapSignalEvents.WARNING,n,e.serverResponse.url)];case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:return n=new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FREQUENT_REQUEST),[2,this.emit(l.LiveStreamingUapSignalEvents.WARNING,n,e.serverResponse.url)];case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return[2,new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT,"",{code:e.code}).throw()];case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:return n=new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT),[2,this.emit(l.LiveStreamingUapSignalEvents.WARNING,n,e.serverResponse.url)];case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return[2,new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw()];case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return[2];throw new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case l.LIVE_STREAM_ERROR_CODE.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return[2];if("UpdateTranscoding"===e.serverResponse.command||"ControlStream"===e.serverResponse.command)return[2,new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw()];throw new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case l.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case l.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case l.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case l.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return r=e.serverResponse.url,this.waitingResponseList.includes(r)||this.waitingResponseList.push(r),i=new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}),this.emit(l.LiveStreamingUapSignalEvents.WARNING,i,r),[2,new Promise((function(e,t){o.once(r,(function(){o.waitingResponseList.splice(o.waitingResponseList.indexOf(r),1),e()})),setTimeout((function(){o.waitingResponseList.splice(o.waitingResponseList.indexOf(r),1),t(i)}),1e4)}))]}return[2]}))}))},t.prototype.startPingPong=function(){var e=this;this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval((function(){"connected"===e.websocket.state&&e.request("ping",{}).catch((function(){}))}),6e3)},t}(u.EventEmitter);t.AgoraLiveStreamingUapSignal=y},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=n(24),l=n(36),d=n(31),u=n(27),h=a(n(0)),p=function(e){function t(t){var n=e.call(this)||this;return n.connectionID=0,n.currentURLIndex=0,n.reconnectMode="tryNext",n._state="closed",n.retryConfig=d.DEFAULT_RETRY_CONFIG,n.reconnectCount=0,n.name=t,n}return i(t,e),Object.defineProperty(t.prototype,"url",{get:function(){return this.websocket?this.websocket.url:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(u.WebSocketManagerEvents.RECONNECTING,this.reconnectMode):"connected"===this._state?this.emit(u.WebSocketManagerEvents.CONNECTED):"closed"===this._state?this.emit(u.WebSocketManagerEvents.CLOSED):"failed"===this._state&&this.emit(u.WebSocketManagerEvents.FAILED))},enumerable:!0,configurable:!0}),t.prototype.init=function(e){var t=this;return new Promise((function(n,r){t.urls=e;var i=t.urls[t.currentURLIndex];t.state="connecting",t.createWebSocketConnection(i).then(n).catch(r),t.once(u.WebSocketManagerEvents.CLOSED,(function(){return r(new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_DISCONNECT))})),t.once(u.WebSocketManagerEvents.CONNECTED,(function(){return n()}))}))},t.prototype.close=function(e,t){if(this.currentURLIndex=0,this.reconnectCount=0,this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;var n=this.websocket;t?setTimeout((function(){return n.close()}),500):n.close(),this.websocket=void 0}this.state=e?"failed":"closed"},t.prototype.reconnect=function(e){if(this.websocket){void 0!==e&&(this.reconnectMode=e);var t=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),t&&t.bind(this.websocket)({code:9999})}else h.default.warning("["+this.name+"] can not reconnect, no websocket")},t.prototype.sendMessage=function(e){if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_ABORT,"websocket is not ready");var t=JSON.stringify(e);try{this.websocket.send(t)}catch(e){throw new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_ERR,"send websocket message error"+e.toString())}},t.prototype.createWebSocketConnection=function(e){return o(this,void 0,void 0,(function(){var t,n=this;return s(this,(function(r){return this.connectionID+=1,t=this.connectionID,[2,new Promise((function(r,i){n.websocket&&(n.websocket.onclose=null,n.websocket.close()),h.default.debug("["+n.name+"] start connect, url: "+e);try{n.websocket=new WebSocket(e),n.websocket.binaryType="arraybuffer"}catch(e){var a=new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_ERR,"init websocket failed! Error: "+e.toString());return h.default.error("["+n.name+"]"+a),void i(a)}d.wait(5e3).then((function(){t===n.connectionID&&n.websocket&&n.websocket.readyState!==WebSocket.OPEN&&n.websocket&&n.websocket.close()})),n.websocket.onopen=function(){h.default.debug("["+n.name+"] websockect opened:",e),n.reconnectMode="retry",n.state="connected",n.reconnectCount=0,r()},n.websocket.onclose=function(e){return o(n,void 0,void 0,(function(){var t,n;return s(this,(function(o){switch(o.label){case 0:return h.default.debug("["+this.name+"] websocket close "+(this.websocket&&this.websocket.url)+", code: "+e.code+", reason: "+e.reason+", current mode: "+this.reconnectMode),this.reconnectCount<this.retryConfig.maxRetryCount?("connected"===this.state&&(this.state="reconnecting"),t=l.emitAsInvokerNoResponse(this,u.WebSocketManagerEvents.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,[4,this.reconnectWithAction(t)]):[3,2];case 1:return n=o.sent(),"closed"===this.state?(h.default.debug("["+this.connectionID+"] ws is closed, no need to reconnect"),[2]):n?(r(),[3,3]):(i(new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_DISCONNECT,"websocket reconnect failed: "+e.code)),this.close(!0),[2]);case 2:i(new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_DISCONNECT,"websocket close: "+e.code)),this.close(),o.label=3;case 3:return[2]}}))}))},n.websocket.onmessage=function(e){n.emit(u.WebSocketManagerEvents.ON_MESSAGE,e)}}))]}))}))},t.prototype.reconnectWithAction=function(e,t){return o(this,void 0,void 0,(function(){var n,r,i,o;return s(this,(function(s){switch(s.label){case 0:return!t&&this.reconnectCount>=this.retryConfig.maxRetryCount?[2,!1]:this.urls?"closed"===this.state?[2,!1]:(n=d.getRetryWaitTime(this.reconnectCount,this.retryConfig),h.default.debug("["+this.name+"] wait "+n+"ms to reconnect websocket, mode: "+e),[4,d.wait(n)]):[2,!1];case 1:if(s.sent(),"closed"===this.state)return[2,!1];this.reconnectCount+=1,s.label=2;case 2:return s.trys.push([2,12,,14]),"retry"!==e?[3,4]:(i=this.urls[this.currentURLIndex],[4,this.createWebSocketConnection(i)]);case 3:return s.sent(),[3,11];case 4:return"tryNext"!==e?[3,8]:(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length?[4,this.reconnectWithAction("recover")]:[3,6]);case 5:return[2,s.sent()];case 6:return h.default.debug("["+this.name+"] websocket url length: "+this.urls.length+" current index: "+this.currentURLIndex),i=this.urls[this.currentURLIndex],[4,this.createWebSocketConnection(i)];case 7:return s.sent(),[3,11];case 8:return"recover"!==e?[3,11]:(h.default.debug("["+this.name+"] request new urls"),r=this,[4,l.emitAsPromise(this,u.WebSocketManagerEvents.REQUEST_NEW_URLS)]);case 9:return r.urls=s.sent(),this.currentURLIndex=0,i=this.urls[this.currentURLIndex],[4,this.createWebSocketConnection(i)];case 10:s.sent(),s.label=11;case 11:return[2,!0];case 12:return o=s.sent(),h.default.error("["+this.name+"] reconnect failed",o.toString()),[4,this.reconnectWithAction(e)];case 13:return[2,s.sent()];case 14:return[2]}}))}))},t}(l.EventEmitter);t.AgoraWebSocketManager=p},function(e,t,n){"use strict";var r=n(18),i=n(38),o=n(79),s=n(44);function a(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var c=a(n(41));c.Axios=o,c.create=function(e){return a(s(c.defaults,e))},c.Cancel=n(45),c.CancelToken=n(93),c.isCancel=n(40),c.all=function(e){return Promise.all(e)},c.spread=n(94),e.exports=c,e.exports.default=c},function(e,t,n){"use strict";var r=n(18),i=n(39),o=n(80),s=n(81),a=n(44);function c(e){this.defaults=e,this.interceptors={request:new o,response:new o}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},c.prototype.getUri=function(e){return e=a(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(r.merge(n||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,i){return this.request(r.merge(i||{},{method:e,url:t,data:n}))}})),e.exports=c},function(e,t,n){"use strict";var r=n(18);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,n){"use strict";var r=n(18),i=n(82),o=n(40),s=n(41);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return a(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(a(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(18);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,l=[],d=!1,u=-1;function h(){d&&c&&(d=!1,c.length?l=c.concat(l):u=-1,l.length&&p())}function p(){if(!d){var e=a(h);d=!0;for(var t=l.length;t;){for(c=l,l=[];++u<t;)c&&c[u].run();u=-1,t=l.length}c=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||d||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(18);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(43);e.exports=function(e,t,n){var i=n.config.validateStatus;!i||i(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(88),i=n(89);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(18),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},function(e,t,n){"use strict";var r=n(18);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(18);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(45);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(0)),o=1,s=function(){function e(e){this.lockingPromise=Promise.resolve(),this.locks=0,this.name="",this.lockId=o++,e&&(this.name=e),i.default.debug("[lock-"+this.name+"-"+this.lockId+"] is created.")}return Object.defineProperty(e.prototype,"isLocked",{get:function(){return this.locks>0},enumerable:!0,configurable:!0}),e.prototype.lock=function(){var e,t=this;this.locks+=1,i.default.debug("[lock-"+this.name+"-"+this.lockId+"] is locked, current queue "+this.locks+".");var n=new Promise((function(n){e=function(){t.locks-=1,i.default.debug("[lock-"+t.name+"-"+t.lockId+"] is not locked, current queue "+t.locks+"."),n()}})),r=this.lockingPromise.then((function(){return e}));return this.lockingPromise=this.lockingPromise.then((function(){return n})),r},e}();t.PromiseMutex=s},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(0),o=n(1),s=n(8),a=n(4),c=function(){};c.prototype.set=function(e,t){["BatteryLevel"].indexOf(e)>-1&&(this[e]=t)};var l=function(){var e=o.report.reportApiInvoke(null,{name:"checkSystemRequirements",options:arguments,tag:"tracer"}),t=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,r=window.WebSocket,i=!!t&&!!n&&!!r,s=!1;a.isChrome()&&a.getBrowserVersion()>=58&&"iOS"!==a.getBrowserOS()&&(s=!0),a.isFireFox()&&a.getBrowserVersion()>=56&&(s=!0),a.isOpera()&&a.getBrowserVersion()>=45&&(s=!0),a.isSafari()&&a.getBrowserVersion()>=11&&(s=!0),a.isEdge()&&(s=!0),(a.isWeChatBrowser()||a.isQQBrowser())&&"iOS"!==a.getBrowserOS()&&(s=!0),a.isSupportedPC()||a.isSupportedMobile()||(s=!1);var c=i&&s;return e(null,c),c},d=new function(){var e=Object(s.b)();return e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.batteryManager=null,e._init=function(t,n){e.state=e.states.INITING,navigator.getBattery?navigator.getBattery().then((function(n){e.batteryManager=n,t&&setTimeout((function(){t()}),0)})).catch((function(e){i.default.debug("navigator.getBattery is disabled",e),t&&t()})):(e.state=e.states.INITED,t&&t())},e._getBatteryStats=function(){var t={};return e.batteryManager&&e.batteryManager.level?t.BatteryLevel=Math.floor(100*e.batteryManager.level):t.BatteryLevel="UNSUPPORTED",t},e.getStats=function(t,n){var r=new c,i=e._getBatteryStats();i&&i.BatteryLevel&&r.set("BatteryLevel",i.BatteryLevel),t&&t(r)},e._init(),e},u=n(22),h=n(19),p=n(26),f=n(53),m=n(9),g=["live","rtc","web","interop","h264_interop","web-only"],y=["vp8","vp9","h264"],v=["aes-128-gcm","aes-256-gcm","aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-256-gcm2","aes-128-gcm2"],_=n(11),E=n.n(_),S=n(7),T=n.n(S),b=n(13),I=n(5),N=n(10),C=n(20),w=n(6),R=n(14),A={1001:"FRAMERATE_INPUT_TOO_LOW",1002:"FRAMERATE_SENT_TOO_LOW",1003:"SEND_VIDEO_BITRATE_TOO_LOW",1005:"RECV_VIDEO_DECODE_FAILED",2001:"AUDIO_INPUT_LEVEL_TOO_LOW",2002:"AUDIO_OUTPUT_LEVEL_TOO_LOW",2003:"SEND_AUDIO_BITRATE_TOO_LOW",2005:"RECV_AUDIO_DECODE_FAILED",3001:"FRAMERATE_INPUT_TOO_LOW_RECOVER",3002:"FRAMERATE_SENT_TOO_LOW_RECOVER",3003:"SEND_VIDEO_BITRATE_TOO_LOW_RECOVER",3005:"RECV_VIDEO_DECODE_FAILED_RECOVER",4001:"AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER",4002:"AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER",4003:"SEND_AUDIO_BITRATE_TOO_LOW_RECOVER",4005:"RECV_AUDIO_DECODE_FAILED_RECOVER"},O={FramerateInput:1001,FramerateSent:1002,SendVideoBitrate:1003,VideoDecode:1005,AudioIntputLevel:2001,AudioOutputLevel:2002,SendAudioBitrate:2003,AudioDecode:2005},M=function(e){var t={remoteStreamStorage:{},localStreamStorage:{}};return t.gatewayClient=e,t.checkAudioOutputLevel=function(e){return!(e&&parseInt(e.audioRecvBytesDelta)>0&&parseInt(e.audioDecodingNormalDelta)>0&&0===parseInt(e.audioOutputLevel))},t.checkAudioIntputLevel=function(e){return!e||0!==parseInt(e.audioInputLevel)},t.checkFramerateInput=function(e,t){if(!e||!t.attributes)return!0;var n=parseInt(t.attributes.maxFrameRate),r=parseInt(e.googFrameRateInput);return!n||!r||!(n>10&&r<5||n<10&&n>=5&&r<=1)},t.checkFramerateSent=function(e){return!(e&&parseInt(e.googFrameRateInput)>5&&parseInt(e.googFrameRateSent)<=1)},t.checkSendVideoBitrate=function(e){return!e||0!==parseInt(e.videoSendBytesDelta)},t.checkSendAudioBitrate=function(e){return!e||0!==parseInt(e.audioSendBytesDelta)},t.checkVideoDecode=function(e){return!e||0===parseInt(e.videoRecvBytesDelta)||0!==parseInt(e.googFrameRateDecoded)},t.checkAudioDecode=function(e){return!e||0===parseInt(e.audioRecvBytesDelta)||0!==parseInt(e.audioDecodingNormalDelta)},t.record=function(e,n,r,i,o){r[e]||(r[e]={isPrevNormal:!0,record:[]});var s=r[e],a=t["check"+e](n,o);if(s.record.push(a),s.record.length>=5){s.isCurNormal=-1!==s.record.indexOf(!0);var c=O[e];s.isPrevNormal&&!s.isCurNormal&&t.gatewayClient.dispatchEvent({type:"exception",code:c,msg:A[c],uid:i}),!s.isPrevNormal&&s.isCurNormal&&t.gatewayClient.dispatchEvent({type:"exception",code:c+2e3,msg:A[c+2e3],uid:i}),s.isPrevNormal=s.isCurNormal,s.record=[]}},t.setLocalStats=function(e){var n={};Object.keys(e).map((function(r){var i=e[r],o=t.gatewayClient.localStreams[parseInt(r)],s=t.localStreamStorage[r]||{};o&&o.hasVideo()&&(t.record("SendVideoBitrate",i.videoStats,s,r),t.record("FramerateInput",i.videoStats,s,r,o),t.record("FramerateSent",i.videoStats,s,r)),o&&o.hasAudio()&&(t.record("AudioIntputLevel",i.audioStats,s,r),t.record("SendAudioBitrate",i.audioStats,s,r)),n[r]=s})),t.localStreamStorage=n},t.setRemoteStats=function(n){var r={};Object.keys(n).map((function(i){var o=n[i],s=e.remoteStreams[i],a=t.remoteStreamStorage[i]||{};s&&s.hasVideo()&&s.isPlaying()&&t.record("VideoDecode",o.videoStats,a,i),s&&s.hasAudio()&&s.isPlaying()&&(t.record("AudioOutputLevel",o.audioStats,a,i),t.record("AudioDecode",o.audioStats,a,i)),r[i]=a})),t.remoteStreamStorage=r},t};function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k,x=n(3),L=new function(){var e=Object(s.b)();return e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.type=null,e.lastConnectedAt=null,e.lastDisconnectedAt=null,e.lastTypeChangedAt=null,e.networkChangeTimer=null,e._init=function(t,n){if(e.state=e.states.INITING,navigator.connection&&navigator.connection.addEventListener){var r=e._getNetworkInfo();e.type=r&&r.type,e.state=e.states.INITED,t&&t()}else e.state=e.states.UNINIT,n&&n("DO_NOT_SUPPORT")},e._getNetworkInfo=function(){return navigator.connection},e._reloadNetworkInfo=function(){var t=e._getNetworkInfo(),n=t&&t.type||"UNSUPPORTED",r=Date.now();if(n!==e.type){e.lastTypeChangedAt=r,"none"==n?e.lastDisconnectedAt=r:"none"==e.type&&(e.lastConnectedAt=r),e.type=n;var i={type:"networkTypeChanged",networkType:n};e.dispatchEvent(i)}},e.getStats=function(t,n){var r={},i=e._getNetworkInfo();i&&(r.NetworkType=i.type||"UNSUPPORTED"),setTimeout((function(){t(r)}),0)},e._init((function(){navigator.connection.addEventListener("change",(function(){e._reloadNetworkInfo()})),e.networkChangeTimer=setInterval((function(){e._reloadNetworkInfo()}),5e3)}),(function(e){})),e},P=n(55),j=n(16),U=n(56),F=n.n(U),z=n(21),V=function(){return void 0!==window.isSecureContext},B="host",G=function(e){var t={key:void 0,highStream:null,lowStream:null,lowStreamParameter:null,isDualStream:!1,highStreamState:2,lowStreamState:2,proxyServer:null,turnServers:[],useProxyServer:!1,useLocalAccessPoint:!1};if(t.mode=e.mode,t.codec=e.codec,t.clientId=Object(N.generateSessionId)().slice(0,5),t.uintUid=null,t.customReportCount=0,e=T()({},e),t.aespassword=null,t.aesmode="none",t.hasPublished=!1,t.getSessionId=function(){return e.sessionId},t.startChannelMediaRelay=function(n,r){var i=o.report.reportApiInvoke(e.sessionId,{callback:function(e){if(e)return r&&r(e);r&&r()},name:"Client.startChannelMediaRelay",options:arguments,tag:"tracer"});if(!(n instanceof m.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var s=n.getSrcChannelMediaInfo(),a=n.getDestChannelMediaInfos();if(Object(x.isEmpty)(s))throw"srcChannelMediaInfo should not be empty";if(Object(x.isEmpty)(a)||0===a.length)throw"destChannelMediaInfos should not be empty";if(!Object(N.is32Uint)(s.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(x.isValidChannelName)(s.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(s.token&&!Object(x.isValidToken)(s.token))throw"Invalid token in srcChannelMediaInfo";if(a.forEach((function(e){if(!Object(N.is32Uint)(e.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(x.isValidChannelName)(e.channelName))throw"Invalid channelName in destChannelMediaInfo";if(e.token&&!Object(x.isValidToken)(e.token))throw"Invalid token in destChannelMediaInfo"})),t.gatewayClient.state!==b.a.CONNECTED)throw"startChannelMediaRelay should be used after join";t.gatewayClient.startChannelMediaRelay(n).then((function(){i&&i()})).catch((function(e){i&&i(e)}))},t.updateChannelMediaRelay=function(n,r){var i=o.report.reportApiInvoke(e.sessionId,{callback:function(e){if(e)return r&&r(e);r&&r()},name:"Client.updateChannelMediaRelay",options:arguments,tag:"tracer"});if(!(n instanceof m.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var s=n.getSrcChannelMediaInfo(),a=n.getDestChannelMediaInfos();if(Object(x.isEmpty)(s))throw"srcChannelMediaInfo should not be empty";if(Object(x.isEmpty)(a)||0===a.length)throw"destChannelMediaInfos should not be empty";if(!Object(N.is32Uint)(s.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(x.isValidChannelName)(s.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(s.token&&!Object(x.isValidToken)(s.token))throw"Invalid token in srcChannelMediaInfo";if(a.forEach((function(e){if(!Object(N.is32Uint)(e.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(x.isValidChannelName)(e.channelName))throw"Invalid channelName in destChannelMediaInfo";if(e.token&&!Object(x.isValidToken)(e.token))throw"Invalid token in destChannelMediaInfo"})),t.gatewayClient.state!==b.a.CONNECTED)throw"updateChannelMediaRelay should be used after join";t.gatewayClient.updateChannelMediaRelay(n).then((function(){i&&i()})).catch((function(e){i&&i(e)}))},t.stopChannelMediaRelay=function(n){var r=o.report.reportApiInvoke(e.sessionId,{callback:function(e){if(e)return n&&n(e);n&&n()},name:"Client.stopChannelMediaRelay",options:arguments,tag:"tracer"});t.gatewayClient.stopChannelMediaRelay().then((function(){r&&r()})).catch((function(e){r&&r(e)}))},t.getConnectionState=function(){var n=o.report.reportApiInvoke(e.sessionId,{name:"Client.getConnectionState",options:arguments,tag:"tracer"}),r=b.a.connetionStateMap[t.gatewayClient.state];return n(),r},t.setClientRole=function(n,r){var s=o.report.reportApiInvoke(e.sessionId,{callback:r,name:"Client.setClientRole",options:arguments,tag:"tracer"});if(Object(x.checkValidEnum)(n,"setClientRole",[B,"audience"]),"rtc"===t.mode){var a="RTC mode can not use setClientRole";return i.default.warning("[".concat(t.clientId,"] ").concat(a)),s&&s(a)}t.gatewayClient&&t.gatewayClient.state===b.a.CONNECTED?("audience"===n&&(0===this.highStreamState?this._unpublish(this.highStream,(function(){s&&s(null,{role:n})}),(function(e){s&&s(e)})):t.gatewayClient.setClientRole("audience",s)),n===B&&t.gatewayClient.setClientRole(B,s)):(t.gatewayClient.role=n,s&&s(null,{role:n}))},t.getGatewayInfo=function(e){if(t.gatewayClient.state!==b.a.CONNECTED){var n="Client is not in connected state";return i.default.error("[".concat(t.clientId,"] ").concat(n)),void e(n)}t.gatewayClient.getGatewayInfo((function(t){e(null,t)}),e)},t.renewToken=function(n,r,s){var a=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return i.default.error("Failed to renew token ".concat(e),t),s&&s(e);r&&r(t)},name:"Client.renewToken",options:arguments,tag:"tracer"});if(!Object(x.isValidToken)(n))throw new Error("Invalid token: Token is of the string type .Length of the string: [1,255]. ASCII characters only.");return t.gatewayClient?t.key?(t.key=n,void t.gatewayClient.renewToken(n,(function(e){return a(null,e)}),a)):(i.default.error("[".concat(t.clientId,"] renewToken should not be called before user join")),a(I.default.INVALID_OPERATION)):(i.default.error("[".concat(t.clientId,"] renewToken Failed. GatewayClient not Exist")),a(I.default.INVALID_OPERATION))},t.setLowStreamParameter=function(n){var r=o.report.reportApiInvoke(e.sessionId,{name:"Client.setLowStreamParameter",options:arguments,tag:"tracer"});Object(x.checkValidObject)(n,"param");var s=n.width,a=n.height,c=n.framerate,l=n.bitrate;Object(x.isEmpty)(s)||Object(x.checkValidNumber)(s,"width"),Object(x.isEmpty)(a)||Object(x.checkValidNumber)(a,"height"),Object(x.isEmpty)(c)||Object(x.checkValidNumber)(c,"framerate"),Object(x.isEmpty)(l)||Object(x.checkValidNumber)(l,"bitrate",1,1e7),(!s&&a||s&&!a)&&i.default.warning("[".concat(t.clientId,"] The width and height parameters take effect only when both are set")),t.lowStreamParameter=n,r()},t.init=function(t,n,r){var i=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return r&&r(e);n&&n(t)},name:"Client.init",options:arguments,tag:"tracer"});Object(x.checkValidString)(t),Object(a.isChromeKernel)()&&Object(a.getChromeKernelVersion)()<=48?r?i(I.default.BAD_ENVIRONMENT):Object(N.popBanTip)():(e.appId=t,e.sessionId=Object(N.generateSessionId)(),i())},t.setTurnServer=function(n){var r=o.report.reportApiInvoke(e.sessionId,{name:"Client.setTurnServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==b.a.DISCONNECTED)throw new Error("Set turn server before join channel");if(t.useProxyServer)throw new Error("You have already set the proxy");if(t.useLocalAccessPoint)throw new Error("You have already set the local proxy");n instanceof Array||(n=[n]);var s=[];n.map((function(e,n){Object(x.checkValidObject)(e,"turnServer");var r=e.turnServerURL,o=e.username,a=e.password,c=e.udpport,l=e.forceturn,d=e.tcpport;if(Object(x.checkValidString)(r,"turnServerURL"),Object(x.checkValidString)(o,"username"),Object(x.checkValidString)(a,"password"),Object(x.checkValidString)(c,"udpport"),0===parseInt(c))throw new Error("udpport should not be ".concat(c));Object(x.isEmpty)(l)||Object(x.checkValidBoolean)(l,"forceturn");var u={mode:"manual"};if(u.url=r,u.udpport=c,u.username=o,u.credential=a,u.forceturn=l||!1,!Object(x.isEmpty)(d)){if(Object(x.checkValidString)(d,"tcpport"),0===parseInt(d))throw new Error("tcpport should not be ".concat(d));u.tcpport=d,i.default.info("[".concat(t.clientId,"] Set turnserver[").concat(n,"] tcpurl. ").concat(u.url,":").concat(u.tcpport))}i.default.info("[".concat(t.clientId,"] Set turnserver[").concat(n,"] udpurl. ").concat(u.url,":").concat(u.udpport,",username: ").concat(u.username)),s.push(u)})),t.turnServers=s,r()},t.setProxyServer=function(n){var r=o.report.reportApiInvoke(e.sessionId,{name:"Client.setProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==b.a.DISCONNECTED)throw new Error("Set proxy server before join channel");if(!n)throw new Error("Do not set the proxyServer parameter as empty");if(t.useProxyServer)throw new Error("You have already set the proxy");if(t.useLocalAccessPoint)throw new Error("You have already set the local proxy");Object(x.checkValidString)(n,"proxyServer"),t.proxyServer=n,o.report.setProxyServer(n),i.default.setProxyServer(n),r()},t.startProxyServer=function(n){var r=o.report.reportApiInvoke(e.sessionId,{name:"Client.startProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==b.a.DISCONNECTED)throw new Error("Start proxy server before join channel");if(t.proxyServer)throw new Error("You have already set the proxy");if(t.useLocalAccessPoint)throw new Error("You have already set the local proxy");t.useProxyServer=!0,t.proxyServerType=n||1,r()},t.stopProxyServer=function(){var n=o.report.reportApiInvoke(e.sessionId,{name:"Client.stopProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==b.a.DISCONNECTED)throw new Error("Stop proxy server after leave channel");o.report.setProxyServer(),i.default.setProxyServer(),t.turnServers=[],t.proxyServer=null,t.useProxyServer=!1,t.proxyServerType=null,n()},t.setEncryptionSecret=function(n){var r=o.report.reportApiInvoke(e.sessionId,{name:"Client.setEncryptionSecret",options:arguments,tag:"tracer"});Object(x.checkValidString)(n,"password"),new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})").test(n)||i.default.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer,\n      "),t.aespassword=n,r()},t.setEncryptionMode=function(n,r){var i=o.report.reportApiInvoke(e.sessionId,{name:"Client.setEncryptionMode",options:arguments,tag:"tracer"});if(Object(x.checkValidString)(n,"encryptionMode"),-1===v.indexOf(n))throw new Error('Invalid encryptionMode: encryptionMode should be "aes-128-xts" | "aes-256-xts" | "aes-128-ecb" | "sm4-128-ecb" | "aes-128-gcm" | "aes-256-gcm" | "aes-128-gcm2" | "aes-256-gcm2"');if(-1!==["aes-128-gcm2","aes-256-gcm2"].indexOf(n)){if(!r||!(r instanceof Uint8Array&&32===r.length))throw Error("salt must be an Uint8Array and exactly equal to 32 bytes")}else if(r)throw new Error("Only ".concat("aes-128-gcm2"," and ").concat("aes-256-gcm2"," support use salt"));r&&(t.aesSalt=Object(N.uint8ArrayToBase64)(r)),t.aesmode=n,i()},t.configPublisher=function(n){var r=o.report.reportApiInvoke(e.sessionId,{name:"Client.configPublisher",options:arguments,tag:"tracer"});Object(x.checkValidObject)(n,"config");var i=n.width,s=n.height,a=n.framerate,c=n.bitrate,l=n.publisherUrl;Object(x.checkValidNumber)(i,"width"),Object(x.checkValidNumber)(s,"height"),Object(x.checkValidNumber)(a,"framerate"),Object(x.checkValidNumber)(c,"bitrate",1,1e7),l&&Object(x.checkValidString)(l,"publisherUrl"),t.gatewayClient.configPublisher(n),r()},t.enableDualStream=function(n,r){var s=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return r&&r(e);n&&n(t)},name:"Client.enableDualStream",options:arguments,tag:"tracer"});return"iOS"===Object(a.getBrowserOS)()?(o.report.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),s(I.default.IOS_NOT_SUPPORT)):Object(a.isWeChatBrowser)()?(o.report.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),s(I.default.WECHAT_NOT_SUPPORT)):(o.report.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!0}),t.isDualStream=!0,t.highStream&&(t.highStream.isDualStream=!0),void(0===t.highStreamState?t._publishLowStream((function(e){return s(null,e)}),(function(e){i.default.warning("[".concat(t.clientId,"]"),e),s(I.default.ENABLE_DUALSTREAM_FAILED)})):1===t.highStreamState?s(I.default.STILL_ON_PUBLISHING):s(null)))},t.disableDualStream=function(n,r){var s=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return r&&r(e);n&&n(t)},name:"Client.disableDualStream",options:arguments,tag:"tracer"});o.report.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!1,succ:!0}),t.isDualStream=!1,t.highStream&&(t.highStream.isDualStream=!1),0===t.highStreamState?t._unpublishLowStream((function(){t.highStream.lowStream=null,s()}),(function(e){i.default.warning("[".concat(t.clientId,"]"),e),s(I.default.DISABLE_DUALSTREAM_FAILED)})):1===t.highStreamState?s(I.default.STILL_ON_PUBLISHING):s()},t._getLowStream=function(e,n){t.lowStream?e(t.lowStream):t._createLowStream((function(n){t.lowStream=n,e(t.lowStream)}),n)},t._createLowStream=function(e,n){if(t.highStream&&t.highStream.stream){var r=T()({},t.highStream.params);if(r.streamID+=1,r.audio=!1,r.video)if(t.highStream.stream.getVideoTracks()[0]){var i=new u.a(r);i.isLowStream=!0,i.streamId=t.highStream.getId()+1;var o={};t.lowStreamParameter&&(o=T()({},t.lowStreamParameter)),o.width&&o.height||(o.width=160,o.height=120),o.framerate=o.framerate||15,o.bitrate=o.bitrate||50,i.setVideoProfileCustomPlus(o);try{var s=F()(t.highStream,{width:i.videoConstraint.width.ideal,height:i.videoConstraint.height.ideal,framerate:i.videoConstraint.frameRate});return i.stream=s,t.highStream.lowStream=i,t.highStream.userMuteVideo&&i.muteVideo(),e&&e(i)}catch(e){return n&&n(e)}}else n&&n(I.default.HIGH_STREAM_NOT_VIDEO_TRACE);else n&&n(I.default.HIGH_STREAM_NOT_VIDEO_TRACE)}else n&&n(I.default.HIGH_STREAM_NOT_VIDEO_TRACE)},t._publishLowStream=function(e,n){return 2!==t.lowStreamState?n&&n(I.default.LOW_STREAM_ALREADY_PUBLISHED):t.highStream&&t.highStream.hasScreen()?n&&n(I.default.SHARING_SCREEN_NOT_SUPPORT):void t._getLowStream((function(r){t.lowStreamState=1,t.gatewayClient.publish(r,{streamType:1},(function(){t.lowStreamState=0,e&&e()}),(function(e){1===t.lowStreamState&&(t.lowStreamState=2),i.default.debug("[".concat(t.clientId,"] publish low stream failed")),n&&n(e)}))}),n)},t._unpublishLowStream=function(e,n){if(0!==t.lowStreamState)return n&&n(I.default.LOW_STREAM_NOT_YET_PUBLISHED);t.lowStream&&(t.gatewayClient.unpublish(t.lowStream,{streamType:1},(function(){}),(function(e){i.default.debug("[".concat(t.clientId,"] unpublish low stream failed")),n&&n(e)})),t.lowStream.close(),t.lowStream=null,t.lowStreamState=2,e&&e())},t.join=function(n,r,s,c,d,u){c&&"function"==typeof c&&(u=d,d=c,c=null);var h=l(),p=Object(a.getBrowserInfo)();i.default.debug(p,",Support: "+h);var f="HTTPS"===(k||k||(k=(window.location.protocol.split(":")[0]||"").toUpperCase())),m=V()?window.isSecureContext:"Browser Not Support",g=function(){i.default.warning("The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser")};V()?window.isSecureContext||g():f||g();var y=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return u&&u(e);d&&d(t)},name:"Client.join",options:arguments,getStates:function(){return{isHttps:f,isSecureContext:m}},tag:"tracer"});if(n&&!Object(x.isValidToken)(n))return i.default.warning("[".concat(t.clientId,"] Param channelKey should be string")),y(I.default.INVALID_PARAMETER);if(!Object(x.isValidChannelName)(r))return i.default.error("Invalid Channel Name ".concat(r)),i.default.warning("[".concat(t.clientId,"] The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")),y(I.default.INVALID_PARAMETER);if("string"==typeof r&&""===r)return i.default.warning("[".concat(t.clientId,"] Param channel should not be empty")),y(I.default.INVALID_PARAMETER);if(c&&!Object(x.isValidString)(c))return i.default.warning("[".concat(t.clientId,"] optionalInfo should be string")),y(I.default.INVALID_PARAMETER);if(s&&!Object(N.is32Uint)(s)&&!Object(x.isValidString)(s,1,255))return i.default.error("Invalid UID ".concat(s," ").concat(E()(s))),i.default.warning("[".concat(t.clientId,"] [String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is 32Uint")),y(I.default.INVALID_PARAMETER);if("string"==typeof s&&0==s.length)return i.default.warning("[".concat(t.clientId,"] String uid should not be empty")),y(I.default.INVALID_PARAMETER);if("string"==typeof s&&s.length>256)return i.default.warning("[".concat(t.clientId,"] Length of string uid should be less than 255")),y(I.default.INVALID_PARAMETER);i.default.stopWaitJoin(),t.highStream=null,t.lowStream=null,t.lowStreamParameter=null,t.isDualStream=!1,t.highStreamState=2,t.lowStreamState=2;var v=Date.now(),_=setTimeout((function(){if(1!=t.gatewayClient.hasJoined){i.default.debug("[".concat(t.clientId,"] The time to join the channel is greater than 5 seconds "));var n=Date.now();o.report.joinChannelTimeOut({lts:n,sid:e.sessionId,cname:r,cid:S&&S.cid,uid:S.uid||("string"==typeof s?void 0:s),elapse:n-v,timeout:5})}}),5e3),S={clientId:t.clientId,appId:e.appId,sid:e.sessionId,cname:r,uid:s,turnServers:t.turnServers.concat(),proxyServer:t.proxyServer,token:n||e.appId,useProxyServer:t.useProxyServer,useLocalAccessPoint:t.useLocalAccessPoint,proxyServerType:t.proxyServerType,optionalInfo:c};if("string"==typeof s&&(S.stringUid=s,t.uintUid?(S.uid=t.uintUid,delete t.uintUid):S.uid=0),t.aespassword&&"none"!==t.aesmode&&T()(S,{aespassword:t.aespassword,aesmode:t.aesmode}),t.aesSalt&&(S.aes_salt=t.aesSalt),o.report.sessionInit(e.sessionId,{lts:(new Date).getTime(),cname:r,appid:e.appId,mode:e.mode,succ:!0}),t.onSuccess=function(e){clearTimeout(_),t.rtcStatsCollector.startNetworkQualityTimer(),t.onSuccess=null,y(null,e)},t.onFailure=function(e){return y(e)},t.channel=r,t.gatewayClient.state!==b.a.DISCONNECTED)return i.default.error("[".concat(t.clientId,"] Client already in connecting/connected state")),y(I.default.INVALID_OPERATION),void o.report.joinGateway(e.sessionId,{lts:Date.now(),succ:!1,ec:I.default.INVALID_OPERATION,addr:null});t.gatewayClient.state=b.a.CONNECTING;var w=function(o,s){i.default.info("[".concat(t.clientId,"] Joining channel: ").concat(r)),t.gatewayClient.dispatchEvent({type:"config-distribute",config:s,joinInfo:S}),t.key=n||e.appId,S.cid=o.cid,S.uid||(S.uid=o.uid),S.vid=o.vid,S.clientId=t.clientId,S.apResponse=o.res,o.uni_lbs_ip&&o.uni_lbs_ip[1]&&(S.uni_lbs_ip=o.uni_lbs_ip[1]),S.gatewayAddr=o.gateway_addr,t.joinInfo=S,t.gatewayClient.join(S,t.key,(function(e){i.default.info("[".concat(t.clientId,"] Join channel ").concat(r," success, join with uid: ").concat(e,".")),t.onSuccess=null,t.rtcStatsCollector.startNetworkQualityTimer(),y(null,e)}),(function(e){return y(e)}))};S.stringUid&&!S.uid?(t.userAccountReq&&!t.userAccountReq.isFinished()&&t.userAccountReq.cancel(),t.userAccountReq=Object(C.getUserAccount)(S,t.gatewayClient),t.userAccountReq.then((function(e){i.default.debug("getUserAccount Success ".concat(e.url," ").concat(S.stringUid," => ").concat(e.uid)),S.uid=e.uid,Object(C.getGatewayList)(S,w,(function(e){return y(e)}))})).catch((function(e){i.default.error("getUserAccount rejected",e),y(e)}))):Object(C.getGatewayList)(S,w,(function(e){return y(e)}))},t.renewChannelKey=function(n,r,s){var a=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return s&&s(e);r&&r(t)},name:"Client.renewChannelKey",options:arguments,tag:"tracer"});Object(x.checkValidString)(n,"key",1,2047),void 0===t.key?(i.default.error("[".concat(t.clientId,"] renewChannelKey should not be called before user join")),a(I.default.INVALID_OPERATION)):(t.key=n,t.gatewayClient.joinInfo.token=n,t.gatewayClient.key=n,t.gatewayClient.recover(),a())},t.leave=function(n,s){t.gatewayClient.isFirstSuccess=!0,t.gatewayClient.hasInvokeLeave=!0;var a=!1,c=o.report.reportApiInvoke(e.sessionId,{callback:function(e,r){if(e)return s&&s(e);t.gatewayClient.reconnectingCS=!1,t.gatewayClient.state=b.a.DISCONNECTED,clearTimeout(Object(C._getReconnectCSTimer)(t.clientId)),t._renewSession(),t.rtcStatsCollector.clearNetworkQualityTimer(),n&&n(r)},name:"Client.leave",options:arguments,tag:"tracer"});i.default.info("[".concat(t.clientId,"] Leaving channel")),t.userAccountReq&&!t.userAccountReq.isFinished()&&(t.userAccountReq.cancel(),t.gatewayClient.state===b.a.CONNECTING&&(t.gatewayClient.state=b.a.DISCONNECTED)),t._terminateLiveStreaming(),t.gatewayClient.leave((function(e){a=!0,c(null,e)}),c),setTimeout((function(){a||(t.gatewayClient.socket&&(t.gatewayClient.socket.close(),t.gatewayClient.socket=null),t.gatewayClient.state=b.a.DISCONNECTED,c(null,"LEAVE_MSG_TIMEOUT"))}),Object(r.getParameter)("LEAVE_MSG_TIMEOUT"))},t._renewSession=function(){var n=Object(N.generateSessionId)();if(i.default.debug("renewSession ".concat(e.sessionId," => ").concat(n)),e.sessionId=n,t.gatewayClient.peerPublishDurationMap.clear(),t.joinInfo&&(t.joinInfo.sid=n),t.gatewayClient&&(t.gatewayClient.joinInfo&&(t.gatewayClient.joinInfo.sid=n),t.gatewayClient.localStreams))for(var r in t.gatewayClient.localStreams){var o=t.gatewayClient.localStreams[r];o&&(o.sid=n)}},t._publish=function(n,o,s,a){if(2!==t.highStreamState)return i.default.warning("[".concat(t.clientId,"] Can't publish stream when stream already publish ").concat(n.getId())),s&&s(I.default.STREAM_ALREADY_PUBLISHED);if(0===t.turnServers.length&&Object(r.getParameter)("FORCE_TURN")&&!Object(r.getParameter)("TURN_ENABLE_TCP")&&!Object(r.getParameter)("TURN_ENABLE_UDP"))throw new Error("force TURN With No TURN Configuration");i.default.info("[".concat(t.clientId,"] Publishing stream, uid ").concat(n.getId())),t.highStream=n,t.highStreamState=1,t.highStream.streamId=t.joinInfo.stringUid||t.joinInfo.uid,t.hasPublished=!1;var c=function(n,r,o){t.gatewayClient.publish(n,{streamType:0},(function(){n.sid=e.sessionId,t.highStreamState=0,i.default.info("[".concat(t.clientId,"] Publish success, uid: ").concat(n.getId())),t.highStream&&(t.highStream.isDualStream=t.isDualStream),t.isDualStream?t._publishLowStream((function(){r&&r()}),(function(e){i.default.warning("[".concat(t.clientId,"] "),e),j.a.replaceWithCanvasTrack(n).then((function(){r&&r()}))})):j.a.replaceWithCanvasTrack(n).then((function(){r&&r()}))}),o)};"audience"!==t.gatewayClient.role||"live"!==t.mode||a?c(n,o,s):t.gatewayClient.setClientRole(B,(function(e){if(e)return s&&s(e);c(n,o,s)}))},t._unpublish=function(e,n,r,o){if(0!==t.highStreamState)return i.default.warning("[".concat(t.clientId,"] Can't unpublish stream when stream not publish")),r&&r(I.default.STREAM_NOT_YET_PUBLISHED);i.default.info("[".concat(t.clientId,"] Unpublish stream, uid ").concat(e.getId()));var s=function(e,n,r){t.isDualStream&&t.lowStream&&t._unpublishLowStream(null,r),t.gatewayClient.unpublish(e,{streamType:0},(function(){t.highStreamState=2,i.default.info("[".concat(t.clientId,"] Unpublish stream success, uid: ").concat(e.getId())),t.gatewayClient.dispatchEvent({type:"stream-unpublished",stream:e}),n&&n()}),(function(n){i.default.info("[".concat(t.clientId,"] Unpublish stream fail, uid: ").concat(e.getId())),r&&r(n)}))};t.gatewayClient.role!==B||"live"!==t.mode||o?s(e,n,r):t.gatewayClient.setClientRole("audience",(function(t){if(t)return r&&r(t);s(e,n,r)}))},t.publish=function(n,r){var i=o.report.reportApiInvoke(e.sessionId,{callback:function(e,n){if(e)return 1===t.highStreamState&&"REQUEST_ABORT"!==e&&(t.highStreamState=2),r&&r(e)},name:"Client.publish",tag:"tracer",options:{stream:"too long to show",onFailure:!!r}});2===t.highStreamState?n._hasVideoTracks()||n._hasAudioTracks()?(t.gatewayClient.publishRequestId=Object(N.generateId)(),t._publish(n,(function(e){return i(null,e)}),(function(e){return i(e)}))):i(I.default.NO_TRACK_IN_STREAM):i(I.default.STREAM_ALREADY_PUBLISHED)},t.unpublish=function(n,r,i){var s=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return r&&r(e);i&&i(t)},name:"Client.unpublish",tag:"tracer",options:{stream:"too long to show",onFailure:!!r}});0===t.highStreamState?(t.gatewayClient.publishRequestId=null,t._unpublish(n,(function(e){return s(null,e)}),(function(e){return s(e)}))):s(I.default.STREAM_NOT_YET_PUBLISHED)},t.subscribe=function(n,r,s){var c=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return s&&s(e)},name:"Client.subscribe",tag:"tracer",options:{stream:"too long to show",options:r,onFailure:!!s}});"function"==typeof r&&(s=r,r=null),Object(x.checkValidObject)(n,"stream"),Object(x.isEmpty)(r)||(Object(x.checkValidObject)(r,"options"),Object(x.isEmpty)(r.video)||Object(x.checkValidBoolean)(r.video,"options.video"),Object(x.isEmpty)(r.audio)||Object(x.checkValidBoolean)(r.audio,"options.audio"));var l={video:!0,audio:!0};if(!Object(x.isEmpty)(r)){if(Object(a.isSafari)()&&(!r.video||!r.audio)){var d="SAFARI_NOT_SUPPORTED_FOR_TRACK_SUBSCRIPTION";return i.default.error("[".concat(t.clientId,"] "),d),void c(d)}if(!Object(x.isEmpty)(r.video)&&!Object(x.isValidBoolean)(r.video)||!Object(x.isEmpty)(r.audio)&&!Object(x.isValidBoolean)(r.audio)||!1===r.audio&&!1===r.video)return d="INVALID_PARAMETER ".concat(JSON.stringify(r)),i.default.error("[".concat(t.clientId,"] "),d),void c(d)}n.subscribeOptions?(T()(n.subscribeOptions,l,r),t.gatewayClient.subscribeChange(n,(function(e){return c(null,e)}),c)):(t.gatewayClient.subscribeRequestId.set(n.getId(),Object(N.generateId)()),n.subscribeOptions=T()({},l,r),t.gatewayClient.subscribe(n,(function(e){return c(null,e)}),c))},t.unsubscribe=function(n,r){var s=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return r&&r(e)},name:"Client.unsubscribe",tag:"tracer",options:{stream:"too long to show",onFailure:!!r}});i.default.info("[".concat(t.clientId,"] Unsubscribe stream, uid: ").concat(n.getId())),t.gatewayClient.subscribeRequestId.delete(n.getId()),t.gatewayClient.unsubscribe(n,(function(e){return s(null,e)}),s)},t.setRemoteVideoStreamType=function(n,r){var i=o.report.reportApiInvoke(e.sessionId,{name:"Client.setRemoteVideoStreamType",tag:"tracer",options:{stream:"too long to show",streamType:r}});Object(x.checkValidEnum)(r,"streamType",[0,1]),t.gatewayClient.setRemoteVideoStreamType(n,r),i()},t.setStreamFallbackOption=function(n,r){var i=o.report.reportApiInvoke(e.sessionId,{name:"Client.setStreamFallbackOption",tag:"tracer",options:{stream:"too long to show",fallbackType:r}});Object(x.checkValidEnum)(r,"fallbackType",[0,1,2]),t.gatewayClient.setStreamFallbackOption(n,r),i()},t.enableAudioVolumeIndicator=function(n,r){var s=o.report.reportApiInvoke(e.sessionId,{name:"Client.enableAudioVolumeIndicator",options:arguments,tag:"tracer"});n=n||2e3,r=r||3,Object(x.checkValidNumber)(r,"smooth",1,100),Object(x.checkValidNumber)(n,"interval",50,1e5),t.audioVolumeIndication=t.audioVolumeIndication||{enabled:!0},t.audioVolumeIndication.interval=n,t.audioVolumeIndication.smooth=r,t.audioVolumeIndication={interval:n,smooth:r},i.default.info("[".concat(t.clientId,"] enableAudioVolumeIndicator interval ").concat(n," smooth ").concat(r)),t.gatewayClient.enableAudioVolumeIndicator(n,r),s()},t.getNetworkStats=function(e,n){return i.default.deprecate("[".concat(t.clientId,"] client.getNetworkStats is deprecated. Use client.getTransportStats instead.")),L.getStats(e,n)},t.getSystemStats=function(e,t){return d.getStats(e,t)},t.getRecordingDevices=function(e,t){return h.a.getRecordingDevices(e,t)},t.getPlayoutDevices=function(e,t){return h.a.getPlayoutDevices(e,t)},t.getCameras=function(e,t){return h.a.getCameras(e,t)},t.getRemoteAudioStats=function(e,n){return t.rtcStatsCollector.getRemoteAudioStats(e,n)},t.getLocalAudioStats=function(e,n){return t.rtcStatsCollector.getLocalAudioStats(e,n)},t.getRemoteVideoStats=function(e,n){return t.rtcStatsCollector.getRemoteVideoStats(e,n)},t.getLocalVideoStats=function(e,n){return t.rtcStatsCollector.getLocalVideoStats(e,n)},t._getRemoteVideoQualityStats=function(e,n){return t.rtcStatsCollector.getRemoteVideoQualityStats(e,n)},t._getRemoteAudioQualityStats=function(e,n){return t.rtcStatsCollector.getRemoteAudioQualityStats(e,n)},t.getTransportStats=function(e,n){return t.rtcStatsCollector.getTransportStats((function(t){return L.getStats((function(n){var r=T()({},t,n);e&&e(r)}),n)}),n)},t.getSessionStats=function(e,n){return t.rtcStatsCollector.getSessionStats(e,n)},t.onNetworkQuality=function(){return t.rtcStatsCollector.onNetworkQuality(onSuccess,onFailure)},t.sendMetadata=function(n,r){var i=o.report.reportApiInvoke(e.sessionId,{name:"Client.sendMetadata",tag:"tracer",callback:function(e){if(e)return r&&r(e);r&&r()}});t.gatewayClient.sendMetadata(n,i)},t.sendCustomReportMessage=function(n,s,a,c,l,d){Object(r.getParameter)("CR")?t.customReportCount>Object(r.getParameter)("CRL")?d&&d("REPORT_LIMITED"):(t.gatewayClient.hasJoined||(i.default.WARNING("Should invoke Client.sendCustomReportMessage after join"),d&&d("REPORT_BEFORE_JOINED")),t.customReportTimer||(t.customReportTimer=setInterval((function(){t.customReportCount=0}),Object(r.getParameter)("CRI"))),Object(x.checkValidString)(n,"reportId",0,100,!1),Object(x.checkValidString)(s,"category",0,100,!1),Object(x.checkValidString)(a,"event",0,100,!1),Object(x.checkValidString)(c,"label",0,100,!1),Object(x.checkValidNumber)(l,"value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),t.customReportCount++,o.report.sendCustomReportMessage(e.sessionId,{reportId:n,category:s,event:a,label:c,value:l,lts:Date.now()},(function(e){e?d&&d("REPORT_FAILED"):d&&d()}))):d&&d("REPORT_FORBIDDEN")},t.setLocalAccessPoints=function(n,i){var s=o.report.reportApiInvoke(e.sessionId,{name:"Client.setLocalAccessPoints",tag:"tracer"});if(Object(x.checkValidArray)(n,"serverList"),Object(x.checkValidString)(i,"domain"),t.useProxyServer)throw new Error("You have already set the proxy");var a=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;n=n.map((function(e){return a.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(i):e})),t.useLocalAccessPoint=!0,Object(r.setParameter)("WEBCS_DOMAIN",n),Object(r.setParameter)("WEBCS_DOMAIN_BACKUP_LIST",n),Object(r.setParameter)("GATEWAY_DOMAINS",[i]),Object(r.setParameter)("EVENT_REPORT_DOMAIN",n[Math.floor(Math.random()*n.length)]),Object(r.setParameter)("EVENT_REPORT_BACKUP_DOMAIN",n[Math.floor(Math.random()*n.length)]),Object(r.setParameter)("LOG_UPLOAD_SERVER","".concat(n[Math.floor(Math.random()*n.length)],":6444")),s()},e.clientId=t.clientId,t.gatewayClient=Object(b.a)(e),t.listenerLoggerTimer=null,t.listenerLoggerCache=[],t.on=function(e,n){t.gatewayClient.on(e,n),t.listenerLoggerCache.push("".concat(e).concat(n.name?":"+n.name:"")),t.listenerLoggerTimer?clearTimeout(t.listenerLoggerTimer):i.default.info("[".concat(t.clientId,"] Adding event handler on ").concat(e)),t.listenerLoggerTimer=setTimeout((function(){t.listenerLoggerCache.length&&(t.listenerLoggerTimer=null,i.default.info("[".concat(t.clientId,"] Added event handler on ").concat(t.listenerLoggerCache.join(", "))),t.listenerLoggerCache=[])}),0)},t.off=function(e,n){i.default.info("remove event handler from [".concat(e,"]")),t.gatewayClient.removeEventListener(e,n)},t.rtcStatsCollector=function(e){var t=Object(s.b)();return t.gatewayClient=e,t.exceptionMonitor=new M(e),t.localStats={},t.remoteStats={},t.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0},t.getRemoteAudioStats=function(e){var n=t.gatewayClient.traffic_stats,r={};for(var i in t.remoteStats){var o={},s=t.remoteStats[i];if(Object(w.b)(o,"End2EndDelay",s.peer_delay&&s.peer_delay.audio_delay),Object(w.b)(o,"TransportDelay",s.peer_delay&&s.peer_delay.e2e_delay),Object(w.b)(o,"PacketLossRate",s.peer_delay&&s.peer_delay.e2e_audio_lost_ratio_400ms),Object(w.b)(o,"RecvLevel",s.audioStats&&s.audioStats.audioOutputLevel),Object(w.b)(o,"RecvBitrate",s.audioRecvBitrate),Object(w.b)(o,"CodecType",s.audioStats&&s.audioStats.googCodecName),Object(w.b)(o,"MuteState",s.audioDisabled),Object(w.b)(o,"TotalFreezeTime",s.audioStats&&s.audioStats.audioTotalFreezeTime),Object(w.b)(o,"TotalPlayDuration",s.audioStats&&s.audioStats.audioTotalPlayDuration),n&&n.peer_delay){var a=n.peer_delay.find((function(e){return e.peer_uid==i}));if(a){var c=a.peer_publish_audio_duration+(Date.now()-n.timestamp);Object(w.b)(o,"AudioPublishDuration",c)}else Object(w.b)(o,"AudioPublishDuration",-1)}r[i]=o}e&&e(r)},t.getLocalAudioStats=function(e){var n={};for(var r in t.localStats){var i={},o=t.localStats[r];Object(w.b)(i,"RecordingLevel",o.audioStats&&o.audioStats.audioInputLevel),Object(w.b)(i,"SendLevel",o.audioStats&&o.audioStats.totalAudioEnergy),Object(w.b)(i,"SamplingRate",o.audioStats&&o.audioStats.totalSamplesDuration),Object(w.b)(i,"SendBitrate",o.audioSendBitrate),Object(w.b)(i,"CodecType",o.audioStats&&o.audioStats.googCodecName),Object(w.b)(i,"MuteState",o.audioDisabled),Object(w.b)(i,"audioSendPacketsLost",o.audioStats&&o.audioStats.packetsLost);var s=t.gatewayClient.localStreams[r];s&&s.isPlaying()&&Object(w.b)(i,"MuteState",s.userMuteAudio?"1":"0"),n[r]=i}e&&e(n)},t.getRemoteVideoStats=function(e){var n=t.gatewayClient.traffic_stats,r={};for(var i in t.remoteStats){var o={},s=t.remoteStats[i];if(Object(w.b)(o,"End2EndDelay",s.peer_delay&&s.peer_delay.video_delay),Object(w.b)(o,"TransportDelay",s.peer_delay&&s.peer_delay.e2e_delay),Object(w.b)(o,"PacketLossRate",s.peer_delay&&s.peer_delay.e2e_video_lost_ratio_400ms),Object(w.b)(o,"RecvBitrate",s.videoRecvBitrate),Object(w.b)(o,"RecvResolutionWidth",s.videoStats&&s.videoStats.googFrameWidthReceived),Object(w.b)(o,"RecvResolutionHeight",s.videoStats&&s.videoStats.googFrameHeightReceived),Object(w.b)(o,"RenderResolutionWidth",s.videoStats&&s.videoStats.renderRemoteWidth),Object(w.b)(o,"RenderResolutionHeight",s.videoStats&&s.videoStats.renderRemoteHeight),Object(w.b)(o,"RenderFrameRate",s.videoStats&&s.videoStats.googFrameRateOutput),Object(w.b)(o,"MuteState",s.videoDisabled),Object(w.b)(o,"TotalFreezeTime",s.videoStats&&s.videoStats.videoTotalFreezeTime),Object(w.b)(o,"TotalPlayDuration",s.videoStats&&s.videoStats.videoTotalPlayDuration),n&&n.peer_delay){var a=n.peer_delay.find((function(e){return e.peer_uid==i}));if(a){var c=a.peer_publish_video_duration+(Date.now()-n.timestamp);Object(w.b)(o,"VideoPublishDuration",c)}else Object(w.b)(o,"VideoPublishDuration",-1)}r[i]=o}e&&e(r)},t.getLocalVideoStats=function(e){var n={};for(var r in t.localStats){var i={},o=t.localStats[r];Object(w.b)(i,"TargetSendBitrate",o.videoTargetSendBitrate),Object(w.b)(i,"SendFrameRate",o.videoStats&&o.videoStats.googFrameRateSent),Object(w.b)(i,"SendBitrate",o.videoSendBitrate),Object(w.b)(i,"SendResolutionWidth",o.videoStats&&o.videoStats.googFrameWidthSent),Object(w.b)(i,"SendResolutionHeight",o.videoStats&&o.videoStats.googFrameHeightSent),Object(w.b)(i,"CaptureResolutionWidth",o.videoStats&&o.videoStats.googFrameWidthInput),Object(w.b)(i,"CaptureResolutionHeight",o.videoStats&&o.videoStats.googFrameHeightInput),Object(w.b)(i,"EncodeDelay",o.videoStats&&o.videoStats.googAvgEncodeMs),Object(w.b)(i,"MuteState",o.videoDisabled),Object(w.b)(i,"TotalFreezeTime",o.videoStats&&o.videoStats.videoTotalFreezeTime),Object(w.b)(i,"TotalDuration",o.videoStats&&o.videoStats.videoTotalPlayDuration),Object(w.b)(i,"CaptureFrameRate",o.videoStats&&o.videoStats.googFrameRateSent),Object(w.b)(i,"videoSendPacketsLost",o.videoStats&&o.videoStats.packetsLost),o.videoStats&&!o.videoStats.googFrameWidthInput&&Object(w.b)(i,"CaptureResolutionWidth",o.videoStats&&o.videoStats.renderLocalWidth),o.videoStats&&!o.videoStats.googFrameHeightInput&&Object(w.b)(i,"CaptureResolutionHeight",o.videoStats&&o.videoStats.renderLocalHeight),n[r]=i}e&&e(n)},t.getRemoteVideoQualityStats=function(e){var n={};for(var r in t.remoteStats){var i={},o=t.remoteStats[r];Object(w.b)(i,"videoReceiveDelay",o.videoStats&&o.videoStats.googCurrentDelayMs),Object(w.b)(i,"VideoFreezeRate",o.videoStats&&o.videoStats.videoFreezeRate),Object(w.b)(i,"FirstFrameTime",o.firstFrameTime),n[r]=i}e&&e(n)},t.getRemoteAudioQualityStats=function(e){var n={};for(var r in t.remoteStats){var i={},o=t.remoteStats[r];Object(w.b)(i,"audioReceiveDelay",o.audioStats&&o.audioStats.googCurrentDelayMs),Object(w.b)(i,"AudioFreezeRate",o.videoStats&&o.videoStats.videoFreezeRate),n[r]=i}e&&e(n)},t.getTransportStats=function(e){var n={},r={},i=t.gatewayClient.traffic_stats,o=i.peer_delay;if(Object(w.b)(n,"OutgoingAvailableBandwidth",t.gatewayClient.OutgoingAvailableBandwidth/1e3),Object(w.b)(n,"RTT",i&&2*i.access_delay),o){var s,a=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}(o);try{for(a.s();!(s=a.n()).done;){var c=s.value;c.downlink_estimate_bandwidth&&(r[c.peer_uid]=c.downlink_estimate_bandwidth/1e3+"")}}catch(e){a.e(e)}finally{a.f()}}n.IncomingAvailableBandwidth=r,e&&e(n)},t.getSessionStats=function(e){var n={},r=t.gatewayClient.traffic_stats,i=t.gatewayClient.socket,o=0,s=0;for(var a in t.remoteStats)(c=t.remoteStats[a])&&c.videoStats&&c.videoStats.videoRecvBytesDelta&&(s+=parseInt(c.videoStats.videoRecvBytesDelta)),c&&c.audioStats&&c.audioStats.audioRecvBytesDelta&&(s+=parseInt(c.audioStats.audioRecvBytesDelta));for(var a in t.localStats){var c;(c=t.localStats[a])&&c.videoStats&&c.videoStats.videoSendBytesDelta&&(o+=parseInt(c.videoStats.videoSendBytesDelta)),c&&c.audioStats&&c.audioStats.audioSendBytesDelta&&(o+=parseInt(c.audioStats.audioSendBytesDelta))}var l=o+t.session.WSSendBytesDelta+t.session.HTTPSendBytesDelta,d=s+t.session.WSRecvBytesDelta+t.session.HTTPRecvBytesDelta,u=t.session.sendBytes+Object(R.getHTTPSendBytes)(),h=t.session.recvBytes+Object(R.getHTTPRecvBytes)();t.gatewayClient.socket&&t.gatewayClient.socket.state===t.gatewayClient.CONNECTED&&(u+=i.getSendBytes(),h+=i.getRecvBytes());var p=1;r.peer_delay&&(p=r.peer_delay.length,p+=1),i?Object(w.b)(n,"Duration",i.getDuration()):Object(w.b)(n,"Duration",0),Object(w.b)(n,"UserCount",p),Object(w.b)(n,"SendBytes",u),Object(w.b)(n,"RecvBytes",h),Object(w.b)(n,"SendBitrate",8*l/1e3),Object(w.b)(n,"RecvBitrate",8*d/1e3),e&&e(n)},t.isLocalVideoFreeze=function(e,t){var n=0,r=0;if(!e||!t)return!1;if(Object(a.isChrome)()||Object(a.isOpera)())n=e.googFrameRateInput,r=e.googFrameRateSent;else if(Object(a.isSafari)())n=parseInt(e.framerateMean),r=parseInt(e.framesEncoded)-parseInt(t.framesEncoded);else{if(!Object(a.isFireFox)())return!1;n=parseInt(e.framerateMean),r=parseInt(e.framesEncoded)-parseInt(t.framesEncoded)}return n>5&&r<3},t.isRemoteVideoFreeze=function(e,t){var n=0,r=0;if(!e||!t)return!1;if(Object(a.isChrome)()||Object(a.isOpera)())n=e.googFrameRateReceived,r=e.googFrameRateDecoded;else if(Object(a.isSafari)())n=e.framerateMean,r=parseInt(e.framesDecoded)-parseInt(t.framesDecoded);else{if(!Object(a.isFireFox)())return!1;n=parseInt(e.framesReceived)-parseInt(t.framesReceived),r=parseInt(e.framesDecoded)-parseInt(t.framesDecoded)}return n>5&&n<10&&r<3||n>10&&n<20&&r<4||n>20&&r<5},t.isAudioFreeze=function(e){if(Object(a.isChrome)()&&e){if(e.googDecodingPLC&&e.googDecodingPLCCNG&&e.googDecodingCTN)return(parseInt(e.googDecodingPLC)+parseInt(e.googDecodingPLCCNG))/parseInt(e.googDecodingCTN)>.2}else if((Object(a.isSafari)()||Object(a.isFireFox)())&&e.packetsLost&&e.packetsReceived)return parseInt(e.packetsLost)/(parseInt(e.packetsLost)+parseInt(e.packetsReceived))>.2;return!1},t.isAudioDecodeFailed=function(e){return!!((Object(a.isChrome)()||Object(a.isOpera)())&&e&&parseInt(e.bytesReceived)>0&&0===parseInt(e.googDecodingNormal))},t.startNetworkQualityTimer=function(){t.clearNetworkQualityTimer(),t.networkQualityTimer=setInterval((function(){if(t.gatewayClient.state===b.a.CONNECTED&&navigator.onLine){var e=t.gatewayClient.traffic_stats;t.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:t.networkQualityTrans(e.uplink_network_quality),downlinkNetworkQuality:t.networkQualityTrans(e.downlink_network_quality)})}else t.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:0,downlinkNetworkQuality:0})}),2e3)},t.clearNetworkQualityTimer=function(){t.networkQualityTimer&&clearInterval(t.networkQualityTimer)},t.networkQualityTrans=function(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0},t.getStatsTimer=setInterval((function(){var e=t.gatewayClient.traffic_stats,n=Date.now();t.gatewayClient.dispatchEvent({type:"_testException"}),Object.keys(t.localStats).length&&t.exceptionMonitor.setLocalStats(t.localStats),Object.keys(t.remoteStats).length&&t.exceptionMonitor.setRemoteStats(t.remoteStats);var r={};Object.keys(t.gatewayClient.remoteStreams).forEach((function(i){var o=t.gatewayClient.remoteStreams[i],s=t.remoteStats[i],a={id:i,updatedAt:n};r[i]=a,a.firstFrameTime=o.firstFrameTime,s?(a.audioTotalPlayDuration=s.audioTotalPlayDuration+1,a.audioTotalFreezeTime=s.audioTotalFreezeTime,a.isAudioFreeze=!1,a.isAudioDecodeFailed=!1,a.videoTotalPlayDuration=s.videoTotalPlayDuration+1,a.videoTotalFreezeTime=s.videoTotalFreezeTime,a.isVideoFreeze=!1):(a.audioTotalPlayDuration=1,a.audioTotalFreezeTime=0,a.videoTotalPlayDuration=1,a.videoTotalFreezeTime=0);var c=e&&e.peer_delay&&e.peer_delay.find((function(e){return e.peer_uid==i}));c&&(a.peer_delay=c),o&&(o.isPlaying()&&(a.audioDisabled=o.userMuteAudio||o.peerMuteAudio?"1":"0",a.videoDisabled=o.userMuteVideo||o.peerMuteVideo?"1":"0"),s&&s.peer_delay&&c&&s.peer_delay.stream_type!==c.stream_type&&t.gatewayClient.dispatchEvent({type:"streamTypeChange",uid:i,streamType:c.stream_type}),o.pc&&"established"==o.pc.state&&o.pc.getStats((function(e){if(a.pcStats=e,a.audioStats=e.find((function(e){return"audio"==e.mediaType&&(e.id.indexOf("_recv")>-1||e.id.toLowerCase().indexOf("inbound")>-1)})),a.videoStats=e.find((function(e){return"video"==e.mediaType&&(e.id.indexOf("_recv")>-1||e.id.toLowerCase().indexOf("inbound")>-1)})),s&&s.audioStats&&a.audioStats){var n=parseInt(a.audioStats.bytesReceived)-parseInt(s.audioStats.bytesReceived),r=parseInt(a.audioStats.googDecodingNormal)-parseInt(s.audioStats.googDecodingNormal);if(a.audioStats.audioRecvBytesDelta=n,a.audioStats.audioDecodingNormalDelta=r,t.session.recvBytes+=n,isFinite(n)&&a.audioStats.timestamp){var i=a.audioStats.timestamp.getTime()-s.audioStats.timestamp.getTime();a.audioRecvBitrate=Math.floor(8*n/i)}t.isAudioFreeze(a.audioStats)&&a.audioTotalPlayDuration>10&&(a.audioTotalFreezeTime++,a.isAudioFreeze=!0),t.isAudioDecodeFailed(a.audioStats)&&a.audioTotalPlayDuration>10&&(a.isAudioDecodeFailed=!0),a.audioStats.audioTotalFreezeTime=a.audioTotalFreezeTime,a.audioStats.audioTotalPlayDuration=a.audioTotalPlayDuration,a.audioStats.audioFreezeRate=Math.ceil(100*a.audioTotalFreezeTime/a.audioTotalPlayDuration)}if(s&&s.videoStats&&a.videoStats){var c=parseInt(a.videoStats.bytesReceived)-parseInt(s.videoStats.bytesReceived);a.videoStats.videoRecvBytesDelta=c,t.session.recvBytes+=c,isFinite(c)&&a.videoStats.timestamp&&(i=a.videoStats.timestamp.getTime()-s.videoStats.timestamp.getTime(),a.videoRecvBitrate=Math.floor(8*c/i)),t.isRemoteVideoFreeze(a.videoStats,s.videoStats)&&(a.videoTotalFreezeTime++,a.isVideoFreeze=!0),a.videoStats.videoTotalFreezeTime=a.videoTotalFreezeTime,a.videoStats.videoTotalPlayDuration=a.videoTotalPlayDuration,a.videoStats.videoFreezeRate=Math.ceil(100*a.videoTotalFreezeTime/a.videoTotalPlayDuration),o.player&&o.player.video&&o.player.video.videoWidth&&o.player.video.videoHeight?(a.videoStats.renderRemoteWidth=o.player.video.videoWidth,a.videoStats.renderRemoteHeight=o.player.video.videoHeight):(a.videoStats.renderRemoteWidth=o.videoWidth||a.videoStats.googFrameWidthReceived,a.videoStats.renderRemoteHeight=o.videoHeight||a.videoStats.googFrameHeightReceived)}})))})),t.remoteStats=r;var i={};if(Object.keys(t.gatewayClient.localStreams).forEach((function(e){var r=t.gatewayClient.localStreams[e],o=t.localStats[e],s={id:e,updatedAt:n};i[e]=s,o?(s.videoTotalPlayDuration=o.videoTotalPlayDuration+1,s.videoTotalFreezeTime=o.videoTotalFreezeTime,s.isVideoFreeze=!1):(s.videoTotalPlayDuration=1,s.videoTotalFreezeTime=0),r&&(r.isPlaying()&&(s.audioDisabled=r.userMuteAudio?"1":"0",s.videoDisabled=r.userMuteVideo?"1":"0"),r.video&&r.attributes.maxVideoBW?s.videoTargetSendBitrate=r.attributes.maxVideoBW:r.video&&r.screenAttributes&&(s.videoTargetSendBitrate=r.screenAttributes.maxVideoBW),r.pc&&"established"==r.pc.state&&r.pc.getStats((function(e){if(s.pcStats=e.reverse(),s.audioStats=e.find((function(e){return"audio"==e.mediaType&&(e.id.indexOf("_send")>-1||e.id.toLowerCase().indexOf("outbound")>-1)})),s.videoStats=e.find((function(e){return"video"==e.mediaType&&(e.id.indexOf("_send")>-1||e.id.toLowerCase().indexOf("outbound")>-1)})),s.audioStats&&o&&o.audioStats){var n=parseInt(s.audioStats.bytesSent)-parseInt(o.audioStats.bytesSent);if(s.audioStats.audioSendBytesDelta=n,t.session.sendBytes+=n,isFinite(n)&&s.audioStats.timestamp){var i=s.audioStats.timestamp.getTime()-o.audioStats.timestamp.getTime();s.audioSendBitrate=Math.floor(8*n/i)}}if(s.videoStats&&o&&o.videoStats){var a=parseInt(s.videoStats.bytesSent)-parseInt(o.videoStats.bytesSent);s.videoStats.videoSendBytesDelta=a,t.session.sendBytes+=a,isFinite(a)&&s.videoStats.timestamp&&(i=s.videoStats.timestamp.getTime()-o.videoStats.timestamp.getTime(),s.videoSendBitrate=Math.floor(8*a/i)),t.isLocalVideoFreeze(s.videoStats,o.videoStats)&&(s.videoTotalFreezeTime++,s.isVideoFreeze=!0),s.videoStats.videoTotalFreezeTime=s.videoTotalFreezeTime,s.videoStats.videoTotalPlayDuration=s.videoTotalPlayDuration,s.videoStats.videoFreezeRate=Math.ceil(100*s.videoTotalFreezeTime/s.videoTotalPlayDuration),s.videoStats.renderLocalWidth=r.videoWidth||s.videoStats.googFrameWidthSent,s.videoStats.renderLocalHeight=r.videoHeight||s.videoStats.googFrameHeightSent}})))})),t.localStats=i,t.session.HTTPSendBytesDelta=Object(R.getHTTPSendBytes)()-t.session.HTTPSendBytes,t.session.HTTPSendBytes=Object(R.getHTTPSendBytes)(),t.session.HTTPRecvBytesDelta=Object(R.getHTTPRecvBytes)()-t.session.HTTPRecvBytes,t.session.HTTPRecvBytes=Object(R.getHTTPRecvBytes)(),t.gatewayClient.socket&&t.gatewayClient.socket.state===t.gatewayClient.CONNECTED){var o=t.gatewayClient.socket;t.session.WSSendBytesDelta=o.getSendBytes()-t.session.WSSendBytes,t.session.WSSendBytes=o.getSendBytes(),t.session.WSRecvBytesDelta=o.getRecvBytes()-t.session.WSRecvBytes,t.session.WSRecvBytes=o.getRecvBytes()}}),1e3),t.gatewayClient.on("join",(function(){t.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0}})),t}(t.gatewayClient),t.configDistributManager=function(e){var t={};return t.client=e,t.client.gatewayClient&&t.client.gatewayClient.on("config-distribute",(function(n){var s=n.joinInfo,a=n.config;if(a){Object(x.isEmpty)(a.uploadLog)||(Object(r.setParameter)("UPLOAD_LOG",a.uploadLog),o.report.reportApiInvoke(s.sid,{name:"_configDistribute",options:{feature:"uploadLog",value:a.uploadLog}})()),Object(x.isEmpty)(a.dualStream)||(e.isDualStream=a.dualStream,o.report.reportApiInvoke(s.sid,{name:"_configDistribute",options:{feature:"dualStream",value:a.dualStream}})()),Object(x.isEmpty)(a.streamFallbackOption)||t.client.gatewayClient&&t.client.gatewayClient.on("stream-subscribed",(function(e){var n=e.stream;n?(t.client.gatewayClient.setStreamFallbackOption(n,a.streamFallbackOption),o.report.reportApiInvoke(s.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:a.streamFallbackOption,streamId:n.getId()}})()):o.report.reportApiInvoke(s.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:a.streamFallbackOption,streamId:n.getId(),err:"invalid stream"}})()}));try{i.default.debug("[".concat(e.clientId,"] setParameter in distribution: ").concat(JSON.stringify(a))),Object.keys(a).map((function(e){return Object(r.setParameter)(e,a[e])}))}catch(t){i.default.debug("[".concat(e.clientId,"] setParameter in distribution failed: ").concat(JSON.stringify(a)))}}})),t}(t),Object(P.addLiveStreamingCapability)(t,e),e.areaCode){var n=e,c=n.areaCode,p=n.excludedArea,f=Object(z.getAreaCodeByConfig)({areaCode:c,excludedArea:p});Object(r.setParameter)("AREA_SETTING",f);var g=Object(z.getAreaDomainConfig)(f);Object.keys(g).map((function(e){var t=g[e];"LOG_UPLOAD_SERVER"==e||"EVENT_REPORT_DOMAIN"==e||"EVENT_REPORT_BACKUP_DOMAIN"==e||"NGINX"==e?Object(r.setParameter)(e,t[0]):Object(r.setParameter)(e,t)}))}return Object(x.isEmpty)(e.turnServer)||t.setTurnServer(e.turnServer),Object(x.isEmpty)(e.proxyServer)||t.setProxyServer(e.proxyServer),"live"===t.mode&&(t.gatewayClient.role="audience"),"rtc"===t.mode&&(t.gatewayClient.role=B),t.gatewayClient.on("onMultiIP",(function(e){t.gatewayClient.closeGateway(),t.gatewayClient.socket=void 0,t.gatewayClient.hasChangeBGPAddress=!0,t.joinInfo.multiIP=e.option,t.gatewayClient.state=b.a.CONNECTING;var n=function(e){i.default.info("[".concat(t.clientId,"] Joining channel: ").concat(t.channel)),t.joinInfo.cid=e.cid,t.joinInfo.uid||(t.joinInfo.uid=e.uid),t.joinInfo.uni_lbs_ip=e.uni_lbs_ip,t.joinInfo.gatewayAddr=e.gateway_addr,t.onSuccess?t.gatewayClient.join(t.joinInfo,t.key,(function(e){i.default.info("[".concat(t.clientId,"] Join channel ").concat(t.channel," success"));var n=t.onSuccess;t.onSuccess=null,t.onFailure=null,n(e)}),t.onFailure):(t.gatewayClient.joinInfo=T()({},t.joinInfo),t.gatewayClient.rejoin())};t.joinInfo.stringUid&&!t.joinInfo.uid?(t.userAccountReq&&!t.userAccountReq.isFinished()&&t.userAccountReq.cancel(),t.userAccountReq=Object(C.getUserAccount)(joinInfo,t.gatewayClient),t.userAccountReq.then((function(e){i.default.error("getUserAccount Success ".concat(e.url," ").concat(joinInfo.stringUid," => ").concat(e.uid)),t.joinInfo.uid=e.uid,Object(C.getGatewayList)(t.joinInfo,n,t.onFailure)})).catch((function(e){i.default.error("getUserAccount rejected",e),t.onFailure(e)}))):Object(C.getGatewayList)(t.joinInfo,n,t.onFailure)})),t.gatewayClient.on("rejoin-start",(function(){t._renewSession(),o.report.sessionInit(e.sessionId,{lts:(new Date).getTime(),extend:{rejoin:!0},cname:t.channel,appid:e.appId,mode:e.mode,succ:!0})})),t.gatewayClient.on("recover",(function(){t._renewSession(),i.default.debug("[".concat(t.clientId,"]"),"recover",e.sessionId),o.report.sessionInit(e.sessionId,{lts:(new Date).getTime(),extend:{recover:!0},cname:t.channel,appid:e.appId,mode:e.mode,succ:!0})})),t.gatewayClient.on("rejoin",(function(){var e=t.highStreamState;if(i.default.debug("[".concat(t.clientId,"] Client local stream preState: ").concat(e)),t.onSuccess){var n=t.onSuccess;t.onSuccess=null,t.onFailure=null,n(t.joinInfo.uid)}!t.highStream||0!==e&&1!==e||(i.default.info("[".concat(t.clientId,"] publish after rejoin")),t.highStreamState=2,t.lowStreamState=2,t.publish(t.highStream,(function(e){e&&i.default.info("[".concat(t.clientId,"] "),e)})))})),t.gatewayClient.on("streamPublished",(function(e){t.hasPublished||(t.hasPublished=!0,t.gatewayClient.dispatchEvent({type:"stream-published",stream:e.stream,proxy:e.proxy}))})),t.gatewayClient.on("pubP2PLost",(function(e){i.default.debug("[".concat(t.clientId,"] Start reconnect local peerConnection: ").concat(t.highStream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:t.highStream.getId()}),1===t.highStreamState&&(t.highStreamState=0,t.lowStreamState=0),t._unpublish(t.highStream,(function(){t._publish(t.highStream,(function(){i.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection success: ").concat(t.highStream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!0,reason:""})}),(function(e){i.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection failed: ").concat(e)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!1,reason:e})}),!0)}),(function(e){i.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection failed: ").concat(e)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!1,reason:e})}),!0)})),t.gatewayClient.on("subP2PLost",(function(e){i.default.debug("[".concat(t.clientId,"] Start reconnect remote peerConnection: ").concat(e.stream.getId()," ").concat(e.stream.subscribeOptions)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:e.stream.getId()});var n=e.stream.subscribeOptions;i.default.debug("[".concat(t.clientId,"]"),"Re-subscribe stream",JSON.stringify(n)),t.gatewayClient.unsubscribe(e.stream,(function(){e.stream.subscribeOptions=n,t.gatewayClient.subscribe(e.stream,(function(){i.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection success: ").concat(e.stream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!0,reason:""})}),(function(n){i.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection failed: "),n),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!1,reason:n})}))}),(function(n){i.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection failed: "),n),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!1,reason:n})}))})),L.on("networkTypeChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=T()({},e,{type:"network-type-changed"});t.gatewayClient.dispatchEvent(n)})),h.a.on("recordingDeviceChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=T()({},e,{type:"recording-device-changed"});t.gatewayClient.dispatchEvent(n)})),h.a.on("playoutDeviceChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=T()({},e,{type:"playout-device-changed"});t.gatewayClient.dispatchEvent(n)})),h.a.on("cameraChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=T()({},e,{type:"camera-changed"});t.gatewayClient.dispatchEvent(n)})),t.gatewayClient.on("streamTypeChange",(function(n){var r=T()({},n,{type:"stream-type-changed"});t.gatewayClient.dispatchEvent(r),o.report.reportApiInvoke(e.sessionId,{name:"streamTypeChange"})(null,JSON.stringify(n))})),t},H=h.a.getDevices,W=p.a.getScreenSources,Y=JSON.parse(JSON.stringify(r.SUPPORT_RESOLUTION_LIST));t.default={TranscodingUser:{uid:0,x:0,y:0,width:0,height:0,zOrder:0,alpha:1},LiveTranscoding:{width:640,height:360,videoBitrate:400,videoFramerate:15,lowLatency:!1,audioSampleRate:48e3,audioBitrate:48,audioChannels:1,videoGop:30,videoCodecProfile:100,userCount:0,userConfigExtraInfo:{},backgroundColor:0,transcodingUsers:[]},createClient:function(e){var t=o.report.reportApiInvoke(null,{name:"createClient",options:arguments,tag:"tracer"});(e=T()({},e||{})).codec||(e.codec=function(e){return"h264_interop"===e?"h264":"vp8"}(e.mode));var n=function(e){return-1===g.indexOf(e.mode)?I.default.INVALID_CLIENT_MODE:-1===y.indexOf(e.codec)?I.default.INVALID_CLIENT_CODEC:"h264_interop"==e.mode&&"h264"!==e.codec&&I.default.CLIENT_MODE_CODEC_MISMATCH}(e);if(n)throw i.default.error("Invalid parameter setting MODE: ".concat(e.mode," CODEC: ").concat(e.codec," ERROR ").concat(n)),t(n),new Error(n);return i.default.info("Creating client, MODE: ".concat(e.mode," CODEC: ").concat(e.codec)),function(e){switch(e.mode){case"interop":case"h264_interop":e.mode="live";break;case"web-only":e.mode="rtc"}}(e),t(null,e),G(e)},createStream:u.b,Logger:i.default,report:o.report,getDevices:H,getScreenSources:W,getParameter:r.getParameter,setParameter:r.setParameter,checkSystemRequirements:l,getSupportedCodec:f.getSupportedCodec,ChannelMediaRelayConfiguration:m.ChannelMediaRelayConfiguration,VERSION:r.VERSION,BUILD:r.BUILD,PROFILE_TABLE:Y,AUDIO_SAMPLE_RATE_32000:32e3,AUDIO_SAMPLE_RATE_44100:44100,AUDIO_SAMPLE_RATE_48000:48e3,VIDEO_CODEC_PROFILE_BASELINE:66,VIDEO_CODEC_PROFILE_MAIN:77,VIDEO_CODEC_PROFILE_HIGH:100,REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2,AREAS:z.AREAS,AREA_VERSION:"global"}}]).default},module.exports=t()},8885:function(e){e.exports=function(){"use strict";const e=new Map,t={set(t,n,r){e.has(t)||e.set(t,new Map);const i=e.get(t);i.has(n)||0===i.size?i.set(n,r):console.error("Bootstrap doesn't allow more than one instance per element. Bound instance: ".concat(Array.from(i.keys())[0],"."))},get:(t,n)=>e.has(t)&&e.get(t).get(n)||null,remove(t,n){if(!e.has(t))return;const r=e.get(t);r.delete(n),0===r.size&&e.delete(t)}},n="transitionend",r=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,((e,t)=>"#".concat(CSS.escape(t))))),e),i=e=>{e.dispatchEvent(new Event(n))},o=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),s=e=>o(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(r(e)):null,a=e=>{if(!o(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),n=e.closest("details:not([open])");if(!n)return t;if(n!==e){const t=e.closest("summary");if(t&&t.parentNode!==n)return!1;if(null===t)return!1}return t},c=e=>!e||e.nodeType!==Node.ELEMENT_NODE||!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled")),l=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?l(e.parentNode):null},d=()=>{},u=e=>{e.offsetHeight},h=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,p=[],f=()=>"rtl"===document.documentElement.dir,m=e=>{var t;t=()=>{const t=h();if(t){const n=e.NAME,r=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=r,e.jQueryInterface)}},"loading"===document.readyState?(p.length||document.addEventListener("DOMContentLoaded",(()=>{for(const e of p)e()})),p.push(t)):t()},g=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return"function"==typeof e?e(...arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]):t},y=function(e,t){if(arguments.length>2&&void 0!==arguments[2]&&!arguments[2])return void g(e);const r=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const r=Number.parseFloat(t),i=Number.parseFloat(n);return r||i?(t=t.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(n))):0})(t)+5;let o=!1;const s=r=>{let{target:i}=r;i===t&&(o=!0,t.removeEventListener(n,s),g(e))};t.addEventListener(n,s),setTimeout((()=>{o||i(t)}),r)},v=(e,t,n,r)=>{const i=e.length;let o=e.indexOf(t);return-1===o?!n&&r?e[i-1]:e[0]:(o+=n?1:-1,r&&(o=(o+i)%i),e[Math.max(0,Math.min(o,i-1))])},_=/[^.]*(?=\..*)\.|.*/,E=/\..*/,S=/::\d+$/,T={};let b=1;const I={mouseenter:"mouseover",mouseleave:"mouseout"},N=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function C(e,t){return t&&"".concat(t,"::").concat(b++)||e.uidEvent||b++}function w(e){const t=C(e);return e.uidEvent=t,T[t]=T[t]||{},T[t]}function R(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object.values(e).find((e=>e.callable===t&&e.delegationSelector===n))}function A(e,t,n){const r="string"==typeof t,i=r?n:t||n;let o=k(e);return N.has(o)||(o=e),[r,i,o]}function O(e,t,n,r,i){if("string"!=typeof t||!e)return;let[o,s,a]=A(t,n,r);if(t in I){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};s=e(s)}const c=w(e),l=c[a]||(c[a]={}),d=R(l,s,o?n:null);if(d)return void(d.oneOff=d.oneOff&&i);const u=C(s,t.replace(_,"")),h=o?function(e,t,n){return function r(i){const o=e.querySelectorAll(t);for(let{target:s}=i;s&&s!==this;s=s.parentNode)for(const a of o)if(a===s)return L(i,{delegateTarget:s}),r.oneOff&&x.off(e,i.type,t,n),n.apply(s,[i])}}(e,n,s):function(e,t){return function n(r){return L(r,{delegateTarget:e}),n.oneOff&&x.off(e,r.type,t),t.apply(e,[r])}}(e,s);h.delegationSelector=o?n:null,h.callable=s,h.oneOff=i,h.uidEvent=u,l[u]=h,e.addEventListener(a,h,o)}function M(e,t,n,r,i){const o=R(t[n],r,i);o&&(e.removeEventListener(n,o,Boolean(i)),delete t[n][o.uidEvent])}function D(e,t,n,r){const i=t[n]||{};for(const[o,s]of Object.entries(i))o.includes(r)&&M(e,t,n,s.callable,s.delegationSelector)}function k(e){return e=e.replace(E,""),I[e]||e}const x={on(e,t,n,r){O(e,t,n,r,!1)},one(e,t,n,r){O(e,t,n,r,!0)},off(e,t,n,r){if("string"!=typeof t||!e)return;const[i,o,s]=A(t,n,r),a=s!==t,c=w(e),l=c[s]||{},d=t.startsWith(".");if(void 0===o){if(d)for(const n of Object.keys(c))D(e,c,n,t.slice(1));for(const[n,r]of Object.entries(l)){const i=n.replace(S,"");a&&!t.includes(i)||M(e,c,s,r.callable,r.delegationSelector)}}else{if(!Object.keys(l).length)return;M(e,c,s,o,i?n:null)}},trigger(e,t,n){if("string"!=typeof t||!e)return null;const r=h();let i=null,o=!0,s=!0,a=!1;t!==k(t)&&r&&(i=r.Event(t,n),r(e).trigger(i),o=!i.isPropagationStopped(),s=!i.isImmediatePropagationStopped(),a=i.isDefaultPrevented());const c=L(new Event(t,{bubbles:o,cancelable:!0}),n);return a&&c.preventDefault(),s&&e.dispatchEvent(c),c.defaultPrevented&&i&&i.preventDefault(),c}};function L(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const[n,r]of Object.entries(t))try{e[n]=r}catch(t){Object.defineProperty(e,n,{configurable:!0,get:()=>r})}return e}function P(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function j(e){return e.replace(/[A-Z]/g,(e=>"-".concat(e.toLowerCase())))}const U={setDataAttribute(e,t,n){e.setAttribute("data-bs-".concat(j(t)),n)},removeDataAttribute(e,t){e.removeAttribute("data-bs-".concat(j(t)))},getDataAttributes(e){if(!e)return{};const t={},n=Object.keys(e.dataset).filter((e=>e.startsWith("bs")&&!e.startsWith("bsConfig")));for(const r of n){let n=r.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),t[n]=P(e.dataset[r])}return t},getDataAttribute:(e,t)=>P(e.getAttribute("data-bs-".concat(j(t))))};class F{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const n=o(t)?U.getDataAttribute(t,"config"):{};return{...this.constructor.Default,..."object"==typeof n?n:{},...o(t)?U.getDataAttributes(t):{},..."object"==typeof e?e:{}}}_typeCheckConfig(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.DefaultType;for(const[r,i]of Object.entries(t)){const t=e[r],s=o(t)?"element":null==(n=t)?"".concat(n):Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(i).test(s))throw new TypeError("".concat(this.constructor.NAME.toUpperCase(),': Option "').concat(r,'" provided type "').concat(s,'" but expected type "').concat(i,'".'))}var n}}class z extends F{constructor(e,n){super(),(e=s(e))&&(this._element=e,this._config=this._getConfig(n),t.set(this._element,this.constructor.DATA_KEY,this))}dispose(){t.remove(this._element,this.constructor.DATA_KEY),x.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t){y(e,t,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return t.get(s(e),this.DATA_KEY)}static getOrCreateInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return"bs.".concat(this.NAME)}static get EVENT_KEY(){return".".concat(this.DATA_KEY)}static eventName(e){return"".concat(e).concat(this.EVENT_KEY)}}const V=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n="#".concat(n.split("#")[1])),t=n&&"#"!==n?n.trim():null}return t?t.split(",").map((e=>r(e))).join(","):null},B={find:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return Element.prototype.querySelector.call(t,e)},children:(e,t)=>[].concat(...e.children).filter((e=>e.matches(t))),parents(e,t){const n=[];let r=e.parentNode.closest(t);for(;r;)n.push(r),r=r.parentNode.closest(t);return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((e=>"".concat(e,':not([tabindex^="-"])'))).join(",");return this.find(t,e).filter((e=>!c(e)&&a(e)))},getSelectorFromElement(e){const t=V(e);return t&&B.findOne(t)?t:null},getElementFromSelector(e){const t=V(e);return t?B.findOne(t):null},getMultipleElementsFromSelector(e){const t=V(e);return t?B.find(t):[]}},G=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hide";const n="click.dismiss".concat(e.EVENT_KEY),r=e.NAME;x.on(document,n,'[data-bs-dismiss="'.concat(r,'"]'),(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),c(this))return;const i=B.getElementFromSelector(this)||this.closest(".".concat(r));e.getOrCreateInstance(i)[t]()}))},H=".bs.alert",W="close".concat(H),Y="closed".concat(H);class q extends z{static get NAME(){return"alert"}close(){if(x.trigger(this._element,W).defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,e)}_destroyElement(){this._element.remove(),x.trigger(this._element,Y),this.dispose()}static jQueryInterface(e){return this.each((function(){const t=q.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e](this)}}))}}G(q,"close"),m(q);const K='[data-bs-toggle="button"]';class Q extends z{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each((function(){const t=Q.getOrCreateInstance(this);"toggle"===e&&t[e]()}))}}x.on(document,"click.bs.button.data-api",K,(e=>{e.preventDefault();const t=e.target.closest(K);Q.getOrCreateInstance(t).toggle()})),m(Q);const J=".bs.swipe",X="touchstart".concat(J),Z="touchmove".concat(J),$="touchend".concat(J),ee="pointerdown".concat(J),te="pointerup".concat(J),ne={endCallback:null,leftCallback:null,rightCallback:null},re={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class ie extends F{constructor(e,t){super(),this._element=e,e&&ie.isSupported()&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return ne}static get DefaultType(){return re}static get NAME(){return"swipe"}dispose(){x.off(this._element,J)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),g(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const t=e/this._deltaX;this._deltaX=0,t&&g(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(x.on(this._element,ee,(e=>this._start(e))),x.on(this._element,te,(e=>this._end(e))),this._element.classList.add("pointer-event")):(x.on(this._element,X,(e=>this._start(e))),x.on(this._element,Z,(e=>this._move(e))),x.on(this._element,$,(e=>this._end(e))))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&("pen"===e.pointerType||"touch"===e.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const oe=".bs.carousel",se=".data-api",ae="next",ce="prev",le="left",de="right",ue="slide".concat(oe),he="slid".concat(oe),pe="keydown".concat(oe),fe="mouseenter".concat(oe),me="mouseleave".concat(oe),ge="dragstart".concat(oe),ye="load".concat(oe).concat(se),ve="click".concat(oe).concat(se),_e="carousel",Ee="active",Se=".active",Te=".carousel-item",be=Se+Te,Ie={ArrowLeft:de,ArrowRight:le},Ne={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ce={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class we extends z{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=B.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===_e&&this.cycle()}static get Default(){return Ne}static get DefaultType(){return Ce}static get NAME(){return"carousel"}next(){this._slide(ae)}nextWhenVisible(){!document.hidden&&a(this._element)&&this.next()}prev(){this._slide(ce)}pause(){this._isSliding&&i(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?x.one(this._element,he,(()=>this.cycle())):this.cycle())}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding)return void x.one(this._element,he,(()=>this.to(e)));const n=this._getItemIndex(this._getActive());if(n===e)return;const r=e>n?ae:ce;this._slide(r,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&x.on(this._element,pe,(e=>this._keydown(e))),"hover"===this._config.pause&&(x.on(this._element,fe,(()=>this.pause())),x.on(this._element,me,(()=>this._maybeEnableCycle()))),this._config.touch&&ie.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of B.find(".carousel-item img",this._element))x.on(t,ge,(e=>e.preventDefault()));const e={leftCallback:()=>this._slide(this._directionToOrder(le)),rightCallback:()=>this._slide(this._directionToOrder(de)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new ie(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=Ie[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=B.findOne(Se,this._indicatorsElement);t.classList.remove(Ee),t.removeAttribute("aria-current");const n=B.findOne('[data-bs-slide-to="'.concat(e,'"]'),this._indicatorsElement);n&&(n.classList.add(Ee),n.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._isSliding)return;const n=this._getActive(),r=e===ae,i=t||v(this._getItems(),n,r,this._config.wrap);if(i===n)return;const o=this._getItemIndex(i),s=t=>x.trigger(this._element,t,{relatedTarget:i,direction:this._orderToDirection(e),from:this._getItemIndex(n),to:o});if(s(ue).defaultPrevented)return;if(!n||!i)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=i;const c=r?"carousel-item-start":"carousel-item-end",l=r?"carousel-item-next":"carousel-item-prev";i.classList.add(l),u(i),n.classList.add(c),i.classList.add(c),this._queueCallback((()=>{i.classList.remove(c,l),i.classList.add(Ee),n.classList.remove(Ee,l,c),this._isSliding=!1,s(he)}),n,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return B.findOne(be,this._element)}_getItems(){return B.find(Te,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return f()?e===le?ce:ae:e===le?ae:ce}_orderToDirection(e){return f()?e===ce?le:de:e===ce?de:le}static jQueryInterface(e){return this.each((function(){const t=we.getOrCreateInstance(this,e);if("number"!=typeof e){if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}else t.to(e)}))}}x.on(document,ve,"[data-bs-slide], [data-bs-slide-to]",(function(e){const t=B.getElementFromSelector(this);if(!t||!t.classList.contains(_e))return;e.preventDefault();const n=we.getOrCreateInstance(t),r=this.getAttribute("data-bs-slide-to");return r?(n.to(r),void n._maybeEnableCycle()):"next"===U.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())})),x.on(window,ye,(()=>{const e=B.find('[data-bs-ride="carousel"]');for(const t of e)we.getOrCreateInstance(t)})),m(we);const Re=".bs.collapse",Ae="show".concat(Re),Oe="shown".concat(Re),Me="hide".concat(Re),De="hidden".concat(Re),ke="click".concat(Re,".data-api"),xe="show",Le="collapse",Pe="collapsing",je=":scope .".concat(Le," .").concat(Le),Ue='[data-bs-toggle="collapse"]',Fe={parent:null,toggle:!0},ze={parent:"(null|element)",toggle:"boolean"};class Ve extends z{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const n=B.find(Ue);for(const r of n){const e=B.getSelectorFromElement(r),t=B.find(e).filter((e=>e===this._element));null!==e&&t.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Fe}static get DefaultType(){return ze}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((e=>e!==this._element)).map((e=>Ve.getOrCreateInstance(e,{toggle:!1})))),e.length&&e[0]._isTransitioning)return;if(x.trigger(this._element,Ae).defaultPrevented)return;for(const r of e)r.hide();const t=this._getDimension();this._element.classList.remove(Le),this._element.classList.add(Pe),this._element.style[t]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n="scroll".concat(t[0].toUpperCase()+t.slice(1));this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Pe),this._element.classList.add(Le,xe),this._element.style[t]="",x.trigger(this._element,Oe)}),this._element,!0),this._element.style[t]="".concat(this._element[n],"px")}hide(){if(this._isTransitioning||!this._isShown())return;if(x.trigger(this._element,Me).defaultPrevented)return;const e=this._getDimension();this._element.style[e]="".concat(this._element.getBoundingClientRect()[e],"px"),u(this._element),this._element.classList.add(Pe),this._element.classList.remove(Le,xe);for(const t of this._triggerArray){const e=B.getElementFromSelector(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0,this._element.style[e]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Pe),this._element.classList.add(Le),x.trigger(this._element,De)}),this._element,!0)}_isShown(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._element).classList.contains(xe)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=s(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(Ue);for(const t of e){const e=B.getElementFromSelector(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}}_getFirstLevelChildren(e){const t=B.find(je,this._config.parent);return B.find(e,this._config.parent).filter((e=>!t.includes(e)))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const n of e)n.classList.toggle("collapsed",!t),n.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each((function(){const n=Ve.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===n[e])throw new TypeError('No method named "'.concat(e,'"'));n[e]()}}))}}x.on(document,ke,Ue,(function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();for(const t of B.getMultipleElementsFromSelector(this))Ve.getOrCreateInstance(t,{toggle:!1}).toggle()})),m(Ve);var Be="top",Ge="bottom",He="right",We="left",Ye="auto",qe=[Be,Ge,He,We],Ke="start",Qe="end",Je="clippingParents",Xe="viewport",Ze="popper",$e="reference",et=qe.reduce((function(e,t){return e.concat([t+"-"+Ke,t+"-"+Qe])}),[]),tt=[].concat(qe,[Ye]).reduce((function(e,t){return e.concat([t,t+"-"+Ke,t+"-"+Qe])}),[]),nt="beforeRead",rt="read",it="afterRead",ot="beforeMain",st="main",at="afterMain",ct="beforeWrite",lt="write",dt="afterWrite",ut=[nt,rt,it,ot,st,at,ct,lt,dt];function ht(e){return e?(e.nodeName||"").toLowerCase():null}function pt(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ft(e){return e instanceof pt(e).Element||e instanceof Element}function mt(e){return e instanceof pt(e).HTMLElement||e instanceof HTMLElement}function gt(e){return"undefined"!=typeof ShadowRoot&&(e instanceof pt(e).ShadowRoot||e instanceof ShadowRoot)}const yt={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];mt(i)&&ht(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});mt(r)&&ht(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};function vt(e){return e.split("-")[0]}var _t=Math.max,Et=Math.min,St=Math.round;function Tt(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function bt(){return!/^((?!chrome|android).)*safari/i.test(Tt())}function It(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&mt(e)&&(i=e.offsetWidth>0&&St(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&St(r.height)/e.offsetHeight||1);var s=(ft(e)?pt(e):window).visualViewport,a=!bt()&&n,c=(r.left+(a&&s?s.offsetLeft:0))/i,l=(r.top+(a&&s?s.offsetTop:0))/o,d=r.width/i,u=r.height/o;return{width:d,height:u,top:l,right:c+d,bottom:l+u,left:c,x:c,y:l}}function Nt(e){var t=It(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Ct(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&gt(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function wt(e){return pt(e).getComputedStyle(e)}function Rt(e){return["table","td","th"].indexOf(ht(e))>=0}function At(e){return((ft(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ot(e){return"html"===ht(e)?e:e.assignedSlot||e.parentNode||(gt(e)?e.host:null)||At(e)}function Mt(e){return mt(e)&&"fixed"!==wt(e).position?e.offsetParent:null}function Dt(e){for(var t=pt(e),n=Mt(e);n&&Rt(n)&&"static"===wt(n).position;)n=Mt(n);return n&&("html"===ht(n)||"body"===ht(n)&&"static"===wt(n).position)?t:n||function(e){var t=/firefox/i.test(Tt());if(/Trident/i.test(Tt())&&mt(e)&&"fixed"===wt(e).position)return null;var n=Ot(e);for(gt(n)&&(n=n.host);mt(n)&&["html","body"].indexOf(ht(n))<0;){var r=wt(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function kt(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function xt(e,t,n){return _t(e,Et(t,n))}function Lt(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Pt(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}const jt={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=vt(n.placement),c=kt(a),l=[We,He].indexOf(a)>=0?"height":"width";if(o&&s){var d=function(e,t){return Lt("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Pt(e,qe))}(i.padding,n),u=Nt(o),h="y"===c?Be:We,p="y"===c?Ge:He,f=n.rects.reference[l]+n.rects.reference[c]-s[c]-n.rects.popper[l],m=s[c]-n.rects.reference[c],g=Dt(o),y=g?"y"===c?g.clientHeight||0:g.clientWidth||0:0,v=f/2-m/2,_=d[h],E=y-u[l]-d[p],S=y/2-u[l]/2+v,T=xt(_,S,E),b=c;n.modifiersData[r]=((t={})[b]=T,t.centerOffset=T-S,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&Ct(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ut(e){return e.split("-")[1]}var Ft={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zt(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,s=e.offsets,a=e.position,c=e.gpuAcceleration,l=e.adaptive,d=e.roundOffsets,u=e.isFixed,h=s.x,p=void 0===h?0:h,f=s.y,m=void 0===f?0:f,g="function"==typeof d?d({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var y=s.hasOwnProperty("x"),v=s.hasOwnProperty("y"),_=We,E=Be,S=window;if(l){var T=Dt(n),b="clientHeight",I="clientWidth";T===pt(n)&&"static"!==wt(T=At(n)).position&&"absolute"===a&&(b="scrollHeight",I="scrollWidth"),(i===Be||(i===We||i===He)&&o===Qe)&&(E=Ge,m-=(u&&T===S&&S.visualViewport?S.visualViewport.height:T[b])-r.height,m*=c?1:-1),i!==We&&(i!==Be&&i!==Ge||o!==Qe)||(_=He,p-=(u&&T===S&&S.visualViewport?S.visualViewport.width:T[I])-r.width,p*=c?1:-1)}var N,C=Object.assign({position:a},l&&Ft),w=!0===d?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:St(n*i)/i||0,y:St(r*i)/i||0}}({x:p,y:m},pt(n)):{x:p,y:m};return p=w.x,m=w.y,c?Object.assign({},C,((N={})[E]=v?"0":"",N[_]=y?"0":"",N.transform=(S.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",N)):Object.assign({},C,((t={})[E]=v?m+"px":"",t[_]=y?p+"px":"",t.transform="",t))}const Vt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,c=void 0===a||a,l={placement:vt(t.placement),variation:Ut(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,zt(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,zt(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var Bt={passive:!0};const Gt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,s=r.resize,a=void 0===s||s,c=pt(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&l.forEach((function(e){e.addEventListener("scroll",n.update,Bt)})),a&&c.addEventListener("resize",n.update,Bt),function(){o&&l.forEach((function(e){e.removeEventListener("scroll",n.update,Bt)})),a&&c.removeEventListener("resize",n.update,Bt)}},data:{}};var Ht={left:"right",right:"left",bottom:"top",top:"bottom"};function Wt(e){return e.replace(/left|right|bottom|top/g,(function(e){return Ht[e]}))}var Yt={start:"end",end:"start"};function qt(e){return e.replace(/start|end/g,(function(e){return Yt[e]}))}function Kt(e){var t=pt(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Qt(e){return It(At(e)).left+Kt(e).scrollLeft}function Jt(e){var t=wt(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Xt(e){return["html","body","#document"].indexOf(ht(e))>=0?e.ownerDocument.body:mt(e)&&Jt(e)?e:Xt(Ot(e))}function Zt(e,t){var n;void 0===t&&(t=[]);var r=Xt(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=pt(r),s=i?[o].concat(o.visualViewport||[],Jt(r)?r:[]):r,a=t.concat(s);return i?a:a.concat(Zt(Ot(s)))}function $t(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function en(e,t,n){return t===Xe?$t(function(e,t){var n=pt(e),r=At(e),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,c=0;if(i){o=i.width,s=i.height;var l=bt();(l||!l&&"fixed"===t)&&(a=i.offsetLeft,c=i.offsetTop)}return{width:o,height:s,x:a+Qt(e),y:c}}(e,n)):ft(t)?function(e,t){var n=It(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):$t(function(e){var t,n=At(e),r=Kt(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=_t(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=_t(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+Qt(e),c=-r.scrollTop;return"rtl"===wt(i||n).direction&&(a+=_t(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:c}}(At(e)))}function tn(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?vt(i):null,s=i?Ut(i):null,a=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(o){case Be:t={x:a,y:n.y-r.height};break;case Ge:t={x:a,y:n.y+n.height};break;case He:t={x:n.x+n.width,y:c};break;case We:t={x:n.x-r.width,y:c};break;default:t={x:n.x,y:n.y}}var l=o?kt(o):null;if(null!=l){var d="y"===l?"height":"width";switch(s){case Ke:t[l]=t[l]-(n[d]/2-r[d]/2);break;case Qe:t[l]=t[l]+(n[d]/2-r[d]/2)}}return t}function nn(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.strategy,s=void 0===o?e.strategy:o,a=n.boundary,c=void 0===a?Je:a,l=n.rootBoundary,d=void 0===l?Xe:l,u=n.elementContext,h=void 0===u?Ze:u,p=n.altBoundary,f=void 0!==p&&p,m=n.padding,g=void 0===m?0:m,y=Lt("number"!=typeof g?g:Pt(g,qe)),v=h===Ze?$e:Ze,_=e.rects.popper,E=e.elements[f?v:h],S=function(e,t,n,r){var i="clippingParents"===t?function(e){var t=Zt(Ot(e)),n=["absolute","fixed"].indexOf(wt(e).position)>=0&&mt(e)?Dt(e):e;return ft(n)?t.filter((function(e){return ft(e)&&Ct(e,n)&&"body"!==ht(e)})):[]}(e):[].concat(t),o=[].concat(i,[n]),s=o[0],a=o.reduce((function(t,n){var i=en(e,n,r);return t.top=_t(i.top,t.top),t.right=Et(i.right,t.right),t.bottom=Et(i.bottom,t.bottom),t.left=_t(i.left,t.left),t}),en(e,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(ft(E)?E:E.contextElement||At(e.elements.popper),c,d,s),T=It(e.elements.reference),b=tn({reference:T,element:_,strategy:"absolute",placement:i}),I=$t(Object.assign({},_,b)),N=h===Ze?I:T,C={top:S.top-N.top+y.top,bottom:N.bottom-S.bottom+y.bottom,left:S.left-N.left+y.left,right:N.right-S.right+y.right},w=e.modifiersData.offset;if(h===Ze&&w){var R=w[i];Object.keys(C).forEach((function(e){var t=[He,Ge].indexOf(e)>=0?1:-1,n=[Be,Ge].indexOf(e)>=0?"y":"x";C[e]+=R[n]*t}))}return C}function rn(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?tt:c,d=Ut(r),u=d?a?et:et.filter((function(e){return Ut(e)===d})):qe,h=u.filter((function(e){return l.indexOf(e)>=0}));0===h.length&&(h=u);var p=h.reduce((function(t,n){return t[n]=nn(e,{placement:n,boundary:i,rootBoundary:o,padding:s})[vt(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}const on={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0===s||s,c=n.fallbackPlacements,l=n.padding,d=n.boundary,u=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,y=vt(g),v=c||(y!==g&&f?function(e){if(vt(e)===Ye)return[];var t=Wt(e);return[qt(e),t,qt(t)]}(g):[Wt(g)]),_=[g].concat(v).reduce((function(e,n){return e.concat(vt(n)===Ye?rn(t,{placement:n,boundary:d,rootBoundary:u,padding:l,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),E=t.rects.reference,S=t.rects.popper,T=new Map,b=!0,I=_[0],N=0;N<_.length;N++){var C=_[N],w=vt(C),R=Ut(C)===Ke,A=[Be,Ge].indexOf(w)>=0,O=A?"width":"height",M=nn(t,{placement:C,boundary:d,rootBoundary:u,altBoundary:h,padding:l}),D=A?R?He:We:R?Ge:Be;E[O]>S[O]&&(D=Wt(D));var k=Wt(D),x=[];if(o&&x.push(M[w]<=0),a&&x.push(M[D]<=0,M[k]<=0),x.every((function(e){return e}))){I=C,b=!1;break}T.set(C,x)}if(b)for(var L=function(e){var t=_.find((function(t){var n=T.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return I=t,"break"},P=f?3:1;P>0&&"break"!==L(P);P--);t.placement!==I&&(t.modifiersData[r]._skip=!0,t.placement=I,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function sn(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function an(e){return[Be,He,Ge,We].some((function(t){return e[t]>=0}))}const cn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,s=nn(t,{elementContext:"reference"}),a=nn(t,{altBoundary:!0}),c=sn(s,r),l=sn(a,i,o),d=an(c),u=an(l);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}},ln={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,s=tt.reduce((function(e,n){return e[n]=function(e,t,n){var r=vt(e),i=[We,Be].indexOf(r)>=0?-1:1,o="function"==typeof n?n(Object.assign({},t,{placement:e})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[We,He].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}(n,t.rects,o),e}),{}),a=s[t.placement],c=a.x,l=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=l),t.modifiersData[r]=s}},dn={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=tn({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},un={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0!==s&&s,c=n.boundary,l=n.rootBoundary,d=n.altBoundary,u=n.padding,h=n.tether,p=void 0===h||h,f=n.tetherOffset,m=void 0===f?0:f,g=nn(t,{boundary:c,rootBoundary:l,padding:u,altBoundary:d}),y=vt(t.placement),v=Ut(t.placement),_=!v,E=kt(y),S="x"===E?"y":"x",T=t.modifiersData.popperOffsets,b=t.rects.reference,I=t.rects.popper,N="function"==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,C="number"==typeof N?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),w=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,R={x:0,y:0};if(T){if(o){var A,O="y"===E?Be:We,M="y"===E?Ge:He,D="y"===E?"height":"width",k=T[E],x=k+g[O],L=k-g[M],P=p?-I[D]/2:0,j=v===Ke?b[D]:I[D],U=v===Ke?-I[D]:-b[D],F=t.elements.arrow,z=p&&F?Nt(F):{width:0,height:0},V=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},B=V[O],G=V[M],H=xt(0,b[D],z[D]),W=_?b[D]/2-P-H-B-C.mainAxis:j-H-B-C.mainAxis,Y=_?-b[D]/2+P+H+G+C.mainAxis:U+H+G+C.mainAxis,q=t.elements.arrow&&Dt(t.elements.arrow),K=q?"y"===E?q.clientTop||0:q.clientLeft||0:0,Q=null!=(A=null==w?void 0:w[E])?A:0,J=k+Y-Q,X=xt(p?Et(x,k+W-Q-K):x,k,p?_t(L,J):L);T[E]=X,R[E]=X-k}if(a){var Z,$="x"===E?Be:We,ee="x"===E?Ge:He,te=T[S],ne="y"===S?"height":"width",re=te+g[$],ie=te-g[ee],oe=-1!==[Be,We].indexOf(y),se=null!=(Z=null==w?void 0:w[S])?Z:0,ae=oe?re:te-b[ne]-I[ne]-se+C.altAxis,ce=oe?te+b[ne]+I[ne]-se-C.altAxis:ie,le=p&&oe?function(e,t,n){var r=xt(e,t,n);return r>n?n:r}(ae,te,ce):xt(p?ae:re,te,p?ce:ie);T[S]=le,R[S]=le-te}t.modifiersData[r]=R}},requiresIfExists:["offset"]};function hn(e,t,n){void 0===n&&(n=!1);var r,i,o=mt(t),s=mt(t)&&function(e){var t=e.getBoundingClientRect(),n=St(t.width)/e.offsetWidth||1,r=St(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),a=At(t),c=It(e,s,n),l={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(o||!o&&!n)&&(("body"!==ht(t)||Jt(a))&&(l=(r=t)!==pt(r)&&mt(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:Kt(r)),mt(t)?((d=It(t,!0)).x+=t.clientLeft,d.y+=t.clientTop):a&&(d.x=Qt(a))),{x:c.left+l.scrollLeft-d.x,y:c.top+l.scrollTop-d.y,width:c.width,height:c.height}}function pn(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}var fn={placement:"bottom",modifiers:[],strategy:"absolute"};function mn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function gn(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?fn:i;return function(e,t,n){void 0===n&&(n=o);var i,s,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},fn,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},c=[],l=!1,d={state:a,setOptions:function(n){var i="function"==typeof n?n(a.options):n;u(),a.options=Object.assign({},o,a.options,i),a.scrollParents={reference:ft(e)?Zt(e):e.contextElement?Zt(e.contextElement):[],popper:Zt(t)};var s,l,h=function(e){var t=pn(e);return ut.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((s=[].concat(r,a.options.modifiers),l=s.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),Object.keys(l).map((function(e){return l[e]}))));return a.orderedModifiers=h.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if("function"==typeof i){var o=i({state:a,name:t,instance:d,options:r});c.push(o||function(){})}})),d.update()},forceUpdate:function(){if(!l){var e=a.elements,t=e.reference,n=e.popper;if(mn(t,n)){a.rects={reference:hn(t,Dt(n),"fixed"===a.options.strategy),popper:Nt(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<a.orderedModifiers.length;r++)if(!0!==a.reset){var i=a.orderedModifiers[r],o=i.fn,s=i.options,c=void 0===s?{}:s,u=i.name;"function"==typeof o&&(a=o({state:a,options:c,name:u,instance:d})||a)}else a.reset=!1,r=-1}}},update:(i=function(){return new Promise((function(e){d.forceUpdate(),e(a)}))},function(){return s||(s=new Promise((function(e){Promise.resolve().then((function(){s=void 0,e(i())}))}))),s}),destroy:function(){u(),l=!0}};if(!mn(e,t))return d;function u(){c.forEach((function(e){return e()})),c=[]}return d.setOptions(n).then((function(e){!l&&n.onFirstUpdate&&n.onFirstUpdate(e)})),d}}var yn=gn(),vn=gn({defaultModifiers:[Gt,dn,Vt,yt]}),_n=gn({defaultModifiers:[Gt,dn,Vt,yt,ln,on,un,jt,cn]});const En=Object.freeze(Object.defineProperty({__proto__:null,afterMain:at,afterRead:it,afterWrite:dt,applyStyles:yt,arrow:jt,auto:Ye,basePlacements:qe,beforeMain:ot,beforeRead:nt,beforeWrite:ct,bottom:Ge,clippingParents:Je,computeStyles:Vt,createPopper:_n,createPopperBase:yn,createPopperLite:vn,detectOverflow:nn,end:Qe,eventListeners:Gt,flip:on,hide:cn,left:We,main:st,modifierPhases:ut,offset:ln,placements:tt,popper:Ze,popperGenerator:gn,popperOffsets:dn,preventOverflow:un,read:rt,reference:$e,right:He,start:Ke,top:Be,variationPlacements:et,viewport:Xe,write:lt},Symbol.toStringTag,{value:"Module"})),Sn="dropdown",Tn=".bs.dropdown",bn=".data-api",In="ArrowUp",Nn="ArrowDown",Cn="hide".concat(Tn),wn="hidden".concat(Tn),Rn="show".concat(Tn),An="shown".concat(Tn),On="click".concat(Tn).concat(bn),Mn="keydown".concat(Tn).concat(bn),Dn="keyup".concat(Tn).concat(bn),kn="show",xn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Ln="".concat(xn,".").concat(kn),Pn=".dropdown-menu",jn=f()?"top-end":"top-start",Un=f()?"top-start":"top-end",Fn=f()?"bottom-end":"bottom-start",zn=f()?"bottom-start":"bottom-end",Vn=f()?"left-start":"right-start",Bn=f()?"right-start":"left-start",Gn={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Hn={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Wn extends z{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=B.next(this._element,Pn)[0]||B.prev(this._element,Pn)[0]||B.findOne(Pn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Gn}static get DefaultType(){return Hn}static get NAME(){return Sn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(c(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!x.trigger(this._element,Rn,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const e of[].concat(...document.body.children))x.on(e,"mouseover",d);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(kn),this._element.classList.add(kn),x.trigger(this._element,An,e)}}hide(){if(c(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!x.trigger(this._element,Cn,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))x.off(e,"mouseover",d);this._popper&&this._popper.destroy(),this._menu.classList.remove(kn),this._element.classList.remove(kn),this._element.setAttribute("aria-expanded","false"),U.removeDataAttribute(this._menu,"popper"),x.trigger(this._element,wn,e)}}_getConfig(e){if("object"==typeof(e=super._getConfig(e)).reference&&!o(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError("".concat(Sn.toUpperCase(),': Option "reference" provided type "object" without a required "getBoundingClientRect" method.'));return e}_createPopper(){if(void 0===En)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=this._parent:o(this._config.reference)?e=s(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=_n(e,this._menu,t)}_isShown(){return this._menu.classList.contains(kn)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return Vn;if(e.classList.contains("dropstart"))return Bn;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?Un:jn:t?zn:Fn}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(U.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...g(this._config.popperConfig,[e])}}_selectMenuItem(e){let{key:t,target:n}=e;const r=B.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((e=>a(e)));r.length&&v(r,n,t===Nn,!r.includes(n)).focus()}static jQueryInterface(e){return this.each((function(){const t=Wn.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}static clearMenus(e){if(2===e.button||"keyup"===e.type&&"Tab"!==e.key)return;const t=B.find(Ln);for(const n of t){const t=Wn.getInstance(n);if(!t||!1===t._config.autoClose)continue;const r=e.composedPath(),i=r.includes(t._menu);if(r.includes(t._element)||"inside"===t._config.autoClose&&!i||"outside"===t._config.autoClose&&i)continue;if(t._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const o={relatedTarget:t._element};"click"===e.type&&(o.clickEvent=e),t._completeHide(o)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),n="Escape"===e.key,r=[In,Nn].includes(e.key);if(!r&&!n)return;if(t&&!n)return;e.preventDefault();const i=this.matches(xn)?this:B.prev(this,xn)[0]||B.next(this,xn)[0]||B.findOne(xn,e.delegateTarget.parentNode),o=Wn.getOrCreateInstance(i);if(r)return e.stopPropagation(),o.show(),void o._selectMenuItem(e);o._isShown()&&(e.stopPropagation(),o.hide(),i.focus())}}x.on(document,Mn,xn,Wn.dataApiKeydownHandler),x.on(document,Mn,Pn,Wn.dataApiKeydownHandler),x.on(document,On,Wn.clearMenus),x.on(document,Dn,Wn.clearMenus),x.on(document,On,xn,(function(e){e.preventDefault(),Wn.getOrCreateInstance(this).toggle()})),m(Wn);const Yn="backdrop",qn="show",Kn="mousedown.bs.".concat(Yn),Qn={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Jn={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Xn extends F{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Qn}static get DefaultType(){return Jn}static get NAME(){return Yn}show(e){if(!this._config.isVisible)return void g(e);this._append();const t=this._getElement();this._config.isAnimated&&u(t),t.classList.add(qn),this._emulateAnimation((()=>{g(e)}))}hide(e){this._config.isVisible?(this._getElement().classList.remove(qn),this._emulateAnimation((()=>{this.dispose(),g(e)}))):g(e)}dispose(){this._isAppended&&(x.off(this._element,Kn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=s(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),x.on(e,Kn,(()=>{g(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(e){y(e,this._getElement(),this._config.isAnimated)}}const Zn=".bs.focustrap",$n="focusin".concat(Zn),er="keydown.tab".concat(Zn),tr="backward",nr={autofocus:!0,trapElement:null},rr={autofocus:"boolean",trapElement:"element"};class ir extends F{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return nr}static get DefaultType(){return rr}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),x.off(document,Zn),x.on(document,$n,(e=>this._handleFocusin(e))),x.on(document,er,(e=>this._handleKeydown(e))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,x.off(document,Zn))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const n=B.focusableChildren(t);0===n.length?t.focus():this._lastTabNavDirection===tr?n[n.length-1].focus():n[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?tr:"forward")}}const or=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",sr=".sticky-top",ar="padding-right",cr="margin-right";class lr{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ar,(t=>t+e)),this._setElementAttributes(or,ar,(t=>t+e)),this._setElementAttributes(sr,cr,(t=>t-e))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ar),this._resetElementAttributes(or,ar),this._resetElementAttributes(sr,cr)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,n){const r=this.getWidth();this._applyManipulationCallback(e,(e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+r)return;this._saveInitialAttribute(e,t);const i=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,"".concat(n(Number.parseFloat(i)),"px"))}))}_saveInitialAttribute(e,t){const n=e.style.getPropertyValue(t);n&&U.setDataAttribute(e,t,n)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,(e=>{const n=U.getDataAttribute(e,t);null!==n?(U.removeDataAttribute(e,t),e.style.setProperty(t,n)):e.style.removeProperty(t)}))}_applyManipulationCallback(e,t){if(o(e))t(e);else for(const n of B.find(e,this._element))t(n)}}const dr=".bs.modal",ur="hide".concat(dr),hr="hidePrevented".concat(dr),pr="hidden".concat(dr),fr="show".concat(dr),mr="shown".concat(dr),gr="resize".concat(dr),yr="click.dismiss".concat(dr),vr="mousedown.dismiss".concat(dr),_r="keydown.dismiss".concat(dr),Er="click".concat(dr,".data-api"),Sr="modal-open",Tr="show",br="modal-static",Ir={backdrop:!0,focus:!0,keyboard:!0},Nr={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Cr extends z{constructor(e,t){super(e,t),this._dialog=B.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new lr,this._addEventListeners()}static get Default(){return Ir}static get DefaultType(){return Nr}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||x.trigger(this._element,fr,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Sr),this._adjustDialog(),this._backdrop.show((()=>this._showElement(e))))}hide(){this._isShown&&!this._isTransitioning&&(x.trigger(this._element,ur).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Tr),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated())))}dispose(){x.off(window,dr),x.off(this._dialog,dr),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Xn({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ir({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=B.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),u(this._element),this._element.classList.add(Tr),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,x.trigger(this._element,mr,{relatedTarget:e})}),this._dialog,this._isAnimated())}_addEventListeners(){x.on(this._element,_r,(e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),x.on(window,gr,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),x.on(this._element,vr,(e=>{x.one(this._element,yr,(t=>{this._element===e.target&&this._element===t.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(Sr),this._resetAdjustments(),this._scrollBar.reset(),x.trigger(this._element,pr)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(x.trigger(this._element,hr).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;"hidden"===t||this._element.classList.contains(br)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(br),this._queueCallback((()=>{this._element.classList.remove(br),this._queueCallback((()=>{this._element.style.overflowY=t}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),n=t>0;if(n&&!e){const e=f()?"paddingLeft":"paddingRight";this._element.style[e]="".concat(t,"px")}if(!n&&e){const e=f()?"paddingRight":"paddingLeft";this._element.style[e]="".concat(t,"px")}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each((function(){const n=Cr.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===n[e])throw new TypeError('No method named "'.concat(e,'"'));n[e](t)}}))}}x.on(document,Er,'[data-bs-toggle="modal"]',(function(e){const t=B.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),x.one(t,fr,(e=>{e.defaultPrevented||x.one(t,pr,(()=>{a(this)&&this.focus()}))}));const n=B.findOne(".modal.show");n&&Cr.getInstance(n).hide(),Cr.getOrCreateInstance(t).toggle(this)})),G(Cr),m(Cr);const wr=".bs.offcanvas",Rr=".data-api",Ar="load".concat(wr).concat(Rr),Or="show",Mr="showing",Dr="hiding",kr=".offcanvas.show",xr="show".concat(wr),Lr="shown".concat(wr),Pr="hide".concat(wr),jr="hidePrevented".concat(wr),Ur="hidden".concat(wr),Fr="resize".concat(wr),zr="click".concat(wr).concat(Rr),Vr="keydown.dismiss".concat(wr),Br={backdrop:!0,keyboard:!0,scroll:!1},Gr={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Hr extends z{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Br}static get DefaultType(){return Gr}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||x.trigger(this._element,xr,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new lr).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Mr),this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Or),this._element.classList.remove(Mr),x.trigger(this._element,Lr,{relatedTarget:e})}),this._element,!0))}hide(){this._isShown&&(x.trigger(this._element,Pr).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Dr),this._backdrop.hide(),this._queueCallback((()=>{this._element.classList.remove(Or,Dr),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new lr).reset(),x.trigger(this._element,Ur)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new Xn({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{"static"!==this._config.backdrop?this.hide():x.trigger(this._element,jr)}:null})}_initializeFocusTrap(){return new ir({trapElement:this._element})}_addEventListeners(){x.on(this._element,Vr,(e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():x.trigger(this._element,jr))}))}static jQueryInterface(e){return this.each((function(){const t=Hr.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e](this)}}))}}x.on(document,zr,'[data-bs-toggle="offcanvas"]',(function(e){const t=B.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),c(this))return;x.one(t,Ur,(()=>{a(this)&&this.focus()}));const n=B.findOne(kr);n&&n!==t&&Hr.getInstance(n).hide(),Hr.getOrCreateInstance(t).toggle(this)})),x.on(window,Ar,(()=>{for(const e of B.find(kr))Hr.getOrCreateInstance(e).show()})),x.on(window,Fr,(()=>{for(const e of B.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(e).position&&Hr.getOrCreateInstance(e).hide()})),G(Hr),m(Hr);const Wr={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Yr=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),qr=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Kr=(e,t)=>{const n=e.nodeName.toLowerCase();return t.includes(n)?!Yr.has(n)||Boolean(qr.test(e.nodeValue)):t.filter((e=>e instanceof RegExp)).some((e=>e.test(n)))},Qr={allowList:Wr,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Jr={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Xr={entry:"(string|element|function|null)",selector:"(string|element)"};class Zr extends F{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Qr}static get DefaultType(){return Jr}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((e=>this._resolvePossibleFunction(e))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[r,i]of Object.entries(this._config.content))this._setContent(e,i,r);const t=e.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&t.classList.add(...n.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,n]of Object.entries(e))super._typeCheckConfig({selector:t,entry:n},Xr)}_setContent(e,t,n){const r=B.findOne(n,e);r&&((t=this._resolvePossibleFunction(t))?o(t)?this._putElementInTemplate(s(t),r):this._config.html?r.innerHTML=this._maybeSanitize(t):r.textContent=t:r.remove())}_maybeSanitize(e){return this._config.sanitize?function(e,t,n){if(!e.length)return e;if(n&&"function"==typeof n)return n(e);const r=(new window.DOMParser).parseFromString(e,"text/html"),i=[].concat(...r.body.querySelectorAll("*"));for(const o of i){const e=o.nodeName.toLowerCase();if(!Object.keys(t).includes(e)){o.remove();continue}const n=[].concat(...o.attributes),r=[].concat(t["*"]||[],t[e]||[]);for(const t of n)Kr(t,r)||o.removeAttribute(t.nodeName)}return r.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return g(e,[this])}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}}const $r=new Set(["sanitize","allowList","sanitizeFn"]),ei="fade",ti="show",ni=".modal",ri="hide.bs.modal",ii="hover",oi="focus",si={AUTO:"auto",TOP:"top",RIGHT:f()?"left":"right",BOTTOM:"bottom",LEFT:f()?"right":"left"},ai={allowList:Wr,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},ci={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class li extends z{constructor(e,t){if(void 0===En)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return ai}static get DefaultType(){return ci}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),x.off(this._element.closest(ni),ri,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=x.trigger(this._element,this.constructor.eventName("show")),t=(l(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!t)return;this._disposePopper();const n=this._getTipElement();this._element.setAttribute("aria-describedby",n.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(n),x.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(n),n.classList.add(ti),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))x.on(i,"mouseover",d);this._queueCallback((()=>{x.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(this._isShown()&&!x.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(ti),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))x.off(e,"mouseover",d);this._activeTrigger.click=!1,this._activeTrigger[oi]=!1,this._activeTrigger[ii]=!1,this._isHovered=null,this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),x.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(ei,ti),t.classList.add("bs-".concat(this.constructor.NAME,"-auto"));const n=(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(this.constructor.NAME).toString();return t.setAttribute("id",n),this._isAnimated()&&t.classList.add(ei),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Zr({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ei)}_isShown(){return this.tip&&this.tip.classList.contains(ti)}_createPopper(e){const t=g(this._config.placement,[this,e,this._element]),n=si[t.toUpperCase()];return _n(this._element,e,this._getPopperConfig(n))}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return g(e,[this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:".".concat(this.constructor.NAME,"-arrow")}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return{...t,...g(this._config.popperConfig,[t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if("click"===t)x.on(this._element,this.constructor.eventName("click"),this._config.selector,(e=>{this._initializeOnDelegatedTarget(e).toggle()}));else if("manual"!==t){const e=t===ii?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),n=t===ii?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");x.on(this._element,e,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusin"===e.type?oi:ii]=!0,t._enter()})),x.on(this._element,n,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusout"===e.type?oi:ii]=t._element.contains(e.relatedTarget),t._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},x.on(this._element.closest(ni),ri,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=U.getDataAttributes(this._element);for(const n of Object.keys(t))$r.has(n)&&delete t[n];return e={...t,..."object"==typeof e&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:s(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,n]of Object.entries(this._config))this.constructor.Default[t]!==n&&(e[t]=n);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each((function(){const t=li.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}}m(li);const di={...li.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},ui={...li.DefaultType,content:"(null|string|element|function)"};class hi extends li{static get Default(){return di}static get DefaultType(){return ui}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each((function(){const t=hi.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}}m(hi);const pi=".bs.scrollspy",fi="activate".concat(pi),mi="click".concat(pi),gi="load".concat(pi,".data-api"),yi="active",vi="[href]",_i=".nav-link",Ei="".concat(_i,", .nav-item > ").concat(_i,", .list-group-item"),Si={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Ti={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class bi extends z{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Si}static get DefaultType(){return Ti}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=s(e.target)||document.body,e.rootMargin=e.offset?"".concat(e.offset,"px 0px -30%"):e.rootMargin,"string"==typeof e.threshold&&(e.threshold=e.threshold.split(",").map((e=>Number.parseFloat(e)))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(x.off(this._config.target,mi),x.on(this._config.target,mi,vi,(e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const n=this._rootElement||window,r=t.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:r,behavior:"smooth"});n.scrollTop=r}})))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((e=>this._observerCallback(e)),e)}_observerCallback(e){const t=e=>this._targetLinks.get("#".concat(e.target.id)),n=e=>{this._previousScrollData.visibleEntryTop=e.target.offsetTop,this._process(t(e))},r=(this._rootElement||document.documentElement).scrollTop,i=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const o of e){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(o));continue}const e=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(i&&e){if(n(o),!r)return}else i||e||n(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=B.find(vi,this._config.target);for(const t of e){if(!t.hash||c(t))continue;const e=B.findOne(decodeURI(t.hash),this._element);a(e)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,e))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(yi),this._activateParents(e),x.trigger(this._element,fi,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))B.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(yi);else for(const t of B.parents(e,".nav, .list-group"))for(const e of B.prev(t,Ei))e.classList.add(yi)}_clearActiveClass(e){e.classList.remove(yi);const t=B.find("".concat(vi,".").concat(yi),e);for(const n of t)n.classList.remove(yi)}static jQueryInterface(e){return this.each((function(){const t=bi.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}}x.on(window,gi,(()=>{for(const e of B.find('[data-bs-spy="scroll"]'))bi.getOrCreateInstance(e)})),m(bi);const Ii=".bs.tab",Ni="hide".concat(Ii),Ci="hidden".concat(Ii),wi="show".concat(Ii),Ri="shown".concat(Ii),Ai="click".concat(Ii),Oi="keydown".concat(Ii),Mi="load".concat(Ii),Di="ArrowLeft",ki="ArrowRight",xi="ArrowUp",Li="ArrowDown",Pi="Home",ji="End",Ui="active",Fi="fade",zi="show",Vi=".dropdown-toggle",Bi=":not(".concat(Vi,")"),Gi='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Hi=".nav-link".concat(Bi,", .list-group-item").concat(Bi,', [role="tab"]').concat(Bi,", ").concat(Gi),Wi=".".concat(Ui,'[data-bs-toggle="tab"], .').concat(Ui,'[data-bs-toggle="pill"], .').concat(Ui,'[data-bs-toggle="list"]');class Yi extends z{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),x.on(this._element,Oi,(e=>this._keydown(e))))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),n=t?x.trigger(t,Ni,{relatedTarget:e}):null;x.trigger(e,wi,{relatedTarget:t}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){e&&(e.classList.add(Ui),this._activate(B.getElementFromSelector(e)),this._queueCallback((()=>{"tab"===e.getAttribute("role")?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),x.trigger(e,Ri,{relatedTarget:t})):e.classList.add(zi)}),e,e.classList.contains(Fi)))}_deactivate(e,t){e&&(e.classList.remove(Ui),e.blur(),this._deactivate(B.getElementFromSelector(e)),this._queueCallback((()=>{"tab"===e.getAttribute("role")?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),x.trigger(e,Ci,{relatedTarget:t})):e.classList.remove(zi)}),e,e.classList.contains(Fi)))}_keydown(e){if(![Di,ki,xi,Li,Pi,ji].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter((e=>!c(e)));let n;if([Pi,ji].includes(e.key))n=t[e.key===Pi?0:t.length-1];else{const r=[ki,Li].includes(e.key);n=v(t,e.target,r,!0)}n&&(n.focus({preventScroll:!0}),Yi.getOrCreateInstance(n).show())}_getChildren(){return B.find(Hi,this._parent)}_getActiveElem(){return this._getChildren().find((e=>this._elemIsActive(e)))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const n of t)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),n=this._getOuterElement(e);e.setAttribute("aria-selected",t),n!==e&&this._setAttributeIfNotExists(n,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=B.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby","".concat(e.id)))}_toggleDropDown(e,t){const n=this._getOuterElement(e);if(!n.classList.contains("dropdown"))return;const r=(e,r)=>{const i=B.findOne(e,n);i&&i.classList.toggle(r,t)};r(Vi,Ui),r(".dropdown-menu",zi),n.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,n){e.hasAttribute(t)||e.setAttribute(t,n)}_elemIsActive(e){return e.classList.contains(Ui)}_getInnerElement(e){return e.matches(Hi)?e:B.findOne(Hi,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each((function(){const t=Yi.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}}x.on(document,Ai,Gi,(function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),c(this)||Yi.getOrCreateInstance(this).show()})),x.on(window,Mi,(()=>{for(const e of B.find(Wi))Yi.getOrCreateInstance(e)})),m(Yi);const qi=".bs.toast",Ki="mouseover".concat(qi),Qi="mouseout".concat(qi),Ji="focusin".concat(qi),Xi="focusout".concat(qi),Zi="hide".concat(qi),$i="hidden".concat(qi),eo="show".concat(qi),to="shown".concat(qi),no="hide",ro="show",io="showing",oo={animation:"boolean",autohide:"boolean",delay:"number"},so={animation:!0,autohide:!0,delay:5e3};class ao extends z{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return so}static get DefaultType(){return oo}static get NAME(){return"toast"}show(){x.trigger(this._element,eo).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(no),u(this._element),this._element.classList.add(ro,io),this._queueCallback((()=>{this._element.classList.remove(io),x.trigger(this._element,to),this._maybeScheduleHide()}),this._element,this._config.animation))}hide(){this.isShown()&&(x.trigger(this._element,Zi).defaultPrevented||(this._element.classList.add(io),this._queueCallback((()=>{this._element.classList.add(no),this._element.classList.remove(io,ro),x.trigger(this._element,$i)}),this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ro),super.dispose()}isShown(){return this._element.classList.contains(ro)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const n=e.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){x.on(this._element,Ki,(e=>this._onInteraction(e,!0))),x.on(this._element,Qi,(e=>this._onInteraction(e,!1))),x.on(this._element,Ji,(e=>this._onInteraction(e,!0))),x.on(this._element,Xi,(e=>this._onInteraction(e,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each((function(){const t=ao.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e](this)}}))}}return G(ao),m(ao),{Alert:q,Button:Q,Carousel:we,Collapse:Ve,Dropdown:Wn,Modal:Cr,Offcanvas:Hr,Popover:hi,ScrollSpy:bi,Tab:Yi,Toast:ao,Tooltip:li}}()},219:(t,n,r)=>{"use strict";var i=r(3763),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c={};function l(e){return i.isMemo(e)?a:c[e.$$typeof]||o}c[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},c[i.Memo]=a;var d=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,m=Object.prototype;t.exports=function t(n,r,i){if("string"!==typeof r){if(m){var o=f(r);o&&o!==m&&t(n,o,i)}var a=u(r);h&&(a=a.concat(h(r)));for(var c=l(n),g=l(r),y=0;y<a.length;++y){var v=a[y];if(!s[v]&&(!i||!i[v])&&(!g||!g[v])&&(!c||!c[v])){var _=p(r,v);try{d(n,v,_)}catch(e){}}}}return n}},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,d=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,E=n?Symbol.for("react.scope"):60119;function S(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case d:case u:case o:case a:case s:case p:return e;default:switch(e=e&&e.$$typeof){case l:case h:case g:case m:case c:return e;default:return t}}case i:return t}}}function T(e){return S(e)===u}t.AsyncMode=d,t.ConcurrentMode=u,t.ContextConsumer=l,t.ContextProvider=c,t.Element=r,t.ForwardRef=h,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=s,t.Suspense=p,t.isAsyncMode=function(e){return T(e)||S(e)===d},t.isConcurrentMode=T,t.isContextConsumer=function(e){return S(e)===l},t.isContextProvider=function(e){return S(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return S(e)===h},t.isFragment=function(e){return S(e)===o},t.isLazy=function(e){return S(e)===g},t.isMemo=function(e){return S(e)===m},t.isPortal=function(e){return S(e)===i},t.isProfiler=function(e){return S(e)===a},t.isStrictMode=function(e){return S(e)===s},t.isSuspense=function(e){return S(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===u||e===a||e===s||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===l||e.$$typeof===h||e.$$typeof===v||e.$$typeof===_||e.$$typeof===E||e.$$typeof===y)},t.typeOf=S},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},2740:e=>{"use strict";e.exports=function(e,t,n,r,i,o,s,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,s,a],d=0;(c=new Error(t.replace(/%s/g,(function(){return l[d++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},6178:function(t,n,r){(t=r.nmd(t)).exports=function(){"use strict";var n,r;function i(){return n.apply(null,arguments)}function o(e){n=e}function s(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function a(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(c(e,t))return!1;return!0}function d(e){return void 0===e}function u(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function h(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function p(e,t){var n,r=[],i=e.length;for(n=0;n<i;++n)r.push(t(e[n],n));return r}function f(e,t){for(var n in t)c(t,n)&&(e[n]=t[n]);return c(t,"toString")&&(e.toString=t.toString),c(t,"valueOf")&&(e.valueOf=t.valueOf),e}function m(e,t,n,r){return Qn(e,t,n,r,!0).utc()}function g(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function y(e){return null==e._pf&&(e._pf=g()),e._pf}function v(e){var t=null,n=!1,i=e._d&&!isNaN(e._d.getTime());return i&&(t=y(e),n=r.call(t.parsedDateParts,(function(e){return null!=e})),i=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n),e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)),null!=Object.isFrozen&&Object.isFrozen(e)?i:(e._isValid=i,e._isValid)}function _(e){var t=m(NaN);return null!=e?f(y(t),e):y(t).userInvalidated=!0,t}r=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var E=i.momentProperties=[],S=!1;function T(e,t){var n,r,i,o=E.length;if(d(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),d(t._i)||(e._i=t._i),d(t._f)||(e._f=t._f),d(t._l)||(e._l=t._l),d(t._strict)||(e._strict=t._strict),d(t._tzm)||(e._tzm=t._tzm),d(t._isUTC)||(e._isUTC=t._isUTC),d(t._offset)||(e._offset=t._offset),d(t._pf)||(e._pf=y(t)),d(t._locale)||(e._locale=t._locale),o>0)for(n=0;n<o;n++)d(i=t[r=E[n]])||(e[r]=i);return e}function b(e){T(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===S&&(S=!0,i.updateOffset(this),S=!1)}function I(e){return e instanceof b||null!=e&&null!=e._isAMomentObject}function N(e){!1===i.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function C(e,t){var n=!0;return f((function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,e),n){var r,o,s,a=[],l=arguments.length;for(o=0;o<l;o++){if(r="","object"===typeof arguments[o]){for(s in r+="\n["+o+"] ",arguments[0])c(arguments[0],s)&&(r+=s+": "+arguments[0][s]+", ");r=r.slice(0,-2)}else r=arguments[o];a.push(r)}N(e+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var w,R={};function A(e,t){null!=i.deprecationHandler&&i.deprecationHandler(e,t),R[e]||(N(t),R[e]=!0)}function O(e){return"undefined"!==typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function M(e){var t,n;for(n in e)c(e,n)&&(O(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function D(e,t){var n,r=f({},e);for(n in t)c(t,n)&&(a(e[n])&&a(t[n])?(r[n]={},f(r[n],e[n]),f(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)c(e,n)&&!c(t,n)&&a(e[n])&&(r[n]=f({},r[n]));return r}function k(e){null!=e&&this.set(e)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null,w=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)c(e,t)&&n.push(t);return n};var x={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function L(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return O(r)?r.call(t,n):r}function P(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var j=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,U=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,F={},z={};function V(e,t,n,r){var i=r;"string"===typeof r&&(i=function(){return this[r]()}),e&&(z[e]=i),t&&(z[t[0]]=function(){return P(i.apply(this,arguments),t[1],t[2])}),n&&(z[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function B(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function G(e){var t,n,r=e.match(j);for(t=0,n=r.length;t<n;t++)z[r[t]]?r[t]=z[r[t]]:r[t]=B(r[t]);return function(t){var i,o="";for(i=0;i<n;i++)o+=O(r[i])?r[i].call(t,e):r[i];return o}}function H(e,t){return e.isValid()?(t=W(t,e.localeData()),F[t]=F[t]||G(t),F[t](e)):e.localeData().invalidDate()}function W(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(U.lastIndex=0;n>=0&&U.test(e);)e=e.replace(U,r),U.lastIndex=0,n-=1;return e}var Y={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function q(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(j).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var K="Invalid date";function Q(){return this._invalidDate}var J="%d",X=/\d{1,2}/;function Z(e){return this._ordinal.replace("%d",e)}var $={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function ee(e,t,n,r){var i=this._relativeTime[n];return O(i)?i(e,t,n,r):i.replace(/%d/i,e)}function te(e,t){var n=this._relativeTime[e>0?"future":"past"];return O(n)?n(t):n.replace(/%s/i,t)}var ne={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function re(e){return"string"===typeof e?ne[e]||ne[e.toLowerCase()]:void 0}function ie(e){var t,n,r={};for(n in e)c(e,n)&&(t=re(n))&&(r[t]=e[n]);return r}var oe={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function se(e){var t,n=[];for(t in e)c(e,t)&&n.push({unit:t,priority:oe[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}var ae,ce=/\d/,le=/\d\d/,de=/\d{3}/,ue=/\d{4}/,he=/[+-]?\d{6}/,pe=/\d\d?/,fe=/\d\d\d\d?/,me=/\d\d\d\d\d\d?/,ge=/\d{1,3}/,ye=/\d{1,4}/,ve=/[+-]?\d{1,6}/,_e=/\d+/,Ee=/[+-]?\d+/,Se=/Z|[+-]\d\d:?\d\d/gi,Te=/Z|[+-]\d\d(?::?\d\d)?/gi,be=/[+-]?\d+(\.\d{1,3})?/,Ie=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Ne=/^[1-9]\d?/,Ce=/^([1-9]\d|\d)/;function we(e,t,n){ae[e]=O(t)?t:function(e,r){return e&&n?n:t}}function Re(e,t){return c(ae,e)?ae[e](t._strict,t._locale):new RegExp(Ae(e))}function Ae(e){return Oe(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,i){return t||n||r||i})))}function Oe(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Me(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function De(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=Me(t)),n}ae={};var ke={};function xe(e,t){var n,r,i=t;for("string"===typeof e&&(e=[e]),u(t)&&(i=function(e,n){n[t]=De(e)}),r=e.length,n=0;n<r;n++)ke[e[n]]=i}function Le(e,t){xe(e,(function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)}))}function Pe(e,t,n){null!=t&&c(ke,e)&&ke[e](t,n._a,n,e)}function je(e){return e%4===0&&e%100!==0||e%400===0}var Ue=0,Fe=1,ze=2,Ve=3,Be=4,Ge=5,He=6,We=7,Ye=8;function qe(e){return je(e)?366:365}V("Y",0,0,(function(){var e=this.year();return e<=9999?P(e,4):"+"+e})),V(0,["YY",2],0,(function(){return this.year()%100})),V(0,["YYYY",4],0,"year"),V(0,["YYYYY",5],0,"year"),V(0,["YYYYYY",6,!0],0,"year"),we("Y",Ee),we("YY",pe,le),we("YYYY",ye,ue),we("YYYYY",ve,he),we("YYYYYY",ve,he),xe(["YYYYY","YYYYYY"],Ue),xe("YYYY",(function(e,t){t[Ue]=2===e.length?i.parseTwoDigitYear(e):De(e)})),xe("YY",(function(e,t){t[Ue]=i.parseTwoDigitYear(e)})),xe("Y",(function(e,t){t[Ue]=parseInt(e,10)})),i.parseTwoDigitYear=function(e){return De(e)+(De(e)>68?1900:2e3)};var Ke,Qe=Xe("FullYear",!0);function Je(){return je(this.year())}function Xe(e,t){return function(n){return null!=n?($e(this,e,n),i.updateOffset(this,t),this):Ze(this,e)}}function Ze(e,t){if(!e.isValid())return NaN;var n=e._d,r=e._isUTC;switch(t){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function $e(e,t,n){var r,i,o,s,a;if(e.isValid()&&!isNaN(n)){switch(r=e._d,i=e._isUTC,t){case"Milliseconds":return void(i?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(i?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(i?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(i?r.setUTCHours(n):r.setHours(n));case"Date":return void(i?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}o=n,s=e.month(),a=29!==(a=e.date())||1!==s||je(o)?a:28,i?r.setUTCFullYear(o,s,a):r.setFullYear(o,s,a)}}function et(e){return O(this[e=re(e)])?this[e]():this}function tt(e,t){if("object"===typeof e){var n,r=se(e=ie(e)),i=r.length;for(n=0;n<i;n++)this[r[n].unit](e[r[n].unit])}else if(O(this[e=re(e)]))return this[e](t);return this}function nt(e,t){return(e%t+t)%t}function rt(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=nt(t,12);return e+=(t-n)/12,1===n?je(e)?29:28:31-n%7%2}Ke=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},V("M",["MM",2],"Mo",(function(){return this.month()+1})),V("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),V("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),we("M",pe,Ne),we("MM",pe,le),we("MMM",(function(e,t){return t.monthsShortRegex(e)})),we("MMMM",(function(e,t){return t.monthsRegex(e)})),xe(["M","MM"],(function(e,t){t[Fe]=De(e)-1})),xe(["MMM","MMMM"],(function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[Fe]=i:y(n).invalidMonth=e}));var it="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ot="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),st=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,at=Ie,ct=Ie;function lt(e,t){return e?s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||st).test(t)?"format":"standalone"][e.month()]:s(this._months)?this._months:this._months.standalone}function dt(e,t){return e?s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[st.test(t)?"format":"standalone"][e.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ut(e,t,n){var r,i,o,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=m([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=Ke.call(this._shortMonthsParse,s))?i:null:-1!==(i=Ke.call(this._longMonthsParse,s))?i:null:"MMM"===t?-1!==(i=Ke.call(this._shortMonthsParse,s))||-1!==(i=Ke.call(this._longMonthsParse,s))?i:null:-1!==(i=Ke.call(this._longMonthsParse,s))||-1!==(i=Ke.call(this._shortMonthsParse,s))?i:null}function ht(e,t,n){var r,i,o;if(this._monthsParseExact)return ut.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=m([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function pt(e,t){if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=De(t);else if(!u(t=e.localeData().monthsParse(t)))return e;var n=t,r=e.date();return r=r<29?r:Math.min(r,rt(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,r):e._d.setMonth(n,r),e}function ft(e){return null!=e?(pt(this,e),i.updateOffset(this,!0),this):Ze(this,"Month")}function mt(){return rt(this.year(),this.month())}function gt(e){return this._monthsParseExact?(c(this,"_monthsRegex")||vt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=at),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function yt(e){return this._monthsParseExact?(c(this,"_monthsRegex")||vt.call(this),e?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=ct),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function vt(){function e(e,t){return t.length-e.length}var t,n,r,i,o=[],s=[],a=[];for(t=0;t<12;t++)n=m([2e3,t]),r=Oe(this.monthsShort(n,"")),i=Oe(this.months(n,"")),o.push(r),s.push(i),a.push(i),a.push(r);o.sort(e),s.sort(e),a.sort(e),this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+o.join("|")+")","i")}function _t(e,t,n,r,i,o,s){var a;return e<100&&e>=0?(a=new Date(e+400,t,n,r,i,o,s),isFinite(a.getFullYear())&&a.setFullYear(e)):a=new Date(e,t,n,r,i,o,s),a}function Et(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function St(e,t,n){var r=7+t-n;return-(7+Et(e,0,r).getUTCDay()-t)%7+r-1}function Tt(e,t,n,r,i){var o,s,a=1+7*(t-1)+(7+n-r)%7+St(e,r,i);return a<=0?s=qe(o=e-1)+a:a>qe(e)?(o=e+1,s=a-qe(e)):(o=e,s=a),{year:o,dayOfYear:s}}function bt(e,t,n){var r,i,o=St(e.year(),t,n),s=Math.floor((e.dayOfYear()-o-1)/7)+1;return s<1?r=s+It(i=e.year()-1,t,n):s>It(e.year(),t,n)?(r=s-It(e.year(),t,n),i=e.year()+1):(i=e.year(),r=s),{week:r,year:i}}function It(e,t,n){var r=St(e,t,n),i=St(e+1,t,n);return(qe(e)-r+i)/7}function Nt(e){return bt(e,this._week.dow,this._week.doy).week}V("w",["ww",2],"wo","week"),V("W",["WW",2],"Wo","isoWeek"),we("w",pe,Ne),we("ww",pe,le),we("W",pe,Ne),we("WW",pe,le),Le(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=De(e)}));var Ct={dow:0,doy:6};function wt(){return this._week.dow}function Rt(){return this._week.doy}function At(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Ot(e){var t=bt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Mt(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Dt(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function kt(e,t){return e.slice(t,7).concat(e.slice(0,t))}V("d",0,"do","day"),V("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),V("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),V("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),V("e",0,0,"weekday"),V("E",0,0,"isoWeekday"),we("d",pe),we("e",pe),we("E",pe),we("dd",(function(e,t){return t.weekdaysMinRegex(e)})),we("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),we("dddd",(function(e,t){return t.weekdaysRegex(e)})),Le(["dd","ddd","dddd"],(function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:y(n).invalidWeekday=e})),Le(["d","e","E"],(function(e,t,n,r){t[r]=De(e)}));var xt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Lt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Pt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),jt=Ie,Ut=Ie,Ft=Ie;function zt(e,t){var n=s(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?kt(n,this._week.dow):e?n[e.day()]:n}function Vt(e){return!0===e?kt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Bt(e){return!0===e?kt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Gt(e,t,n){var r,i,o,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=m([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=Ke.call(this._weekdaysParse,s))?i:null:"ddd"===t?-1!==(i=Ke.call(this._shortWeekdaysParse,s))?i:null:-1!==(i=Ke.call(this._minWeekdaysParse,s))?i:null:"dddd"===t?-1!==(i=Ke.call(this._weekdaysParse,s))||-1!==(i=Ke.call(this._shortWeekdaysParse,s))||-1!==(i=Ke.call(this._minWeekdaysParse,s))?i:null:"ddd"===t?-1!==(i=Ke.call(this._shortWeekdaysParse,s))||-1!==(i=Ke.call(this._weekdaysParse,s))||-1!==(i=Ke.call(this._minWeekdaysParse,s))?i:null:-1!==(i=Ke.call(this._minWeekdaysParse,s))||-1!==(i=Ke.call(this._weekdaysParse,s))||-1!==(i=Ke.call(this._shortWeekdaysParse,s))?i:null}function Ht(e,t,n){var r,i,o;if(this._weekdaysParseExact)return Gt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=m([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Wt(e){if(!this.isValid())return null!=e?this:NaN;var t=Ze(this,"Day");return null!=e?(e=Mt(e,this.localeData()),this.add(e-t,"d")):t}function Yt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function qt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Dt(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Kt(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Xt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=jt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Qt(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Xt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ut),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Jt(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Xt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ft),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Xt(){function e(e,t){return t.length-e.length}var t,n,r,i,o,s=[],a=[],c=[],l=[];for(t=0;t<7;t++)n=m([2e3,1]).day(t),r=Oe(this.weekdaysMin(n,"")),i=Oe(this.weekdaysShort(n,"")),o=Oe(this.weekdays(n,"")),s.push(r),a.push(i),c.push(o),l.push(r),l.push(i),l.push(o);s.sort(e),a.sort(e),c.sort(e),l.sort(e),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Zt(){return this.hours()%12||12}function $t(){return this.hours()||24}function en(e,t){V(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function tn(e,t){return t._meridiemParse}function nn(e){return"p"===(e+"").toLowerCase().charAt(0)}V("H",["HH",2],0,"hour"),V("h",["hh",2],0,Zt),V("k",["kk",2],0,$t),V("hmm",0,0,(function(){return""+Zt.apply(this)+P(this.minutes(),2)})),V("hmmss",0,0,(function(){return""+Zt.apply(this)+P(this.minutes(),2)+P(this.seconds(),2)})),V("Hmm",0,0,(function(){return""+this.hours()+P(this.minutes(),2)})),V("Hmmss",0,0,(function(){return""+this.hours()+P(this.minutes(),2)+P(this.seconds(),2)})),en("a",!0),en("A",!1),we("a",tn),we("A",tn),we("H",pe,Ce),we("h",pe,Ne),we("k",pe,Ne),we("HH",pe,le),we("hh",pe,le),we("kk",pe,le),we("hmm",fe),we("hmmss",me),we("Hmm",fe),we("Hmmss",me),xe(["H","HH"],Ve),xe(["k","kk"],(function(e,t,n){var r=De(e);t[Ve]=24===r?0:r})),xe(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),xe(["h","hh"],(function(e,t,n){t[Ve]=De(e),y(n).bigHour=!0})),xe("hmm",(function(e,t,n){var r=e.length-2;t[Ve]=De(e.substr(0,r)),t[Be]=De(e.substr(r)),y(n).bigHour=!0})),xe("hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Ve]=De(e.substr(0,r)),t[Be]=De(e.substr(r,2)),t[Ge]=De(e.substr(i)),y(n).bigHour=!0})),xe("Hmm",(function(e,t,n){var r=e.length-2;t[Ve]=De(e.substr(0,r)),t[Be]=De(e.substr(r))})),xe("Hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Ve]=De(e.substr(0,r)),t[Be]=De(e.substr(r,2)),t[Ge]=De(e.substr(i))}));var rn=/[ap]\.?m?\.?/i,on=Xe("Hours",!0);function sn(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var an,cn={calendar:x,longDateFormat:Y,invalidDate:K,ordinal:J,dayOfMonthOrdinalParse:X,relativeTime:$,months:it,monthsShort:ot,week:Ct,weekdays:xt,weekdaysMin:Pt,weekdaysShort:Lt,meridiemParse:rn},ln={},dn={};function un(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function hn(e){return e?e.toLowerCase().replace("_","-"):e}function pn(e){for(var t,n,r,i,o=0;o<e.length;){for(t=(i=hn(e[o]).split("-")).length,n=(n=hn(e[o+1]))?n.split("-"):null;t>0;){if(r=mn(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&un(i,n)>=t-1)break;t--}o++}return an}function fn(e){return!(!e||!e.match("^[^/\\\\]*$"))}function mn(n){var r=null;if(void 0===ln[n]&&t&&t.exports&&fn(n))try{r=an._abbr,Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()),gn(r)}catch(e){ln[n]=null}return ln[n]}function gn(e,t){var n;return e&&((n=d(t)?_n(e):yn(e,t))?an=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),an._abbr}function yn(e,t){if(null!==t){var n,r=cn;if(t.abbr=e,null!=ln[e])A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=ln[e]._config;else if(null!=t.parentLocale)if(null!=ln[t.parentLocale])r=ln[t.parentLocale]._config;else{if(null==(n=mn(t.parentLocale)))return dn[t.parentLocale]||(dn[t.parentLocale]=[]),dn[t.parentLocale].push({name:e,config:t}),null;r=n._config}return ln[e]=new k(D(r,t)),dn[e]&&dn[e].forEach((function(e){yn(e.name,e.config)})),gn(e),ln[e]}return delete ln[e],null}function vn(e,t){if(null!=t){var n,r,i=cn;null!=ln[e]&&null!=ln[e].parentLocale?ln[e].set(D(ln[e]._config,t)):(null!=(r=mn(e))&&(i=r._config),t=D(i,t),null==r&&(t.abbr=e),(n=new k(t)).parentLocale=ln[e],ln[e]=n),gn(e)}else null!=ln[e]&&(null!=ln[e].parentLocale?(ln[e]=ln[e].parentLocale,e===gn()&&gn(e)):null!=ln[e]&&delete ln[e]);return ln[e]}function _n(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return an;if(!s(e)){if(t=mn(e))return t;e=[e]}return pn(e)}function En(){return w(ln)}function Sn(e){var t,n=e._a;return n&&-2===y(e).overflow&&(t=n[Fe]<0||n[Fe]>11?Fe:n[ze]<1||n[ze]>rt(n[Ue],n[Fe])?ze:n[Ve]<0||n[Ve]>24||24===n[Ve]&&(0!==n[Be]||0!==n[Ge]||0!==n[He])?Ve:n[Be]<0||n[Be]>59?Be:n[Ge]<0||n[Ge]>59?Ge:n[He]<0||n[He]>999?He:-1,y(e)._overflowDayOfYear&&(t<Ue||t>ze)&&(t=ze),y(e)._overflowWeeks&&-1===t&&(t=We),y(e)._overflowWeekday&&-1===t&&(t=Ye),y(e).overflow=t),e}var Tn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,In=/Z|[+-]\d\d(?::?\d\d)?/,Nn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Cn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],wn=/^\/?Date\((-?\d+)/i,Rn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,An={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function On(e){var t,n,r,i,o,s,a=e._i,c=Tn.exec(a)||bn.exec(a),l=Nn.length,d=Cn.length;if(c){for(y(e).iso=!0,t=0,n=l;t<n;t++)if(Nn[t][1].exec(c[1])){i=Nn[t][0],r=!1!==Nn[t][2];break}if(null==i)return void(e._isValid=!1);if(c[3]){for(t=0,n=d;t<n;t++)if(Cn[t][1].exec(c[3])){o=(c[2]||" ")+Cn[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(c[4]){if(!In.exec(c[4]))return void(e._isValid=!1);s="Z"}e._f=i+(o||"")+(s||""),Bn(e)}else e._isValid=!1}function Mn(e,t,n,r,i,o){var s=[Dn(e),ot.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return o&&s.push(parseInt(o,10)),s}function Dn(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function kn(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function xn(e,t,n){return!e||Lt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(y(n).weekdayMismatch=!0,n._isValid=!1,!1)}function Ln(e,t,n){if(e)return An[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}function Pn(e){var t,n=Rn.exec(kn(e._i));if(n){if(t=Mn(n[4],n[3],n[2],n[5],n[6],n[7]),!xn(n[1],t,e))return;e._a=t,e._tzm=Ln(n[8],n[9],n[10]),e._d=Et.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),y(e).rfc2822=!0}else e._isValid=!1}function jn(e){var t=wn.exec(e._i);null===t?(On(e),!1===e._isValid&&(delete e._isValid,Pn(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:i.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Un(e,t,n){return null!=e?e:null!=t?t:n}function Fn(e){var t=new Date(i.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function zn(e){var t,n,r,i,o,s=[];if(!e._d){for(r=Fn(e),e._w&&null==e._a[ze]&&null==e._a[Fe]&&Vn(e),null!=e._dayOfYear&&(o=Un(e._a[Ue],r[Ue]),(e._dayOfYear>qe(o)||0===e._dayOfYear)&&(y(e)._overflowDayOfYear=!0),n=Et(o,0,e._dayOfYear),e._a[Fe]=n.getUTCMonth(),e._a[ze]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=r[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Ve]&&0===e._a[Be]&&0===e._a[Ge]&&0===e._a[He]&&(e._nextDay=!0,e._a[Ve]=0),e._d=(e._useUTC?Et:_t).apply(null,s),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ve]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==i&&(y(e).weekdayMismatch=!0)}}function Vn(e){var t,n,r,i,o,s,a,c,l;null!=(t=e._w).GG||null!=t.W||null!=t.E?(o=1,s=4,n=Un(t.GG,e._a[Ue],bt(Jn(),1,4).year),r=Un(t.W,1),((i=Un(t.E,1))<1||i>7)&&(c=!0)):(o=e._locale._week.dow,s=e._locale._week.doy,l=bt(Jn(),o,s),n=Un(t.gg,e._a[Ue],l.year),r=Un(t.w,l.week),null!=t.d?((i=t.d)<0||i>6)&&(c=!0):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(c=!0)):i=o),r<1||r>It(n,o,s)?y(e)._overflowWeeks=!0:null!=c?y(e)._overflowWeekday=!0:(a=Tt(n,r,i,o,s),e._a[Ue]=a.year,e._dayOfYear=a.dayOfYear)}function Bn(e){if(e._f!==i.ISO_8601)if(e._f!==i.RFC_2822){e._a=[],y(e).empty=!0;var t,n,r,o,s,a,c,l=""+e._i,d=l.length,u=0;for(c=(r=W(e._f,e._locale).match(j)||[]).length,t=0;t<c;t++)o=r[t],(n=(l.match(Re(o,e))||[])[0])&&((s=l.substr(0,l.indexOf(n))).length>0&&y(e).unusedInput.push(s),l=l.slice(l.indexOf(n)+n.length),u+=n.length),z[o]?(n?y(e).empty=!1:y(e).unusedTokens.push(o),Pe(o,n,e)):e._strict&&!n&&y(e).unusedTokens.push(o);y(e).charsLeftOver=d-u,l.length>0&&y(e).unusedInput.push(l),e._a[Ve]<=12&&!0===y(e).bigHour&&e._a[Ve]>0&&(y(e).bigHour=void 0),y(e).parsedDateParts=e._a.slice(0),y(e).meridiem=e._meridiem,e._a[Ve]=Gn(e._locale,e._a[Ve],e._meridiem),null!==(a=y(e).era)&&(e._a[Ue]=e._locale.erasConvertYear(a,e._a[Ue])),zn(e),Sn(e)}else Pn(e);else On(e)}function Gn(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function Hn(e){var t,n,r,i,o,s,a=!1,c=e._f.length;if(0===c)return y(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<c;i++)o=0,s=!1,t=T({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Bn(t),v(t)&&(s=!0),o+=y(t).charsLeftOver,o+=10*y(t).unusedTokens.length,y(t).score=o,a?o<r&&(r=o,n=t):(null==r||o<r||s)&&(r=o,n=t,s&&(a=!0));f(e,n||t)}function Wn(e){if(!e._d){var t=ie(e._i),n=void 0===t.day?t.date:t.day;e._a=p([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),zn(e)}}function Yn(e){var t=new b(Sn(qn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function qn(e){var t=e._i,n=e._f;return e._locale=e._locale||_n(e._l),null===t||void 0===n&&""===t?_({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),I(t)?new b(Sn(t)):(h(t)?e._d=t:s(n)?Hn(e):n?Bn(e):Kn(e),v(e)||(e._d=null),e))}function Kn(e){var t=e._i;d(t)?e._d=new Date(i.now()):h(t)?e._d=new Date(t.valueOf()):"string"===typeof t?jn(e):s(t)?(e._a=p(t.slice(0),(function(e){return parseInt(e,10)})),zn(e)):a(t)?Wn(e):u(t)?e._d=new Date(t):i.createFromInputFallback(e)}function Qn(e,t,n,r,i){var o={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(a(e)&&l(e)||s(e)&&0===e.length)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=n,o._i=e,o._f=t,o._strict=r,Yn(o)}function Jn(e,t,n,r){return Qn(e,t,n,r,!1)}i.createFromInputFallback=C("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),i.ISO_8601=function(){},i.RFC_2822=function(){};var Xn=C("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Jn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:_()})),Zn=C("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Jn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:_()}));function $n(e,t){var n,r;if(1===t.length&&s(t[0])&&(t=t[0]),!t.length)return Jn();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function er(){return $n("isBefore",[].slice.call(arguments,0))}function tr(){return $n("isAfter",[].slice.call(arguments,0))}var nr=function(){return Date.now?Date.now():+new Date},rr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ir(e){var t,n,r=!1,i=rr.length;for(t in e)if(c(e,t)&&(-1===Ke.call(rr,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<i;++n)if(e[rr[n]]){if(r)return!1;parseFloat(e[rr[n]])!==De(e[rr[n]])&&(r=!0)}return!0}function or(){return this._isValid}function sr(){return Ar(NaN)}function ar(e){var t=ie(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||t.isoWeek||0,s=t.day||0,a=t.hour||0,c=t.minute||0,l=t.second||0,d=t.millisecond||0;this._isValid=ir(t),this._milliseconds=+d+1e3*l+6e4*c+1e3*a*60*60,this._days=+s+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=_n(),this._bubble()}function cr(e){return e instanceof ar}function lr(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function dr(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),s=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&De(e[r])!==De(t[r]))&&s++;return s+o}function ur(e,t){V(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+P(~~(e/60),2)+t+P(~~e%60,2)}))}ur("Z",":"),ur("ZZ",""),we("Z",Te),we("ZZ",Te),xe(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=pr(Te,e)}));var hr=/([\+\-]|\d\d)/gi;function pr(e,t){var n,r,i=(t||"").match(e);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(hr)||["-",0,0])[1]+De(n[2]))?0:"+"===n[0]?r:-r}function fr(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(I(e)||h(e)?e.valueOf():Jn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),i.updateOffset(n,!1),n):Jn(e).local()}function mr(e){return-Math.round(e._d.getTimezoneOffset())}function gr(e,t,n){var r,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=pr(Te,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(r=mr(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),o!==e&&(!t||this._changeInProgress?xr(this,Ar(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:mr(this)}function yr(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function vr(e){return this.utcOffset(0,e)}function _r(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(mr(this),"m")),this}function Er(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=pr(Se,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Sr(e){return!!this.isValid()&&(e=e?Jn(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function Tr(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function br(){if(!d(this._isDSTShifted))return this._isDSTShifted;var e,t={};return T(t,this),(t=qn(t))._a?(e=t._isUTC?m(t._a):Jn(t._a),this._isDSTShifted=this.isValid()&&dr(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Ir(){return!!this.isValid()&&!this._isUTC}function Nr(){return!!this.isValid()&&this._isUTC}function Cr(){return!!this.isValid()&&this._isUTC&&0===this._offset}i.updateOffset=function(){};var wr=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Rr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ar(e,t){var n,r,i,o=e,s=null;return cr(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(o={},t?o[t]=+e:o.milliseconds=+e):(s=wr.exec(e))?(n="-"===s[1]?-1:1,o={y:0,d:De(s[ze])*n,h:De(s[Ve])*n,m:De(s[Be])*n,s:De(s[Ge])*n,ms:De(lr(1e3*s[He]))*n}):(s=Rr.exec(e))?(n="-"===s[1]?-1:1,o={y:Or(s[2],n),M:Or(s[3],n),w:Or(s[4],n),d:Or(s[5],n),h:Or(s[6],n),m:Or(s[7],n),s:Or(s[8],n)}):null==o?o={}:"object"===typeof o&&("from"in o||"to"in o)&&(i=Dr(Jn(o.from),Jn(o.to)),(o={}).ms=i.milliseconds,o.M=i.months),r=new ar(o),cr(e)&&c(e,"_locale")&&(r._locale=e._locale),cr(e)&&c(e,"_isValid")&&(r._isValid=e._isValid),r}function Or(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Mr(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Dr(e,t){var n;return e.isValid()&&t.isValid()?(t=fr(t,e),e.isBefore(t)?n=Mr(e,t):((n=Mr(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function kr(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(A(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),xr(this,Ar(n,r),e),this}}function xr(e,t,n,r){var o=t._milliseconds,s=lr(t._days),a=lr(t._months);e.isValid()&&(r=null==r||r,a&&pt(e,Ze(e,"Month")+a*n),s&&$e(e,"Date",Ze(e,"Date")+s*n),o&&e._d.setTime(e._d.valueOf()+o*n),r&&i.updateOffset(e,s||a))}Ar.fn=ar.prototype,Ar.invalid=sr;var Lr=kr(1,"add"),Pr=kr(-1,"subtract");function jr(e){return"string"===typeof e||e instanceof String}function Ur(e){return I(e)||h(e)||jr(e)||u(e)||zr(e)||Fr(e)||null===e||void 0===e}function Fr(e){var t,n,r=a(e)&&!l(e),i=!1,o=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s=o.length;for(t=0;t<s;t+=1)n=o[t],i=i||c(e,n);return r&&i}function zr(e){var t=s(e),n=!1;return t&&(n=0===e.filter((function(t){return!u(t)&&jr(e)})).length),t&&n}function Vr(e){var t,n,r=a(e)&&!l(e),i=!1,o=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<o.length;t+=1)n=o[t],i=i||c(e,n);return r&&i}function Br(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Gr(e,t){1===arguments.length&&(arguments[0]?Ur(arguments[0])?(e=arguments[0],t=void 0):Vr(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Jn(),r=fr(n,this).startOf("day"),o=i.calendarFormat(this,r)||"sameElse",s=t&&(O(t[o])?t[o].call(this,n):t[o]);return this.format(s||this.localeData().calendar(o,this,Jn(n)))}function Hr(){return new b(this)}function Wr(e,t){var n=I(e)?e:Jn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Yr(e,t){var n=I(e)?e:Jn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function qr(e,t,n,r){var i=I(e)?e:Jn(e),o=I(t)?t:Jn(t);return!!(this.isValid()&&i.isValid()&&o.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n))}function Kr(e,t){var n,r=I(e)?e:Jn(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Qr(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Jr(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Xr(e,t,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=fr(e,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=re(t)){case"year":o=Zr(this,r)/12;break;case"month":o=Zr(this,r);break;case"quarter":o=Zr(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:Me(o)}function Zr(e,t){if(e.date()<t.date())return-Zr(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function $r(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ei(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?H(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):O(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",H(n,"Z")):H(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ti(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r,i="moment",o="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",o="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=o+'[")]',this.format(e+t+n+r)}function ni(e){e||(e=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var t=H(this,e);return this.localeData().postformat(t)}function ri(e,t){return this.isValid()&&(I(e)&&e.isValid()||Jn(e).isValid())?Ar({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ii(e){return this.from(Jn(),e)}function oi(e,t){return this.isValid()&&(I(e)&&e.isValid()||Jn(e).isValid())?Ar({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function si(e){return this.to(Jn(),e)}function ai(e){var t;return void 0===e?this._locale._abbr:(null!=(t=_n(e))&&(this._locale=t),this)}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ci=C("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function li(){return this._locale}var di=1e3,ui=60*di,hi=60*ui,pi=3506328*hi;function fi(e,t){return(e%t+t)%t}function mi(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-pi:new Date(e,t,n).valueOf()}function gi(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-pi:Date.UTC(e,t,n)}function yi(e){var t,n;if(void 0===(e=re(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?gi:mi,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=fi(t+(this._isUTC?0:this.utcOffset()*ui),hi);break;case"minute":t=this._d.valueOf(),t-=fi(t,ui);break;case"second":t=this._d.valueOf(),t-=fi(t,di)}return this._d.setTime(t),i.updateOffset(this,!0),this}function vi(e){var t,n;if(void 0===(e=re(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?gi:mi,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=hi-fi(t+(this._isUTC?0:this.utcOffset()*ui),hi)-1;break;case"minute":t=this._d.valueOf(),t+=ui-fi(t,ui)-1;break;case"second":t=this._d.valueOf(),t+=di-fi(t,di)-1}return this._d.setTime(t),i.updateOffset(this,!0),this}function _i(){return this._d.valueOf()-6e4*(this._offset||0)}function Ei(){return Math.floor(this.valueOf()/1e3)}function Si(){return new Date(this.valueOf())}function Ti(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function bi(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Ii(){return this.isValid()?this.toISOString():null}function Ni(){return v(this)}function Ci(){return f({},y(this))}function wi(){return y(this).overflow}function Ri(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ai(e,t){var n,r,o,s=this._eras||_n("en")._eras;for(n=0,r=s.length;n<r;++n)switch("string"===typeof s[n].since&&(o=i(s[n].since).startOf("day"),s[n].since=o.valueOf()),typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":o=i(s[n].until).startOf("day").valueOf(),s[n].until=o.valueOf()}return s}function Oi(e,t,n){var r,i,o,s,a,c=this.eras();for(e=e.toUpperCase(),r=0,i=c.length;r<i;++r)if(o=c[r].name.toUpperCase(),s=c[r].abbr.toUpperCase(),a=c[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(s===e)return c[r];break;case"NNNN":if(o===e)return c[r];break;case"NNNNN":if(a===e)return c[r]}else if([o,s,a].indexOf(e)>=0)return c[r]}function Mi(e,t){var n=e.since<=e.until?1:-1;return void 0===t?i(e.since).year():i(e.since).year()+(t-e.offset)*n}function Di(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""}function ki(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""}function xi(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""}function Li(){var e,t,n,r,o=this.localeData().eras();for(e=0,t=o.length;e<t;++e)if(n=o[e].since<=o[e].until?1:-1,r=this.clone().startOf("day").valueOf(),o[e].since<=r&&r<=o[e].until||o[e].until<=r&&r<=o[e].since)return(this.year()-i(o[e].since).year())*n+o[e].offset;return this.year()}function Pi(e){return c(this,"_erasNameRegex")||Gi.call(this),e?this._erasNameRegex:this._erasRegex}function ji(e){return c(this,"_erasAbbrRegex")||Gi.call(this),e?this._erasAbbrRegex:this._erasRegex}function Ui(e){return c(this,"_erasNarrowRegex")||Gi.call(this),e?this._erasNarrowRegex:this._erasRegex}function Fi(e,t){return t.erasAbbrRegex(e)}function zi(e,t){return t.erasNameRegex(e)}function Vi(e,t){return t.erasNarrowRegex(e)}function Bi(e,t){return t._eraYearOrdinalRegex||_e}function Gi(){var e,t,n,r,i,o=[],s=[],a=[],c=[],l=this.eras();for(e=0,t=l.length;e<t;++e)n=Oe(l[e].name),r=Oe(l[e].abbr),i=Oe(l[e].narrow),s.push(n),o.push(r),a.push(i),c.push(n),c.push(r),c.push(i);this._erasRegex=new RegExp("^("+c.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+s.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}function Hi(e,t){V(0,[e,e.length],0,t)}function Wi(e){return Xi.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Yi(e){return Xi.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function qi(){return It(this.year(),1,4)}function Ki(){return It(this.isoWeekYear(),1,4)}function Qi(){var e=this.localeData()._week;return It(this.year(),e.dow,e.doy)}function Ji(){var e=this.localeData()._week;return It(this.weekYear(),e.dow,e.doy)}function Xi(e,t,n,r,i){var o;return null==e?bt(this,r,i).year:(t>(o=It(e,r,i))&&(t=o),Zi.call(this,e,t,n,r,i))}function Zi(e,t,n,r,i){var o=Tt(e,t,n,r,i),s=Et(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function $i(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}V("N",0,0,"eraAbbr"),V("NN",0,0,"eraAbbr"),V("NNN",0,0,"eraAbbr"),V("NNNN",0,0,"eraName"),V("NNNNN",0,0,"eraNarrow"),V("y",["y",1],"yo","eraYear"),V("y",["yy",2],0,"eraYear"),V("y",["yyy",3],0,"eraYear"),V("y",["yyyy",4],0,"eraYear"),we("N",Fi),we("NN",Fi),we("NNN",Fi),we("NNNN",zi),we("NNNNN",Vi),xe(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var i=n._locale.erasParse(e,r,n._strict);i?y(n).era=i:y(n).invalidEra=e})),we("y",_e),we("yy",_e),we("yyy",_e),we("yyyy",_e),we("yo",Bi),xe(["y","yy","yyy","yyyy"],Ue),xe(["yo"],(function(e,t,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Ue]=n._locale.eraYearOrdinalParse(e,i):t[Ue]=parseInt(e,10)})),V(0,["gg",2],0,(function(){return this.weekYear()%100})),V(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Hi("gggg","weekYear"),Hi("ggggg","weekYear"),Hi("GGGG","isoWeekYear"),Hi("GGGGG","isoWeekYear"),we("G",Ee),we("g",Ee),we("GG",pe,le),we("gg",pe,le),we("GGGG",ye,ue),we("gggg",ye,ue),we("GGGGG",ve,he),we("ggggg",ve,he),Le(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=De(e)})),Le(["gg","GG"],(function(e,t,n,r){t[r]=i.parseTwoDigitYear(e)})),V("Q",0,"Qo","quarter"),we("Q",ce),xe("Q",(function(e,t){t[Fe]=3*(De(e)-1)})),V("D",["DD",2],"Do","date"),we("D",pe,Ne),we("DD",pe,le),we("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),xe(["D","DD"],ze),xe("Do",(function(e,t){t[ze]=De(e.match(pe)[0])}));var eo=Xe("Date",!0);function to(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}V("DDD",["DDDD",3],"DDDo","dayOfYear"),we("DDD",ge),we("DDDD",de),xe(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=De(e)})),V("m",["mm",2],0,"minute"),we("m",pe,Ce),we("mm",pe,le),xe(["m","mm"],Be);var no=Xe("Minutes",!1);V("s",["ss",2],0,"second"),we("s",pe,Ce),we("ss",pe,le),xe(["s","ss"],Ge);var ro,io,oo=Xe("Seconds",!1);for(V("S",0,0,(function(){return~~(this.millisecond()/100)})),V(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),V(0,["SSS",3],0,"millisecond"),V(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),V(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),V(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),V(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),V(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),V(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),we("S",ge,ce),we("SS",ge,le),we("SSS",ge,de),ro="SSSS";ro.length<=9;ro+="S")we(ro,_e);function so(e,t){t[He]=De(1e3*("0."+e))}for(ro="S";ro.length<=9;ro+="S")xe(ro,so);function ao(){return this._isUTC?"UTC":""}function co(){return this._isUTC?"Coordinated Universal Time":""}io=Xe("Milliseconds",!1),V("z",0,0,"zoneAbbr"),V("zz",0,0,"zoneName");var lo=b.prototype;function uo(e){return Jn(1e3*e)}function ho(){return Jn.apply(null,arguments).parseZone()}function po(e){return e}lo.add=Lr,lo.calendar=Gr,lo.clone=Hr,lo.diff=Xr,lo.endOf=vi,lo.format=ni,lo.from=ri,lo.fromNow=ii,lo.to=oi,lo.toNow=si,lo.get=et,lo.invalidAt=wi,lo.isAfter=Wr,lo.isBefore=Yr,lo.isBetween=qr,lo.isSame=Kr,lo.isSameOrAfter=Qr,lo.isSameOrBefore=Jr,lo.isValid=Ni,lo.lang=ci,lo.locale=ai,lo.localeData=li,lo.max=Zn,lo.min=Xn,lo.parsingFlags=Ci,lo.set=tt,lo.startOf=yi,lo.subtract=Pr,lo.toArray=Ti,lo.toObject=bi,lo.toDate=Si,lo.toISOString=ei,lo.inspect=ti,"undefined"!==typeof Symbol&&null!=Symbol.for&&(lo[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),lo.toJSON=Ii,lo.toString=$r,lo.unix=Ei,lo.valueOf=_i,lo.creationData=Ri,lo.eraName=Di,lo.eraNarrow=ki,lo.eraAbbr=xi,lo.eraYear=Li,lo.year=Qe,lo.isLeapYear=Je,lo.weekYear=Wi,lo.isoWeekYear=Yi,lo.quarter=lo.quarters=$i,lo.month=ft,lo.daysInMonth=mt,lo.week=lo.weeks=At,lo.isoWeek=lo.isoWeeks=Ot,lo.weeksInYear=Qi,lo.weeksInWeekYear=Ji,lo.isoWeeksInYear=qi,lo.isoWeeksInISOWeekYear=Ki,lo.date=eo,lo.day=lo.days=Wt,lo.weekday=Yt,lo.isoWeekday=qt,lo.dayOfYear=to,lo.hour=lo.hours=on,lo.minute=lo.minutes=no,lo.second=lo.seconds=oo,lo.millisecond=lo.milliseconds=io,lo.utcOffset=gr,lo.utc=vr,lo.local=_r,lo.parseZone=Er,lo.hasAlignedHourOffset=Sr,lo.isDST=Tr,lo.isLocal=Ir,lo.isUtcOffset=Nr,lo.isUtc=Cr,lo.isUTC=Cr,lo.zoneAbbr=ao,lo.zoneName=co,lo.dates=C("dates accessor is deprecated. Use date instead.",eo),lo.months=C("months accessor is deprecated. Use month instead",ft),lo.years=C("years accessor is deprecated. Use year instead",Qe),lo.zone=C("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",yr),lo.isDSTShifted=C("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",br);var fo=k.prototype;function mo(e,t,n,r){var i=_n(),o=m().set(r,t);return i[n](o,e)}function go(e,t,n){if(u(e)&&(t=e,e=void 0),e=e||"",null!=t)return mo(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=mo(e,r,n,"month");return i}function yo(e,t,n,r){"boolean"===typeof e?(u(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,u(t)&&(n=t,t=void 0),t=t||"");var i,o=_n(),s=e?o._week.dow:0,a=[];if(null!=n)return mo(t,(n+s)%7,r,"day");for(i=0;i<7;i++)a[i]=mo(t,(i+s)%7,r,"day");return a}function vo(e,t){return go(e,t,"months")}function _o(e,t){return go(e,t,"monthsShort")}function Eo(e,t,n){return yo(e,t,n,"weekdays")}function So(e,t,n){return yo(e,t,n,"weekdaysShort")}function To(e,t,n){return yo(e,t,n,"weekdaysMin")}fo.calendar=L,fo.longDateFormat=q,fo.invalidDate=Q,fo.ordinal=Z,fo.preparse=po,fo.postformat=po,fo.relativeTime=ee,fo.pastFuture=te,fo.set=M,fo.eras=Ai,fo.erasParse=Oi,fo.erasConvertYear=Mi,fo.erasAbbrRegex=ji,fo.erasNameRegex=Pi,fo.erasNarrowRegex=Ui,fo.months=lt,fo.monthsShort=dt,fo.monthsParse=ht,fo.monthsRegex=yt,fo.monthsShortRegex=gt,fo.week=Nt,fo.firstDayOfYear=Rt,fo.firstDayOfWeek=wt,fo.weekdays=zt,fo.weekdaysMin=Bt,fo.weekdaysShort=Vt,fo.weekdaysParse=Ht,fo.weekdaysRegex=Kt,fo.weekdaysShortRegex=Qt,fo.weekdaysMinRegex=Jt,fo.isPM=nn,fo.meridiem=sn,gn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===De(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),i.lang=C("moment.lang is deprecated. Use moment.locale instead.",gn),i.langData=C("moment.langData is deprecated. Use moment.localeData instead.",_n);var bo=Math.abs;function Io(){var e=this._data;return this._milliseconds=bo(this._milliseconds),this._days=bo(this._days),this._months=bo(this._months),e.milliseconds=bo(e.milliseconds),e.seconds=bo(e.seconds),e.minutes=bo(e.minutes),e.hours=bo(e.hours),e.months=bo(e.months),e.years=bo(e.years),this}function No(e,t,n,r){var i=Ar(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Co(e,t){return No(this,e,t,1)}function wo(e,t){return No(this,e,t,-1)}function Ro(e){return e<0?Math.floor(e):Math.ceil(e)}function Ao(){var e,t,n,r,i,o=this._milliseconds,s=this._days,a=this._months,c=this._data;return o>=0&&s>=0&&a>=0||o<=0&&s<=0&&a<=0||(o+=864e5*Ro(Mo(a)+s),s=0,a=0),c.milliseconds=o%1e3,e=Me(o/1e3),c.seconds=e%60,t=Me(e/60),c.minutes=t%60,n=Me(t/60),c.hours=n%24,s+=Me(n/24),a+=i=Me(Oo(s)),s-=Ro(Mo(i)),r=Me(a/12),a%=12,c.days=s,c.months=a,c.years=r,this}function Oo(e){return 4800*e/146097}function Mo(e){return 146097*e/4800}function Do(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=re(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+Oo(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Mo(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function ko(e){return function(){return this.as(e)}}var xo=ko("ms"),Lo=ko("s"),Po=ko("m"),jo=ko("h"),Uo=ko("d"),Fo=ko("w"),zo=ko("M"),Vo=ko("Q"),Bo=ko("y"),Go=xo;function Ho(){return Ar(this)}function Wo(e){return e=re(e),this.isValid()?this[e+"s"]():NaN}function Yo(e){return function(){return this.isValid()?this._data[e]:NaN}}var qo=Yo("milliseconds"),Ko=Yo("seconds"),Qo=Yo("minutes"),Jo=Yo("hours"),Xo=Yo("days"),Zo=Yo("months"),$o=Yo("years");function es(){return Me(this.days()/7)}var ts=Math.round,ns={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function rs(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function is(e,t,n,r){var i=Ar(e).abs(),o=ts(i.as("s")),s=ts(i.as("m")),a=ts(i.as("h")),c=ts(i.as("d")),l=ts(i.as("M")),d=ts(i.as("w")),u=ts(i.as("y")),h=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||s<=1&&["m"]||s<n.m&&["mm",s]||a<=1&&["h"]||a<n.h&&["hh",a]||c<=1&&["d"]||c<n.d&&["dd",c];return null!=n.w&&(h=h||d<=1&&["w"]||d<n.w&&["ww",d]),(h=h||l<=1&&["M"]||l<n.M&&["MM",l]||u<=1&&["y"]||["yy",u])[2]=t,h[3]=+e>0,h[4]=r,rs.apply(null,h)}function os(e){return void 0===e?ts:"function"===typeof e&&(ts=e,!0)}function ss(e,t){return void 0!==ns[e]&&(void 0===t?ns[e]:(ns[e]=t,"s"===e&&(ns.ss=t-1),!0))}function as(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,o=ns;return"object"===typeof e&&(t=e,e=!1),"boolean"===typeof e&&(i=e),"object"===typeof t&&(o=Object.assign({},ns,t),null!=t.s&&null==t.ss&&(o.ss=t.s-1)),r=is(this,!i,o,n=this.localeData()),i&&(r=n.pastFuture(+this,r)),n.postformat(r)}var cs=Math.abs;function ls(e){return(e>0)-(e<0)||+e}function ds(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,i,o,s,a,c=cs(this._milliseconds)/1e3,l=cs(this._days),d=cs(this._months),u=this.asSeconds();return u?(e=Me(c/60),t=Me(e/60),c%=60,e%=60,n=Me(d/12),d%=12,r=c?c.toFixed(3).replace(/\.?0+$/,""):"",i=u<0?"-":"",o=ls(this._months)!==ls(u)?"-":"",s=ls(this._days)!==ls(u)?"-":"",a=ls(this._milliseconds)!==ls(u)?"-":"",i+"P"+(n?o+n+"Y":"")+(d?o+d+"M":"")+(l?s+l+"D":"")+(t||e||c?"T":"")+(t?a+t+"H":"")+(e?a+e+"M":"")+(c?a+r+"S":"")):"P0D"}var us=ar.prototype;return us.isValid=or,us.abs=Io,us.add=Co,us.subtract=wo,us.as=Do,us.asMilliseconds=xo,us.asSeconds=Lo,us.asMinutes=Po,us.asHours=jo,us.asDays=Uo,us.asWeeks=Fo,us.asMonths=zo,us.asQuarters=Vo,us.asYears=Bo,us.valueOf=Go,us._bubble=Ao,us.clone=Ho,us.get=Wo,us.milliseconds=qo,us.seconds=Ko,us.minutes=Qo,us.hours=Jo,us.days=Xo,us.weeks=es,us.months=Zo,us.years=$o,us.humanize=as,us.toISOString=ds,us.toString=ds,us.toJSON=ds,us.locale=ai,us.localeData=li,us.toIsoString=C("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ds),us.lang=ci,V("X",0,0,"unix"),V("x",0,0,"valueOf"),we("x",Ee),we("X",be),xe("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),xe("x",(function(e,t,n){n._d=new Date(De(e))})),i.version="2.30.1",o(Jn),i.fn=lo,i.min=er,i.max=tr,i.now=nr,i.utc=m,i.unix=uo,i.months=vo,i.isDate=h,i.locale=gn,i.invalid=_,i.duration=Ar,i.isMoment=I,i.weekdays=Eo,i.parseZone=ho,i.localeData=_n,i.isDuration=cr,i.monthsShort=_o,i.weekdaysMin=To,i.defineLocale=yn,i.updateLocale=vn,i.locales=En,i.weekdaysShort=So,i.normalizeUnits=re,i.relativeTimeRounding=os,i.relativeTimeThreshold=ss,i.calendarFormat=Br,i.prototype=lo,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i}()},9197:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.default)((function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,n);null!=t&&(i=t)}})),i}))};var r,i=n(3534),o=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},3534:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i,o,s){var a=i||"<<anonymous>>",c=s||r;if(null==n[r])return t?new Error("Required "+o+" `"+c+"` was not specified in `"+a+"`."):null;for(var l=arguments.length,d=Array(l>6?l-6:0),u=6;u<l;u++)d[u-6]=arguments[u];return e.apply(void 0,[n,r,a,o,c].concat(d))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},1497:(e,t,n)=>{"use strict";var r=n(3218);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5173:(e,t,n)=>{e.exports=n(1497)()},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},5429:(e,t,n)=>{e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t){e.exports=n(5043)},function(e,t){e.exports=n(6178)},function(e,t){e.exports=n(7950)},function(e,t,n){e.exports=n(5)()},function(e,t,n){e.exports=n(7)},function(e,t,n){"use strict";var r=n(6);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";n.r(t);var r=n(3),i=n.n(r),o=n(1),s=n.n(o),a=n(0),c=n.n(a);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e){var t=e.onClickPrev,n=e.onClickSwitch,r=e.onClickNext,i=e.switchContent,o=e.switchColSpan,s=e.switchProps;return c.a.createElement("tr",null,c.a.createElement("th",{className:"rdtPrev",onClick:t},c.a.createElement("span",null,"\u2039")),c.a.createElement("th",l({className:"rdtSwitch",colSpan:o,onClick:n},s),i),c.a.createElement("th",{className:"rdtNext",onClick:r},c.a.createElement("span",null,"\u203a")))}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}(this,n)}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(i,e);var t,n,r=f(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return y(m(e=r.call.apply(r,[this].concat(n))),"_setDate",(function(t){e.props.updateDate(t)})),e}return t=i,(n=[{key:"render",value:function(){return c.a.createElement("div",{className:"rdtDays"},c.a.createElement("table",null,c.a.createElement("thead",null,this.renderNavigation(),this.renderDayHeaders()),c.a.createElement("tbody",null,this.renderDays()),this.renderFooter()))}},{key:"renderNavigation",value:function(){var e=this,t=this.props.viewDate,n=t.localeData();return c.a.createElement(d,{onClickPrev:function(){return e.props.navigate(-1,"months")},onClickSwitch:function(){return e.props.showView("months")},onClickNext:function(){return e.props.navigate(1,"months")},switchContent:n.months(t)+" "+t.year(),switchColSpan:5,switchProps:{"data-value":this.props.viewDate.month()}})}},{key:"renderDayHeaders",value:function(){var e=function(e){var t=e.firstDayOfWeek(),n=[],r=0;return e._weekdaysMin.forEach((function(e){n[(7+r++-t)%7]=e})),n}(this.props.viewDate.localeData()).map((function(e,t){return c.a.createElement("th",{key:e+t,className:"dow"},e)}));return c.a.createElement("tr",null,e)}},{key:"renderDays",value:function(){var e=this.props.viewDate,t=e.clone().startOf("month"),n=e.clone().endOf("month"),r=[[],[],[],[],[],[]],i=e.clone().subtract(1,"months");i.date(i.daysInMonth()).startOf("week");for(var o=i.clone().add(42,"d"),s=0;i.isBefore(o);)_(r,s++).push(this.renderDay(i,t,n)),i.add(1,"d");return r.map((function(e,t){return c.a.createElement("tr",{key:"".concat(o.month(),"_").concat(t)},e)}))}},{key:"renderDay",value:function(e,t,n){var r=this.props.selectedDate,i={key:e.format("M_D"),"data-value":e.date(),"data-month":e.month(),"data-year":e.year()},o="rdtDay";return e.isBefore(t)?o+=" rdtOld":e.isAfter(n)&&(o+=" rdtNew"),r&&e.isSame(r,"day")&&(o+=" rdtActive"),e.isSame(this.props.moment(),"day")&&(o+=" rdtToday"),this.props.isValidDate(e)?i.onClick=this._setDate:o+=" rdtDisabled",i.className=o,this.props.renderDay(i,e.clone(),r&&r.clone())}},{key:"renderFooter",value:function(){var e=this;if(this.props.timeFormat){var t=this.props.viewDate;return c.a.createElement("tfoot",null,c.a.createElement("tr",null,c.a.createElement("td",{onClick:function(){return e.props.showView("time")},colSpan:7,className:"rdtTimeToggle"},t.format(this.props.timeFormat))))}}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(c.a.Component);function _(e,t){return e[Math.floor(t/7)]}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return(T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N(e);if(t){var i=N(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return I(e)}(this,n)}}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}y(v,"defaultProps",{isValidDate:function(){return!0},renderDay:function(e,t){return c.a.createElement("td",e,t.date())}});var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(i,e);var t,n,r=b(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(I(e=r.call.apply(r,[this].concat(n))),"_updateSelectedMonth",(function(t){e.props.updateDate(t)})),e}return t=i,(n=[{key:"render",value:function(){return c.a.createElement("div",{className:"rdtMonths"},c.a.createElement("table",null,c.a.createElement("thead",null,this.renderNavigation())),c.a.createElement("table",null,c.a.createElement("tbody",null,this.renderMonths())))}},{key:"renderNavigation",value:function(){var e=this,t=this.props.viewDate.year();return c.a.createElement(d,{onClickPrev:function(){return e.props.navigate(-1,"years")},onClickSwitch:function(){return e.props.showView("years")},onClickNext:function(){return e.props.navigate(1,"years")},switchContent:t,switchColSpan:"2"})}},{key:"renderMonths",value:function(){for(var e=[[],[],[]],t=0;t<12;t++)w(e,t).push(this.renderMonth(t));return e.map((function(e,t){return c.a.createElement("tr",{key:t},e)}))}},{key:"renderMonth",value:function(e){var t,n=this.props.selectedDate,r="rdtMonth";this.isDisabledMonth(e)?r+=" rdtDisabled":t=this._updateSelectedMonth,n&&n.year()===this.props.viewDate.year()&&n.month()===e&&(r+=" rdtActive");var i={key:e,className:r,"data-value":e,onClick:t};return this.props.renderMonth?this.props.renderMonth(i,e,this.props.viewDate.year(),this.props.selectedDate&&this.props.selectedDate.clone()):c.a.createElement("td",i,this.getMonthText(e))}},{key:"isDisabledMonth",value:function(e){var t=this.props.isValidDate;if(!t)return!1;for(var n=this.props.viewDate.clone().set({month:e}),r=n.endOf("month").date()+1;r-- >1;)if(t(n.date(r)))return!1;return!0}},{key:"getMonthText",value:function(e){var t,n=this.props.viewDate;return(t=n.localeData().monthsShort(n.month(e)).substring(0,3)).charAt(0).toUpperCase()+t.slice(1)}}])&&S(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(c.a.Component);function w(e,t){return t<4?e[0]:t<8?e[1]:e[2]}function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return D(e)}(this,n)}}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(i,e);var t,n,r=M(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return x(D(e=r.call.apply(r,[this].concat(n))),"disabledYearsCache",{}),x(D(e),"_updateSelectedYear",(function(t){e.props.updateDate(t)})),e}return t=i,(n=[{key:"render",value:function(){return c.a.createElement("div",{className:"rdtYears"},c.a.createElement("table",null,c.a.createElement("thead",null,this.renderNavigation())),c.a.createElement("table",null,c.a.createElement("tbody",null,this.renderYears())))}},{key:"renderNavigation",value:function(){var e=this,t=this.getViewYear();return c.a.createElement(d,{onClickPrev:function(){return e.props.navigate(-10,"years")},onClickSwitch:function(){return e.props.showView("years")},onClickNext:function(){return e.props.navigate(10,"years")},switchContent:"".concat(t,"-").concat(t+9)})}},{key:"renderYears",value:function(){for(var e=this.getViewYear(),t=[[],[],[]],n=e-1;n<e+11;n++)P(t,n-e).push(this.renderYear(n));return t.map((function(e,t){return c.a.createElement("tr",{key:t},e)}))}},{key:"renderYear",value:function(e){var t,n=this.getSelectedYear(),r="rdtYear";this.isDisabledYear(e)?r+=" rdtDisabled":t=this._updateSelectedYear,n===e&&(r+=" rdtActive");var i={key:e,className:r,"data-value":e,onClick:t};return this.props.renderYear(i,e,this.props.selectedDate&&this.props.selectedDate.clone())}},{key:"getViewYear",value:function(){return 10*parseInt(this.props.viewDate.year()/10,10)}},{key:"getSelectedYear",value:function(){return this.props.selectedDate&&this.props.selectedDate.year()}},{key:"isDisabledYear",value:function(e){var t=this.disabledYearsCache;if(void 0!==t[e])return t[e];var n=this.props.isValidDate;if(!n)return!1;for(var r=this.props.viewDate.clone().set({year:e}),i=r.endOf("year").dayOfYear()+1;i-- >1;)if(n(r.dayOfYear(i)))return t[e]=!1,!1;return t[e]=!0,!0}}])&&A(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(c.a.Component);function P(e,t){return t<3?e[0]:t<7?e[1]:e[2]}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){var i=V(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}x(L,"defaultProps",{renderYear:function(e,t){return c.a.createElement("td",e,t)}});var W={hours:{min:0,max:23,step:1},minutes:{min:0,max:59,step:1},seconds:{min:0,max:59,step:1},milliseconds:{min:0,max:999,step:1}},Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(i,e);var t,n,r=z(i);function i(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,e)).constraints=(n=e.timeConstraints,o={},Object.keys(W).forEach((function(e){o[e]=G(G({},W[e]),n[e]||{})})),o),t.state=t.getTimeParts(e.selectedDate||e.viewDate),t}return t=i,(n=[{key:"render",value:function(){var e=this,t=[],n=this.state;return this.getCounters().forEach((function(r,i){i&&"ampm"!==r&&t.push(c.a.createElement("div",{key:"sep".concat(i),className:"rdtCounterSeparator"},":")),t.push(e.renderCounter(r,n[r]))})),c.a.createElement("div",{className:"rdtTime"},c.a.createElement("table",null,this.renderHeader(),c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement("div",{className:"rdtCounters"},t))))))}},{key:"renderCounter",value:function(e,t){var n=this;return"hours"===e&&this.isAMPM()&&0==(t=(t-1)%12+1)&&(t=12),"ampm"===e&&(t=-1!==this.props.timeFormat.indexOf(" A")?this.props.viewDate.format("A"):this.props.viewDate.format("a")),c.a.createElement("div",{key:e,className:"rdtCounter"},c.a.createElement("span",{className:"rdtBtn",onMouseDown:function(t){return n.onStartClicking(t,"increase",e)}},"\u25b2"),c.a.createElement("div",{className:"rdtCount"},t),c.a.createElement("span",{className:"rdtBtn",onMouseDown:function(t){return n.onStartClicking(t,"decrease",e)}},"\u25bc"))}},{key:"renderHeader",value:function(){var e=this;if(this.props.dateFormat){var t=this.props.selectedDate||this.props.viewDate;return c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("td",{className:"rdtSwitch",colSpan:"4",onClick:function(){return e.props.showView("days")}},t.format(this.props.dateFormat))))}}},{key:"onStartClicking",value:function(e,t,n){var r=this;if(!e||!e.button||0===e.button){if("ampm"===n)return this.toggleDayPart();var i={},o=document.body;i[n]=this[t](n),this.setState(i),this.timer=setTimeout((function(){r.increaseTimer=setInterval((function(){i[n]=r[t](n),r.setState(i)}),70)}),500),this.mouseUpListener=function(){clearTimeout(r.timer),clearInterval(r.increaseTimer),r.props.setTime(n,parseInt(r.state[n],10)),o.removeEventListener("mouseup",r.mouseUpListener),o.removeEventListener("touchend",r.mouseUpListener)},o.addEventListener("mouseup",this.mouseUpListener),o.addEventListener("touchend",this.mouseUpListener)}}},{key:"toggleDayPart",value:function(){var e=parseInt(this.state.hours,10);e>=12?e-=12:e+=12,this.props.setTime("hours",e)}},{key:"increase",value:function(e){var t=this.constraints[e],n=parseInt(this.state[e],10)+t.step;return n>t.max&&(n=t.min+(n-(t.max+1))),q(e,n)}},{key:"decrease",value:function(e){var t=this.constraints[e],n=parseInt(this.state[e],10)-t.step;return n<t.min&&(n=t.max+1-(t.min-n)),q(e,n)}},{key:"getCounters",value:function(){var e=[],t=this.props.timeFormat;return-1!==t.toLowerCase().indexOf("h")&&(e.push("hours"),-1!==t.indexOf("m")&&(e.push("minutes"),-1!==t.indexOf("s")&&(e.push("seconds"),-1!==t.indexOf("S")&&e.push("milliseconds")))),this.isAMPM()&&e.push("ampm"),e}},{key:"isAMPM",value:function(){return-1!==this.props.timeFormat.toLowerCase().indexOf(" a")}},{key:"getTimeParts",value:function(e){var t=e.hours();return{hours:q("hours",t),minutes:q("minutes",e.minutes()),seconds:q("seconds",e.seconds()),milliseconds:q("milliseconds",e.milliseconds()),ampm:t<12?"am":"pm"}}},{key:"componentDidUpdate",value:function(e){this.props.selectedDate?this.props.selectedDate!==e.selectedDate&&this.setState(this.getTimeParts(this.props.selectedDate)):e.viewDate!==this.props.viewDate&&this.setState(this.getTimeParts(this.props.viewDate))}}])&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(c.a.Component);function q(e,t){for(var n={hours:1,minutes:2,seconds:2,milliseconds:3},r=t+"";r.length<n[e];)r="0"+r;return r}var K=n(2);function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e,t,n){return e===t||(e.correspondingElement?e.correspondingElement.classList.contains(n):e.classList.contains(n))}var Z,$,ee=(void 0===Z&&(Z=0),function(){return++Z}),te={},ne={},re=["touchstart","touchmove"];function ie(e,t){var n=null;return-1!==re.indexOf(t)&&$&&(n={passive:!e.props.preventDefault}),n}function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t,n){return t&&le(e.prototype,t),n&&le(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}function he(e,t){return(he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=me(e);if(t){var i=me(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fe(e)}(this,n)}}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",(function(){return Ie}));var ye="years",ve="months",_e="days",Ee="time",Se=i.a,Te=function(){},be=Se.oneOfType([Se.instanceOf(s.a),Se.instanceOf(Date),Se.string]),Ie=function(e){ue(n,e);var t=pe(n);function n(e){var r;return ce(this,n),ge(fe(r=t.call(this,e)),"_renderCalendar",(function(){var e=r.props,t=r.state,n={viewDate:t.viewDate.clone(),selectedDate:r.getSelectedDate(),isValidDate:e.isValidDate,updateDate:r._updateDate,navigate:r._viewNavigate,moment:s.a,showView:r._showView};switch(t.currentView){case ye:return n.renderYear=e.renderYear,c.a.createElement(L,n);case ve:return n.renderMonth=e.renderMonth,c.a.createElement(C,n);case _e:return n.renderDay=e.renderDay,n.timeFormat=r.getFormat("time"),c.a.createElement(v,n);default:return n.dateFormat=r.getFormat("date"),n.timeFormat=r.getFormat("time"),n.timeConstraints=e.timeConstraints,n.setTime=r._setTime,c.a.createElement(Y,n)}})),ge(fe(r),"_showView",(function(e,t){var n=(t||r.state.viewDate).clone(),i=r.props.onBeforeNavigate(e,r.state.currentView,n);i&&r.state.currentView!==i&&(r.props.onNavigate(i),r.setState({currentView:i}))})),ge(fe(r),"viewToMethod",{days:"date",months:"month",years:"year"}),ge(fe(r),"nextView",{days:"time",months:"days",years:"months"}),ge(fe(r),"_updateDate",(function(e){var t=r.state.currentView,n=r.getUpdateOn(r.getFormat("date")),i=r.state.viewDate.clone();i[r.viewToMethod[t]](parseInt(e.target.getAttribute("data-value"),10)),"days"===t&&(i.month(parseInt(e.target.getAttribute("data-month"),10)),i.year(parseInt(e.target.getAttribute("data-year"),10)));var o={viewDate:i};t===n?(o.selectedDate=i.clone(),o.inputValue=i.format(r.getFormat("datetime")),void 0===r.props.open&&r.props.input&&r.props.closeOnSelect&&r._closeCalendar(),r.props.onChange(i.clone())):r._showView(r.nextView[t],i),r.setState(o)})),ge(fe(r),"_viewNavigate",(function(e,t){var n=r.state.viewDate.clone();n.add(e,t),e>0?r.props.onNavigateForward(e,t):r.props.onNavigateBack(-e,t),r.setState({viewDate:n})})),ge(fe(r),"_setTime",(function(e,t){var n=(r.getSelectedDate()||r.state.viewDate).clone();n[e](t),r.props.value||r.setState({selectedDate:n,viewDate:n.clone(),inputValue:n.format(r.getFormat("datetime"))}),r.props.onChange(n)})),ge(fe(r),"_openCalendar",(function(){r.isOpen()||r.setState({open:!0},r.props.onOpen)})),ge(fe(r),"_closeCalendar",(function(){r.isOpen()&&r.setState({open:!1},(function(){r.props.onClose(r.state.selectedDate||r.state.inputValue)}))})),ge(fe(r),"_handleClickOutside",(function(){var e=r.props;e.input&&r.state.open&&void 0===e.open&&e.closeOnClickOutside&&r._closeCalendar()})),ge(fe(r),"_onInputFocus",(function(e){r.callHandler(r.props.inputProps.onFocus,e)&&r._openCalendar()})),ge(fe(r),"_onInputChange",(function(e){if(r.callHandler(r.props.inputProps.onChange,e)){var t=e.target?e.target.value:e,n=r.localMoment(t,r.getFormat("datetime")),i={inputValue:t};n.isValid()?(i.selectedDate=n,i.viewDate=n.clone().startOf("month")):i.selectedDate=null,r.setState(i,(function(){r.props.onChange(n.isValid()?n:r.state.inputValue)}))}})),ge(fe(r),"_onInputKeyDown",(function(e){r.callHandler(r.props.inputProps.onKeyDown,e)&&9===e.which&&r.props.closeOnTab&&r._closeCalendar()})),ge(fe(r),"_onInputClick",(function(e){r.callHandler(r.props.inputProps.onClick,e)&&r._openCalendar()})),r.state=r.getInitialState(),r}return de(n,[{key:"render",value:function(){return c.a.createElement(Ce,{className:this.getClassName(),onClickOut:this._handleClickOutside},this.renderInput(),c.a.createElement("div",{className:"rdtPicker"},this.renderView()))}},{key:"renderInput",value:function(){if(this.props.input){var e=ae(ae({type:"text",className:"form-control",value:this.getInputValue()},this.props.inputProps),{},{onFocus:this._onInputFocus,onChange:this._onInputChange,onKeyDown:this._onInputKeyDown,onClick:this._onInputClick});return this.props.renderInput?c.a.createElement("div",null,this.props.renderInput(e,this._openCalendar,this._closeCalendar)):c.a.createElement("input",e)}}},{key:"renderView",value:function(){return this.props.renderView(this.state.currentView,this._renderCalendar)}},{key:"getInitialState",value:function(){var e=this.props,t=this.getFormat("datetime"),n=this.parseDate(e.value||e.initialValue,t);return this.checkTZ(),{open:!e.input,currentView:e.initialViewMode||this.getInitialView(),viewDate:this.getInitialViewDate(n),selectedDate:n&&n.isValid()?n:void 0,inputValue:this.getInitialInputValue(n)}}},{key:"getInitialViewDate",value:function(e){var t,n=this.props.initialViewDate;if(n){if((t=this.parseDate(n,this.getFormat("datetime")))&&t.isValid())return t;Ne('The initialViewDated given "'+n+'" is not valid. Using current date instead.')}else if(e&&e.isValid())return e.clone();return this.getInitialDate()}},{key:"getInitialDate",value:function(){var e=this.localMoment();return e.hour(0).minute(0).second(0).millisecond(0),e}},{key:"getInitialView",value:function(){var e=this.getFormat("date");return e?this.getUpdateOn(e):Ee}},{key:"parseDate",value:function(e,t){var n;return e&&"string"==typeof e?n=this.localMoment(e,t):e&&(n=this.localMoment(e)),n&&!n.isValid()&&(n=null),n}},{key:"getClassName",value:function(){var e="rdt",t=this.props,n=t.className;return Array.isArray(n)?e+=" "+n.join(" "):n&&(e+=" "+n),t.input||(e+=" rdtStatic"),this.isOpen()&&(e+=" rdtOpen"),e}},{key:"isOpen",value:function(){return!this.props.input||(void 0===this.props.open?this.state.open:this.props.open)}},{key:"getUpdateOn",value:function(e){return this.props.updateOnView?this.props.updateOnView:e.match(/[lLD]/)?_e:-1!==e.indexOf("M")?ve:-1!==e.indexOf("Y")?ye:_e}},{key:"getLocaleData",value:function(){var e=this.props;return this.localMoment(e.value||e.defaultValue||new Date).localeData()}},{key:"getDateFormat",value:function(){var e=this.getLocaleData(),t=this.props.dateFormat;return!0===t?e.longDateFormat("L"):t||""}},{key:"getTimeFormat",value:function(){var e=this.getLocaleData(),t=this.props.timeFormat;return!0===t?e.longDateFormat("LT"):t||""}},{key:"getFormat",value:function(e){if("date"===e)return this.getDateFormat();if("time"===e)return this.getTimeFormat();var t=this.getDateFormat(),n=this.getTimeFormat();return t&&n?t+" "+n:t||n}},{key:"updateTime",value:function(e,t,n,r){var i={},o=r?"selectedDate":"viewDate";i[o]=this.state[o].clone()[e](t,n),this.setState(i)}},{key:"localMoment",value:function(e,t,n){var r=null;return r=(n=n||this.props).utc?s.a.utc(e,t,n.strictParsing):n.displayTimeZone?s.a.tz(e,t,n.displayTimeZone):s()(e,t,n.strictParsing),n.locale&&r.locale(n.locale),r}},{key:"checkTZ",value:function(){var e=this.props.displayTimeZone;!e||this.tzWarning||s.a.tz||(this.tzWarning=!0,Ne('displayTimeZone prop with value "'+e+'" is used but moment.js timezone is not loaded.',"error"))}},{key:"componentDidUpdate",value:function(e){if(e!==this.props){var t=!1,n=this.props;["locale","utc","displayZone","dateFormat","timeFormat"].forEach((function(r){e[r]!==n[r]&&(t=!0)})),t&&this.regenerateDates(),n.value&&n.value!==e.value&&this.setViewDate(n.value),this.checkTZ()}}},{key:"regenerateDates",value:function(){var e=this.props,t=this.state.viewDate.clone(),n=this.state.selectedDate&&this.state.selectedDate.clone();e.locale&&(t.locale(e.locale),n&&n.locale(e.locale)),e.utc?(t.utc(),n&&n.utc()):e.displayTimeZone?(t.tz(e.displayTimeZone),n&&n.tz(e.displayTimeZone)):(t.locale(),n&&n.locale());var r={viewDate:t,selectedDate:n};n&&n.isValid()&&(r.inputValue=n.format(this.getFormat("datetime"))),this.setState(r)}},{key:"getSelectedDate",value:function(){if(void 0===this.props.value)return this.state.selectedDate;var e=this.parseDate(this.props.value,this.getFormat("datetime"));return!(!e||!e.isValid())&&e}},{key:"getInitialInputValue",value:function(e){var t=this.props;return t.inputProps.value?t.inputProps.value:e&&e.isValid()?e.format(this.getFormat("datetime")):t.value&&"string"==typeof t.value?t.value:t.initialValue&&"string"==typeof t.initialValue?t.initialValue:""}},{key:"getInputValue",value:function(){var e=this.getSelectedDate();return e?e.format(this.getFormat("datetime")):this.state.inputValue}},{key:"setViewDate",value:function(e){var t;return e&&(t="string"==typeof e?this.localMoment(e,this.getFormat("datetime")):this.localMoment(e))&&t.isValid()?void this.setState({viewDate:t}):Ne("Invalid date passed to the `setViewDate` method: "+e)}},{key:"navigate",value:function(e){this._showView(e)}},{key:"callHandler",value:function(e,t){return!e||!1!==e(t)}}]),n}(c.a.Component);function Ne(e,t){var n="undefined"!=typeof window&&window.console;n&&(t||(t="warn"),n[t]("***react-datetime:"+e))}ge(Ie,"propTypes",{value:be,initialValue:be,initialViewDate:be,initialViewMode:Se.oneOf([ye,ve,_e,Ee]),onOpen:Se.func,onClose:Se.func,onChange:Se.func,onNavigate:Se.func,onBeforeNavigate:Se.func,onNavigateBack:Se.func,onNavigateForward:Se.func,updateOnView:Se.string,locale:Se.string,utc:Se.bool,displayTimeZone:Se.string,input:Se.bool,dateFormat:Se.oneOfType([Se.string,Se.bool]),timeFormat:Se.oneOfType([Se.string,Se.bool]),inputProps:Se.object,timeConstraints:Se.object,isValidDate:Se.func,open:Se.bool,strictParsing:Se.bool,closeOnSelect:Se.bool,closeOnTab:Se.bool,renderView:Se.func,renderInput:Se.func,renderDay:Se.func,renderMonth:Se.func,renderYear:Se.func}),ge(Ie,"defaultProps",{onOpen:Te,onClose:Te,onCalendarOpen:Te,onCalendarClose:Te,onChange:Te,onNavigate:Te,onBeforeNavigate:function(e){return e},onNavigateBack:Te,onNavigateForward:Te,dateFormat:!0,timeFormat:!0,utc:!1,className:"",input:!0,inputProps:{},timeConstraints:{},isValidDate:function(){return!0},strictParsing:!0,closeOnSelect:!1,closeOnTab:!0,closeOnClickOutside:!0,renderView:function(e,t){return t()}}),ge(Ie,"moment",s.a);var Ce=function(e,t){var n,r,i=e.displayName||e.name||"Component";return r=n=function(n){var r,o;function s(e){var r;return(r=n.call(this,e)||this).__outsideClickHandler=function(e){if("function"!=typeof r.__clickOutsideHandlerProp){var t=r.getInstance();if("function"!=typeof t.props.handleClickOutside){if("function"!=typeof t.handleClickOutside)throw new Error("WrappedComponent: "+i+" lacks a handleClickOutside(event) function for processing outside click events.");t.handleClickOutside(e)}else t.props.handleClickOutside(e)}else r.__clickOutsideHandlerProp(e)},r.__getComponentNode=function(){var e=r.getInstance();return t&&"function"==typeof t.setClickOutsideRef?t.setClickOutsideRef()(e):"function"==typeof e.setClickOutsideRef?e.setClickOutsideRef():Object(K.findDOMNode)(e)},r.enableOnClickOutside=function(){if("undefined"!=typeof document&&!ne[r._uid]){void 0===$&&($=function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};return window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t),e}}()),ne[r._uid]=!0;var e=r.props.eventTypes;e.forEach||(e=[e]),te[r._uid]=function(e){var t;null!==r.componentNode&&(r.props.preventDefault&&e.preventDefault(),r.props.stopPropagation&&e.stopPropagation(),r.props.excludeScrollbar&&(t=e,document.documentElement.clientWidth<=t.clientX||document.documentElement.clientHeight<=t.clientY)||function(e,t,n){if(e===t)return!0;for(;e.parentNode||e.host;){if(e.parentNode&&X(e,t,n))return!0;e=e.parentNode||e.host}return e}(e.composed&&e.composedPath&&e.composedPath().shift()||e.target,r.componentNode,r.props.outsideClickIgnoreClass)===document&&r.__outsideClickHandler(e))},e.forEach((function(e){document.addEventListener(e,te[r._uid],ie(J(r),e))}))}},r.disableOnClickOutside=function(){delete ne[r._uid];var e=te[r._uid];if(e&&"undefined"!=typeof document){var t=r.props.eventTypes;t.forEach||(t=[t]),t.forEach((function(t){return document.removeEventListener(t,e,ie(J(r),t))})),delete te[r._uid]}},r.getRef=function(e){return r.instanceRef=e},r._uid=ee(),r}o=n,(r=s).prototype=Object.create(o.prototype),r.prototype.constructor=r,Q(r,o);var c=s.prototype;return c.getInstance=function(){if(e.prototype&&!e.prototype.isReactComponent)return this;var t=this.instanceRef;return t.getInstance?t.getInstance():t},c.componentDidMount=function(){if("undefined"!=typeof document&&document.createElement){var e=this.getInstance();if(t&&"function"==typeof t.handleClickOutside&&(this.__clickOutsideHandlerProp=t.handleClickOutside(e),"function"!=typeof this.__clickOutsideHandlerProp))throw new Error("WrappedComponent: "+i+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=this.__getComponentNode(),this.props.disableOnClickOutside||this.enableOnClickOutside()}},c.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},c.componentWillUnmount=function(){this.disableOnClickOutside()},c.render=function(){var t=this.props;t.excludeScrollbar;var n=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["excludeScrollbar"]);return e.prototype&&e.prototype.isReactComponent?n.ref=this.getRef:n.wrappedRef=this.getRef,n.disableOnClickOutside=this.disableOnClickOutside,n.enableOnClickOutside=this.enableOnClickOutside,Object(a.createElement)(e,n)},s}(a.Component),n.displayName="OnClickOutside("+i+")",n.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:"ignore-react-onclickoutside",preventDefault:!1,stopPropagation:!1},n.getClass=function(){return e.getClass?e.getClass():e},r}(function(e){ue(n,e);var t=pe(n);function n(){var e;ce(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return ge(fe(e=t.call.apply(t,[this].concat(i))),"container",c.a.createRef()),e}return de(n,[{key:"render",value:function(){return c.a.createElement("div",{className:this.props.className,ref:this.container},this.props.children)}},{key:"handleClickOutside",value:function(e){this.props.onClickOut(e)}},{key:"setClickOutsideRef",value:function(){return this.container.current}}]),n}(c.a.Component))}])},2730:(t,n,r)=>{"use strict";var i=r(5043),o=r(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,c={};function l(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(c[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function g(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function E(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(m,e)||!h.call(f,e)&&(p.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,_);y[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,_);y[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,_);y[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var S=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),b=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),R=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),k=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var x=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var j,U=Object.assign;function F(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var z=!1;function V(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var c="\n"+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=s&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case b:return"Portal";case C:return"Profiler";case N:return"StrictMode";case O:return"Suspense";case M:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case R:return(e.displayName||"Context")+".Consumer";case w:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&E(e,"checked",t,!1)}function $(e,t){Z(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?te(e,t.type,n):t.hasOwnProperty("defaultValue")&&te(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ee(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function te(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ne=Array.isArray;function re(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(ne(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ce(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ce(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var de,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((de=de||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=de.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function pe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){me.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Se=null;function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,Ie=null,Ne=null;function Ce(e){if(e=Ei(e)){if("function"!==typeof be)throw Error(s(280));var t=e.stateNode;t&&(t=Ti(t),be(e.stateNode,e.type,t))}}function we(e){Ie?Ne?Ne.push(e):Ne=[e]:Ie=e}function Re(){if(Ie){var e=Ie,t=Ne;if(Ne=Ie=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ae(e,t){return e(t)}function Oe(){}var Me=!1;function De(e,t,n){if(Me)return e(t,n);Me=!0;try{return Ae(e,t,n)}finally{Me=!1,(null!==Ie||null!==Ne)&&(Oe(),Re())}}function ke(e,t){var n=e.stateNode;if(null===n)return null;var r=Ti(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var xe=!1;if(u)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){xe=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ue){xe=!1}function Pe(e,t,n,r,i,o,s,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(d){this.onError(d)}}var je=!1,Ue=null,Fe=!1,ze=null,Ve={onError:function(e){je=!0,Ue=e}};function Be(e,t,n,r,i,o,s,a,c){je=!1,Ue=null,Pe.apply(Ve,arguments)}function Ge(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ge(e)!==e)throw Error(s(188))}function Ye(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ge(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=o;break}if(c===r){a=!0,r=i,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=i;break}if(c===r){a=!0,r=o,n=i;break}c=c.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=o.unstable_scheduleCallback,Qe=o.unstable_cancelCallback,Je=o.unstable_shouldYield,Xe=o.unstable_requestPaint,Ze=o.unstable_now,$e=o.unstable_getCurrentPriorityLevel,et=o.unstable_ImmediatePriority,tt=o.unstable_UserBlockingPriority,nt=o.unstable_NormalPriority,rt=o.unstable_LowPriority,it=o.unstable_IdlePriority,ot=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ct(e)/lt|0)|0},ct=Math.log,lt=Math.LN2;var dt=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=ht(a):0!==(o&=s)&&(r=ht(o))}else 0!==(s=n&~i)?r=ht(s):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=dt;return 0===(4194240&(dt<<=1))&&(dt=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function _t(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Et=0;function St(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Tt,bt,It,Nt,Ct,wt=!1,Rt=[],At=null,Ot=null,Mt=null,Dt=new Map,kt=new Map,xt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Ot=null;break;case"mouseover":case"mouseout":Mt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":kt.delete(t.pointerId)}}function jt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=Ei(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ut(e){var t=_i(e.target);if(null!==t){var n=Ge(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Ct(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Ei(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Se=r,n.target.dispatchEvent(r),Se=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Vt(){wt=!1,null!==At&&Ft(At)&&(At=null),null!==Ot&&Ft(Ot)&&(Ot=null),null!==Mt&&Ft(Mt)&&(Mt=null),Dt.forEach(zt),kt.forEach(zt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,wt||(wt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Vt)))}function Gt(e){function t(t){return Bt(t,e)}if(0<Rt.length){Bt(Rt[0],e);for(var n=1;n<Rt.length;n++){var r=Rt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Bt(At,e),null!==Ot&&Bt(Ot,e),null!==Mt&&Bt(Mt,e),Dt.forEach(t),kt.forEach(t),n=0;n<xt.length;n++)(r=xt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<xt.length&&null===(n=xt[0]).blockedOn;)Ut(n),null===n.blockedOn&&xt.shift()}var Ht=S.ReactCurrentBatchConfig,Wt=!0;function Yt(e,t,n,r){var i=Et,o=Ht.transition;Ht.transition=null;try{Et=1,Kt(e,t,n,r)}finally{Et=i,Ht.transition=o}}function qt(e,t,n,r){var i=Et,o=Ht.transition;Ht.transition=null;try{Et=4,Kt(e,t,n,r)}finally{Et=i,Ht.transition=o}}function Kt(e,t,n,r){if(Wt){var i=Jt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Pt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=jt(At,e,t,n,r,i),!0;case"dragenter":return Ot=jt(Ot,e,t,n,r,i),!0;case"mouseover":return Mt=jt(Mt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Dt.set(o,jt(Dt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,kt.set(o,jt(kt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var o=Ei(i);if(null!==o&&Tt(o),null===(o=Jt(e,t,n,r))&&Wr(e,t,r,Qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Jt(e,t,n,r){if(Qt=null,null!==(e=_i(e=Te(r))))if(null===(t=Ge(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case et:return 1;case tt:return 4;case nt:case rt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Zt=null,$t=null,en=null;function tn(){if(en)return en;var e,t,n=$t,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return en=i.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function on(){return!1}function sn(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rn:on,this.isPropagationStopped=on,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var an,cn,ln,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(dn),hn=U({},dn,{view:0,detail:0}),pn=sn(hn),fn=U({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,cn=e.screenY-ln.screenY):cn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),mn=sn(fn),gn=sn(U({},fn,{dataTransfer:0})),yn=sn(U({},hn,{relatedTarget:0})),vn=sn(U({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=U({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),En=sn(_n),Sn=sn(U({},dn,{data:0})),Tn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Cn(){return Nn}var wn=U({},hn,{key:function(e){if(e.key){var t=Tn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Rn=sn(wn),An=sn(U({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=sn(U({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Mn=sn(U({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=U({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kn=sn(Dn),xn=[9,13,27,32],Ln=u&&"CompositionEvent"in window,Pn=null;u&&"documentMode"in document&&(Pn=document.documentMode);var jn=u&&"TextEvent"in window&&!Pn,Un=u&&(!Ln||Pn&&8<Pn&&11>=Pn),Fn=String.fromCharCode(32),zn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Yn(e,t,n,r){we(r),0<(t=qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Kn=null;function Qn(e){Fr(e,0)}function Jn(e){if(K(Si(e)))return e}function Xn(e,t){if("change"===e)return t}var Zn=!1;if(u){var $n;if(u){var er="oninput"in document;if(!er){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),er="function"===typeof tr.oninput}$n=er}else $n=!1;Zn=$n&&(!document.documentMode||9<document.documentMode)}function nr(){qn&&(qn.detachEvent("onpropertychange",rr),Kn=qn=null)}function rr(e){if("value"===e.propertyName&&Jn(Kn)){var t=[];Yn(t,Kn,e,Te(e)),De(Qn,t)}}function ir(e,t,n){"focusin"===e?(nr(),Kn=n,(qn=t).attachEvent("onpropertychange",rr)):"focusout"===e&&nr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Kn)}function sr(e,t){if("click"===e)return Jn(t)}function ar(e,t){if("input"===e||"change"===e)return Jn(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!cr(e[i],t[i]))return!1}return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=pr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,yr=null,vr=null,_r=null,Er=!1;function Sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Er||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},_r&&lr(_r,r)||(_r=r,0<(r=qr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function Tr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:Tr("Animation","AnimationEnd"),animationiteration:Tr("Animation","AnimationIteration"),animationstart:Tr("Animation","AnimationStart"),transitionend:Tr("Transition","TransitionEnd")},Ir={},Nr={};function Cr(e){if(Ir[e])return Ir[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in Nr)return Ir[e]=n[t];return e}u&&(Nr=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var wr=Cr("animationend"),Rr=Cr("animationiteration"),Ar=Cr("animationstart"),Or=Cr("transitionend"),Mr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){Mr.set(e,t),l(t,[e])}for(var xr=0;xr<Dr.length;xr++){var Lr=Dr[xr];kr(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}kr(wr,"onAnimationEnd"),kr(Rr,"onAnimationIteration"),kr(Ar,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(Or,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,c,l){if(Be.apply(this,arguments),je){if(!je)throw Error(s(198));var d=Ue;je=!1,Ue=null,Fe||(Fe=!0,ze=d)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==o&&i.isPropagationStopped())break e;Ur(i,a,l),o=c}else for(s=0;s<r.length;s++){if(c=(a=r[s]).instance,l=a.currentTarget,a=a.listener,c!==o&&i.isPropagationStopped())break e;Ur(i,a,l),o=c}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Gr(e){if(!e[Br]){e[Br]=!0,a.forEach((function(t){"selectionchange"!==t&&(jr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Xt(t)){case 1:var i=Yt;break;case 4:i=qt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!xe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&((c=s.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=_i(a)))return;if(5===(c=s.tag)||6===c){r=o=s;continue e}a=a.parentNode}}r=r.return}De((function(){var r=o,i=Te(n),s=[];e:{var a=Mr.get(e);if(void 0!==a){var c=un,l=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":c=Rn;break;case"focusin":l="focus",c=yn;break;case"focusout":l="blur",c=yn;break;case"beforeblur":case"afterblur":c=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=On;break;case wr:case Rr:case Ar:c=vn;break;case Or:c=Mn;break;case"scroll":c=pn;break;case"wheel":c=kn;break;case"copy":case"cut":case"paste":c=En;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=An}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==a?a+"Capture":null:a;d=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=ke(f,h))&&d.push(Yr(f,m,p)))),u)break;f=f.return}0<d.length&&(a=new c(a,l,null,n,i),s.push({event:a,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Se||!(l=n.relatedTarget||n.fromElement)||!_i(l)&&!l[mi])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?_i(l):null)&&(l!==(u=Ge(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(d=mn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=An,m="onPointerLeave",h="onPointerEnter",f="pointer"),u=null==c?a:Si(c),p=null==l?a:Si(l),(a=new d(m,f+"leave",c,n,i)).target=u,a.relatedTarget=p,m=null,_i(i)===r&&((d=new d(h,f+"enter",l,n,i)).target=p,d.relatedTarget=u,m=d),u=m,c&&l)e:{for(h=l,f=0,p=d=c;p;p=Kr(p))f++;for(p=0,m=h;m;m=Kr(m))p++;for(;0<f-p;)d=Kr(d),f--;for(;0<p-f;)h=Kr(h),p--;for(;f--;){if(d===h||null!==h&&d===h.alternate)break e;d=Kr(d),h=Kr(h)}d=null}else d=null;null!==c&&Qr(s,a,c,d,!1),null!==l&&null!==u&&Qr(s,u,l,d,!0)}if("select"===(c=(a=r?Si(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=Xn;else if(Wn(a))if(Zn)g=ar;else{g=or;var y=ir}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Yn(s,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&te(a,"number",a.value)),y=r?Si(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(yr=y,vr=r,_r=null);break;case"focusout":_r=vr=yr=null;break;case"mousedown":Er=!0;break;case"contextmenu":case"mouseup":case"dragend":Er=!1,Sr(s,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":Sr(s,n,i)}var v;if(Ln)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Gn?Vn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Un&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Gn&&(v=tn()):($t="value"in(Zt=i)?Zt.value:Zt.textContent,Gn=!0)),0<(y=qr(r,_)).length&&(_=new Sn(_,e,null,n,i),s.push({event:_,listeners:y}),v?_.data=v:null!==(v=Bn(n))&&(_.data=v))),(v=jn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Ln&&Vn(e,t)?(e=tn(),en=$t=Zt=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new Sn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}Fr(s,t)}))}function Yr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=ke(e,n))&&r.unshift(Yr(e,o,i)),null!=(o=ke(e,t))&&r.push(Yr(e,o,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(c=ke(n,o))&&s.unshift(Yr(n,c,a)):i||null!=(c=ke(n,o))&&s.push(Yr(n,c,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Jr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(s(425))}function ei(){}var ti=null,ni=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ii="function"===typeof setTimeout?setTimeout:void 0,oi="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ci)}:ii;function ci(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Gt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Gt(t)}function di(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),pi="__reactFiber$"+hi,fi="__reactProps$"+hi,mi="__reactContainer$"+hi,gi="__reactEvents$"+hi,yi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function _i(e){var t=e[pi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mi]||n[pi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[pi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function Ei(e){return!(e=e[pi]||e[mi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Si(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Ti(e){return e[fi]||null}var bi=[],Ii=-1;function Ni(e){return{current:e}}function Ci(e){0>Ii||(e.current=bi[Ii],bi[Ii]=null,Ii--)}function wi(e,t){Ii++,bi[Ii]=e.current,e.current=t}var Ri={},Ai=Ni(Ri),Oi=Ni(!1),Mi=Ri;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ri;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ki(e){return null!==(e=e.childContextTypes)&&void 0!==e}function xi(){Ci(Oi),Ci(Ai)}function Li(e,t,n){if(Ai.current!==Ri)throw Error(s(168));wi(Ai,t),wi(Oi,n)}function Pi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,H(e)||"Unknown",i));return U({},n,r)}function ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ri,Mi=Ai.current,wi(Ai,e),wi(Oi,Oi.current),!0}function Ui(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Pi(e,t,Mi),r.__reactInternalMemoizedMergedChildContext=e,Ci(Oi),Ci(Ai),wi(Ai,e)):Ci(Oi),wi(Oi,n)}var Fi=null,zi=!1,Vi=!1;function Bi(e){null===Fi?Fi=[e]:Fi.push(e)}function Gi(){if(!Vi&&null!==Fi){Vi=!0;var t=0,n=Et;try{var r=Fi;for(Et=1;t<r.length;t++){var i=r[t];do{i=i(!0)}while(null!==i)}Fi=null,zi=!1}catch(e){throw null!==Fi&&(Fi=Fi.slice(t+1)),Ke(et,Gi),e}finally{Et=n,Vi=!1}}return null}var Hi=[],Wi=0,Yi=null,qi=0,Ki=[],Qi=0,Ji=null,Xi=1,Zi="";function $i(e,t){Hi[Wi++]=qi,Hi[Wi++]=Yi,Yi=e,qi=t}function eo(e,t,n){Ki[Qi++]=Xi,Ki[Qi++]=Zi,Ki[Qi++]=Ji,Ji=e;var r=Xi;e=Zi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Xi=1<<32-at(t)+i|n<<i|r,Zi=o+e}else Xi=1<<o|n<<i|r,Zi=e}function to(e){null!==e.return&&($i(e,1),eo(e,1,0))}function no(e){for(;e===Yi;)Yi=Hi[--Wi],Hi[Wi]=null,qi=Hi[--Wi],Hi[Wi]=null;for(;e===Ji;)Ji=Ki[--Qi],Ki[Qi]=null,Zi=Ki[--Qi],Ki[Qi]=null,Xi=Ki[--Qi],Ki[Qi]=null}var ro=null,io=null,oo=!1,so=null;function ao(e,t){var n=kl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function co(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ro=e,io=di(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ro=e,io=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:Xi,overflow:Zi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=kl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ro=e,io=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function uo(e){if(oo){var t=io;if(t){var n=t;if(!co(e,t)){if(lo(e))throw Error(s(418));t=di(n.nextSibling);var r=ro;t&&co(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,oo=!1,ro=e)}}else{if(lo(e))throw Error(s(418));e.flags=-4097&e.flags|2,oo=!1,ro=e}}}function ho(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ro=e}function po(e){if(e!==ro)return!1;if(!oo)return ho(e),oo=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=io)){if(lo(e))throw fo(),Error(s(418));for(;t;)ao(e,t),t=di(t.nextSibling)}if(ho(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){io=di(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}io=null}}else io=ro?di(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=io;e;)e=di(e.nextSibling)}function mo(){io=ro=null,oo=!1}function go(e){null===so?so=[e]:so.push(e)}var yo=S.ReactCurrentBatchConfig;function vo(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var _o=Ni(null),Eo=null,So=null,To=null;function bo(){To=So=Eo=null}function Io(e){var t=_o.current;Ci(_o),e._currentValue=t}function No(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Co(e,t){Eo=e,To=So=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Sa=!0),e.firstContext=null)}function wo(e){var t=e._currentValue;if(To!==e)if(e={context:e,memoizedValue:t,next:null},null===So){if(null===Eo)throw Error(s(308));So=e,Eo.dependencies={lanes:0,firstContext:e}}else So=So.next=e;return t}var Ro=null;function Ao(e){null===Ro?Ro=[e]:Ro.push(e)}function Oo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ao(t)):(n.next=i.next,i.next=n),t.interleaved=n,Mo(e,r)}function Mo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Do=!1;function ko(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Lo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Po(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Oc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Mo(e,n)}return null===(i=r.interleaved)?(t.next=t,Ao(r)):(t.next=i.next,i.next=t),r.interleaved=t,Mo(e,n)}function jo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_t(e,n)}}function Uo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fo(e,t,n,r){var i=e.updateQueue;Do=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var c=a,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var d=e.alternate;null!==d&&((a=(d=d.updateQueue).lastBaseUpdate)!==s&&(null===a?d.firstBaseUpdate=l:a.next=l,d.lastBaseUpdate=c))}if(null!==o){var u=i.baseState;for(s=0,d=l=c=null,a=o;;){var h=a.lane,p=a.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){u=f.call(p,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,u,h):f)||void 0===h)break e;u=U({},u,h);break e;case 2:Do=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===d?(l=d=p,c=u):d=d.next=p,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===d&&(c=u),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=d,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Uc|=s,e.lanes=s,e.memoizedState=u}}function zo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Vo=(new i.Component).refs;function Bo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Go={isMounted:function(e){return!!(e=e._reactInternals)&&Ge(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nl(),i=rl(e),o=Lo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Po(e,o,i))&&(il(t,e,i,r),jo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nl(),i=rl(e),o=Lo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Po(e,o,i))&&(il(t,e,i,r),jo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nl(),r=rl(e),i=Lo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Po(e,i,r))&&(il(t,e,r,n),jo(t,e,r))}};function Ho(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Wo(e,t,n){var r=!1,i=Ri,o=t.contextType;return"object"===typeof o&&null!==o?o=wo(o):(i=ki(t)?Mi:Ai.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ri),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Go,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Yo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Go.enqueueReplaceState(t,t.state,null)}function qo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Vo,ko(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=wo(o):(o=ki(t)?Mi:Ai.current,i.context=Di(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Bo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Go.enqueueReplaceState(i,i.state,null),Fo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ko(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Vo&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Qo(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Jo(e){return(0,e._init)(e._payload)}function Xo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ll(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Fl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var o=n.type;return o===I?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===k&&Jo(o)===t.type)?((r=i(t,n.props)).ref=Ko(e,t,n),r.return=e,r):((r=Pl(n.type,n.key,n.props,null,e.mode,r)).ref=Ko(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,o){return null===t||7!==t.tag?((t=jl(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case T:return(n=Pl(t.type,t.key,t.props,null,e.mode,n)).ref=Ko(e,null,t),n.return=e,n;case b:return(t=zl(t,e.mode,n)).return=e,t;case k:return h(e,(0,t._init)(t._payload),n)}if(ne(t)||P(t))return(t=jl(t,e.mode,n,null)).return=e,t;Qo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case T:return n.key===i?l(e,t,n,r):null;case b:return n.key===i?d(e,t,n,r):null;case k:return p(e,t,(i=n._init)(n._payload),r)}if(ne(n)||P(n))return null!==i?null:u(e,t,n,r,null);Qo(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case T:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return f(e,t,n,(0,r._init)(r._payload),i)}if(ne(r)||P(r))return u(t,e=e.get(n)||null,r,i,null);Qo(t,r)}return null}function m(i,s,a,c){for(var l=null,d=null,u=s,m=s=0,g=null;null!==u&&m<a.length;m++){u.index>m?(g=u,u=null):g=u.sibling;var y=p(i,u,a[m],c);if(null===y){null===u&&(u=g);break}e&&u&&null===y.alternate&&t(i,u),s=o(y,s,m),null===d?l=y:d.sibling=y,d=y,u=g}if(m===a.length)return n(i,u),oo&&$i(i,m),l;if(null===u){for(;m<a.length;m++)null!==(u=h(i,a[m],c))&&(s=o(u,s,m),null===d?l=u:d.sibling=u,d=u);return oo&&$i(i,m),l}for(u=r(i,u);m<a.length;m++)null!==(g=f(u,i,m,a[m],c))&&(e&&null!==g.alternate&&u.delete(null===g.key?m:g.key),s=o(g,s,m),null===d?l=g:d.sibling=g,d=g);return e&&u.forEach((function(e){return t(i,e)})),oo&&$i(i,m),l}function g(i,a,c,l){var d=P(c);if("function"!==typeof d)throw Error(s(150));if(null==(c=d.call(c)))throw Error(s(151));for(var u=d=null,m=a,g=a=0,y=null,v=c.next();null!==m&&!v.done;g++,v=c.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=p(i,m,v.value,l);if(null===_){null===m&&(m=y);break}e&&m&&null===_.alternate&&t(i,m),a=o(_,a,g),null===u?d=_:u.sibling=_,u=_,m=y}if(v.done)return n(i,m),oo&&$i(i,g),d;if(null===m){for(;!v.done;g++,v=c.next())null!==(v=h(i,v.value,l))&&(a=o(v,a,g),null===u?d=v:u.sibling=v,u=v);return oo&&$i(i,g),d}for(m=r(i,m);!v.done;g++,v=c.next())null!==(v=f(m,i,g,v.value,l))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===u?d=v:u.sibling=v,u=v);return e&&m.forEach((function(e){return t(i,e)})),oo&&$i(i,g),d}return function e(r,o,s,c){if("object"===typeof s&&null!==s&&s.type===I&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case T:e:{for(var l=s.key,d=o;null!==d;){if(d.key===l){if((l=s.type)===I){if(7===d.tag){n(r,d.sibling),(o=i(d,s.props.children)).return=r,r=o;break e}}else if(d.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===k&&Jo(l)===d.type){n(r,d.sibling),(o=i(d,s.props)).ref=Ko(r,d,s),o.return=r,r=o;break e}n(r,d);break}t(r,d),d=d.sibling}s.type===I?((o=jl(s.props.children,r.mode,c,s.key)).return=r,r=o):((c=Pl(s.type,s.key,s.props,null,r.mode,c)).ref=Ko(r,o,s),c.return=r,r=c)}return a(r);case b:e:{for(d=s.key;null!==o;){if(o.key===d){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=zl(s,r.mode,c)).return=r,r=o}return a(r);case k:return e(r,o,(d=s._init)(s._payload),c)}if(ne(s))return m(r,o,s,c);if(P(s))return g(r,o,s,c);Qo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Fl(s,r.mode,c)).return=r,r=o),a(r)):n(r,o)}}var Zo=Xo(!0),$o=Xo(!1),es={},ts=Ni(es),ns=Ni(es),rs=Ni(es);function is(e){if(e===es)throw Error(s(174));return e}function os(e,t){switch(wi(rs,t),wi(ns,e),wi(ts,es),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(ts),wi(ts,t)}function ss(){Ci(ts),Ci(ns),Ci(rs)}function as(e){is(rs.current);var t=is(ts.current),n=le(t,e.type);t!==n&&(wi(ns,e),wi(ts,n))}function cs(e){ns.current===e&&(Ci(ts),Ci(ns))}var ls=Ni(0);function ds(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var us=[];function hs(){for(var e=0;e<us.length;e++)us[e]._workInProgressVersionPrimary=null;us.length=0}var ps=S.ReactCurrentDispatcher,fs=S.ReactCurrentBatchConfig,ms=0,gs=null,ys=null,vs=null,_s=!1,Es=!1,Ss=0,Ts=0;function bs(){throw Error(s(321))}function Is(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function Ns(e,t,n,r,i,o){if(ms=o,gs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ps.current=null===e||null===e.memoizedState?ca:la,e=n(r,i),Es){o=0;do{if(Es=!1,Ss=0,25<=o)throw Error(s(301));o+=1,vs=ys=null,t.updateQueue=null,ps.current=da,e=n(r,i)}while(Es)}if(ps.current=aa,t=null!==ys&&null!==ys.next,ms=0,vs=ys=gs=null,_s=!1,t)throw Error(s(300));return e}function Cs(){var e=0!==Ss;return Ss=0,e}function ws(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vs?gs.memoizedState=vs=e:vs=vs.next=e,vs}function Rs(){if(null===ys){var e=gs.alternate;e=null!==e?e.memoizedState:null}else e=ys.next;var t=null===vs?gs.memoizedState:vs.next;if(null!==t)vs=t,ys=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ys=e).memoizedState,baseState:ys.baseState,baseQueue:ys.baseQueue,queue:ys.queue,next:null},null===vs?gs.memoizedState=vs=e:vs=vs.next=e}return vs}function As(e,t){return"function"===typeof t?t(e):t}function Os(e){var t=Rs(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ys,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var c=a=null,l=null,d=o;do{var u=d.lane;if((ms&u)===u)null!==l&&(l=l.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===l?(c=l=h,a=r):l=l.next=h,gs.lanes|=u,Uc|=u}d=d.next}while(null!==d&&d!==o);null===l?a=r:l.next=c,cr(r,t.memoizedState)||(Sa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,gs.lanes|=o,Uc|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ms(e){var t=Rs(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);cr(o,t.memoizedState)||(Sa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ds(){}function ks(e,t){var n=gs,r=Rs(),i=t(),o=!cr(r.memoizedState,i);if(o&&(r.memoizedState=i,Sa=!0),r=r.queue,Ws(Ps.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==vs&&1&vs.memoizedState.tag){if(n.flags|=2048,zs(9,Ls.bind(null,n,r,i,t),void 0,null),null===Mc)throw Error(s(349));0!==(30&ms)||xs(n,t,i)}return i}function xs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ls(e,t,n,r){t.value=n,t.getSnapshot=r,js(t)&&Us(e)}function Ps(e,t,n){return n((function(){js(t)&&Us(e)}))}function js(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cr(e,n)}catch(r){return!0}}function Us(e){var t=Mo(e,1);null!==t&&il(t,e,1,-1)}function Fs(e){var t=ws();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:e},t.queue=e,e=e.dispatch=ra.bind(null,gs,e),[t.memoizedState,e]}function zs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vs(){return Rs().memoizedState}function Bs(e,t,n,r){var i=ws();gs.flags|=e,i.memoizedState=zs(1|t,n,void 0,void 0===r?null:r)}function Gs(e,t,n,r){var i=Rs();r=void 0===r?null:r;var o=void 0;if(null!==ys){var s=ys.memoizedState;if(o=s.destroy,null!==r&&Is(r,s.deps))return void(i.memoizedState=zs(t,n,o,r))}gs.flags|=e,i.memoizedState=zs(1|t,n,o,r)}function Hs(e,t){return Bs(8390656,8,e,t)}function Ws(e,t){return Gs(2048,8,e,t)}function Ys(e,t){return Gs(4,2,e,t)}function qs(e,t){return Gs(4,4,e,t)}function Ks(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Gs(4,4,Ks.bind(null,t,e),n)}function Js(){}function Xs(e,t){var n=Rs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Is(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zs(e,t){var n=Rs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Is(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $s(e,t,n){return 0===(21&ms)?(e.baseState&&(e.baseState=!1,Sa=!0),e.memoizedState=n):(cr(n,t)||(n=gt(),gs.lanes|=n,Uc|=n,e.baseState=!0),t)}function ea(e,t){var n=Et;Et=0!==n&&4>n?n:4,e(!0);var r=fs.transition;fs.transition={};try{e(!1),t()}finally{Et=n,fs.transition=r}}function ta(){return Rs().memoizedState}function na(e,t,n){var r=rl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ia(e))oa(t,n);else if(null!==(n=Oo(e,t,n,r))){il(n,e,r,nl()),sa(n,t,r)}}function ra(e,t,n){var r=rl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ia(e))oa(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,cr(a,s)){var c=t.interleaved;return null===c?(i.next=i,Ao(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Oo(e,t,i,r))&&(il(n,e,r,i=nl()),sa(n,t,r))}}function ia(e){var t=e.alternate;return e===gs||null!==t&&t===gs}function oa(e,t){Es=_s=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_t(e,n)}}var aa={readContext:wo,useCallback:bs,useContext:bs,useEffect:bs,useImperativeHandle:bs,useInsertionEffect:bs,useLayoutEffect:bs,useMemo:bs,useReducer:bs,useRef:bs,useState:bs,useDebugValue:bs,useDeferredValue:bs,useTransition:bs,useMutableSource:bs,useSyncExternalStore:bs,useId:bs,unstable_isNewReconciler:!1},ca={readContext:wo,useCallback:function(e,t){return ws().memoizedState=[e,void 0===t?null:t],e},useContext:wo,useEffect:Hs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bs(4194308,4,Ks.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bs(4,2,e,t)},useMemo:function(e,t){var n=ws();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ws();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=na.bind(null,gs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ws().memoizedState=e},useState:Fs,useDebugValue:Js,useDeferredValue:function(e){return ws().memoizedState=e},useTransition:function(){var e=Fs(!1),t=e[0];return e=ea.bind(null,e[1]),ws().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=gs,i=ws();if(oo){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Mc)throw Error(s(349));0!==(30&ms)||xs(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Hs(Ps.bind(null,r,o,e),[e]),r.flags|=2048,zs(9,Ls.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ws(),t=Mc.identifierPrefix;if(oo){var n=Zi;t=":"+t+"R"+(n=(Xi&~(1<<32-at(Xi)-1)).toString(32)+n),0<(n=Ss++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Ts++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:wo,useCallback:Xs,useContext:wo,useEffect:Ws,useImperativeHandle:Qs,useInsertionEffect:Ys,useLayoutEffect:qs,useMemo:Zs,useReducer:Os,useRef:Vs,useState:function(){return Os(As)},useDebugValue:Js,useDeferredValue:function(e){return $s(Rs(),ys.memoizedState,e)},useTransition:function(){return[Os(As)[0],Rs().memoizedState]},useMutableSource:Ds,useSyncExternalStore:ks,useId:ta,unstable_isNewReconciler:!1},da={readContext:wo,useCallback:Xs,useContext:wo,useEffect:Ws,useImperativeHandle:Qs,useInsertionEffect:Ys,useLayoutEffect:qs,useMemo:Zs,useReducer:Ms,useRef:Vs,useState:function(){return Ms(As)},useDebugValue:Js,useDeferredValue:function(e){var t=Rs();return null===ys?t.memoizedState=e:$s(t,ys.memoizedState,e)},useTransition:function(){return[Ms(As)[0],Rs().memoizedState]},useMutableSource:Ds,useSyncExternalStore:ks,useId:ta,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function pa(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function ma(e,t,n){(n=Lo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yc||(Yc=!0,qc=r),pa(0,t)},n}function ga(e,t,n){(n=Lo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){pa(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){pa(0,t),"function"!==typeof r&&(null===Kc?Kc=new Set([this]):Kc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ya(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=wl.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function _a(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Lo(-1,1)).tag=2,Po(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var Ea=S.ReactCurrentOwner,Sa=!1;function Ta(e,t,n,r){t.child=null===e?$o(t,null,n,r):Zo(t,e.child,n,r)}function ba(e,t,n,r,i){n=n.render;var o=t.ref;return Co(t,i),r=Ns(e,t,n,r,o,i),n=Cs(),null===e||Sa?(oo&&n&&to(t),t.flags|=1,Ta(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ya(e,t,i))}function Ia(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||xl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Na(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Ya(e,t,i)}return t.flags|=1,(e=Ll(o,r)).ref=t.ref,e.return=t,t.child=e}function Na(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(Sa=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Ya(e,t,i);0!==(131072&e.flags)&&(Sa=!0)}}return Ra(e,t,n,r,i)}function Ca(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},wi(Lc,xc),xc|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,wi(Lc,xc),xc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,wi(Lc,xc),xc|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,wi(Lc,xc),xc|=r;return Ta(e,t,i,n),t.child}function wa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ra(e,t,n,r,i){var o=ki(n)?Mi:Ai.current;return o=Di(t,o),Co(t,i),n=Ns(e,t,n,r,o,i),r=Cs(),null===e||Sa?(oo&&r&&to(t),t.flags|=1,Ta(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ya(e,t,i))}function Aa(e,t,n,r,i){if(ki(n)){var o=!0;ji(t)}else o=!1;if(Co(t,i),null===t.stateNode)Wa(e,t),Wo(t,n,r),qo(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var c=s.context,l=n.contextType;"object"===typeof l&&null!==l?l=wo(l):l=Di(t,l=ki(n)?Mi:Ai.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate;u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||c!==l)&&Yo(t,s,r,l),Do=!1;var h=t.memoizedState;s.state=h,Fo(t,r,s,i),c=t.memoizedState,a!==r||h!==c||Oi.current||Do?("function"===typeof d&&(Bo(t,n,d,r),c=t.memoizedState),(a=Do||Ho(t,n,a,r,h,c,l))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=l,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,xo(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:vo(t.type,a),s.props=l,u=t.pendingProps,h=s.context,"object"===typeof(c=n.contextType)&&null!==c?c=wo(c):c=Di(t,c=ki(n)?Mi:Ai.current);var p=n.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==u||h!==c)&&Yo(t,s,r,c),Do=!1,h=t.memoizedState,s.state=h,Fo(t,r,s,i);var f=t.memoizedState;a!==u||h!==f||Oi.current||Do?("function"===typeof p&&(Bo(t,n,p,r),f=t.memoizedState),(l=Do||Ho(t,n,l,r,h,f,c)||!1)?(d||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,c),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,c)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=c,r=l):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Oa(e,t,n,r,o,i)}function Oa(e,t,n,r,i,o){wa(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Ui(t,n,!1),Ya(e,t,o);r=t.stateNode,Ea.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Zo(t,e.child,null,o),t.child=Zo(t,null,a,o)):Ta(e,t,a,o),t.memoizedState=r.state,i&&Ui(t,n,!0),t.child}function Ma(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),os(e,t.containerInfo)}function Da(e,t,n,r,i){return mo(),go(i),t.flags|=256,Ta(e,t,n,r),t.child}var ka,xa,La,Pa,ja={dehydrated:null,treeContext:null,retryLane:0};function Ua(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,o=ls.current,a=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),wi(ls,1&o),null===e)return uo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,a?(i=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=Ul(c,i,0,null),e=jl(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ua(n),t.memoizedState=ja,e):za(t,c));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Ul({mode:"visible",children:r.children},i,0,null),(o=jl(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Zo(t,e.child,null,a),t.child.memoizedState=Ua(a),t.memoizedState=ja,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,Va(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(c=0!==(a&e.childLanes),Sa||c){if(null!==(r=Mc)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Mo(e,i),il(r,e,i,-1))}return yl(),Va(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Al.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,io=di(i.nextSibling),ro=t,oo=!0,so=null,null!==e&&(Ki[Qi++]=Xi,Ki[Qi++]=Zi,Ki[Qi++]=Ji,Xi=e.id,Zi=e.overflow,Ji=t),t=za(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,o,n);if(a){a=i.fallback,c=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Ll(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Ll(r,a):(a=jl(a,c,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,c=null===(c=e.child.memoizedState)?Ua(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=ja,i}return e=(a=e.child).sibling,i=Ll(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function za(e,t){return(t=Ul({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&go(r),Zo(t,e.child,null,n),(e=za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),No(e.return,t,n)}function Ga(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ha(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ta(e,t,r.children,n),0!==(2&(r=ls.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(wi(ls,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ds(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ga(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ds(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ga(t,!0,n,null,o);break;case"together":Ga(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ya(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Uc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ll(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ll(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qa(e,t){if(!oo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(no(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return ki(t.type)&&xi(),Ka(t),null;case 3:return r=t.stateNode,ss(),Ci(Oi),Ci(Ai),hs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(po(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==so&&(cl(so),so=null))),xa(e,t),Ka(t),null;case 5:cs(t);var i=is(rs.current);if(n=t.type,null!==e&&null!=t.stateNode)La(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ka(t),null}if(e=is(ts.current),po(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[pi]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Pr.length;i++)zr(Pr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":X(r,o),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},zr("invalid",r);break;case"textarea":oe(r,o),zr("invalid",r)}for(var a in _e(n,o),i=null,o)if(o.hasOwnProperty(a)){var l=o[a];"children"===a?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,l,e),i=["children",""+l]):c.hasOwnProperty(a)&&null!=l&&"onScroll"===a&&zr("scroll",r)}switch(n){case"input":q(r),ee(r,o,!0);break;case"textarea":q(r),ae(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=ei)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{a=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ce(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),"select"===n&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[pi]=t,e[fi]=r,ka(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ee(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Pr.length;i++)zr(Pr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":X(e,r),i=J(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),zr("invalid",e);break;case"textarea":oe(e,r),i=ie(e,r),zr("invalid",e)}for(o in _e(n,i),l=i)if(l.hasOwnProperty(o)){var d=l[o];"style"===o?ye(e,d):"dangerouslySetInnerHTML"===o?null!=(d=d?d.__html:void 0)&&he(e,d):"children"===o?"string"===typeof d?("textarea"!==n||""!==d)&&pe(e,d):"number"===typeof d&&pe(e,""+d):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(c.hasOwnProperty(o)?null!=d&&"onScroll"===o&&zr("scroll",e):null!=d&&E(e,o,d,a))}switch(n){case"input":q(e),ee(e,r,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?re(e,!!r.multiple,o,!1):null!=r.defaultValue&&re(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=ei)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)Pa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=is(rs.current),is(ts.current),po(t)){if(r=t.stateNode,n=t.memoizedProps,r[pi]=t,(o=r.nodeValue!==n)&&null!==(e=ro))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pi]=t,t.stateNode=r}return Ka(t),null;case 13:if(Ci(ls),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(oo&&null!==io&&0!==(1&t.mode)&&0===(128&t.flags))fo(),mo(),t.flags|=98560,o=!1;else if(o=po(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[pi]=t}else mo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),o=!1}else null!==so&&(cl(so),so=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ls.current)?0===Pc&&(Pc=3):yl())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return ss(),xa(e,t),null===e&&Gr(t.stateNode.containerInfo),Ka(t),null;case 10:return Io(t.type._context),Ka(t),null;case 19:if(Ci(ls),null===(o=t.memoizedState))return Ka(t),null;if(r=0!==(128&t.flags),null===(a=o.rendering))if(r)qa(o,!1);else{if(0!==Pc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=ds(e))){for(t.flags|=128,qa(o,!1),null!==(r=a.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(a=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return wi(ls,1&ls.current|2),t.child}e=e.sibling}null!==o.tail&&Ze()>Hc&&(t.flags|=128,r=!0,qa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ds(a))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!a.alternate&&!oo)return Ka(t),null}else 2*Ze()-o.renderingStartTime>Hc&&1073741824!==n&&(t.flags|=128,r=!0,qa(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=o.last)?n.sibling=a:t.child=a,o.last=a)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ze(),t.sibling=null,n=ls.current,wi(ls,r?1&n|2:1&n),t):(Ka(t),null);case 22:case 23:return pl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&xc)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ja(e,t){switch(no(t),t.tag){case 1:return ki(t.type)&&xi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ss(),Ci(Oi),Ci(Ai),hs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return cs(t),null;case 13:if(Ci(ls),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));mo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(ls),null;case 4:return ss(),null;case 10:return Io(t.type._context),null;case 22:case 23:return pl(),null;default:return null}}ka=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},xa=function(){},La=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,is(ts.current);var o,s=null;switch(n){case"input":i=J(e,i),r=J(e,r),s=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),s=[];break;case"textarea":i=ie(e,i),r=ie(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=ei)}for(d in _e(n,r),n=null,i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var a=i[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(c.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var l=r[d];if(a=null!=i?i[d]:void 0,r.hasOwnProperty(d)&&l!==a&&(null!=l||null!=a))if("style"===d)if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(d,n)),n=l;else"dangerouslySetInnerHTML"===d?(l=l?l.__html:void 0,a=a?a.__html:void 0,null!=l&&a!==l&&(s=s||[]).push(d,l)):"children"===d?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(d,""+l):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(c.hasOwnProperty(d)?(null!=l&&"onScroll"===d&&zr("scroll",e),s||a===l||(s=[])):(s=s||[]).push(d,l))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Pa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xa=!1,Za=!1,$a="function"===typeof WeakSet?WeakSet:Set,ec=null;function tc(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cl(e,t,r)}else n.current=null}function nc(e,t,n){try{n()}catch(r){Cl(e,t,r)}}var rc=!1;function ic(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&nc(t,n,o)}i=i.next}while(i!==r)}}function oc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ac(e){var t=e.alternate;null!==t&&(e.alternate=null,ac(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pi],delete t[fi],delete t[gi],delete t[yi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cc(e){return 5===e.tag||3===e.tag||4===e.tag}function lc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||cc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function dc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ei));else if(4!==r&&null!==(e=e.child))for(dc(e,t,n),e=e.sibling;null!==e;)dc(e,t,n),e=e.sibling}function uc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(uc(e,t,n),e=e.sibling;null!==e;)uc(e,t,n),e=e.sibling}var hc=null,pc=!1;function fc(e,t,n){for(n=n.child;null!==n;)mc(e,t,n),n=n.sibling}function mc(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(ot,n)}catch(a){}switch(n.tag){case 5:Za||tc(n,t);case 6:var r=hc,i=pc;hc=null,fc(e,t,n),pc=i,null!==(hc=r)&&(pc?(e=hc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hc.removeChild(n.stateNode));break;case 18:null!==hc&&(pc?(e=hc,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Gt(e)):li(hc,n.stateNode));break;case 4:r=hc,i=pc,hc=n.stateNode.containerInfo,pc=!0,fc(e,t,n),hc=r,pc=i;break;case 0:case 11:case 14:case 15:if(!Za&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&nc(n,t,s),i=i.next}while(i!==r)}fc(e,t,n);break;case 1:if(!Za&&(tc(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Cl(n,t,a)}fc(e,t,n);break;case 21:fc(e,t,n);break;case 22:1&n.mode?(Za=(r=Za)||null!==n.memoizedState,fc(e,t,n),Za=r):fc(e,t,n);break;default:fc(e,t,n)}}function gc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $a),t.forEach((function(t){var r=Ol.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function yc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:hc=c.stateNode,pc=!1;break e;case 3:case 4:hc=c.stateNode.containerInfo,pc=!0;break e}c=c.return}if(null===hc)throw Error(s(160));mc(o,a,i),hc=null,pc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(d){Cl(i,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vc(t,e),t=t.sibling}function vc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yc(t,e),_c(e),4&r){try{ic(3,e,e.return),oc(3,e)}catch(g){Cl(e,e.return,g)}try{ic(5,e,e.return)}catch(g){Cl(e,e.return,g)}}break;case 1:yc(t,e),_c(e),512&r&&null!==n&&tc(n,n.return);break;case 5:if(yc(t,e),_c(e),512&r&&null!==n&&tc(n,n.return),32&e.flags){var i=e.stateNode;try{pe(i,"")}catch(g){Cl(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===o.type&&null!=o.name&&Z(i,o),Ee(c,a);var d=Ee(c,o);for(a=0;a<l.length;a+=2){var u=l[a],h=l[a+1];"style"===u?ye(i,h):"dangerouslySetInnerHTML"===u?he(i,h):"children"===u?pe(i,h):E(i,u,h,d)}switch(c){case"input":$(i,o);break;case"textarea":se(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?re(i,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?re(i,!!o.multiple,o.defaultValue,!0):re(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Cl(e,e.return,g)}}break;case 6:if(yc(t,e),_c(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Cl(e,e.return,g)}}break;case 3:if(yc(t,e),_c(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Gt(t.containerInfo)}catch(g){Cl(e,e.return,g)}break;case 4:default:yc(t,e),_c(e);break;case 13:yc(t,e),_c(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Gc=Ze())),4&r&&gc(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Za=(d=Za)||u,yc(t,e),Za=d):yc(t,e),_c(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(ec=e,u=e.child;null!==u;){for(h=ec=u;null!==ec;){switch(f=(p=ec).child,p.tag){case 0:case 11:case 14:case 15:ic(4,p,p.return);break;case 1:tc(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cl(r,n,g)}}break;case 5:tc(p,p.return);break;case 22:if(null!==p.memoizedState){bc(h);continue}}null!==f?(f.return=p,ec=f):bc(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{i=h.stateNode,d?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=h.stateNode,a=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=ge("display",a))}catch(g){Cl(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Cl(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:yc(t,e),_c(e),4&r&&gc(e);case 21:}}function _c(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(cc(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(pe(i,""),r.flags&=-33),uc(e,lc(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;dc(e,lc(e),o);break;default:throw Error(s(161))}}catch(a){Cl(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ec(e,t,n){ec=e,Sc(e,t,n)}function Sc(e,t,n){for(var r=0!==(1&e.mode);null!==ec;){var i=ec,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Xa;if(!s){var a=i.alternate,c=null!==a&&null!==a.memoizedState||Za;a=Xa;var l=Za;if(Xa=s,(Za=c)&&!l)for(ec=i;null!==ec;)c=(s=ec).child,22===s.tag&&null!==s.memoizedState?Ic(i):null!==c?(c.return=s,ec=c):Ic(i);for(;null!==o;)ec=o,Sc(o,t,n),o=o.sibling;ec=i,Xa=a,Za=l}Tc(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,ec=o):Tc(e)}}function Tc(e){for(;null!==ec;){var t=ec;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Za||oc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Za)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:vo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&zo(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zo(t,a,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Gt(h)}}}break;default:throw Error(s(163))}Za||512&t.flags&&sc(t)}catch(p){Cl(t,t.return,p)}}if(t===e){ec=null;break}if(null!==(n=t.sibling)){n.return=t.return,ec=n;break}ec=t.return}}function bc(e){for(;null!==ec;){var t=ec;if(t===e){ec=null;break}var n=t.sibling;if(null!==n){n.return=t.return,ec=n;break}ec=t.return}}function Ic(e){for(;null!==ec;){var t=ec;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{oc(4,t)}catch(c){Cl(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){Cl(t,i,c)}}var o=t.return;try{sc(t)}catch(c){Cl(t,o,c)}break;case 5:var s=t.return;try{sc(t)}catch(c){Cl(t,s,c)}}}catch(c){Cl(t,t.return,c)}if(t===e){ec=null;break}var a=t.sibling;if(null!==a){a.return=t.return,ec=a;break}ec=t.return}}var Nc,Cc=Math.ceil,wc=S.ReactCurrentDispatcher,Rc=S.ReactCurrentOwner,Ac=S.ReactCurrentBatchConfig,Oc=0,Mc=null,Dc=null,kc=0,xc=0,Lc=Ni(0),Pc=0,jc=null,Uc=0,Fc=0,zc=0,Vc=null,Bc=null,Gc=0,Hc=1/0,Wc=null,Yc=!1,qc=null,Kc=null,Qc=!1,Jc=null,Xc=0,Zc=0,$c=null,el=-1,tl=0;function nl(){return 0!==(6&Oc)?Ze():-1!==el?el:el=Ze()}function rl(e){return 0===(1&e.mode)?1:0!==(2&Oc)&&0!==kc?kc&-kc:null!==yo.transition?(0===tl&&(tl=gt()),tl):0!==(e=Et)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function il(e,t,n,r){if(50<Zc)throw Zc=0,$c=null,Error(s(185));vt(e,n,r),0!==(2&Oc)&&e===Mc||(e===Mc&&(0===(2&Oc)&&(Fc|=n),4===Pc&&ll(e,kc)),ol(e,r),1===n&&0===Oc&&0===(1&t.mode)&&(Hc=Ze()+500,zi&&Gi()))}function ol(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-at(o),a=1<<s,c=i[s];-1===c?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):c<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=pt(e,e===Mc?kc:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){zi=!0,Bi(e)}(dl.bind(null,e)):Bi(dl.bind(null,e)),ai((function(){0===(6&Oc)&&Gi()})),n=null;else{switch(St(r)){case 1:n=et;break;case 4:n=tt;break;case 16:default:n=nt;break;case 536870912:n=it}n=Ml(n,sl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sl(e,t){if(el=-1,tl=0,0!==(6&Oc))throw Error(s(327));var n=e.callbackNode;if(Il()&&e.callbackNode!==n)return null;var r=pt(e,e===Mc?kc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vl(e,r);else{t=r;var i=Oc;Oc|=2;var o=gl();for(Mc===e&&kc===t||(Wc=null,Hc=Ze()+500,fl(e,t));;)try{El();break}catch(c){ml(e,c)}bo(),wc.current=o,Oc=i,null!==Dc?t=0:(Mc=null,kc=0,t=Pc)}if(0!==t){if(2===t&&(0!==(i=mt(e))&&(r=i,t=al(e,i))),1===t)throw n=jc,fl(e,0),ll(e,r),ol(e,Ze()),n;if(6===t)ll(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!cr(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vl(e,r))&&(0!==(o=mt(e))&&(r=o,t=al(e,o))),1===t))throw n=jc,fl(e,0),ll(e,r),ol(e,Ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:bl(e,Bc,Wc);break;case 3:if(ll(e,r),(130023424&r)===r&&10<(t=Gc+500-Ze())){if(0!==pt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){nl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ii(bl.bind(null,e,Bc,Wc),t);break}bl(e,Bc,Wc);break;case 4:if(ll(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-at(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cc(r/1960))-r)){e.timeoutHandle=ii(bl.bind(null,e,Bc,Wc),r);break}bl(e,Bc,Wc);break;default:throw Error(s(329))}}}return ol(e,Ze()),e.callbackNode===n?sl.bind(null,e):null}function al(e,t){var n=Vc;return e.current.memoizedState.isDehydrated&&(fl(e,t).flags|=256),2!==(e=vl(e,t))&&(t=Bc,Bc=n,null!==t&&cl(t)),e}function cl(e){null===Bc?Bc=e:Bc.push.apply(Bc,e)}function ll(e,t){for(t&=~zc,t&=~Fc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function dl(e){if(0!==(6&Oc))throw Error(s(327));Il();var t=pt(e,0);if(0===(1&t))return ol(e,Ze()),null;var n=vl(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=al(e,r))}if(1===n)throw n=jc,fl(e,0),ll(e,t),ol(e,Ze()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bl(e,Bc,Wc),ol(e,Ze()),null}function ul(e,t){var n=Oc;Oc|=1;try{return e(t)}finally{0===(Oc=n)&&(Hc=Ze()+500,zi&&Gi())}}function hl(e){null!==Jc&&0===Jc.tag&&0===(6&Oc)&&Il();var t=Oc;Oc|=1;var n=Ac.transition,r=Et;try{if(Ac.transition=null,Et=1,e)return e()}finally{Et=r,Ac.transition=n,0===(6&(Oc=t))&&Gi()}}function pl(){xc=Lc.current,Ci(Lc)}function fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oi(n)),null!==Dc)for(n=Dc.return;null!==n;){var r=n;switch(no(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&xi();break;case 3:ss(),Ci(Oi),Ci(Ai),hs();break;case 5:cs(r);break;case 4:ss();break;case 13:case 19:Ci(ls);break;case 10:Io(r.type._context);break;case 22:case 23:pl()}n=n.return}if(Mc=e,Dc=e=Ll(e.current,null),kc=xc=t,Pc=0,jc=null,zc=Fc=Uc=0,Bc=Vc=null,null!==Ro){for(t=0;t<Ro.length;t++)if(null!==(r=(n=Ro[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Ro=null}return e}function ml(e,t){for(;;){var n=Dc;try{if(bo(),ps.current=aa,_s){for(var r=gs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}_s=!1}if(ms=0,vs=ys=gs=null,Es=!1,Ss=0,Rc.current=null,null===n||null===n.return){Pc=1,jc=t,Dc=null;break}e:{var o=e,a=n.return,c=n,l=t;if(t=kc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var d=l,u=c,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=va(a);if(null!==f){f.flags&=-257,_a(f,a,c,0,t),1&f.mode&&ya(o,d,t),l=d;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){ya(o,d,t),yl();break e}l=Error(s(426))}else if(oo&&1&c.mode){var y=va(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),_a(y,a,c,0,t),go(ua(l,c));break e}}o=l=ua(l,c),4!==Pc&&(Pc=2),null===Vc?Vc=[o]:Vc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Uo(o,ma(0,l,t));break e;case 1:c=l;var v=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Kc||!Kc.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,Uo(o,ga(o,c,t));break e}}o=o.return}while(null!==o)}Tl(n)}catch(E){t=E,Dc===n&&null!==n&&(Dc=n=n.return);continue}break}}function gl(){var e=wc.current;return wc.current=aa,null===e?aa:e}function yl(){0!==Pc&&3!==Pc&&2!==Pc||(Pc=4),null===Mc||0===(268435455&Uc)&&0===(268435455&Fc)||ll(Mc,kc)}function vl(t,n){var r=Oc;Oc|=2;var i=gl();for(Mc===t&&kc===n||(Wc=null,fl(t,n));;)try{_l();break}catch(e){ml(t,e)}if(bo(),Oc=r,wc.current=i,null!==Dc)throw Error(s(261));return Mc=null,kc=0,Pc}function _l(){for(;null!==Dc;)Sl(Dc)}function El(){for(;null!==Dc&&!Je();)Sl(Dc)}function Sl(e){var t=Nc(e.alternate,e,xc);e.memoizedProps=e.pendingProps,null===t?Tl(e):Dc=t,Rc.current=null}function Tl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,xc)))return void(Dc=n)}else{if(null!==(n=Ja(n,t)))return n.flags&=32767,void(Dc=n);if(null===e)return Pc=6,void(Dc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dc=t);Dc=t=e}while(null!==t);0===Pc&&(Pc=5)}function bl(e,t,n){var r=Et,i=Ac.transition;try{Ac.transition=null,Et=1,function(e,t,n,r){do{Il()}while(null!==Jc);if(0!==(6&Oc))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,o),e===Mc&&(Dc=Mc=null,kc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qc||(Qc=!0,Ml(nt,(function(){return Il(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ac.transition,Ac.transition=null;var a=Et;Et=1;var c=Oc;Oc|=4,Rc.current=null,function(e,t){if(ti=Wt,fr(e=pr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(S){n=null;break e}var a=0,c=-1,l=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(c=a+i),h!==o||0!==r&&3!==h.nodeType||(l=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++d===i&&(c=a),p===o&&++u===r&&(l=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ni={focusedElem:e,selectionRange:n},Wt=!1,ec=t;null!==ec;)if(e=(t=ec).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,ec=e;else for(;null!==ec;){t=ec;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,_=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:vo(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var E=t.stateNode.containerInfo;1===E.nodeType?E.textContent="":9===E.nodeType&&E.documentElement&&E.removeChild(E.documentElement);break;default:throw Error(s(163))}}catch(S){Cl(t,t.return,S)}if(null!==(e=t.sibling)){e.return=t.return,ec=e;break}ec=t.return}m=rc,rc=!1}(e,n),vc(n,e),mr(ni),Wt=!!ti,ni=ti=null,e.current=n,Ec(n,e,i),Xe(),Oc=c,Et=a,Ac.transition=o}else e.current=n;if(Qc&&(Qc=!1,Jc=e,Xc=i),o=e.pendingLanes,0===o&&(Kc=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ol(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Yc)throw Yc=!1,e=qc,qc=null,e;0!==(1&Xc)&&0!==e.tag&&Il(),o=e.pendingLanes,0!==(1&o)?e===$c?Zc++:(Zc=0,$c=e):Zc=0,Gi()}(e,t,n,r)}finally{Ac.transition=i,Et=r}return null}function Il(){if(null!==Jc){var e=St(Xc),t=Ac.transition,n=Et;try{if(Ac.transition=null,Et=16>e?16:e,null===Jc)var r=!1;else{if(e=Jc,Jc=null,Xc=0,0!==(6&Oc))throw Error(s(331));var i=Oc;for(Oc|=4,ec=e.current;null!==ec;){var o=ec,a=o.child;if(0!==(16&ec.flags)){var c=o.deletions;if(null!==c){for(var l=0;l<c.length;l++){var d=c[l];for(ec=d;null!==ec;){var u=ec;switch(u.tag){case 0:case 11:case 15:ic(8,u,o)}var h=u.child;if(null!==h)h.return=u,ec=h;else for(;null!==ec;){var p=(u=ec).sibling,f=u.return;if(ac(u),u===d){ec=null;break}if(null!==p){p.return=f,ec=p;break}ec=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}ec=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,ec=a;else e:for(;null!==ec;){if(0!==(2048&(o=ec).flags))switch(o.tag){case 0:case 11:case 15:ic(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,ec=v;break e}ec=o.return}}var _=e.current;for(ec=_;null!==ec;){var E=(a=ec).child;if(0!==(2064&a.subtreeFlags)&&null!==E)E.return=a,ec=E;else e:for(a=_;null!==ec;){if(0!==(2048&(c=ec).flags))try{switch(c.tag){case 0:case 11:case 15:oc(9,c)}}catch(T){Cl(c,c.return,T)}if(c===a){ec=null;break e}var S=c.sibling;if(null!==S){S.return=c.return,ec=S;break e}ec=c.return}}if(Oc=i,Gi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(ot,e)}catch(T){}r=!0}return r}finally{Et=n,Ac.transition=t}}return!1}function Nl(e,t,n){e=Po(e,t=ma(0,t=ua(n,t),1),1),t=nl(),null!==e&&(vt(e,1,t),ol(e,t))}function Cl(e,t,n){if(3===e.tag)Nl(e,e,n);else for(;null!==t;){if(3===t.tag){Nl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kc||!Kc.has(r))){t=Po(t,e=ga(t,e=ua(n,e),1),1),e=nl(),null!==t&&(vt(t,1,e),ol(t,e));break}}t=t.return}}function wl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=nl(),e.pingedLanes|=e.suspendedLanes&n,Mc===e&&(kc&n)===n&&(4===Pc||3===Pc&&(130023424&kc)===kc&&500>Ze()-Gc?fl(e,0):zc|=n),ol(e,t)}function Rl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=nl();null!==(e=Mo(e,t))&&(vt(e,t,n),ol(e,n))}function Al(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Rl(e,n)}function Ol(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Rl(e,n)}function Ml(e,t){return Ke(e,t)}function Dl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kl(e,t,n,r){return new Dl(e,t,n,r)}function xl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ll(e,t){var n=e.alternate;return null===n?((n=kl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pl(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)xl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case I:return jl(n.children,i,o,t);case N:a=8,i|=8;break;case C:return(e=kl(12,n,t,2|i)).elementType=C,e.lanes=o,e;case O:return(e=kl(13,n,t,i)).elementType=O,e.lanes=o,e;case M:return(e=kl(19,n,t,i)).elementType=M,e.lanes=o,e;case x:return Ul(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:a=10;break e;case R:a=9;break e;case A:a=11;break e;case D:a=14;break e;case k:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=kl(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function jl(e,t,n,r){return(e=kl(7,e,r,t)).lanes=n,e}function Ul(e,t,n,r){return(e=kl(22,e,r,t)).elementType=x,e.lanes=n,e.stateNode={isHidden:!1},e}function Fl(e,t,n){return(e=kl(6,e,null,t)).lanes=n,e}function zl(e,t,n){return(t=kl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bl(e,t,n,r,i,o,s,a,c){return e=new Vl(e,t,n,a,c),1===t?(t=1,!0===o&&(t|=8)):t=0,o=kl(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ko(o),e}function Gl(e){if(!e)return Ri;e:{if(Ge(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ki(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(ki(n))return Pi(e,n,t)}return t}function Hl(e,t,n,r,i,o,s,a,c){return(e=Bl(n,r,!0,e,0,o,0,a,c)).context=Gl(null),n=e.current,(o=Lo(r=nl(),i=rl(n))).callback=void 0!==t&&null!==t?t:null,Po(n,o,i),e.current.lanes=i,vt(e,i,r),ol(e,r),e}function Wl(e,t,n,r){var i=t.current,o=nl(),s=rl(i);return n=Gl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Lo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Po(i,t,s))&&(il(e,i,s,o),jo(e,i,s)),s}function Yl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ql(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kl(e,t){ql(e,t),(e=e.alternate)&&ql(e,t)}Nc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Oi.current)Sa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Sa=!1,function(e,t,n){switch(t.tag){case 3:Ma(t),mo();break;case 5:as(t);break;case 1:ki(t.type)&&ji(t);break;case 4:os(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;wi(_o,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(wi(ls,1&ls.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(wi(ls,1&ls.current),null!==(e=Ya(e,t,n))?e.sibling:null);wi(ls,1&ls.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ha(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),wi(ls,ls.current),r)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,n)}return Ya(e,t,n)}(e,t,n);Sa=0!==(131072&e.flags)}else Sa=!1,oo&&0!==(1048576&t.flags)&&eo(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wa(e,t),e=t.pendingProps;var i=Di(t,Ai.current);Co(t,n),i=Ns(null,t,r,e,i,n);var o=Cs();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ki(r)?(o=!0,ji(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ko(t),i.updater=Go,t.stateNode=i,i._reactInternals=t,qo(t,r,e,n),t=Oa(null,t,r,!0,o,n)):(t.tag=0,oo&&o&&to(t),Ta(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return xl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===D)return 14}return 2}(r),e=vo(r,e),i){case 0:t=Ra(null,t,r,e,n);break e;case 1:t=Aa(null,t,r,e,n);break e;case 11:t=ba(null,t,r,e,n);break e;case 14:t=Ia(null,t,r,vo(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ra(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Aa(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 3:e:{if(Ma(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,xo(e,t),Fo(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Da(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Da(e,t,r,n,i=ua(Error(s(424)),t));break e}for(io=di(t.stateNode.containerInfo.firstChild),ro=t,oo=!0,so=null,n=$o(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(mo(),r===i){t=Ya(e,t,n);break e}Ta(e,t,r,n)}t=t.child}return t;case 5:return as(t),null===e&&uo(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ri(r,i)?a=null:null!==o&&ri(r,o)&&(t.flags|=32),wa(e,t),Ta(e,t,a,n),t.child;case 6:return null===e&&uo(t),null;case 13:return Fa(e,t,n);case 4:return os(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Zo(t,null,r,n):Ta(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ba(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 7:return Ta(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ta(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,wi(_o,r._currentValue),r._currentValue=a,null!==o)if(cr(o.value,a)){if(o.children===i.children&&!Oi.current){t=Ya(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){a=o.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Lo(-1,n&-n)).tag=2;var d=o.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),d.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),No(o.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),No(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Ta(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Co(t,n),r=r(i=wo(i)),t.flags|=1,Ta(e,t,r,n),t.child;case 14:return i=vo(r=t.type,t.pendingProps),Ia(e,t,r,i=vo(r.type,i),n);case 15:return Na(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vo(r,i),Wa(e,t),t.tag=1,ki(r)?(e=!0,ji(t)):e=!1,Co(t,n),Wo(t,r,i),qo(t,r,i,n),Oa(null,t,r,!0,e,n);case 19:return Ha(e,t,n);case 22:return Ca(e,t,n)}throw Error(s(156,t.tag))};var Ql="function"===typeof reportError?reportError:function(e){console.error(e)};function Jl(e){this._internalRoot=e}function Xl(e){this._internalRoot=e}function Zl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ed(){}function td(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Yl(s);a.call(e)}}Wl(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Yl(s);o.call(e)}}var s=Hl(t,r,e,0,null,!1,0,"",ed);return e._reactRootContainer=s,e[mi]=s.current,Gr(8===e.nodeType?e.parentNode:e),hl(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Yl(c);a.call(e)}}var c=Bl(e,0,!1,null,0,!1,0,"",ed);return e._reactRootContainer=c,e[mi]=c.current,Gr(8===e.nodeType?e.parentNode:e),hl((function(){Wl(t,c,n,r)})),c}(n,t,e,i,r);return Yl(s)}Xl.prototype.render=Jl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wl(e,t,null,null)},Xl.prototype.unmount=Jl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hl((function(){Wl(null,e,null,null)})),t[mi]=null}},Xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xt.length&&0!==t&&t<xt[n].priority;n++);xt.splice(n,0,e),0===n&&Ut(e)}},Tt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(_t(t,1|n),ol(t,Ze()),0===(6&Oc)&&(Hc=Ze()+500,Gi()))}break;case 13:hl((function(){var t=Mo(e,1);if(null!==t){var n=nl();il(t,e,1,n)}})),Kl(e,1)}},bt=function(e){if(13===e.tag){var t=Mo(e,134217728);if(null!==t)il(t,e,134217728,nl());Kl(e,134217728)}},It=function(e){if(13===e.tag){var t=rl(e),n=Mo(e,t);if(null!==n)il(n,e,t,nl());Kl(e,t)}},Nt=function(){return Et},Ct=function(e,t){var n=Et;try{return Et=e,t()}finally{Et=n}},be=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ti(r);if(!i)throw Error(s(90));K(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&re(e,!!n.multiple,t,!1)}},Ae=ul,Oe=hl;var nd={usingClientEntryPoint:!1,Events:[Ei,Si,Ti,we,Re,ul]},rd={findFiberByHostInstance:_i,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},id={bundleType:rd.bundleType,version:rd.version,rendererPackageName:rd.rendererPackageName,rendererConfig:rd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ye(e))?null:e.stateNode},findFiberByHostInstance:rd.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!od.isDisabled&&od.supportsFiber)try{ot=od.inject(id),st=od}catch(ue){}}n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nd,n.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zl(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},n.createRoot=function(e,t){if(!Zl(e))throw Error(s(299));var n=!1,r="",i=Ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bl(e,1,!1,null,0,n,0,r,i),e[mi]=t.current,Gr(8===e.nodeType?e.parentNode:e),new Jl(t)},n.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ye(t))?null:e.stateNode},n.flushSync=function(e){return hl(e)},n.hydrate=function(e,t,n){if(!$l(t))throw Error(s(200));return td(null,e,t,!0,n)},n.hydrateRoot=function(e,t,n){if(!Zl(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Hl(t,null,e,1,null!=n?n:null,i,0,o,a),e[mi]=t.current,Gr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xl(t)},n.render=function(e,t,n){if(!$l(t))throw Error(s(200));return td(null,e,t,!1,n)},n.unmountComponentAtNode=function(e){if(!$l(e))throw Error(s(40));return!!e._reactRootContainer&&(hl((function(){td(null,null,e,!1,(function(){e._reactRootContainer=null,e[mi]=null}))})),!0)},n.unstable_batchedUpdates=ul,n.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$l(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return td(e,t,n,!1,r)},n.version="18.2.0-next-9e3b772b8-20220608"},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},7251:function(e,t,n){var r,i,o;i=[t,n(75)],r=function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(t);function r(e){return e&&e.__esModule?e:{default:e}}e.default=n.default},void 0===(o="function"===typeof r?r.apply(t,i):r)||(e.exports=o)},75:function(t,n,r){var i,o,s;o=[n,r(5043),r(5173)],i=function(t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setHasSupportToCaptureOption=f;var i=s(n),o=s(r);function s(e){return e&&e.__esModule?e:{default:e}}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function c(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=!1;function f(e){p=e}try{addEventListener("test",null,Object.defineProperty({},"capture",{get:function(){f(!0)}}))}catch(e){}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{capture:!0};return p?e:e.capture}function g(e){if("touches"in e){var t=e.touches[0];return{x:t.pageX,y:t.pageY}}return{x:e.screenX,y:e.screenY}}var y=function(e){function t(){var e;l(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return o._handleSwipeStart=o._handleSwipeStart.bind(o),o._handleSwipeMove=o._handleSwipeMove.bind(o),o._handleSwipeEnd=o._handleSwipeEnd.bind(o),o._onMouseDown=o._onMouseDown.bind(o),o._onMouseMove=o._onMouseMove.bind(o),o._onMouseUp=o._onMouseUp.bind(o),o._setSwiperRef=o._setSwiperRef.bind(o),o}return h(t,e),d(t,[{key:"componentDidMount",value:function(){this.swiper&&this.swiper.addEventListener("touchmove",this._handleSwipeMove,m({capture:!0,passive:!1}))}},{key:"componentWillUnmount",value:function(){this.swiper&&this.swiper.removeEventListener("touchmove",this._handleSwipeMove,m({capture:!0,passive:!1}))}},{key:"_onMouseDown",value:function(e){this.props.allowMouseEvents&&(this.mouseDown=!0,document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("mousemove",this._onMouseMove),this._handleSwipeStart(e))}},{key:"_onMouseMove",value:function(e){this.mouseDown&&this._handleSwipeMove(e)}},{key:"_onMouseUp",value:function(e){this.mouseDown=!1,document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("mousemove",this._onMouseMove),this._handleSwipeEnd(e)}},{key:"_handleSwipeStart",value:function(e){var t=g(e),n=t.x,r=t.y;this.moveStart={x:n,y:r},this.props.onSwipeStart(e)}},{key:"_handleSwipeMove",value:function(e){if(this.moveStart){var t=g(e),n=t.x,r=t.y,i=n-this.moveStart.x,o=r-this.moveStart.y;this.moving=!0,this.props.onSwipeMove({x:i,y:o},e)&&e.cancelable&&e.preventDefault(),this.movePosition={deltaX:i,deltaY:o}}}},{key:"_handleSwipeEnd",value:function(e){this.props.onSwipeEnd(e);var t=this.props.tolerance;this.moving&&this.movePosition&&(this.movePosition.deltaX<-t?this.props.onSwipeLeft(1,e):this.movePosition.deltaX>t&&this.props.onSwipeRight(1,e),this.movePosition.deltaY<-t?this.props.onSwipeUp(1,e):this.movePosition.deltaY>t&&this.props.onSwipeDown(1,e)),this.moveStart=null,this.moving=!1,this.movePosition=null}},{key:"_setSwiperRef",value:function(e){this.swiper=e,this.props.innerRef(e)}},{key:"render",value:function(){var e=this.props,t=(e.tagName,e.className),n=e.style,r=e.children,o=(e.allowMouseEvents,e.onSwipeUp,e.onSwipeDown,e.onSwipeLeft,e.onSwipeRight,e.onSwipeStart,e.onSwipeMove,e.onSwipeEnd,e.innerRef,e.tolerance,c(e,["tagName","className","style","children","allowMouseEvents","onSwipeUp","onSwipeDown","onSwipeLeft","onSwipeRight","onSwipeStart","onSwipeMove","onSwipeEnd","innerRef","tolerance"]));return i.default.createElement(this.props.tagName,a({ref:this._setSwiperRef,onMouseDown:this._onMouseDown,onTouchStart:this._handleSwipeStart,onTouchEnd:this._handleSwipeEnd,className:t,style:n},o),r)}}]),t}(n.Component);y.displayName="ReactSwipe",y.propTypes={tagName:o.default.string,className:o.default.string,style:o.default.object,children:o.default.node,allowMouseEvents:o.default.bool,onSwipeUp:o.default.func,onSwipeDown:o.default.func,onSwipeLeft:o.default.func,onSwipeRight:o.default.func,onSwipeStart:o.default.func,onSwipeMove:o.default.func,onSwipeEnd:o.default.func,innerRef:o.default.func,tolerance:o.default.number.isRequired},y.defaultProps={tagName:"div",allowMouseEvents:!1,onSwipeUp:function(){},onSwipeDown:function(){},onSwipeLeft:function(){},onSwipeRight:function(){},onSwipeStart:function(){},onSwipeMove:function(){},onSwipeEnd:function(){},innerRef:function(){},tolerance:0},t.default=y},void 0===(s="function"===typeof i?i.apply(n,o):i)||(t.exports=s)},5082:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case a:case s:case h:case p:return e;default:switch(e=e&&e.$$typeof){case d:case l:case u:case m:case f:case c:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.ForwardRef=u,t.Memo=f},2086:(e,t,n)=>{"use strict";e.exports=n(5082)},2157:function(e,t,n){var r;r=e=>(()=>{var t={703:(e,t,n)=>{"use strict";var r=n(414);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},697:(e,t,n)=>{e.exports=n(703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},98:t=>{"use strict";t.exports=e}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{"use strict";r.r(i),r.d(i,{default:()=>E});var e=r(98),t=r.n(e),n=r(697),o=r.n(n);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}var a=function(e){var n=e.pageClassName,r=e.pageLinkClassName,i=e.page,o=e.selected,a=e.activeClassName,c=e.activeLinkClassName,l=e.getEventListener,d=e.pageSelectedHandler,u=e.href,h=e.extraAriaContext,p=e.pageLabelBuilder,f=e.rel,m=e.ariaLabel||"Page "+i+(h?" "+h:""),g=null;return o&&(g="page",m=e.ariaLabel||"Page "+i+" is your current page",n=void 0!==n?n+" "+a:a,void 0!==r?void 0!==c&&(r=r+" "+c):r=c),t().createElement("li",{className:n},t().createElement("a",s({rel:f,role:u?void 0:"button",className:r,href:u,tabIndex:o?"-1":"0","aria-label":m,"aria-current":g,onKeyPress:d},l(d)),p(i)))};a.propTypes={pageSelectedHandler:o().func.isRequired,selected:o().bool.isRequired,pageClassName:o().string,pageLinkClassName:o().string,activeClassName:o().string,activeLinkClassName:o().string,extraAriaContext:o().string,href:o().string,ariaLabel:o().string,page:o().number.isRequired,getEventListener:o().func.isRequired,pageLabelBuilder:o().func.isRequired,rel:o().string};const c=a;function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}var d=function(e){var n=e.breakLabel,r=e.breakAriaLabel,i=e.breakClassName,o=e.breakLinkClassName,s=e.breakHandler,a=e.getEventListener,c=i||"break";return t().createElement("li",{className:c},t().createElement("a",l({className:o,role:"button",tabIndex:"0","aria-label":r,onKeyPress:s},a(s)),n))};d.propTypes={breakLabel:o().oneOfType([o().string,o().node]),breakAriaLabel:o().string,breakClassName:o().string,breakLinkClassName:o().string,breakHandler:o().func.isRequired,getEventListener:o().func.isRequired};const u=d;function h(e){return null!=e?e:arguments.length>1&&void 0!==arguments[1]?arguments[1]:""}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(a,e);var n,r,i,o,s=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(i);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}(this,e)});function a(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),v(g(n=s.call(this,e)),"handlePreviousPage",(function(e){var t=n.state.selected;n.handleClick(e,null,t>0?t-1:void 0,{isPrevious:!0})})),v(g(n),"handleNextPage",(function(e){var t=n.state.selected,r=n.props.pageCount;n.handleClick(e,null,t<r-1?t+1:void 0,{isNext:!0})})),v(g(n),"handlePageSelected",(function(e,t){if(n.state.selected===e)return n.callActiveCallback(e),void n.handleClick(t,null,void 0,{isActive:!0});n.handleClick(t,null,e)})),v(g(n),"handlePageChange",(function(e){n.state.selected!==e&&(n.setState({selected:e}),n.callCallback(e))})),v(g(n),"getEventListener",(function(e){return v({},n.props.eventListener,e)})),v(g(n),"handleClick",(function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.isPrevious,s=void 0!==o&&o,a=i.isNext,c=void 0!==a&&a,l=i.isBreak,d=void 0!==l&&l,u=i.isActive,h=void 0!==u&&u;e.preventDefault?e.preventDefault():e.returnValue=!1;var p=n.state.selected,f=n.props.onClick,m=r;if(f){var g=f({index:t,selected:p,nextSelectedPage:r,event:e,isPrevious:s,isNext:c,isBreak:d,isActive:h});if(!1===g)return;Number.isInteger(g)&&(m=g)}void 0!==m&&n.handlePageChange(m)})),v(g(n),"handleBreakClick",(function(e,t){var r=n.state.selected;n.handleClick(t,e,r<e?n.getForwardJump():n.getBackwardJump(),{isBreak:!0})})),v(g(n),"callCallback",(function(e){void 0!==n.props.onPageChange&&"function"==typeof n.props.onPageChange&&n.props.onPageChange({selected:e})})),v(g(n),"callActiveCallback",(function(e){void 0!==n.props.onPageActive&&"function"==typeof n.props.onPageActive&&n.props.onPageActive({selected:e})})),v(g(n),"getElementPageRel",(function(e){var t=n.state.selected,r=n.props,i=r.nextPageRel,o=r.prevPageRel,s=r.selectedPageRel;return t-1===e?o:t===e?s:t+1===e?i:void 0})),v(g(n),"pagination",(function(){var e=[],r=n.props,i=r.pageRangeDisplayed,o=r.pageCount,s=r.marginPagesDisplayed,a=r.breakLabel,c=r.breakClassName,l=r.breakLinkClassName,d=r.breakAriaLabels,h=n.state.selected;if(o<=i)for(var p=0;p<o;p++)e.push(n.getPageElement(p));else{var f=i/2,m=i-f;h>o-i/2?f=i-(m=o-h):h<i/2&&(m=i-(f=h));var g,y,v=function(e){return n.getPageElement(e)},_=[];for(g=0;g<o;g++){var E=g+1;if(E<=s)_.push({type:"page",index:g,display:v(g)});else if(E>o-s)_.push({type:"page",index:g,display:v(g)});else if(g>=h-f&&g<=h+(0===h&&i>1?m-1:m))_.push({type:"page",index:g,display:v(g)});else if(a&&_.length>0&&_[_.length-1].display!==y&&(i>0||s>0)){var S=g<h?d.backward:d.forward;y=t().createElement(u,{key:g,breakAriaLabel:S,breakLabel:a,breakClassName:c,breakLinkClassName:l,breakHandler:n.handleBreakClick.bind(null,g),getEventListener:n.getEventListener}),_.push({type:"break",index:g,display:y})}}_.forEach((function(t,n){var r=t;"break"===t.type&&_[n-1]&&"page"===_[n-1].type&&_[n+1]&&"page"===_[n+1].type&&_[n+1].index-_[n-1].index<=2&&(r={type:"page",index:t.index,display:v(t.index)}),e.push(r.display)}))}return e})),void 0!==e.initialPage&&void 0!==e.forcePage&&console.warn("(react-paginate): Both initialPage (".concat(e.initialPage,") and forcePage (").concat(e.forcePage,") props are provided, which is discouraged.")+" Use exclusively forcePage prop for a controlled component.\nSee https://reactjs.org/docs/forms.html#controlled-components"),r=e.initialPage?e.initialPage:e.forcePage?e.forcePage:0,n.state={selected:r},n}return n=a,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.initialPage,n=e.disableInitialCallback,r=e.extraAriaContext,i=e.pageCount,o=e.forcePage;void 0===t||n||this.callCallback(t),r&&console.warn("DEPRECATED (react-paginate): The extraAriaContext prop is deprecated. You should now use the ariaLabelBuilder instead."),Number.isInteger(i)||console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(i,"). Did you forget a Math.ceil()?")),void 0!==t&&t>i-1&&console.warn("(react-paginate): The initialPage prop provided is greater than the maximum page index from pageCount prop (".concat(t," > ").concat(i-1,").")),void 0!==o&&o>i-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(o," > ").concat(i-1,")."))}},{key:"componentDidUpdate",value:function(e){void 0!==this.props.forcePage&&this.props.forcePage!==e.forcePage&&(this.props.forcePage>this.props.pageCount-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(this.props.forcePage," > ").concat(this.props.pageCount-1,").")),this.setState({selected:this.props.forcePage})),Number.isInteger(e.pageCount)&&!Number.isInteger(this.props.pageCount)&&console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(this.props.pageCount,"). Did you forget a Math.ceil()?"))}},{key:"getForwardJump",value:function(){var e=this.state.selected,t=this.props,n=t.pageCount,r=e+t.pageRangeDisplayed;return r>=n?n-1:r}},{key:"getBackwardJump",value:function(){var e=this.state.selected-this.props.pageRangeDisplayed;return e<0?0:e}},{key:"getElementHref",value:function(e){var t=this.props,n=t.hrefBuilder,r=t.pageCount,i=t.hrefAllControls;if(n)return i||e>=0&&e<r?n(e+1,r,this.state.selected):void 0}},{key:"ariaLabelBuilder",value:function(e){var t=e===this.state.selected;if(this.props.ariaLabelBuilder&&e>=0&&e<this.props.pageCount){var n=this.props.ariaLabelBuilder(e+1,t);return this.props.extraAriaContext&&!t&&(n=n+" "+this.props.extraAriaContext),n}}},{key:"getPageElement",value:function(e){var n=this.state.selected,r=this.props,i=r.pageClassName,o=r.pageLinkClassName,s=r.activeClassName,a=r.activeLinkClassName,l=r.extraAriaContext,d=r.pageLabelBuilder;return t().createElement(c,{key:e,pageSelectedHandler:this.handlePageSelected.bind(null,e),selected:n===e,rel:this.getElementPageRel(e),pageClassName:i,pageLinkClassName:o,activeClassName:s,activeLinkClassName:a,extraAriaContext:l,href:this.getElementHref(e),ariaLabel:this.ariaLabelBuilder(e),page:e+1,pageLabelBuilder:d,getEventListener:this.getEventListener})}},{key:"render",value:function(){var e=this.props.renderOnZeroPageCount;if(0===this.props.pageCount&&void 0!==e)return e?e(this.props):e;var n=this.props,r=n.disabledClassName,i=n.disabledLinkClassName,o=n.pageCount,s=n.className,a=n.containerClassName,c=n.previousLabel,l=n.previousClassName,d=n.previousLinkClassName,u=n.previousAriaLabel,p=n.prevRel,m=n.nextLabel,g=n.nextClassName,y=n.nextLinkClassName,v=n.nextAriaLabel,_=n.nextRel,E=this.state.selected,S=0===E,T=E===o-1,b="".concat(h(l)).concat(S?" ".concat(h(r)):""),I="".concat(h(g)).concat(T?" ".concat(h(r)):""),N="".concat(h(d)).concat(S?" ".concat(h(i)):""),C="".concat(h(y)).concat(T?" ".concat(h(i)):""),w=S?"true":"false",R=T?"true":"false";return t().createElement("ul",{className:s||a,role:"navigation","aria-label":"Pagination"},t().createElement("li",{className:b},t().createElement("a",f({className:N,href:this.getElementHref(E-1),tabIndex:S?"-1":"0",role:"button",onKeyPress:this.handlePreviousPage,"aria-disabled":w,"aria-label":u,rel:p},this.getEventListener(this.handlePreviousPage)),c)),this.pagination(),t().createElement("li",{className:I},t().createElement("a",f({className:C,href:this.getElementHref(E+1),tabIndex:T?"-1":"0",role:"button",onKeyPress:this.handleNextPage,"aria-disabled":R,"aria-label":v,rel:_},this.getEventListener(this.handleNextPage)),m)))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),a}(e.Component);v(_,"propTypes",{pageCount:o().number.isRequired,pageRangeDisplayed:o().number,marginPagesDisplayed:o().number,previousLabel:o().node,previousAriaLabel:o().string,prevPageRel:o().string,prevRel:o().string,nextLabel:o().node,nextAriaLabel:o().string,nextPageRel:o().string,nextRel:o().string,breakLabel:o().oneOfType([o().string,o().node]),breakAriaLabels:o().shape({forward:o().string,backward:o().string}),hrefBuilder:o().func,hrefAllControls:o().bool,onPageChange:o().func,onPageActive:o().func,onClick:o().func,initialPage:o().number,forcePage:o().number,disableInitialCallback:o().bool,containerClassName:o().string,className:o().string,pageClassName:o().string,pageLinkClassName:o().string,pageLabelBuilder:o().func,activeClassName:o().string,activeLinkClassName:o().string,previousClassName:o().string,nextClassName:o().string,previousLinkClassName:o().string,nextLinkClassName:o().string,disabledClassName:o().string,disabledLinkClassName:o().string,breakClassName:o().string,breakLinkClassName:o().string,extraAriaContext:o().string,ariaLabelBuilder:o().func,eventListener:o().string,renderOnZeroPageCount:o().func,selectedPageRel:o().string}),v(_,"defaultProps",{pageRangeDisplayed:2,marginPagesDisplayed:3,activeClassName:"selected",previousLabel:"Previous",previousClassName:"previous",previousAriaLabel:"Previous page",prevPageRel:"prev",prevRel:"prev",nextLabel:"Next",nextClassName:"next",nextAriaLabel:"Next page",nextPageRel:"next",nextRel:"next",breakLabel:"...",breakAriaLabels:{forward:"Jump forward",backward:"Jump backward"},disabledClassName:"disabled",disableInitialCallback:!1,pageLabelBuilder:function(e){return e},eventListener:"onClick",renderOnZeroPageCount:void 0,selectedPageRel:"canonical",hrefAllControls:!1});const E=_})(),i})(),e.exports=r(n(5043))},178:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e,t,n){var r=0===e?e:e+t;return"translate3d"+("("+("horizontal"===n?[r,0,0]:[0,r,0]).join(",")+")")}},8226:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fadeAnimationHandler=t.slideStopSwipingHandler=t.slideSwipeAnimationHandler=t.slideAnimationHandler=void 0;var r,i=n(5043),o=(r=n(178))&&r.__esModule?r:{default:r},s=n(564);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.slideAnimationHandler=function(e,t){var n={},r=t.selectedItem,a=r,l=i.Children.count(e.children)-1;if(e.infiniteLoop&&(r<0||r>l))return a<0?e.centerMode&&e.centerSlidePercentage&&"horizontal"===e.axis?n.itemListStyle=(0,s.setPosition)(-(l+2)*e.centerSlidePercentage-(100-e.centerSlidePercentage)/2,e.axis):n.itemListStyle=(0,s.setPosition)(100*-(l+2),e.axis):a>l&&(n.itemListStyle=(0,s.setPosition)(0,e.axis)),n;var d=(0,s.getPosition)(r,e),u=(0,o.default)(d,"%",e.axis),h=e.transitionTime+"ms";return n.itemListStyle={WebkitTransform:u,msTransform:u,OTransform:u,transform:u},t.swiping||(n.itemListStyle=c(c({},n.itemListStyle),{},{WebkitTransitionDuration:h,MozTransitionDuration:h,OTransitionDuration:h,transitionDuration:h,msTransitionDuration:h})),n};t.slideSwipeAnimationHandler=function(e,t,n,r){var o={},a="horizontal"===t.axis,c=i.Children.count(t.children),l=(0,s.getPosition)(n.selectedItem,t),d=t.infiniteLoop?(0,s.getPosition)(c-1,t)-100:(0,s.getPosition)(c-1,t),u=a?e.x:e.y,h=u;0===l&&u>0&&(h=0),l===d&&u<0&&(h=0);var p=l+100/(n.itemSize/h),f=Math.abs(u)>t.swipeScrollTolerance;return t.infiniteLoop&&f&&(0===n.selectedItem&&p>-100?p-=100*c:n.selectedItem===c-1&&p<100*-c&&(p+=100*c)),(!t.preventMovementUntilSwipeScrollTolerance||f||n.swipeMovementStarted)&&(n.swipeMovementStarted||r({swipeMovementStarted:!0}),o.itemListStyle=(0,s.setPosition)(p,t.axis)),f&&!n.cancelClick&&r({cancelClick:!0}),o};t.slideStopSwipingHandler=function(e,t){var n=(0,s.getPosition)(t.selectedItem,e);return{itemListStyle:(0,s.setPosition)(n,e.axis)}};t.fadeAnimationHandler=function(e,t){var n=e.transitionTime+"ms",r="ease-in-out",i={position:"absolute",display:"block",zIndex:-2,minHeight:"100%",opacity:0,top:0,right:0,left:0,bottom:0,transitionTimingFunction:r,msTransitionTimingFunction:r,MozTransitionTimingFunction:r,WebkitTransitionTimingFunction:r,OTransitionTimingFunction:r};return t.swiping||(i=c(c({},i),{},{WebkitTransitionDuration:n,MozTransitionDuration:n,OTransitionDuration:n,transitionDuration:n,msTransitionDuration:n})),{slideStyle:i,selectedStyle:c(c({},i),{},{opacity:1,position:"relative"}),prevStyle:c({},i)}}},3481:(t,n,r)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==f(e)&&"function"!==typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(r(5043)),o=h(r(7251)),s=h(r(8656)),a=h(r(4169)),c=h(r(5559)),l=h(r(9386)),d=r(564),u=r(8226);function h(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function f(e){return f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function E(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=T(t);if(n){var i=T(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"===typeof t))return t;return S(e)}(this,e)}}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(p,e);var t,n,r,h=E(p);function p(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),b(S(t=h.call(this,e)),"thumbsRef",void 0),b(S(t),"carouselWrapperRef",void 0),b(S(t),"listRef",void 0),b(S(t),"itemsRef",void 0),b(S(t),"timer",void 0),b(S(t),"animationHandler",void 0),b(S(t),"setThumbsRef",(function(e){t.thumbsRef=e})),b(S(t),"setCarouselWrapperRef",(function(e){t.carouselWrapperRef=e})),b(S(t),"setListRef",(function(e){t.listRef=e})),b(S(t),"setItemsRef",(function(e,n){t.itemsRef||(t.itemsRef=[]),t.itemsRef[n]=e})),b(S(t),"autoPlay",(function(){i.Children.count(t.props.children)<=1||(t.clearAutoPlay(),t.props.autoPlay&&(t.timer=setTimeout((function(){t.increment()}),t.props.interval)))})),b(S(t),"clearAutoPlay",(function(){t.timer&&clearTimeout(t.timer)})),b(S(t),"resetAutoPlay",(function(){t.clearAutoPlay(),t.autoPlay()})),b(S(t),"stopOnHover",(function(){t.setState({isMouseEntered:!0},t.clearAutoPlay)})),b(S(t),"startOnLeave",(function(){t.setState({isMouseEntered:!1},t.autoPlay)})),b(S(t),"isFocusWithinTheCarousel",(function(){return!!t.carouselWrapperRef&&!((0,c.default)().activeElement!==t.carouselWrapperRef&&!t.carouselWrapperRef.contains((0,c.default)().activeElement))})),b(S(t),"navigateWithKeyboard",(function(e){if(t.isFocusWithinTheCarousel()){var n="horizontal"===t.props.axis,r=n?37:38;(n?39:40)===e.keyCode?t.increment():r===e.keyCode&&t.decrement()}})),b(S(t),"updateSizes",(function(){if(t.state.initialized&&t.itemsRef&&0!==t.itemsRef.length){var e="horizontal"===t.props.axis,n=t.itemsRef[0];if(n){var r=e?n.clientWidth:n.clientHeight;t.setState({itemSize:r}),t.thumbsRef&&t.thumbsRef.updateSizes()}}})),b(S(t),"setMountState",(function(){t.setState({hasMount:!0}),t.updateSizes()})),b(S(t),"handleClickItem",(function(e,n){0!==i.Children.count(t.props.children)&&(t.state.cancelClick?t.setState({cancelClick:!1}):(t.props.onClickItem(e,n),e!==t.state.selectedItem&&t.setState({selectedItem:e})))})),b(S(t),"handleOnChange",(function(e,n){i.Children.count(t.props.children)<=1||t.props.onChange(e,n)})),b(S(t),"handleClickThumb",(function(e,n){t.props.onClickThumb(e,n),t.moveTo(e)})),b(S(t),"onSwipeStart",(function(e){t.setState({swiping:!0}),t.props.onSwipeStart(e)})),b(S(t),"onSwipeEnd",(function(e){t.setState({swiping:!1,cancelClick:!1,swipeMovementStarted:!1}),t.props.onSwipeEnd(e),t.clearAutoPlay(),t.state.autoPlay&&t.autoPlay()})),b(S(t),"onSwipeMove",(function(e,n){t.props.onSwipeMove(n);var r=t.props.swipeAnimationHandler(e,t.props,t.state,t.setState.bind(S(t)));return t.setState(y({},r)),!!Object.keys(r).length})),b(S(t),"decrement",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t.moveTo(t.state.selectedItem-("number"===typeof e?e:1))})),b(S(t),"increment",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t.moveTo(t.state.selectedItem+("number"===typeof e?e:1))})),b(S(t),"moveTo",(function(e){if("number"===typeof e){var n=i.Children.count(t.props.children)-1;e<0&&(e=t.props.infiniteLoop?n:0),e>n&&(e=t.props.infiniteLoop?0:n),t.selectItem({selectedItem:e}),t.state.autoPlay&&!1===t.state.isMouseEntered&&t.resetAutoPlay()}})),b(S(t),"onClickNext",(function(){t.increment(1)})),b(S(t),"onClickPrev",(function(){t.decrement(1)})),b(S(t),"onSwipeForward",(function(){t.increment(1),t.props.emulateTouch&&t.setState({cancelClick:!0})})),b(S(t),"onSwipeBackwards",(function(){t.decrement(1),t.props.emulateTouch&&t.setState({cancelClick:!0})})),b(S(t),"changeItem",(function(e){return function(n){(0,d.isKeyboardEvent)(n)&&"Enter"!==n.key||t.moveTo(e)}})),b(S(t),"selectItem",(function(e){t.setState(y({previousItem:t.state.selectedItem},e),(function(){t.setState(t.animationHandler(t.props,t.state))})),t.handleOnChange(e.selectedItem,i.Children.toArray(t.props.children)[e.selectedItem])})),b(S(t),"getInitialImage",(function(){var e=t.props.selectedItem,n=t.itemsRef&&t.itemsRef[e];return(n&&n.getElementsByTagName("img")||[])[0]})),b(S(t),"getVariableItemHeight",(function(e){var n=t.itemsRef&&t.itemsRef[e];if(t.state.hasMount&&n&&n.children.length){var r=n.children[0].getElementsByTagName("img")||[];if(r.length>0){var i=r[0];if(!i.complete){i.addEventListener("load",(function e(){t.forceUpdate(),i.removeEventListener("load",e)}))}}var o=(r[0]||n.children[0]).clientHeight;return o>0?o:null}return null}));var n={initialized:!1,previousItem:e.selectedItem,selectedItem:e.selectedItem,hasMount:!1,isMouseEntered:!1,autoPlay:e.autoPlay,swiping:!1,swipeMovementStarted:!1,cancelClick:!1,itemSize:1,itemListStyle:{},slideStyle:{},selectedStyle:{},prevStyle:{}};return t.animationHandler="function"===typeof e.animationHandler&&e.animationHandler||"fade"===e.animationHandler&&u.fadeAnimationHandler||u.slideAnimationHandler,t.state=y(y({},n),t.animationHandler(e,n)),t}return t=p,(n=[{key:"componentDidMount",value:function(){this.props.children&&this.setupCarousel()}},{key:"componentDidUpdate",value:function(e,t){e.children||!this.props.children||this.state.initialized||this.setupCarousel(),!e.autoFocus&&this.props.autoFocus&&this.forceFocus(),t.swiping&&!this.state.swiping&&this.setState(y({},this.props.stopSwipingHandler(this.props,this.state))),e.selectedItem===this.props.selectedItem&&e.centerMode===this.props.centerMode||(this.updateSizes(),this.moveTo(this.props.selectedItem)),e.autoPlay!==this.props.autoPlay&&(this.props.autoPlay?this.setupAutoPlay():this.destroyAutoPlay(),this.setState({autoPlay:this.props.autoPlay}))}},{key:"componentWillUnmount",value:function(){this.destroyCarousel()}},{key:"setupCarousel",value:function(){var e=this;this.bindEvents(),this.state.autoPlay&&i.Children.count(this.props.children)>1&&this.setupAutoPlay(),this.props.autoFocus&&this.forceFocus(),this.setState({initialized:!0},(function(){var t=e.getInitialImage();t&&!t.complete?t.addEventListener("load",e.setMountState):e.setMountState()}))}},{key:"destroyCarousel",value:function(){this.state.initialized&&(this.unbindEvents(),this.destroyAutoPlay())}},{key:"setupAutoPlay",value:function(){this.autoPlay();var e=this.carouselWrapperRef;this.props.stopOnHover&&e&&(e.addEventListener("mouseenter",this.stopOnHover),e.addEventListener("mouseleave",this.startOnLeave))}},{key:"destroyAutoPlay",value:function(){this.clearAutoPlay();var e=this.carouselWrapperRef;this.props.stopOnHover&&e&&(e.removeEventListener("mouseenter",this.stopOnHover),e.removeEventListener("mouseleave",this.startOnLeave))}},{key:"bindEvents",value:function(){(0,l.default)().addEventListener("resize",this.updateSizes),(0,l.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.props.useKeyboardArrows&&(0,c.default)().addEventListener("keydown",this.navigateWithKeyboard)}},{key:"unbindEvents",value:function(){(0,l.default)().removeEventListener("resize",this.updateSizes),(0,l.default)().removeEventListener("DOMContentLoaded",this.updateSizes);var e=this.getInitialImage();e&&e.removeEventListener("load",this.setMountState),this.props.useKeyboardArrows&&(0,c.default)().removeEventListener("keydown",this.navigateWithKeyboard)}},{key:"forceFocus",value:function(){var e;null===(e=this.carouselWrapperRef)||void 0===e||e.focus()}},{key:"renderItems",value:function(e){var t=this;return this.props.children?i.Children.map(this.props.children,(function(n,r){var o=r===t.state.selectedItem,a=r===t.state.previousItem,c=o&&t.state.selectedStyle||a&&t.state.prevStyle||t.state.slideStyle||{};t.props.centerMode&&"horizontal"===t.props.axis&&(c=y(y({},c),{},{minWidth:t.props.centerSlidePercentage+"%"})),t.state.swiping&&t.state.swipeMovementStarted&&(c=y(y({},c),{},{pointerEvents:"none"}));var l={ref:function(e){return t.setItemsRef(e,r)},key:"itemKey"+r+(e?"clone":""),className:s.default.ITEM(!0,r===t.state.selectedItem,r===t.state.previousItem),onClick:t.handleClickItem.bind(t,r,n),style:c};return i.default.createElement("li",l,t.props.renderItem(n,{isSelected:r===t.state.selectedItem,isPrevious:r===t.state.previousItem}))})):[]}},{key:"renderControls",value:function(){var e=this,t=this.props,n=t.showIndicators,r=t.labels,o=t.renderIndicator,s=t.children;return n?i.default.createElement("ul",{className:"control-dots"},i.Children.map(s,(function(t,n){return o&&o(e.changeItem(n),n===e.state.selectedItem,n,r.item)}))):null}},{key:"renderStatus",value:function(){return this.props.showStatus?i.default.createElement("p",{className:"carousel-status"},this.props.statusFormatter(this.state.selectedItem+1,i.Children.count(this.props.children))):null}},{key:"renderThumbs",value:function(){return this.props.showThumbs&&this.props.children&&0!==i.Children.count(this.props.children)?i.default.createElement(a.default,{ref:this.setThumbsRef,onSelectItem:this.handleClickThumb,selectedItem:this.state.selectedItem,transitionTime:this.props.transitionTime,thumbWidth:this.props.thumbWidth,labels:this.props.labels,emulateTouch:this.props.emulateTouch},this.props.renderThumbs(this.props.children)):null}},{key:"render",value:function(){var e=this;if(!this.props.children||0===i.Children.count(this.props.children))return null;var t=this.props.swipeable&&i.Children.count(this.props.children)>1,n="horizontal"===this.props.axis,r=this.props.showArrows&&i.Children.count(this.props.children)>1,a=r&&(this.state.selectedItem>0||this.props.infiniteLoop)||!1,c=r&&(this.state.selectedItem<i.Children.count(this.props.children)-1||this.props.infiniteLoop)||!1,l=this.renderItems(!0),d=l.shift(),u=l.pop(),h={className:s.default.SLIDER(!0,this.state.swiping),onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:this.state.itemListStyle,tolerance:this.props.swipeScrollTolerance},p={};if(n){if(h.onSwipeLeft=this.onSwipeForward,h.onSwipeRight=this.onSwipeBackwards,this.props.dynamicHeight){var f=this.getVariableItemHeight(this.state.selectedItem);p.height=f||"auto"}}else h.onSwipeUp="natural"===this.props.verticalSwipe?this.onSwipeBackwards:this.onSwipeForward,h.onSwipeDown="natural"===this.props.verticalSwipe?this.onSwipeForward:this.onSwipeBackwards,h.style=y(y({},h.style),{},{height:this.state.itemSize}),p.height=this.state.itemSize;return i.default.createElement("div",{"aria-label":this.props.ariaLabel,className:s.default.ROOT(this.props.className),ref:this.setCarouselWrapperRef,tabIndex:this.props.useKeyboardArrows?0:void 0},i.default.createElement("div",{className:s.default.CAROUSEL(!0),style:{width:this.props.width}},this.renderControls(),this.props.renderArrowPrev(this.onClickPrev,a,this.props.labels.leftArrow),i.default.createElement("div",{className:s.default.WRAPPER(!0,this.props.axis),style:p},t?i.default.createElement(o.default,m({tagName:"ul",innerRef:this.setListRef},h,{allowMouseEvents:this.props.emulateTouch}),this.props.infiniteLoop&&u,this.renderItems(),this.props.infiniteLoop&&d):i.default.createElement("ul",{className:s.default.SLIDER(!0,this.state.swiping),ref:function(t){return e.setListRef(t)},style:this.state.itemListStyle||{}},this.props.infiniteLoop&&u,this.renderItems(),this.props.infiniteLoop&&d)),this.props.renderArrowNext(this.onClickNext,c,this.props.labels.rightArrow),this.renderStatus()),this.renderThumbs())}}])&&v(t.prototype,n),r&&v(t,r),p}(i.default.Component);n.default=I,b(I,"displayName","Carousel"),b(I,"defaultProps",{ariaLabel:void 0,axis:"horizontal",centerSlidePercentage:80,interval:3e3,labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},onClickItem:d.noop,onClickThumb:d.noop,onChange:d.noop,onSwipeStart:function(){},onSwipeEnd:function(){},onSwipeMove:function(){return!1},preventMovementUntilSwipeScrollTolerance:!1,renderArrowPrev:function(e,t,n){return i.default.createElement("button",{type:"button","aria-label":n,className:s.default.ARROW_PREV(!t),onClick:e})},renderArrowNext:function(e,t,n){return i.default.createElement("button",{type:"button","aria-label":n,className:s.default.ARROW_NEXT(!t),onClick:e})},renderIndicator:function(e,t,n,r){return i.default.createElement("li",{className:s.default.DOT(t),onClick:e,onKeyDown:e,value:n,key:n,role:"button",tabIndex:0,"aria-label":"".concat(r," ").concat(n+1)})},renderItem:function(e){return e},renderThumbs:function(e){var t=i.Children.map(e,(function(e){var t=e;if("img"!==e.type&&(t=i.Children.toArray(e.props.children).find((function(e){return"img"===e.type}))),t)return t}));return 0===t.filter((function(e){return e})).length?(console.warn("No images found! Can't build the thumb list without images. If you don't need thumbs, set showThumbs={false} in the Carousel. Note that it's not possible to get images rendered inside custom components. More info at https://github.com/leandrowd/react-responsive-carousel/blob/master/TROUBLESHOOTING.md"),[]):t},statusFormatter:d.defaultStatusFormatter,selectedItem:0,showArrows:!0,showIndicators:!0,showStatus:!0,showThumbs:!0,stopOnHover:!0,swipeScrollTolerance:5,swipeable:!0,transitionTime:350,verticalSwipe:"standard",width:"100%",animationHandler:"slide",swipeAnimationHandler:u.slideSwipeAnimationHandler,stopSwipingHandler:u.slideStopSwipingHandler})},3096:()=>{},564:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setPosition=t.getPosition=t.isKeyboardEvent=t.defaultStatusFormatter=t.noop=void 0;var r,i=n(5043),o=(r=n(178))&&r.__esModule?r:{default:r};t.noop=function(){};t.defaultStatusFormatter=function(e,t){return"".concat(e," of ").concat(t)};t.isKeyboardEvent=function(e){return!!e&&e.hasOwnProperty("key")};t.getPosition=function(e,t){if(t.infiniteLoop&&++e,0===e)return 0;var n=i.Children.count(t.children);if(t.centerMode&&"horizontal"===t.axis){var r=-e*t.centerSlidePercentage,o=n-1;return e&&(e!==o||t.infiniteLoop)?r+=(100-t.centerSlidePercentage)/2:e===o&&(r+=100-t.centerSlidePercentage),r}return 100*-e};t.setPosition=function(e,t){var n={};return["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach((function(r){n[r]=(0,o.default)(e,"%",t)})),n}},4169:(t,n,r)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==h(e)&&"function"!==typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(r(5043)),o=d(r(8656)),s=r(1256),a=d(r(178)),c=d(r(7251)),l=d(r(9386));function d(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function h(e){return h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function g(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=v(t);if(n){var i=v(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"===typeof t))return t;return y(e)}(this,e)}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(u,e);var t,n,r,d=g(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),_(y(t=d.call(this,e)),"itemsWrapperRef",void 0),_(y(t),"itemsListRef",void 0),_(y(t),"thumbsRef",void 0),_(y(t),"setItemsWrapperRef",(function(e){t.itemsWrapperRef=e})),_(y(t),"setItemsListRef",(function(e){t.itemsListRef=e})),_(y(t),"setThumbsRef",(function(e,n){t.thumbsRef||(t.thumbsRef=[]),t.thumbsRef[n]=e})),_(y(t),"updateSizes",(function(){if(t.props.children&&t.itemsWrapperRef&&t.thumbsRef){var e=i.Children.count(t.props.children),n=t.itemsWrapperRef.clientWidth,r=t.props.thumbWidth?t.props.thumbWidth:(0,s.outerWidth)(t.thumbsRef[0]),o=Math.floor(n/r),a=o<e,c=a?e-o:0;t.setState((function(e,n){return{itemSize:r,visibleItems:o,firstItem:a?t.getFirstItem(n.selectedItem):0,lastPosition:c,showArrows:a}}))}})),_(y(t),"handleClickItem",(function(e,n,r){if(!function(e){return e.hasOwnProperty("key")}(r)||"Enter"===r.key){var i=t.props.onSelectItem;"function"===typeof i&&i(e,n)}})),_(y(t),"onSwipeStart",(function(){t.setState({swiping:!0})})),_(y(t),"onSwipeEnd",(function(){t.setState({swiping:!1})})),_(y(t),"onSwipeMove",(function(e){var n=e.x;if(!t.state.itemSize||!t.itemsWrapperRef||!t.state.visibleItems)return!1;var r=i.Children.count(t.props.children),o=-100*t.state.firstItem/t.state.visibleItems;0===o&&n>0&&(n=0),o===100*-Math.max(r-t.state.visibleItems,0)/t.state.visibleItems&&n<0&&(n=0);var s=o+100/(t.itemsWrapperRef.clientWidth/n);return t.itemsListRef&&["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach((function(e){t.itemsListRef.style[e]=(0,a.default)(s,"%",t.props.axis)})),!0})),_(y(t),"slideRight",(function(e){t.moveTo(t.state.firstItem-("number"===typeof e?e:1))})),_(y(t),"slideLeft",(function(e){t.moveTo(t.state.firstItem+("number"===typeof e?e:1))})),_(y(t),"moveTo",(function(e){e=(e=e<0?0:e)>=t.state.lastPosition?t.state.lastPosition:e,t.setState({firstItem:e})})),t.state={selectedItem:e.selectedItem,swiping:!1,showArrows:!1,firstItem:0,visibleItems:0,lastPosition:0},t}return t=u,(n=[{key:"componentDidMount",value:function(){this.setupThumbs()}},{key:"componentDidUpdate",value:function(e){this.props.selectedItem!==this.state.selectedItem&&this.setState({selectedItem:this.props.selectedItem,firstItem:this.getFirstItem(this.props.selectedItem)}),this.props.children!==e.children&&this.updateSizes()}},{key:"componentWillUnmount",value:function(){this.destroyThumbs()}},{key:"setupThumbs",value:function(){(0,l.default)().addEventListener("resize",this.updateSizes),(0,l.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.updateSizes()}},{key:"destroyThumbs",value:function(){(0,l.default)().removeEventListener("resize",this.updateSizes),(0,l.default)().removeEventListener("DOMContentLoaded",this.updateSizes)}},{key:"getFirstItem",value:function(e){var t=e;return e>=this.state.lastPosition&&(t=this.state.lastPosition),e<this.state.firstItem+this.state.visibleItems&&(t=this.state.firstItem),e<this.state.firstItem&&(t=e),t}},{key:"renderItems",value:function(){var e=this;return this.props.children.map((function(t,n){var r=o.default.ITEM(!1,n===e.state.selectedItem),s={key:n,ref:function(t){return e.setThumbsRef(t,n)},className:r,onClick:e.handleClickItem.bind(e,n,e.props.children[n]),onKeyDown:e.handleClickItem.bind(e,n,e.props.children[n]),"aria-label":"".concat(e.props.labels.item," ").concat(n+1),style:{width:e.props.thumbWidth}};return i.default.createElement("li",p({},s,{role:"button",tabIndex:0}),t)}))}},{key:"render",value:function(){var e=this;if(!this.props.children)return null;var t,n=i.Children.count(this.props.children)>1,r=this.state.showArrows&&this.state.firstItem>0,s=this.state.showArrows&&this.state.firstItem<this.state.lastPosition,l=-this.state.firstItem*(this.state.itemSize||0),d=(0,a.default)(l,"px",this.props.axis),u=this.props.transitionTime+"ms";return t={WebkitTransform:d,MozTransform:d,MsTransform:d,OTransform:d,transform:d,msTransform:d,WebkitTransitionDuration:u,MozTransitionDuration:u,MsTransitionDuration:u,OTransitionDuration:u,transitionDuration:u,msTransitionDuration:u},i.default.createElement("div",{className:o.default.CAROUSEL(!1)},i.default.createElement("div",{className:o.default.WRAPPER(!1),ref:this.setItemsWrapperRef},i.default.createElement("button",{type:"button",className:o.default.ARROW_PREV(!r),onClick:function(){return e.slideRight()},"aria-label":this.props.labels.leftArrow}),n?i.default.createElement(c.default,{tagName:"ul",className:o.default.SLIDER(!1,this.state.swiping),onSwipeLeft:this.slideLeft,onSwipeRight:this.slideRight,onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:t,innerRef:this.setItemsListRef,allowMouseEvents:this.props.emulateTouch},this.renderItems()):i.default.createElement("ul",{className:o.default.SLIDER(!1,this.state.swiping),ref:function(t){return e.setItemsListRef(t)},style:t},this.renderItems()),i.default.createElement("button",{type:"button",className:o.default.ARROW_NEXT(!s),onClick:function(){return e.slideLeft()},"aria-label":this.props.labels.rightArrow})))}}])&&f(t.prototype,n),r&&f(t,r),u}(i.Component);n.default=E,_(E,"displayName","Thumbs"),_(E,"defaultProps",{axis:"horizontal",labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},selectedItem:0,thumbWidth:80,transitionTime:350})},8656:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(8139))&&r.__esModule?r:{default:r};var o={ROOT:function(e){return(0,i.default)(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({"carousel-root":!0},e||"",!!e))},CAROUSEL:function(e){return(0,i.default)({carousel:!0,"carousel-slider":e})},WRAPPER:function(e,t){return(0,i.default)({"thumbs-wrapper":!e,"slider-wrapper":e,"axis-horizontal":"horizontal"===t,"axis-vertical":"horizontal"!==t})},SLIDER:function(e,t){return(0,i.default)({thumbs:!e,slider:e,animated:!t})},ITEM:function(e,t,n){return(0,i.default)({thumb:!e,slide:e,selected:t,previous:n})},ARROW_PREV:function(e){return(0,i.default)({"control-arrow control-prev":!0,"control-disabled":e})},ARROW_NEXT:function(e){return(0,i.default)({"control-arrow control-next":!0,"control-disabled":e})},DOT:function(e){return(0,i.default)({dot:!0,selected:e})}};t.default=o},1256:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.outerWidth=void 0;t.outerWidth=function(e){var t=e.offsetWidth,n=getComputedStyle(e);return t+=parseInt(n.marginLeft)+parseInt(n.marginRight)}},1577:(e,t,n)=>{"use strict";Object.defineProperty(t,"FN",{enumerable:!0,get:function(){return r.default}});var r=s(n(3481)),i=n(3096),o=s(n(4169));function s(e){return e&&e.__esModule?e:{default:e}}},5559:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(){return document}},9386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(){return window}},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,o={},l=null,d=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,r)&&!c.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:d,props:o,_owner:a.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var E=_.prototype=new v;E.constructor=_,m(E,y.prototype),E.isPureReactComponent=!0;var S=Array.isArray,T=Object.prototype.hasOwnProperty,b={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)T.call(t,i)&&!I.hasOwnProperty(i)&&(o[i]=t[i]);var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){for(var l=Array(c),d=0;d<c;d++)l[d]=arguments[d+2];o.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===o[i]&&(o[i]=c[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:b.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var w=/\/+/g;function R(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return s=s(c=e),e=""===o?"."+R(c,0):o,S(s)?(i="",null!=e&&(i=e.replace(w,"$&/")+"/"),A(s,t,i,"",(function(e){return e}))):null!=s&&(C(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(w,"$&/")+"/")+e)),t.push(s)),1;if(c=0,o=""===o?".":o+":",S(e))for(var l=0;l<e.length;l++){var d=o+R(a=e[l],l);c+=A(a,t,i,d,s)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),l=0;!(a=e.next()).done;)c+=A(a=a.value,t,i,d=o+R(a,l++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function O(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},k={transition:null},x={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:k,ReactCurrentOwner:b};t.Children={map:O,forEach:function(e,t,n){O(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return O(e,(function(){t++})),t},toArray:function(e){return O(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=_,t.StrictMode=o,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)T.call(t,l)&&!I.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.transition;k.transition={};try{e()}finally{k.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,c=e[a],l=a+1,d=e[l];if(0>o(c,n))l<i&&0>o(d,c)?(e[r]=d,e[l]=n,r=l):(e[r]=c,e[a]=n,r=a);else{if(!(l<i&&0>o(d,n)))break e;e[r]=d,e[l]=n,r=l}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var l=[],d=[],u=1,h=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function E(e){for(var t=r(d);null!==t;){if(null===t.callback)i(d);else{if(!(t.startTime<=e))break;i(d),t.sortIndex=t.expirationTime,n(l,t)}t=r(d)}}function S(e){if(g=!1,E(e),!m)if(null!==r(l))m=!0,k(T);else{var t=r(d);null!==t&&x(S,t.startTime-e)}}function T(e,n){m=!1,g&&(g=!1,v(C),C=-1),f=!0;var o=p;try{for(E(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!A());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(l)&&i(l),E(n)}else i(l);h=r(l)}if(null!==h)var c=!0;else{var u=r(d);null!==u&&x(S,u.startTime-n),c=!1}return c}finally{h=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var b,I=!1,N=null,C=-1,w=5,R=-1;function A(){return!(t.unstable_now()-R<w)}function O(){if(null!==N){var e=t.unstable_now();R=e;var n=!0;try{n=N(!0,e)}finally{n?b():(I=!1,N=null)}}else I=!1}if("function"===typeof _)b=function(){_(O)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,D=M.port2;M.port1.onmessage=O,b=function(){D.postMessage(null)}}else b=function(){y(O,0)};function k(e){N=e,I||(I=!0,b())}function x(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,k(T))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(d,e),null===r(l)&&e===r(d)&&(g?(v(C),C=-1):g=!0,x(S,o-s))):(e.sortIndex=a,n(l,e),m||f||(m=!0,k(T))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},6440:e=>{"use strict";var t=function(){};e.exports=t},4634:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},4893:e=>{e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},e.exports.__esModule=!0,e.exports.default=e.exports},8139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=s(e,o(n)))}return e}function o(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=s(t,n));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},8168:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{A:()=>r})},8587:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{A:()=>r})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;__webpack_require__.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var i=Object.create(null);__webpack_require__.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,__webpack_require__.d(i,o),i}})(),__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="/";var __webpack_exports__={};(()=>{"use strict";var t={};__webpack_require__.r(t),__webpack_require__.d(t,{hasBrowserEnv:()=>VU,hasStandardBrowserEnv:()=>BU,hasStandardBrowserWebWorkerEnv:()=>HU});var n,r=__webpack_require__(5043),i=__webpack_require__.t(r,2),o=__webpack_require__(4391),s=__webpack_require__(7950),a=__webpack_require__.t(s,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(n||(n={}));const l="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(t,n){if(!t){"undefined"!==typeof console&&console.warn(n);try{throw new Error(n)}catch(e){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,t,r,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:s=!1}=i,a=o.history,u=n.Pop,m=null,g=y();function y(){return(a.state||{idx:null}).idx}function v(){u=n.Pop;let e=y(),t=null==e?null:e-g;g=e,m&&m({action:u,location:E.location,delta:t})}function _(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(c({},a.state,{idx:g}),""));let E={get action(){return u},get location(){return e(o,a)},listen(e){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(l,v),m=e,()=>{o.removeEventListener(l,v),m=null}},createHref:e=>t(o,e),createURL:_,encodeLocation(e){let t=_(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){u=n.Push;let i=p(E.location,e,t);r&&r(i,e),g=y()+1;let c=h(i,g),l=E.createHref(i);try{a.pushState(c,"",l)}catch(Sv){if(Sv instanceof DOMException&&"DataCloneError"===Sv.name)throw Sv;o.location.assign(l)}s&&m&&m({action:u,location:E.location,delta:1})},replace:function(e,t){u=n.Replace;let i=p(E.location,e,t);r&&r(i,e),g=y();let o=h(i,g),c=E.createHref(i);a.replaceState(o,"",c),s&&m&&m({action:u,location:E.location,delta:0})},go:e=>a.go(e)};return E}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){void 0===n&&(n="/");let r=D(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;let i=_(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let o=null;for(let s=0;null==o&&s<i.length;++s){let e=M(r);o=A(i[s],e)}return o}function _(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(d(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let a=j([r,s.relativePath]),c=n.concat(s);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),_(e.children,t,c,a)),(null!=e.path||e.index)&&t.push({path:a,score:R(a,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of E(e.path))i(e,t,r);else i(e,t)})),t}function E(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=E(r.join("/")),a=[];return a.push(...s.map((e=>""===e?o:[o,e].join("/")))),i&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const S=/^:[\w-]+$/,T=3,b=2,I=1,N=10,C=-2,w=e=>"*"===e;function R(e,t){let n=e.split("/"),r=n.length;return n.some(w)&&(r+=C),t&&(r+=b),n.filter((e=>!w(e))).reduce(((e,t)=>e+(S.test(t)?T:""===t?I:N)),r)}function A(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let s=0;s<n.length;++s){let e=n[s],a=s===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},c);if(!l)return null;Object.assign(r,l.params);let d=e.route;o.push({params:r,pathname:j([i,l.pathname]),pathnameBase:U(j([i,l.pathnameBase])),route:d}),"/"!==l.pathnameBase&&(i=j([i,l.pathnameBase]))}return o}function O(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const c=a[n];return e[r]=i&&!c?void 0:(c||"").replace(/%2F/g,"/"),e}),{}),pathname:o,pathnameBase:s,pattern:e}}function M(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(Sv){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Sv+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function k(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function x(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function L(e,t){let n=x(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function P(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=c({},e),d(!i.pathname||!i.pathname.includes("?"),k("?","pathname","search",i)),d(!i.pathname||!i.pathname.includes("#"),k("#","pathname","hash",i)),d(!i.search||!i.search.includes("#"),k("#","search","hash",i)));let o,s=""===e||""===i.pathname,a=s?"/":i.pathname;if(null==a)o=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:F(r),hash:z(i)}}(i,o),u=a&&"/"!==a&&a.endsWith("/"),h=(s||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!h||(l.pathname+="/"),l}const j=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function V(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],G=(new Set(B),["get",...B]);new Set(G),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}const W=r.createContext(null);const Y=r.createContext(null);const q=r.createContext(null);const K=r.createContext(null);const Q=r.createContext({outlet:null,matches:[],isDataRoute:!1});const J=r.createContext(null);function X(){return null!=r.useContext(K)}function Z(){return X()||d(!1),r.useContext(K).location}function $(e){r.useContext(q).static||r.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=r.useContext(Q);return e?function(){let{router:e}=he(de.UseNavigateStable),t=fe(ue.UseNavigateStable),n=r.useRef(!1);$((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,H({fromRouteId:t},i)))}),[e,t]);return i}():function(){X()||d(!1);let e=r.useContext(W),{basename:t,future:n,navigator:i}=r.useContext(q),{matches:o}=r.useContext(Q),{pathname:s}=Z(),a=JSON.stringify(L(o,n.v7_relativeSplatPath)),c=r.useRef(!1);$((()=>{c.current=!0}));let l=r.useCallback((function(n,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof n)return void i.go(n);let o=P(n,JSON.parse(a),s,"path"===r.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:j([t,o.pathname])),(r.replace?i.replace:i.push)(o,r.state,r)}),[t,i,a,s,e]);return l}()}const te=r.createContext(null);function ne(){let{matches:e}=r.useContext(Q),t=e[e.length-1];return t?t.params:{}}function re(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(q),{matches:o}=r.useContext(Q),{pathname:s}=Z(),a=JSON.stringify(L(o,i.v7_relativeSplatPath));return r.useMemo((()=>P(e,JSON.parse(a),s,"path"===n)),[e,a,s,n])}function ie(e,t,i,o){X()||d(!1);let{navigator:s}=r.useContext(q),{matches:a}=r.useContext(Q),c=a[a.length-1],l=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let h,p=Z();if(t){var f;let e="string"===typeof t?m(t):t;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||d(!1),h=e}else h=p;let g=h.pathname||"/",y=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let _=v(e,{pathname:y});let E=le(_&&_.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:j([u,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:j([u,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,o);return t&&E?r.createElement(K.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:n.Pop}},E):E}function oe(){let e=function(){var e;let t=r.useContext(J),n=pe(ue.UseRouteError),i=fe(ue.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=V(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:o},n):null,null)}const se=r.createElement(oe,null);class ae extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Q.Provider,{value:this.props.routeContext},r.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:n,children:i}=e,o=r.useContext(W);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Q.Provider,{value:t},i)}function le(e,t,n,i){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var s;if(null==(s=n)||!s.errors)return null;e=n.matches}let a=e,c=null==(o=n)?void 0:o.errors;if(null!=c){let e=a.findIndex((e=>e.route.id&&(null==c?void 0:c[e.route.id])));e>=0||d(!1),a=a.slice(0,Math.min(a.length,e+1))}let l=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){l=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight(((e,i,o)=>{let s,d=!1,h=null,p=null;var f;n&&(s=c&&i.route.id?c[i.route.id]:void 0,h=i.route.errorElement||se,l&&(u<0&&0===o?(f="route-fallback",!1||me[f]||(me[f]=!0),d=!0,p=null):u===o&&(d=!0,p=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,o+1)),g=()=>{let t;return t=s?h:d?p:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(ce,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?r.createElement(ae,{location:n.location,revalidation:n.revalidation,component:h,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function he(e){let t=r.useContext(W);return t||d(!1),t}function pe(e){let t=r.useContext(Y);return t||d(!1),t}function fe(e){let t=function(e){let t=r.useContext(Q);return t||d(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||d(!1),n.route.id}const me={};i.startTransition;function ge(e){return function(e){let t=r.useContext(Q).outlet;return t?r.createElement(te.Provider,{value:e},t):t}(e.context)}function ye(e){d(!1)}function ve(e){let{basename:t="/",children:i=null,location:o,navigationType:s=n.Pop,navigator:a,static:c=!1,future:l}=e;X()&&d(!1);let u=t.replace(/^\/*/,"/"),h=r.useMemo((()=>({basename:u,navigator:a,static:c,future:H({v7_relativeSplatPath:!1},l)})),[u,l,a,c]);"string"===typeof o&&(o=m(o));let{pathname:p="/",search:f="",hash:g="",state:y=null,key:v="default"}=o,_=r.useMemo((()=>{let e=D(p,u);return null==e?null:{location:{pathname:e,search:f,hash:g,state:y,key:v},navigationType:s}}),[u,p,f,g,y,v,s]);return null==_?null:r.createElement(q.Provider,{value:h},r.createElement(K.Provider,{children:i,value:_}))}function _e(e){let{children:t,location:n}=e;return ie(Ee(t),n)}new Promise((()=>{}));r.Component;function Ee(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let o=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,Ee(e.props.children,o));e.type!==ye&&d(!1),e.props.index&&e.props.children&&d(!1);let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=Ee(e.props.children,o)),n.push(s)})),n}function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se.apply(this,arguments)}function Te(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const be=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(e){}new Map;const Ie=i.startTransition;a.flushSync,i.useId;function Ne(e){let{basename:t,children:n,future:i,window:o}=e,s=r.useRef();null==s.current&&(s.current=function(e){return void 0===e&&(e={}),g((function(e,t){let{pathname:n="/",search:r="",hash:i=""}=m(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),p("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:f(t))}),(function(e,t){u("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),e)}({window:o,v5Compat:!0}));let a=s.current,[c,l]=r.useState({action:a.action,location:a.location}),{v7_startTransition:d}=i||{},h=r.useCallback((e=>{d&&Ie?Ie((()=>l(e))):l(e)}),[l,d]);return r.useLayoutEffect((()=>a.listen(h)),[a,h]),r.createElement(ve,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:a,future:i})}const Ce="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,we=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Re=r.forwardRef((function(t,n){let i,{onClick:o,relative:s,reloadDocument:a,replace:c,state:l,target:u,to:h,preventScrollReset:p,unstable_viewTransition:m}=t,g=Te(t,be),{basename:y}=r.useContext(q),v=!1;if("string"===typeof h&&we.test(h)&&(i=h,Ce))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=D(t.pathname,y);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:v=!0}catch(e){}let _=function(e,t){let{relative:n}=void 0===t?{}:t;X()||d(!1);let{basename:i,navigator:o}=r.useContext(q),{hash:s,pathname:a,search:c}=re(e,{relative:n}),l=a;return"/"!==i&&(l="/"===a?i:j([i,a])),o.createHref({pathname:l,search:c,hash:s})}(h,{relative:s}),E=function(e,t){let{target:n,replace:i,state:o,preventScrollReset:s,relative:a,unstable_viewTransition:c}=void 0===t?{}:t,l=ee(),d=Z(),u=re(e,{relative:a});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:f(d)===f(u);l(e,{replace:n,state:o,preventScrollReset:s,relative:a,unstable_viewTransition:c})}}),[d,l,u,i,o,n,e,s,a,c])}(h,{replace:c,state:l,target:u,preventScrollReset:p,relative:s,unstable_viewTransition:m});return r.createElement("a",Se({},g,{href:i||_,onClick:v||a?o:function(e){o&&o(e),e.defaultPrevented||E(e)},ref:n,target:u}))}));var Ae,Oe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ae||(Ae={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Oe||(Oe={}));var Me=__webpack_require__(579);const De=()=>(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsxs)("footer",{children:[(0,Me.jsx)("div",{className:"footer-top",children:(0,Me.jsx)("div",{className:"container",children:(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-5",children:[(0,Me.jsx)("h5",{children:"Useful Links"}),(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-sm-6",children:(0,Me.jsxs)("ul",{className:"list-unstyled",children:[(0,Me.jsx)("li",{children:(0,Me.jsxs)(Re,{to:"/",children:[(0,Me.jsx)("i",{className:"fa fa-caret-right"})," Home"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Re,{to:"/about-us",children:[(0,Me.jsx)("i",{className:"fa fa-caret-right"})," About Us"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Re,{to:"/contact-us",children:[(0,Me.jsx)("i",{className:"fa fa-caret-right"})," Contact Us"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Re,{to:"/privacy-policy",children:[(0,Me.jsx)("i",{className:"fa fa-caret-right"})," Privacy Policy"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Re,{to:"/faq",children:[(0,Me.jsx)("i",{className:"fa fa-caret-right"})," FAQs"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Re,{to:"#.",children:[(0,Me.jsx)("i",{className:"fa fa-caret-right"})," Blog"]})})]})}),(0,Me.jsx)("div",{className:"col-sm-6",children:(0,Me.jsxs)("ul",{className:"list-unstyled",children:[(0,Me.jsx)("li",{children:(0,Me.jsxs)(Re,{to:"/terms-and-conditions",children:[(0,Me.jsx)("i",{className:"fa fa-caret-right"})," Terms & Conditions"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Re,{to:"#.",children:[(0,Me.jsx)("i",{className:"fa fa-caret-right"})," Refund & Cancellation Policy"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Re,{to:"/customer_support",children:[(0,Me.jsx)("i",{className:"fa fa-caret-right"})," Customer Support"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Re,{to:"/disclaimer",children:[(0,Me.jsx)("i",{className:"fa fa-caret-right"})," Disclaimer"]})})]})})]})]}),(0,Me.jsxs)("div",{className:"col-md-3",children:[(0,Me.jsx)("h5",{children:"Social Links"}),(0,Me.jsxs)("ul",{className:"social-icon",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"#.",title:"",target:"_blank",children:(0,Me.jsx)("p",{children:(0,Me.jsx)("i",{className:"fa fa-facebook-f"})})})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"#.",title:"",target:"_blank",className:"mx-1",children:(0,Me.jsx)("p",{children:(0,Me.jsx)("i",{className:"fa fa-twitter"})})})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"#.",title:"",target:"_blank",children:(0,Me.jsx)("p",{children:(0,Me.jsx)("i",{className:"fa fa-linkedin"})})})})]}),(0,Me.jsx)("h5",{className:"mt20",children:"Download App"}),(0,Me.jsx)(Re,{to:"#",children:(0,Me.jsx)("img",{src:"./assets/images/google-play.png",width:120,alt:""})}),(0,Me.jsx)(Re,{to:"#",children:(0,Me.jsx)("img",{src:"./assets/images/app-store.png",width:120,alt:"",className:"mx-1"})})]}),(0,Me.jsxs)("div",{className:"col-md-4 addressBx",children:[(0,Me.jsx)("h5",{children:"Office Address"}),(0,Me.jsxs)("ul",{children:[(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-home"})," ",(0,Me.jsx)("span",{className:"text16",children:"Dizital"})]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"}),"P\xf6seldorfer Weg 13, 20148 Hamburg"]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-phone"})," ",(0,Me.jsx)(Re,{to:"tel:03341816636",children:"+4901728250794"})]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-envelope"})," ",(0,Me.jsx)(Re,{to:"mailto:support@dzital.de",children:"ak@dzital.com"})]})]})]})]})})}),(0,Me.jsx)("div",{className:"footer-bottom",children:(0,Me.jsx)("div",{className:"container",children:(0,Me.jsx)("div",{className:"row",children:(0,Me.jsx)("div",{className:"col-xs-12",align:"center",children:"\xa9 copyright 2023 dzital.de All rights reserved."})})})})]})});var ke=__webpack_require__(8139),xe=__webpack_require__.n(ke);const Le=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},Pe=r.createContext(null);var je=__webpack_require__(8168),Ue=__webpack_require__(8587);__webpack_require__(2740);function Fe(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function ze(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function Ve(e,t){return Object.keys(t).reduce((function(n,i){var o,s=n,a=s[Fe(i)],c=s[i],l=(0,Ue.A)(s,[Fe(i),i].map(ze)),d=t[i],u=function(e,t,n){var i=(0,r.useRef)(void 0!==e),o=(0,r.useState)(t),s=o[0],a=o[1],c=void 0!==e,l=i.current;return i.current=c,!c&&l&&s!==t&&a(t),[c?e:s,(0,r.useCallback)((function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n&&n.apply(void 0,[e].concat(r)),a(e)}),[n])]}(c,a,e[d]),h=u[0],p=u[1];return(0,je.A)({},l,((o={})[i]=h,o[d]=p,o))}),e)}function Be(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function Ge(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function He(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}Be.__suppressDeprecationWarning=!0,Ge.__suppressDeprecationWarning=!0,He.__suppressDeprecationWarning=!0;const We=["xxl","xl","lg","md","sm","xs"],Ye="xs",qe=r.createContext({prefixes:{},breakpoints:We,minBreakpoint:Ye}),{Consumer:Ke,Provider:Qe}=qe;function Je(e,t){const{prefixes:n}=(0,r.useContext)(qe);return e||n[t]||t}function Xe(){const{dir:e}=(0,r.useContext)(qe);return"rtl"===e}const Ze=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i,...o}=e;n=Je(n,"navbar-brand");const s=i||(o.href?"a":"span");return(0,Me.jsx)(s,{...o,ref:t,className:xe()(r,n)})}));Ze.displayName="NavbarBrand";const $e=Ze;function et(e){return e&&e.ownerDocument||document}function tt(e,t){return function(e){var t=et(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var nt=/([A-Z])/g;var rt=/^ms-/;function it(e){return function(e){return e.replace(nt,"-$1").toLowerCase()}(e).replace(rt,"-ms-")}var ot=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const st=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(it(t))||tt(e).getPropertyValue(it(t));Object.keys(t).forEach((function(i){var o=t[i];o||0===o?!function(e){return!(!e||!ot.test(e))}(i)?n+=it(i)+": "+o+";":r+=i+"("+o+") ":e.style.removeProperty(it(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};function at(e,t){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},at(e,t)}function ct(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,at(e,t)}const lt=!1,dt=r.createContext(null);var ut="unmounted",ht="exited",pt="entering",ft="entered",mt="exiting",gt=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=ht,r.appearStatus=pt):i=ft:i=t.unmountOnExit||t.mountOnEnter?ut:ht,r.state={status:i},r.nextCallback=null,r}ct(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===ut?{status:ht}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==pt&&n!==ft&&(t=pt):n!==pt&&n!==ft||(t=mt)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===pt){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ht&&this.setState({status:ut})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[s.findDOMNode(this),r],o=i[0],a=i[1],c=this.getTimeouts(),l=r?c.appear:c.enter;!e&&!n||lt?this.safeSetState({status:ft},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:pt},(function(){t.props.onEntering(o,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:ft},(function(){t.props.onEntered(o,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:s.findDOMNode(this);t&&!lt?(this.props.onExit(r),this.safeSetState({status:mt},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:ht},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:ht},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===ut)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,Ue.A)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(dt.Provider,{value:null},"function"===typeof n?n(e,i):r.cloneElement(r.Children.only(n),i))},t}(r.Component);function yt(){}gt.contextType=dt,gt.propTypes={},gt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:yt,onEntering:yt,onEntered:yt,onExit:yt,onExiting:yt,onExited:yt},gt.UNMOUNTED=ut,gt.EXITED=ht,gt.ENTERING=pt,gt.ENTERED=ft,gt.EXITING=mt;const vt=gt,_t=!("undefined"===typeof window||!window.document||!window.document.createElement);var Et=!1,St=!1;try{var Tt={get passive(){return Et=!0},get once(){return St=Et=!0}};_t&&(window.addEventListener("test",Tt,Tt),window.removeEventListener("test",Tt,!0))}catch(e){}const bt=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!St){var i=r.once,o=r.capture,s=n;!St&&i&&(s=n.__once||function e(r){this.removeEventListener(t,e,o),n.call(this,r)},n.__once=s),e.addEventListener(t,s,Et?r:o)}e.addEventListener(t,n,r)};const It=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};const Nt=function(e,t,n,r){return bt(e,t,n,r),function(){It(e,t,n,r)}};function Ct(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),o=Nt(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),o()}}function wt(e,t,n,r){null==n&&(n=function(e){var t=st(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=Ct(e,n,r),o=Nt(e,"transitionend",t);return function(){i(),o()}}function Rt(e,t){const n=st(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function At(e,t){const n=Rt(e,"transitionDuration"),r=Rt(e,"transitionDelay"),i=wt(e,(n=>{n.target===e&&(i(),t(n))}),n+r)}const Ot=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e=>null!=e)).reduce(((e,t)=>{if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),null)};function Mt(e){e.offsetHeight}const Dt=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const kt=function(e,t){return(0,r.useMemo)((()=>function(e,t){const n=Dt(e),r=Dt(t);return e=>{n&&n(e),r&&r(e)}}(e,t)),[e,t])};const xt=r.forwardRef(((e,t)=>{let{onEnter:n,onEntering:i,onEntered:o,onExit:a,onExiting:c,onExited:l,addEndListener:d,children:u,childRef:h,...p}=e;const f=(0,r.useRef)(null),m=kt(f,h),g=e=>{var t;m((t=e)&&"setState"in t?s.findDOMNode(t):null!=t?t:null)},y=e=>t=>{e&&f.current&&e(f.current,t)},v=(0,r.useCallback)(y(n),[n]),_=(0,r.useCallback)(y(i),[i]),E=(0,r.useCallback)(y(o),[o]),S=(0,r.useCallback)(y(a),[a]),T=(0,r.useCallback)(y(c),[c]),b=(0,r.useCallback)(y(l),[l]),I=(0,r.useCallback)(y(d),[d]);return(0,Me.jsx)(vt,{ref:t,...p,onEnter:v,onEntered:E,onEntering:_,onExit:S,onExited:b,onExiting:T,addEndListener:I,nodeRef:f,children:"function"===typeof u?(e,t)=>u(e,{...t,ref:g}):r.cloneElement(u,{ref:g})})})),Lt=xt,Pt={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function jt(e,t){const n=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],r=Pt[e];return n+parseInt(st(t,r[0]),10)+parseInt(st(t,r[1]),10)}const Ut={[ht]:"collapse",[mt]:"collapsing",[pt]:"collapsing",[ft]:"collapse show"},Ft=r.forwardRef(((e,t)=>{let{onEnter:n,onEntering:i,onEntered:o,onExit:s,onExiting:a,className:c,children:l,dimension:d="height",in:u=!1,timeout:h=300,mountOnEnter:p=!1,unmountOnExit:f=!1,appear:m=!1,getDimensionValue:g=jt,...y}=e;const v="function"===typeof d?d():d,_=(0,r.useMemo)((()=>Ot((e=>{e.style[v]="0"}),n)),[v,n]),E=(0,r.useMemo)((()=>Ot((e=>{const t="scroll".concat(v[0].toUpperCase()).concat(v.slice(1));e.style[v]="".concat(e[t],"px")}),i)),[v,i]),S=(0,r.useMemo)((()=>Ot((e=>{e.style[v]=null}),o)),[v,o]),T=(0,r.useMemo)((()=>Ot((e=>{e.style[v]="".concat(g(v,e),"px"),Mt(e)}),s)),[s,g,v]),b=(0,r.useMemo)((()=>Ot((e=>{e.style[v]=null}),a)),[v,a]);return(0,Me.jsx)(Lt,{ref:t,addEndListener:At,...y,"aria-expanded":y.role?u:null,onEnter:_,onEntering:E,onEntered:S,onExit:T,onExiting:b,childRef:l.ref,in:u,timeout:h,mountOnEnter:p,unmountOnExit:f,appear:m,children:(e,t)=>r.cloneElement(l,{...t,className:xe()(c,l.props.className,Ut[e],"width"===v&&"collapse-horizontal")})})})),zt=Ft,Vt=r.createContext(null);Vt.displayName="NavbarContext";const Bt=Vt,Gt=r.forwardRef(((e,t)=>{let{children:n,bsPrefix:i,...o}=e;i=Je(i,"navbar-collapse");const s=(0,r.useContext)(Bt);return(0,Me.jsx)(zt,{in:!(!s||!s.expanded),...o,children:(0,Me.jsx)("div",{ref:t,className:i,children:n})})}));Gt.displayName="NavbarCollapse";const Ht=Gt;const Wt=function(e){const t=(0,r.useRef)(e);return(0,r.useEffect)((()=>{t.current=e}),[e]),t};function Yt(e){const t=Wt(e);return(0,r.useCallback)((function(){return t.current&&t.current(...arguments)}),[t])}const qt=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,children:o,label:s="Toggle navigation",as:a="button",onClick:c,...l}=e;n=Je(n,"navbar-toggler");const{onToggle:d,expanded:u}=(0,r.useContext)(Bt)||{},h=Yt((e=>{c&&c(e),d&&d()}));return"button"===a&&(l.type="button"),(0,Me.jsx)(a,{...l,ref:t,onClick:h,"aria-label":s,className:xe()(i,n,!u&&"collapsed"),children:o||(0,Me.jsx)("span",{className:"".concat(n,"-icon")})})}));qt.displayName="NavbarToggle";const Kt=qt,Qt="undefined"!==typeof __webpack_require__.g&&__webpack_require__.g.navigator&&"ReactNative"===__webpack_require__.g.navigator.product,Jt="undefined"!==typeof document||Qt?r.useLayoutEffect:r.useEffect,Xt=new WeakMap,Zt=(e,t)=>{if(!e||!t)return;const n=Xt.get(t)||new Map;Xt.set(t,n);let r=n.get(e);return r||(r=t.matchMedia(e),r.refCount=0,n.set(r.media,r)),r};function $t(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"===typeof window?void 0:window;const n=Zt(e,t),[i,o]=(0,r.useState)((()=>!!n&&n.matches));return Jt((()=>{let n=Zt(e,t);if(!n)return o(!1);let r=Xt.get(t);const i=()=>{o(n.matches)};return n.refCount++,n.addListener(i),i(),()=>{n.removeListener(i),n.refCount--,n.refCount<=0&&(null==r||r.delete(n.media)),n=void 0}}),[e]),i}const en=function(e){const t=Object.keys(e);function n(e,t){return e===t?t:e?"".concat(e," and ").concat(t):t}function i(n){const r=function(e){return t[Math.min(t.indexOf(e)+1,t.length-1)]}(n);let i=e[r];return i="number"===typeof i?"".concat(i-.2,"px"):"calc(".concat(i," - 0.2px)"),"(max-width: ".concat(i,")")}return function(t,o,s){let a;"object"===typeof t?(a=t,s=o,o=!0):(o=o||!0,a={[t]:o});let c=(0,r.useMemo)((()=>Object.entries(a).reduce(((t,r)=>{let[o,s]=r;return"up"!==s&&!0!==s||(t=n(t,function(t){let n=e[t];return"number"===typeof n&&(n="".concat(n,"px")),"(min-width: ".concat(n,")")}(o))),"down"!==s&&!0!==s||(t=n(t,i(o))),t}),"")),[JSON.stringify(a)]);return $t(c,s)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),tn=en;function nn(t){void 0===t&&(t=et());try{var n=t.activeElement;return n&&n.nodeName?n:null}catch(e){return t.body}}function rn(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function on(){const e=(0,r.useRef)(!0),t=(0,r.useRef)((()=>e.current));return(0,r.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),t.current}function sn(e){const t=function(e){const t=(0,r.useRef)(e);return t.current=e,t}(e);(0,r.useEffect)((()=>()=>t.current()),[])}function an(e){const t=(0,r.useRef)(null);return(0,r.useEffect)((()=>{t.current=e})),t.current}const cn="data-rr-ui-";function ln(e){return"".concat(cn).concat(e)}const dn=ln("modal-open");const un=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]="".concat(parseInt(st(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(dn,""),st(r,t)}reset(){[...this.modals].forEach((e=>this.remove(e)))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(dn),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},hn=(0,r.createContext)(_t?window:void 0);hn.Provider;function pn(){return(0,r.useContext)(hn)}const fn=(e,t)=>_t?null==e?(t||et()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;const mn=function(e){let{children:t,in:n,onExited:i,mountOnEnter:o,unmountOnExit:s}=e;const a=(0,r.useRef)(null),c=(0,r.useRef)(n),l=Yt(i);(0,r.useEffect)((()=>{n?c.current=!0:l(a.current)}),[n,l]);const d=kt(a,t.ref),u=(0,r.cloneElement)(t,{ref:d});return n?u:s||!c.current&&o?null:u},gn=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function yn(e){let{onEnter:t,onEntering:n,onEntered:i,onExit:o,onExiting:s,onExited:a,addEndListener:c,children:l}=e,d=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,gn);const u=(0,r.useRef)(null),h=kt(u,"function"===typeof l?null:l.ref),p=e=>t=>{e&&u.current&&e(u.current,t)},f=(0,r.useCallback)(p(t),[t]),m=(0,r.useCallback)(p(n),[n]),g=(0,r.useCallback)(p(i),[i]),y=(0,r.useCallback)(p(o),[o]),v=(0,r.useCallback)(p(s),[s]),_=(0,r.useCallback)(p(a),[a]),E=(0,r.useCallback)(p(c),[c]);return Object.assign({},d,{nodeRef:u},t&&{onEnter:f},n&&{onEntering:m},i&&{onEntered:g},o&&{onExit:y},s&&{onExiting:v},a&&{onExited:_},c&&{addEndListener:E},{children:"function"===typeof l?(e,t)=>l(e,Object.assign({},t,{ref:h})):(0,r.cloneElement)(l,{ref:h})})}const vn=["component"];const _n=r.forwardRef(((e,t)=>{let{component:n}=e;const r=yn(function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,vn));return(0,Me.jsx)(n,Object.assign({ref:t},r))})),En=_n;function Sn(e){let{children:t,in:n,onExited:i,onEntered:o,transition:s}=e;const[a,c]=(0,r.useState)(!n);n&&a&&c(!1);const l=function(e){let{in:t,onTransition:n}=e;const i=(0,r.useRef)(null),o=(0,r.useRef)(!0),s=Yt(n);return Jt((()=>{if(!i.current)return;let e=!1;return s({in:t,element:i.current,initial:o.current,isStale:()=>e}),()=>{e=!0}}),[t,s]),Jt((()=>(o.current=!1,()=>{o.current=!0})),[]),i}({in:!!n,onTransition:e=>{Promise.resolve(s(e)).then((()=>{e.isStale()||(e.in?null==o||o(e.element,e.initial):(c(!0),null==i||i(e.element)))}),(t=>{throw e.in||c(!0),t}))}}),d=kt(l,t.ref);return a&&!n?null:(0,r.cloneElement)(t,{ref:d})}function Tn(e,t,n){return e?(0,Me.jsx)(En,Object.assign({},n,{component:e})):t?(0,Me.jsx)(Sn,Object.assign({},n,{transition:t})):(0,Me.jsx)(mn,Object.assign({},n))}const bn=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let In;function Nn(e){const t=pn(),n=e||function(e){return In||(In=new un({ownerDocument:null==e?void 0:e.document})),In}(t),i=(0,r.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:(0,r.useCallback)((e=>{i.current.dialog=e}),[]),setBackdropRef:(0,r.useCallback)((e=>{i.current.backdrop=e}),[])})}const Cn=(0,r.forwardRef)(((e,t)=>{let{show:n=!1,role:i="dialog",className:o,style:a,children:c,backdrop:l=!0,keyboard:d=!0,onBackdropClick:u,onEscapeKeyDown:h,transition:p,runTransition:f,backdropTransition:m,runBackdropTransition:g,autoFocus:y=!0,enforceFocus:v=!0,restoreFocus:_=!0,restoreFocusOptions:E,renderDialog:S,renderBackdrop:T=(e=>(0,Me.jsx)("div",Object.assign({},e))),manager:b,container:I,onShow:N,onHide:C=(()=>{}),onExit:w,onExited:R,onExiting:A,onEnter:O,onEntering:M,onEntered:D}=e,k=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,bn);const x=pn(),L=function(e,t){const n=pn(),[i,o]=(0,r.useState)((()=>fn(e,null==n?void 0:n.document)));if(!i){const t=fn(e);t&&o(t)}return(0,r.useEffect)((()=>{t&&i&&t(i)}),[t,i]),(0,r.useEffect)((()=>{const t=fn(e);t!==i&&o(t)}),[e,i]),i}(I),P=Nn(b),j=on(),U=an(n),[F,z]=(0,r.useState)(!n),V=(0,r.useRef)(null);(0,r.useImperativeHandle)(t,(()=>P),[P]),_t&&!U&&n&&(V.current=nn(null==x?void 0:x.document)),n&&F&&z(!1);const B=Yt((()=>{if(P.add(),K.current=Nt(document,"keydown",Y),q.current=Nt(document,"focus",(()=>setTimeout(H)),!0),N&&N(),y){var e,t;const n=nn(null!=(e=null==(t=P.dialog)?void 0:t.ownerDocument)?e:null==x?void 0:x.document);P.dialog&&n&&!rn(P.dialog,n)&&(V.current=n,P.dialog.focus())}})),G=Yt((()=>{var e;(P.remove(),null==K.current||K.current(),null==q.current||q.current(),_)&&(null==(e=V.current)||null==e.focus||e.focus(E),V.current=null)}));(0,r.useEffect)((()=>{n&&L&&B()}),[n,L,B]),(0,r.useEffect)((()=>{F&&G()}),[F,G]),sn((()=>{G()}));const H=Yt((()=>{if(!v||!j()||!P.isTopModal())return;const e=nn(null==x?void 0:x.document);P.dialog&&e&&!rn(P.dialog,e)&&P.dialog.focus()})),W=Yt((e=>{e.target===e.currentTarget&&(null==u||u(e),!0===l&&C())})),Y=Yt((e=>{d&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&P.isTopModal()&&(null==h||h(e),e.defaultPrevented||C())})),q=(0,r.useRef)(),K=(0,r.useRef)();if(!L)return null;const Q=Object.assign({role:i,ref:P.setDialogRef,"aria-modal":"dialog"===i||void 0},k,{style:a,className:o,tabIndex:-1});let J=S?S(Q):(0,Me.jsx)("div",Object.assign({},Q,{children:r.cloneElement(c,{role:"document"})}));J=Tn(p,f,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:w,onExiting:A,onExited:function(){z(!0),null==R||R(...arguments)},onEnter:O,onEntering:M,onEntered:D,children:J});let X=null;return l&&(X=T({ref:P.setBackdropRef,onClick:W}),X=Tn(m,g,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:X})),(0,Me.jsx)(Me.Fragment,{children:s.createPortal((0,Me.jsxs)(Me.Fragment,{children:[X,J]}),L)})}));Cn.displayName="Modal";const wn=Object.assign(Cn,{Manager:un}),Rn={[pt]:"show",[ft]:"show"},An=r.forwardRef(((e,t)=>{let{className:n,children:i,transitionClasses:o={},onEnter:s,...a}=e;const c={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...a},l=(0,r.useCallback)(((e,t)=>{Mt(e),null==s||s(e,t)}),[s]);return(0,Me.jsx)(Lt,{ref:t,addEndListener:At,...c,onEnter:l,childRef:i.ref,children:(e,t)=>r.cloneElement(i,{...t,className:xe()("fade",n,i.props.className,Rn[e],o[e])})})}));An.displayName="Fade";const On=An,Mn=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=Je(r,"offcanvas-body"),(0,Me.jsx)(i,{ref:t,className:xe()(n,r),...o})}));Mn.displayName="OffcanvasBody";const Dn=Mn,kn={[pt]:"show",[ft]:"show"},xn=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,children:o,in:s=!1,mountOnEnter:a=!1,unmountOnExit:c=!1,appear:l=!1,...d}=e;return n=Je(n,"offcanvas"),(0,Me.jsx)(Lt,{ref:t,addEndListener:At,in:s,mountOnEnter:a,unmountOnExit:c,appear:l,...d,childRef:o.ref,children:(e,t)=>r.cloneElement(o,{...t,className:xe()(i,o.props.className,(e===pt||e===mt)&&"".concat(n,"-toggling"),kn[e])})})}));xn.displayName="OffcanvasToggling";const Ln=xn,Pn=r.createContext({onHide(){}});var jn=__webpack_require__(5173),Un=__webpack_require__.n(jn);const Fn={"aria-label":Un().string,onClick:Un().func,variant:Un().oneOf(["white"])},zn=r.forwardRef(((e,t)=>{let{className:n,variant:r,"aria-label":i="Close",...o}=e;return(0,Me.jsx)("button",{ref:t,type:"button",className:xe()("btn-close",r&&"btn-close-".concat(r),n),"aria-label":i,...o})}));zn.displayName="CloseButton",zn.propTypes=Fn;const Vn=zn,Bn=r.forwardRef(((e,t)=>{let{closeLabel:n="Close",closeVariant:i,closeButton:o=!1,onHide:s,children:a,...c}=e;const l=(0,r.useContext)(Pn),d=Yt((()=>{null==l||l.onHide(),null==s||s()}));return(0,Me.jsxs)("div",{ref:t,...c,children:[a,o&&(0,Me.jsx)(Vn,{"aria-label":n,variant:i,onClick:d})]})})),Gn=Bn,Hn=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:i="Close",closeButton:o=!1,...s}=e;return n=Je(n,"offcanvas-header"),(0,Me.jsx)(Gn,{ref:t,...s,className:xe()(r,n),closeLabel:i,closeButton:o})}));Hn.displayName="OffcanvasHeader";const Wn=Hn,Yn=e=>r.forwardRef(((t,n)=>(0,Me.jsx)("div",{...t,ref:n,className:xe()(t.className,e)}))),qn=Yn("h5"),Kn=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=qn,...o}=e;return r=Je(r,"offcanvas-title"),(0,Me.jsx)(i,{ref:t,className:xe()(n,r),...o})}));Kn.displayName="OffcanvasTitle";const Qn=Kn;var Jn=Function.prototype.bind.call(Function.prototype.call,[].slice);function Xn(e,t){return Jn(e.querySelectorAll(t))}function Zn(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const $n=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",er=".sticky-top",tr=".navbar-toggler";class nr extends un{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,st(t,{[e]:"".concat(parseFloat(st(t,e))+n,"px")})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],st(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();var n,r;if(r="modal-open",(n=t).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";Xn(t,$n).forEach((t=>this.adjustAndStore(i,t,e.scrollBarWidth))),Xn(t,er).forEach((t=>this.adjustAndStore(o,t,-e.scrollBarWidth))),Xn(t,tr).forEach((t=>this.adjustAndStore(o,t,e.scrollBarWidth)))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();var n,r;r="modal-open",(n=t).classList?n.classList.remove(r):"string"===typeof n.className?n.className=Zn(n.className,r):n.setAttribute("class",Zn(n.className&&n.className.baseVal||"",r));const i=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";Xn(t,$n).forEach((e=>this.restore(i,e))),Xn(t,er).forEach((e=>this.restore(o,e))),Xn(t,tr).forEach((e=>this.restore(o,e)))}}let rr;function ir(e){return rr||(rr=new nr(e)),rr}const or=nr;function sr(e){return(0,Me.jsx)(Ln,{...e})}function ar(e){return(0,Me.jsx)(On,{...e})}const cr=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,children:o,"aria-labelledby":s,placement:a="start",responsive:c,show:l=!1,backdrop:d=!0,keyboard:u=!0,scroll:h=!1,onEscapeKeyDown:p,onShow:f,onHide:m,container:g,autoFocus:y=!0,enforceFocus:v=!0,restoreFocus:_=!0,restoreFocusOptions:E,onEntered:S,onExit:T,onExiting:b,onEnter:I,onEntering:N,onExited:C,backdropClassName:w,manager:R,renderStaticNode:A=!1,...O}=e;const M=(0,r.useRef)();n=Je(n,"offcanvas");const{onToggle:D}=(0,r.useContext)(Bt)||{},[k,x]=(0,r.useState)(!1),L=tn(c||"xs","up");(0,r.useEffect)((()=>{x(c?l&&!L:l)}),[l,c,L]);const P=Yt((()=>{null==D||D(),null==m||m()})),j=(0,r.useMemo)((()=>({onHide:P})),[P]);const U=(0,r.useCallback)((e=>(0,Me.jsx)("div",{...e,className:xe()("".concat(n,"-backdrop"),w)})),[w,n]),F=e=>(0,Me.jsx)("div",{...e,...O,className:xe()(i,c?"".concat(n,"-").concat(c):n,"".concat(n,"-").concat(a)),"aria-labelledby":s,children:o});return(0,Me.jsxs)(Me.Fragment,{children:[!k&&(c||A)&&F({}),(0,Me.jsx)(Pn.Provider,{value:j,children:(0,Me.jsx)(wn,{show:k,ref:t,backdrop:d,container:g,keyboard:u,autoFocus:y,enforceFocus:v&&!h,restoreFocus:_,restoreFocusOptions:E,onEscapeKeyDown:p,onShow:f,onHide:P,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==I||I(e,...n)},onEntering:N,onEntered:S,onExit:T,onExiting:b,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==C||C(...n)},manager:R||(h?(M.current||(M.current=new or({handleContainerOverflow:!1})),M.current):ir()),transition:sr,backdropTransition:ar,renderBackdrop:U,renderDialog:F})})]})}));cr.displayName="Offcanvas";const lr=Object.assign(cr,{Body:Dn,Header:Wn,Title:Qn}),dr=r.forwardRef(((e,t)=>{const n=(0,r.useContext)(Bt);return(0,Me.jsx)(lr,{ref:t,show:!(null==n||!n.expanded),...e,renderStaticNode:!0})}));dr.displayName="NavbarOffcanvas";const ur=dr,hr=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="span",...o}=e;return r=Je(r,"navbar-text"),(0,Me.jsx)(i,{ref:t,className:xe()(n,r),...o})}));hr.displayName="NavbarText";const pr=hr,fr=r.forwardRef(((e,t)=>{const{bsPrefix:n,expand:i=!0,variant:o="light",bg:s,fixed:a,sticky:c,className:l,as:d="nav",expanded:u,onToggle:h,onSelect:p,collapseOnSelect:f=!1,...m}=Ve(e,{expanded:"onToggle"}),g=Je(n,"navbar"),y=(0,r.useCallback)((function(){null==p||p(...arguments),f&&u&&(null==h||h(!1))}),[p,f,u,h]);void 0===m.role&&"nav"!==d&&(m.role="navigation");let v="".concat(g,"-expand");"string"===typeof i&&(v="".concat(v,"-").concat(i));const _=(0,r.useMemo)((()=>({onToggle:()=>null==h?void 0:h(!u),bsPrefix:g,expanded:!!u,expand:i})),[g,u,i,h]);return(0,Me.jsx)(Bt.Provider,{value:_,children:(0,Me.jsx)(Pe.Provider,{value:y,children:(0,Me.jsx)(d,{ref:t,...m,className:xe()(l,g,i&&v,o&&"".concat(g,"-").concat(o),s&&"bg-".concat(s),c&&"sticky-".concat(c),a&&"fixed-".concat(a))})})})}));fr.displayName="Navbar";const mr=Object.assign(fr,{Brand:$e,Collapse:Ht,Offcanvas:ur,Text:pr,Toggle:Kt}),gr=r.forwardRef(((e,t)=>{let{bsPrefix:n,fluid:r=!1,as:i="div",className:o,...s}=e;const a=Je(n,"container"),c="string"===typeof r?"-".concat(r):"-fluid";return(0,Me.jsx)(i,{ref:t,...s,className:xe()(o,r?"".concat(a).concat(c):a)})}));gr.displayName="Container";const yr=gr;__webpack_require__(9197);function vr(){const[,e]=(0,r.useReducer)((e=>!e),!1);return e}const _r=r.createContext(null);_r.displayName="NavContext";const Er=_r,Sr=r.createContext(null),Tr=["as","disabled"];function br(e){let{tagName:t,disabled:n,href:r,target:i,rel:o,role:s,onClick:a,tabIndex:c=0,type:l}=e;t||(t=null!=r||null!=i||null!=o?"a":"button");const d={tagName:t};if("button"===t)return[{type:l||"button",disabled:n},d];const u=e=>{(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==a||a(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=s?s:"button",disabled:void 0,tabIndex:n?void 0:c,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?o:void 0,onClick:u,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),u(e))}},d]}const Ir=r.forwardRef(((e,t)=>{let{as:n,disabled:r}=e,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Tr);const[o,{tagName:s}]=br(Object.assign({tagName:n,disabled:r},i));return(0,Me.jsx)(s,Object.assign({},i,o,{ref:t}))}));Ir.displayName="Button";const Nr=Ir,Cr=["as","active","eventKey"];function wr(e){let{key:t,onClick:n,active:i,id:o,role:s,disabled:a}=e;const c=(0,r.useContext)(Pe),l=(0,r.useContext)(Er),d=(0,r.useContext)(Sr);let u=i;const h={role:s};if(l){s||"tablist"!==l.role||(h.role="tab");const e=l.getControllerId(null!=t?t:null),n=l.getControlledId(null!=t?t:null);h[ln("event-key")]=t,h.id=e||o,u=null==i&&null!=t?l.activeKey===t:i,!u&&(null!=d&&d.unmountOnExit||null!=d&&d.mountOnEnter)||(h["aria-controls"]=n)}return"tab"===h.role&&(h["aria-selected"]=u,u||(h.tabIndex=-1),a&&(h.tabIndex=-1,h["aria-disabled"]=!0)),h.onClick=Yt((e=>{a||(null==n||n(e),null!=t&&c&&!e.isPropagationStopped()&&c(t,e))})),[h,{isActive:u}]}const Rr=r.forwardRef(((e,t)=>{let{as:n=Nr,active:r,eventKey:i}=e,o=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Cr);const[s,a]=wr(Object.assign({key:Le(i,o.href),active:r},o));return s[ln("active")]=a.isActive,(0,Me.jsx)(n,Object.assign({},o,s,{ref:t}))}));Rr.displayName="NavItem";const Ar=Rr,Or=["as","onSelect","activeKey","role","onKeyDown"];const Mr=()=>{},Dr=ln("event-key"),kr=r.forwardRef(((e,t)=>{let{as:n="div",onSelect:i,activeKey:o,role:s,onKeyDown:a}=e,c=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Or);const l=vr(),d=(0,r.useRef)(!1),u=(0,r.useContext)(Pe),h=(0,r.useContext)(Sr);let p,f;h&&(s=s||"tablist",o=h.activeKey,p=h.getControlledId,f=h.getControllerId);const m=(0,r.useRef)(null),g=e=>{const t=m.current;if(!t)return null;const n=Xn(t,"[".concat(Dr,"]:not([aria-disabled=true])")),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;const i=n.indexOf(r);if(-1===i)return null;let o=i+e;return o>=n.length&&(o=0),o<0&&(o=n.length-1),n[o]},y=(e,t)=>{null!=e&&(null==i||i(e,t),null==u||u(e,t))};(0,r.useEffect)((()=>{if(m.current&&d.current){const e=m.current.querySelector("[".concat(Dr,"][aria-selected=true]"));null==e||e.focus()}d.current=!1}));const v=kt(t,m);return(0,Me.jsx)(Pe.Provider,{value:y,children:(0,Me.jsx)(Er.Provider,{value:{role:s,activeKey:Le(o),getControlledId:p||Mr,getControllerId:f||Mr},children:(0,Me.jsx)(n,Object.assign({},c,{onKeyDown:e=>{if(null==a||a(e),!h)return;let t;switch(e.key){case"ArrowLeft":case"ArrowUp":t=g(-1);break;case"ArrowRight":case"ArrowDown":t=g(1);break;default:return}var n;t&&(e.preventDefault(),y(t.dataset[(n="EventKey","".concat("rrUi").concat(n))]||null,e),d.current=!0,l())},ref:v,role:s}))})})}));kr.displayName="Nav";const xr=Object.assign(kr,{Item:Ar}),Lr=r.createContext(null);Lr.displayName="CardHeaderContext";const Pr=Lr,jr=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=Je(r,"nav-item"),(0,Me.jsx)(i,{ref:t,className:xe()(n,r),...o})}));jr.displayName="NavItem";const Ur=jr;function Fr(){return(0,r.useState)(null)}new WeakMap;const zr=["onKeyDown"];const Vr=r.forwardRef(((e,t)=>{let{onKeyDown:n}=e,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,zr);const[i]=br(Object.assign({tagName:"a"},r)),o=Yt((e=>{i.onKeyDown(e),null==n||n(e)}));return(s=r.href)&&"#"!==s.trim()&&"button"!==r.role?(0,Me.jsx)("a",Object.assign({ref:t},r,{onKeyDown:n})):(0,Me.jsx)("a",Object.assign({ref:t},r,i,{onKeyDown:o}));var s}));Vr.displayName="Anchor";const Br=Vr,Gr=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i=Br,active:o,eventKey:s,disabled:a=!1,...c}=e;n=Je(n,"nav-link");const[l,d]=wr({key:Le(s,c.href),active:o,disabled:a,...c});return(0,Me.jsx)(i,{...c,...l,ref:t,disabled:a,className:xe()(r,n,a&&"disabled",d.isActive&&"active")})}));Gr.displayName="NavLink";const Hr=Gr,Wr=r.forwardRef(((e,t)=>{const{as:n="div",bsPrefix:i,variant:o,fill:s=!1,justify:a=!1,navbar:c,navbarScroll:l,className:d,activeKey:u,...h}=Ve(e,{activeKey:"onSelect"}),p=Je(i,"nav");let f,m,g=!1;const y=(0,r.useContext)(Bt),v=(0,r.useContext)(Pr);return y?(f=y.bsPrefix,g=null==c||c):v&&({cardHeaderBsPrefix:m}=v),(0,Me.jsx)(xr,{as:n,ref:t,activeKey:u,className:xe()(d,{[p]:!g,["".concat(f,"-nav")]:g,["".concat(f,"-nav-scroll")]:g&&l,["".concat(m,"-").concat(o)]:!!m,["".concat(p,"-").concat(o)]:!!o,["".concat(p,"-fill")]:s,["".concat(p,"-justified")]:a}),...h})}));Wr.displayName="Nav";const Yr=Object.assign(Wr,{Item:Ur,Link:Hr}),qr=(0,r.createContext)(),Kr=()=>(0,r.useContext)(qr),Qr=r.forwardRef(((e,t)=>{let{bsPrefix:n,variant:r,animation:i="border",size:o,as:s="div",className:a,...c}=e;n=Je(n,"spinner");const l="".concat(n,"-").concat(i);return(0,Me.jsx)(s,{ref:t,...c,className:xe()(a,l,o&&"".concat(l,"-").concat(o),r&&"text-".concat(r))})}));Qr.displayName="Spinner";const Jr=Qr;function Xr(e,t,n){const i=(0,r.useRef)(void 0!==e),[o,s]=(0,r.useState)(t),a=void 0!==e,c=i.current;return i.current=a,!a&&c&&o!==t&&s(t),[a?e:o,(0,r.useCallback)((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,...o]=t;let a=null==n?void 0:n(i,...o);return s(i),a}),[n])]}const Zr=r.createContext(null);var $r=Object.prototype.hasOwnProperty;function ei(e,t,n){for(n of e.keys())if(ti(n,t))return n}function ti(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&ti(e[r],t[r]););return-1===r}if(n===Set){if(e.size!==t.size)return!1;for(r of e){if((i=r)&&"object"===typeof i&&!(i=ei(t,i)))return!1;if(!t.has(i))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e){if((i=r[0])&&"object"===typeof i&&!(i=ei(t,i)))return!1;if(!ti(r[1],t.get(i)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return-1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}if(!n||"object"===typeof e){for(n in r=0,e){if($r.call(e,n)&&++r&&!$r.call(t,n))return!1;if(!(n in t)||!ti(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!==e&&t!==t}const ni=function(e){const t=on();return[e[0],(0,r.useCallback)((n=>{if(t())return e[1](n)}),[t,e[1]])]};function ri(e){return e.split("-")[0]}function ii(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function oi(e){return e instanceof ii(e).Element||e instanceof Element}function si(e){return e instanceof ii(e).HTMLElement||e instanceof HTMLElement}function ai(e){return"undefined"!==typeof ShadowRoot&&(e instanceof ii(e).ShadowRoot||e instanceof ShadowRoot)}var ci=Math.max,li=Math.min,di=Math.round;function ui(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function hi(){return!/^((?!chrome|android).)*safari/i.test(ui())}function pi(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&si(e)&&(i=e.offsetWidth>0&&di(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&di(r.height)/e.offsetHeight||1);var s=(oi(e)?ii(e):window).visualViewport,a=!hi()&&n,c=(r.left+(a&&s?s.offsetLeft:0))/i,l=(r.top+(a&&s?s.offsetTop:0))/o,d=r.width/i,u=r.height/o;return{width:d,height:u,top:l,right:c+d,bottom:l+u,left:c,x:c,y:l}}function fi(e){var t=pi(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function mi(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&ai(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function gi(e){return e?(e.nodeName||"").toLowerCase():null}function yi(e){return ii(e).getComputedStyle(e)}function vi(e){return["table","td","th"].indexOf(gi(e))>=0}function _i(e){return((oi(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ei(e){return"html"===gi(e)?e:e.assignedSlot||e.parentNode||(ai(e)?e.host:null)||_i(e)}function Si(e){return si(e)&&"fixed"!==yi(e).position?e.offsetParent:null}function Ti(e){for(var t=ii(e),n=Si(e);n&&vi(n)&&"static"===yi(n).position;)n=Si(n);return n&&("html"===gi(n)||"body"===gi(n)&&"static"===yi(n).position)?t:n||function(e){var t=/firefox/i.test(ui());if(/Trident/i.test(ui())&&si(e)&&"fixed"===yi(e).position)return null;var n=Ei(e);for(ai(n)&&(n=n.host);si(n)&&["html","body"].indexOf(gi(n))<0;){var r=yi(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function bi(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ii(e,t,n){return ci(e,li(t,n))}function Ni(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Ci(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}var wi="top",Ri="bottom",Ai="right",Oi="left",Mi="auto",Di=[wi,Ri,Ai,Oi],ki="start",xi="end",Li="clippingParents",Pi="viewport",ji="popper",Ui="reference",Fi=Di.reduce((function(e,t){return e.concat([t+"-"+ki,t+"-"+xi])}),[]),zi=[].concat(Di,[Mi]).reduce((function(e,t){return e.concat([t,t+"-"+ki,t+"-"+xi])}),[]),Vi=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];const Bi={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=ri(n.placement),c=bi(a),l=[Oi,Ai].indexOf(a)>=0?"height":"width";if(o&&s){var d=function(e,t){return Ni("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Ci(e,Di))}(i.padding,n),u=fi(o),h="y"===c?wi:Oi,p="y"===c?Ri:Ai,f=n.rects.reference[l]+n.rects.reference[c]-s[c]-n.rects.popper[l],m=s[c]-n.rects.reference[c],g=Ti(o),y=g?"y"===c?g.clientHeight||0:g.clientWidth||0:0,v=f/2-m/2,_=d[h],E=y-u[l]-d[p],S=y/2-u[l]/2+v,T=Ii(_,S,E),b=c;n.modifiersData[r]=((t={})[b]=T,t.centerOffset=T-S,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&mi(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Gi(e){return e.split("-")[1]}var Hi={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Wi(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,s=e.offsets,a=e.position,c=e.gpuAcceleration,l=e.adaptive,d=e.roundOffsets,u=e.isFixed,h=s.x,p=void 0===h?0:h,f=s.y,m=void 0===f?0:f,g="function"===typeof d?d({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var y=s.hasOwnProperty("x"),v=s.hasOwnProperty("y"),_=Oi,E=wi,S=window;if(l){var T=Ti(n),b="clientHeight",I="clientWidth";if(T===ii(n)&&"static"!==yi(T=_i(n)).position&&"absolute"===a&&(b="scrollHeight",I="scrollWidth"),i===wi||(i===Oi||i===Ai)&&o===xi)E=Ri,m-=(u&&T===S&&S.visualViewport?S.visualViewport.height:T[b])-r.height,m*=c?1:-1;if(i===Oi||(i===wi||i===Ri)&&o===xi)_=Ai,p-=(u&&T===S&&S.visualViewport?S.visualViewport.width:T[I])-r.width,p*=c?1:-1}var N,C=Object.assign({position:a},l&&Hi),w=!0===d?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:di(n*i)/i||0,y:di(r*i)/i||0}}({x:p,y:m},ii(n)):{x:p,y:m};return p=w.x,m=w.y,c?Object.assign({},C,((N={})[E]=v?"0":"",N[_]=y?"0":"",N.transform=(S.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",N)):Object.assign({},C,((t={})[E]=v?m+"px":"",t[_]=y?p+"px":"",t.transform="",t))}const Yi={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,c=void 0===a||a,l={placement:ri(t.placement),variation:Gi(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Wi(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Wi(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var qi={passive:!0};const Ki={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,s=r.resize,a=void 0===s||s,c=ii(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&l.forEach((function(e){e.addEventListener("scroll",n.update,qi)})),a&&c.addEventListener("resize",n.update,qi),function(){o&&l.forEach((function(e){e.removeEventListener("scroll",n.update,qi)})),a&&c.removeEventListener("resize",n.update,qi)}},data:{}};var Qi={left:"right",right:"left",bottom:"top",top:"bottom"};function Ji(e){return e.replace(/left|right|bottom|top/g,(function(e){return Qi[e]}))}var Xi={start:"end",end:"start"};function Zi(e){return e.replace(/start|end/g,(function(e){return Xi[e]}))}function $i(e){var t=ii(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function eo(e){return pi(_i(e)).left+$i(e).scrollLeft}function to(e){var t=yi(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function no(e){return["html","body","#document"].indexOf(gi(e))>=0?e.ownerDocument.body:si(e)&&to(e)?e:no(Ei(e))}function ro(e,t){var n;void 0===t&&(t=[]);var r=no(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=ii(r),s=i?[o].concat(o.visualViewport||[],to(r)?r:[]):r,a=t.concat(s);return i?a:a.concat(ro(Ei(s)))}function io(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function oo(e,t,n){return t===Pi?io(function(e,t){var n=ii(e),r=_i(e),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,c=0;if(i){o=i.width,s=i.height;var l=hi();(l||!l&&"fixed"===t)&&(a=i.offsetLeft,c=i.offsetTop)}return{width:o,height:s,x:a+eo(e),y:c}}(e,n)):oi(t)?function(e,t){var n=pi(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):io(function(e){var t,n=_i(e),r=$i(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=ci(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=ci(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+eo(e),c=-r.scrollTop;return"rtl"===yi(i||n).direction&&(a+=ci(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:c}}(_i(e)))}function so(e,t,n,r){var i="clippingParents"===t?function(e){var t=ro(Ei(e)),n=["absolute","fixed"].indexOf(yi(e).position)>=0&&si(e)?Ti(e):e;return oi(n)?t.filter((function(e){return oi(e)&&mi(e,n)&&"body"!==gi(e)})):[]}(e):[].concat(t),o=[].concat(i,[n]),s=o[0],a=o.reduce((function(t,n){var i=oo(e,n,r);return t.top=ci(i.top,t.top),t.right=li(i.right,t.right),t.bottom=li(i.bottom,t.bottom),t.left=ci(i.left,t.left),t}),oo(e,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function ao(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?ri(i):null,s=i?Gi(i):null,a=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(o){case wi:t={x:a,y:n.y-r.height};break;case Ri:t={x:a,y:n.y+n.height};break;case Ai:t={x:n.x+n.width,y:c};break;case Oi:t={x:n.x-r.width,y:c};break;default:t={x:n.x,y:n.y}}var l=o?bi(o):null;if(null!=l){var d="y"===l?"height":"width";switch(s){case ki:t[l]=t[l]-(n[d]/2-r[d]/2);break;case xi:t[l]=t[l]+(n[d]/2-r[d]/2)}}return t}function co(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.strategy,s=void 0===o?e.strategy:o,a=n.boundary,c=void 0===a?Li:a,l=n.rootBoundary,d=void 0===l?Pi:l,u=n.elementContext,h=void 0===u?ji:u,p=n.altBoundary,f=void 0!==p&&p,m=n.padding,g=void 0===m?0:m,y=Ni("number"!==typeof g?g:Ci(g,Di)),v=h===ji?Ui:ji,_=e.rects.popper,E=e.elements[f?v:h],S=so(oi(E)?E:E.contextElement||_i(e.elements.popper),c,d,s),T=pi(e.elements.reference),b=ao({reference:T,element:_,strategy:"absolute",placement:i}),I=io(Object.assign({},_,b)),N=h===ji?I:T,C={top:S.top-N.top+y.top,bottom:N.bottom-S.bottom+y.bottom,left:S.left-N.left+y.left,right:N.right-S.right+y.right},w=e.modifiersData.offset;if(h===ji&&w){var R=w[i];Object.keys(C).forEach((function(e){var t=[Ai,Ri].indexOf(e)>=0?1:-1,n=[wi,Ri].indexOf(e)>=0?"y":"x";C[e]+=R[n]*t}))}return C}const lo={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0===s||s,c=n.fallbackPlacements,l=n.padding,d=n.boundary,u=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,y=ri(g),v=c||(y===g||!f?[Ji(g)]:function(e){if(ri(e)===Mi)return[];var t=Ji(e);return[Zi(e),t,Zi(t)]}(g)),_=[g].concat(v).reduce((function(e,n){return e.concat(ri(n)===Mi?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?zi:c,d=Gi(r),u=d?a?Fi:Fi.filter((function(e){return Gi(e)===d})):Di,h=u.filter((function(e){return l.indexOf(e)>=0}));0===h.length&&(h=u);var p=h.reduce((function(t,n){return t[n]=co(e,{placement:n,boundary:i,rootBoundary:o,padding:s})[ri(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:d,rootBoundary:u,padding:l,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),E=t.rects.reference,S=t.rects.popper,T=new Map,b=!0,I=_[0],N=0;N<_.length;N++){var C=_[N],w=ri(C),R=Gi(C)===ki,A=[wi,Ri].indexOf(w)>=0,O=A?"width":"height",M=co(t,{placement:C,boundary:d,rootBoundary:u,altBoundary:h,padding:l}),D=A?R?Ai:Oi:R?Ri:wi;E[O]>S[O]&&(D=Ji(D));var k=Ji(D),x=[];if(o&&x.push(M[w]<=0),a&&x.push(M[D]<=0,M[k]<=0),x.every((function(e){return e}))){I=C,b=!1;break}T.set(C,x)}if(b)for(var L=function(e){var t=_.find((function(t){var n=T.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return I=t,"break"},P=f?3:1;P>0;P--){if("break"===L(P))break}t.placement!==I&&(t.modifiersData[r]._skip=!0,t.placement=I,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function uo(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function ho(e){return[wi,Ai,Ri,Oi].some((function(t){return e[t]>=0}))}const po={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,s=zi.reduce((function(e,n){return e[n]=function(e,t,n){var r=ri(e),i=[Oi,wi].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},t,{placement:e})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[Oi,Ai].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}(n,t.rects,o),e}),{}),a=s[t.placement],c=a.x,l=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=l),t.modifiersData[r]=s}};const fo={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0!==s&&s,c=n.boundary,l=n.rootBoundary,d=n.altBoundary,u=n.padding,h=n.tether,p=void 0===h||h,f=n.tetherOffset,m=void 0===f?0:f,g=co(t,{boundary:c,rootBoundary:l,padding:u,altBoundary:d}),y=ri(t.placement),v=Gi(t.placement),_=!v,E=bi(y),S="x"===E?"y":"x",T=t.modifiersData.popperOffsets,b=t.rects.reference,I=t.rects.popper,N="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,C="number"===typeof N?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),w=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,R={x:0,y:0};if(T){if(o){var A,O="y"===E?wi:Oi,M="y"===E?Ri:Ai,D="y"===E?"height":"width",k=T[E],x=k+g[O],L=k-g[M],P=p?-I[D]/2:0,j=v===ki?b[D]:I[D],U=v===ki?-I[D]:-b[D],F=t.elements.arrow,z=p&&F?fi(F):{width:0,height:0},V=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},B=V[O],G=V[M],H=Ii(0,b[D],z[D]),W=_?b[D]/2-P-H-B-C.mainAxis:j-H-B-C.mainAxis,Y=_?-b[D]/2+P+H+G+C.mainAxis:U+H+G+C.mainAxis,q=t.elements.arrow&&Ti(t.elements.arrow),K=q?"y"===E?q.clientTop||0:q.clientLeft||0:0,Q=null!=(A=null==w?void 0:w[E])?A:0,J=k+Y-Q,X=Ii(p?li(x,k+W-Q-K):x,k,p?ci(L,J):L);T[E]=X,R[E]=X-k}if(a){var Z,$="x"===E?wi:Oi,ee="x"===E?Ri:Ai,te=T[S],ne="y"===S?"height":"width",re=te+g[$],ie=te-g[ee],oe=-1!==[wi,Oi].indexOf(y),se=null!=(Z=null==w?void 0:w[S])?Z:0,ae=oe?re:te-b[ne]-I[ne]-se+C.altAxis,ce=oe?te+b[ne]+I[ne]-se-C.altAxis:ie,le=p&&oe?function(e,t,n){var r=Ii(e,t,n);return r>n?n:r}(ae,te,ce):Ii(p?ae:re,te,p?ce:ie);T[S]=le,R[S]=le-te}t.modifiersData[r]=R}},requiresIfExists:["offset"]};function mo(e,t,n){void 0===n&&(n=!1);var r=si(t),i=si(t)&&function(e){var t=e.getBoundingClientRect(),n=di(t.width)/e.offsetWidth||1,r=di(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),o=_i(t),s=pi(e,i,n),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!n)&&(("body"!==gi(t)||to(o))&&(a=function(e){return e!==ii(e)&&si(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:$i(e);var t}(t)),si(t)?((c=pi(t,!0)).x+=t.clientLeft,c.y+=t.clientTop):o&&(c.x=eo(o))),{x:s.left+a.scrollLeft-c.x,y:s.top+a.scrollTop-c.y,width:s.width,height:s.height}}function go(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function yo(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var vo={placement:"bottom",modifiers:[],strategy:"absolute"};function _o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function Eo(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?vo:i;return function(e,t,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},vo,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},s=[],a=!1,c={state:i,setOptions:function(n){var a="function"===typeof n?n(i.options):n;l(),i.options=Object.assign({},o,i.options,a),i.scrollParents={reference:oi(e)?ro(e):e.contextElement?ro(e.contextElement):[],popper:ro(t)};var d=function(e){var t=go(e);return Vi.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=d.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var a=o({state:i,name:t,instance:c,options:r}),l=function(){};s.push(a||l)}})),c.update()},forceUpdate:function(){if(!a){var e=i.elements,t=e.reference,n=e.popper;if(_o(t,n)){i.rects={reference:mo(t,Ti(n),"fixed"===i.options.strategy),popper:fi(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],s=o.fn,l=o.options,d=void 0===l?{}:l,u=o.name;"function"===typeof s&&(i=s({state:i,options:d,name:u,instance:c})||i)}else i.reset=!1,r=-1}}},update:yo((function(){return new Promise((function(e){c.forceUpdate(),e(i)}))})),destroy:function(){l(),a=!0}};if(!_o(e,t))return c;function l(){s.forEach((function(e){return e()})),s=[]}return c.setOptions(n).then((function(e){!a&&n.onFirstUpdate&&n.onFirstUpdate(e)})),c}}const So=Eo({defaultModifiers:[{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,s=co(t,{elementContext:"reference"}),a=co(t,{altBoundary:!0}),c=uo(s,r),l=uo(a,i,o),d=ho(c),u=ho(l);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=ao({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},Yi,Ki,po,lo,fo,Bi]}),To=["enabled","placement","strategy","modifiers"];const bo={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},Io={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:e=>{let{state:t}=e;return()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const t=(e.getAttribute("aria-describedby")||"").split(",").filter((e=>e.trim()!==n.id));t.length?e.setAttribute("aria-describedby",t.join(",")):e.removeAttribute("aria-describedby")}}},fn:e=>{let{state:t}=e;var n;const{popper:r,reference:i}=t.elements,o=null==(n=r.getAttribute("role"))?void 0:n.toLowerCase();if(r.id&&"tooltip"===o&&"setAttribute"in i){const e=i.getAttribute("aria-describedby");if(e&&-1!==e.split(",").indexOf(r.id))return;i.setAttribute("aria-describedby",e?"".concat(e,",").concat(r.id):r.id)}}},No=[];const Co=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{enabled:i=!0,placement:o="bottom",strategy:s="absolute",modifiers:a=No}=n,c=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,To);const l=(0,r.useRef)(a),d=(0,r.useRef)(),u=(0,r.useCallback)((()=>{var e;null==(e=d.current)||e.update()}),[]),h=(0,r.useCallback)((()=>{var e;null==(e=d.current)||e.forceUpdate()}),[]),[p,f]=ni((0,r.useState)({placement:o,update:u,forceUpdate:h,attributes:{},styles:{popper:{},arrow:{}}})),m=(0,r.useMemo)((()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:e=>{let{state:t}=e;const n={},r={};Object.keys(t.elements).forEach((e=>{n[e]=t.styles[e],r[e]=t.attributes[e]})),f({state:t,styles:n,attributes:r,update:u,forceUpdate:h,placement:t.placement})}})),[u,h,f]),g=(0,r.useMemo)((()=>(ti(l.current,a)||(l.current=a),l.current)),[a]);return(0,r.useEffect)((()=>{d.current&&i&&d.current.setOptions({placement:o,strategy:s,modifiers:[...g,m,bo]})}),[s,o,m,i,g]),(0,r.useEffect)((()=>{if(i&&null!=e&&null!=t)return d.current=So(e,t,Object.assign({},c,{placement:o,strategy:s,modifiers:[...g,Io,m]})),()=>{null!=d.current&&(d.current.destroy(),d.current=void 0,f((e=>Object.assign({},e,{attributes:{},styles:{popper:{}}}))))}}),[i,e,t]),p};var wo=__webpack_require__(6440),Ro=__webpack_require__.n(wo);const Ao=()=>{};const Oo=e=>e&&("current"in e?e.current:e),Mo={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};const Do=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ao,{disabled:n,clickTrigger:i="click"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=(0,r.useRef)(!1),s=(0,r.useRef)(!1),a=(0,r.useCallback)((t=>{const n=Oo(e);Ro()(!!n,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),o.current=!n||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)||!function(e){return 0===e.button}(t)||!!rn(n,t.target)||s.current,s.current=!1}),[e]),c=Yt((t=>{const n=Oo(e);n&&rn(n,t.target)&&(s.current=!0)})),l=Yt((e=>{o.current||t(e)}));(0,r.useEffect)((()=>{var t,r;if(n||null==e)return;const o=et(Oo(e)),s=o.defaultView||window;let d=null!=(t=s.event)?t:null==(r=s.parent)?void 0:r.event,u=null;Mo[i]&&(u=Nt(o,Mo[i],c,!0));const h=Nt(o,i,a,!0),p=Nt(o,i,(e=>{e!==d?l(e):d=void 0}));let f=[];return"ontouchstart"in o.documentElement&&(f=[].slice.call(o.body.children).map((e=>Nt(e,"mousemove",Ao)))),()=>{null==u||u(),h(),p(),f.forEach((e=>e()))}}),[e,n,i,a,c,l])};function ko(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.isArray(e)?e:Object.keys(e).map((t=>(e[t].name=t,e[t])))}function xo(e){let{enabled:t,enableEvents:n,placement:r,flip:i,offset:o,fixed:s,containerPadding:a,arrowElement:c,popperConfig:l={}}=e;var d,u,h,p,f;const m=function(e){const t={};return Array.isArray(e)?(null==e||e.forEach((e=>{t[e.name]=e})),t):e||t}(l.modifiers);return Object.assign({},l,{placement:r,enabled:t,strategy:s?"fixed":l.strategy,modifiers:ko(Object.assign({},m,{eventListeners:{enabled:n,options:null==(d=m.eventListeners)?void 0:d.options},preventOverflow:Object.assign({},m.preventOverflow,{options:a?Object.assign({padding:a},null==(u=m.preventOverflow)?void 0:u.options):null==(h=m.preventOverflow)?void 0:h.options}),offset:{options:Object.assign({offset:o},null==(p=m.offset)?void 0:p.options)},arrow:Object.assign({},m.arrow,{enabled:!!c,options:Object.assign({},null==(f=m.arrow)?void 0:f.options,{element:c})}),flip:Object.assign({enabled:!!i},m.flip)}))})}const Lo=["children"];const Po=()=>{};function jo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,r.useContext)(Zr),[n,i]=Fr(),o=(0,r.useRef)(!1),{flip:s,offset:a,rootCloseEvent:c,fixed:l=!1,placement:d,popperConfig:u={},enableEventListeners:h=!0,usePopper:p=!!t}=e,f=null==(null==t?void 0:t.show)?!!e.show:t.show;f&&!o.current&&(o.current=!0);const{placement:m,setMenu:g,menuElement:y,toggleElement:v}=t||{},_=Co(v,y,xo({placement:d||m||"bottom-start",enabled:p,enableEvents:null==h?f:h,offset:a,flip:s,fixed:l,arrowElement:n,popperConfig:u})),E=Object.assign({ref:g||Po,"aria-labelledby":null==v?void 0:v.id},_.attributes.popper,{style:_.styles.popper}),S={show:f,placement:m,hasShown:o.current,toggle:null==t?void 0:t.toggle,popper:p?_:null,arrowProps:p?Object.assign({ref:i},_.attributes.arrow,{style:_.styles.arrow}):{}};return Do(y,(e=>{null==t||t.toggle(!1,e)}),{clickTrigger:c,disabled:!f}),[E,S]}function Uo(e){let{children:t}=e,n=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Lo);const[r,i]=jo(n);return(0,Me.jsx)(Me.Fragment,{children:t(r,i)})}Uo.displayName="DropdownMenu",Uo.defaultProps={usePopper:!0};const Fo=Uo,zo={prefix:String(Math.round(1e10*Math.random())),current:0},Vo=r.createContext(zo),Bo=r.createContext(!1);let Go=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement),Ho=new WeakMap;function Wo(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,r.useContext)(Vo),n=(0,r.useRef)(null);if(null===n.current&&!e){var i,o;let e=null===(o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)||void 0===o||null===(i=o.ReactCurrentOwner)||void 0===i?void 0:i.current;if(e){let n=Ho.get(e);null==n?Ho.set(e,{id:t.current,state:e.memoizedState}):e.memoizedState!==n.state&&(t.current=n.id,Ho.delete(e))}n.current=++t.current}return n.current}const Yo="function"===typeof r.useId?function(e){let t=r.useId(),[n]=(0,r.useState)("function"===typeof r.useSyncExternalStore?r.useSyncExternalStore(Qo,qo,Ko):(0,r.useContext)(Bo)),i=n?"react-aria":"react-aria".concat(zo.prefix);return e||"".concat(i,"-").concat(t)}:function(e){let t=(0,r.useContext)(Vo);t!==zo||Go||console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=Wo(!!e),i="react-aria".concat(t.prefix);return e||"".concat(i,"-").concat(n)};function qo(){return!1}function Ko(){return!0}function Qo(e){return()=>{}}const Jo=e=>{var t;return"menu"===(null==(t=e.getAttribute("role"))?void 0:t.toLowerCase())},Xo=()=>{};function Zo(){const e=Yo(),{show:t=!1,toggle:n=Xo,setToggle:i,menuElement:o}=(0,r.useContext)(Zr)||{},s=(0,r.useCallback)((e=>{n(!t,e)}),[t,n]),a={id:e,ref:i||Xo,onClick:s,"aria-expanded":!!t};return o&&Jo(o)&&(a["aria-haspopup"]=!0),[a,{show:t,toggle:n}]}function $o(e){let{children:t}=e;const[n,r]=Zo();return(0,Me.jsx)(Me.Fragment,{children:t(n,r)})}$o.displayName="DropdownToggle";const es=$o,ts=["eventKey","disabled","onClick","active","as"];function ns(e){let{key:t,href:n,active:i,disabled:o,onClick:s}=e;const a=(0,r.useContext)(Pe),c=(0,r.useContext)(Er),{activeKey:l}=c||{},d=Le(t,n),u=null==i&&null!=t?Le(l)===d:i;return[{onClick:Yt((e=>{o||(null==s||s(e),a&&!e.isPropagationStopped()&&a(d,e))})),"aria-disabled":o||void 0,"aria-selected":u,[ln("dropdown-item")]:""},{isActive:u}]}const rs=r.forwardRef(((e,t)=>{let{eventKey:n,disabled:r,onClick:i,active:o,as:s=Nr}=e,a=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,ts);const[c]=ns({key:n,href:a.href,disabled:r,onClick:i,active:o});return(0,Me.jsx)(s,Object.assign({},a,{ref:t},c))}));rs.displayName="DropdownItem";const is=rs;function os(){const e=vr(),t=(0,r.useRef)(null),n=(0,r.useCallback)((n=>{t.current=n,e()}),[e]);return[t,n]}function ss(e){let{defaultShow:t,show:n,onSelect:i,onToggle:o,itemSelector:s="* [".concat(ln("dropdown-item"),"]"),focusFirstItemOnShow:a,placement:c="bottom-start",children:l}=e;const d=pn(),[u,h]=Xr(n,t,o),[p,f]=os(),m=p.current,[g,y]=os(),v=g.current,_=an(u),E=(0,r.useRef)(null),S=(0,r.useRef)(!1),T=(0,r.useContext)(Pe),b=(0,r.useCallback)((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?void 0:t.type;h(e,{originalEvent:t,source:n})}),[h]),I=Yt(((e,t)=>{null==i||i(e,t),b(!1,t,"select"),t.isPropagationStopped()||null==T||T(e,t)})),N=(0,r.useMemo)((()=>({toggle:b,placement:c,show:u,menuElement:m,toggleElement:v,setMenu:f,setToggle:y})),[b,c,u,m,v,f,y]);m&&_&&!u&&(S.current=m.contains(m.ownerDocument.activeElement));const C=Yt((()=>{v&&v.focus&&v.focus()})),w=Yt((()=>{const e=E.current;let t=a;if(null==t&&(t=!(!p.current||!Jo(p.current))&&"keyboard"),!1===t||"keyboard"===t&&!/^key.+$/.test(e))return;const n=Xn(p.current,s)[0];n&&n.focus&&n.focus()}));(0,r.useEffect)((()=>{u?w():S.current&&(S.current=!1,C())}),[u,S,C,w]),(0,r.useEffect)((()=>{E.current=null}));const R=(e,t)=>{if(!p.current)return null;const n=Xn(p.current,s);let r=n.indexOf(e)+t;return r=Math.max(0,Math.min(r,n.length)),n[r]};return function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=Yt(n);(0,r.useEffect)((()=>{const n="function"===typeof e?e():e;return n.addEventListener(t,o,i),()=>n.removeEventListener(t,o,i)}),[e])}((0,r.useCallback)((()=>d.document),[d]),"keydown",(e=>{var t,n;const{key:r}=e,i=e.target,o=null==(t=p.current)?void 0:t.contains(i),s=null==(n=g.current)?void 0:n.contains(i);if(/input|textarea/i.test(i.tagName)&&(" "===r||"Escape"!==r&&o||"Escape"===r&&"search"===i.type))return;if(!o&&!s)return;if("Tab"===r&&(!p.current||!u))return;E.current=e.type;const a={originalEvent:e,source:e.type};switch(r){case"ArrowUp":{const t=R(i,-1);return t&&t.focus&&t.focus(),void e.preventDefault()}case"ArrowDown":if(e.preventDefault(),u){const e=R(i,1);e&&e.focus&&e.focus()}else h(!0,a);return;case"Tab":bt(i.ownerDocument,"keyup",(e=>{var t;("Tab"!==e.key||e.target)&&null!=(t=p.current)&&t.contains(e.target)||h(!1,a)}),{once:!0});break;case"Escape":"Escape"===r&&(e.preventDefault(),e.stopPropagation()),h(!1,a)}})),(0,Me.jsx)(Pe.Provider,{value:I,children:(0,Me.jsx)(Zr.Provider,{value:N,children:l})})}ss.displayName="Dropdown",ss.Menu=Fo,ss.Toggle=es,ss.Item=is;const as=ss,cs=r.createContext({});cs.displayName="DropdownContext";const ls=cs,ds=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="hr",role:o="separator",...s}=e;return r=Je(r,"dropdown-divider"),(0,Me.jsx)(i,{ref:t,className:xe()(n,r),role:o,...s})}));ds.displayName="DropdownDivider";const us=ds,hs=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",role:o="heading",...s}=e;return r=Je(r,"dropdown-header"),(0,Me.jsx)(i,{ref:t,className:xe()(n,r),role:o,...s})}));hs.displayName="DropdownHeader";const ps=hs,fs=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,eventKey:i,disabled:o=!1,onClick:s,active:a,as:c=Br,...l}=e;const d=Je(n,"dropdown-item"),[u,h]=ns({key:i,href:l.href,disabled:o,onClick:s,active:a});return(0,Me.jsx)(c,{...l,...u,ref:t,className:xe()(r,d,h.isActive&&"active",o&&"disabled")})}));fs.displayName="DropdownItem";const ms=fs,gs=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="span",...o}=e;return r=Je(r,"dropdown-item-text"),(0,Me.jsx)(i,{ref:t,className:xe()(n,r),...o})}));gs.displayName="DropdownItemText";const ys=gs,vs=r.createContext(null);vs.displayName="InputGroupContext";const _s=vs;function Es(e,t){return e}function Ss(e,t,n){let r=e?n?"bottom-start":"bottom-end":n?"bottom-end":"bottom-start";return"up"===t?r=e?n?"top-start":"top-end":n?"top-end":"top-start":"end"===t?r=e?n?"left-end":"right-end":n?"left-start":"right-start":"start"===t?r=e?n?"right-end":"left-end":n?"right-start":"left-start":"down-centered"===t?r="bottom":"up-centered"===t&&(r="top"),r}const Ts=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,align:o,rootCloseEvent:s,flip:a=!0,show:c,renderOnMount:l,as:d="div",popperConfig:u,variant:h,...p}=e,f=!1;const m=(0,r.useContext)(Bt),g=Je(n,"dropdown-menu"),{align:y,drop:v,isRTL:_}=(0,r.useContext)(ls);o=o||y;const E=(0,r.useContext)(_s),S=[];if(o)if("object"===typeof o){const e=Object.keys(o);if(e.length){const t=e[0],n=o[t];f="start"===n,S.push("".concat(g,"-").concat(t,"-").concat(n))}}else"end"===o&&(f=!0);const T=Ss(f,v,_),[b,{hasShown:I,popper:N,show:C,toggle:w}]=jo({flip:a,rootCloseEvent:s,show:c,usePopper:!m&&0===S.length,offset:[0,2],popperConfig:u,placement:T});if(b.ref=kt(Es(t),b.ref),Jt((()=>{C&&(null==N||N.update())}),[C]),!I&&!l&&!E)return null;"string"!==typeof d&&(b.show=C,b.close=()=>null==w?void 0:w(!1),b.align=o);let R=p.style;return null!=N&&N.placement&&(R={...p.style,...b.style},p["x-placement"]=N.placement),(0,Me.jsx)(d,{...p,...b,style:R,...(S.length||m)&&{"data-bs-popper":"static"},className:xe()(i,g,C&&"show",f&&"".concat(g,"-end"),h&&"".concat(g,"-").concat(h),...S)})}));Ts.displayName="DropdownMenu";const bs=Ts,Is=r.forwardRef(((e,t)=>{let{as:n,bsPrefix:r,variant:i="primary",size:o,active:s=!1,disabled:a=!1,className:c,...l}=e;const d=Je(r,"btn"),[u,{tagName:h}]=br({tagName:n,disabled:a,...l}),p=h;return(0,Me.jsx)(p,{...u,...l,ref:t,disabled:a,className:xe()(c,d,s&&"active",i&&"".concat(d,"-").concat(i),o&&"".concat(d,"-").concat(o),l.href&&a&&"disabled")})}));Is.displayName="Button";const Ns=Is,Cs=r.forwardRef(((e,t)=>{let{bsPrefix:n,split:i,className:o,childBsPrefix:s,as:a=Ns,...c}=e;const l=Je(n,"dropdown-toggle"),d=(0,r.useContext)(Zr);void 0!==s&&(c.bsPrefix=s);const[u]=Zo();return u.ref=kt(u.ref,Es(t)),(0,Me.jsx)(a,{className:xe()(o,l,i&&"".concat(l,"-split"),(null==d?void 0:d.show)&&"show"),...u,...c})}));Cs.displayName="DropdownToggle";const ws=Cs,Rs=r.forwardRef(((e,t)=>{const{bsPrefix:n,drop:i="down",show:o,className:s,align:a="start",onSelect:c,onToggle:l,focusFirstItemOnShow:d,as:u="div",navbar:h,autoClose:p=!0,...f}=Ve(e,{show:"onToggle"}),m=(0,r.useContext)(_s),g=Je(n,"dropdown"),y=Xe(),v=Yt(((e,t)=>{var n,r;var i;(null==(n=t.originalEvent)||null==(r=n.target)?void 0:r.classList.contains("dropdown-toggle"))&&"mousedown"===t.source||(t.originalEvent.currentTarget!==document||"keydown"===t.source&&"Escape"!==t.originalEvent.key||(t.source="rootClose"),i=t.source,(!1===p?"click"===i:"inside"===p?"rootClose"!==i:"outside"!==p||"select"!==i)&&(null==l||l(e,t)))})),_=Ss("end"===a,i,y),E=(0,r.useMemo)((()=>({align:a,drop:i,isRTL:y})),[a,i,y]),S={down:g,"down-centered":"".concat(g,"-center"),up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return(0,Me.jsx)(ls.Provider,{value:E,children:(0,Me.jsx)(as,{placement:_,show:o,onSelect:c,onToggle:v,focusFirstItemOnShow:d,itemSelector:".".concat(g,"-item:not(.disabled):not(:disabled)"),children:m?f.children:(0,Me.jsx)(u,{...f,ref:t,className:xe()(s,o&&"show",S[i])})})})}));Rs.displayName="Dropdown";const As=Object.assign(Rs,{Toggle:ws,Menu:bs,Item:ms,ItemText:ys,Divider:us,Header:ps}),Os=Un().oneOf(["start","end"]),Ms=Un().oneOfType([Os,Un().shape({sm:Os}),Un().shape({md:Os}),Un().shape({lg:Os}),Un().shape({xl:Os}),Un().shape({xxl:Os}),Un().object]),Ds={id:Un().string,href:Un().string,onClick:Un().func,title:Un().node.isRequired,disabled:Un().bool,align:Ms,menuRole:Un().string,renderMenuOnMount:Un().bool,rootCloseEvent:Un().string,menuVariant:Un().oneOf(["dark"]),flip:Un().bool,bsPrefix:Un().string,variant:Un().string,size:Un().string},ks=r.forwardRef(((e,t)=>{let{title:n,children:r,bsPrefix:i,rootCloseEvent:o,variant:s,size:a,menuRole:c,renderMenuOnMount:l,disabled:d,href:u,id:h,menuVariant:p,flip:f,...m}=e;return(0,Me.jsxs)(As,{ref:t,...m,children:[(0,Me.jsx)(ws,{id:h,href:u,size:a,variant:s,disabled:d,childBsPrefix:i,children:n}),(0,Me.jsx)(bs,{role:c,renderOnMount:l,rootCloseEvent:o,variant:p,flip:f,children:r})]})}));ks.displayName="DropdownButton",ks.propTypes=Ds;const xs=ks,Ls=r.forwardRef(((e,t)=>{let{bsPrefix:n,size:r,vertical:i=!1,className:o,role:s="group",as:a="div",...c}=e;const l=Je(n,"btn-group");let d=l;return i&&(d="".concat(l,"-vertical")),(0,Me.jsx)(a,{...c,ref:t,role:s,className:xe()(o,d,r&&"".concat(l,"-").concat(r))})}));Ls.displayName="ButtonGroup";const Ps=Ls;var js={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Us=r.createContext&&r.createContext(js),Fs=["attr","size","title"];function zs(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Vs(){return Vs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vs.apply(this,arguments)}function Bs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bs(Object(n),!0).forEach((function(t){Hs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hs(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ws(e){return e&&e.map(((e,t)=>r.createElement(e.tag,Gs({key:t},e.attr),Ws(e.child))))}function Ys(e){return t=>r.createElement(qs,Vs({attr:Gs({},e.attr)},t),Ws(e.child))}function qs(e){var t=t=>{var n,{attr:i,size:o,title:s}=e,a=zs(e,Fs),c=o||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",Vs({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,a,{className:n,style:Gs(Gs({color:e.color||t.color},t.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),s&&r.createElement("title",null,s),e.children)};return void 0!==Us?r.createElement(Us.Consumer,null,(e=>t(e))):t(js)}function Ks(e){return Ys({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M278.6 256l68.2-68.2c6.2-6.2 6.2-16.4 0-22.6-6.2-6.2-16.4-6.2-22.6 0L256 233.4l-68.2-68.2c-6.2-6.2-16.4-6.2-22.6 0-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3l68.2 68.2-68.2 68.2c-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3 6.2 6.2 16.4 6.2 22.6 0l68.2-68.2 68.2 68.2c6.2 6.2 16.4 6.2 22.6 0 6.2-6.2 6.2-16.4 0-22.6L278.6 256z"},child:[]}]})(e)}function Qs(e){return Ys({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 464c22.779 0 41.411-18.719 41.411-41.6h-82.823c0 22.881 18.633 41.6 41.412 41.6zm134.589-124.8V224.8c0-63.44-44.516-117.518-103.53-131.041V79.2c0-17.682-13.457-31.2-31.059-31.2s-31.059 13.518-31.059 31.2v14.559c-59.015 13.523-103.53 67.601-103.53 131.041v114.4L80 380.8v20.8h352v-20.8l-41.411-41.6z"},child:[]}]})(e)}const Js=function(){const{userData:e,serviceList:t,getSubServiceList:n,subServiceList:i}=Kr(),[o,s]=(0,r.useState)(null),[a,c]=(0,r.useState)("Loading..."),[l,d]=(0,r.useState)(!0),[u,h]=(0,r.useState)(null),[p,f]=(0,r.useState)(!1),[m,g]=(0,r.useState)("Choose Category"),[y,v]=(0,r.useState)(null),[_,E]=(0,r.useState)(),[S,T]=(0,r.useState)(!0),[b,I]=(0,r.useState)(""),N=ee(),C=async()=>{try{await new Promise(((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((t=>{const{latitude:n,longitude:r}=t.coords;s({latitude:n,longitude:r}),localStorage.setItem("lat",JSON.stringify(n)),localStorage.setItem("lon",JSON.stringify(r)),d(!1),e({latitude:n,longitude:r})}),(e=>{d(!1),t(e)})):(d(!1),t(new Error("Geolocation is not supported")))}));const e=o.latitude,t=o.longitude,n="8d1d16020bfb4d1994ea0f1ce0ca60ca",r=await fetch("https://api.opencagedata.com/geocode/v1/json?q=".concat(e,"+").concat(t,"&key=").concat(n)),i=await r.json();if(i.results&&i.results.length>0){const e=i.results[0].components.country;c(e)}else c("NA")}catch(Sv){c("NA")}};(0,r.useEffect)((()=>{C()}),[l]);const w=e=>{h(e),n(e)},R=()=>{h(null)},A=()=>{h(null)},O=()=>{f(!1)},M=e=>{g(e.title),E(e.slug),v(e._id),T(!1)},D=e=>{const t=e.target.value;I(t)},k=e=>{e.preventDefault(),b&&(N("/".concat(_,"?category_id=").concat(y,"&search=").concat(b||"")),I(""),f(!1))};return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsxs)("section",{className:"sticky-top",children:[(0,Me.jsx)(mr,{expand:"lg",bg:"light",className:"border-bottom border-1",children:(0,Me.jsxs)(yr,{children:[(0,Me.jsx)(mr.Brand,{as:Re,to:"/",children:(0,Me.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAXCAYAAAD9VOo7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABAFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDYuMC1jMDAyIDExNi4xNjQ3NjYsIDIwMjEvMDIvMTktMjM6MTA6MDcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0idXVpZDo1RDIwODkyNDkzQkZEQjExOTE0QTg1OTBEMzE1MDhDOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEODQ3RkE0MzZDQUUxMUVFQTI0MkYxNjhERUJBMzg3MCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpEODQ3RkE0MjZDQUUxMUVFQTI0MkYxNjhERUJBMzg3MCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBJbGx1c3RyYXRvciAyNy42IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTY5Q0M2NkU2Q0FFMTFFRTk3QjRGQjdFNDYzNEJDMzAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTY5Q0M2NkY2Q0FFMTFFRTk3QjRGQjdFNDYzNEJDMzAiLz4gPGRjOnRpdGxlPiA8cmRmOkFsdD4gPHJkZjpsaSB4bWw6bGFuZz0ieC1kZWZhdWx0Ij5Eeml0YWxfQnJpZWZib2dlbl9EaWdpdGFsPC9yZGY6bGk+IDwvcmRmOkFsdD4gPC9kYzp0aXRsZT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7XaJf1AAAFnElEQVR42sRZa2xURRid3baCtirSoEhNDD6xKj5QUTEKPoqAVF7iI/zQBOObH/hWjKhRQyAY0R82RmPwkRheulQQjFEUYzS1NUpQSkBFCNgWSaUt8tr1fOmZ8GVy7+7cXXvvSU529s7s3Zn55ntO6vHmTcZBFfgeeCa4G0yZYMjzA2AH+CPYCP4UMvYl8BZwlykMeW8WzIEngU3gDPbdDz4MdoNzweXgOZzvYXB/wPtyzrvdvoHgOvAB9fw28BmwHHwZfMf4YQF/uwa8FzxoIqI84JkI5DLw5Ajvkc1+EcyAT4MbnP5LwDPIqOhS7aHgaWxX83MweLEpDYfACrWBspm1bN8TQSAXgDXghcVOJEgg/4Arufg9eTSkDDwRPF0Jrx68gfxGjV3LBbfnmUsZ+0U77lZzWxIinH383AZ+qp7J79NgDzgAvJHv3sFxVey3GnI8+L0SxnDwKvU/l4Mjwe889nMPP7uL0Y4wgfTwVPhCFjsanMPPo8FVYJ1axALSB7PUvD4E56m+dEB7Czgu5F2ikS0Uwnpwpsf/T+SaNG72FEhamcaUYy69kDalQ2z35+AYsIHPjqMJi4rJ4KvqtD1R4txEQ/qzfaznAZ0c8HwKWGliQJCGyB+/S6fekcdkaaf4Nfggbe8J4HTwOp7c1Z5zGQQuUt8fBX8vcX1pdUp9Dt94cATbGZqe28GzwUng+0kIRE73FXSWvujmgrPc1Ol8PiGCQF4AT2F7MfiWiR/1qi0RXCcFYvsSEUgnwzZx6n+HaEiOvuZaCq6TwjB05s2MfK4Ej2J4nA93Kb+1g9oRNwZTQ2xgs4YH7S+G33Xck9/iFohs9J2ev8/QCbrmoIUCOQ88l9/DMISxvsVTYFsCAqlT0WKjypk+4mEZwDENfTmJUp16/5Dn2/hZ4WH65vMEGi52sUkGU1R7mWovdfItE7dAKpkI/eJhOtIF4nFTIDq5D7yD7T+oHUlgOPMVwVZGjRbrVKI7hmY4VoFUMbEbBl5aQuar85QgDGVJxWI2fVYSmAb2Y3s1faLFQZowu19T4xZINzNXCXk3/g+m7FDImFdol217uUkOE1R7SUD/MrWO8Ux+Y3PqXTwxKRU55ctDglDtlGJczGb2K2hlIS8pXKNqYV+RLqTA+RnzqmE0XavidOqHeSIKCWRvnpKFDaG3On21jqmaRa1MCpMc7Qg7ZEtDAoA+15BjuGGnOrZUI0tNGhGgKeLEL2K7mbUmjYXKXs9jvJ8UqlWpRA7F2jxjpa+dFYV6JrHb4xCIVD9vjZipV5ojxbTrwbP4/Etn3HPgWCWsJ02ymMqDZze8Nc9Y2fxPmKMNYjViYRwCETP0K/t2e/iQgcw7rJY8pvoyaqzcFcxRfY+YIqqhfVgq+dhj/EqVNE+MSyBdPMXZAj4k52xoGRdl4/Q3TO9NojWDDcpnidC+SFgYtdRmwWbPKK+Ra5ILqNGm9+KtKQ6nfkA59TBqYYxjqGzDR7nKnav65RZxJNtvG/+7kb4ulfRT5ZG9Hr+RfVmhvo8NGfdvsdpv74zPBz8gJYd4nk4r6MbQaobE4jWsV9Wo/lYutk2pts7A9/P9Q0z+oqO9zRNH+izD56wTWBRCLmR8mn7SYkWEPcvwsKXoR+arddj/kHv+RWqPy8yRq4Asg4ntPKg9LMlIgXVDOcsXsvB9FIi0Z5hod+oWr9Nxd6hnMwPKJVEgkd5rFEilRx1No0JVCvQF1U2m92pWIDeB30aYj5gsuf+5miWXadw3GxAZHtCHCrynjcLsoWURKzNKBPKD6S2j/6x8yCZKtN0El99TzFVEzaU8vZ4x/J8BYyUw2MkJpNVJSUUIGGz4LaX5XVxEp8fmSSjbwjKNDr9HcW3ynmLuXd6kBbF3R1YgW7jWncoduJdkOUZpm5WZ3Mj9bPpPgAEA0zhTu/wCqYQAAAAASUVORK5CYII=",alt:"logo"})}),(0,Me.jsx)("div",{className:"newSearchBx d-none d-lg-block",children:(0,Me.jsxs)("form",{className:"input-group width100 custom-form",onSubmit:k,children:[(0,Me.jsx)("div",{className:"input-group-prepend",children:(0,Me.jsx)(xs,{as:Ps,variant:"outline-primary",title:m,id:"dropdown-menu-align-right",className:"custom-dropdown",style:{width:"170px"},children:Array.isArray(t)&&t.map((e=>(0,Me.jsx)(As.Item,{eventKey:e._id,onClick:()=>M(e),active:y===e._id,style:{width:"170px"},children:e.title},e._id)))})}),(0,Me.jsx)("input",{type:"text",onChange:D,value:b,disabled:S,className:"form-control custom-input",placeholder:"Search..."}),(0,Me.jsx)("div",{className:"input-group-append",children:(0,Me.jsx)("button",{className:"btn btn-primary custom-search-button",type:"submit",id:"button-addon2",children:(0,Me.jsx)("i",{className:"fa fa-search"})})})]})}),(0,Me.jsxs)("ul",{className:"navListInline",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{className:"nav-link ",children:(0,Me.jsx)(Qs,{className:"text-primary"})})}),!0===l?(0,Me.jsx)(Jr,{animation:"border",variant:"info",size:"sm",className:"ms-2"},"spinner"):(0,Me.jsx)("li",{children:(0,Me.jsxs)(Re,{to:"/",className:"nav-link",children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," ",a," "]})},"location"),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Re,{to:"/",className:"nav-link",children:[(0,Me.jsx)("i",{className:"fa fa-language"})," ",(0,Me.jsx)("span",{children:"English"})]})},"language"),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Re,{to:"/account",className:"nav-link",children:[(0,Me.jsx)("i",{className:"fa fa-user"})," ",(0,Me.jsx)("span",{children:e._id?"".concat(e.name):"Log In"})]})},"account")]})]})}),(0,Me.jsx)(mr,{expand:"lg",className:"bg-theme mainNav",children:(0,Me.jsx)(yr,{children:(0,Me.jsx)(mr.Collapse,{id:"basic-navbar-nav",children:(0,Me.jsx)(Yr,{className:"me-auto mb-2 mb-lg-16",children:Array.isArray(t)&&(null===t||void 0===t?void 0:t.map((e=>(0,Me.jsxs)("li",{className:"nav-item dropdown mega-dropdown",onMouseEnter:()=>w(e._id),onMouseLeave:R,children:[(0,Me.jsx)(Re,{className:"navList dropdown-toggle",role:"button",onClick:()=>N("/".concat(e.slug,"?category_id=").concat(e._id)),"data-bs-toggle":"dropdown","aria-expanded":u===e._id,children:e.title}),(0,Me.jsx)("div",{className:"dropdown-menu mega-dropdown-menu container ".concat(u===e._id?"show":""),onMouseEnter:()=>w(e._id),onMouseLeave:R,children:(0,Me.jsx)("div",{className:"row",children:Array.isArray(i)&&(null===i||void 0===i?void 0:i.map((t=>(0,Me.jsx)("div",{className:"col-md-3",children:(0,Me.jsx)("ul",{className:"linkList",children:(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/".concat(e.slug,"?sub_category=").concat(t._id),onClick:A,children:t.title})})})},t._id))))})})]},e._id))))})})})}),(0,Me.jsx)("section",{className:"p-2 bg-theme d-block d-lg-none",children:(0,Me.jsx)(yr,{children:(0,Me.jsxs)("button",{className:"btn btn-primary text-white",onClick:()=>f(!p),"aria-controls":"offCanvasSidebar","aria-expanded":p?"true":"false",children:[(0,Me.jsx)("i",{className:"fas fa-bars"})," Menu"]})})})]}),(0,Me.jsxs)("div",{className:"offcanvas offcanvas-start ".concat(p?"show":""),"data-bs-scroll":"true",tabIndex:-1,id:"offCanvasSidebar","aria-labelledby":"offCanvasSidebarLabel",children:[(0,Me.jsxs)("div",{className:"offcanvas-header",children:[(0,Me.jsxs)("form",{className:"input-group width100",onSubmit:k,children:[(0,Me.jsx)("div",{className:"input-group-prepend",children:(0,Me.jsx)(xs,{as:Ps,variant:"outline-primary",title:m,id:"dropdown-menu-align-right",className:"custom-dropdown",style:{width:"170px"},children:Array.isArray(t)&&t.map((e=>(0,Me.jsx)(As.Item,{eventKey:e._id,onClick:()=>M(e),active:y===e._id,style:{width:"170px"},children:e.title},e._id)))})}),(0,Me.jsx)("input",{type:"text",onChange:D,value:b,disabled:S,className:"form-control custom-input",placeholder:"Search..."}),(0,Me.jsx)("div",{className:"input-group-append",children:(0,Me.jsx)("button",{className:"btn btn-primary custom-search-button",type:"submit",id:"button-addon2",children:(0,Me.jsx)("i",{className:"fa fa-search"})})})]}),(0,Me.jsx)("button",{type:"button",onClick:()=>f(!1),className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})]}),(0,Me.jsx)("hr",{className:"m0"}),(0,Me.jsx)("div",{className:"offcanvas-body",children:Array.isArray(t)&&(null===t||void 0===t?void 0:t.map((e=>(0,Me.jsx)("div",{className:"accordion accordion-flush mobileMegaMenuBx",id:"megaMenuPart",children:(0,Me.jsxs)("div",{className:"accordion-item",children:[(0,Me.jsx)("h2",{className:"accordion-header",children:(0,Me.jsx)("button",{onClick:()=>{n(null===e||void 0===e?void 0:e._id),f(!0)},className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#categoryItem1".concat(e._id),"aria-expanded":"false","aria-controls":"categoryItem1",children:e.title})}),(0,Me.jsx)("div",{id:"categoryItem1".concat(e._id),className:"accordion-collapse collapse","data-bs-parent":"#megaMenuPart",children:(0,Me.jsx)("div",{children:(0,Me.jsx)("div",{className:"row",children:(0,Me.jsx)("div",{className:"col-md-3",children:Array.isArray(i)&&(null===i||void 0===i?void 0:i.map((t=>(0,Me.jsx)("ul",{className:"linkList",children:(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/".concat(e.slug,"?sub_category=").concat(t._id),onClick:O,children:t.title})})},"mobile_".concat(t._id)))))})})})})]})},"mobile_".concat(e._id)))))})]})]})},Xs=__webpack_require__.p+"static/media/Ad.6240261e0d77ac4574e0.jpg",Zs=()=>(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"col-md-1 adBx",children:(0,Me.jsx)("div",{className:"sticky-top",children:(0,Me.jsx)("img",{src:Xs,alt:""})})})}),$s=()=>{const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{setTimeout((()=>{t(!0)}),2e3),t(!1)})()}),[]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"About Us"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"About Us"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",style:{backgroundColor:"#fff"},children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),!1===e?(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsxs)("div",{className:"aboutus-content sticky-top",children:[(0,Me.jsxs)("h1",{children:["Welcome to ",(0,Me.jsx)("span",{children:"Dzital"})]}),(0,Me.jsx)("h4",{children:"Your tagline goes here"}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here."}),(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-6 col-xs-12",children:(0,Me.jsxs)("div",{className:"serviceBoxItem text-center",children:[(0,Me.jsx)("img",{src:"./assets/images/vision.png",alt:""}),(0,Me.jsx)("div",{className:"title",children:(0,Me.jsx)("h4",{children:"Vision"})}),(0,Me.jsx)("div",{className:"text",children:(0,Me.jsx)("span",{children:"Lorem ipsum dolor sit amet, id quo eruditi eloquentiam. Assum decore te sed. Elitr scripta ocurreret qui ad."})})]})}),(0,Me.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-6 col-xs-12",children:(0,Me.jsxs)("div",{className:"serviceBoxItem text-center",children:[(0,Me.jsx)("img",{src:"./assets/images/mission.png",alt:""}),(0,Me.jsx)("div",{className:"title",children:(0,Me.jsx)("h4",{children:"Mission"})}),(0,Me.jsx)("div",{className:"text",children:(0,Me.jsx)("span",{children:"Lorem ipsum dolor sit amet, id quo eruditi eloquentiam. Assum decore te sed. Elitr scripta ocurreret qui ad."})})]})})]})]})}),(0,Me.jsxs)("div",{className:"col-md-4",children:[(0,Me.jsx)("img",{src:"./assets/images/home-search.jpg",width:"100%",alt:""}),(0,Me.jsx)("img",{src:"./assets/images/job-search.jpg",width:"100%",alt:""}),(0,Me.jsx)("img",{src:"./assets/images/ecommerce.jpg",width:"100%",alt:""}),(0,Me.jsx)("img",{src:"./assets/images/vehicle-search.jpg",width:"100%",alt:""}),(0,Me.jsx)("img",{src:"./assets/images/online-education.jpg",width:"100%",alt:""})]})]})}),(0,Me.jsx)(Zs,{})]})})})]})};function ea(e){return null!==e&&"object"===typeof e&&"constructor"in e&&e.constructor===Object}function ta(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach((n=>{"undefined"===typeof e[n]?e[n]=t[n]:ea(t[n])&&ea(e[n])&&Object.keys(t[n]).length>0&&ta(e[n],t[n])}))}const na={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function ra(){const e="undefined"!==typeof document?document:{};return ta(e,na),e}const ia={document:na,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:e=>"undefined"===typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!==typeof setTimeout&&clearTimeout(e)}};function oa(){const e="undefined"!==typeof window?window:{};return ta(e,ia),e}function sa(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function aa(){return Date.now()}function ca(e,t){void 0===t&&(t="x");const n=oa();let r,i,o;const s=function(e){const t=oa();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}(e);return n.WebKitCSSMatrix?(i=s.transform||s.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map((e=>e.replace(",","."))).join(", ")),o=new n.WebKitCSSMatrix("none"===i?"":i)):(o=s.MozTransform||s.OTransform||s.MsTransform||s.msTransform||s.transform||s.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=o.toString().split(",")),"x"===t&&(i=n.WebKitCSSMatrix?o.m41:16===r.length?parseFloat(r[12]):parseFloat(r[4])),"y"===t&&(i=n.WebKitCSSMatrix?o.m42:16===r.length?parseFloat(r[13]):parseFloat(r[5])),i||0}function la(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function da(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let r=1;r<arguments.length;r+=1){const i=r<0||arguments.length<=r?void 0:arguments[r];if(void 0!==i&&null!==i&&(n=i,!("undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement?n instanceof HTMLElement:n&&(1===n.nodeType||11===n.nodeType)))){const n=Object.keys(Object(i)).filter((e=>t.indexOf(e)<0));for(let t=0,r=n.length;t<r;t+=1){const r=n[t],o=Object.getOwnPropertyDescriptor(i,r);void 0!==o&&o.enumerable&&(la(e[r])&&la(i[r])?i[r].__swiper__?e[r]=i[r]:da(e[r],i[r]):!la(e[r])&&la(i[r])?(e[r]={},i[r].__swiper__?e[r]=i[r]:da(e[r],i[r])):e[r]=i[r])}}}var n;return e}function ua(e,t,n){e.style.setProperty(t,n)}function ha(e){let{swiper:t,targetPosition:n,side:r}=e;const i=oa(),o=-t.translate;let s,a=null;const c=t.params.speed;t.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(t.cssModeFrameID);const l=n>o?"next":"prev",d=(e,t)=>"next"===l&&e>=t||"prev"===l&&e<=t,u=()=>{s=(new Date).getTime(),null===a&&(a=s);const e=Math.max(Math.min((s-a)/c,1),0),l=.5-Math.cos(e*Math.PI)/2;let h=o+l*(n-o);if(d(h,n)&&(h=n),t.wrapperEl.scrollTo({[r]:h}),d(h,n))return t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout((()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[r]:h})})),void i.cancelAnimationFrame(t.cssModeFrameID);t.cssModeFrameID=i.requestAnimationFrame(u)};u()}function pa(e){return e.querySelector(".swiper-slide-transform")||e.shadowRoot&&e.shadowRoot.querySelector(".swiper-slide-transform")||e}function fa(e,t){return void 0===t&&(t=""),[...e.children].filter((e=>e.matches(t)))}function ma(e){try{return void console.warn(e)}catch(t){}}function ga(e,t){void 0===t&&(t=[]);const n=document.createElement(e);return n.classList.add(...Array.isArray(t)?t:function(e){return void 0===e&&(e=""),e.trim().split(" ").filter((e=>!!e.trim()))}(t)),n}function ya(e,t){return oa().getComputedStyle(e,null).getPropertyValue(t)}function va(e){let t,n=e;if(n){for(t=0;null!==(n=n.previousSibling);)1===n.nodeType&&(t+=1);return t}}function _a(e,t,n){const r=oa();return n?e["width"===t?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-left":"margin-bottom")):e.offsetWidth}function Ea(e){return(Array.isArray(e)?e:[e]).filter((e=>!!e))}let Sa,Ta,ba;function Ia(){return Sa||(Sa=function(){const e=oa(),t=ra();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}()),Sa}function Na(e){return void 0===e&&(e={}),Ta||(Ta=function(e){let{userAgent:t}=void 0===e?{}:e;const n=Ia(),r=oa(),i=r.navigator.platform,o=t||r.navigator.userAgent,s={ios:!1,android:!1},a=r.screen.width,c=r.screen.height,l=o.match(/(Android);?[\s\/]+([\d.]+)?/);let d=o.match(/(iPad).*OS\s([\d_]+)/);const u=o.match(/(iPod)(.*OS\s([\d_]+))?/),h=!d&&o.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p="Win32"===i;let f="MacIntel"===i;return!d&&f&&n.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf("".concat(a,"x").concat(c))>=0&&(d=o.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),f=!1),l&&!p&&(s.os="android",s.android=!0),(d||h||u)&&(s.os="ios",s.ios=!0),s}(e)),Ta}function Ca(){return ba||(ba=function(){const e=oa(),t=Na();let n=!1;function r(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}if(r()){const t=String(e.navigator.userAgent);if(t.includes("Version/")){const[e,r]=t.split("Version/")[1].split(" ")[0].split(".").map((e=>Number(e)));n=e<16||16===e&&r<2}}const i=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent),o=r();return{isSafari:n||o,needPerspectiveFix:n,need3dFix:o||i&&t.ios,isWebView:i}}()),ba}var wa={on(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!==typeof t)return r;const i=n?"unshift":"push";return e.split(" ").forEach((e=>{r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][i](t)})),r},once(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!==typeof t)return r;function i(){r.off(e,i),i.__emitterProxy&&delete i.__emitterProxy;for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];t.apply(r,o)}return i.__emitterProxy=t,r.on(e,i,n)},onAny(e,t){const n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!==typeof e)return n;const r=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[r](e),n},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return!n.eventsListeners||n.destroyed?n:n.eventsListeners?(e.split(" ").forEach((e=>{"undefined"===typeof t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach(((r,i)=>{(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[e].splice(i,1)}))})),n):n},emit(){const e=this;if(!e.eventsListeners||e.destroyed)return e;if(!e.eventsListeners)return e;let t,n,r;for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];"string"===typeof o[0]||Array.isArray(o[0])?(t=o[0],n=o.slice(1,o.length),r=e):(t=o[0].events,n=o[0].data,r=o[0].context||e),n.unshift(r);return(Array.isArray(t)?t:t.split(" ")).forEach((t=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach((e=>{e.apply(r,[t,...n])})),e.eventsListeners&&e.eventsListeners[t]&&e.eventsListeners[t].forEach((e=>{e.apply(r,n)}))})),e}};const Ra=(e,t)=>{if(!e||e.destroyed||!e.params)return;const n=t.closest(e.isElement?"swiper-slide":".".concat(e.params.slideClass));if(n){let t=n.querySelector(".".concat(e.params.lazyPreloaderClass));!t&&e.isElement&&(n.shadowRoot?t=n.shadowRoot.querySelector(".".concat(e.params.lazyPreloaderClass)):requestAnimationFrame((()=>{n.shadowRoot&&(t=n.shadowRoot.querySelector(".".concat(e.params.lazyPreloaderClass)),t&&t.remove())}))),t&&t.remove()}},Aa=(e,t)=>{if(!e.slides[t])return;const n=e.slides[t].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},Oa=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const n=e.slides.length;if(!n||!t||t<0)return;t=Math.min(t,n);const r="auto"===e.params.slidesPerView?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),i=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const n=i,o=[n-t];return o.push(...Array.from({length:t}).map(((e,t)=>n+r+t))),void e.slides.forEach(((t,n)=>{o.includes(t.column)&&Aa(e,n)}))}const o=i+r-1;if(e.params.rewind||e.params.loop)for(let s=i-t;s<=o+t;s+=1){const t=(s%n+n)%n;(t<i||t>o)&&Aa(e,t)}else for(let s=Math.max(i-t,0);s<=Math.min(o+t,n-1);s+=1)s!==i&&(s>o||s<i)&&Aa(e,s)};var Ma={updateSize:function(){const e=this;let t,n;const r=e.el;t="undefined"!==typeof e.params.width&&null!==e.params.width?e.params.width:r.clientWidth,n="undefined"!==typeof e.params.height&&null!==e.params.height?e.params.height:r.clientHeight,0===t&&e.isHorizontal()||0===n&&e.isVertical()||(t=t-parseInt(ya(r,"padding-left")||0,10)-parseInt(ya(r,"padding-right")||0,10),n=n-parseInt(ya(r,"padding-top")||0,10)-parseInt(ya(r,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))},updateSlides:function(){const e=this;function t(t,n){return parseFloat(t.getPropertyValue(e.getDirectionLabel(n))||0)}const n=e.params,{wrapperEl:r,slidesEl:i,size:o,rtlTranslate:s,wrongRTL:a}=e,c=e.virtual&&n.virtual.enabled,l=c?e.virtual.slides.length:e.slides.length,d=fa(i,".".concat(e.params.slideClass,", swiper-slide")),u=c?e.virtual.slides.length:d.length;let h=[];const p=[],f=[];let m=n.slidesOffsetBefore;"function"===typeof m&&(m=n.slidesOffsetBefore.call(e));let g=n.slidesOffsetAfter;"function"===typeof g&&(g=n.slidesOffsetAfter.call(e));const y=e.snapGrid.length,v=e.slidesGrid.length;let _=n.spaceBetween,E=-m,S=0,T=0;if("undefined"===typeof o)return;"string"===typeof _&&_.indexOf("%")>=0?_=parseFloat(_.replace("%",""))/100*o:"string"===typeof _&&(_=parseFloat(_)),e.virtualSize=-_,d.forEach((e=>{s?e.style.marginLeft="":e.style.marginRight="",e.style.marginBottom="",e.style.marginTop=""})),n.centeredSlides&&n.cssMode&&(ua(r,"--swiper-centered-offset-before",""),ua(r,"--swiper-centered-offset-after",""));const b=n.grid&&n.grid.rows>1&&e.grid;let I;b?e.grid.initSlides(d):e.grid&&e.grid.unsetSlides();const N="auto"===n.slidesPerView&&n.breakpoints&&Object.keys(n.breakpoints).filter((e=>"undefined"!==typeof n.breakpoints[e].slidesPerView)).length>0;for(let C=0;C<u;C+=1){let r;if(I=0,d[C]&&(r=d[C]),b&&e.grid.updateSlide(C,r,d),!d[C]||"none"!==ya(r,"display")){if("auto"===n.slidesPerView){N&&(d[C].style[e.getDirectionLabel("width")]="");const i=getComputedStyle(r),o=r.style.transform,s=r.style.webkitTransform;if(o&&(r.style.transform="none"),s&&(r.style.webkitTransform="none"),n.roundLengths)I=e.isHorizontal()?_a(r,"width",!0):_a(r,"height",!0);else{const e=t(i,"width"),n=t(i,"padding-left"),o=t(i,"padding-right"),s=t(i,"margin-left"),a=t(i,"margin-right"),c=i.getPropertyValue("box-sizing");if(c&&"border-box"===c)I=e+s+a;else{const{clientWidth:t,offsetWidth:i}=r;I=e+n+o+s+a+(i-t)}}o&&(r.style.transform=o),s&&(r.style.webkitTransform=s),n.roundLengths&&(I=Math.floor(I))}else I=(o-(n.slidesPerView-1)*_)/n.slidesPerView,n.roundLengths&&(I=Math.floor(I)),d[C]&&(d[C].style[e.getDirectionLabel("width")]="".concat(I,"px"));d[C]&&(d[C].swiperSlideSize=I),f.push(I),n.centeredSlides?(E=E+I/2+S/2+_,0===S&&0!==C&&(E=E-o/2-_),0===C&&(E=E-o/2-_),Math.abs(E)<.001&&(E=0),n.roundLengths&&(E=Math.floor(E)),T%n.slidesPerGroup===0&&h.push(E),p.push(E)):(n.roundLengths&&(E=Math.floor(E)),(T-Math.min(e.params.slidesPerGroupSkip,T))%e.params.slidesPerGroup===0&&h.push(E),p.push(E),E=E+I+_),e.virtualSize+=I+_,S=I,T+=1}}if(e.virtualSize=Math.max(e.virtualSize,o)+g,s&&a&&("slide"===n.effect||"coverflow"===n.effect)&&(r.style.width="".concat(e.virtualSize+_,"px")),n.setWrapperSize&&(r.style[e.getDirectionLabel("width")]="".concat(e.virtualSize+_,"px")),b&&e.grid.updateWrapperSize(I,h),!n.centeredSlides){const t=[];for(let r=0;r<h.length;r+=1){let i=h[r];n.roundLengths&&(i=Math.floor(i)),h[r]<=e.virtualSize-o&&t.push(i)}h=t,Math.floor(e.virtualSize-o)-Math.floor(h[h.length-1])>1&&h.push(e.virtualSize-o)}if(c&&n.loop){const t=f[0]+_;if(n.slidesPerGroup>1){const r=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/n.slidesPerGroup),i=t*n.slidesPerGroup;for(let e=0;e<r;e+=1)h.push(h[h.length-1]+i)}for(let r=0;r<e.virtual.slidesBefore+e.virtual.slidesAfter;r+=1)1===n.slidesPerGroup&&h.push(h[h.length-1]+t),p.push(p[p.length-1]+t),e.virtualSize+=t}if(0===h.length&&(h=[0]),0!==_){const t=e.isHorizontal()&&s?"marginLeft":e.getDirectionLabel("marginRight");d.filter(((e,t)=>!(n.cssMode&&!n.loop)||t!==d.length-1)).forEach((e=>{e.style[t]="".concat(_,"px")}))}if(n.centeredSlides&&n.centeredSlidesBounds){let e=0;f.forEach((t=>{e+=t+(_||0)})),e-=_;const t=e-o;h=h.map((e=>e<=0?-m:e>t?t+g:e))}if(n.centerInsufficientSlides){let e=0;if(f.forEach((t=>{e+=t+(_||0)})),e-=_,e<o){const t=(o-e)/2;h.forEach(((e,n)=>{h[n]=e-t})),p.forEach(((e,n)=>{p[n]=e+t}))}}if(Object.assign(e,{slides:d,snapGrid:h,slidesGrid:p,slidesSizesGrid:f}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){ua(r,"--swiper-centered-offset-before","".concat(-h[0],"px")),ua(r,"--swiper-centered-offset-after","".concat(e.size/2-f[f.length-1]/2,"px"));const t=-e.snapGrid[0],n=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((e=>e+t)),e.slidesGrid=e.slidesGrid.map((e=>e+n))}if(u!==l&&e.emit("slidesLengthChange"),h.length!==y&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),p.length!==v&&e.emit("slidesGridLengthChange"),n.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!c&&!n.cssMode&&("slide"===n.effect||"fade"===n.effect)){const t="".concat(n.containerModifierClass,"backface-hidden"),r=e.el.classList.contains(t);u<=n.maxBackfaceHiddenSlides?r||e.el.classList.add(t):r&&e.el.classList.remove(t)}},updateAutoHeight:function(e){const t=this,n=[],r=t.virtual&&t.params.virtual.enabled;let i,o=0;"number"===typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const s=e=>r?t.slides[t.getSlideIndexByData(e)]:t.slides[e];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach((e=>{n.push(e)}));else for(i=0;i<Math.ceil(t.params.slidesPerView);i+=1){const e=t.activeIndex+i;if(e>t.slides.length&&!r)break;n.push(s(e))}else n.push(s(t.activeIndex));for(i=0;i<n.length;i+=1)if("undefined"!==typeof n[i]){const e=n[i].offsetHeight;o=e>o?e:o}(o||0===o)&&(t.wrapperEl.style.height="".concat(o,"px"))},updateSlidesOffset:function(){const e=this,t=e.slides,n=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let r=0;r<t.length;r+=1)t[r].swiperSlideOffset=(e.isHorizontal()?t[r].offsetLeft:t[r].offsetTop)-n-e.cssOverflowAdjustment()},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);const t=this,n=t.params,{slides:r,rtlTranslate:i,snapGrid:o}=t;if(0===r.length)return;"undefined"===typeof r[0].swiperSlideOffset&&t.updateSlidesOffset();let s=-e;i&&(s=e),r.forEach((e=>{e.classList.remove(n.slideVisibleClass,n.slideFullyVisibleClass)})),t.visibleSlidesIndexes=[],t.visibleSlides=[];let a=n.spaceBetween;"string"===typeof a&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*t.size:"string"===typeof a&&(a=parseFloat(a));for(let c=0;c<r.length;c+=1){const e=r[c];let l=e.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(l-=r[0].swiperSlideOffset);const d=(s+(n.centeredSlides?t.minTranslate():0)-l)/(e.swiperSlideSize+a),u=(s-o[0]+(n.centeredSlides?t.minTranslate():0)-l)/(e.swiperSlideSize+a),h=-(s-l),p=h+t.slidesSizesGrid[c],f=h>=0&&h<=t.size-t.slidesSizesGrid[c];(h>=0&&h<t.size-1||p>1&&p<=t.size||h<=0&&p>=t.size)&&(t.visibleSlides.push(e),t.visibleSlidesIndexes.push(c),r[c].classList.add(n.slideVisibleClass)),f&&r[c].classList.add(n.slideFullyVisibleClass),e.progress=i?-d:d,e.originalProgress=i?-u:u}},updateProgress:function(e){const t=this;if("undefined"===typeof e){const n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}const n=t.params,r=t.maxTranslate()-t.minTranslate();let{progress:i,isBeginning:o,isEnd:s,progressLoop:a}=t;const c=o,l=s;if(0===r)i=0,o=!0,s=!0;else{i=(e-t.minTranslate())/r;const n=Math.abs(e-t.minTranslate())<1,a=Math.abs(e-t.maxTranslate())<1;o=n||i<=0,s=a||i>=1,n&&(i=0),a&&(i=1)}if(n.loop){const n=t.getSlideIndexByData(0),r=t.getSlideIndexByData(t.slides.length-1),i=t.slidesGrid[n],o=t.slidesGrid[r],s=t.slidesGrid[t.slidesGrid.length-1],c=Math.abs(e);a=c>=i?(c-i)/s:(c+s-o)/s,a>1&&(a-=1)}Object.assign(t,{progress:i,progressLoop:a,isBeginning:o,isEnd:s}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),o&&!c&&t.emit("reachBeginning toEdge"),s&&!l&&t.emit("reachEnd toEdge"),(c&&!o||l&&!s)&&t.emit("fromEdge"),t.emit("progress",i)},updateSlidesClasses:function(){const e=this,{slides:t,params:n,slidesEl:r,activeIndex:i}=e,o=e.virtual&&n.virtual.enabled,s=e.grid&&n.grid&&n.grid.rows>1,a=e=>fa(r,".".concat(n.slideClass).concat(e,", swiper-slide").concat(e))[0];let c,l,d;if(t.forEach((e=>{e.classList.remove(n.slideActiveClass,n.slideNextClass,n.slidePrevClass)})),o)if(n.loop){let t=i-e.virtual.slidesBefore;t<0&&(t=e.virtual.slides.length+t),t>=e.virtual.slides.length&&(t-=e.virtual.slides.length),c=a('[data-swiper-slide-index="'.concat(t,'"]'))}else c=a('[data-swiper-slide-index="'.concat(i,'"]'));else s?(c=t.filter((e=>e.column===i))[0],d=t.filter((e=>e.column===i+1))[0],l=t.filter((e=>e.column===i-1))[0]):c=t[i];c&&(c.classList.add(n.slideActiveClass),s?(d&&d.classList.add(n.slideNextClass),l&&l.classList.add(n.slidePrevClass)):(d=function(e,t){const n=[];for(;e.nextElementSibling;){const r=e.nextElementSibling;t?r.matches(t)&&n.push(r):n.push(r),e=r}return n}(c,".".concat(n.slideClass,", swiper-slide"))[0],n.loop&&!d&&(d=t[0]),d&&d.classList.add(n.slideNextClass),l=function(e,t){const n=[];for(;e.previousElementSibling;){const r=e.previousElementSibling;t?r.matches(t)&&n.push(r):n.push(r),e=r}return n}(c,".".concat(n.slideClass,", swiper-slide"))[0],n.loop&&0===!l&&(l=t[t.length-1]),l&&l.classList.add(n.slidePrevClass))),e.emitSlidesClasses()},updateActiveIndex:function(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{snapGrid:r,params:i,activeIndex:o,realIndex:s,snapIndex:a}=t;let c,l=e;const d=e=>{let n=e-t.virtual.slidesBefore;return n<0&&(n=t.virtual.slides.length+n),n>=t.virtual.slides.length&&(n-=t.virtual.slides.length),n};if("undefined"===typeof l&&(l=function(e){const{slidesGrid:t,params:n}=e,r=e.rtlTranslate?e.translate:-e.translate;let i;for(let o=0;o<t.length;o+=1)"undefined"!==typeof t[o+1]?r>=t[o]&&r<t[o+1]-(t[o+1]-t[o])/2?i=o:r>=t[o]&&r<t[o+1]&&(i=o+1):r>=t[o]&&(i=o);return n.normalizeSlideIndex&&(i<0||"undefined"===typeof i)&&(i=0),i}(t)),r.indexOf(n)>=0)c=r.indexOf(n);else{const e=Math.min(i.slidesPerGroupSkip,l);c=e+Math.floor((l-e)/i.slidesPerGroup)}if(c>=r.length&&(c=r.length-1),l===o&&!t.params.loop)return void(c!==a&&(t.snapIndex=c,t.emit("snapIndexChange")));if(l===o&&t.params.loop&&t.virtual&&t.params.virtual.enabled)return void(t.realIndex=d(l));const u=t.grid&&i.grid&&i.grid.rows>1;let h;if(t.virtual&&i.virtual.enabled&&i.loop)h=d(l);else if(u){const e=t.slides.filter((e=>e.column===l))[0];let n=parseInt(e.getAttribute("data-swiper-slide-index"),10);Number.isNaN(n)&&(n=Math.max(t.slides.indexOf(e),0)),h=Math.floor(n/i.grid.rows)}else if(t.slides[l]){const e=t.slides[l].getAttribute("data-swiper-slide-index");h=e?parseInt(e,10):l}else h=l;Object.assign(t,{previousSnapIndex:a,snapIndex:c,previousRealIndex:s,realIndex:h,previousIndex:o,activeIndex:l}),t.initialized&&Oa(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(s!==h&&t.emit("realIndexChange"),t.emit("slideChange"))},updateClickedSlide:function(e,t){const n=this,r=n.params;let i=e.closest(".".concat(r.slideClass,", swiper-slide"));!i&&n.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach((e=>{!i&&e.matches&&e.matches(".".concat(r.slideClass,", swiper-slide"))&&(i=e)}));let o,s=!1;if(i)for(let a=0;a<n.slides.length;a+=1)if(n.slides[a]===i){s=!0,o=a;break}if(!i||!s)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=i,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=o,r.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}};var Da={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");const{params:t,rtlTranslate:n,translate:r,wrapperEl:i}=this;if(t.virtualTranslate)return n?-r:r;if(t.cssMode)return r;let o=ca(i,e);return o+=this.cssOverflowAdjustment(),n&&(o=-o),o||0},setTranslate:function(e,t){const n=this,{rtlTranslate:r,params:i,wrapperEl:o,progress:s}=n;let a,c=0,l=0;n.isHorizontal()?c=r?-e:e:l=e,i.roundLengths&&(c=Math.floor(c),l=Math.floor(l)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?c:l,i.cssMode?o[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-c:-l:i.virtualTranslate||(n.isHorizontal()?c-=n.cssOverflowAdjustment():l-=n.cssOverflowAdjustment(),o.style.transform="translate3d(".concat(c,"px, ").concat(l,"px, ").concat(0,"px)"));const d=n.maxTranslate()-n.minTranslate();a=0===d?0:(e-n.minTranslate())/d,a!==s&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,n,r,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),void 0===r&&(r=!0);const o=this,{params:s,wrapperEl:a}=o;if(o.animating&&s.preventInteractionOnTransition)return!1;const c=o.minTranslate(),l=o.maxTranslate();let d;if(d=r&&e>c?c:r&&e<l?l:e,o.updateProgress(d),s.cssMode){const e=o.isHorizontal();if(0===t)a[e?"scrollLeft":"scrollTop"]=-d;else{if(!o.support.smoothScroll)return ha({swiper:o,targetPosition:-d,side:e?"left":"top"}),!0;a.scrollTo({[e?"left":"top"]:-d,behavior:"smooth"})}return!0}return 0===t?(o.setTransition(0),o.setTranslate(d),n&&(o.emit("beforeTransitionStart",t,i),o.emit("transitionEnd"))):(o.setTransition(t),o.setTranslate(d),n&&(o.emit("beforeTransitionStart",t,i),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,n&&o.emit("transitionEnd"))}),o.wrapperEl.addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd))),!0}};function ka(e){let{swiper:t,runCallbacks:n,direction:r,step:i}=e;const{activeIndex:o,previousIndex:s}=t;let a=r;if(a||(a=o>s?"next":o<s?"prev":"reset"),t.emit("transition".concat(i)),n&&o!==s){if("reset"===a)return void t.emit("slideResetTransition".concat(i));t.emit("slideChangeTransition".concat(i)),"next"===a?t.emit("slideNextTransition".concat(i)):t.emit("slidePrevTransition".concat(i))}}var xa={setTransition:function(e,t){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration="".concat(e,"ms"),n.wrapperEl.style.transitionDelay=0===e?"0ms":""),n.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);const n=this,{params:r}=n;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),ka({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e,t){void 0===e&&(e=!0);const n=this,{params:r}=n;n.animating=!1,r.cssMode||(n.setTransition(0),ka({swiper:n,runCallbacks:e,direction:t,step:"End"}))}};var La={slideTo:function(e,t,n,r,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),"string"===typeof e&&(e=parseInt(e,10));const o=this;let s=e;s<0&&(s=0);const{params:a,snapGrid:c,slidesGrid:l,previousIndex:d,activeIndex:u,rtlTranslate:h,wrapperEl:p,enabled:f}=o;if(o.animating&&a.preventInteractionOnTransition||!f&&!r&&!i||o.destroyed)return!1;const m=Math.min(o.params.slidesPerGroupSkip,s);let g=m+Math.floor((s-m)/o.params.slidesPerGroup);g>=c.length&&(g=c.length-1);const y=-c[g];if(a.normalizeSlideIndex)for(let _=0;_<l.length;_+=1){const e=-Math.floor(100*y),t=Math.floor(100*l[_]),n=Math.floor(100*l[_+1]);"undefined"!==typeof l[_+1]?e>=t&&e<n-(n-t)/2?s=_:e>=t&&e<n&&(s=_+1):e>=t&&(s=_)}if(o.initialized&&s!==u){if(!o.allowSlideNext&&(h?y>o.translate&&y>o.minTranslate():y<o.translate&&y<o.minTranslate()))return!1;if(!o.allowSlidePrev&&y>o.translate&&y>o.maxTranslate()&&(u||0)!==s)return!1}let v;if(s!==(d||0)&&n&&o.emit("beforeSlideChangeStart"),o.updateProgress(y),v=s>u?"next":s<u?"prev":"reset",h&&-y===o.translate||!h&&y===o.translate)return o.updateActiveIndex(s),a.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),"slide"!==a.effect&&o.setTranslate(y),"reset"!==v&&(o.transitionStart(n,v),o.transitionEnd(n,v)),!1;if(a.cssMode){const e=o.isHorizontal(),n=h?y:-y;if(0===t){const t=o.virtual&&o.params.virtual.enabled;t&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),t&&!o._cssModeVirtualInitialSet&&o.params.initialSlide>0?(o._cssModeVirtualInitialSet=!0,requestAnimationFrame((()=>{p[e?"scrollLeft":"scrollTop"]=n}))):p[e?"scrollLeft":"scrollTop"]=n,t&&requestAnimationFrame((()=>{o.wrapperEl.style.scrollSnapType="",o._immediateVirtual=!1}))}else{if(!o.support.smoothScroll)return ha({swiper:o,targetPosition:n,side:e?"left":"top"}),!0;p.scrollTo({[e?"left":"top"]:n,behavior:"smooth"})}return!0}return o.setTransition(t),o.setTranslate(y),o.updateActiveIndex(s),o.updateSlidesClasses(),o.emit("beforeTransitionStart",t,r),o.transitionStart(n,v),0===t?o.transitionEnd(n,v):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(n,v))}),o.wrapperEl.addEventListener("transitionend",o.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e,t,n,r){if(void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),"string"===typeof e){e=parseInt(e,10)}const i=this;if(i.destroyed)return;const o=i.grid&&i.params.grid&&i.params.grid.rows>1;let s=e;if(i.params.loop)if(i.virtual&&i.params.virtual.enabled)s+=i.virtual.slidesBefore;else{let e;if(o){const t=s*i.params.grid.rows;e=i.slides.filter((e=>1*e.getAttribute("data-swiper-slide-index")===t))[0].column}else e=i.getSlideIndexByData(s);const t=o?Math.ceil(i.slides.length/i.params.grid.rows):i.slides.length,{centeredSlides:n}=i.params;let r=i.params.slidesPerView;"auto"===r?r=i.slidesPerViewDynamic():(r=Math.ceil(parseFloat(i.params.slidesPerView,10)),n&&r%2===0&&(r+=1));let a=t-e<r;if(n&&(a=a||e<Math.ceil(r/2)),a){const r=n?e<i.activeIndex?"prev":"next":e-i.activeIndex-1<i.params.slidesPerView?"next":"prev";i.loopFix({direction:r,slideTo:!0,activeSlideIndex:"next"===r?e+1:e-t+1,slideRealIndex:"next"===r?i.realIndex:void 0})}if(o){const e=s*i.params.grid.rows;s=i.slides.filter((t=>1*t.getAttribute("data-swiper-slide-index")===e))[0].column}else s=i.getSlideIndexByData(s)}return requestAnimationFrame((()=>{i.slideTo(s,t,n,r)})),i},slideNext:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);const r=this,{enabled:i,params:o,animating:s}=r;if(!i||r.destroyed)return r;let a=o.slidesPerGroup;"auto"===o.slidesPerView&&1===o.slidesPerGroup&&o.slidesPerGroupAuto&&(a=Math.max(r.slidesPerViewDynamic("current",!0),1));const c=r.activeIndex<o.slidesPerGroupSkip?1:a,l=r.virtual&&o.virtual.enabled;if(o.loop){if(s&&!l&&o.loopPreventsSliding)return!1;if(r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft,r.activeIndex===r.slides.length-1&&o.cssMode)return requestAnimationFrame((()=>{r.slideTo(r.activeIndex+c,e,t,n)})),!0}return o.rewind&&r.isEnd?r.slideTo(0,e,t,n):r.slideTo(r.activeIndex+c,e,t,n)},slidePrev:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);const r=this,{params:i,snapGrid:o,slidesGrid:s,rtlTranslate:a,enabled:c,animating:l}=r;if(!c||r.destroyed)return r;const d=r.virtual&&i.virtual.enabled;if(i.loop){if(l&&!d&&i.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}function u(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const h=u(a?r.translate:-r.translate),p=o.map((e=>u(e)));let f=o[p.indexOf(h)-1];if("undefined"===typeof f&&i.cssMode){let e;o.forEach(((t,n)=>{h>=t&&(e=n)})),"undefined"!==typeof e&&(f=o[e>0?e-1:e])}let m=0;if("undefined"!==typeof f&&(m=s.indexOf(f),m<0&&(m=r.activeIndex-1),"auto"===i.slidesPerView&&1===i.slidesPerGroup&&i.slidesPerGroupAuto&&(m=m-r.slidesPerViewDynamic("previous",!0)+1,m=Math.max(m,0))),i.rewind&&r.isBeginning){const i=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(i,e,t,n)}return i.loop&&0===r.activeIndex&&i.cssMode?(requestAnimationFrame((()=>{r.slideTo(m,e,t,n)})),!0):r.slideTo(m,e,t,n)},slideReset:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);const r=this;if(!r.destroyed)return r.slideTo(r.activeIndex,e,t,n)},slideToClosest:function(e,t,n,r){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===r&&(r=.5);const i=this;if(i.destroyed)return;let o=i.activeIndex;const s=Math.min(i.params.slidesPerGroupSkip,o),a=s+Math.floor((o-s)/i.params.slidesPerGroup),c=i.rtlTranslate?i.translate:-i.translate;if(c>=i.snapGrid[a]){const e=i.snapGrid[a];c-e>(i.snapGrid[a+1]-e)*r&&(o+=i.params.slidesPerGroup)}else{const e=i.snapGrid[a-1];c-e<=(i.snapGrid[a]-e)*r&&(o-=i.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,i.slidesGrid.length-1),i.slideTo(o,e,t,n)},slideToClickedSlide:function(){const e=this;if(e.destroyed)return;const{params:t,slidesEl:n}=e,r="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let i,o=e.clickedIndex;const s=e.isElement?"swiper-slide":".".concat(t.slideClass);if(t.loop){if(e.animating)return;i=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?o<e.loopedSlides-r/2||o>e.slides.length-e.loopedSlides+r/2?(e.loopFix(),o=e.getSlideIndex(fa(n,"".concat(s,'[data-swiper-slide-index="').concat(i,'"]'))[0]),sa((()=>{e.slideTo(o)}))):e.slideTo(o):o>e.slides.length-r?(e.loopFix(),o=e.getSlideIndex(fa(n,"".concat(s,'[data-swiper-slide-index="').concat(i,'"]'))[0]),sa((()=>{e.slideTo(o)}))):e.slideTo(o)}else e.slideTo(o)}};var Pa={loopCreate:function(e){const t=this,{params:n,slidesEl:r}=t;if(!n.loop||t.virtual&&t.params.virtual.enabled)return;const i=()=>{fa(r,".".concat(n.slideClass,", swiper-slide")).forEach(((e,t)=>{e.setAttribute("data-swiper-slide-index",t)}))},o=t.grid&&n.grid&&n.grid.rows>1,s=n.slidesPerGroup*(o?n.grid.rows:1),a=t.slides.length%s!==0,c=o&&t.slides.length%n.grid.rows!==0,l=e=>{for(let r=0;r<e;r+=1){const e=t.isElement?ga("swiper-slide",[n.slideBlankClass]):ga("div",[n.slideClass,n.slideBlankClass]);t.slidesEl.append(e)}};if(a){if(n.loopAddBlankSlides){l(s-t.slides.length%s),t.recalcSlides(),t.updateSlides()}else ma("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else if(c){if(n.loopAddBlankSlides){l(n.grid.rows-t.slides.length%n.grid.rows),t.recalcSlides(),t.updateSlides()}else ma("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else i();t.loopFix({slideRealIndex:e,direction:n.centeredSlides?void 0:"next"})},loopFix:function(e){let{slideRealIndex:t,slideTo:n=!0,direction:r,setTranslate:i,activeSlideIndex:o,byController:s,byMousewheel:a}=void 0===e?{}:e;const c=this;if(!c.params.loop)return;c.emit("beforeLoopFix");const{slides:l,allowSlidePrev:d,allowSlideNext:u,slidesEl:h,params:p}=c,{centeredSlides:f}=p;if(c.allowSlidePrev=!0,c.allowSlideNext=!0,c.virtual&&p.virtual.enabled)return n&&(p.centeredSlides||0!==c.snapIndex?p.centeredSlides&&c.snapIndex<p.slidesPerView?c.slideTo(c.virtual.slides.length+c.snapIndex,0,!1,!0):c.snapIndex===c.snapGrid.length-1&&c.slideTo(c.virtual.slidesBefore,0,!1,!0):c.slideTo(c.virtual.slides.length,0,!1,!0)),c.allowSlidePrev=d,c.allowSlideNext=u,void c.emit("loopFix");let m=p.slidesPerView;"auto"===m?m=c.slidesPerViewDynamic():(m=Math.ceil(parseFloat(p.slidesPerView,10)),f&&m%2===0&&(m+=1));const g=p.slidesPerGroupAuto?m:p.slidesPerGroup;let y=g;y%g!==0&&(y+=g-y%g),y+=p.loopAdditionalSlides,c.loopedSlides=y;const v=c.grid&&p.grid&&p.grid.rows>1;l.length<m+y?ma("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):v&&"row"===p.grid.fill&&ma("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const _=[],E=[];let S=c.activeIndex;"undefined"===typeof o?o=c.getSlideIndex(l.filter((e=>e.classList.contains(p.slideActiveClass)))[0]):S=o;const T="next"===r||!r,b="prev"===r||!r;let I=0,N=0;const C=v?Math.ceil(l.length/p.grid.rows):l.length,w=(v?l[o].column:o)+(f&&"undefined"===typeof i?-m/2+.5:0);if(w<y){I=Math.max(y-w,g);for(let e=0;e<y-w;e+=1){const t=e-Math.floor(e/C)*C;if(v){const e=C-t-1;for(let t=l.length-1;t>=0;t-=1)l[t].column===e&&_.push(t)}else _.push(C-t-1)}}else if(w+m>C-y){N=Math.max(w-(C-2*y),g);for(let e=0;e<N;e+=1){const t=e-Math.floor(e/C)*C;v?l.forEach(((e,n)=>{e.column===t&&E.push(n)})):E.push(t)}}if(c.__preventObserver__=!0,requestAnimationFrame((()=>{c.__preventObserver__=!1})),b&&_.forEach((e=>{l[e].swiperLoopMoveDOM=!0,h.prepend(l[e]),l[e].swiperLoopMoveDOM=!1})),T&&E.forEach((e=>{l[e].swiperLoopMoveDOM=!0,h.append(l[e]),l[e].swiperLoopMoveDOM=!1})),c.recalcSlides(),"auto"===p.slidesPerView?c.updateSlides():v&&(_.length>0&&b||E.length>0&&T)&&c.slides.forEach(((e,t)=>{c.grid.updateSlide(t,e,c.slides)})),p.watchSlidesProgress&&c.updateSlidesOffset(),n)if(_.length>0&&b){if("undefined"===typeof t){const e=c.slidesGrid[S],t=c.slidesGrid[S+I]-e;a?c.setTranslate(c.translate-t):(c.slideTo(S+Math.ceil(I),0,!1,!0),i&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-t,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-t))}else if(i){const e=v?_.length/p.grid.rows:_.length;c.slideTo(c.activeIndex+e,0,!1,!0),c.touchEventsData.currentTranslate=c.translate}}else if(E.length>0&&T)if("undefined"===typeof t){const e=c.slidesGrid[S],t=c.slidesGrid[S-N]-e;a?c.setTranslate(c.translate-t):(c.slideTo(S-N,0,!1,!0),i&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-t,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-t))}else{const e=v?E.length/p.grid.rows:E.length;c.slideTo(c.activeIndex-e,0,!1,!0)}if(c.allowSlidePrev=d,c.allowSlideNext=u,c.controller&&c.controller.control&&!s){const e={slideRealIndex:t,direction:r,setTranslate:i,activeSlideIndex:o,byController:!0};Array.isArray(c.controller.control)?c.controller.control.forEach((t=>{!t.destroyed&&t.params.loop&&t.loopFix({...e,slideTo:t.params.slidesPerView===p.slidesPerView&&n})})):c.controller.control instanceof c.constructor&&c.controller.control.params.loop&&c.controller.control.loopFix({...e,slideTo:c.controller.control.params.slidesPerView===p.slidesPerView&&n})}c.emit("loopFix")},loopDestroy:function(){const e=this,{params:t,slidesEl:n}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const r=[];e.slides.forEach((e=>{const t="undefined"===typeof e.swiperSlideIndex?1*e.getAttribute("data-swiper-slide-index"):e.swiperSlideIndex;r[t]=e})),e.slides.forEach((e=>{e.removeAttribute("data-swiper-slide-index")})),r.forEach((e=>{n.append(e)})),e.recalcSlides(),e.slideTo(e.realIndex,0)}};var ja={setGrabCursor:function(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame((()=>{t.__preventObserver__=!1}))},unsetGrabCursor:function(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame((()=>{e.__preventObserver__=!1})))}};function Ua(e,t,n){const r=oa(),{params:i}=e,o=i.edgeSwipeDetection,s=i.edgeSwipeThreshold;return!o||!(n<=s||n>=r.innerWidth-s)||"prevent"===o&&(t.preventDefault(),!0)}function Fa(e){const t=this,n=ra();let r=e;r.originalEvent&&(r=r.originalEvent);const i=t.touchEventsData;if("pointerdown"===r.type){if(null!==i.pointerId&&i.pointerId!==r.pointerId)return;i.pointerId=r.pointerId}else"touchstart"===r.type&&1===r.targetTouches.length&&(i.touchId=r.targetTouches[0].identifier);if("touchstart"===r.type)return void Ua(t,r,r.targetTouches[0].pageX);const{params:o,touches:s,enabled:a}=t;if(!a)return;if(!o.simulateTouch&&"mouse"===r.pointerType)return;if(t.animating&&o.preventInteractionOnTransition)return;!t.animating&&o.cssMode&&o.loop&&t.loopFix();let c=r.target;if("wrapper"===o.touchEventsTarget&&!t.wrapperEl.contains(c))return;if("which"in r&&3===r.which)return;if("button"in r&&r.button>0)return;if(i.isTouched&&i.isMoved)return;const l=!!o.noSwipingClass&&""!==o.noSwipingClass,d=r.composedPath?r.composedPath():r.path;l&&r.target&&r.target.shadowRoot&&d&&(c=d[0]);const u=o.noSwipingSelector?o.noSwipingSelector:".".concat(o.noSwipingClass),h=!(!r.target||!r.target.shadowRoot);if(o.noSwiping&&(h?function(e,t){return void 0===t&&(t=this),function t(n){if(!n||n===ra()||n===oa())return null;n.assignedSlot&&(n=n.assignedSlot);const r=n.closest(e);return r||n.getRootNode?r||t(n.getRootNode().host):null}(t)}(u,c):c.closest(u)))return void(t.allowClick=!0);if(o.swipeHandler&&!c.closest(o.swipeHandler))return;s.currentX=r.pageX,s.currentY=r.pageY;const p=s.currentX,f=s.currentY;if(!Ua(t,r,p))return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),s.startX=p,s.startY=f,i.touchStartTime=aa(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,o.threshold>0&&(i.allowThresholdMove=!1);let m=!0;c.matches(i.focusableElements)&&(m=!1,"SELECT"===c.nodeName&&(i.isTouched=!1)),n.activeElement&&n.activeElement.matches(i.focusableElements)&&n.activeElement!==c&&n.activeElement.blur();const g=m&&t.allowTouchMove&&o.touchStartPreventDefault;!o.touchStartForcePreventDefault&&!g||c.isContentEditable||r.preventDefault(),o.freeMode&&o.freeMode.enabled&&t.freeMode&&t.animating&&!o.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",r)}function za(e){const t=ra(),n=this,r=n.touchEventsData,{params:i,touches:o,rtlTranslate:s,enabled:a}=n;if(!a)return;if(!i.simulateTouch&&"mouse"===e.pointerType)return;let c,l=e;if(l.originalEvent&&(l=l.originalEvent),"pointermove"===l.type){if(null!==r.touchId)return;if(l.pointerId!==r.pointerId)return}if("touchmove"===l.type){if(c=[...l.changedTouches].filter((e=>e.identifier===r.touchId))[0],!c||c.identifier!==r.touchId)return}else c=l;if(!r.isTouched)return void(r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",l));const d=c.pageX,u=c.pageY;if(l.preventedByNestedSwiper)return o.startX=d,void(o.startY=u);if(!n.allowTouchMove)return l.target.matches(r.focusableElements)||(n.allowClick=!1),void(r.isTouched&&(Object.assign(o,{startX:d,startY:u,currentX:d,currentY:u}),r.touchStartTime=aa()));if(i.touchReleaseOnEdges&&!i.loop)if(n.isVertical()){if(u<o.startY&&n.translate<=n.maxTranslate()||u>o.startY&&n.translate>=n.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(d<o.startX&&n.translate<=n.maxTranslate()||d>o.startX&&n.translate>=n.minTranslate())return;if(t.activeElement&&l.target===t.activeElement&&l.target.matches(r.focusableElements))return r.isMoved=!0,void(n.allowClick=!1);r.allowTouchCallbacks&&n.emit("touchMove",l),o.previousX=o.currentX,o.previousY=o.currentY,o.currentX=d,o.currentY=u;const h=o.currentX-o.startX,p=o.currentY-o.startY;if(n.params.threshold&&Math.sqrt(h**2+p**2)<n.params.threshold)return;if("undefined"===typeof r.isScrolling){let e;n.isHorizontal()&&o.currentY===o.startY||n.isVertical()&&o.currentX===o.startX?r.isScrolling=!1:h*h+p*p>=25&&(e=180*Math.atan2(Math.abs(p),Math.abs(h))/Math.PI,r.isScrolling=n.isHorizontal()?e>i.touchAngle:90-e>i.touchAngle)}if(r.isScrolling&&n.emit("touchMoveOpposite",l),"undefined"===typeof r.startMoving&&(o.currentX===o.startX&&o.currentY===o.startY||(r.startMoving=!0)),r.isScrolling)return void(r.isTouched=!1);if(!r.startMoving)return;n.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation();let f=n.isHorizontal()?h:p,m=n.isHorizontal()?o.currentX-o.previousX:o.currentY-o.previousY;i.oneWayMovement&&(f=Math.abs(f)*(s?1:-1),m=Math.abs(m)*(s?1:-1)),o.diff=f,f*=i.touchRatio,s&&(f=-f,m=-m);const g=n.touchesDirection;n.swipeDirection=f>0?"prev":"next",n.touchesDirection=m>0?"prev":"next";const y=n.params.loop&&!i.cssMode,v="next"===n.touchesDirection&&n.allowSlideNext||"prev"===n.touchesDirection&&n.allowSlidePrev;if(!r.isMoved){if(y&&v&&n.loopFix({direction:n.swipeDirection}),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});n.wrapperEl.dispatchEvent(e)}r.allowMomentumBounce=!1,!i.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",l)}if((new Date).getTime(),r.isMoved&&r.allowThresholdMove&&g!==n.touchesDirection&&y&&v&&Math.abs(f)>=1)return Object.assign(o,{startX:d,startY:u,currentX:d,currentY:u,startTranslate:r.currentTranslate}),r.loopSwapReset=!0,void(r.startTranslate=r.currentTranslate);n.emit("sliderMove",l),r.isMoved=!0,r.currentTranslate=f+r.startTranslate;let _=!0,E=i.resistanceRatio;if(i.touchReleaseOnEdges&&(E=0),f>0?(y&&v&&r.allowThresholdMove&&r.currentTranslate>(i.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>n.minTranslate()&&(_=!1,i.resistance&&(r.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+r.startTranslate+f)**E))):f<0&&(y&&v&&r.allowThresholdMove&&r.currentTranslate<(i.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]:n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-("auto"===i.slidesPerView?n.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),r.currentTranslate<n.maxTranslate()&&(_=!1,i.resistance&&(r.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-r.startTranslate-f)**E))),_&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),n.allowSlidePrev||n.allowSlideNext||(r.currentTranslate=r.startTranslate),i.threshold>0){if(!(Math.abs(f)>i.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,r.currentTranslate=r.startTranslate,void(o.diff=n.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY)}i.followFinger&&!i.cssMode&&((i.freeMode&&i.freeMode.enabled&&n.freeMode||i.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),i.freeMode&&i.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}function Va(e){const t=this,n=t.touchEventsData;let r,i=e;i.originalEvent&&(i=i.originalEvent);if("touchend"===i.type||"touchcancel"===i.type){if(r=[...i.changedTouches].filter((e=>e.identifier===n.touchId))[0],!r||r.identifier!==n.touchId)return}else{if(null!==n.touchId)return;if(i.pointerId!==n.pointerId)return;r=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)){if(!(["pointercancel","contextmenu"].includes(i.type)&&(t.browser.isSafari||t.browser.isWebView)))return}n.pointerId=null,n.touchId=null;const{params:o,touches:s,rtlTranslate:a,slidesGrid:c,enabled:l}=t;if(!l)return;if(!o.simulateTouch&&"mouse"===i.pointerType)return;if(n.allowTouchCallbacks&&t.emit("touchEnd",i),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&o.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);o.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const d=aa(),u=d-n.touchStartTime;if(t.allowClick){const e=i.path||i.composedPath&&i.composedPath();t.updateClickedSlide(e&&e[0]||i.target,e),t.emit("tap click",i),u<300&&d-n.lastClickTime<300&&t.emit("doubleTap doubleClick",i)}if(n.lastClickTime=aa(),sa((()=>{t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===s.diff&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);let h;if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,h=o.followFinger?a?t.translate:-t.translate:-n.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:h});const p=h>=-t.maxTranslate()&&!t.params.loop;let f=0,m=t.slidesSizesGrid[0];for(let E=0;E<c.length;E+=E<o.slidesPerGroupSkip?1:o.slidesPerGroup){const e=E<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;"undefined"!==typeof c[E+e]?(p||h>=c[E]&&h<c[E+e])&&(f=E,m=c[E+e]-c[E]):(p||h>=c[E])&&(f=E,m=c[c.length-1]-c[c.length-2])}let g=null,y=null;o.rewind&&(t.isBeginning?y=o.virtual&&o.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(g=0));const v=(h-c[f])/m,_=f<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(u>o.longSwipesMs){if(!o.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(v>=o.longSwipesRatio?t.slideTo(o.rewind&&t.isEnd?g:f+_):t.slideTo(f)),"prev"===t.swipeDirection&&(v>1-o.longSwipesRatio?t.slideTo(f+_):null!==y&&v<0&&Math.abs(v)>o.longSwipesRatio?t.slideTo(y):t.slideTo(f))}else{if(!o.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(i.target===t.navigation.nextEl||i.target===t.navigation.prevEl)?i.target===t.navigation.nextEl?t.slideTo(f+_):t.slideTo(f):("next"===t.swipeDirection&&t.slideTo(null!==g?g:f+_),"prev"===t.swipeDirection&&t.slideTo(null!==y?y:f))}}function Ba(){const e=this,{params:t,el:n}=e;if(n&&0===n.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:o}=e,s=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const a=s&&t.loop;!("auto"===t.slidesPerView||t.slidesPerView>1)||!e.isEnd||e.isBeginning||e.params.centeredSlides||a?e.params.loop&&!s?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0):e.slideTo(e.slides.length-1,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout((()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()}),500)),e.allowSlidePrev=i,e.allowSlideNext=r,e.params.watchOverflow&&o!==e.snapGrid&&e.checkOverflow()}function Ga(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function Ha(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:r}=e;if(!r)return;let i;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const o=e.maxTranslate()-e.minTranslate();i=0===o?0:(e.translate-e.minTranslate())/o,i!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function Wa(e){const t=this;Ra(t,e.target),t.params.cssMode||"auto"!==t.params.slidesPerView&&!t.params.autoHeight||t.update()}function Ya(){const e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}const qa=(e,t)=>{const n=ra(),{params:r,el:i,wrapperEl:o,device:s}=e,a=!!r.nested,c="on"===t?"addEventListener":"removeEventListener",l=t;n[c]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:a}),i[c]("touchstart",e.onTouchStart,{passive:!1}),i[c]("pointerdown",e.onTouchStart,{passive:!1}),n[c]("touchmove",e.onTouchMove,{passive:!1,capture:a}),n[c]("pointermove",e.onTouchMove,{passive:!1,capture:a}),n[c]("touchend",e.onTouchEnd,{passive:!0}),n[c]("pointerup",e.onTouchEnd,{passive:!0}),n[c]("pointercancel",e.onTouchEnd,{passive:!0}),n[c]("touchcancel",e.onTouchEnd,{passive:!0}),n[c]("pointerout",e.onTouchEnd,{passive:!0}),n[c]("pointerleave",e.onTouchEnd,{passive:!0}),n[c]("contextmenu",e.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&i[c]("click",e.onClick,!0),r.cssMode&&o[c]("scroll",e.onScroll),r.updateOnWindowResize?e[l](s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",Ba,!0):e[l]("observerUpdate",Ba,!0),i[c]("load",e.onLoad,{capture:!0})};var Ka={attachEvents:function(){const e=this,{params:t}=e;e.onTouchStart=Fa.bind(e),e.onTouchMove=za.bind(e),e.onTouchEnd=Va.bind(e),e.onDocumentTouchStart=Ya.bind(e),t.cssMode&&(e.onScroll=Ha.bind(e)),e.onClick=Ga.bind(e),e.onLoad=Wa.bind(e),qa(e,"on")},detachEvents:function(){qa(this,"off")}};const Qa=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;var Ja={setBreakpoint:function(){const e=this,{realIndex:t,initialized:n,params:r,el:i}=e,o=r.breakpoints;if(!o||o&&0===Object.keys(o).length)return;const s=e.getBreakpoint(o,e.params.breakpointsBase,e.el);if(!s||e.currentBreakpoint===s)return;const a=(s in o?o[s]:void 0)||e.originalParams,c=Qa(e,r),l=Qa(e,a),d=r.enabled;c&&!l?(i.classList.remove("".concat(r.containerModifierClass,"grid"),"".concat(r.containerModifierClass,"grid-column")),e.emitContainerClasses()):!c&&l&&(i.classList.add("".concat(r.containerModifierClass,"grid")),(a.grid.fill&&"column"===a.grid.fill||!a.grid.fill&&"column"===r.grid.fill)&&i.classList.add("".concat(r.containerModifierClass,"grid-column")),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach((t=>{if("undefined"===typeof a[t])return;const n=r[t]&&r[t].enabled,i=a[t]&&a[t].enabled;n&&!i&&e[t].disable(),!n&&i&&e[t].enable()}));const u=a.direction&&a.direction!==r.direction,h=r.loop&&(a.slidesPerView!==r.slidesPerView||u),p=r.loop;u&&n&&e.changeDirection(),da(e.params,a);const f=e.params.enabled,m=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),d&&!f?e.disable():!d&&f&&e.enable(),e.currentBreakpoint=s,e.emit("_beforeBreakpoint",a),n&&(h?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!p&&m?(e.loopCreate(t),e.updateSlides()):p&&!m&&e.loopDestroy()),e.emit("breakpoint",a)},getBreakpoint:function(e,t,n){if(void 0===t&&(t="window"),!e||"container"===t&&!n)return;let r=!1;const i=oa(),o="window"===t?i.innerHeight:n.clientHeight,s=Object.keys(e).map((e=>{if("string"===typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1));return{value:o*t,point:e}}return{value:e,point:e}}));s.sort(((e,t)=>parseInt(e.value,10)-parseInt(t.value,10)));for(let a=0;a<s.length;a+=1){const{point:e,value:o}=s[a];"window"===t?i.matchMedia("(min-width: ".concat(o,"px)")).matches&&(r=e):o<=n.clientWidth&&(r=e)}return r||"max"}};var Xa={addClasses:function(){const e=this,{classNames:t,params:n,rtl:r,el:i,device:o}=e,s=function(e,t){const n=[];return e.forEach((e=>{"object"===typeof e?Object.keys(e).forEach((r=>{e[r]&&n.push(t+r)})):"string"===typeof e&&n.push(t+e)})),n}(["initialized",n.direction,{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&"column"===n.grid.fill},{android:o.android},{ios:o.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push(...s),i.classList.add(...t),e.emitContainerClasses()},removeClasses:function(){const{el:e,classNames:t}=this;e.classList.remove(...t),this.emitContainerClasses()}};var Za={checkOverflow:function(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:r}=n;if(r){const t=e.slides.length-1,n=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*r;e.isLocked=e.size>n}else e.isLocked=1===e.snapGrid.length;!0===n.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===n.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},$a={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function ec(e,t){return function(n){void 0===n&&(n={});const r=Object.keys(n)[0],i=n[r];"object"===typeof i&&null!==i?(!0===e[r]&&(e[r]={enabled:!0}),"navigation"===r&&e[r]&&e[r].enabled&&!e[r].prevEl&&!e[r].nextEl&&(e[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&e[r]&&e[r].enabled&&!e[r].el&&(e[r].auto=!0),r in e&&"enabled"in i?("object"!==typeof e[r]||"enabled"in e[r]||(e[r].enabled=!0),e[r]||(e[r]={enabled:!1}),da(t,n)):da(t,n)):da(t,n)}}const tc={eventsEmitter:wa,update:Ma,translate:Da,transition:xa,slide:La,loop:Pa,grabCursor:ja,events:Ka,breakpoints:Ja,checkOverflow:Za,classes:Xa},nc={};class rc{constructor(){let e,t;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];1===r.length&&r[0].constructor&&"Object"===Object.prototype.toString.call(r[0]).slice(8,-1)?t=r[0]:[e,t]=r,t||(t={}),t=da({},t),e&&!t.el&&(t.el=e);const o=ra();if(t.el&&"string"===typeof t.el&&o.querySelectorAll(t.el).length>1){const e=[];return o.querySelectorAll(t.el).forEach((n=>{const r=da({},t,{el:n});e.push(new rc(r))})),e}const s=this;s.__swiper__=!0,s.support=Ia(),s.device=Na({userAgent:t.userAgent}),s.browser=Ca(),s.eventsListeners={},s.eventsAnyListeners=[],s.modules=[...s.__modules__],t.modules&&Array.isArray(t.modules)&&s.modules.push(...t.modules);const a={};s.modules.forEach((e=>{e({params:t,swiper:s,extendParams:ec(t,a),on:s.on.bind(s),once:s.once.bind(s),off:s.off.bind(s),emit:s.emit.bind(s)})}));const c=da({},$a,a);return s.params=da({},c,nc,t),s.originalParams=da({},s.params),s.passedParams=da({},t),s.params&&s.params.on&&Object.keys(s.params.on).forEach((e=>{s.on(e,s.params.on[e])})),s.params&&s.params.onAny&&s.onAny(s.params.onAny),Object.assign(s,{enabled:s.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===s.params.direction,isVertical:()=>"vertical"===s.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:s.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:s.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),s.emit("_swiper"),s.params.init&&s.init(),s}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:n}=this,r=va(fa(t,".".concat(n.slideClass,", swiper-slide"))[0]);return va(e)-r}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter((t=>1*t.getAttribute("data-swiper-slide-index")===e))[0])}recalcSlides(){const{slidesEl:e,params:t}=this;this.slides=fa(e,".".concat(t.slideClass,", swiper-slide"))}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const r=n.minTranslate(),i=(n.maxTranslate()-r)*e+r;n.translateTo(i,"undefined"===typeof t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter((t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass)));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter((e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass))).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach((n=>{const r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)})),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){void 0===e&&(e="current"),void 0===t&&(t=!1);const{params:n,slides:r,slidesGrid:i,slidesSizesGrid:o,size:s,activeIndex:a}=this;let c=1;if("number"===typeof n.slidesPerView)return n.slidesPerView;if(n.centeredSlides){let e,t=r[a]?Math.ceil(r[a].swiperSlideSize):0;for(let n=a+1;n<r.length;n+=1)r[n]&&!e&&(t+=Math.ceil(r[n].swiperSlideSize),c+=1,t>s&&(e=!0));for(let n=a-1;n>=0;n-=1)r[n]&&!e&&(t+=r[n].swiperSlideSize,c+=1,t>s&&(e=!0))}else if("current"===e)for(let l=a+1;l<r.length;l+=1){(t?i[l]+o[l]-i[a]<s:i[l]-i[a]<s)&&(c+=1)}else for(let l=a-1;l>=0;l-=1){i[a]-i[l]<s&&(c+=1)}return c}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;function r(){const t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}let i;if(n.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach((t=>{t.complete&&Ra(e,t)})),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),n.freeMode&&n.freeMode.enabled&&!n.cssMode)r(),n.autoHeight&&e.updateAutoHeight();else{if(("auto"===n.slidesPerView||n.slidesPerView>1)&&e.isEnd&&!n.centeredSlides){const t=e.virtual&&n.virtual.enabled?e.virtual.slides:e.slides;i=e.slideTo(t.length-1,0,!1,!0)}else i=e.slideTo(e.activeIndex,0,!1,!0);i||r()}n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){void 0===t&&(t=!0);const n=this,r=n.params.direction;return e||(e="horizontal"===r?"vertical":"horizontal"),e===r||"horizontal"!==e&&"vertical"!==e||(n.el.classList.remove("".concat(n.params.containerModifierClass).concat(r)),n.el.classList.add("".concat(n.params.containerModifierClass).concat(e)),n.emitContainerClasses(),n.params.direction=e,n.slides.forEach((t=>{"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){const t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.el.classList.add("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="rtl"):(t.el.classList.remove("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let n=e||t.params.el;if("string"===typeof n&&(n=document.querySelector(n)),!n)return!1;n.swiper=t,n.parentNode&&n.parentNode.host&&n.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const r=()=>".".concat((t.params.wrapperClass||"").trim().split(" ").join("."));let i=(()=>{if(n&&n.shadowRoot&&n.shadowRoot.querySelector){return n.shadowRoot.querySelector(r())}return fa(n,r())[0]})();return!i&&t.params.createElements&&(i=ga("div",t.params.wrapperClass),n.append(i),fa(n,".".concat(t.params.slideClass)).forEach((e=>{i.append(e)}))),Object.assign(t,{el:n,wrapperEl:i,slidesEl:t.isElement&&!n.parentNode.host.slideSlots?n.parentNode.host:i,hostEl:t.isElement?n.parentNode.host:n,mounted:!0,rtl:"rtl"===n.dir.toLowerCase()||"rtl"===ya(n,"direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===n.dir.toLowerCase()||"rtl"===ya(n,"direction")),wrongRTL:"-webkit-box"===ya(i,"display")}),!0}init(e){const t=this;if(t.initialized)return t;if(!1===t.mount(e))return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const n=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&n.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),n.forEach((e=>{e.complete?Ra(t,e):e.addEventListener("load",(e=>{Ra(t,e.target)}))})),Oa(t),t.initialized=!0,Oa(t),t.emit("init"),t.emit("afterInit"),t}destroy(t,n){void 0===t&&(t=!0),void 0===n&&(n=!0);const r=this,{params:i,el:o,wrapperEl:s,slides:a}=r;return"undefined"===typeof r.params||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),i.loop&&r.loopDestroy(),n&&(r.removeClasses(),o.removeAttribute("style"),s.removeAttribute("style"),a&&a.length&&a.forEach((e=>{e.classList.remove(i.slideVisibleClass,i.slideFullyVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),e.removeAttribute("style"),e.removeAttribute("data-swiper-slide-index")}))),r.emit("destroy"),Object.keys(r.eventsListeners).forEach((e=>{r.off(e)})),!1!==t&&(r.el.swiper=null,function(t){const n=t;Object.keys(n).forEach((t=>{try{n[t]=null}catch(e){}try{delete n[t]}catch(e){}}))}(r)),r.destroyed=!0),null}static extendDefaults(e){da(nc,e)}static get extendedDefaults(){return nc}static get defaults(){return $a}static installModule(e){rc.prototype.__modules__||(rc.prototype.__modules__=[]);const t=rc.prototype.__modules__;"function"===typeof e&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach((e=>rc.installModule(e))),rc):(rc.installModule(e),rc)}}Object.keys(tc).forEach((e=>{Object.keys(tc[e]).forEach((t=>{rc.prototype[t]=tc[e][t]}))})),rc.use([function(e){let{swiper:t,on:n,emit:r}=e;const i=oa();let o=null,s=null;const a=()=>{t&&!t.destroyed&&t.initialized&&(r("beforeResize"),r("resize"))},c=()=>{t&&!t.destroyed&&t.initialized&&r("orientationchange")};n("init",(()=>{t.params.resizeObserver&&"undefined"!==typeof i.ResizeObserver?t&&!t.destroyed&&t.initialized&&(o=new ResizeObserver((e=>{s=i.requestAnimationFrame((()=>{const{width:n,height:r}=t;let i=n,o=r;e.forEach((e=>{let{contentBoxSize:n,contentRect:r,target:s}=e;s&&s!==t.el||(i=r?r.width:(n[0]||n).inlineSize,o=r?r.height:(n[0]||n).blockSize)})),i===n&&o===r||a()}))})),o.observe(t.el)):(i.addEventListener("resize",a),i.addEventListener("orientationchange",c))})),n("destroy",(()=>{s&&i.cancelAnimationFrame(s),o&&o.unobserve&&t.el&&(o.unobserve(t.el),o=null),i.removeEventListener("resize",a),i.removeEventListener("orientationchange",c)}))},function(e){let{swiper:t,extendParams:n,on:r,emit:i}=e;const o=[],s=oa(),a=function(e,n){void 0===n&&(n={});const r=new(s.MutationObserver||s.WebkitMutationObserver)((e=>{if(t.__preventObserver__)return;if(1===e.length)return void i("observerUpdate",e[0]);const n=function(){i("observerUpdate",e[0])};s.requestAnimationFrame?s.requestAnimationFrame(n):s.setTimeout(n,0)}));r.observe(e,{attributes:"undefined"===typeof n.attributes||n.attributes,childList:"undefined"===typeof n.childList||n.childList,characterData:"undefined"===typeof n.characterData||n.characterData}),o.push(r)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",(()=>{if(t.params.observer){if(t.params.observeParents){const e=function(e,t){const n=[];let r=e.parentElement;for(;r;)t?r.matches(t)&&n.push(r):n.push(r),r=r.parentElement;return n}(t.hostEl);for(let t=0;t<e.length;t+=1)a(e[t])}a(t.hostEl,{childList:t.params.observeSlideChildren}),a(t.wrapperEl,{attributes:!1})}})),r("destroy",(()=>{o.forEach((e=>{e.disconnect()})),o.splice(0,o.length)}))}]);const ic=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function oc(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)&&!e.__swiper__}function sc(e,t){const n=["__proto__","constructor","prototype"];Object.keys(t).filter((e=>n.indexOf(e)<0)).forEach((n=>{"undefined"===typeof e[n]?e[n]=t[n]:oc(t[n])&&oc(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:sc(e[n],t[n]):e[n]=t[n]}))}function ac(e){return void 0===e&&(e={}),e.navigation&&"undefined"===typeof e.navigation.nextEl&&"undefined"===typeof e.navigation.prevEl}function cc(e){return void 0===e&&(e={}),e.pagination&&"undefined"===typeof e.pagination.el}function lc(e){return void 0===e&&(e={}),e.scrollbar&&"undefined"===typeof e.scrollbar.el}function dc(e){void 0===e&&(e="");const t=e.split(" ").map((e=>e.trim())).filter((e=>!!e)),n=[];return t.forEach((e=>{n.indexOf(e)<0&&n.push(e)})),n.join(" ")}function uc(e){return void 0===e&&(e=""),e?e.includes("swiper-wrapper")?e:"swiper-wrapper ".concat(e):"swiper-wrapper"}function hc(){return hc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hc.apply(this,arguments)}function pc(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function fc(e){const t=[];return r.Children.toArray(e).forEach((e=>{pc(e)?t.push(e):e.props&&e.props.children&&fc(e.props.children).forEach((e=>t.push(e)))})),t}function mc(e){const t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return r.Children.toArray(e).forEach((e=>{if(pc(e))t.push(e);else if(e.props&&e.props.slot&&n[e.props.slot])n[e.props.slot].push(e);else if(e.props&&e.props.children){const r=fc(e.props.children);r.length>0?r.forEach((e=>t.push(e))):n["container-end"].push(e)}else n["container-end"].push(e)})),{slides:t,slots:n}}function gc(e,t){return"undefined"===typeof window?(0,r.useEffect)(e,t):(0,r.useLayoutEffect)(e,t)}const yc=(0,r.createContext)(null),vc=(0,r.createContext)(null),_c=(0,r.forwardRef)((function(e,t){let{className:n,tag:i="div",wrapperTag:o="div",children:s,onSwiper:a,...c}=void 0===e?{}:e,l=!1;const[d,u]=(0,r.useState)("swiper"),[h,p]=(0,r.useState)(null),[f,m]=(0,r.useState)(!1),g=(0,r.useRef)(!1),y=(0,r.useRef)(null),v=(0,r.useRef)(null),_=(0,r.useRef)(null),E=(0,r.useRef)(null),S=(0,r.useRef)(null),T=(0,r.useRef)(null),b=(0,r.useRef)(null),I=(0,r.useRef)(null),{params:N,passedParams:C,rest:w,events:R}=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!0);const n={on:{}},r={},i={};sc(n,$a),n._emitClasses=!0,n.init=!1;const o={},s=ic.map((e=>e.replace(/_/,""))),a=Object.assign({},e);return Object.keys(a).forEach((a=>{"undefined"!==typeof e[a]&&(s.indexOf(a)>=0?oc(e[a])?(n[a]={},i[a]={},sc(n[a],e[a]),sc(i[a],e[a])):(n[a]=e[a],i[a]=e[a]):0===a.search(/on[A-Z]/)&&"function"===typeof e[a]?t?r["".concat(a[2].toLowerCase()).concat(a.substr(3))]=e[a]:n.on["".concat(a[2].toLowerCase()).concat(a.substr(3))]=e[a]:o[a]=e[a])})),["navigation","pagination","scrollbar"].forEach((e=>{!0===n[e]&&(n[e]={}),!1===n[e]&&delete n[e]})),{params:n,passedParams:i,rest:o,events:r}}(c),{slides:A,slots:O}=mc(s),M=()=>{m(!f)};Object.assign(N.on,{_containerClasses(e,t){u(t)}});const D=()=>{Object.assign(N.on,R),l=!0;const e={...N};if(delete e.wrapperClass,v.current=new rc(e),v.current.virtual&&v.current.params.virtual.enabled){v.current.virtual.slides=A;const e={cache:!1,slides:A,renderExternal:p,renderExternalUpdate:!1};sc(v.current.params.virtual,e),sc(v.current.originalParams.virtual,e)}};y.current||D(),v.current&&v.current.on("_beforeBreakpoint",M);return(0,r.useEffect)((()=>()=>{v.current&&v.current.off("_beforeBreakpoint",M)})),(0,r.useEffect)((()=>{!g.current&&v.current&&(v.current.emitSlidesClasses(),g.current=!0)})),gc((()=>{if(t&&(t.current=y.current),y.current)return v.current.destroyed&&D(),function(e,t){let{el:n,nextEl:r,prevEl:i,paginationEl:o,scrollbarEl:s,swiper:a}=e;ac(t)&&r&&i&&(a.params.navigation.nextEl=r,a.originalParams.navigation.nextEl=r,a.params.navigation.prevEl=i,a.originalParams.navigation.prevEl=i),cc(t)&&o&&(a.params.pagination.el=o,a.originalParams.pagination.el=o),lc(t)&&s&&(a.params.scrollbar.el=s,a.originalParams.scrollbar.el=s),a.init(n)}({el:y.current,nextEl:S.current,prevEl:T.current,paginationEl:b.current,scrollbarEl:I.current,swiper:v.current},N),a&&!v.current.destroyed&&a(v.current),()=>{v.current&&!v.current.destroyed&&v.current.destroy(!0,!1)}}),[]),gc((()=>{!l&&R&&v.current&&Object.keys(R).forEach((e=>{v.current.on(e,R[e])}));const e=function(e,t,n,r,i){const o=[];if(!t)return o;const s=e=>{o.indexOf(e)<0&&o.push(e)};if(n&&r){const e=r.map(i),t=n.map(i);e.join("")!==t.join("")&&s("children"),r.length!==n.length&&s("children")}return ic.filter((e=>"_"===e[0])).map((e=>e.replace(/_/,""))).forEach((n=>{if(n in e&&n in t)if(oc(e[n])&&oc(t[n])){const r=Object.keys(e[n]),i=Object.keys(t[n]);r.length!==i.length?s(n):(r.forEach((r=>{e[n][r]!==t[n][r]&&s(n)})),i.forEach((r=>{e[n][r]!==t[n][r]&&s(n)})))}else e[n]!==t[n]&&s(n)})),o}(C,_.current,A,E.current,(e=>e.key));return _.current=C,E.current=A,e.length&&v.current&&!v.current.destroyed&&function(e){let{swiper:t,slides:n,passedParams:r,changedParams:i,nextEl:o,prevEl:s,scrollbarEl:a,paginationEl:c}=e;const l=i.filter((e=>"children"!==e&&"direction"!==e&&"wrapperClass"!==e)),{params:d,pagination:u,navigation:h,scrollbar:p,virtual:f,thumbs:m}=t;let g,y,v,_,E,S,T,b;i.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&d.thumbs&&!d.thumbs.swiper&&(g=!0),i.includes("controller")&&r.controller&&r.controller.control&&d.controller&&!d.controller.control&&(y=!0),i.includes("pagination")&&r.pagination&&(r.pagination.el||c)&&(d.pagination||!1===d.pagination)&&u&&!u.el&&(v=!0),i.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||a)&&(d.scrollbar||!1===d.scrollbar)&&p&&!p.el&&(_=!0),i.includes("navigation")&&r.navigation&&(r.navigation.prevEl||s)&&(r.navigation.nextEl||o)&&(d.navigation||!1===d.navigation)&&h&&!h.prevEl&&!h.nextEl&&(E=!0);const I=e=>{t[e]&&(t[e].destroy(),"navigation"===e?(t.isElement&&(t[e].prevEl.remove(),t[e].nextEl.remove()),d[e].prevEl=void 0,d[e].nextEl=void 0,t[e].prevEl=void 0,t[e].nextEl=void 0):(t.isElement&&t[e].el.remove(),d[e].el=void 0,t[e].el=void 0))};i.includes("loop")&&t.isElement&&(d.loop&&!r.loop?S=!0:!d.loop&&r.loop?T=!0:b=!0),l.forEach((e=>{if(oc(d[e])&&oc(r[e]))Object.assign(d[e],r[e]),"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e||!("enabled"in r[e])||r[e].enabled||I(e);else{const t=r[e];!0!==t&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?d[e]=r[e]:!1===t&&I(e)}})),l.includes("controller")&&!y&&t.controller&&t.controller.control&&d.controller&&d.controller.control&&(t.controller.control=d.controller.control),i.includes("children")&&n&&f&&d.virtual.enabled?(f.slides=n,f.update(!0)):i.includes("virtual")&&f&&d.virtual.enabled&&(n&&(f.slides=n),f.update(!0)),i.includes("children")&&n&&d.loop&&(b=!0),g&&m.init()&&m.update(!0);y&&(t.controller.control=d.controller.control),v&&(!t.isElement||c&&"string"!==typeof c||(c=document.createElement("div"),c.classList.add("swiper-pagination"),c.part.add("pagination"),t.el.appendChild(c)),c&&(d.pagination.el=c),u.init(),u.render(),u.update()),_&&(!t.isElement||a&&"string"!==typeof a||(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),t.el.appendChild(a)),a&&(d.scrollbar.el=a),p.init(),p.updateSize(),p.setTranslate()),E&&(t.isElement&&(o&&"string"!==typeof o||(o=document.createElement("div"),o.classList.add("swiper-button-next"),o.innerHTML=t.hostEl.constructor.nextButtonSvg,o.part.add("button-next"),t.el.appendChild(o)),s&&"string"!==typeof s||(s=document.createElement("div"),s.classList.add("swiper-button-prev"),s.innerHTML=t.hostEl.constructor.prevButtonSvg,s.part.add("button-prev"),t.el.appendChild(s))),o&&(d.navigation.nextEl=o),s&&(d.navigation.prevEl=s),h.init(),h.update()),i.includes("allowSlideNext")&&(t.allowSlideNext=r.allowSlideNext),i.includes("allowSlidePrev")&&(t.allowSlidePrev=r.allowSlidePrev),i.includes("direction")&&t.changeDirection(r.direction,!1),(S||b)&&t.loopDestroy(),(T||b)&&t.loopCreate(),t.update()}({swiper:v.current,slides:A,passedParams:C,changedParams:e,nextEl:S.current,prevEl:T.current,scrollbarEl:I.current,paginationEl:b.current}),()=>{R&&v.current&&Object.keys(R).forEach((e=>{v.current.off(e,R[e])}))}})),gc((()=>{(e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())})(v.current)}),[h]),r.createElement(i,hc({ref:y,className:dc("".concat(d).concat(n?" ".concat(n):""))},w),r.createElement(vc.Provider,{value:v.current},O["container-start"],r.createElement(o,{className:uc(N.wrapperClass)},O["wrapper-start"],N.virtual?function(e,t,n){if(!n)return null;const i=e=>{let n=e;return e<0?n=t.length+e:n>=t.length&&(n-=t.length),n},o=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:"".concat(n.offset,"px")}:{top:"".concat(n.offset,"px")},{from:s,to:a}=n,c=e.params.loop?-t.length:0,l=e.params.loop?2*t.length:t.length,d=[];for(let r=c;r<l;r+=1)r>=s&&r<=a&&d.push(t[i(r)]);return d.map(((t,n)=>r.cloneElement(t,{swiper:e,style:o,key:t.props.virtualIndex||t.key||"slide-".concat(n)})))}(v.current,A,h):A.map(((e,t)=>r.cloneElement(e,{swiper:v.current,swiperSlideIndex:t}))),O["wrapper-end"]),ac(N)&&r.createElement(r.Fragment,null,r.createElement("div",{ref:T,className:"swiper-button-prev"}),r.createElement("div",{ref:S,className:"swiper-button-next"})),lc(N)&&r.createElement("div",{ref:I,className:"swiper-scrollbar"}),cc(N)&&r.createElement("div",{ref:b,className:"swiper-pagination"}),O["container-end"]))}));_c.displayName="Swiper";const Ec=(0,r.forwardRef)((function(e,t){let{tag:n="div",children:i,className:o="",swiper:s,zoom:a,lazy:c,virtualIndex:l,swiperSlideIndex:d,...u}=void 0===e?{}:e;const h=(0,r.useRef)(null),[p,f]=(0,r.useState)("swiper-slide"),[m,g]=(0,r.useState)(!1);function y(e,t,n){t===h.current&&f(n)}gc((()=>{if("undefined"!==typeof d&&(h.current.swiperSlideIndex=d),t&&(t.current=h.current),h.current&&s){if(!s.destroyed)return s.on("_slideClass",y),()=>{s&&s.off("_slideClass",y)};"swiper-slide"!==p&&f("swiper-slide")}})),gc((()=>{s&&h.current&&!s.destroyed&&f(s.getSlideClasses(h.current))}),[s]);const v={isActive:p.indexOf("swiper-slide-active")>=0,isVisible:p.indexOf("swiper-slide-visible")>=0,isPrev:p.indexOf("swiper-slide-prev")>=0,isNext:p.indexOf("swiper-slide-next")>=0},_=()=>"function"===typeof i?i(v):i;return r.createElement(n,hc({ref:h,className:dc("".concat(p).concat(o?" ".concat(o):"")),"data-swiper-slide-index":l,onLoad:()=>{g(!0)}},u),a&&r.createElement(yc.Provider,{value:v},r.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"===typeof a?a:void 0},_(),c&&!m&&r.createElement("div",{className:"swiper-lazy-preloader"}))),!a&&r.createElement(yc.Provider,{value:v},_(),c&&!m&&r.createElement("div",{className:"swiper-lazy-preloader"})))}));function Sc(e){let{swiper:t,extendParams:n,on:r,emit:i}=e;function o(e){let n;return e&&"string"===typeof e&&t.isElement&&(n=t.el.querySelector(e),n)?n:(e&&("string"===typeof e&&(n=[...document.querySelectorAll(e)]),t.params.uniqueNavElements&&"string"===typeof e&&n.length>1&&1===t.el.querySelectorAll(e).length&&(n=t.el.querySelector(e))),e&&!n?e:n)}function s(e,n){const r=t.params.navigation;(e=Ea(e)).forEach((e=>{e&&(e.classList[n?"add":"remove"](...r.disabledClass.split(" ")),"BUTTON"===e.tagName&&(e.disabled=n),t.params.watchOverflow&&t.enabled&&e.classList[t.isLocked?"add":"remove"](r.lockClass))}))}function a(){const{nextEl:e,prevEl:n}=t.navigation;if(t.params.loop)return s(n,!1),void s(e,!1);s(n,t.isBeginning&&!t.params.rewind),s(e,t.isEnd&&!t.params.rewind)}function c(e){e.preventDefault(),(!t.isBeginning||t.params.loop||t.params.rewind)&&(t.slidePrev(),i("navigationPrev"))}function l(e){e.preventDefault(),(!t.isEnd||t.params.loop||t.params.rewind)&&(t.slideNext(),i("navigationNext"))}function d(){const e=t.params.navigation;if(t.params.navigation=function(e,t,n,r){return e.params.createElements&&Object.keys(r).forEach((i=>{if(!n[i]&&!0===n.auto){let o=fa(e.el,".".concat(r[i]))[0];o||(o=ga("div",r[i]),o.className=r[i],e.el.append(o)),n[i]=o,t[i]=o}})),n}(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!e.nextEl&&!e.prevEl)return;let n=o(e.nextEl),r=o(e.prevEl);Object.assign(t.navigation,{nextEl:n,prevEl:r}),n=Ea(n),r=Ea(r);const i=(n,r)=>{n&&n.addEventListener("click","next"===r?l:c),!t.enabled&&n&&n.classList.add(...e.lockClass.split(" "))};n.forEach((e=>i(e,"next"))),r.forEach((e=>i(e,"prev")))}function u(){let{nextEl:e,prevEl:n}=t.navigation;e=Ea(e),n=Ea(n);const r=(e,n)=>{e.removeEventListener("click","next"===n?l:c),e.classList.remove(...t.params.navigation.disabledClass.split(" "))};e.forEach((e=>r(e,"next"))),n.forEach((e=>r(e,"prev")))}n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null},r("init",(()=>{!1===t.params.navigation.enabled?h():(d(),a())})),r("toEdge fromEdge lock unlock",(()=>{a()})),r("destroy",(()=>{u()})),r("enable disable",(()=>{let{nextEl:e,prevEl:n}=t.navigation;e=Ea(e),n=Ea(n),t.enabled?a():[...e,...n].filter((e=>!!e)).forEach((e=>e.classList.add(t.params.navigation.lockClass)))})),r("click",((e,n)=>{let{nextEl:r,prevEl:o}=t.navigation;r=Ea(r),o=Ea(o);const s=n.target;if(t.params.navigation.hideOnClick&&!o.includes(s)&&!r.includes(s)){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===s||t.pagination.el.contains(s)))return;let e;r.length?e=r[0].classList.contains(t.params.navigation.hiddenClass):o.length&&(e=o[0].classList.contains(t.params.navigation.hiddenClass)),i(!0===e?"navigationShow":"navigationHide"),[...r,...o].filter((e=>!!e)).forEach((e=>e.classList.toggle(t.params.navigation.hiddenClass)))}}));const h=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),u()};Object.assign(t.navigation,{enable:()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),d(),a()},disable:h,update:a,init:d,destroy:u})}function Tc(e){let t,n,{swiper:r,extendParams:i,on:o,emit:s,params:a}=e;r.autoplay={running:!1,paused:!1,timeLeft:0},i({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let c,l,d,u,h,p,f,m,g=a&&a.autoplay?a.autoplay.delay:3e3,y=a&&a.autoplay?a.autoplay.delay:3e3,v=(new Date).getTime();function _(e){r&&!r.destroyed&&r.wrapperEl&&e.target===r.wrapperEl&&(r.wrapperEl.removeEventListener("transitionend",_),m||N())}const E=()=>{if(r.destroyed||!r.autoplay.running)return;r.autoplay.paused?l=!0:l&&(y=c,l=!1);const e=r.autoplay.paused?c:v+y-(new Date).getTime();r.autoplay.timeLeft=e,s("autoplayTimeLeft",e,e/g),n=requestAnimationFrame((()=>{E()}))},S=e=>{if(r.destroyed||!r.autoplay.running)return;cancelAnimationFrame(n),E();let i="undefined"===typeof e?r.params.autoplay.delay:e;g=r.params.autoplay.delay,y=r.params.autoplay.delay;const o=(()=>{let e;if(e=r.virtual&&r.params.virtual.enabled?r.slides.filter((e=>e.classList.contains("swiper-slide-active")))[0]:r.slides[r.activeIndex],!e)return;return parseInt(e.getAttribute("data-swiper-autoplay"),10)})();!Number.isNaN(o)&&o>0&&"undefined"===typeof e&&(i=o,g=o,y=o),c=i;const a=r.params.speed,l=()=>{r&&!r.destroyed&&(r.params.autoplay.reverseDirection?!r.isBeginning||r.params.loop||r.params.rewind?(r.slidePrev(a,!0,!0),s("autoplay")):r.params.autoplay.stopOnLastSlide||(r.slideTo(r.slides.length-1,a,!0,!0),s("autoplay")):!r.isEnd||r.params.loop||r.params.rewind?(r.slideNext(a,!0,!0),s("autoplay")):r.params.autoplay.stopOnLastSlide||(r.slideTo(0,a,!0,!0),s("autoplay")),r.params.cssMode&&(v=(new Date).getTime(),requestAnimationFrame((()=>{S()}))))};return i>0?(clearTimeout(t),t=setTimeout((()=>{l()}),i)):requestAnimationFrame((()=>{l()})),i},T=()=>{v=(new Date).getTime(),r.autoplay.running=!0,S(),s("autoplayStart")},b=()=>{r.autoplay.running=!1,clearTimeout(t),cancelAnimationFrame(n),s("autoplayStop")},I=(e,n)=>{if(r.destroyed||!r.autoplay.running)return;clearTimeout(t),e||(f=!0);const i=()=>{s("autoplayPause"),r.params.autoplay.waitForTransition?r.wrapperEl.addEventListener("transitionend",_):N()};if(r.autoplay.paused=!0,n)return p&&(c=r.params.autoplay.delay),p=!1,void i();const o=c||r.params.autoplay.delay;c=o-((new Date).getTime()-v),r.isEnd&&c<0&&!r.params.loop||(c<0&&(c=0),i())},N=()=>{r.isEnd&&c<0&&!r.params.loop||r.destroyed||!r.autoplay.running||(v=(new Date).getTime(),f?(f=!1,S(c)):S(),r.autoplay.paused=!1,s("autoplayResume"))},C=()=>{if(r.destroyed||!r.autoplay.running)return;const e=ra();"hidden"===e.visibilityState&&(f=!0,I(!0)),"visible"===e.visibilityState&&N()},w=e=>{"mouse"===e.pointerType&&(f=!0,m=!0,r.animating||r.autoplay.paused||I(!0))},R=e=>{"mouse"===e.pointerType&&(m=!1,r.autoplay.paused&&N())};o("init",(()=>{r.params.autoplay.enabled&&(r.params.autoplay.pauseOnMouseEnter&&(r.el.addEventListener("pointerenter",w),r.el.addEventListener("pointerleave",R)),ra().addEventListener("visibilitychange",C),T())})),o("destroy",(()=>{r.el.removeEventListener("pointerenter",w),r.el.removeEventListener("pointerleave",R),ra().removeEventListener("visibilitychange",C),r.autoplay.running&&b()})),o("_freeModeStaticRelease",(()=>{(u||f)&&N()})),o("_freeModeNoMomentumRelease",(()=>{r.params.autoplay.disableOnInteraction?b():I(!0,!0)})),o("beforeTransitionStart",((e,t,n)=>{!r.destroyed&&r.autoplay.running&&(n||!r.params.autoplay.disableOnInteraction?I(!0,!0):b())})),o("sliderFirstMove",(()=>{!r.destroyed&&r.autoplay.running&&(r.params.autoplay.disableOnInteraction?b():(d=!0,u=!1,f=!1,h=setTimeout((()=>{f=!0,u=!0,I(!0)}),200)))})),o("touchEnd",(()=>{if(!r.destroyed&&r.autoplay.running&&d){if(clearTimeout(h),clearTimeout(t),r.params.autoplay.disableOnInteraction)return u=!1,void(d=!1);u&&r.params.cssMode&&N(),u=!1,d=!1}})),o("slideChange",(()=>{!r.destroyed&&r.autoplay.running&&(p=!0)})),Object.assign(r.autoplay,{start:T,stop:b,pause:I,resume:N})}function bc(e,t){const n=pa(t);return n!==t&&(n.style.backfaceVisibility="hidden",n.style["-webkit-backface-visibility"]="hidden"),n}function Ic(e){let{swiper:t,duration:n,transformElements:r,allSlides:i}=e;const{activeIndex:o}=t;if(t.params.virtualTranslate&&0!==n){let e,n=!1;e=i?r:r.filter((e=>{const n=e.classList.contains("swiper-slide-transform")?(e=>{if(!e.parentElement)return t.slides.filter((t=>t.shadowRoot&&t.shadowRoot===e.parentNode))[0];return e.parentElement})(e):e;return t.getSlideIndex(n)===o})),e.forEach((e=>{!function(e,t){t&&e.addEventListener("transitionend",(function n(r){r.target===e&&(t.call(e,r),e.removeEventListener("transitionend",n))}))}(e,(()=>{if(n)return;if(!t||t.destroyed)return;n=!0,t.animating=!1;const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(e)}))}))}}function Nc(e){let{swiper:t,extendParams:n,on:r}=e;n({fadeEffect:{crossFade:!1}});!function(e){const{effect:t,swiper:n,on:r,setTranslate:i,setTransition:o,overwriteParams:s,perspective:a,recreateShadows:c,getEffectParams:l}=e;let d;r("beforeInit",(()=>{if(n.params.effect!==t)return;n.classNames.push("".concat(n.params.containerModifierClass).concat(t)),a&&a()&&n.classNames.push("".concat(n.params.containerModifierClass,"3d"));const e=s?s():{};Object.assign(n.params,e),Object.assign(n.originalParams,e)})),r("setTranslate",(()=>{n.params.effect===t&&i()})),r("setTransition",((e,r)=>{n.params.effect===t&&o(r)})),r("transitionEnd",(()=>{if(n.params.effect===t&&c){if(!l||!l().slideShadows)return;n.slides.forEach((e=>{e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach((e=>e.remove()))})),c()}})),r("virtualUpdate",(()=>{n.params.effect===t&&(n.slides.length||(d=!0),requestAnimationFrame((()=>{d&&n.slides&&n.slides.length&&(i(),d=!1)})))}))}({effect:"fade",swiper:t,on:r,setTranslate:()=>{const{slides:e}=t;t.params.fadeEffect;for(let n=0;n<e.length;n+=1){const e=t.slides[n];let r=-e.swiperSlideOffset;t.params.virtualTranslate||(r-=t.translate);let i=0;t.isHorizontal()||(i=r,r=0);const o=t.params.fadeEffect.crossFade?Math.max(1-Math.abs(e.progress),0):1+Math.min(Math.max(e.progress,-1),0),s=bc(0,e);s.style.opacity=o,s.style.transform="translate3d(".concat(r,"px, ").concat(i,"px, 0px)")}},setTransition:e=>{const n=t.slides.map((e=>pa(e)));n.forEach((t=>{t.style.transitionDuration="".concat(e,"ms")})),Ic({swiper:t,duration:e,transformElements:n,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!t.params.cssMode})})}Ec.displayName="SwiperSlide";const Cc=()=>(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"fsMainSlider",children:(0,Me.jsx)("div",{className:"container",children:(0,Me.jsxs)("div",{className:"row justify-content-center",children:[(0,Me.jsx)("div",{className:"col-md-6 centerBx",children:(0,Me.jsxs)("div",{className:"",children:[(0,Me.jsxs)("h1",{children:["Find the right ",(0,Me.jsx)("i",{children:"freelance"})," service, right away"]}),(0,Me.jsxs)("form",{className:"input-group width100",children:[(0,Me.jsx)("input",{placeholder:"Search...",type:"text",className:"form-control"}),(0,Me.jsx)("button",{type:"button",id:"button-addon2",className:"btn btn-primary text-white",children:(0,Me.jsx)("i",{className:"fa fa-search text-white","aria-hidden":"true"})})]}),(0,Me.jsx)("div",{align:"left",children:(0,Me.jsxs)("ul",{className:"bannerPopularList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)("b",{children:"Popular : "})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{children:"Content Writer"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{children:"Photographer"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{children:"Web Developer"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{children:"UI/UX"})})]})})]})}),(0,Me.jsx)("div",{className:"col-md-1",align:"center"}),(0,Me.jsx)("div",{className:"col-md-5",align:"center",children:(0,Me.jsxs)(_c,{spaceBetween:0,slidesPerView:1,loop:!0,autoplay:{delay:2500,disableOnInteraction:!1},modules:[Nc,Tc],effect:"fade",onSlideChange:()=>"",onSwiper:e=>"",children:[(0,Me.jsx)(Ec,{children:(0,Me.jsx)("img",{src:"./assets/images/banner-M-1.webp",alt:""})}),(0,Me.jsx)(Ec,{children:(0,Me.jsx)("img",{src:"./assets/images/banner-M-2.webp",alt:""})}),(0,Me.jsx)(Ec,{children:(0,Me.jsx)("img",{src:"./assets/images/banner-M-3.webp",alt:""})}),(0,Me.jsx)(Ec,{children:(0,Me.jsx)("img",{src:"./assets/images/banner-M-4.webp",alt:""})})]})})]})})})}),wc=__webpack_require__.p+"static/media/no-poster.de8cb0a7786e6bf2b2de.png",Rc=e=>{let{item:t}=e;const{goodsList:n,wishListAdd:i,wishListRemove:o,userData:s}=Kr(),[a,c]=(0,r.useState)([]);return(0,r.useEffect)((()=>{if(n&&Array.isArray(n)){let e={};n.forEach((t=>{e[t.product_id]=t.isWishlist})),c(e)}}),[n]),(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"col-md-3 col-12 proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Re,{to:"/product-detail/".concat(t._id),children:(0,Me.jsx)("img",{src:t.photo||wc,className:"card-img-top allImg",alt:""})}),t.userId===s._id?"":(0,Me.jsx)("div",{className:"iconWish",onClick:()=>(e=>{if(a[e]){o(e);const t={...a};t[e]=!1,c(t)}else i(e),c((t=>({...t,[e]:!t[e]})))})(t.product_id),children:(0,Me.jsx)("i",{className:a[t.product_id]?"fa fa-heart text-danger":"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)(Re,{to:"/product-detail/".concat(t._id),children:null===t||void 0===t?void 0:t.title})}),(0,Me.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:t.description})]})]})},t._id)})},Ac=e=>{let{item:t,index:n}=e;const{goodsList:r}=Kr(),i=n%2!==0;return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"mt-4 ".concat(i?"bg-light":""),children:(0,Me.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Me.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Me.jsx)("h4",{className:"m-0",children:t.title}),(0,Me.jsx)(Re,{className:"text text-decoration-none ",to:"/".concat(t.slug,"?category_id=").concat(t._id),onMouseEnter:e=>e.target.style.color="var(--theme-color)",onMouseLeave:e=>e.target.style.color="black",children:"View All"})]}),(0,Me.jsx)("aside",{className:"row pt-2",children:Array.isArray(r)&&r.slice(0,4).map(((e,t)=>(0,Me.jsx)(Rc,{item:e},t)))},t._id)]})})})},Oc=e=>{let{item:t}=e;const{fashion:n,wishListAdd:i,wishListRemove:o,userData:s}=Kr(),[a,c]=(0,r.useState)([]);return(0,r.useEffect)((()=>{if(n&&Array.isArray(n)){let e={};n.forEach((t=>{e[t.product_id]=t.isWishlist})),c(e)}}),[n]),(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"",children:(0,Me.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Me.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Me.jsx)("h4",{children:"Fashion & Beauty"}),(0,Me.jsx)(Re,{className:"text text-decoration-none ",to:"/".concat(t.slug,"?category_id=").concat(t._id),onMouseEnter:e=>e.target.style.color="var(--theme-color)",onMouseLeave:e=>e.target.style.color="black",children:"View All"})]}),(0,Me.jsx)("aside",{className:"row pt-2",children:Array.isArray(n)&&n.slice(0,4).map((e=>(0,Me.jsx)("div",{className:"col-md-3 col-12 proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Re,{to:"/Fashion-Beauty-Details/".concat(e._id),children:(0,Me.jsx)("img",{src:e.photo||wc,className:"card-img-top allImg",alt:""})}),e.userId===s._id?"":(0,Me.jsx)("div",{className:"iconWish",onClick:()=>(e=>{if(a[e]){o(e);const t={...a};t[e]=!1,c(t)}else i(e),c((t=>({...t,[e]:!t[e]})))})(e.product_id),children:(0,Me.jsx)("i",{className:a[e.product_id]?"fa fa-heart text-danger":"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)(Re,{to:"/Fashion-Beauty-Details/".concat(e._id),children:e.title})}),(0,Me.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description})]})]})},e._id)))})]})})})},Mc=e=>{let{item:t}=e;const{lesson:n,wishListAdd:i,wishListRemove:o,userData:s}=Kr(),[a,c]=(0,r.useState)([]);return(0,r.useEffect)((()=>{if(n&&Array.isArray(n)){let e={};n.forEach((t=>{e[t.product_id]=t.isWishlist})),c(e)}}),[n]),(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"bg-light",children:(0,Me.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Me.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Me.jsx)("h4",{children:"Lessons & Courses"}),(0,Me.jsx)(Re,{className:"text text-decoration-none ",to:"/".concat(t.slug,"?category_id=").concat(t._id),onMouseEnter:e=>e.target.style.color="var(--theme-color)",onMouseLeave:e=>e.target.style.color="black",children:"View All"})]}),(0,Me.jsx)("aside",{className:"row pt-2 ",children:Array.isArray(n)&&n.slice(0,4).map((e=>(0,Me.jsx)("div",{className:"col-md-3 col-12 proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Re,{to:"/lessons-courses-detail/".concat(e._id),children:(0,Me.jsx)("img",{src:e.image||wc,className:"card-img-top allImg",alt:""})}),e.userId===s._id?"":(0,Me.jsx)("div",{className:"iconWish",onClick:()=>(e=>{if(a[e]){o(e);const t={...a};t[e]=!1,c(t)}else i(e),c((t=>({...t,[e]:!t[e]})))})(e.product_id),children:(0,Me.jsx)("i",{className:a[e.product_id]?"fa fa-heart text-danger":"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)(Re,{to:"/lessons-courses-detail/".concat(e._id),children:e.title})}),(0,Me.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description})]})]})},e._id)))})]})})})},Dc=e=>{let{item:t}=e;const{jobList:n,wishListAdd:i,wishListRemove:o,userData:s}=Kr(),[a,c]=(0,r.useState)({});return(0,r.useEffect)((()=>{if(n&&Array.isArray(n)){let e={};n.forEach((t=>{e[t.product_id]=t.isWishlist})),c(e)}}),[n]),(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"",children:(0,Me.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Me.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Me.jsx)("h4",{className:"m-0",children:t.title}),(0,Me.jsx)(Re,{className:"text text-decoration-none ",to:"/".concat(t.slug,"?category_id=").concat(t._id),onMouseEnter:e=>e.target.style.color="var(--theme-color)",onMouseLeave:e=>e.target.style.color="black",children:"View All"})]}),(0,Me.jsx)("aside",{className:"row pt-2",children:Array.isArray(n)&&n.slice(0,4).map((e=>(0,Me.jsx)("div",{className:"col-md-3 col-12 proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Re,{to:"/job-detail/".concat(e._id),children:(0,Me.jsx)("img",{src:e.image||wc,className:"card-img-top allImg",alt:""})}),e.userId===s._id?"":(0,Me.jsx)("div",{className:"iconWish",onClick:()=>(e=>{if(a[e]){o(e);const t={...a};t[e]=!1,c(t)}else i(e),c((t=>({...t,[e]:!t[e]})))})(e.product_id),children:(0,Me.jsx)("i",{className:a[e.product_id]?"fa fa-heart text-danger":"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)(Re,{to:"/job-detail/".concat(e._id),children:null===e||void 0===e?void 0:e.title})}),(0,Me.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description})]})]})},e._id)))})]})})})},kc=()=>(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"bg-light",children:(0,Me.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Me.jsx)("h4",{children:"Top cities"}),(0,Me.jsxs)("div",{className:"row cityLink border-bottom border-1 mt-3 mb-3",children:[(0,Me.jsx)("div",{className:"col",children:(0,Me.jsxs)("ul",{className:"list-unstyled",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{children:"Berlin"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{children:"Bremen"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{children:"Dortmund"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{children:"Dresden"})})]})}),(0,Me.jsx)("div",{className:"col",children:(0,Me.jsxs)("ul",{className:"list-unstyled",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{children:"Duisburg"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{children:"Dusseldorf"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{children:"Eat"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{children:"Frankfurt am Main"})})]})}),(0,Me.jsx)("div",{className:"col",children:(0,Me.jsxs)("ul",{className:"list-unstyled",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{children:"Hamburg"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{children:"Hanover"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{children:"Cologne"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{children:"Leipzig"})})]})}),(0,Me.jsx)("div",{className:"col",children:(0,Me.jsxs)("ul",{className:"list-unstyled",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{children:"Munich"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{children:"Nuremberg (Central Fri)"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{children:"Saarbr\xfccken"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{children:"Stuttgart"})})]})})]}),(0,Me.jsx)("h4",{children:"Important Info"}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."})]})})}),xc=e=>{let{item:t}=e;const{freelancerList:n,wishListAdd:i,wishListRemove:o,userData:s}=Kr(),[a,c]=(0,r.useState)([]);return(0,r.useEffect)((()=>{if(n&&Array.isArray(n)){let e={};n.forEach((t=>{e[t.product_id]=t.isWishlist})),c(e)}}),[n]),(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"bg-light",children:(0,Me.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Me.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Me.jsx)("h4",{className:"m-0",children:t.title}),(0,Me.jsx)(Re,{className:"text text-decoration-none ",to:"/".concat(t.slug,"?category_id=").concat(t._id),onMouseEnter:e=>e.target.style.color="var(--theme-color)",onMouseLeave:e=>e.target.style.color="black",children:"View All"})]}),(0,Me.jsx)("aside",{className:"row pt-2",children:Array.isArray(n)&&n.slice(0,4).map((e=>(0,Me.jsx)("div",{className:"col-md-3 col-12 proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Re,{to:"/freelancer-detail/".concat(e._id),children:(0,Me.jsx)("img",{src:e.image||wc,className:"card-img-top allImg",alt:""})}),e.userId===s._id?"":(0,Me.jsx)("div",{className:"iconWish",onClick:()=>(e=>{if(a[e]){o(e);const t={...a};t[e]=!1,c(t)}else i(e),c((t=>({...t,[e]:!t[e]})))})(e.product_id),children:(0,Me.jsx)("i",{className:a[e.product_id]?"fa fa-heart text-danger":"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)(Re,{to:"/freelancer-detail/".concat(e._id),children:e.title})}),(0,Me.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description})]})]})},e._id)))})]})})})},Lc=e=>{let{item:t}=e;const{property:n,wishListAdd:i,wishListRemove:o,userData:s}=Kr(),[a,c]=(0,r.useState)([]);return(0,r.useEffect)((()=>{if(n&&Array.isArray(n)){let e={};n.forEach((t=>{e[t.product_id]=t.isWishlist})),c(e)}}),[n]),(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"",children:(0,Me.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Me.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Me.jsx)("h4",{className:"m-0",children:t.title}),(0,Me.jsx)(Re,{className:"text text-decoration-none ",to:"/".concat(t.slug,"?category_id=").concat(t._id),onMouseEnter:e=>e.target.style.color="var(--theme-color)",onMouseLeave:e=>e.target.style.color="black",children:"View All"})]}),(0,Me.jsx)("aside",{className:"row pt-2",children:Array.isArray(n)&&n.slice(0,4).map((e=>(0,Me.jsx)("div",{className:"col-md-3 col-12 proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Re,{to:"/realstate-detail/".concat(e._id),children:(0,Me.jsx)("img",{src:e.photo||wc,className:"card-img-top allImg",alt:""})}),e.userId===s._id?"":(0,Me.jsx)("div",{className:"iconWish",onClick:()=>(e=>{if(a[e]){o(e);const t={...a};t[e]=!1,c(t)}else i(e),c((t=>({...t,[e]:!t[e]})))})(e.product_id),children:(0,Me.jsx)("i",{className:a[e.product_id]?"fa fa-heart text-danger":"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)(Re,{to:"/realstate-detail/".concat(e._id),children:e.title})}),(0,Me.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description})]})]})},e._id)))})]})})})},Pc=e=>{let{item:t}=e;const{electronicsList:n,wishListAdd:i,wishListRemove:o,userData:s}=Kr(),[a,c]=(0,r.useState)([]);return(0,r.useEffect)((()=>{if(n&&Array.isArray(n)){let e={};n.forEach((t=>{e[t.product_id]=t.isWishlist})),c(e)}}),[n]),(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"bg-light",children:(0,Me.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Me.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Me.jsx)("h4",{className:"m-0",children:t.title}),(0,Me.jsx)(Re,{className:"text text-decoration-none ",to:"/".concat(t.slug,"?category_id=").concat(t._id),onMouseEnter:e=>e.target.style.color="var(--theme-color)",onMouseLeave:e=>e.target.style.color="black",children:"View All"})]}),(0,Me.jsx)("aside",{className:"row pt-2 ",children:Array.isArray(n)&&n.slice(0,4).map((e=>(0,Me.jsx)("div",{className:"col-md-3 col-12 proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",children:[(0,Me.jsxs)("div",{className:"imgBx  ",children:[(0,Me.jsx)(Re,{to:"/Electronics-detail/".concat(e._id),children:(0,Me.jsx)("img",{src:e.photo||wc,className:"card-img-top allImg ",alt:""})}),e.userId===s._id?"":(0,Me.jsx)("div",{className:"iconWish",onClick:()=>(e=>{if(a[e]){o(e);const t={...a};t[e]=!1,c(t)}else i(e),c((t=>({...t,[e]:!t[e]})))})(e.product_id),children:(0,Me.jsx)("i",{className:a[e.product_id]?"fa fa-heart text-danger":"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)(Re,{to:"/Electronics-detail/".concat(e._id),children:e.title})}),(0,Me.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description})]})]})},e._id)))})]})})})},jc=()=>{const{serviceList:e}=Kr();return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(Cc,{}),(0,Me.jsxs)("div",{className:"bgtheme",children:[Array.isArray(e)&&e.map(((e,t)=>{switch(e.slug){case"goods_of_all_kinds":return(0,Me.jsx)(Ac,{item:e,index:t},t);case"fashion_beauty":return(0,Me.jsx)(Oc,{item:e,index:t},t);case"lesson_courses":return(0,Me.jsx)(Mc,{item:e,index:t},t);case"jobs":return(0,Me.jsx)(Dc,{item:e,index:t},t);case"freelancer":return(0,Me.jsx)(xc,{item:e,index:t},t);case"real_estate":return(0,Me.jsx)(Lc,{item:e,index:t},t);case"electronics":return(0,Me.jsx)(Pc,{item:e,index:t},t);default:return null}})),(0,Me.jsx)(kc,{})]})]})};function Uc(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Uc(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}const Fc=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Uc(e))&&(r&&(r+=" "),r+=t);return r},zc=e=>"number"==typeof e&&!isNaN(e),Vc=e=>"string"==typeof e,Bc=e=>"function"==typeof e,Gc=e=>Vc(e)||Bc(e)?e:null,Hc=e=>(0,r.isValidElement)(e)||Vc(e)||Bc(e)||zc(e);function Wc(e){let{enter:t,exit:n,appendPosition:i=!1,collapse:o=!0,collapseDuration:s=300}=e;return function(e){let{children:a,position:c,preventExitTransition:l,done:d,nodeRef:u,isIn:h}=e;const p=i?"".concat(t,"--").concat(c):t,f=i?"".concat(n,"--").concat(c):n,m=(0,r.useRef)(0);return(0,r.useLayoutEffect)((()=>{const e=u.current,t=p.split(" "),n=r=>{r.target===u.current&&(e.dispatchEvent(new Event("d")),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===m.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)}),[]),(0,r.useEffect)((()=>{const e=u.current,t=()=>{e.removeEventListener("animationend",t),o?function(e,t,n){void 0===n&&(n=300);const{scrollHeight:r,style:i}=e;requestAnimationFrame((()=>{i.minHeight="initial",i.height=r+"px",i.transition="all ".concat(n,"ms"),requestAnimationFrame((()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)}))}))}(e,d,s):d()};h||(l?t():(m.current=1,e.className+=" ".concat(f),e.addEventListener("animationend",t)))}),[h]),r.createElement(r.Fragment,null,a)}}function Yc(e,t){return null!=e?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const qc={list:new Map,emitQueue:new Map,on(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off(e,t){if(t){const n=this.list.get(e).filter((e=>e!==t));return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit(e){const t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach((t=>{const n=setTimeout((()=>{t(...[].slice.call(arguments,1))}),0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(n)}))}},Kc=e=>{let{theme:t,type:n,...i}=e;return r.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-".concat(n,")"),...i})},Qc={info:function(e){return r.createElement(Kc,{...e},r.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return r.createElement(Kc,{...e},r.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return r.createElement(Kc,{...e},r.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return r.createElement(Kc,{...e},r.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return r.createElement("div",{className:"Toastify__spinner"})}};function Jc(e){const[,t]=(0,r.useReducer)((e=>e+1),0),[n,i]=(0,r.useState)([]),o=(0,r.useRef)(null),s=(0,r.useRef)(new Map).current,a=e=>-1!==n.indexOf(e),c=(0,r.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:a,getToast:e=>s.get(e)}).current;function l(e){let{containerId:t}=e;const{limit:n}=c.props;!n||t&&c.containerId!==t||(c.count-=c.queue.length,c.queue=[])}function d(e){i((t=>null==e?[]:t.filter((t=>t!==e))))}function u(){const{toastContent:e,toastProps:t,staleId:n}=c.queue.shift();p(e,t,n)}function h(e,n){let{delay:i,staleId:a,...l}=n;if(!Hc(e)||function(e){return!o.current||c.props.enableMultiContainer&&e.containerId!==c.props.containerId||s.has(e.toastId)&&null==e.updateId}(l))return;const{toastId:h,updateId:f,data:m}=l,{props:g}=c,y=()=>d(h),v=null==f;v&&c.count++;const _={...g,style:g.toastStyle,key:c.toastKey++,...Object.fromEntries(Object.entries(l).filter((e=>{let[t,n]=e;return null!=n}))),toastId:h,updateId:f,data:m,closeToast:y,isIn:!1,className:Gc(l.className||g.toastClassName),bodyClassName:Gc(l.bodyClassName||g.bodyClassName),progressClassName:Gc(l.progressClassName||g.progressClassName),autoClose:!l.isLoading&&(E=l.autoClose,S=g.autoClose,!1===E||zc(E)&&E>0?E:S),deleteToast(){const e=Yc(s.get(h),"removed");s.delete(h),qc.emit(4,e);const n=c.queue.length;if(c.count=null==h?c.count-c.displayedToast:c.count-1,c.count<0&&(c.count=0),n>0){const e=null==h?c.props.limit:1;if(1===n||1===e)c.displayedToast++,u();else{const t=e>n?n:e;c.displayedToast=t;for(let e=0;e<t;e++)u()}}else t()}};var E,S;_.iconOut=function(e){let{theme:t,type:n,isLoading:i,icon:o}=e,s=null;const a={theme:t,type:n};return!1===o||(Bc(o)?s=o(a):(0,r.isValidElement)(o)?s=(0,r.cloneElement)(o,a):Vc(o)||zc(o)?s=o:i?s=Qc.spinner():(e=>e in Qc)(n)&&(s=Qc[n](a))),s}(_),Bc(l.onOpen)&&(_.onOpen=l.onOpen),Bc(l.onClose)&&(_.onClose=l.onClose),_.closeButton=g.closeButton,!1===l.closeButton||Hc(l.closeButton)?_.closeButton=l.closeButton:!0===l.closeButton&&(_.closeButton=!Hc(g.closeButton)||g.closeButton);let T=e;(0,r.isValidElement)(e)&&!Vc(e.type)?T=(0,r.cloneElement)(e,{closeToast:y,toastProps:_,data:m}):Bc(e)&&(T=e({closeToast:y,toastProps:_,data:m})),g.limit&&g.limit>0&&c.count>g.limit&&v?c.queue.push({toastContent:T,toastProps:_,staleId:a}):zc(i)?setTimeout((()=>{p(T,_,a)}),i):p(T,_,a)}function p(e,t,n){const{toastId:r}=t;n&&s.delete(n);const o={content:e,props:t};s.set(r,o),i((e=>[...e,r].filter((e=>e!==n)))),qc.emit(4,Yc(o,null==o.props.updateId?"added":"updated"))}return(0,r.useEffect)((()=>(c.containerId=e.containerId,qc.cancelEmit(3).on(0,h).on(1,(e=>o.current&&d(e))).on(5,l).emit(2,c),()=>{s.clear(),qc.emit(3,c)})),[]),(0,r.useEffect)((()=>{c.props=e,c.isToastActive=a,c.displayedToast=n.length})),{getToastToRender:function(t){const n=new Map,r=Array.from(s.values());return e.newestOnTop&&r.reverse(),r.forEach((e=>{const{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(e=>t(e[0],e[1])))},containerRef:o,isToastActive:a}}function Xc(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function Zc(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function $c(e){const[t,n]=(0,r.useState)(!1),[i,o]=(0,r.useState)(!1),s=(0,r.useRef)(null),a=(0,r.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,c=(0,r.useRef)(e),{autoClose:l,pauseOnHover:d,closeToast:u,onClick:h,closeOnClick:p}=e;function f(t){if(e.draggable){"touchstart"===t.nativeEvent.type&&t.nativeEvent.preventDefault(),a.didMove=!1,document.addEventListener("mousemove",v),document.addEventListener("mouseup",_),document.addEventListener("touchmove",v),document.addEventListener("touchend",_);const n=s.current;a.canCloseOnClick=!0,a.canDrag=!0,a.boundingRect=n.getBoundingClientRect(),n.style.transition="",a.x=Xc(t.nativeEvent),a.y=Zc(t.nativeEvent),"x"===e.draggableDirection?(a.start=a.x,a.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(a.start=a.y,a.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function m(t){if(a.boundingRect){const{top:n,bottom:r,left:i,right:o}=a.boundingRect;"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&a.x>=i&&a.x<=o&&a.y>=n&&a.y<=r?y():g()}}function g(){n(!0)}function y(){n(!1)}function v(n){const r=s.current;a.canDrag&&r&&(a.didMove=!0,t&&y(),a.x=Xc(n),a.y=Zc(n),a.delta="x"===e.draggableDirection?a.x-a.start:a.y-a.start,a.start!==a.x&&(a.canCloseOnClick=!1),r.style.transform="translate".concat(e.draggableDirection,"(").concat(a.delta,"px)"),r.style.opacity=""+(1-Math.abs(a.delta/a.removalDistance)))}function _(){document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",_),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",_);const t=s.current;if(a.canDrag&&a.didMove&&t){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance)return o(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform="translate".concat(e.draggableDirection,"(0)"),t.style.opacity="1"}}(0,r.useEffect)((()=>{c.current=e})),(0,r.useEffect)((()=>(s.current&&s.current.addEventListener("d",g,{once:!0}),Bc(e.onOpen)&&e.onOpen((0,r.isValidElement)(e.children)&&e.children.props),()=>{const e=c.current;Bc(e.onClose)&&e.onClose((0,r.isValidElement)(e.children)&&e.children.props)})),[]),(0,r.useEffect)((()=>(e.pauseOnFocusLoss&&(document.hasFocus()||y(),window.addEventListener("focus",g),window.addEventListener("blur",y)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",g),window.removeEventListener("blur",y))})),[e.pauseOnFocusLoss]);const E={onMouseDown:f,onTouchStart:f,onMouseUp:m,onTouchEnd:m};return l&&d&&(E.onMouseEnter=y,E.onMouseLeave=g),p&&(E.onClick=e=>{h&&h(e),a.canCloseOnClick&&u()}),{playToast:g,pauseToast:y,isRunning:t,preventExitTransition:i,toastRef:s,eventHandlers:E}}function el(e){let{closeToast:t,theme:n,ariaLabel:i="close"}=e;return r.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(n),type:"button",onClick:e=>{e.stopPropagation(),t(e)},"aria-label":i},r.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},r.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function tl(e){let{delay:t,isRunning:n,closeToast:i,type:o="default",hide:s,className:a,style:c,controlledProgress:l,progress:d,rtl:u,isIn:h,theme:p}=e;const f=s||l&&0===d,m={...c,animationDuration:"".concat(t,"ms"),animationPlayState:n?"running":"paused",opacity:f?0:1};l&&(m.transform="scaleX(".concat(d,")"));const g=Fc("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(p),"Toastify__progress-bar--".concat(o),{"Toastify__progress-bar--rtl":u}),y=Bc(a)?a({rtl:u,type:o,defaultClassName:g}):Fc(g,a);return r.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:y,style:m,[l&&d>=1?"onTransitionEnd":"onAnimationEnd"]:l&&d<1?null:()=>{h&&i()}})}const nl=e=>{const{isRunning:t,preventExitTransition:n,toastRef:i,eventHandlers:o}=$c(e),{closeButton:s,children:a,autoClose:c,onClick:l,type:d,hideProgressBar:u,closeToast:h,transition:p,position:f,className:m,style:g,bodyClassName:y,bodyStyle:v,progressClassName:_,progressStyle:E,updateId:S,role:T,progress:b,rtl:I,toastId:N,deleteToast:C,isIn:w,isLoading:R,iconOut:A,closeOnClick:O,theme:M}=e,D=Fc("Toastify__toast","Toastify__toast-theme--".concat(M),"Toastify__toast--".concat(d),{"Toastify__toast--rtl":I},{"Toastify__toast--close-on-click":O}),k=Bc(m)?m({rtl:I,position:f,type:d,defaultClassName:D}):Fc(D,m),x=!!b||!c,L={closeToast:h,type:d,theme:M};let P=null;return!1===s||(P=Bc(s)?s(L):(0,r.isValidElement)(s)?(0,r.cloneElement)(s,L):el(L)),r.createElement(p,{isIn:w,done:C,position:f,preventExitTransition:n,nodeRef:i},r.createElement("div",{id:N,onClick:l,className:k,...o,style:g,ref:i},r.createElement("div",{...w&&{role:T},className:Bc(y)?y({type:d}):Fc("Toastify__toast-body",y),style:v},null!=A&&r.createElement("div",{className:Fc("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!R})},A),r.createElement("div",null,a)),P,r.createElement(tl,{...S&&!x?{key:"pb-".concat(S)}:{},rtl:I,theme:M,delay:c,isRunning:t,isIn:w,closeToast:h,hide:u,type:d,style:E,className:_,controlledProgress:x,progress:b||0})))},rl=function(e,t){return void 0===t&&(t=!1),{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}},il=Wc(rl("bounce",!0)),ol=(Wc(rl("slide",!0)),Wc(rl("zoom")),Wc(rl("flip"))),sl=(0,r.forwardRef)(((e,t)=>{const{getToastToRender:n,containerRef:i,isToastActive:o}=Jc(e),{className:s,style:a,rtl:c,containerId:l}=e;function d(e){const t=Fc("Toastify__toast-container","Toastify__toast-container--".concat(e),{"Toastify__toast-container--rtl":c});return Bc(s)?s({position:e,rtl:c,defaultClassName:t}):Fc(t,Gc(s))}return(0,r.useEffect)((()=>{t&&(t.current=i.current)}),[]),r.createElement("div",{ref:i,className:"Toastify",id:l},n(((e,t)=>{const n=t.length?{...a}:{...a,pointerEvents:"none"};return r.createElement("div",{className:d(e),style:n,key:"container-".concat(e)},t.map(((e,n)=>{let{content:i,props:s}=e;return r.createElement(nl,{...s,isIn:o(s.toastId),style:{...s.style,"--nth":n+1,"--len":t.length},key:"toast-".concat(s.key)},i)})))})))}));sl.displayName="ToastContainer",sl.defaultProps={position:"top-right",transition:il,autoClose:5e3,closeButton:el,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let al,cl=new Map,ll=[],dl=1;function ul(){return""+dl++}function hl(e){return e&&(Vc(e.toastId)||zc(e.toastId))?e.toastId:ul()}function pl(e,t){return cl.size>0?qc.emit(0,e,t):ll.push({content:e,options:t}),t.toastId}function fl(e,t){return{...t,type:t&&t.type||e,toastId:hl(t)}}function ml(e){return(t,n)=>pl(t,fl(e,n))}function gl(e,t){return pl(e,fl("default",t))}gl.loading=(e,t)=>pl(e,fl("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),gl.promise=function(e,t,n){let r,{pending:i,error:o,success:s}=t;i&&(r=Vc(i)?gl.loading(i,n):gl.loading(i.render,{...n,...i}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(e,t,i)=>{if(null==t)return void gl.dismiss(r);const o={type:e,...a,...n,data:i},s=Vc(t)?{render:t}:t;return r?gl.update(r,{...o,...s}):gl(s.render,{...o,...s}),i},l=Bc(e)?e():e;return l.then((e=>c("success",s,e))).catch((e=>c("error",o,e))),l},gl.success=ml("success"),gl.info=ml("info"),gl.error=ml("error"),gl.warning=ml("warning"),gl.warn=gl.warning,gl.dark=(e,t)=>pl(e,fl("default",{theme:"dark",...t})),gl.dismiss=e=>{cl.size>0?qc.emit(1,e):ll=ll.filter((t=>null!=e&&t.options.toastId!==e))},gl.clearWaitingQueue=function(e){return void 0===e&&(e={}),qc.emit(5,e)},gl.isActive=e=>{let t=!1;return cl.forEach((n=>{n.isToastActive&&n.isToastActive(e)&&(t=!0)})),t},gl.update=function(e,t){void 0===t&&(t={}),setTimeout((()=>{const n=function(e,t){let{containerId:n}=t;const r=cl.get(n||al);return r&&r.getToast(e)}(e,t);if(n){const{props:r,content:i}=n,o={delay:100,...r,...t,toastId:t.toastId||e,updateId:ul()};o.toastId!==e&&(o.staleId=e);const s=o.render||i;delete o.render,pl(s,o)}}),0)},gl.done=e=>{gl.update(e,{progress:1})},gl.onChange=e=>(qc.on(4,e),()=>{qc.off(4,e)}),gl.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},gl.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},qc.on(2,(e=>{al=e.containerId||e,cl.set(al,e),ll.forEach((e=>{qc.emit(0,e.content,e.options)})),ll=[]})).on(3,(e=>{cl.delete(e.containerId||e),0===cl.size&&qc.off(0).off(1).off(5)}));const yl=e=>{let{title:t,param:n}=e;return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:t})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:n})]})})]})})})})},vl=e=>{let{onFilter:t}=e;const{filterAttributeList:n}=Kr();return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsxs)("nav",{className:"navbar navbar-expand-lg bg-body-tertiary sideBarNav text14",children:[(0,Me.jsxs)("div",{className:"titelBx",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:[(0,Me.jsx)(Re,{className:"navbar-brand",to:"#sideBarCollapse",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:"Short By Filter"}),(0,Me.jsx)("i",{className:"navbar-toggler",children:(0,Me.jsx)("span",{className:"fa fa-chevron-down"})})]}),(0,Me.jsx)("div",{className:"collapse navbar-collapse",id:"sideBarCollapse",children:(0,Me.jsx)("div",{className:"customeSidebar",children:Array.isArray(n)&&n.map((e=>{const n=Array.isArray(e.options)&&e.options.length>0?e.options:Array.isArray(e.attribute_values)&&e.attribute_values.length>0?e.attribute_values:null;return(0,Me.jsx)("div",{children:n&&n.length>0&&(0,Me.jsxs)("div",{children:[(0,Me.jsx)("div",{className:"headBx",children:e.attribute},e._id),(0,Me.jsx)("div",{className:"listBx p0",children:n.map((n=>(0,Me.jsx)("ul",{className:"list-group list-group-flush",children:(0,Me.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-start",children:(0,Me.jsxs)("label",{children:[(0,Me.jsx)("input",{type:"checkbox",onChange:r=>{t(r,e.attribute,n.value)}})," ",n.value]})})},n._id)))})]})},e._id)}))})})]})})},_l=e=>{let{item:t}=e;const{wishListAdd:n,wishListRemove:i,userData:o}=Kr(),[s,a]=(0,r.useState)(t.isWishlist);return(0,Me.jsx)("div",{className:"col col-lg-4 proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",style:{height:"350px"},children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Re,{to:"/product-detail/".concat(t._id),children:(0,Me.jsx)("img",{src:null===t||void 0===t?void 0:t.photo,className:"card-img-top allImg",alt:""})}),o._id===t.userId?"":(0,Me.jsx)("div",{className:"iconWish",onClick:()=>(e=>{s?i(e):n(e),a(!s)})(t.product_id),children:(0,Me.jsx)("i",{className:"fa ".concat(s?"fa-heart text-danger":"fa-heart-o")})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)(Re,{to:"/product-detail/".concat(t._id),children:t.title})}),(0,Me.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:t.description})]})]},t._id)})};function El(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=El(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const Sl=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=El(e))&&(r&&(r+=" "),r+=t);return r};function Tl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>{if(r){const i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}function bl(e,t){const n=(0,je.A)({},t);return Object.keys(e).forEach((r=>{if(r.toString().match(/^(components|slots)$/))n[r]=(0,je.A)({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=e[r]||{},o=t[r];n[r]={},o&&Object.keys(o)?i&&Object.keys(i)?(n[r]=(0,je.A)({},o),Object.keys(i).forEach((e=>{n[r][e]=bl(i[e],o[e])}))):n[r]=o:n[r]=i}else void 0===n[r]&&(n[r]=e[r])})),n}function Il(e){const{theme:t,name:n,props:r}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?bl(t.components[n].defaultProps,r):r}var Nl=__webpack_require__(8280),Cl=__webpack_require__(5756);const wl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=r.useContext(Cl.T);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n},Rl=(0,Nl.A)();const Al=function(){return wl(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rl)};function Ol(e){let{props:t,name:n,defaultTheme:r,themeId:i}=e,o=Al(r);i&&(o=o[i]||o);return Il({theme:o,name:n,props:t})}var Ml=__webpack_require__(6632),Dl=__webpack_require__(3216),kl=__webpack_require__(7758),xl=__webpack_require__(8812);function Ll(e,t){return(0,je.A)({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var Pl=__webpack_require__(7266);const jl={black:"#000",white:"#fff"},Ul={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Fl={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},zl={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Vl={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Bl={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Gl={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Hl={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Wl=["mode","contrastThreshold","tonalOffset"],Yl={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:jl.white,default:jl.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},ql={text:{primary:jl.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:jl.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Kl(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,Pl.a)(e.main,i):"dark"===t&&(e.dark=(0,Pl.e$)(e.main,o)))}function Ql(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,i=(0,Ue.A)(e,Wl),o=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Bl[200],light:Bl[50],dark:Bl[400]}:{main:Bl[700],light:Bl[400],dark:Bl[800]}}(t),s=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Fl[200],light:Fl[50],dark:Fl[400]}:{main:Fl[500],light:Fl[300],dark:Fl[700]}}(t),a=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:zl[500],light:zl[300],dark:zl[700]}:{main:zl[700],light:zl[400],dark:zl[800]}}(t),c=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Gl[400],light:Gl[300],dark:Gl[700]}:{main:Gl[700],light:Gl[500],dark:Gl[900]}}(t),l=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Hl[400],light:Hl[300],dark:Hl[700]}:{main:Hl[800],light:Hl[500],dark:Hl[900]}}(t),d=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Vl[400],light:Vl[300],dark:Vl[700]}:{main:"#ed6c02",light:Vl[500],dark:Vl[900]}}(t);function u(e){return(0,Pl.eM)(e,ql.text.primary)>=n?ql.text.primary:Yl.text.primary}const h=e=>{let{color:t,name:n,mainShade:i=500,lightShade:o=300,darkShade:s=700}=e;if(t=(0,je.A)({},t),!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error((0,Ml.A)(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error((0,Ml.A)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return Kl(t,"light",o,r),Kl(t,"dark",s,r),t.contrastText||(t.contrastText=u(t.main)),t},p={dark:ql,light:Yl};return(0,Dl.A)((0,je.A)({common:(0,je.A)({},jl),mode:t,primary:h({color:o,name:"primary"}),secondary:h({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:a,name:"error"}),warning:h({color:d,name:"warning"}),info:h({color:c,name:"info"}),success:h({color:l,name:"success"}),grey:Ul,contrastThreshold:n,getContrastText:u,augmentColor:h,tonalOffset:r},p[t]),i)}const Jl=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const Xl={textTransform:"uppercase"},Zl='"Roboto", "Helvetica", "Arial", sans-serif';function $l(e,t){const n="function"===typeof t?t(e):t,{fontFamily:r=Zl,fontSize:i=14,fontWeightLight:o=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:c=700,htmlFontSize:l=16,allVariants:d,pxToRem:u}=n,h=(0,Ue.A)(n,Jl);const p=i/14,f=u||(e=>"".concat(e/l*p,"rem")),m=(e,t,n,i,o)=>{return(0,je.A)({fontFamily:r,fontWeight:e,fontSize:f(t),lineHeight:n},r===Zl?{letterSpacing:"".concat((s=i/t,Math.round(1e5*s)/1e5),"em")}:{},o,d);var s},g={h1:m(o,96,1.167,-1.5),h2:m(o,60,1.2,-.5),h3:m(s,48,1.167,0),h4:m(s,34,1.235,.25),h5:m(s,24,1.334,0),h6:m(a,20,1.6,.15),subtitle1:m(s,16,1.75,.15),subtitle2:m(a,14,1.57,.1),body1:m(s,16,1.5,.15),body2:m(s,14,1.43,.15),button:m(a,14,1.75,.4,Xl),caption:m(s,12,1.66,.4),overline:m(s,12,2.66,1,Xl),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,Dl.A)((0,je.A)({htmlFontSize:l,pxToRem:f,fontFamily:r,fontSize:i,fontWeightLight:o,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:c},g),h,{clone:!1})}function ed(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const td=["none",ed(0,2,1,-1,0,1,1,0,0,1,3,0),ed(0,3,1,-2,0,2,2,0,0,1,5,0),ed(0,3,3,-2,0,3,4,0,0,1,8,0),ed(0,2,4,-1,0,4,5,0,0,1,10,0),ed(0,3,5,-1,0,5,8,0,0,1,14,0),ed(0,3,5,-1,0,6,10,0,0,1,18,0),ed(0,4,5,-2,0,7,10,1,0,2,16,1),ed(0,5,5,-3,0,8,10,1,0,3,14,2),ed(0,5,6,-3,0,9,12,1,0,3,16,2),ed(0,6,6,-3,0,10,14,1,0,4,18,3),ed(0,6,7,-4,0,11,15,1,0,4,20,3),ed(0,7,8,-4,0,12,17,2,0,5,22,4),ed(0,7,8,-4,0,13,19,2,0,5,24,4),ed(0,7,9,-4,0,14,21,2,0,5,26,4),ed(0,8,9,-5,0,15,22,2,0,6,28,5),ed(0,8,10,-5,0,16,24,2,0,6,30,5),ed(0,8,11,-5,0,17,26,2,0,6,32,5),ed(0,9,11,-5,0,18,28,2,0,7,34,6),ed(0,9,12,-6,0,19,29,2,0,7,36,6),ed(0,10,13,-6,0,20,31,3,0,8,38,7),ed(0,10,13,-6,0,21,33,3,0,8,40,7),ed(0,10,14,-6,0,22,35,3,0,8,42,7),ed(0,11,14,-7,0,23,36,3,0,9,44,8),ed(0,11,15,-7,0,24,38,3,0,9,46,8)],nd=["duration","easing","delay"],rd={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},id={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function od(e){return"".concat(Math.round(e),"ms")}function sd(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function ad(e){const t=(0,je.A)({},rd,e.easing),n=(0,je.A)({},id,e.duration);return(0,je.A)({getAutoHeightDuration:sd,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:i=n.standard,easing:o=t.easeInOut,delay:s=0}=r;(0,Ue.A)(r,nd);return(Array.isArray(e)?e:[e]).map((e=>"".concat(e," ").concat("string"===typeof i?i:od(i)," ").concat(o," ").concat("string"===typeof s?s:od(s)))).join(",")}},e,{easing:t,duration:n})}const cd={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},ld=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function dd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:r={},typography:i={}}=e,o=(0,Ue.A)(e,ld);if(e.vars)throw new Error((0,Ml.A)(18));const s=Ql(n),a=(0,Nl.A)(e);let c=(0,Dl.A)(a,{mixins:Ll(a.breakpoints,t),palette:s,shadows:td.slice(),typography:$l(s,i),transitions:ad(r),zIndex:(0,je.A)({},cd)});c=(0,Dl.A)(c,o);for(var l=arguments.length,d=new Array(l>1?l-1:0),u=1;u<l;u++)d[u-1]=arguments[u];return c=d.reduce(((e,t)=>(0,Dl.A)(e,t)),c),c.unstable_sxConfig=(0,je.A)({},kl.A,null==o?void 0:o.unstable_sxConfig),c.unstable_sx=function(e){return(0,xl.A)({sx:e,theme:this})},c}const ud=dd(),hd="$$material";function pd(e){let{props:t,name:n}=e;return Ol({props:t,name:n,defaultTheme:ud,themeId:hd})}const fd=e=>e,md=(()=>{let e=fd;return{configure(t){e=t},generate:t=>e(t),reset(){e=fd}}})(),gd={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function yd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r=gd[t];return r?"".concat(n,"-").concat(r):"".concat(md.generate(e),"-").concat(t)}function vd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};return t.forEach((t=>{r[t]=yd(e,t,n)})),r}function _d(e){return yd("MuiPagination",e)}vd("MuiPagination",["root","ul","outlined","text"]);const Ed=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Sd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{boundaryCount:t=1,componentName:n="usePagination",count:i=1,defaultPage:o=1,disabled:s=!1,hideNextButton:a=!1,hidePrevButton:c=!1,onChange:l,page:d,showFirstButton:u=!1,showLastButton:h=!1,siblingCount:p=1}=e,f=(0,Ue.A)(e,Ed),[m,g]=function(e){let{controlled:t,default:n,name:i,state:o="value"}=e;const{current:s}=r.useRef(void 0!==t),[a,c]=r.useState(n);return[s?t:a,r.useCallback((e=>{s||c(e)}),[])]}({controlled:d,default:o,name:n,state:"page"}),y=(e,t)=>{d||g(t),l&&l(e,t)},v=(e,t)=>{const n=t-e+1;return Array.from({length:n},((t,n)=>e+n))},_=v(1,Math.min(t,i)),E=v(Math.max(i-t+1,t+1),i),S=Math.max(Math.min(m-p,i-t-2*p-1),t+2),T=Math.min(Math.max(m+p,t+2*p+2),E.length>0?E[0]-2:i-1),b=[...u?["first"]:[],...c?[]:["previous"],..._,...S>t+2?["start-ellipsis"]:t+1<i-t?[t+1]:[],...v(S,T),...T<i-t-1?["end-ellipsis"]:i-t>t?[i-t]:[],...E,...a?[]:["next"],...h?["last"]:[]],I=e=>{switch(e){case"first":return 1;case"previous":return m-1;case"next":return m+1;case"last":return i;default:return null}},N=b.map((e=>"number"===typeof e?{onClick:t=>{y(t,e)},type:"page",page:e,selected:e===m,disabled:s,"aria-current":e===m?"true":void 0}:{onClick:t=>{y(t,I(e))},type:e,page:I(e),selected:!1,disabled:s||-1===e.indexOf("ellipsis")&&("next"===e||"last"===e?m>=i:m<=1)}));return(0,je.A)({items:N},f)}const Td=r.createContext();function bd(e){return yd("MuiPaginationItem",e)}const Id=vd("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]);var Nd=__webpack_require__(8052);const Cd=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e},wd=e=>Cd(e)&&"classes"!==e,Rd=(0,Nd.Ay)({themeId:hd,defaultTheme:ud,rootShouldForwardProp:wd});const Ad=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{!function(e,t){"function"===typeof e?e(t):e&&(e.current=t)}(t,e)}))}),t)},Od="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;const Md=function(e){const t=r.useRef(e);return Od((()=>{t.current=e})),r.useRef((function(){return(0,t.current)(...arguments)})).current},Dd=Md,kd={};const xd=[];class Ld{constructor(){this.currentId=null,this.clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new Ld}start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}}function Pd(){const e=function(e,t){const n=r.useRef(kd);return n.current===kd&&(n.current=e(t)),n}(Ld.create).current;var t;return t=e.disposeEffect,r.useEffect(t,xd),e}let jd=!0,Ud=!1;const Fd=new Ld,zd={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Vd(e){e.metaKey||e.altKey||e.ctrlKey||(jd=!0)}function Bd(){jd=!1}function Gd(){"hidden"===this.visibilityState&&Ud&&(jd=!0)}function Hd(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(Sv){}return jd||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!zd[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}const Wd=function(){const e=r.useCallback((e=>{null!=e&&function(e){e.addEventListener("keydown",Vd,!0),e.addEventListener("mousedown",Bd,!0),e.addEventListener("pointerdown",Bd,!0),e.addEventListener("touchstart",Bd,!0),e.addEventListener("visibilitychange",Gd,!0)}(e.ownerDocument)}),[]),t=r.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!Hd(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(Ud=!0,Fd.start(100,(()=>{Ud=!1})),t.current=!1,!0)},ref:e}};function Yd(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function qd(e,t){var n=Object.create(null);return e&&r.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)})),n}function Kd(e,t,n){return null!=n[t]?n[t]:e.props[t]}function Qd(e,t,n){var i=qd(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var s in e)s in t?o.length&&(i[s]=o,o=[]):o.push(s);var a={};for(var c in t){if(i[c])for(r=0;r<i[c].length;r++){var l=i[c][r];a[i[c][r]]=n(l)}a[c]=n(c)}for(r=0;r<o.length;r++)a[o[r]]=n(o[r]);return a}(t,i);return Object.keys(o).forEach((function(s){var a=o[s];if((0,r.isValidElement)(a)){var c=s in t,l=s in i,d=t[s],u=(0,r.isValidElement)(d)&&!d.props.in;!l||c&&!u?l||!c||u?l&&c&&(0,r.isValidElement)(d)&&(o[s]=(0,r.cloneElement)(a,{onExited:n.bind(null,a),in:d.props.in,exit:Kd(a,"exit",e),enter:Kd(a,"enter",e)})):o[s]=(0,r.cloneElement)(a,{in:!1}):o[s]=(0,r.cloneElement)(a,{onExited:n.bind(null,a),in:!0,exit:Kd(a,"exit",e),enter:Kd(a,"enter",e)})}})),o}var Jd=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},Xd=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}ct(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,i,o=t.children,s=t.handleExited;return{children:t.firstRender?(n=e,i=s,qd(n.children,(function(e){return(0,r.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:Kd(e,"appear",n),enter:Kd(e,"enter",n),exit:Kd(e,"exit",n)})}))):Qd(e,o,s),firstRender:!1}},n.handleExited=function(e,t){var n=qd(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,je.A)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,i=(0,Ue.A)(e,["component","childFactory"]),o=this.state.contextValue,s=Jd(this.state.children).map(n);return delete i.appear,delete i.enter,delete i.exit,null===t?r.createElement(dt.Provider,{value:o},s):r.createElement(dt.Provider,{value:o},r.createElement(t,i,s))},t}(r.Component);Xd.propTypes={},Xd.defaultProps={component:"div",childFactory:function(e){return e}};const Zd=Xd;var $d=__webpack_require__(3290);const eu=function(e){const{className:t,classes:n,pulsate:i=!1,rippleX:o,rippleY:s,rippleSize:a,in:c,onExited:l,timeout:d}=e,[u,h]=r.useState(!1),p=Sl(t,n.ripple,n.rippleVisible,i&&n.ripplePulsate),f={width:a,height:a,top:-a/2+s,left:-a/2+o},m=Sl(n.child,u&&n.childLeaving,i&&n.childPulsate);return c||u||h(!0),r.useEffect((()=>{if(!c&&null!=l){const e=setTimeout(l,d);return()=>{clearTimeout(e)}}}),[l,c,d]),(0,Me.jsx)("span",{className:p,style:f,children:(0,Me.jsx)("span",{className:m})})};const tu=vd("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var nu,ru,iu,ou;const su=["center","classes","className"];let au,cu,lu,du;const uu=(0,$d.i7)(au||(au=nu||(nu=Yd(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),hu=(0,$d.i7)(cu||(cu=ru||(ru=Yd(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),pu=(0,$d.i7)(lu||(lu=iu||(iu=Yd(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),fu=Rd("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),mu=Rd(eu,{name:"MuiTouchRipple",slot:"Ripple"})(du||(du=ou||(ou=Yd(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),tu.rippleVisible,uu,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),tu.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),tu.child,tu.childLeaving,hu,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),tu.childPulsate,pu,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),gu=r.forwardRef((function(e,t){const n=pd({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:s}=n,a=(0,Ue.A)(n,su),[c,l]=r.useState([]),d=r.useRef(0),u=r.useRef(null);r.useEffect((()=>{u.current&&(u.current(),u.current=null)}),[c]);const h=r.useRef(!1),p=Pd(),f=r.useRef(null),m=r.useRef(null),g=r.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:i,cb:s}=e;l((e=>[...e,(0,Me.jsx)(mu,{classes:{ripple:Sl(o.ripple,tu.ripple),rippleVisible:Sl(o.rippleVisible,tu.rippleVisible),ripplePulsate:Sl(o.ripplePulsate,tu.ripplePulsate),child:Sl(o.child,tu.child),childLeaving:Sl(o.childLeaving,tu.childLeaving),childPulsate:Sl(o.childPulsate,tu.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},d.current)])),d.current+=1,u.current=s}),[o]),y=r.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:r=!1,center:o=i||t.pulsate,fakeElement:s=!1}=t;if("mousedown"===(null==e?void 0:e.type)&&h.current)return void(h.current=!1);"touchstart"===(null==e?void 0:e.type)&&(h.current=!0);const a=s?null:m.current,c=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let l,d,u;if(o||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(c.width/2),d=Math.round(c.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;l=Math.round(t-c.left),d=Math.round(n-c.top)}if(o)u=Math.sqrt((2*c.width**2+c.height**2)/3),u%2===0&&(u+=1);else{const e=2*Math.max(Math.abs((a?a.clientWidth:0)-l),l)+2,t=2*Math.max(Math.abs((a?a.clientHeight:0)-d),d)+2;u=Math.sqrt(e**2+t**2)}null!=e&&e.touches?null===f.current&&(f.current=()=>{g({pulsate:r,rippleX:l,rippleY:d,rippleSize:u,cb:n})},p.start(80,(()=>{f.current&&(f.current(),f.current=null)}))):g({pulsate:r,rippleX:l,rippleY:d,rippleSize:u,cb:n})}),[i,g,p]),v=r.useCallback((()=>{y({},{pulsate:!0})}),[y]),_=r.useCallback(((e,t)=>{if(p.clear(),"touchend"===(null==e?void 0:e.type)&&f.current)return f.current(),f.current=null,void p.start(0,(()=>{_(e,t)}));f.current=null,l((e=>e.length>0?e.slice(1):e)),u.current=t}),[p]);return r.useImperativeHandle(t,(()=>({pulsate:v,start:y,stop:_})),[v,y,_]),(0,Me.jsx)(fu,(0,je.A)({className:Sl(tu.root,o.root,s),ref:m},a,{children:(0,Me.jsx)(Zd,{component:null,exit:!0,children:c})}))})),yu=gu;function vu(e){return yd("MuiButtonBase",e)}const _u=vd("MuiButtonBase",["root","disabled","focusVisible"]),Eu=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Su=Rd("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(_u.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Tu=r.forwardRef((function(e,t){const n=pd({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:s,className:a,component:c="button",disabled:l=!1,disableRipple:d=!1,disableTouchRipple:u=!1,focusRipple:h=!1,LinkComponent:p="a",onBlur:f,onClick:m,onContextMenu:g,onDragLeave:y,onFocus:v,onFocusVisible:_,onKeyDown:E,onKeyUp:S,onMouseDown:T,onMouseLeave:b,onMouseUp:I,onTouchEnd:N,onTouchMove:C,onTouchStart:w,tabIndex:R=0,TouchRippleProps:A,touchRippleRef:O,type:M}=n,D=(0,Ue.A)(n,Eu),k=r.useRef(null),x=r.useRef(null),L=Ad(x,O),{isFocusVisibleRef:P,onFocus:j,onBlur:U,ref:F}=Wd(),[z,V]=r.useState(!1);l&&z&&V(!1),r.useImperativeHandle(i,(()=>({focusVisible:()=>{V(!0),k.current.focus()}})),[]);const[B,G]=r.useState(!1);r.useEffect((()=>{G(!0)}),[]);const H=B&&!d&&!l;function W(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;return Dd((r=>{t&&t(r);return!n&&x.current&&x.current[e](r),!0}))}r.useEffect((()=>{z&&h&&!d&&B&&x.current.pulsate()}),[d,h,z,B]);const Y=W("start",T),q=W("stop",g),K=W("stop",y),Q=W("stop",I),J=W("stop",(e=>{z&&e.preventDefault(),b&&b(e)})),X=W("start",w),Z=W("stop",N),$=W("stop",C),ee=W("stop",(e=>{U(e),!1===P.current&&V(!1),f&&f(e)}),!1),te=Dd((e=>{k.current||(k.current=e.currentTarget),j(e),!0===P.current&&(V(!0),_&&_(e)),v&&v(e)})),ne=()=>{const e=k.current;return c&&"button"!==c&&!("A"===e.tagName&&e.href)},re=r.useRef(!1),ie=Dd((e=>{h&&!re.current&&z&&x.current&&" "===e.key&&(re.current=!0,x.current.stop(e,(()=>{x.current.start(e)}))),e.target===e.currentTarget&&ne()&&" "===e.key&&e.preventDefault(),E&&E(e),e.target===e.currentTarget&&ne()&&"Enter"===e.key&&!l&&(e.preventDefault(),m&&m(e))})),oe=Dd((e=>{h&&" "===e.key&&x.current&&z&&!e.defaultPrevented&&(re.current=!1,x.current.stop(e,(()=>{x.current.pulsate(e)}))),S&&S(e),m&&e.target===e.currentTarget&&ne()&&" "===e.key&&!e.defaultPrevented&&m(e)}));let se=c;"button"===se&&(D.href||D.to)&&(se=p);const ae={};"button"===se?(ae.type=void 0===M?"button":M,ae.disabled=l):(D.href||D.to||(ae.role="button"),l&&(ae["aria-disabled"]=l));const ce=Ad(t,F,k);const le=(0,je.A)({},n,{centerRipple:o,component:c,disabled:l,disableRipple:d,disableTouchRipple:u,focusRipple:h,tabIndex:R,focusVisible:z}),de=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,o=Tl({root:["root",t&&"disabled",n&&"focusVisible"]},vu,i);return n&&r&&(o.root+=" ".concat(r)),o})(le);return(0,Me.jsxs)(Su,(0,je.A)({as:se,className:Sl(de.root,a),ownerState:le,onBlur:ee,onClick:m,onContextMenu:q,onFocus:te,onKeyDown:ie,onKeyUp:oe,onMouseDown:Y,onMouseLeave:J,onMouseUp:Q,onDragLeave:K,onTouchEnd:Z,onTouchMove:$,onTouchStart:X,ref:ce,tabIndex:l?-1:R,type:M},ae,D,{children:[s,H?(0,Me.jsx)(yu,(0,je.A)({ref:L,center:o},A)):null]}))})),bu=Tu;const Iu=__webpack_require__(410).A;function Nu(e){return yd("MuiSvgIcon",e)}vd("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Cu=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],wu=Rd("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t["color".concat(Iu(n.color))],t["fontSize".concat(Iu(n.fontSize))]]}})((e=>{let{theme:t,ownerState:n}=e;var r,i,o,s,a,c,l,d,u,h,p,f,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(r=t.transitions)||null==(i=r.create)?void 0:i.call(r,"fill",{duration:null==(o=t.transitions)||null==(o=o.duration)?void 0:o.shorter}),fontSize:{inherit:"inherit",small:(null==(s=t.typography)||null==(a=s.pxToRem)?void 0:a.call(s,20))||"1.25rem",medium:(null==(c=t.typography)||null==(l=c.pxToRem)?void 0:l.call(c,24))||"1.5rem",large:(null==(d=t.typography)||null==(u=d.pxToRem)?void 0:u.call(d,35))||"2.1875rem"}[n.fontSize],color:null!=(h=null==(p=(t.vars||t).palette)||null==(p=p[n.color])?void 0:p.main)?h:{action:null==(f=(t.vars||t).palette)||null==(f=f.action)?void 0:f.active,disabled:null==(m=(t.vars||t).palette)||null==(m=m.action)?void 0:m.disabled,inherit:void 0}[n.color]}})),Ru=r.forwardRef((function(e,t){const n=pd({props:e,name:"MuiSvgIcon"}),{children:i,className:o,color:s="inherit",component:a="svg",fontSize:c="medium",htmlColor:l,inheritViewBox:d=!1,titleAccess:u,viewBox:h="0 0 24 24"}=n,p=(0,Ue.A)(n,Cu),f=r.isValidElement(i)&&"svg"===i.type,m=(0,je.A)({},n,{color:s,component:a,fontSize:c,instanceFontSize:e.fontSize,inheritViewBox:d,viewBox:h,hasSvgAsChild:f}),g={};d||(g.viewBox=h);const y=(e=>{const{color:t,fontSize:n,classes:r}=e;return Tl({root:["root","inherit"!==t&&"color".concat(Iu(t)),"fontSize".concat(Iu(n))]},Nu,r)})(m);return(0,Me.jsxs)(wu,(0,je.A)({as:a,className:Sl(y.root,o),focusable:"false",color:l,"aria-hidden":!u||void 0,role:u?"img":void 0,ref:t},g,p,f&&i.props,{ownerState:m,children:[f?i.props.children:i,u?(0,Me.jsx)("title",{children:u}):null]}))}));Ru.muiName="SvgIcon";const Au=Ru;function Ou(e,t){function n(n,r){return(0,Me.jsx)(Au,(0,je.A)({"data-testid":"".concat(t,"Icon"),ref:r},n,{children:e}))}return n.muiName=Au.muiName,r.memo(r.forwardRef(n))}const Mu=Ou((0,Me.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Du=Ou((0,Me.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),ku=Ou((0,Me.jsx)("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),xu=Ou((0,Me.jsx)("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Lu=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Pu=(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["size".concat(Iu(n.size))],"text"===n.variant&&t["text".concat(Iu(n.color))],"outlined"===n.variant&&t["outlined".concat(Iu(n.color))],"rounded"===n.shape&&t.rounded,"page"===n.type&&t.page,("start-ellipsis"===n.type||"end-ellipsis"===n.type)&&t.ellipsis,("previous"===n.type||"next"===n.type)&&t.previousNext,("first"===n.type||"last"===n.type)&&t.firstLast]},ju=Rd("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Pu})((e=>{let{theme:t,ownerState:n}=e;return(0,je.A)({},t.typography.body2,{borderRadius:16,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,height:"auto",["&.".concat(Id.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity}},"small"===n.size&&{minWidth:26,borderRadius:13,margin:"0 1px",padding:"0 4px"},"large"===n.size&&{minWidth:40,borderRadius:20,padding:"0 10px",fontSize:t.typography.pxToRem(15)})})),Uu=Rd(bu,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Pu})((e=>{let{theme:t,ownerState:n}=e;return(0,je.A)({},t.typography.body2,{borderRadius:16,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,["&.".concat(Id.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(Id.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(Id.selected)]:{backgroundColor:(t.vars||t).palette.action.selected,"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,Pl.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},["&.".concat(Id.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,Pl.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},["&.".concat(Id.disabled)]:{opacity:1,color:(t.vars||t).palette.action.disabled,backgroundColor:(t.vars||t).palette.action.selected}}},"small"===n.size&&{minWidth:26,height:26,borderRadius:13,margin:"0 1px",padding:"0 4px"},"large"===n.size&&{minWidth:40,height:40,borderRadius:20,padding:"0 10px",fontSize:t.typography.pxToRem(15)},"rounded"===n.shape&&{borderRadius:(t.vars||t).shape.borderRadius})}),(e=>{let{theme:t,ownerState:n}=e;return(0,je.A)({},"text"===n.variant&&{["&.".concat(Id.selected)]:(0,je.A)({},"standard"!==n.color&&{color:(t.vars||t).palette[n.color].contrastText,backgroundColor:(t.vars||t).palette[n.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[n.color].main}},["&.".concat(Id.focusVisible)]:{backgroundColor:(t.vars||t).palette[n.color].dark}},{["&.".concat(Id.disabled)]:{color:(t.vars||t).palette.action.disabled}})},"outlined"===n.variant&&{border:t.vars?"1px solid rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):"1px solid ".concat("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),["&.".concat(Id.selected)]:(0,je.A)({},"standard"!==n.color&&{color:(t.vars||t).palette[n.color].main,border:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / 0.5)"):(0,Pl.X4)(t.palette[n.color].main,.5)),backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.activatedOpacity,")"):(0,Pl.X4)(t.palette[n.color].main,t.palette.action.activatedOpacity),"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / calc(").concat(t.vars.palette.action.activatedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,Pl.X4)(t.palette[n.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(Id.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / calc(").concat(t.vars.palette.action.activatedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,Pl.X4)(t.palette[n.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity)}},{["&.".concat(Id.disabled)]:{borderColor:(t.vars||t).palette.action.disabledBackground,color:(t.vars||t).palette.action.disabled}})})})),Fu=Rd("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})((e=>{let{theme:t,ownerState:n}=e;return(0,je.A)({fontSize:t.typography.pxToRem(20),margin:"0 -8px"},"small"===n.size&&{fontSize:t.typography.pxToRem(18)},"large"===n.size&&{fontSize:t.typography.pxToRem(22)})})),zu=r.forwardRef((function(e,t){const n=pd({props:e,name:"MuiPaginationItem"}),{className:i,color:o="standard",component:s,components:a={},disabled:c=!1,page:l,selected:d=!1,shape:u="circular",size:h="medium",slots:p={},type:f="page",variant:m="text"}=n,g=(0,Ue.A)(n,Lu),y=(0,je.A)({},n,{color:o,disabled:c,selected:d,shape:u,size:h,type:f,variant:m}),v=(()=>{const e=r.useContext(Td);return null!=e&&e})(),_=(e=>{const{classes:t,color:n,disabled:r,selected:i,size:o,shape:s,type:a,variant:c}=e;return Tl({root:["root","size".concat(Iu(o)),c,s,"standard"!==n&&"color".concat(Iu(n)),"standard"!==n&&"".concat(c).concat(Iu(n)),r&&"disabled",i&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[a]],icon:["icon"]},bd,t)})(y),E=(v?{previous:p.next||a.next||xu,next:p.previous||a.previous||ku,last:p.first||a.first||Mu,first:p.last||a.last||Du}:{previous:p.previous||a.previous||ku,next:p.next||a.next||xu,first:p.first||a.first||Mu,last:p.last||a.last||Du})[f];return"start-ellipsis"===f||"end-ellipsis"===f?(0,Me.jsx)(ju,{ref:t,ownerState:y,className:Sl(_.root,i),children:"\u2026"}):(0,Me.jsxs)(Uu,(0,je.A)({ref:t,ownerState:y,component:s,disabled:c,className:Sl(_.root,i)},g,{children:["page"===f&&l,E?(0,Me.jsx)(Fu,{as:E,ownerState:y,className:_.icon}):null]}))})),Vu=zu,Bu=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],Gu=Rd("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})({}),Hu=Rd("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function Wu(e,t,n){return"page"===e?"".concat(n?"":"Go to ","page ").concat(t):"Go to ".concat(e," page")}const Yu=r.forwardRef((function(e,t){const n=pd({props:e,name:"MuiPagination"}),{boundaryCount:r=1,className:i,color:o="standard",count:s=1,defaultPage:a=1,disabled:c=!1,getItemAriaLabel:l=Wu,hideNextButton:d=!1,hidePrevButton:u=!1,renderItem:h=(e=>(0,Me.jsx)(Vu,(0,je.A)({},e))),shape:p="circular",showFirstButton:f=!1,showLastButton:m=!1,siblingCount:g=1,size:y="medium",variant:v="text"}=n,_=(0,Ue.A)(n,Bu),{items:E}=Sd((0,je.A)({},n,{componentName:"Pagination"})),S=(0,je.A)({},n,{boundaryCount:r,color:o,count:s,defaultPage:a,disabled:c,getItemAriaLabel:l,hideNextButton:d,hidePrevButton:u,renderItem:h,shape:p,showFirstButton:f,showLastButton:m,siblingCount:g,size:y,variant:v}),T=(e=>{const{classes:t,variant:n}=e;return Tl({root:["root",n],ul:["ul"]},_d,t)})(S);return(0,Me.jsx)(Gu,(0,je.A)({"aria-label":"pagination navigation",className:Sl(T.root,i),ownerState:S,ref:t},_,{children:(0,Me.jsx)(Hu,{className:T.ul,ownerState:S,children:E.map(((e,t)=>(0,Me.jsx)("li",{children:h((0,je.A)({},e,{color:o,"aria-label":l(e.type,e.page,e.selected),shape:p,size:y,variant:v}))},t)))})}))})),qu=Yu;var Ku=__webpack_require__(7713);const Qu=["ownerState"],Ju=["variants"],Xu=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Zu(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const $u=(0,Nl.A)(),eh=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function th(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function nh(e){return e?(t,n)=>n[e]:null}function rh(e,t){let{ownerState:n}=t,r=(0,Ue.A)(t,Qu);const i="function"===typeof e?e((0,je.A)({ownerState:n},r)):e;if(Array.isArray(i))return i.flatMap((e=>rh(e,(0,je.A)({ownerState:n},r))));if(i&&"object"===typeof i&&Array.isArray(i.variants)){const{variants:e=[]}=i;let t=(0,Ue.A)(i,Ju);return e.forEach((e=>{let i=!0;"function"===typeof e.props?i=e.props((0,je.A)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(i=!1)})),i&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,je.A)({ownerState:n},r,n)):e.style))})),t}return i}const ih=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=$u,rootShouldForwardProp:r=Zu,slotShouldForwardProp:i=Zu}=e,o=e=>(0,xl.A)((0,je.A)({},e,{theme:th((0,je.A)({},e,{defaultTheme:n,themeId:t}))}));return o.__mui_systemSx=!0,function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,Ku.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:a,slot:c,skipVariantsResolver:l,skipSx:d,overridesResolver:u=nh(eh(c))}=s,h=(0,Ue.A)(s,Xu),p=void 0!==l?l:c&&"Root"!==c&&"root"!==c||!1,f=d||!1;let m=Zu;"Root"===c||"root"===c?m=r:c?m=i:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(m=void 0);const g=(0,Ku.default)(e,(0,je.A)({shouldForwardProp:m,label:undefined},h)),y=e=>"function"===typeof e&&e.__emotion_real!==e||(0,Dl.Q)(e)?r=>rh(e,(0,je.A)({},r,{theme:th({theme:r.theme,defaultTheme:n,themeId:t})})):e,v=function(r){let i=y(r);for(var s=arguments.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=arguments[l];const d=c?c.map(y):[];a&&u&&d.push((e=>{const r=th((0,je.A)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[a]||!r.components[a].styleOverrides)return null;const i=r.components[a].styleOverrides,o={};return Object.entries(i).forEach((t=>{let[n,i]=t;o[n]=rh(i,(0,je.A)({},e,{theme:r}))})),u(e,o)})),a&&!p&&d.push((e=>{var r;const i=th((0,je.A)({},e,{defaultTheme:n,themeId:t}));return rh({variants:null==i||null==(r=i.components)||null==(r=r[a])?void 0:r.variants},(0,je.A)({},e,{theme:i}))})),f||d.push(o);const h=d.length-c.length;if(Array.isArray(r)&&h>0){const e=new Array(h).fill("");i=[...r,...e],i.raw=[...r.raw,...e]}const m=g(i,...d);return e.muiName&&(m.muiName=e.muiName),m};return g.withConfig&&(v.withConfig=g.withConfig),v}}(),oh=ih;var sh=__webpack_require__(8698),ah=__webpack_require__(9751),ch=__webpack_require__(8604);const lh=["component","direction","spacing","divider","children","className","useFlexGap"],dh=(0,Nl.A)(),uh=oh("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function hh(e){return Ol({props:e,name:"MuiStack",defaultTheme:dh})}function ph(e,t){const n=r.Children.toArray(e).filter(Boolean);return n.reduce(((e,i,o)=>(e.push(i),o<n.length-1&&e.push(r.cloneElement(t,{key:"separator-".concat(o)})),e)),[])}const fh=e=>{let{ownerState:t,theme:n}=e,r=(0,je.A)({display:"flex",flexDirection:"column"},(0,ah.NI)({theme:n},(0,ah.kW)({values:t.direction,breakpoints:n.breakpoints.values}),(e=>({flexDirection:e}))));if(t.spacing){const e=(0,ch.LX)(n),i=Object.keys(n.breakpoints.values).reduce(((e,n)=>(("object"===typeof t.spacing&&null!=t.spacing[n]||"object"===typeof t.direction&&null!=t.direction[n])&&(e[n]=!0),e)),{}),o=(0,ah.kW)({values:t.direction,base:i}),s=(0,ah.kW)({values:t.spacing,base:i});"object"===typeof o&&Object.keys(o).forEach(((e,t,n)=>{if(!o[e]){const r=t>0?o[n[t-1]]:"column";o[e]=r}}));const a=(n,r)=>{return t.useFlexGap?{gap:(0,ch._W)(e,n)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{["margin".concat((i=r?o[r]:t.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i]))]:(0,ch._W)(e,n)}};var i};r=(0,Dl.A)(r,(0,ah.NI)({theme:n},s,a))}return r=(0,ah.iZ)(n.breakpoints,r),r};const mh=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=uh,useThemeProps:n=hh,componentName:i="MuiStack"}=e,o=t(fh),s=r.forwardRef((function(e,t){const r=n(e),s=(0,sh.A)(r),{component:a="div",direction:c="column",spacing:l=0,divider:d,children:u,className:h,useFlexGap:p=!1}=s,f=(0,Ue.A)(s,lh),m={direction:c,spacing:l,useFlexGap:p},g=Tl({root:["root"]},(e=>yd(i,e)),{});return(0,Me.jsx)(o,(0,je.A)({as:a,ownerState:m,ref:t,className:Sl(g.root,h)},f,{children:d?ph(u,d):u}))}));return s}({createStyledComponent:Rd("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>pd({props:e,name:"MuiStack"})}),gh=mh,yh=e=>{let{col:t}=e;const n=Z();let r="/jobs"===n.pathname||"/freelancer"===n.pathname?170:250,i="/freelancer"===n.pathname?"170px":"100%";return(0,Me.jsx)("div",{className:"col-md-".concat(t," mb-4 overflow-hidden "),style:{minHeight:r,width:"/freelancer"===n.pathname&&"100%"},children:(0,Me.jsx)("div",{className:"card placeholder-glow p-1","aria-hidden":"true",style:{height:"100%",borderRadius:8},children:(0,Me.jsx)("div",{className:"placeholder ",style:{height:i,borderRadius:4}})})})},vh=e=>{let{col:t}=e;return(0,Me.jsx)("div",{className:"col-md-".concat(t," mb-4 overflow-hidden "),style:{aspectRatio:1},children:(0,Me.jsxs)("div",{className:"card placeholder-glow p-1","aria-hidden":"true",style:{height:"100%",borderRadius:8},children:[(0,Me.jsx)("div",{className:"placeholder",style:{height:"50%",borderRadius:4}}),(0,Me.jsxs)("div",{className:"d-grid gap-3 p-2",children:[(0,Me.jsxs)("p",{className:"card-text placeholder-glow",children:[(0,Me.jsx)("span",{className:"placeholder col-7"}),(0,Me.jsx)("span",{className:"placeholder col-4"}),(0,Me.jsx)("span",{className:"placeholder col-4"}),(0,Me.jsx)("span",{className:"placeholder col-6"}),(0,Me.jsx)("span",{className:"placeholder col-8"})]}),(0,Me.jsx)("button",{tabIndex:"-1",className:"btn btn-primary disabled placeholder col-6"})]})]})})},_h=()=>(0,Me.jsx)("div",{className:"mb-3 overflow-hidden ",children:(0,Me.jsxs)("div",{className:"card placeholder-glow p-1 responsble-skeleton","aria-hidden":"true",children:[(0,Me.jsx)("div",{className:"placeholder outer-div"}),(0,Me.jsxs)("div",{className:"d-flex gap-3 p-2 position-relative ",style:{flex:1,flexDirection:"column"},children:[(0,Me.jsx)("span",{className:"placeholder",style:{height:20,width:"80%"}}),(0,Me.jsx)("span",{className:"placeholder",style:{height:20,width:"70%"}}),(0,Me.jsx)("span",{className:"placeholder",style:{height:20,width:"50%"}}),(0,Me.jsx)("button",{tabIndex:"-1",className:"btn btn-primary disabled placeholder position-absolute ",style:{height:30,width:"60%",bottom:"6px"}})]})]})}),Eh=e=>{let{des:t}=e;const n=ee();return(0,Me.jsx)("div",{children:(0,Me.jsx)("section",{className:"py-3 py-md-2 min-vh-90 d-flex justify-content-center align-items-center",children:(0,Me.jsxs)("div",{className:"text-center",children:[(0,Me.jsxs)("h2",{className:"d-flex justify-content-center align-items-center gap-2 mb-4",children:[(0,Me.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAR4AAAC4CAMAAAACJXOjAAAC91BMVEUAAACCgoGAgIB1dXWQkJB6enp3d3eAgIB2dnZ8fHx4eHh1dXV5eXl2dnaAgICAgIB/f393d3dBQUF4eHh3d3dxcXH/4QB2dnZ2dnZ3d3d0dHR4eHh5eXlNTU14eHj/4AB6enp4eHhubm5ycnIoc/F6enp3d3d2dnZ3d3d2dnYqc/B1dXUudvLSuAEodfEpdPF1dXXZ3N0oc/BCQkIpdPJqamrpzhBOTk4qdvEqdO4odPF0dHTWuwNvb2/U1NQ8PDzUugHV1dXWuwGtra0pdPH12AmwsLD83QRAQEAoc/HWvAJCQkIpdPLjxgLHvi6NjY3VvAQrdvTVuwXUugbavA/UugHVugE+Pj4oc/HVugE+Pj49PT0odPHXvQFOTk5BQUGZrnVKSkpMTEwpdfHZvQnw8PD///88PDz/3wAoc/DQtgHNzc3/Q0P+/v762wT+3gH83AP42Qbx1Az//fP11wn8/P3t0RD93QLjyRjozRSPgzDYwSPdxR7y8vH09PT6+vr4+Pjv0g7z1QrrzxL/4A3//ff/++f/+MiPj4/t7e3o6Ojk5OT6+fnd3d3Y2Nj32Qj/UFD21wHszwH29vb/bm732Af/++P/+tv/9Kr/4hv8+/v39/f/7Gktdu3/4RU+ftvi0CJymJ+KpIPPxzbp0xrv1xT83QTh4eCmsmTbyivB1/w4euD38tlGgtBUicD/iIihsGrWyi/z2RD01gn/+vrr6+oyeOXu6tPT09NCgNNOhsf/lJT/fHyVqXi3ulG8vU322yD32wzp8f6Brff/9fVNi/P6+PI5f/L++ub/zs7/u7v/9rpdjrZgj7N5nJZ9nZLGwkFkXzPq0CXnzBX/5ub69uPc29nm4cjb18Bbjbj/tLRjkLBmkqyWlpaCoI7/Zmb/RkaPhDfjyymThSf73RD1+f/V5P2qyPqoxvnx7+no5uF+ptTn49PY1tLh3c6qqJ7/8ZeEoYqPjYLa14H/XV3Uy0ZKSDjYwzZ6cS7XwCu0oiPPuB/XvhcK7zUgAAAAZXRSTlMAAgQLBxceECcGMUY7UA4KFBy0JBMJXxoiKw81Sp9ArREYKiX9IDhCLk7nPif7WVg899K6Si+3pFvzqVhVNPLy8vDGu7ixsK+rnpmNg31yWEI+NiYR6OHZ19fW0MSxqZmHYEMlG8s279AAAAqLSURBVHja7NpXiBNBGMDxjRrLS6xR8cWI+qiiqKAIiih2sXexbxxxk1j2zpZcLFhj757Ru0uxd1QU7Ii9Y8PeBcWK3Qe/mWQ12exad0x2dv9c7iFv92Pmm5tNOJ1Weei/V78Tx2pa8Cyo0YFjNE14htVoxLGZNjzM+mjDA7XnWEwjHqgdx2Ba8UCtOfbShodZH+14oL4WjrE05IGaFuHYShseZn005YF6duFYSlseqBtTPhrzQF0Hc+ykNQ/UpDPHTNrwMOujPQ9Ug5kHQBR4IGYeAFHhYecBhxY8nvmpMXJ/Bx4qleeYyOQxebTjWTXqrzplFB7+r5pm8pg8Jo/JY/KYPIoZgceSQVV2J7dKSIgij7pMIfzKlFpkq+V2wwv6b/81YxaAKVGoBKlIJtTCo5TL5YLf2R4AwkS0eSQcCLPY7SVLFs6MmrtUAyH4IUD0eeIrp4gdYGy2SlCxTKj5XIUWQyMgTBRfQZR5LNgGcDCNw1GuVClrZlR/knI7Ro8ejY1iuwx8qPJYCI+9MNiUs1qrVChdtHTRjKj+ROVGQmAEQi6PiwxqqjwwdfDScZSyAk3FimWrFs+M6k9WKSsLjEAIfFzYhxqPpFOycKVy1oH9ejV26qH3Fx58xUKTRmMgD5xfFHksJUrYQadqS6eeejA2K+7jyabIQ44s0KnX3amvLoyZnAU+wIN9qPFYYGvZHEV7O/XWx0vYh2yvbHo8+NByWNs49dfnS5MnjoT57KHHAzqweMpV1MdMlm8v8CHbCw4vSjywtwoXsw5w6rEvY8ZmwfIh04fa6rHbHFX0uLeczpcvnu/evXHj5cvHjx+fqtqpf+MpWalUBX0d6lK31syaOcPr8+eIokDneQ851a1Fyzj12K3ZhCc3ZwVNHscPniG6SOKZPnvNzJ1DfAsD1FYPnszlqlTXKc+VNbMIzwpRpMJjscBk1i/PHOCZ4aXNU6GiXnlg+Jg8v+Lx0xrNlkKEp6yueeBkp8dT0lZKrzz3Pq27fzEc2X7o4cMpP+lfeUrrlGfc+An4WoFvXT+9VLgjLpNHsUMHzm7eE0Row96bW/NMnuS25e9CCe1dGzV5vpeXj+Rt2m/yxNsaRAqdiZg8UPQcUm7TOpNn6KHTSK1d/U2e/B+rpWB/KG/b+a1ngiheg0FG59knUVwPDZWKFEhAPWzG5jkv7aP9SW+HpR3X0Ng8mxFp9duV30ue1x2NzLMfkY4d5r+3JHkm9TEwj3sTwlVbz6fyuOILq64BeN5cu3b1Kv4oZ+PSxGoj0hE+hQfaFp8+BuBRed5zBOGCh5V4pO3VoJBheY5Ki0eRJxQfzkblOYxI6xV5oNUI19aoPI8R6ZEaz1mEa2VUnvWxU51X49mHcM2MyvME4Y6q8qxFuDpG5XmqD57YNycEUczx+8zNlZR3YY7AJyTkLPRqz3PvA3yQc/EgtDyhd4gkqvGcS/do9gYEPiUh4P0/l4rwLw72PWk+2P0Cr5jgp8kj//ufLUvs1VCpddKlKz08PpFXTfT9D57XCLdh+1DFbscuFUXSw5Mr8D9JyKXPIz0MK1DUyQum80oa4H9RgD5PNHZtCG5T0Mm+gUi10sKzItni5J15i07IfFZQ5oHWItKeSCpPASLVsaSDJyDTGQ7dlfsEqPNENyHS5rBcZx+SBnMaeHJlEHeG47bwsnLp8kAHUKzVoaS3t+ejWHW4NPD45FN5HuFZlDKffZR5pOMJys/7sabWrkbxqtVMA4/Iq/DIE6nzRM9IEsHTW0NhV2TdgbMbEKTmQ5/Hz6vxpOSnywNF9qLU1H3o83iF3+cRvHR5oO03NfDRkCfAq/KkFqDMA7kLkFJBJR/6PF7hT3gEL20eKPSNvft3aRiIAjg+uzgpKv6YnKQgiIN/hf/FZbuxODWXRUTplq1dQi1UEYxCdLABEUpA5yKof4GCm3+AR4NYybsHB14Sfe+7FTp9aHq59B59KuCcXZxC38/ueULPhscL3fPobs9/4vT0Piz69tksj0fZ8SgHPFD9k5ec4/qmd5y/KdoAfFzzSDse6YQHbq9/Gd1Nvd4FfBzz+B7CA+X/xsPU98fB29VrK8uyfXPFacAG4OOWJ7DlCaocGgB83PIoWx5VJc+0z3YZPE1bnmalPNqHeRCeL5/1nVIuLmnLIyvm0T65DvOAPNoH1XF/cX1MeNJaXly6xpbWqZBnOOF5dskzODoUfrfdkeYOajDupiCCUap1hh6YKu+uuQY8AYwwvh97cAEpHt+zzCfFI6SdjhS0eJQdjyLGE4IKySiBeUJiPC1pWLliCT5MJcYDPYqPjfc9bUGNx/hDTgp9eMjxGH8GjKGbHno8oglvKh6ADQVFnsIRhCTW51eKmwrpk+QR3aJEAqxbXUGTB1i9wFWLKk9+eA6vI+jy1OLoZY15Sj24u7qytry0uDA3Oz9j/2f0///Y91/kwYcGmAcZOWEebGCJeZBxN+YxxjzmmAeNedCYB4150JgHjXnQmAeNedCYB4150Jjns71zWW0biMIwHV1HdjQjLCFpbIpUoYvxxqaYLkICJZBt3qBLddFnyFPkZfJ4/TWRmpLFMC4YqssH3tmL8/HPEeeMwEoWPUoWPUoWPUoWPUoWPUoWPUoWPUoWPUoWPUoWPUoWPUoWPUrGo+fTR4hpCG4X4/xf0l4PF8yk5ENh/6SGEHz+xmR+ZtnuSPXs66opAssxIkrJO7JOcJkcgl9RQjvMAYbwxEk6Xj2eW+ahMJjZQztQJoq9QJCUI71EEWPGH3wnzINN+vXnGPm2X629NAmsUPjGAGNRJC1JQRfYIdSMmOH7vhDCeSMLeR6UbjNSPTerw7Zxk9jiYeZIUBoKNFiEbqTvB1+kkAM3Thhybg3keWwnbrMdq55djfi4ZRDn1gDnYejAEARRlK3beKiJ5CAtMBLYA2WSFGnjrUeq53a/OlRe4xZJaQ9AVY4w+Ub/ONMKDyGwE1owkxSF++Wd8/muOtTj1PPjFn7q493d+fxekFsUiZ1bmYAflK2lB0crMkR7bX7p0V4dO0a77h73uukxcbLa6/If6SnK2ML5MvXSQwjC4/D22rxq2Xltr04KP9xBfAjRCg9lfpa31+b5VcfOc3t1vHQT5JnPqE58useWIcK4nQ3bxi1jdB+TauvhM9JTeXJU1dWDzuxYwUs7E17eZg0HvfkCPad2JpyO20GP/uEKHtuZ8CDTo3e4QN97yu/tLLj/jN5T9r1Hd2ca5vbTLPzcP3VzvJ2HPkN49PRERmYFSfp4mnh/fjk91IdKdubMiDT1yJ0y4lOkHgbQ1W633+9vJgeK2u1W0k6B8Ah0Zt2Zi0Z+hu4DP9vqeKjrejVBUNbhWG09OVNkfkR1J/Z+6d4tv9IGhqr1+rieGCiogpsmdRO7m0iZSWR69OLTzew8t8uNm6ZN402SpklTd1PaOe/mdc3wQI/c+MDP20Ys2RTuJCk2SWIHWPbAjtz2QI9ufCjOl4AguU4N7AkSyFUq5AicLDqER7P79Mt4kclt/CThPISbfhGv6Dyqq5xOEXAmhwBQo7jGUd9WAEQIihgzJgljUNMFB6gbj/oeGZiTg6pvkPXfQpgwivcP9BxNnst8/AZI58giajggQAAAAABJRU5ErkJggg==",alt:""}),(0,Me.jsx)("i",{className:"bi bi-exclamation-circle-fill text-danger display-4"})]}),(0,Me.jsx)("h3",{className:"h2 mb-2",children:"Sorry, no results found!"}),(0,Me.jsx)("p",{className:"mb-5",children:t}),(0,Me.jsx)("button",{className:"btn bsb-btn-5xl btn-dark bg-primary rounded-pill px-5 fs-6 m-0",onClick:()=>{n(-1)},children:"Go Back"})]})})})},Sh=()=>{const{goodsList:e,getAttributeFilterList:t,getGoodsProduct:n,totalItem:i,listLoading:o}=Kr(),[s,a]=(0,r.useState)(1),c=Math.ceil((null===i||void 0===i?void 0:i.goods)/10),l=Z(),d=new URLSearchParams(l.search),u=d.get("sub_category"),h=d.get("category_id"),p=d.get("search"),[f,m]=(0,r.useState)([]),g={keyword_search:p,page:s,limit:10};(0,r.useEffect)((()=>{(async()=>{u?await n(g,u,f):await n(g,"",f)})()}),[p,s,u,f]),(0,r.useEffect)((()=>{(async()=>{u&&await t({sub:u}),h&&await t({main:h})})()}),[p,u,h]);return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(yl,{title:"Goods of all kinds List Page",param:"Goods of all kinds"}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),(0,Me.jsx)("div",{className:"col-md-2",children:(0,Me.jsx)(vl,{onFilter:(e,t,n)=>{if(!0===e.target.checked){const e=f.findIndex((e=>e.attribute===t));if(-1!==e){const t=[...f];t[e].value.push(n),m(t)}else{const e=[...f,{attribute:t,value:[n]}];m(e)}}else{const e=f.map((e=>(e.attribute===t&&(e.value=e.value.filter((e=>e!==n))),e))).filter((e=>e.value.length>0));m(e)}}})}),(0,Me.jsxs)("div",{className:"col-md-8",children:[(0,Me.jsx)("aside",{className:"row pt-2",children:o.goods?Array.from({length:6}).map(((e,t)=>(0,Me.jsx)(vh,{col:4},t))):0===e.length?(0,Me.jsx)(Eh,{des:"Please check the spelling or try searching for something else. Thank you!"}):Array.isArray(e)&&e.map(((e,t)=>(0,Me.jsx)(_l,{item:e},t)))}),(0,Me.jsx)("div",{align:"center",children:(0,Me.jsx)(gh,{spacing:2,children:(0,Me.jsx)(qu,{count:c,page:s,onChange:(e,t)=>a(t),color:"primary",variant:"outlined",shape:"rounded",boundaryCount:2,siblingCount:1})})})]}),(0,Me.jsx)(Zs,{})]})})})]})},Th=!1,bh=!1,Ih="${JSCORE_VERSION}",Nh=function(e,t){if(!e)throw Ch(t)},Ch=function(e){return new Error("Firebase Database ("+Ih+") INTERNAL ASSERT FAILED: "+e)},wh=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Rh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,l=t>>2,d=(3&t)<<4|s>>4;let u=(15&s)<<2|c>>6,h=63&c;a||(h=64,o||(u=64)),r.push(n[l],n[d],n[u],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(wh(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new Ah;const c=t<<2|o>>4;if(r.push(c),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ah extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Oh=function(e){const t=wh(e);return Rh.encodeByteArray(t,!0)},Mh=function(e){return Oh(e).replace(/\./g,"")},Dh=function(t){try{return Rh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function kh(e){return xh(void 0,e)}function xh(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=xh(e[n],t[n]));return e}const Lh=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof __webpack_require__.g)return __webpack_require__.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ph=()=>{try{return Lh()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const n=t&&Dh(t[1]);return n&&JSON.parse(n)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},jh=e=>{var t,n;return null===(n=null===(t=Ph())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Uh=e=>{const t=jh(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Fh=()=>{var e;return null===(e=Ph())||void 0===e?void 0:e.config},zh=e=>{var t;return null===(t=Ph())||void 0===t?void 0:t["_".concat(e)]};class Vh{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Bh(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Mh(JSON.stringify({alg:"none",type:"JWT"})),Mh(JSON.stringify(o)),""].join(".")}function Gh(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Hh(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gh())}function Wh(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Yh(){return!0===Th||!0===bh}function qh(){try{return"object"===typeof indexedDB}catch(e){return!1}}class Kh extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Kh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qh.prototype.create)}}class Qh{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Jh,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Kh(n,o,t)}}const Jh=/\{\$([^}]+)}/g;function Xh(e){return JSON.parse(e)}function Zh(e){return JSON.stringify(e)}const $h=function(t){let n={},r={},i={},o="";try{const e=t.split(".");n=Xh(Dh(e[0])||""),r=Xh(Dh(e[1])||""),o=e[2],i=r.d||{},delete r.d}catch(e){}return{header:n,claims:r,data:i,signature:o}};function ep(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function tp(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function np(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function rp(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function ip(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(op(n)&&op(o)){if(!ip(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function op(e){return null!==e&&"object"===typeof e}function sp(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ap(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function cp(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class lp{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let d=0;d<16;d++)n[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)n[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const e=n[d-3]^n[d-8]^n[d-14]^n[d-16];n[d]=4294967295&(e<<1|e>>>31)}let r,i,o=this.chain_[0],s=this.chain_[1],a=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(r=c^s&(a^c),i=1518500249):(r=s^a^c,i=1859775393):d<60?(r=s&a|c&(s|a),i=2400959708):(r=s^a^c,i=3395469782);const e=(o<<5|o>>>27)+r+l+i+n[d]&4294967295;l=c,c=a,a=4294967295&(s<<30|s>>>2),s=o,o=e}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class dp{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(t,n,r){let i;if(void 0===t&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(t,["next","error","complete"])?t:{next:t,error:n,complete:r},void 0===i.next&&(i.next=up),void 0===i.error&&(i.error=up),void 0===i.complete&&(i.complete=up);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),o}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(t,n){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{n(this.observers[t])}catch(e){"undefined"!==typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function up(){}function hp(e,t){return"".concat(e," failed: ").concat(t," argument ")}const pp=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function fp(e){return e&&e._delegate?e._delegate:e}class mp{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const gp="[DEFAULT]";class yp{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const t=new Vh;if(this.instancesDeferred.set(n,t),this.isInitialized(n)||this.shouldAutoInitialize())try{const e=this.getOrInitializeService({instanceIdentifier:n});e&&t.resolve(e)}catch(e){}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),i=null!==(n=null===t||void 0===t?void 0:t.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:gp})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(e){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gp;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gp;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gp;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vp(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gp;return this.component?this.component.multipleInstances?e:gp:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function vp(e){return e===gp?void 0:e}class _p{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yp(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ep=[];var Sp;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Sp||(Sp={}));const Tp={debug:Sp.DEBUG,verbose:Sp.VERBOSE,info:Sp.INFO,warn:Sp.WARN,error:Sp.ERROR,silent:Sp.SILENT},bp=Sp.INFO,Ip={[Sp.DEBUG]:"log",[Sp.VERBOSE]:"log",[Sp.INFO]:"info",[Sp.WARN]:"warn",[Sp.ERROR]:"error"},Np=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Ip[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class Cp{constructor(e){this.name=e,this._logLevel=bp,this._logHandler=Np,this._userLogHandler=null,Ep.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Sp))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Tp[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Sp.DEBUG,...t),this._logHandler(this,Sp.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Sp.VERBOSE,...t),this._logHandler(this,Sp.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Sp.INFO,...t),this._logHandler(this,Sp.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Sp.WARN,...t),this._logHandler(this,Sp.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Sp.ERROR,...t),this._logHandler(this,Sp.ERROR,...t)}}const wp=(e,t)=>t.some((t=>e instanceof t));let Rp,Ap;const Op=new WeakMap,Mp=new WeakMap,Dp=new WeakMap,kp=new WeakMap,xp=new WeakMap;let Lp={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Mp.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Dp.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Up(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Pp(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ap||(Ap=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Fp(this),n),Up(Op.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Up(e.apply(Fp(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(Fp(this),t,...r);return Dp.set(o,t.sort?t.sort():[t]),Up(o)}}function jp(e){return"function"===typeof e?Pp(e):(e instanceof IDBTransaction&&function(e){if(Mp.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));Mp.set(e,t)}(e),wp(e,Rp||(Rp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Lp):e)}function Up(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Up(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&Op.set(t,e)})).catch((()=>{})),xp.set(t,e),t}(e);if(kp.has(e))return kp.get(e);const t=jp(e);return t!==e&&(kp.set(e,t),xp.set(t,e)),t}const Fp=e=>xp.get(e);const zp=["get","getKey","getAll","getAllKeys","count"],Vp=["put","add","delete","clear"],Bp=new Map;function Gp(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Bp.get(t))return Bp.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Vp.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!zp.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return Bp.set(t,o),o}Lp=(e=>({...e,get:(t,n,r)=>Gp(t,n)||e.get(t,n,r),has:(t,n)=>!!Gp(t,n)||e.has(t,n)}))(Lp);class Hp{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Wp="@firebase/app",Yp="0.9.29",qp=new Cp("@firebase/app"),Kp="@firebase/app-compat",Qp="@firebase/analytics-compat",Jp="@firebase/analytics",Xp="@firebase/app-check-compat",Zp="@firebase/app-check",$p="@firebase/auth",ef="@firebase/auth-compat",tf="@firebase/database",nf="@firebase/database-compat",rf="@firebase/functions",of="@firebase/functions-compat",sf="@firebase/installations",af="@firebase/installations-compat",cf="@firebase/messaging",lf="@firebase/messaging-compat",df="@firebase/performance",uf="@firebase/performance-compat",hf="@firebase/remote-config",pf="@firebase/remote-config-compat",ff="@firebase/storage",mf="@firebase/storage-compat",gf="@firebase/firestore",yf="@firebase/firestore-compat",vf="firebase",_f="[DEFAULT]",Ef={[Wp]:"fire-core",[Kp]:"fire-core-compat",[Jp]:"fire-analytics",[Qp]:"fire-analytics-compat",[Zp]:"fire-app-check",[Xp]:"fire-app-check-compat",[$p]:"fire-auth",[ef]:"fire-auth-compat",[tf]:"fire-rtdb",[nf]:"fire-rtdb-compat",[rf]:"fire-fn",[of]:"fire-fn-compat",[sf]:"fire-iid",[af]:"fire-iid-compat",[cf]:"fire-fcm",[lf]:"fire-fcm-compat",[df]:"fire-perf",[uf]:"fire-perf-compat",[hf]:"fire-rc",[pf]:"fire-rc-compat",[ff]:"fire-gcs",[mf]:"fire-gcs-compat",[gf]:"fire-fst",[yf]:"fire-fst-compat","fire-js":"fire-js",[vf]:"fire-js-all"},Sf=new Map,Tf=new Map;function bf(t,n){try{t.container.addComponent(n)}catch(e){qp.debug("Component ".concat(n.name," failed to register with FirebaseApp ").concat(t.name),e)}}function If(e){const t=e.name;if(Tf.has(t))return qp.debug("There were multiple attempts to register component ".concat(t,".")),!1;Tf.set(t,e);for(const n of Sf.values())bf(n,e);return!0}function Nf(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Cf=new Qh("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class wf{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new mp("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cf.create("app-deleted",{appName:this._name})}}const Rf="10.9.0";function Af(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:_f,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Cf.create("bad-app-name",{appName:String(i)});if(n||(n=Fh()),!n)throw Cf.create("no-options");const o=Sf.get(i);if(o){if(ip(n,o.options)&&ip(r,o.config))return o;throw Cf.create("duplicate-app",{appName:i})}const s=new _p(i);for(const c of Tf.values())s.addComponent(c);const a=new wf(n,r,s);return Sf.set(i,a),a}function Of(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_f;const t=Sf.get(e);if(!t&&e===_f&&Fh())return Af();if(!t)throw Cf.create("no-app",{appName:e});return t}function Mf(e,t,n){var r;let i=null!==(r=Ef[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void qp.warn(e.join(" "))}If(new mp("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const Df="firebase-heartbeat-database",kf=1,xf="firebase-heartbeat-store";let Lf=null;function Pf(){return Lf||(Lf=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=Up(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(Up(s.result),e.oldVersion,e.newVersion,Up(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Df,kf,{upgrade:(t,n)=>{if(0===n)try{t.createObjectStore(xf)}catch(e){console.warn(e)}}}).catch((e=>{throw Cf.create("idb-open",{originalErrorMessage:e.message})}))),Lf}async function jf(t,n){try{const e=(await Pf()).transaction(xf,"readwrite"),r=e.objectStore(xf);await r.put(n,Uf(t)),await e.done}catch(e){if(e instanceof Kh)qp.warn(e.message);else{const n=Cf.create("idb-set",{originalErrorMessage:null===e||void 0===e?void 0:e.message});qp.warn(n.message)}}}function Uf(e){return"".concat(e.name,"!").concat(e.options.appId)}class Ff{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Vf(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=zf();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=zf(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Bf(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Bf(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Mh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function zf(){return(new Date).toISOString().substring(0,10)}class Vf{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!qh()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Sv){t(Sv)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await Pf()).transaction(xf),n=await e.objectStore(xf).get(Uf(t));return await e.done,n}catch(e){if(e instanceof Kh)qp.warn(e.message);else{const n=Cf.create("idb-get",{originalErrorMessage:null===e||void 0===e?void 0:e.message});qp.warn(n.message)}}}(this.app);return(null===t||void 0===t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return jf(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return jf(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Bf(e){return Mh(JSON.stringify({version:2,heartbeats:e})).length}var Gf;Gf="",If(new mp("platform-logger",(e=>new Hp(e)),"PRIVATE")),If(new mp("heartbeat",(e=>new Ff(e)),"PRIVATE")),Mf(Wp,Yp,Gf),Mf(Wp,Yp,"esm2017"),Mf("fire-js","");Mf("firebase","10.9.0","app");function Hf(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Wf(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Yf=Wf,qf=new Qh("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Kf=new Cp("@firebase/auth");function Qf(e){if(Kf.logLevel<=Sp.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Kf.error("Auth (".concat(Rf,"): ").concat(e),...n)}}function Jf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw em(e,...n)}function Xf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return em(e,...n)}function Zf(e,t,n){const r=Object.assign(Object.assign({},Yf()),{[t]:n});return new Qh("auth","Firebase",r).create(t,{appName:e.name})}function $f(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Jf(e,"argument-error"),Zf(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function em(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return qf.create(e,...n)}function tm(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw em(t,...r)}}function nm(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Qf(t),new Error(t)}function rm(e,t){e||nm(t)}function im(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function om(){return"http:"===sm()||"https:"===sm()}function sm(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function am(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(om()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class cm{constructor(e,t){this.shortDelay=e,this.longDelay=t,rm(t>e,"Short delay should be less than long delay!"),this.isMobile=Hh()||Wh()}get(){return am()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function lm(e,t){rm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class dm{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void nm("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void nm("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void nm("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const um={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},hm=new cm(3e4,6e4);function pm(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function fm(e,t,n,r){return mm(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=sp(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),dm.fetch()(ym(e,e.config.apiHost,n,s),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function mm(t,n,r){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},um),n);try{const e=new _m(t),n=await Promise.race([r(),e.promise]);e.clearNetworkTimeout();const o=await n.json();if("needConfirmation"in o)throw Em(t,"account-exists-with-different-credential",o);if(n.ok&&!("errorMessage"in o))return o;{const e=n.ok?o.errorMessage:o.error.message,[r,s]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===r)throw Em(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===r)throw Em(t,"email-already-in-use",o);if("USER_DISABLED"===r)throw Em(t,"user-disabled",o);const a=i[r]||r.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw Zf(t,a,s);Jf(t,a)}}catch(e){if(e instanceof Kh)throw e;Jf(t,"network-request-failed",{message:String(e)})}}async function gm(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await fm(e,t,n,r,i);return"mfaPendingCredential"in o&&Jf(e,"multi-factor-auth-required",{_serverResponse:o}),o}function ym(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?lm(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function vm(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _m{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Xf(this.auth,"network-request-failed"))),hm.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Em(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Xf(e,t,r);return i.customData._tokenResponse=n,i}function Sm(e){return void 0!==e&&void 0!==e.enterprise}class Tm{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return vm(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function bm(e,t){return fm(e,"GET","/v2/recaptchaConfig",pm(e,t))}function Im(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function Nm(e){return 1e3*Number(e)}function Cm(t){const[n,r,i]=t.split(".");if(void 0===n||void 0===r||void 0===i)return Qf("JWT malformed, contained fewer than 3 sections"),null;try{const e=Dh(r);return e?JSON.parse(e):(Qf("Failed to decode base64 JWT payload"),null)}catch(e){return Qf("Caught error parsing JWT payload as JSON",null===e||void 0===e?void 0:e.toString()),null}}async function wm(t,n){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return n;try{return await n}catch(e){throw e instanceof Kh&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class Rm{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Am{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Im(this.lastLoginAt),this.creationTime=Im(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Om(e){var t;const n=e.auth,r=await e.getIdToken(),i=await wm(e,async function(e,t){return fm(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));tm(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?o.providerUserInfo.map((e=>{var{providerId:t}=e,n=Hf(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(c=e.providerData,l=s,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const d=e.isAnonymous,u=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!d&&u,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Am(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(e,p)}class Mm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tm(e.idToken,"internal-error"),tm("undefined"!==typeof e.idToken,"internal-error"),tm("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Cm(e);return tm(t,"internal-error"),tm("undefined"!==typeof t.exp,"internal-error"),tm("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return tm(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await mm(e,{},(async()=>{const n=sp({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=ym(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",dm.fetch()(o,{method:"POST",headers:s,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new Mm;return n&&(tm("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(tm("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(tm("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mm,this.toJSON())}_performRefresh(){return nm("not implemented")}}function Dm(e,t){tm("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class km{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Hf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Am(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await wm(this,this.stsTokenManager.getToken(this.auth,e));return tm(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=fp(e),r=await n.getIdToken(t),i=Cm(r);tm(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Im(Nm(i.auth_time)),issuedAtTime:Im(Nm(i.iat)),expirationTime:Im(Nm(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=fp(e);await Om(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(tm(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new km(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){tm(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Om(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await wm(this,async function(e,t){return fm(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,c,l;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,u=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,f=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:_,isAnonymous:E,providerData:S,stsTokenManager:T}=t;tm(v&&T,e,"internal-error");const b=Mm.fromJSON(this.name,T);tm("string"===typeof v,e,"internal-error"),Dm(d,e.name),Dm(u,e.name),tm("boolean"===typeof _,e,"internal-error"),tm("boolean"===typeof E,e,"internal-error"),Dm(h,e.name),Dm(p,e.name),Dm(f,e.name),Dm(m,e.name),Dm(g,e.name),Dm(y,e.name);const I=new km({uid:v,auth:e,email:u,emailVerified:_,displayName:d,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:b,createdAt:g,lastLoginAt:y});return S&&Array.isArray(S)&&(I.providerData=S.map((e=>Object.assign({},e)))),m&&(I._redirectEventId=m),I}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Mm;r.updateFromServerResponse(t);const i=new km({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Om(i),i}}const xm=new Map;function Lm(e){rm(e instanceof Function,"Expected a class definition");let t=xm.get(e);return t?(rm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,xm.set(e,t),t)}class Pm{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Pm.type="NONE";const jm=Pm;function Um(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Fm{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Um(this.userKey,r.apiKey,i),this.fullPersistenceKey=Um("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?km._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Fm(Lm(jm),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Lm(jm);const o=Um(n,e.config.apiKey,e.name);let s=null;for(const l of t)try{const t=await l._get(o);if(t){const n=km._fromJSON(e,t);l!==i&&(s=n),i=l;break}}catch(c){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(c){}}))),new Fm(i,e,n)):new Fm(i,e,n)}}function zm(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Hm(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Vm(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ym(t))return"Blackberry";if(qm(t))return"Webos";if(Bm(t))return"Safari";if((t.includes("chrome/")||Gm(t))&&!t.includes("edge/"))return"Chrome";if(Wm(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Vm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gh();return/firefox\//i.test(e)}function Bm(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gh()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Gm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gh();return/crios\//i.test(e)}function Hm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gh();return/iemobile/i.test(e)}function Wm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gh();return/android/i.test(e)}function Ym(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gh();return/blackberry/i.test(e)}function qm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gh();return/webos/i.test(e)}function Km(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gh();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Qm(){return function(){const e=Gh();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Jm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gh();return Km(e)||Wm(e)||qm(e)||Ym(e)||/windows phone/i.test(e)||Hm(e)}function Xm(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=zm(Gh());break;case"Worker":t="".concat(zm(Gh()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Rf,"/").concat(r)}class Zm{constructor(e){this.auth=e,this.queue=[]}pushCallback(t,n){const r=n=>new Promise(((r,i)=>{try{r(t(n))}catch(e){i(e)}}));r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const e of this.queue)await e(t),e.onAbort&&n.push(e.onAbort)}catch(e){n.reverse();for(const e of n)try{e()}catch($c){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e||void 0===e?void 0:e.message})}}}class $m{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class eg{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ng(this),this.idTokenSubscription=new ng(this),this.beforeStateQueue=new Zm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qf,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Lm(n)),this._initializationPromise=this.queue((async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Fm.create(this,t),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(n),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(t){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const e=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,r=null===i||void 0===i?void 0:i._redirectEventId,s=await this.tryRedirectSignIn(t);e&&e!==r||!(null===s||void 0===s?void 0:s.user)||(i=s.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(e){i=r,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return tm(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(e){await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Om(t)}catch(e){if((null===e||void 0===e?void 0:e.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?fp(e):null;return t&&tm(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&tm(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Lm(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return fm(e,"GET","/v2/passwordPolicy",pm(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new $m(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qh("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return fm(e,"POST","/v2/accounts:revokeToken",pm(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Lm(e)||this._popupRedirectResolver;tm(t,this,"argument-error"),this.redirectPersistenceManager=await Fm.create(this,[Lm(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(tm(s,this,"internal-error"),s.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tm(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xm(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Kf.logLevel<=Sp.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Kf.warn("Auth (".concat(Rf,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function tg(e){return fp(e)}class ng{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new dp(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return tm(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let rg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ig(e){return rg.loadJS(e)}function og(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class sg{constructor(e){this.type="recaptcha-enterprise",this.auth=tg(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Sm(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{bm(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Tm(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Sm(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=rg.recaptchaEnterpriseScript;0!==t.length&&(t+=i),ig(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function ag(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new sg(e);let o;try{o=await i.verify(n)}catch(Sv){o=await i.verify(n,!0)}const s=Object.assign({},t);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function cg(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ag(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await ag(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function lg(e,t,n){const r=tg(e);tm(r._canInitEmulator,r,"emulator-config-failed"),tm(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=dg(t),{host:s,port:a}=function(e){const t=dg(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ug(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ug(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(o,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function dg(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ug(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class hg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return nm("not implemented")}_getIdTokenResponse(e){return nm("not implemented")}_linkToIdToken(e,t){return nm("not implemented")}_getReauthenticationResolver(e){return nm("not implemented")}}async function pg(e,t){return fm(e,"POST","/v1/accounts:signUp",t)}async function fg(e,t){return gm(e,"POST","/v1/accounts:signInWithPassword",pm(e,t))}async function mg(e,t){return fm(e,"POST","/v1/accounts:sendOobCode",pm(e,t))}async function gg(e,t){return mg(e,t)}class yg extends hg{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new yg(e,t,"password")}static _fromEmailAndCode(e,t){return new yg(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return cg(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",fg);case"emailLink":return async function(e,t){return gm(e,"POST","/v1/accounts:signInWithEmailLink",pm(e,t))}(e,{email:this._email,oobCode:this._password});default:Jf(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return cg(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pg);case"emailLink":return async function(e,t){return gm(e,"POST","/v1/accounts:signInWithEmailLink",pm(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Jf(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function vg(e,t){return gm(e,"POST","/v1/accounts:signInWithIdp",pm(e,t))}class _g extends hg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new _g(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Jf("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Hf(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new _g(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return vg(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,vg(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vg(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=sp(t)}return e}}const Eg={USER_NOT_FOUND:"user-not-found"};class Sg extends hg{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Sg({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Sg({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return gm(e,"POST","/v1/accounts:signInWithPhoneNumber",pm(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await gm(e,"POST","/v1/accounts:signInWithPhoneNumber",pm(e,t));if(n.temporaryProof)throw Em(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return gm(e,"POST","/v1/accounts:signInWithPhoneNumber",pm(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Eg)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Sg({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Tg{constructor(e){var t,n,r,i,o,s;const a=ap(cp(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);tm(c&&l&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=ap(cp(e)).link,n=t?ap(cp(t)).deep_link_id:null,r=ap(cp(e)).deep_link_id;return(r?ap(cp(r)).link:null)||r||n||t||e}(e);try{return new Tg(t)}catch(n){return null}}}class bg{constructor(){this.providerId=bg.PROVIDER_ID}static credential(e,t){return yg._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Tg.parseLink(t);return tm(n,"argument-error"),yg._fromEmailAndCode(e,n.code,n.tenantId)}}bg.PROVIDER_ID="password",bg.EMAIL_PASSWORD_SIGN_IN_METHOD="password",bg.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ig{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ng extends Ig{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Cg extends Ng{constructor(){super("facebook.com")}static credential(e){return _g._fromParams({providerId:Cg.PROVIDER_ID,signInMethod:Cg.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cg.credentialFromTaggedObject(e)}static credentialFromError(e){return Cg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Cg.credential(t.oauthAccessToken)}catch(n){return null}}}Cg.FACEBOOK_SIGN_IN_METHOD="facebook.com",Cg.PROVIDER_ID="facebook.com";class wg extends Ng{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return _g._fromParams({providerId:wg.PROVIDER_ID,signInMethod:wg.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return wg.credentialFromTaggedObject(e)}static credentialFromError(e){return wg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return wg.credential(n,r)}catch(i){return null}}}wg.GOOGLE_SIGN_IN_METHOD="google.com",wg.PROVIDER_ID="google.com";class Rg extends Ng{constructor(){super("github.com")}static credential(e){return _g._fromParams({providerId:Rg.PROVIDER_ID,signInMethod:Rg.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rg.credentialFromTaggedObject(e)}static credentialFromError(e){return Rg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Rg.credential(t.oauthAccessToken)}catch(n){return null}}}Rg.GITHUB_SIGN_IN_METHOD="github.com",Rg.PROVIDER_ID="github.com";class Ag extends Ng{constructor(){super("twitter.com")}static credential(e,t){return _g._fromParams({providerId:Ag.PROVIDER_ID,signInMethod:Ag.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ag.credentialFromTaggedObject(e)}static credentialFromError(e){return Ag.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ag.credential(n,r)}catch(i){return null}}}Ag.TWITTER_SIGN_IN_METHOD="twitter.com",Ag.PROVIDER_ID="twitter.com";class Og{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await km._fromIdTokenResponse(e,n,r),o=Mg(n);return new Og({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Mg(n);return new Og({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Mg(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Dg extends Kh{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Dg.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Dg(e,t,n,r)}}function kg(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Dg._fromErrorAndOperation(e,n,t,r);throw n}))}async function xg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await wm(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Og._forOperation(e,"link",r)}async function Lg(t,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=t,o="reauthenticate";try{const e=await wm(t,kg(i,o,n,t),r);tm(e.idToken,i,"internal-error");const s=Cm(e.idToken);tm(s,i,"internal-error");const{sub:a}=s;return tm(t.uid===a,i,"user-mismatch"),Og._forOperation(t,o,e)}catch(e){throw(null===e||void 0===e?void 0:e.code)==="auth/".concat("user-not-found")&&Jf(i,"user-mismatch"),e}}async function Pg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await kg(e,r,t),o=await Og._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}function jg(e,t,n){var r;tm((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),tm("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(tm(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(tm(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}new WeakMap;const Ug="__sak";class Fg{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ug,"1"),this.storage.removeItem(Ug),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class zg extends Fg{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Gh();return Bm(e)||Km(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Jm(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Qm()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}zg.type="LOCAL";const Vg=zg;class Bg extends Fg{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Bg.type="SESSION";const Gg=Bg;class Hg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Hg(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Wg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Hg.receivers=[];class Yg{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((s,a)=>{const c=Wg("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function qg(){return window}function Kg(){return"undefined"!==typeof qg().WorkerGlobalScope&&"function"===typeof qg().importScripts}const Qg="firebaseLocalStorageDb",Jg="firebaseLocalStorage",Xg="fbase_key";class Zg{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function $g(e,t){return e.transaction([Jg],t?"readwrite":"readonly").objectStore(Jg)}function ey(){const t=indexedDB.open(Qg,1);return new Promise(((n,r)=>{t.addEventListener("error",(()=>{r(t.error)})),t.addEventListener("upgradeneeded",(()=>{const n=t.result;try{n.createObjectStore(Jg,{keyPath:Xg})}catch(e){r(e)}})),t.addEventListener("success",(async()=>{const e=t.result;e.objectStoreNames.contains(Jg)?n(e):(e.close(),await function(){const e=indexedDB.deleteDatabase(Qg);return new Zg(e).toPromise()}(),n(await ey()))}))}))}async function ty(e,t,n){const r=$g(e,!0).put({[Xg]:t,value:n});return new Zg(r).toPromise()}function ny(e,t){const n=$g(e,!0).delete(t);return new Zg(n).toPromise()}class ry{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await ey()),this.db}async _withRetries(t){let n=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(e){if(n++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hg._getInstance(Kg()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Yg(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ey();return await ty(e,Ug,"1"),await ny(e,Ug),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>ty(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=$g(e,!1).get(t),r=await new Zg(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>ny(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=$g(e,!1).getAll();return new Zg(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ry.type="LOCAL";const iy=ry;og("rcb"),new cm(3e4,6e4);const oy="recaptcha";async function sy(e,t,n){var r;const i=await n.verify();try{let o;if(tm("string"===typeof i,e,"argument-error"),tm(n.type===oy,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){tm("enroll"===t.type,e,"internal-error");const n=await function(e,t){return fm(e,"POST","/v2/accounts/mfaEnrollment:start",pm(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{tm("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;tm(n,e,"missing-multi-factor-info");const s=await function(e,t){return fm(e,"POST","/v2/accounts/mfaSignIn:start",pm(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return fm(e,"POST","/v1/accounts:sendVerificationCode",pm(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class ay{constructor(e){this.providerId=ay.PROVIDER_ID,this.auth=tg(e)}verifyPhoneNumber(e,t){return sy(this.auth,e,fp(t))}static credential(e,t){return Sg._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ay.credentialFromTaggedObject(t)}static credentialFromError(e){return ay.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Sg._fromTokenResponse(n,r):null}}function cy(e,t){return t?Lm(t):(tm(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ay.PROVIDER_ID="phone",ay.PHONE_SIGN_IN_METHOD="phone";class ly extends hg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vg(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vg(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vg(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function dy(e){return Pg(e.auth,new ly(e),e.bypassAuthState)}function uy(e){const{auth:t,user:n}=e;return tm(n,t,"internal-error"),Lg(n,new ly(e),e.bypassAuthState)}async function hy(e){const{auth:t,user:n}=e;return tm(n,t,"internal-error"),xg(n,new ly(e),e.bypassAuthState)}class py{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=t;if(s)return void this.reject(s);const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dy;case"linkViaPopup":case"linkViaRedirect":return hy;case"reauthViaPopup":case"reauthViaRedirect":return uy;default:Jf(this.auth,"internal-error")}}resolve(e){rm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const fy=new cm(2e3,1e4);async function my(e,t,n){const r=tg(e);$f(e,t,Ig);const i=cy(r,n);return new gy(r,"signInViaPopup",t,i).executeNotNull()}class gy extends py{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,gy.currentPopupAction&&gy.currentPopupAction.cancel(),gy.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tm(e,this.auth,"internal-error"),e}async onExecution(){rm(1===this.filter.length,"Popup operations only handle one event");const e=Wg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Xf(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Xf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gy.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Xf(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,fy.get())};e()}}gy.currentPopupAction=null;const yy="pendingRedirect",vy=new Map;class _y extends py{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let t=vy.get(this.auth._key());if(!t){try{const e=await async function(e,t){const n=Ty(t),r=Sy(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=e?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}vy.set(this.auth._key(),t)}return this.bypassAuthState||vy.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ey(e,t){vy.set(e._key(),t)}function Sy(e){return Lm(e._redirectPersistence)}function Ty(e){return Um(yy,e.config.apiKey,e.name)}async function by(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=tg(e),i=cy(r,t),o=new _y(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class Iy{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cy(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Cy(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Xf(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ny(e))}saveEventToCache(e){this.cachedEventUids.add(Ny(e)),this.lastProcessedEventTime=Date.now()}}function Ny(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Cy(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const wy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ry=/^https?/;async function Ay(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return fm(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Oy(r))return}catch(n){}Jf(e,"unauthorized-domain")}function Oy(e){const t=im(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ry.test(n))return!1;if(wy.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const My=new cm(3e4,6e4);function Dy(){const e=qg().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ky(e){return new Promise(((t,n)=>{var r,i,o;function s(){Dy(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Dy(),n(Xf(e,"network-request-failed"))},timeout:My.get()})}if(null===(i=null===(r=qg().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=qg().gapi)||void 0===o?void 0:o.load)){const t=og("iframefcb");return qg()[t]=()=>{gapi.load?s():n(Xf(e,"network-request-failed"))},ig("".concat(rg.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}s()}})).catch((e=>{throw xy=null,e}))}let xy=null;const Ly=new cm(5e3,15e3),Py="__/auth/iframe",jy="emulator/auth/iframe",Uy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zy(e){const t=e.config;tm(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?lm(t,jy):"https://".concat(e.config.authDomain,"/").concat(Py),r={apiKey:t.apiKey,appName:e.name,v:Rf},i=Fy.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(sp(r).slice(1))}async function Vy(e){const t=await function(e){return xy=xy||ky(e),xy}(e),n=qg().gapi;return tm(n,e,"internal-error"),t.open({where:document.body,url:zy(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Uy,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Xf(e,"network-request-failed"),o=qg().setTimeout((()=>{r(i)}),Ly.get());function s(){qg().clearTimeout(o),n(t)}t.ping(s).then(s,(()=>{r(i)}))}))))}const By={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Gy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Hy(t,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-o)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const l=Object.assign(Object.assign({},By),{width:i.toString(),height:o.toString(),top:s,left:a}),d=Gh().toLowerCase();r&&(c=Gm(d)?"_blank":r),Vm(d)&&(n=n||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Km(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gh())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(d)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(n||"",c),new Gy(null);const h=window.open(n||"",c,u);tm(h,t,"popup-blocked");try{h.focus()}catch(e){}return new Gy(h)}const Wy="__/auth/handler",Yy="emulator/auth/handler",qy=encodeURIComponent("fac");async function Ky(e,t,n,r,i,o){tm(e.config.authDomain,e,"auth-domain-config-required"),tm(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Rf,eventId:i};if(t instanceof Ig){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",np(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof Ng){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const d of Object.keys(a))void 0===a[d]&&delete a[d];const c=await e._getAppCheckToken(),l=c?"#".concat(qy,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Wy);return lm(t,Yy)}(e),"?").concat(sp(a).slice(1)).concat(l)}const Qy="webStorageSupport";const Jy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gg,this._completeRedirectFn=by,this._overrideRedirectResult=Ey}async _openPopup(e,t,n,r){var i;rm(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Hy(e,await Ky(e,t,n,im(),r),Wg())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){qg().location.href=e}(await Ky(e,t,n,im(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(rm(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Vy(e),n=new Iy(e);return t.register("authEvent",(t=>{tm(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qy,{type:Qy},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Qy];void 0!==i&&t(!!i),Jf(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ay(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Jm()||Bm()||Km()}};var Xy="@firebase/auth",Zy="1.6.2";class $y{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){tm(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ev=zh("authIdTokenMaxAge")||300;let tv=null;var nv;!function(e){rg=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Xf("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),nv="Browser",If(new mp("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;tm(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:nv,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xm(nv)},l=new eg(r,i,o,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Lm);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),If(new mp("auth-internal",(e=>(e=>new $y(e))(tg(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Mf(Xy,Zy,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(nv)),Mf(Xy,Zy,"esm2017");const rv="@firebase/database",iv="1.0.3";let ov="";function sv(e){ov=e}class av{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Zh(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Xh(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class cv{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return ep(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const lv=function(t){try{if("undefined"!==typeof window&&"undefined"!==typeof window[t]){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new av(e)}}catch(e){}return new cv},dv=lv("localStorage"),uv=lv("sessionStorage"),hv=new Cp("@firebase/database"),pv=function(){let e=1;return function(){return e++}}(),fv=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Nh(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new lp;n.update(t);const r=n.digest();return Rh.encodeByteArray(r)},mv=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=mv.apply(null,n):e+="object"===typeof n?Zh(n):n,e+=" "}return e};let gv=null,yv=!0;const vv=function(e,t){Nh(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(hv.logLevel=Sp.VERBOSE,gv=hv.log.bind(hv),t&&uv.set("logging_enabled",!0)):"function"===typeof e?gv=e:(gv=null,uv.remove("logging_enabled"))},_v=function(){if(!0===yv&&(yv=!1,null===gv&&!0===uv.get("logging_enabled")&&vv(!0)),gv){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=mv.apply(null,t);gv(r)}},Ev=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];_v(e,...n)}},Sv=function(){const e="FIREBASE INTERNAL ERROR: "+mv(...arguments);hv.error(e)},Tv=function(){const e="FIREBASE FATAL ERROR: ".concat(mv(...arguments));throw hv.error(e),new Error(e)},bv=function(){const e="FIREBASE WARNING: "+mv(...arguments);hv.warn(e)},Iv=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Nv="[MIN_NAME]",Cv="[MAX_NAME]",wv=function(e,t){if(e===t)return 0;if(e===Nv||t===Cv)return-1;if(t===Nv||e===Cv)return 1;{const n=Lv(e),r=Lv(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},Rv=function(e,t){return e===t?0:e<t?-1:1},Av=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Zh(t))},Ov=function(e){if("object"!==typeof e||null===e)return Zh(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=Zh(t[r]),n+=":",n+=Ov(e[t[r]]);return n+="}",n},Mv=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Dv(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const kv=function(e){Nh(!Iv(e),"Invalid JSON number");const t=1023;let n,r,i,o,s;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=o+t,i=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(s=52;s;s-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(s=11;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const c=a.join("");let l="";for(s=0;s<64;s+=8){let e=parseInt(c.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),l+=e}return l.toLowerCase()};const xv=new RegExp("^-?(0*)\\d{1,10}$"),Lv=function(e){if(xv.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Pv=function(t){try{t()}catch(e){setTimeout((()=>{const n=e.stack||"";throw bv("Exception was thrown by user callback.",n),e}),Math.floor(0))}},jv=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Uv{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){bv('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class Fv{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(_v("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',bv(e)}}class zv{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}zv.OWNER="owner";const Vv="5",Bv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Gv="ac",Hv="websocket",Wv="long_polling";class Yv{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=dv.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&dv.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function qv(e,t,n){let r;if(Nh("string"===typeof t,"typeof type must == string"),Nh("object"===typeof n,"typeof params must == object"),t===Hv)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Wv)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return Dv(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class Kv{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ep(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return kh(this.counters_)}}const Qv={},Jv={};function Xv(e){const t=e.toString();return Qv[t]||(Qv[t]=new Kv),Qv[t]}class Zv{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Pv((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const $v="start";class e_{constructor(e,t,n,r,i,o,s){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ev(e),this.stats_=Xv(t),this.urlFn=e=>(this.appCheckToken&&(e[Gv]=this.appCheckToken),qv(t,Wv,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Zv(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Yh()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new t_((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o,s,a,c]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===$v)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[$v]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Vv,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Gv]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Bv.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e_.forceAllow_=!0}static forceDisallow(){e_.forceDisallow_=!0}static isAvailable(){return!Yh()&&(!!e_.forceAllow_||!e_.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Zh(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Oh(t),r=Mv(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Yh())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Zh(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class t_{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Yh())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=pv(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t_.createIFrame_();let r="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){r='<script>document.domain="'+document.domain+'";<\/script>'}const i="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(e){_v("frame writing exception"),e.stack&&_v(e.stack),_v(e)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_v("No IE domain setting required")}catch(e){const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(t,n){Yh()?this.doNodeLongPoll(t,n):setTimeout((()=>{try{if(!this.sendNewPolls)return;const e=this.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){const t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=()=>{_v("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(e)}catch(e){}}),Math.floor(1))}}let n_=null;"undefined"!==typeof MozWebSocket?n_=MozWebSocket:"undefined"!==typeof WebSocket&&(n_=WebSocket);class r_{constructor(e,t,n,r,i,o,s){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ev(this.connId),this.stats_=Xv(t),this.connURL=r_.connectionURL_(t,o,s,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const o={};return o.v=Vv,!Yh()&&"undefined"!==typeof location&&location.hostname&&Bv.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),r&&(o[Gv]=r),i&&(o.p=i),qv(e,Hv,o)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,dv.set("previous_websocket_failure",!0);try{let e;if(Yh()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(Vv,"/").concat(ov,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new n_(this.connURL,[],e)}catch(e){this.log_("Error instantiating WebSocket.");const n=e.message||e.data;return n&&this.log_(n),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){r_.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==n_&&!r_.forceDisallow_}static previouslyFailed(){return dv.isInMemoryStorage||!0===dv.get("previous_websocket_failure")}markConnectionHealthy(){dv.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=Xh(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Nh(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=Zh(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Mv(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}r_.responsesRequiredToBeHealthy=2,r_.healthyTimeout=3e4;class i_{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[e_,r_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=r_&&r_.isAvailable();let n=t&&!r_.previouslyFailed();if(e.webSocketOnly&&(t||bv("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[r_];else{const e=this.transports_=[];for(const t of i_.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);i_.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}i_.globalTransportInitialized_=!1;class o_{constructor(e,t,n,r,i,o,s,a,c,l){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ev("c:"+this.id+":"),this.transportManager_=new i_(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=jv((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Av("t",e),n=Av("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Av("t",e),n=Av("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Av("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Sv("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Sv("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Vv!==n&&bv("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),jv((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):jv((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(dv.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class s_{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class a_{constructor(e){this.allowedEvents_=e,this.listeners_={},Nh(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Nh(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class c_ extends a_{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Hh()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new c_}getInitialEvent(e){return Nh("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const l_=32,d_=768;class u_{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function h_(){return new u_("")}function p_(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function f_(e){return e.pieces_.length-e.pieceNum_}function m_(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new u_(e.pieces_,t)}function g_(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function y_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function v_(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new u_(t,0)}function __(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof u_)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new u_(n,0)}function E_(e){return e.pieceNum_>=e.pieces_.length}function S_(e,t){const n=p_(e),r=p_(t);if(null===n)return t;if(n===r)return S_(m_(e),m_(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function T_(e,t){if(f_(e)!==f_(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function b_(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(f_(e)>f_(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class I_{constructor(e,t){this.errorPrefix_=t,this.parts_=y_(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=pp(this.parts_[n]);N_(this)}}function N_(e){if(e.byteLength_>d_)throw new Error(e.errorPrefix_+"has a key path longer than "+d_+" bytes ("+e.byteLength_+").");if(e.parts_.length>l_)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+l_+") or object contains a cycle "+C_(e))}function C_(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class w_ extends a_{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new w_}getInitialEvent(e){return Nh("visible"===e,"Unknown event type: "+e),[this.visible_]}}const R_=1e3;class A_ extends s_{constructor(e,t,n,r,i,o,s,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=s,this.authOverride_=a,this.id=A_.nextPersistentConnectionId_++,this.log_=Ev("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=R_,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!Yh())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");w_.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&c_.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Zh(i)),Nh(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Vh,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Nh(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Nh(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const o=i.d,s=i.s;A_.warnOnListenWarnings_(o,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==s&&this.removeListen_(n,r),e.onComplete&&e.onComplete(s,o))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&ep(e,"w")){const n=tp(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();bv("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=$h(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=$h(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Nh(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Zh(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Sv("Unrecognized action received from server: "+Zh(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Nh(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=R_,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=R_,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=R_),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+A_.nextConnectionId_++,i=this.lastSessionId;let o=!1,s=null;const a=function(){s?s.close():(o=!0,n())},c=function(e){Nh(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)};this.realtime_={close:a,sendRequest:c};const l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,c]=await Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)]);o?_v("getToken() completed but was canceled"):(_v("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=c&&c.token,s=new o_(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{bv(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(Sv){this.log_("Failed to get token: "+Sv),o||(this.repoInfo_.nodeAdmin&&bv(Sv),a())}}}interrupt(e){_v("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){_v("Resuming connection for reason: "+e),delete this.interruptReasons_[e],np(this.interruptReasons_)&&(this.reconnectDelay_=R_,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>Ov(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new u_(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){_v("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){_v("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";Yh()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+ov.replace(/\./g,"-")]=1,Hh()?e["framework.cordova"]=1:Wh()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=c_.getInstance().currentlyOnline();return np(this.interruptReasons_)&&e}}A_.nextPersistentConnectionId_=0,A_.nextConnectionId_=0;class O_{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new O_(e,t)}}class M_{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new O_(Nv,e),r=new O_(Nv,t);return 0!==this.compare(n,r)}minPost(){return O_.MIN}}let D_;class k_ extends M_{static get __EMPTY_NODE(){return D_}static set __EMPTY_NODE(e){D_=e}compare(e,t){return wv(e.name,t.name)}isDefinedOn(e){throw Ch("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return O_.MIN}maxPost(){return new O_(Cv,D_)}makePost(e,t){return Nh("string"===typeof e,"KeyIndex indexValue must always be a string."),new O_(e,D_)}toString(){return".key"}}const x_=new k_;class L_{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class P_{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:P_.RED,this.left=null!=r?r:j_.EMPTY_NODE,this.right=null!=i?i:j_.EMPTY_NODE}copy(e,t,n,r,i){return new P_(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return j_.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return j_.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,P_.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,P_.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}P_.RED=!0,P_.BLACK=!1;class j_{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j_.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new j_(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,P_.BLACK,null,null))}remove(e){return new j_(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,P_.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new L_(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new L_(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new L_(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new L_(this.root_,null,this.comparator_,!0,e)}}function U_(e,t){return wv(e.name,t.name)}function F_(e,t){return wv(e,t)}let z_;j_.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new P_(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const V_=function(e){return"number"===typeof e?"number:"+kv(e):"string:"+e},B_=function(e){if(e.isLeafNode()){const t=e.val();Nh("string"===typeof t||"number"===typeof t||"object"===typeof t&&ep(t,".sv"),"Priority must be a string or number.")}else Nh(e===z_||e.isEmpty(),"priority of unexpected type.");Nh(e===z_||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let G_,H_,W_;class Y_{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y_.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Nh(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),B_(this.priorityNode_)}static set __childrenNodeConstructor(e){G_=e}static get __childrenNodeConstructor(){return G_}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Y_(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Y_.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return E_(e)?this:".priority"===p_(e)?this.priorityNode_:Y_.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Y_.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=p_(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Nh(".priority"!==n||1===f_(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Y_.__childrenNodeConstructor.EMPTY_NODE.updateChild(m_(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+V_(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?kv(this.value_):this.value_,this.lazyHash_=fv(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Y_.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Y_.__childrenNodeConstructor?-1:(Nh(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=Y_.VALUE_TYPE_ORDER.indexOf(t),i=Y_.VALUE_TYPE_ORDER.indexOf(n);return Nh(r>=0,"Unknown leaf type: "+t),Nh(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Y_.VALUE_TYPE_ORDER=["object","boolean","number","string"];const q_=new class extends M_{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?wv(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return O_.MIN}maxPost(){return new O_(Cv,new Y_("[PRIORITY-POST]",W_))}makePost(e,t){const n=H_(e);return new O_(t,new Y_("[PRIORITY-POST]",n))}toString(){return".priority"}},K_=Math.log(2);class Q_{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/K_,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const J_=function(e,t,n,r){e.sort(t);const i=function(t,r){const o=r-t;let s,a;if(0===o)return null;if(1===o)return s=e[t],a=n?n(s):s,new P_(a,s.node,P_.BLACK,null,null);{const c=parseInt(o/2,10)+t,l=i(t,c),d=i(c+1,r);return s=e[c],a=n?n(s):s,new P_(a,s.node,P_.BLACK,l,d)}},o=function(t){let r=null,o=null,s=e.length;const a=function(t,r){const o=s-t,a=s;s-=t;const l=i(o+1,a),d=e[o],u=n?n(d):d;c(new P_(u,d.node,r,null,l))},c=function(e){r?(r.left=e,r=e):(o=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,P_.BLACK):(a(r,P_.BLACK),a(r,P_.RED))}return o}(new Q_(e.length));return new j_(r||t,o)};let X_;const Z_={};class $_{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Nh(Z_&&q_,"ChildrenNode.ts has not been loaded"),X_=X_||new $_({".priority":Z_},{".priority":q_}),X_}get(e){const t=tp(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof j_?t:null}hasIndex(e){return ep(this.indexSet_,e.toString())}addIndex(e,t){Nh(e!==x_,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(O_.Wrap);let o,s=i.getNext();for(;s;)r=r||e.isDefinedOn(s.node),n.push(s),s=i.getNext();o=r?J_(n,e.getCompare()):Z_;const a=e.toString(),c=Object.assign({},this.indexSet_);c[a]=e;const l=Object.assign({},this.indexes_);return l[a]=o,new $_(l,c)}addToIndexes(e,t){const n=rp(this.indexes_,((n,r)=>{const i=tp(this.indexSet_,r);if(Nh(i,"Missing index implementation for "+r),n===Z_){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(O_.Wrap);let o=r.getNext();for(;o;)o.name!==e.name&&n.push(o),o=r.getNext();return n.push(e),J_(n,i.getCompare())}return Z_}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new O_(e.name,r))),i.insert(e,e.node)}}));return new $_(n,this.indexSet_)}removeFromIndexes(e,t){const n=rp(this.indexes_,(n=>{if(n===Z_)return n;{const r=t.get(e.name);return r?n.remove(new O_(e.name,r)):n}}));return new $_(n,this.indexSet_)}}let eE;class tE{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&B_(this.priorityNode_),this.children_.isEmpty()&&Nh(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return eE||(eE=new tE(new j_(F_),null,$_.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||eE}updatePriority(e){return this.children_.isEmpty()?this:new tE(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?eE:t}}getChild(e){const t=p_(e);return null===t?this:this.getImmediateChild(t).getChild(m_(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Nh(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new O_(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const o=r.isEmpty()?eE:this.priorityNode_;return new tE(r,o,i)}}updateChild(e,t){const n=p_(e);if(null===n)return t;{Nh(".priority"!==p_(e)||1===f_(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(m_(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(q_,((o,s)=>{t[o]=s.val(e),n++,i&&tE.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+V_(this.getPriority().val())+":"),this.forEachChild(q_,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":fv(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new O_(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new O_(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new O_(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,O_.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,O_.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===nE?-1:0}withIndex(e){if(e===x_||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new tE(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===x_||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(q_),n=t.getIterator(q_);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===x_?null:this.indexMap_.get(e.toString())}}tE.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const nE=new class extends tE{constructor(){super(new j_(F_),tE.EMPTY_NODE,$_.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return tE.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(O_,{MIN:{value:new O_(Nv,tE.EMPTY_NODE)},MAX:{value:new O_(Cv,nE)}}),k_.__EMPTY_NODE=tE.EMPTY_NODE,Y_.__childrenNodeConstructor=tE,z_=nE,function(e){W_=e}(nE);const rE=!0;function iE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return tE.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Nh(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Y_(e,iE(t))}if(e instanceof Array||!rE){let n=tE.EMPTY_NODE;return Dv(e,((t,r)=>{if(ep(e,t)&&"."!==t.substring(0,1)){const e=iE(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(iE(t))}{const n=[];let r=!1;if(Dv(e,((e,t)=>{if("."!==e.substring(0,1)){const i=iE(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new O_(e,i)))}})),0===n.length)return tE.EMPTY_NODE;const i=J_(n,U_,(e=>e.name),F_);if(r){const e=J_(n,q_.getCompare());return new tE(i,iE(t),new $_({".priority":e},{".priority":q_}))}return new tE(i,iE(t),$_.Default)}}!function(e){H_=e}(iE);class oE extends M_{constructor(e){super(),this.indexPath_=e,Nh(!E_(e)&&".priority"!==p_(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?wv(e.name,t.name):i}makePost(e,t){const n=iE(e),r=tE.EMPTY_NODE.updateChild(this.indexPath_,n);return new O_(t,r)}maxPost(){const e=tE.EMPTY_NODE.updateChild(this.indexPath_,nE);return new O_(Cv,e)}toString(){return y_(this.indexPath_,0).join("/")}}const sE=new class extends M_{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?wv(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return O_.MIN}maxPost(){return O_.MAX}makePost(e,t){const n=iE(e);return new O_(t,n)}toString(){return".value"}};function aE(e){return{type:"value",snapshotNode:e}}function cE(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function lE(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function dE(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class uE{constructor(e){this.index_=e}updateChild(e,t,n,r,i,o){Nh(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(lE(t,s)):Nh(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(cE(t,n)):o.trackChildChange(dE(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(q_,((e,r)=>{t.hasChild(e)||n.trackChildChange(lE(e,r))})),t.isLeafNode()||t.forEachChild(q_,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(dE(t,r,i))}else n.trackChildChange(cE(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?tE.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class hE{constructor(e){this.indexedFilter_=new uE(e.getIndex()),this.index_=e.getIndex(),this.startPost_=hE.getStartPost_(e),this.endPost_=hE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,o){return this.matches(new O_(t,n))||(n=tE.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)}updateFullNode(e,t,n){t.isLeafNode()&&(t=tE.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(tE.EMPTY_NODE);const i=this;return t.forEachChild(q_,((e,t)=>{i.matches(new O_(e,t))||(r=r.updateImmediateChild(e,tE.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class pE{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new hE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,o){return this.rangedFilter_.matches(new O_(t,n))||(n=tE.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=tE.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=tE.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(tE.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,tE.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let o;if(this.reverse_){const e=this.index_.getCompare();o=(t,n)=>e(n,t)}else o=this.index_.getCompare();const s=e;Nh(s.numChildren()===this.limit_,"");const a=new O_(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(a);if(s.hasChild(t)){const e=s.getImmediateChild(t);let d=r.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=d&&(d.name===t||s.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);const u=null==d?1:o(d,a);if(l&&!n.isEmpty()&&u>=0)return null!=i&&i.trackChildChange(dE(t,n,e)),s.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(lE(t,e));const n=s.updateImmediateChild(t,tE.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(cE(d.name,d.node)),n.updateImmediateChild(d.name,d.node)):n}}return n.isEmpty()?e:l&&o(c,a)>=0?(null!=i&&(i.trackChildChange(lE(c.name,c.node)),i.trackChildChange(cE(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,tE.EMPTY_NODE)):e}}class fE{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=q_}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Nh(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Nh(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Nv}hasEnd(){return this.endSet_}getIndexEndValue(){return Nh(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Nh(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Cv}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Nh(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===q_}copy(){const e=new fE;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function mE(e){const t={};if(e.isDefault())return t;let n;if(e.index_===q_?n="$priority":e.index_===sE?n="$value":e.index_===x_?n="$key":(Nh(e.index_ instanceof oE,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Zh(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=Zh(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+Zh(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=Zh(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+Zh(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function gE(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==q_&&(t.i=e.index_.toString()),t}class yE extends s_{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Ev("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Nh(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=yE.getListenId_(e,n),s={};this.listens_[o]=s;const a=mE(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),tp(this.listens_,o)===s){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=yE.getListenId_(e,t);delete this.listens_[n]}get(e){const t=mE(e._queryParams),n=e._path.toString(),r=new Vh;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((i=>{let[o,s]=i;o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+sp(n);this.log_("Sending REST request for "+a);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&4===c.readyState){this.log_("REST Response for "+a+" received. status:",c.status,"response:",c.responseText);let t=null;if(c.status>=200&&c.status<300){try{t=Xh(c.responseText)}catch(e){bv("Failed to parse JSON response for "+a+": "+c.responseText)}r(null,t)}else 401!==c.status&&404!==c.status&&bv("Got unsuccessful REST response for "+a+" Status: "+c.status),r(c.status);r=null}},c.open("GET",a,!0),c.send()}))}}class vE{constructor(){this.rootNode_=tE.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function _E(){return{value:null,children:new Map}}function EE(e,t,n){if(E_(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=p_(t);e.children.has(r)||e.children.set(r,_E());EE(e.children.get(r),t=m_(t),n)}}function SE(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{SE(r,new u_(t.toString()+"/"+e),n)}))}class TE{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Dv(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class bE{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new TE(e);const n=1e4+2e4*Math.random();jv(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Dv(e,((e,r)=>{r>0&&ep(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),jv(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var IE;function NE(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(IE||(IE={}));class CE{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=IE.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(E_(this.path)){if(null!=this.affectedTree.value)return Nh(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new u_(e));return new CE(h_(),t,this.revert)}}return Nh(p_(this.path)===e,"operationForChild called for unrelated child."),new CE(m_(this.path),this.affectedTree,this.revert)}}class wE{constructor(e,t){this.source=e,this.path=t,this.type=IE.LISTEN_COMPLETE}operationForChild(e){return E_(this.path)?new wE(this.source,h_()):new wE(this.source,m_(this.path))}}class RE{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=IE.OVERWRITE}operationForChild(e){return E_(this.path)?new RE(this.source,h_(),this.snap.getImmediateChild(e)):new RE(this.source,m_(this.path),this.snap)}}class AE{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=IE.MERGE}operationForChild(e){if(E_(this.path)){const t=this.children.subtree(new u_(e));return t.isEmpty()?null:t.value?new RE(this.source,h_(),t.value):new AE(this.source,h_(),t)}return Nh(p_(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new AE(this.source,m_(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class OE{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(E_(e))return this.isFullyInitialized()&&!this.filtered_;const t=p_(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class ME{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function DE(e,t,n,r,i,o){const s=r.filter((e=>e.type===n));s.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Ch("Should only compare child_ events.");const r=new O_(t.childName,t.snapshotNode),i=new O_(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),s.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function kE(e,t){return{eventCache:e,serverCache:t}}function xE(e,t,n,r){return kE(new OE(t,n,r),e.serverCache)}function LE(e,t,n,r){return kE(e.eventCache,new OE(t,n,r))}function PE(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function jE(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let UE;class FE{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(UE||(UE=new j_(Rv)),UE);this.value=e,this.children=t}static fromObject(e){let t=new FE(null);return Dv(e,((e,n)=>{t=t.set(new u_(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:h_(),value:this.value};if(E_(e))return null;{const n=p_(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(m_(e),t);if(null!=i){return{path:__(new u_(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(E_(e))return this;{const t=p_(e),n=this.children.get(t);return null!==n?n.subtree(m_(e)):new FE(null)}}set(e,t){if(E_(e))return new FE(t,this.children);{const n=p_(e),r=(this.children.get(n)||new FE(null)).set(m_(e),t),i=this.children.insert(n,r);return new FE(this.value,i)}}remove(e){if(E_(e))return this.children.isEmpty()?new FE(null):new FE(null,this.children);{const t=p_(e),n=this.children.get(t);if(n){const r=n.remove(m_(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new FE(null):new FE(this.value,i)}return this}}get(e){if(E_(e))return this.value;{const t=p_(e),n=this.children.get(t);return n?n.get(m_(e)):null}}setTree(e,t){if(E_(e))return t;{const n=p_(e),r=(this.children.get(n)||new FE(null)).setTree(m_(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new FE(this.value,i)}}fold(e){return this.fold_(h_(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(__(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,h_(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(E_(e))return null;{const r=p_(e),i=this.children.get(r);return i?i.findOnPath_(m_(e),__(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,h_(),t)}foreachOnPath_(e,t,n){if(E_(e))return this;{this.value&&n(t,this.value);const r=p_(e),i=this.children.get(r);return i?i.foreachOnPath_(m_(e),__(t,r),n):new FE(null)}}foreach(e){this.foreach_(h_(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(__(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class zE{constructor(e){this.writeTree_=e}static empty(){return new zE(new FE(null))}}function VE(e,t,n){if(E_(t))return new zE(new FE(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let o=r.value;const s=S_(i,t);return o=o.updateChild(s,n),new zE(e.writeTree_.set(i,o))}{const r=new FE(n),i=e.writeTree_.setTree(t,r);return new zE(i)}}}function BE(e,t,n){let r=e;return Dv(n,((e,n)=>{r=VE(r,__(t,e),n)})),r}function GE(e,t){if(E_(t))return zE.empty();{const n=e.writeTree_.setTree(t,new FE(null));return new zE(n)}}function HE(e,t){return null!=WE(e,t)}function WE(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(S_(n.path,t)):null}function YE(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(q_,((e,n)=>{t.push(new O_(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new O_(e,n.value))})),t}function qE(e,t){if(E_(t))return e;{const n=WE(e,t);return new zE(null!=n?new FE(n):e.writeTree_.subtree(t))}}function KE(e){return e.writeTree_.isEmpty()}function QE(e,t){return JE(h_(),e.writeTree_,t)}function JE(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(Nh(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=JE(__(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(__(e,".priority"),r)),n}}function XE(e,t){return dS(t,e)}function ZE(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Nh(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){const t=e.allWrites[s];t.visible&&(s>=n&&$E(t,r.path)?i=!1:b_(r.path,t.path)&&(o=!0)),s--}if(i){if(o)return function(e){e.visibleWrites=tS(e.allWrites,eS,h_()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=GE(e.visibleWrites,r.path);else{Dv(r.children,(t=>{e.visibleWrites=GE(e.visibleWrites,__(r.path,t))}))}return!0}return!1}function $E(e,t){if(e.snap)return b_(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&b_(__(e.path,n),t))return!0;return!1}function eS(e){return e.visible}function tS(e,t,n){let r=zE.empty();for(let i=0;i<e.length;++i){const o=e[i];if(t(o)){const e=o.path;let t;if(o.snap)b_(n,e)?(t=S_(n,e),r=VE(r,t,o.snap)):b_(e,n)&&(t=S_(e,n),r=VE(r,h_(),o.snap.getChild(t)));else{if(!o.children)throw Ch("WriteRecord should have .snap or .children");if(b_(n,e))t=S_(n,e),r=BE(r,t,o.children);else if(b_(e,n))if(t=S_(e,n),E_(t))r=BE(r,h_(),o.children);else{const e=tp(o.children,p_(t));if(e){const n=e.getChild(m_(t));r=VE(r,h_(),n)}}}}}return r}function nS(e,t,n,r,i){if(r||i){const o=qE(e.visibleWrites,t);if(!i&&KE(o))return n;if(i||null!=n||HE(o,h_())){const o=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(b_(e.path,t)||b_(t,e.path))};return QE(tS(e.allWrites,o,t),n||tE.EMPTY_NODE)}return null}{const r=WE(e.visibleWrites,t);if(null!=r)return r;{const r=qE(e.visibleWrites,t);if(KE(r))return n;if(null!=n||HE(r,h_())){return QE(r,n||tE.EMPTY_NODE)}return null}}}function rS(e,t,n,r){return nS(e.writeTree,e.treePath,t,n,r)}function iS(e,t){return function(e,t,n){let r=tE.EMPTY_NODE;const i=WE(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(q_,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=qE(e.visibleWrites,t);return n.forEachChild(q_,((e,t)=>{const n=QE(qE(i,new u_(e)),t);r=r.updateImmediateChild(e,n)})),YE(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return YE(qE(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function oS(e,t,n,r){return function(e,t,n,r,i){Nh(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=__(t,n);if(HE(e.visibleWrites,o))return null;{const t=qE(e.visibleWrites,o);return KE(t)?i.getChild(n):QE(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function sS(e,t){return function(e,t){return WE(e.visibleWrites,t)}(e.writeTree,__(e.treePath,t))}function aS(e,t,n,r,i,o){return function(e,t,n,r,i,o,s){let a;const c=qE(e.visibleWrites,t),l=WE(c,h_());if(null!=l)a=l;else{if(null==n)return[];a=QE(c,n)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=s.getCompare(),n=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let c=n.getNext();for(;c&&e.length<i;)0!==t(c,r)&&e.push(c),c=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,o)}function cS(e,t,n){return function(e,t,n,r){const i=__(t,n),o=WE(e.visibleWrites,i);if(null!=o)return o;if(r.isCompleteForChild(n))return QE(qE(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function lS(e,t){return dS(__(e.treePath,t),e.writeTree)}function dS(e,t){return{treePath:e,writeTree:t}}class uS{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Nh("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Nh(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,dE(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,lE(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,cE(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Ch("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,dE(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const hS=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class pS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new OE(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return cS(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:jE(this.viewCache_),i=aS(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function fS(e,t,n,r,i){const o=new uS;let s,a;if(n.type===IE.OVERWRITE){const c=n;c.source.fromUser?s=yS(e,t,c.path,c.snap,r,i,o):(Nh(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered()&&!E_(c.path),s=gS(e,t,c.path,c.snap,r,i,a,o))}else if(n.type===IE.MERGE){const c=n;c.source.fromUser?s=function(e,t,n,r,i,o,s){let a=t;return r.foreach(((r,c)=>{const l=__(n,r);vS(t,p_(l))&&(a=yS(e,a,l,c,i,o,s))})),r.foreach(((r,c)=>{const l=__(n,r);vS(t,p_(l))||(a=yS(e,a,l,c,i,o,s))})),a}(e,t,c.path,c.children,r,i,o):(Nh(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered(),s=ES(e,t,c.path,c.children,r,i,a,o))}else if(n.type===IE.ACK_USER_WRITE){const a=n;s=a.revert?function(e,t,n,r,i,o){let s;if(null!=sS(r,n))return t;{const a=new pS(r,t,i),c=t.eventCache.getNode();let l;if(E_(n)||".priority"===p_(n)){let n;if(t.serverCache.isFullyInitialized())n=rS(r,jE(t));else{const e=t.serverCache.getNode();Nh(e instanceof tE,"serverChildren would be complete if leaf node"),n=iS(r,e)}l=e.filter.updateFullNode(c,n,o)}else{const i=p_(n);let d=cS(r,i,t.serverCache);null==d&&t.serverCache.isCompleteForChild(i)&&(d=c.getImmediateChild(i)),l=null!=d?e.filter.updateChild(c,i,d,m_(n),a,o):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(c,i,tE.EMPTY_NODE,m_(n),a,o):c,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=rS(r,jE(t)),s.isLeafNode()&&(l=e.filter.updateFullNode(l,s,o)))}return s=t.serverCache.isFullyInitialized()||null!=sS(r,h_()),xE(t,l,s,e.filter.filtersNodes())}}(e,t,a.path,r,i,o):function(e,t,n,r,i,o,s){if(null!=sS(i,n))return t;const a=t.serverCache.isFiltered(),c=t.serverCache;if(null!=r.value){if(E_(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return gS(e,t,n,c.getNode().getChild(n),i,o,a,s);if(E_(n)){let r=new FE(null);return c.getNode().forEachChild(x_,((e,t)=>{r=r.set(new u_(e),t)})),ES(e,t,n,r,i,o,a,s)}return t}{let l=new FE(null);return r.foreach(((e,t)=>{const r=__(n,e);c.isCompleteForPath(r)&&(l=l.set(e,c.getNode().getChild(r)))})),ES(e,t,n,l,i,o,a,s)}}(e,t,a.path,a.affectedTree,r,i,o)}else{if(n.type!==IE.LISTEN_COMPLETE)throw Ch("Unknown operation type: "+n.type);s=function(e,t,n,r,i){const o=t.serverCache,s=LE(t,o.getNode(),o.isFullyInitialized()||E_(n),o.isFiltered());return mS(e,s,n,r,hS,i)}(e,t,n.path,r,o)}const c=o.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=PE(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(aE(PE(t)))}}(t,s,c),{viewCache:s,changes:c}}function mS(e,t,n,r,i,o){const s=t.eventCache;if(null!=sS(r,n))return t;{let a,c;if(E_(n))if(Nh(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=jE(t),i=iS(r,n instanceof tE?n:tE.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,o)}else{const n=rS(r,jE(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,o)}else{const l=p_(n);if(".priority"===l){Nh(1===f_(n),"Can't have a priority with additional path components");const i=s.getNode();c=t.serverCache.getNode();const o=oS(r,n,i,c);a=null!=o?e.filter.updatePriority(i,o):s.getNode()}else{const d=m_(n);let u;if(s.isCompleteForChild(l)){c=t.serverCache.getNode();const e=oS(r,n,s.getNode(),c);u=null!=e?s.getNode().getImmediateChild(l).updateChild(d,e):s.getNode().getImmediateChild(l)}else u=cS(r,l,t.serverCache);a=null!=u?e.filter.updateChild(s.getNode(),l,u,d,i,o):s.getNode()}}return xE(t,a,s.isFullyInitialized()||E_(n),e.filter.filtersNodes())}}function gS(e,t,n,r,i,o,s,a){const c=t.serverCache;let l;const d=s?e.filter:e.filter.getIndexedFilter();if(E_(n))l=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){const e=c.getNode().updateChild(n,r);l=d.updateFullNode(c.getNode(),e,null)}else{const e=p_(n);if(!c.isCompleteForPath(n)&&f_(n)>1)return t;const i=m_(n),o=c.getNode().getImmediateChild(e).updateChild(i,r);l=".priority"===e?d.updatePriority(c.getNode(),o):d.updateChild(c.getNode(),e,o,i,hS,null)}const u=LE(t,l,c.isFullyInitialized()||E_(n),d.filtersNodes());return mS(e,u,n,i,new pS(i,u,o),a)}function yS(e,t,n,r,i,o,s){const a=t.eventCache;let c,l;const d=new pS(i,t,o);if(E_(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,s),c=xE(t,l,!0,e.filter.filtersNodes());else{const i=p_(n);if(".priority"===i)l=e.filter.updatePriority(t.eventCache.getNode(),r),c=xE(t,l,a.isFullyInitialized(),a.isFiltered());else{const o=m_(n),l=a.getNode().getImmediateChild(i);let u;if(E_(o))u=r;else{const e=d.getCompleteChild(i);u=null!=e?".priority"===g_(o)&&e.getChild(v_(o)).isEmpty()?e:e.updateChild(o,r):tE.EMPTY_NODE}if(l.equals(u))c=t;else{c=xE(t,e.filter.updateChild(a.getNode(),i,u,o,d,s),a.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function vS(e,t){return e.eventCache.isCompleteForChild(t)}function _S(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function ES(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c,l=t;c=E_(n)?r:new FE(null).setTree(n,r);const d=t.serverCache.getNode();return c.children.inorderTraversal(((n,r)=>{if(d.hasChild(n)){const c=_S(0,t.serverCache.getNode().getImmediateChild(n),r);l=gS(e,l,new u_(n),c,i,o,s,a)}})),c.children.inorderTraversal(((n,r)=>{const c=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!d.hasChild(n)&&!c){const c=_S(0,t.serverCache.getNode().getImmediateChild(n),r);l=gS(e,l,new u_(n),c,i,o,s,a)}})),l}class SS{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new uE(n.getIndex()),i=function(e){return e.loadsAllData()?new uE(e.getIndex()):e.hasLimit()?new pE(e):new hE(e)}(n);this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,s=t.eventCache,a=r.updateFullNode(tE.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(tE.EMPTY_NODE,s.getNode(),null),l=new OE(a,o.isFullyInitialized(),r.filtersNodes()),d=new OE(c,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=kE(d,l),this.eventGenerator_=new ME(this.query_)}get query(){return this.query_}}function TS(e,t){const n=jE(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!E_(t)&&!n.getImmediateChild(p_(t)).isEmpty())?n.getChild(t):null}function bS(e){return 0===e.eventRegistrations_.length}function IS(e,t,n){const r=[];if(n){Nh(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function NS(e,t,n,r){t.type===IE.MERGE&&null!==t.source.queryId&&(Nh(jE(e.viewCache_),"We should always have a full cache before handling merges"),Nh(PE(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=fS(e.processor_,i,t,n,r);var s,a;return s=e.processor_,a=o.viewCache,Nh(a.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),Nh(a.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed"),Nh(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,CS(e,o.changes,o.viewCache.eventCache.getNode(),null)}function CS(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],o=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),DE(e,i,"child_removed",t,r,n),DE(e,i,"child_added",t,r,n),DE(e,i,"child_moved",o,r,n),DE(e,i,"child_changed",t,r,n),DE(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let wS,RS;class AS{constructor(){this.views=new Map}}function OS(e,t,n,r){const i=t.source.queryId;if(null!==i){const o=e.views.get(i);return Nh(null!=o,"SyncTree gave us an op for an invalid query."),NS(o,t,n,r)}{let i=[];for(const o of e.views.values())i=i.concat(NS(o,t,n,r));return i}}function MS(e,t,n,r,i){const o=t._queryIdentifier,s=e.views.get(o);if(!s){let e=rS(n,i?r:null),o=!1;e?o=!0:r instanceof tE?(e=iS(n,r),o=!1):(e=tE.EMPTY_NODE,o=!1);const s=kE(new OE(e,o,!1),new OE(r,i,!1));return new SS(t,s)}return s}function DS(e,t,n,r,i,o){const s=MS(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),function(e,t){e.eventRegistrations_.push(t)}(s,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(q_,((e,t)=>{r.push(cE(e,t))}));return n.isFullyInitialized()&&r.push(aE(n.getNode())),CS(e,r,n.getNode(),t)}(s,n)}function kS(e,t,n,r){const i=t._queryIdentifier,o=[];let s=[];const a=US(e);if("default"===i)for(const[c,l]of e.views.entries())s=s.concat(IS(l,n,r)),bS(l)&&(e.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{const t=e.views.get(i);t&&(s=s.concat(IS(t,n,r)),bS(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||o.push(t.query)))}return a&&!US(e)&&o.push(new(Nh(wS,"Reference.ts has not been loaded"),wS)(t._repo,t._path)),{removed:o,events:s}}function xS(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function LS(e,t){let n=null;for(const r of e.views.values())n=n||TS(r,t);return n}function PS(e,t){if(t._queryParams.loadsAllData())return FS(e);{const n=t._queryIdentifier;return e.views.get(n)}}function jS(e,t){return null!=PS(e,t)}function US(e){return null!=FS(e)}function FS(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let zS=1;class VS{constructor(e){this.listenProvider_=e,this.syncPointTree_=new FE(null),this.pendingWriteTree_={visibleWrites:zE.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function BS(e,t,n,r,i){return function(e,t,n,r,i){Nh(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=VE(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?QS(e,new RE({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function GS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(ZE(e.pendingWriteTree_,t)){let t=new FE(null);return null!=r.snap?t=t.set(h_(),!0):Dv(r.children,(e=>{t=t.set(new u_(e),!0)})),QS(e,new CE(r.path,t,n))}return[]}function HS(e,t,n){return QS(e,new RE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function WS(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=t._path,s=e.syncPointTree_.get(o);let a=[];if(s&&("default"===t._queryIdentifier||jS(s,t))){const c=kS(s,t,n,r);0===s.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(o));const l=c.removed;if(a=c.events,!i){const n=-1!==l.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(o,((e,t)=>US(t)));if(n&&!i){const t=e.syncPointTree_.subtree(o);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&US(t)){return[FS(t)]}{let e=[];return t&&(e=xS(t)),Dv(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,o=ZS(e,r);e.listenProvider_.startListening(iT(i),$S(e,i),o.hashFn,o.onComplete)}}}if(!i&&l.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(iT(t),n)}else l.forEach((t=>{const n=e.queryToTagMap.get(eT(t));e.listenProvider_.stopListening(iT(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=eT(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,l)}return a}function YS(e,t,n,r){const i=tT(e,r);if(null!=i){const r=nT(i),o=r.path,s=r.queryId,a=S_(o,t);return rT(e,o,new RE(NE(s),a,n))}return[]}function qS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let o=null,s=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=S_(e,i);o=o||LS(t,n),s=s||US(t)}));let a,c=e.syncPointTree_.get(i);if(c?(s=s||US(c),o=o||LS(c,h_())):(c=new AS,e.syncPointTree_=e.syncPointTree_.set(i,c)),null!=o)a=!0;else{a=!1,o=tE.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=LS(t,h_());n&&(o=o.updateImmediateChild(e,n))}))}const l=jS(c,t);if(!l&&!t._queryParams.loadsAllData()){const n=eT(t);Nh(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=zS++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let d=DS(c,t,n,XE(e.pendingWriteTree_,i),o,a);if(!l&&!s&&!r){const n=PS(c,t);d=d.concat(function(e,t,n){const r=t._path,i=$S(e,t),o=ZS(e,n),s=e.listenProvider_.startListening(iT(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)Nh(!US(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!E_(e)&&t&&US(t))return[FS(t).query];{let e=[];return t&&(e=e.concat(xS(t).map((e=>e.query)))),Dv(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(iT(r),$S(e,r))}}return s}(e,t,n))}return d}function KS(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=LS(n,S_(e,t));if(r)return r}));return nS(r,t,i,n,!0)}function QS(e,t){return JS(t,e.syncPointTree_,null,XE(e.pendingWriteTree_,h_()))}function JS(e,t,n,r){if(E_(e.path))return XS(e,t,n,r);{const i=t.get(h_());null==n&&null!=i&&(n=LS(i,h_()));let o=[];const s=p_(e.path),a=e.operationForChild(s),c=t.children.get(s);if(c&&a){const e=n?n.getImmediateChild(s):null,t=lS(r,s);o=o.concat(JS(a,c,e,t))}return i&&(o=o.concat(OS(i,e,r,n))),o}}function XS(e,t,n,r){const i=t.get(h_());null==n&&null!=i&&(n=LS(i,h_()));let o=[];return t.children.inorderTraversal(((t,i)=>{const s=n?n.getImmediateChild(t):null,a=lS(r,t),c=e.operationForChild(t);c&&(o=o.concat(XS(c,i,s,a)))})),i&&(o=o.concat(OS(i,e,r,n))),o}function ZS(e,t){const n=t.query,r=$S(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||tE.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=tT(e,n);if(r){const n=nT(r),i=n.path,o=n.queryId,s=S_(i,t);return rT(e,i,new wE(NE(o),s))}return[]}(e,n._path,r):function(e,t){return QS(e,new wE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return WS(e,n,null,r)}}}}function $S(e,t){const n=eT(t);return e.queryToTagMap.get(n)}function eT(e){return e._path.toString()+"$"+e._queryIdentifier}function tT(e,t){return e.tagToQueryMap.get(t)}function nT(e){const t=e.indexOf("$");return Nh(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new u_(e.substr(0,t))}}function rT(e,t,n){const r=e.syncPointTree_.get(t);Nh(r,"Missing sync point for query tag that we're tracking");return OS(r,n,XE(e.pendingWriteTree_,t),null)}function iT(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Nh(RS,"Reference.ts has not been loaded"),RS)(e._repo,e._path):e}class oT{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new oT(t)}node(){return this.node_}}class sT{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=__(this.path_,e);return new sT(this.syncTree_,t)}node(){return KS(this.syncTree_,this.path_)}}const aT=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},cT=function(e,t,n){return e&&"object"===typeof e?(Nh(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?lT(e[".sv"],t,n):"object"===typeof e[".sv"]?dT(e[".sv"],t):void Nh(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},lT=function(e,t,n){if("timestamp"===e)return n.timestamp;Nh(!1,"Unexpected server value: "+e)},dT=function(e,t,n){e.hasOwnProperty("increment")||Nh(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Nh(!1,"Unexpected increment value: "+r);const i=t.node();if(Nh(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!==typeof o?r:o+r},uT=function(e,t,n,r){return pT(t,new sT(n,e),r)},hT=function(e,t,n){return pT(e,new oT(t),n)};function pT(e,t,n){const r=e.getPriority().val(),i=cT(r,t.getImmediateChild(".priority"),n);let o;if(e.isLeafNode()){const r=e,o=cT(r.getValue(),t,n);return o!==r.getValue()||i!==r.getPriority().val()?new Y_(o,iE(i)):e}{const r=e;return o=r,i!==r.getPriority().val()&&(o=o.updatePriority(new Y_(i))),r.forEachChild(q_,((e,r)=>{const i=pT(r,t.getImmediateChild(e),n);i!==r&&(o=o.updateImmediateChild(e,i))})),o}}class fT{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function mT(e,t){let n=t instanceof u_?t:new u_(t),r=e,i=p_(n);for(;null!==i;){const e=tp(r.node.children,i)||{children:{},childCount:0};r=new fT(i,r,e),n=m_(n),i=p_(n)}return r}function gT(e){return e.node.value}function yT(e,t){e.node.value=t,TT(e)}function vT(e){return e.node.childCount>0}function _T(e,t){Dv(e.node.children,((n,r)=>{t(new fT(n,e,r))}))}function ET(e,t,n,r){n&&!r&&t(e),_T(e,(e=>{ET(e,t,!0,r)})),n&&r&&t(e)}function ST(e){return new u_(null===e.parent?e.name:ST(e.parent)+"/"+e.name)}function TT(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===gT(e)&&!vT(e)}(n),i=ep(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,TT(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,TT(e))}(e.parent,e.name,e)}const bT=/[\[\].#$\/\u0000-\u001F\u007F]/,IT=/[\[\].#$\u0000-\u001F\u007F]/,NT=10485760,CT=function(e){return"string"===typeof e&&0!==e.length&&!bT.test(e)},wT=function(e){return"string"===typeof e&&0!==e.length&&!IT.test(e)},RT=function(e,t,n,r){r&&void 0===t||AT(hp(e,"value"),t,n)},AT=function(e,t,n){const r=n instanceof u_?new I_(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+C_(r));if("function"===typeof t)throw new Error(e+"contains a function "+C_(r)+" with contents = "+t.toString());if(Iv(t))throw new Error(e+"contains "+t.toString()+" "+C_(r));if("string"===typeof t&&t.length>NT/3&&pp(t)>NT)throw new Error(e+"contains a string greater than "+NT+" utf8 bytes "+C_(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(Dv(t,((t,o)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!CT(t)))throw new Error(e+" contains an invalid key ("+t+") "+C_(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=pp(t),N_(e)}(r,t),AT(e,o,r),function(e){const t=e.parts_.pop();e.byteLength_-=pp(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+C_(r)+" in addition to actual children.")}},OT=function(e,t,n,r){if((!r||void 0!==n)&&!wT(n))throw new Error(hp(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},MT=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),OT(e,t,n,r)},DT=function(e,t){if(".info"===p_(t))throw new Error(e+" failed = Can't modify data under /.info/")},kT=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!CT(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),wT(e)}(n))throw new Error(hp(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class xT{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function LT(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();null===n||T_(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function PT(e,t,n){LT(e,n),UT(e,(e=>T_(e,t)))}function jT(e,t,n){LT(e,n),UT(e,(e=>b_(e,t)||b_(t,e)))}function UT(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(FT(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function FT(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();gv&&_v("event: "+n.toString()),Pv(r)}}}const zT="repo_interrupt",VT=25;class BT{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new xT,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_E(),this.transactionQueueTree_=new fT,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function GT(t,n,r){if(t.stats_=Xv(t.repoInfo_),t.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new yE(t.repoInfo_,((e,n,r,i)=>{YT(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((()=>qT(t,!0)),0);else{if("undefined"!==typeof r&&null!==r){if("object"!==typeof r)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Zh(r)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}t.persistentConnection_=new A_(t.repoInfo_,n,((e,n,r,i)=>{YT(t,e,n,r,i)}),(e=>{qT(t,e)}),(e=>{!function(e,t){Dv(t,((t,n)=>{KT(e,t,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,r),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener((e=>{t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((e=>{t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=function(e,t){const n=e.toString();return Jv[n]||(Jv[n]=t()),Jv[n]}(t.repoInfo_,(()=>new bE(t.stats_,t.server_))),t.infoData_=new vE,t.infoSyncTree_=new VS({startListening:(e,n,r,i)=>{let o=[];const s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=HS(t.infoSyncTree_,e._path,s),setTimeout((()=>{i("ok")}),0)),o},stopListening:()=>{}}),KT(t,"connected",!1),t.serverSyncTree_=new VS({startListening:(e,n,r,i)=>(t.server_.listen(e,r,n,((n,r)=>{const o=i(n,r);jT(t.eventQueue_,e._path,o)})),[]),stopListening:(e,n)=>{t.server_.unlisten(e,n)}})}function HT(e){const t=e.infoData_.getNode(new u_(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function WT(e){return aT({timestamp:HT(e)})}function YT(e,t,n,r,i){e.dataUpdateCount++;const o=new u_(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){const t=rp(n,(e=>iE(e)));s=function(e,t,n,r){const i=tT(e,r);if(i){const r=nT(i),o=r.path,s=r.queryId,a=S_(o,t),c=FE.fromObject(n);return rT(e,o,new AE(NE(s),a,c))}return[]}(e.serverSyncTree_,o,t,i)}else{const t=iE(n);s=YS(e.serverSyncTree_,o,t,i)}else if(r){const t=rp(n,(e=>iE(e)));s=function(e,t,n){const r=FE.fromObject(n);return QS(e,new AE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,t)}else{const t=iE(n);s=HS(e.serverSyncTree_,o,t)}let a=o;s.length>0&&(a=rb(e,o)),jT(e.eventQueue_,a,s)}function qT(e,t){KT(e,"connected",t),!1===t&&function(e){$T(e,"onDisconnectEvents");const t=WT(e),n=_E();SE(e.onDisconnect_,h_(),((r,i)=>{const o=uT(r,i,e.serverSyncTree_,t);EE(n,r,o)}));let r=[];SE(n,h_(),((t,n)=>{r=r.concat(HS(e.serverSyncTree_,t,n));const i=cb(e,t);rb(e,i)})),e.onDisconnect_=_E(),jT(e.eventQueue_,h_(),r)}(e)}function KT(e,t,n){const r=new u_("/.info/"+t),i=iE(n);e.infoData_.updateSnapshot(r,i);const o=HS(e.infoSyncTree_,r,i);jT(e.eventQueue_,r,o)}function QT(e){return e.nextWriteId_++}function JT(e,t,n,r,i){$T(e,"set",{path:t.toString(),value:n,priority:r});const o=WT(e),s=iE(n,r),a=KS(e.serverSyncTree_,t),c=hT(s,a,o),l=QT(e),d=BS(e.serverSyncTree_,t,c,l,!0);LT(e.eventQueue_,d),e.server_.put(t.toString(),s.val(!0),((n,r)=>{const o="ok"===n;o||bv("set at "+t+" failed: "+n);const s=GS(e.serverSyncTree_,l,!o);jT(e.eventQueue_,t,s),eb(e,i,n,r)}));const u=cb(e,t);rb(e,u),jT(e.eventQueue_,u,[])}function XT(e,t,n){let r;r=".info"===p_(t._path)?WS(e.infoSyncTree_,t,n):WS(e.serverSyncTree_,t,n),PT(e.eventQueue_,t._path,r)}function ZT(e){e.persistentConnection_&&e.persistentConnection_.interrupt(zT)}function $T(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];_v(t,...r)}function eb(e,t,n,r){t&&Pv((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const o=new Error(i);o.code=e,t(o)}}))}function tb(e,t,n){return KS(e.serverSyncTree_,t,n)||tE.EMPTY_NODE}function nb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||ab(e,t),gT(t)){const n=ob(e,t);Nh(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=tb(e,t,r);let o=i;const s=i.hash();for(let l=0;l<n.length;l++){const e=n[l];Nh(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=S_(t,e.path);o=o.updateChild(r,e.currentOutputSnapshotRaw)}const a=o.val(!0),c=t;e.server_.put(c.toString(),a,(r=>{$T(e,"transaction put response",{path:c.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(GS(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();ab(e,mT(e.transactionQueueTree_,t)),nb(e,e.transactionQueueTree_),jT(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Pv(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{bv("transaction at "+c.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}rb(e,t)}}),s)}(e,ST(t),n)}else vT(t)&&_T(t,(t=>{nb(e,t)}))}function rb(e,t){const n=ib(e,t),r=ST(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const o=t.filter((e=>0===e.status)),s=o.map((e=>e.currentWriteId));for(let c=0;c<t.length;c++){const o=t[c],l=S_(n,o.path);let d,u=!1;if(Nh(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===o.status)u=!0,d=o.abortReason,i=i.concat(GS(e.serverSyncTree_,o.currentWriteId,!0));else if(0===o.status)if(o.retryCount>=VT)u=!0,d="maxretry",i=i.concat(GS(e.serverSyncTree_,o.currentWriteId,!0));else{const n=tb(e,o.path,s);o.currentInputSnapshot=n;const r=t[c].update(n.val());if(void 0!==r){AT("transaction failed: Data returned ",r,o.path);let t=iE(r);"object"===typeof r&&null!=r&&ep(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=o.currentWriteId,c=WT(e),l=hT(t,n,c);o.currentOutputSnapshotRaw=t,o.currentOutputSnapshotResolved=l,o.currentWriteId=QT(e),s.splice(s.indexOf(a),1),i=i.concat(BS(e.serverSyncTree_,o.path,l,o.currentWriteId,o.applyLocally)),i=i.concat(GS(e.serverSyncTree_,a,!0))}else u=!0,d="nodata",i=i.concat(GS(e.serverSyncTree_,o.currentWriteId,!0))}jT(e.eventQueue_,n,i),i=[],u&&(t[c].status=2,a=t[c].unwatcher,setTimeout(a,Math.floor(0)),t[c].onComplete&&("nodata"===d?r.push((()=>t[c].onComplete(null,!1,t[c].currentInputSnapshot))):r.push((()=>t[c].onComplete(new Error(d),!1,null)))))}var a;ab(e,e.transactionQueueTree_);for(let c=0;c<r.length;c++)Pv(r[c]);nb(e,e.transactionQueueTree_)}(e,ob(e,n),r),r}function ib(e,t){let n,r=e.transactionQueueTree_;for(n=p_(t);null!==n&&void 0===gT(r);)r=mT(r,n),n=p_(t=m_(t));return r}function ob(e,t){const n=[];return sb(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function sb(e,t,n){const r=gT(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);_T(t,(t=>{sb(e,t,n)}))}function ab(e,t){const n=gT(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,yT(t,n.length>0?n:void 0)}_T(t,(t=>{ab(e,t)}))}function cb(e,t){const n=ST(ib(e,t)),r=mT(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{lb(e,t)})),lb(e,r),ET(r,(t=>{lb(e,t)})),n}function lb(e,t){const n=gT(t);if(n){const r=[];let i=[],o=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Nh(o===t-1,"All SENT items should be at beginning of queue."),o=t,n[t].status=3,n[t].abortReason="set"):(Nh(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(GS(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===o?yT(t,void 0):n.length=o+1,jT(e.eventQueue_,ST(t),i);for(let e=0;e<r.length;e++)Pv(r[e])}}const db=function(e,t){const n=ub(e),r=n.namespace;"firebase.com"===n.domain&&Tv(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Tv("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&bv("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Yv(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new u_(n.pathString)}},ub=function(t){let n="",r="",i="",o="",s="",a=!0,c="https",l=443;if("string"===typeof t){let d=t.indexOf("//");d>=0&&(c=t.substring(0,d-1),t=t.substring(d+2));let u=t.indexOf("/");-1===u&&(u=t.length);let h=t.indexOf("?");-1===h&&(h=t.length),n=t.substring(0,Math.min(u,h)),u<h&&(o=function(t){let n="";const r=t.split("/");for(let i=0;i<r.length;i++)if(r[i].length>0){let t=r[i];try{t=decodeURIComponent(t.replace(/\+/g," "))}catch(e){}n+="/"+t}return n}(t.substring(u,h)));const p=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):bv("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(t.substring(Math.min(t.length,h)));d=n.indexOf(":"),d>=0?(a="https"===c||"wss"===c,l=parseInt(n.substring(d+1),10)):d=n.length;const f=n.slice(0,d);if("localhost"===f.toLowerCase())r="localhost";else if(f.split(".").length<=2)r=f;else{const e=n.indexOf(".");i=n.substring(0,e).toLowerCase(),r=n.substring(e+1),s=i}"ns"in p&&(s=p.ns)}return{host:n,port:l,domain:r,subdomain:i,secure:a,scheme:c,pathString:o,namespace:s}},hb="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class pb{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Zh(this.snapshot.exportVal())}}class fb{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class mb{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Nh(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class gb{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return E_(this._path)?null:g_(this._path)}get ref(){return new yb(this._repo,this._path)}get _queryIdentifier(){const e=gE(this._queryParams),t=Ov(e);return"{}"===t?"default":t}get _queryObject(){return gE(this._queryParams)}isEqual(e){if(!((e=fp(e))instanceof gb))return!1;const t=this._repo===e._repo,n=T_(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class yb extends gb{constructor(e,t){super(e,t,new fE,!1)}get parent(){const e=v_(this._path);return null===e?null:new yb(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class vb{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new u_(e),n=Eb(this.ref,e);return new vb(this._node.getChild(t),n,q_)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new vb(n,Eb(this.ref,t),q_))))}hasChild(e){const t=new u_(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function _b(e,t){return(e=fp(e))._checkNotDeleted("ref"),void 0!==t?Eb(e._root,t):e._root}function Eb(e,t){return null===p_((e=fp(e))._path)?MT("child","path",t,!1):OT("child","path",t,!1),new yb(e._repo,__(e._path,t))}function Sb(e,t){e=fp(e),DT("set",e._path),RT("set",t,e._path,!1);const n=new Vh;return JT(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}class Tb{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new pb("value",this,new vb(e.snapshotNode,new yb(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new fb(this,e,t):null}matches(e){return e instanceof Tb&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class bb{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new fb(this,e,t):null}createEvent(e,t){Nh(null!=e.childName,"Child events should have a childName.");const n=Eb(new yb(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new pb(e.type,this,new vb(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof bb&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function Ib(e,t,n,r,i){let o;if("object"===typeof r&&(o=void 0,i=r),"function"===typeof r&&(o=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{XT(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const s=new mb(n,o||void 0),a="value"===t?new Tb(s):new bb(t,s);return function(e,t,n){let r;r=".info"===p_(t._path)?qS(e.infoSyncTree_,t,n):qS(e.serverSyncTree_,t,n),PT(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>XT(e._repo,e,a)}function Nb(e,t,n,r){return Ib(e,"value",t,n,r)}!function(e){Nh(!wS,"__referenceConstructor has already been defined"),wS=e}(yb),function(e){Nh(!RS,"__referenceConstructor has already been defined"),RS=e}(yb);const Cb="FIREBASE_DATABASE_EMULATOR_HOST",wb={};let Rb=!1;function Ab(e,t,n,r,i){let o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||Tv("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_v("Using default host for project ",e.options.projectId),o="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let s,a,c=db(o,i),l=c.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[Cb]),a?(s=!0,o="http://".concat(a,"?ns=").concat(l.namespace),c=db(o,i),l=c.repoInfo):s=!c.repoInfo.secure;const d=i&&s?new zv(zv.OWNER):new Fv(e.name,e.options,t);kT("Invalid Firebase Database URL",c),E_(c.path)||Tv("Database URL must point to the root of a Firebase Database (not including a child path).");const u=function(e,t,n,r){let i=wb[t.name];i||(i={},wb[t.name]=i);let o=i[e.toURLString()];o&&Tv("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new BT(e,Rb,n,r),i[e.toURLString()]=o,o}(l,e,d,new Uv(e.name,n));return new Ob(u,e)}class Ob{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(GT(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new yb(this._repo,h_())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=wb[t];n&&n[e.key]===e||Tv("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),ZT(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Tv("Cannot call "+e+" on a deleted database.")}}A_.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},A_.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){sv(Rf),If(new mp("database",((e,t)=>{let{instanceIdentifier:n}=t;return Ab(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Mf(rv,iv,e),Mf(rv,iv,"esm2017")}();var Mb,Db="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},kb={},xb=xb||{},Lb=Db||self;function Pb(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function jb(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ub="closure_uid_"+(1e9*Math.random()>>>0),Fb=0;function zb(e,t,n){return e.call.apply(e.bind,arguments)}function Vb(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Bb(e,t,n){return(Bb=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?zb:Vb).apply(null,arguments)}function Gb(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Hb(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function Wb(){this.s=this.s,this.o=this.o}Wb.prototype.s=!1,Wb.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Ub)&&e[Ub]||(e[Ub]=++Fb))},Wb.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Yb=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function qb(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Kb(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Pb(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Qb(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Qb.prototype.h=function(){this.defaultPrevented=!0};var Jb=function(){if(!Lb.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};Lb.addEventListener("test",e,t),Lb.removeEventListener("test",e,t)}catch(n){}return e}();function Xb(e){return/^[\s\xa0]*$/.test(e)}function Zb(){var e=Lb.navigator;return e&&(e=e.userAgent)?e:""}function $b(e){return-1!=Zb().indexOf(e)}function eI(e){return eI[" "](e),e}eI[" "]=function(){};var tI,nI,rI=$b("Opera"),iI=$b("Trident")||$b("MSIE"),oI=$b("Edge"),sI=oI||iI,aI=$b("Gecko")&&!(-1!=Zb().toLowerCase().indexOf("webkit")&&!$b("Edge"))&&!($b("Trident")||$b("MSIE"))&&!$b("Edge"),cI=-1!=Zb().toLowerCase().indexOf("webkit")&&!$b("Edge");function lI(){var e=Lb.document;return e?e.documentMode:void 0}e:{var dI="",uI=function(){var e=Zb();return aI?/rv:([^\);]+)(\)|;)/.exec(e):oI?/Edge\/([\d\.]+)/.exec(e):iI?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):cI?/WebKit\/(\S+)/.exec(e):rI?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(uI&&(dI=uI?uI[1]:""),iI){var hI=lI();if(null!=hI&&hI>parseFloat(dI)){tI=String(hI);break e}}tI=dI}if(Lb.document&&iI){var pI=lI();nI=pI||(parseInt(tI,10)||void 0)}else nI=void 0;var fI=nI;function mI(e,t){if(Qb.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(aI){e:{try{eI(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:gI[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&mI.$.h.call(this)}}Hb(mI,Qb);var gI={2:"touch",3:"pen",4:"mouse"};mI.prototype.h=function(){mI.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var yI="closure_listenable_"+(1e6*Math.random()|0),vI=0;function _I(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++vI,this.fa=this.ia=!1}function EI(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function SI(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function TI(e){const t={};for(const n in e)t[n]=e[n];return t}const bI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function II(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<bI.length;t++)n=bI[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function NI(e){this.src=e,this.g={},this.h=0}function CI(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Yb(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(EI(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function wI(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}NI.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=wI(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new _I(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var RI="closure_lm_"+(1e6*Math.random()|0),AI={};function OI(e,t,n,r,i){if(r&&r.once)return DI(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)OI(e,t[o],n,r,i);return null}return n=FI(n),e&&e[yI]?e.O(t,n,jb(r)?!!r.capture:!!r,i):MI(e,t,n,!1,r,i)}function MI(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=jb(i)?!!i.capture:!!i,a=jI(e);if(a||(e[RI]=a=new NI(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=PI;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Jb||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(LI(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function DI(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)DI(e,t[o],n,r,i);return null}return n=FI(n),e&&e[yI]?e.P(t,n,jb(r)?!!r.capture:!!r,i):MI(e,t,n,!0,r,i)}function kI(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)kI(e,t[o],n,r,i);else r=jb(r)?!!r.capture:!!r,n=FI(n),e&&e[yI]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=wI(o=e.g[t],n,r,i))&&(EI(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=jI(e))&&(t=e.g[t.toString()],e=-1,t&&(e=wI(t,n,r,i)),(n=-1<e?t[e]:null)&&xI(n))}function xI(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[yI])CI(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(LI(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=jI(t))?(CI(n,e),0==n.h&&(n.src=null,t[RI]=null)):EI(e)}}}function LI(e){return e in AI?AI[e]:AI[e]="on"+e}function PI(e,t){if(e.fa)e=!0;else{t=new mI(t,this);var n=e.listener,r=e.la||e.src;e.ia&&xI(e),e=n.call(r,t)}return e}function jI(e){return(e=e[RI])instanceof NI?e:null}var UI="__closure_events_fn_"+(1e9*Math.random()>>>0);function FI(e){return"function"===typeof e?e:(e[UI]||(e[UI]=function(t){return e.handleEvent(t)}),e[UI])}function zI(){Wb.call(this),this.i=new NI(this),this.S=this,this.J=null}function VI(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Qb(t,e);else if(t instanceof Qb)t.target=t.target||e;else{var i=t;II(t=new Qb(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=BI(s,r,!0,t)&&i}if(i=BI(s=t.g=e,r,!0,t)&&i,i=BI(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=BI(s=t.g=n[o],r,!1,t)&&i}function BI(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,c=s.la||s.src;s.ia&&CI(e.i,s),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}Hb(zI,Wb),zI.prototype[yI]=!0,zI.prototype.removeEventListener=function(e,t,n,r){kI(this,e,t,n,r)},zI.prototype.N=function(){if(zI.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)EI(n[r]);delete t.g[e],t.h--}}this.J=null},zI.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},zI.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var GI=Lb.JSON.stringify;function HI(){var e=XI;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var WI=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new YI),(e=>e.reset()));class YI{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function qI(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function KI(e){Lb.setTimeout((()=>{throw e}),0)}let QI,JI=!1,XI=new class{constructor(){this.h=this.g=null}add(e,t){const n=WI.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},ZI=()=>{const e=Lb.Promise.resolve(void 0);QI=()=>{e.then($I)}};var $I=()=>{for(var e;e=HI();){try{e.h.call(e.g)}catch(n){KI(n)}var t=WI;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}JI=!1};function eN(e,t){zI.call(this),this.h=e||1,this.g=t||Lb,this.j=Bb(this.qb,this),this.l=Date.now()}function tN(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function nN(e,t,n){if("function"===typeof e)n&&(e=Bb(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Bb(e.handleEvent,e)}return 2147483647<Number(t)?-1:Lb.setTimeout(e,t||0)}function rN(e){e.g=nN((()=>{e.g=null,e.i&&(e.i=!1,rN(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Hb(eN,zI),(Mb=eN.prototype).ga=!1,Mb.T=null,Mb.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),VI(this,"tick"),this.ga&&(tN(this),this.start()))}},Mb.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Mb.N=function(){eN.$.N.call(this),tN(this),delete this.g};class iN extends Wb{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:rN(this)}N(){super.N(),this.g&&(Lb.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oN(e){Wb.call(this),this.h=e,this.g={}}Hb(oN,Wb);var sN=[];function aN(e,t,n,r){Array.isArray(n)||(n&&(sN[0]=n.toString()),n=sN);for(var i=0;i<n.length;i++){var o=OI(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function cN(e){SI(e.g,(function(e,t){this.g.hasOwnProperty(t)&&xI(e)}),e),e.g={}}function lN(){this.g=!0}function dN(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return GI(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}oN.prototype.N=function(){oN.$.N.call(this),cN(this)},oN.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},lN.prototype.Ea=function(){this.g=!1},lN.prototype.info=function(){};var uN={},hN=null;function pN(){return hN=hN||new zI}function fN(e){Qb.call(this,uN.Ta,e)}function mN(e){const t=pN();VI(t,new fN(t))}function gN(e,t){Qb.call(this,uN.STAT_EVENT,e),this.stat=t}function yN(e){const t=pN();VI(t,new gN(t,e))}function vN(e,t){Qb.call(this,uN.Ua,e),this.size=t}function _N(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Lb.setTimeout((function(){e()}),t)}uN.Ta="serverreachability",Hb(fN,Qb),uN.STAT_EVENT="statevent",Hb(gN,Qb),uN.Ua="timingevent",Hb(vN,Qb);var EN={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},SN={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function TN(){}function bN(e){return e.h||(e.h=e.i())}function IN(){}TN.prototype.h=null;var NN,CN={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function wN(){Qb.call(this,"d")}function RN(){Qb.call(this,"c")}function AN(){}function ON(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new oN(this),this.P=DN,e=sI?125:void 0,this.V=new eN(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new MN}function MN(){this.i=null,this.g="",this.h=!1}Hb(wN,Qb),Hb(RN,Qb),Hb(AN,TN),AN.prototype.g=function(){return new XMLHttpRequest},AN.prototype.i=function(){return{}},NN=new AN;var DN=45e3,kN={},xN={};function LN(e,t,n){e.L=1,e.A=eC(QN(t)),e.u=n,e.S=!0,PN(e,null)}function PN(e,t){e.G=Date.now(),zN(e),e.B=QN(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),pC(n.i,"t",r),e.o=0,n=e.l.J,e.h=new MN,e.g=fw(e.l,n?t:null,!e.u),0<e.O&&(e.M=new iN(Bb(e.Pa,e,e.g),e.O)),aN(e.U,e.g,"readystatechange",e.nb),t=e.I?TI(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),mN(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var d=l[0];l=l[1];var u=d.split("_");s=2<=u.length&&"type"==u[1]?s+(d+"=")+l+"&":s+(d+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function jN(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function UN(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=FN(e,n),r==xN){4==t&&(e.s=4,yN(14),i=!1),dN(e.j,e.m,null,"[Incomplete Response]");break}if(r==kN){e.s=4,yN(15),dN(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}dN(e.j,e.m,r,null),WN(e,r)}jN(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,yN(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),sw(t),t.M=!0,yN(11))):(dN(e.j,e.m,n,"[Invalid Chunked Response]"),HN(e),GN(e))}function FN(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?xN:(n=Number(t.substring(n,r)),isNaN(n)?kN:(r+=1)+n>t.length?xN:(t=t.slice(r,r+n),e.o=r+n,t))}function zN(e){e.Y=Date.now()+e.P,VN(e,e.P)}function VN(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=_N(Bb(e.lb,e),t)}function BN(e){e.C&&(Lb.clearTimeout(e.C),e.C=null)}function GN(e){0==e.l.H||e.J||lw(e.l,e)}function HN(e){BN(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,tN(e.V),cN(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function WN(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||EC(n.i,e)))if(!e.K&&EC(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(Gc){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;cw(n),ZC(n)}ow(n),yN(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=_N(Bb(n.ib,n),6e3));if(1>=_C(n.i)&&n.oa){try{n.oa()}catch(Gc){}n.oa=void 0}}else uw(n,11)}else if((e.K||n.g==e)&&cw(n),!Xb(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=l[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const d=l[5];null!=d&&"number"===typeof d&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const u=e.g;if(u){const e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(SC(o,o.h),o.h=null))}if(r.F){const e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,$N(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=pw(r,r.J?r.pa:null,r.Y),s.K){TC(r.i,s);var a=s,c=r.L;c&&a.setTimeout(c),a.C&&(BN(a),zN(a)),r.g=s}else iw(r);0<n.j.length&&ew(n)}else"stop"!=l[0]&&"close"!=l[0]||uw(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?uw(n,7):XC(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}mN()}catch(Gc){}}function YN(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Pb(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Pb(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Pb(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(Mb=ON.prototype).setTimeout=function(e){this.P=e},Mb.nb=function(e){e=e.target;const t=this.M;t&&3==WC(e)?t.l():this.Pa(e)},Mb.Pa=function(e){try{if(e==this.g)e:{const d=WC(this.g);var t=this.g.Ia();this.g.da();if(!(3>d)&&(3!=d||sI||this.g&&(this.h.h||this.g.ja()||YC(this.g)))){this.J||4!=d||7==t||mN(),BN(this);var n=this.g.da();this.ca=n;t:if(jN(this)){var r=YC(this.g);e="";var i=r.length,o=4==WC(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){HN(this),GN(this);var s="";break t}this.h.i=new Lb.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.length=0,this.h.g+=e,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.j,this.v,this.B,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xb(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,yN(12),HN(this),GN(this);break e}dN(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,WN(this,n)}this.S?(UN(this,d,s),sI&&this.i&&3==d&&(aN(this.U,this.V,"tick",this.mb),this.V.start())):(dN(this.j,this.m,s,null),WN(this,s)),4==d&&HN(this),this.i&&!this.J&&(4==d?lw(this.l,this):(this.i=!1,zN(this)))}else(function(e){const t={};e=(e.g&&2<=WC(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Xb(e[r]))continue;var n=qI(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,yN(12)):(this.s=0,yN(13)),HN(this),GN(this)}}}catch(zc){}},Mb.mb=function(){if(this.g){var e=WC(this.g),t=this.g.ja();this.o<t.length&&(BN(this),UN(this,e,t),this.i&&4!=e&&zN(this))}},Mb.cancel=function(){this.J=!0,HN(this)},Mb.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(mN(),yN(17)),HN(this),this.s=2,GN(this)):VN(this,this.Y-e)};var qN=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function KN(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof KN){this.h=e.h,JN(this,e.j),this.s=e.s,this.g=e.g,XN(this,e.m),this.l=e.l;var t=e.i,n=new lC;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ZN(this,n),this.o=e.o}else e&&(t=String(e).match(qN))?(this.h=!1,JN(this,t[1]||"",!0),this.s=tC(t[2]||""),this.g=tC(t[3]||"",!0),XN(this,t[4]),this.l=tC(t[5]||"",!0),ZN(this,t[6]||"",!0),this.o=tC(t[7]||"")):(this.h=!1,this.i=new lC(null,this.h))}function QN(e){return new KN(e)}function JN(e,t,n){e.j=n?tC(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function XN(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ZN(e,t,n){t instanceof lC?(e.i=t,function(e,t){t&&!e.j&&(dC(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(uC(this,t),pC(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=nC(t,aC)),e.i=new lC(t,e.h))}function $N(e,t,n){e.i.set(t,n)}function eC(e){return $N(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function tC(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function nC(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,rC),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function rC(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}KN.prototype.toString=function(){var e=[],t=this.j;t&&e.push(nC(t,iC,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(nC(t,iC,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(nC(n,"/"==n.charAt(0)?sC:oC,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",nC(n,cC)),e.join("")};var iC=/[#\/\?@]/g,oC=/[#\?:]/g,sC=/[#\?]/g,aC=/[#\?@]/g,cC=/#/g;function lC(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function dC(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function uC(e,t){dC(e),t=fC(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function hC(e,t){return dC(e),t=fC(e,t),e.g.has(t)}function pC(e,t,n){uC(e,t),0<n.length&&(e.i=null,e.g.set(fC(e,t),qb(n)),e.h+=n.length)}function fC(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Mb=lC.prototype).add=function(e,t){dC(this),this.i=null,e=fC(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Mb.forEach=function(e,t){dC(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Mb.ta=function(){dC(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Mb.Z=function(e){dC(this);let t=[];if("string"===typeof e)hC(this,e)&&(t=t.concat(this.g.get(fC(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Mb.set=function(e,t){return dC(this),this.i=null,hC(this,e=fC(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Mb.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Mb.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};var mC=class{constructor(e,t){this.g=e,this.map=t}};function gC(e){this.l=e||yC,Lb.PerformanceNavigationTiming?e=0<(e=Lb.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Lb.g&&Lb.g.Ka&&Lb.g.Ka()&&Lb.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var yC=10;function vC(e){return!!e.h||!!e.g&&e.g.size>=e.j}function _C(e){return e.h?1:e.g?e.g.size:0}function EC(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function SC(e,t){e.g?e.g.add(t):e.h=t}function TC(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function bC(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return qb(e.i)}gC.prototype.cancel=function(){if(this.i=bC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var IC,NC=class{stringify(e){return Lb.JSON.stringify(e,void 0)}parse(e){return Lb.JSON.parse(e,void 0)}};function CC(){this.g=new NC}function wC(t,n,r){const i=r||"";try{YN(t,(function(e,t){let r=e;jb(e)&&(r=GI(e)),n.push(i+t+"="+encodeURIComponent(r))}))}catch(e){throw n.push(i+"type="+encodeURIComponent("_badmap")),e}}function RC(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function AC(e){this.l=e.ec||null,this.j=e.ob||!1}function OC(e,t){zI.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=MC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Hb(AC,TN),AC.prototype.g=function(){return new OC(this.l,this.j)},AC.prototype.i=(IC={},function(){return IC}),Hb(OC,zI);var MC=0;function DC(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function kC(e){e.readyState=4,e.l=null,e.j=null,e.A=null,xC(e)}function xC(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Mb=OC.prototype).open=function(e,t){if(this.readyState!=MC)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,xC(this)},Mb.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Lb).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Mb.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,kC(this)),this.readyState=MC},Mb.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,xC(this)),this.g&&(this.readyState=3,xC(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Lb.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;DC(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Mb.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?kC(this):xC(this),3==this.readyState&&DC(this)}},Mb.Za=function(e){this.g&&(this.response=this.responseText=e,kC(this))},Mb.Ya=function(e){this.g&&(this.response=e,kC(this))},Mb.ka=function(){this.g&&kC(this)},Mb.setRequestHeader=function(e,t){this.v.append(e,t)},Mb.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Mb.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(OC.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var LC=Lb.JSON.parse;function PC(e){zI.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=jC,this.L=this.M=!1}Hb(PC,zI);var jC="",UC=/^https?$/i,FC=["POST","PUT"];function zC(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,VC(e),GC(e)}function VC(e){e.F||(e.F=!0,VI(e,"complete"),VI(e,"error"))}function BC(e){if(e.h&&"undefined"!=typeof xb&&(!e.C[1]||4!=WC(e)||2!=e.da()))if(e.v&&4==WC(e))nN(e.La,0,e);else if(VI(e,"readystatechange"),4==WC(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(qN)[1]||null;!i&&Lb.self&&Lb.self.location&&(i=Lb.self.location.protocol.slice(0,-1)),r=!UC.test(i?i.toLowerCase():"")}n=r}if(n)VI(e,"complete"),VI(e,"success");else{e.m=6;try{var o=2<WC(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",VC(e)}}finally{GC(e)}}}function GC(t,n){if(t.g){HC(t);const r=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,n||VI(t,"ready");try{r.onreadystatechange=i}catch(e){}}}function HC(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Lb.clearTimeout(e.A),e.A=null)}function WC(e){return e.g?e.g.readyState:0}function YC(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case jC:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Xc){return null}}function qC(e){let t="";return SI(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function KC(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=qC(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):$N(e,t,n))}function QC(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function JC(e){this.Ga=0,this.j=[],this.l=new lN,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=QC("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=QC("baseRetryDelayMs",5e3,e),this.hb=QC("retryDelaySeedMs",1e4,e),this.eb=QC("forwardChannelMaxRetries",2,e),this.xa=QC("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new gC(e&&e.concurrentRequestLimit),this.Ja=new CC,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function XC(e){if($C(e),3==e.H){var t=e.W++,n=QN(e.I);if($N(n,"SID",e.K),$N(n,"RID",t),$N(n,"TYPE","terminate"),nw(e,n),(t=new ON(e,e.l,t)).L=2,t.A=eC(QN(n)),n=!1,Lb.navigator&&Lb.navigator.sendBeacon)try{n=Lb.navigator.sendBeacon(t.A.toString(),"")}catch(Vc){}!n&&Lb.Image&&((new Image).src=t.A,n=!0),n||(t.g=fw(t.l,null),t.g.ha(t.A)),t.G=Date.now(),zN(t)}hw(e)}function ZC(e){e.g&&(sw(e),e.g.cancel(),e.g=null)}function $C(e){ZC(e),e.u&&(Lb.clearTimeout(e.u),e.u=null),cw(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Lb.clearTimeout(e.m),e.m=null)}function ew(e){if(!vC(e.i)&&!e.m){e.m=!0;var t=e.Na;QI||ZI(),JI||(QI(),JI=!0),XI.add(t,e),e.C=0}}function tw(e,t){var n;n=t?t.m:e.W++;const r=QN(e.I);$N(r,"SID",e.K),$N(r,"RID",n),$N(r,"AID",e.V),nw(e,r),e.o&&e.s&&KC(r,e.o,e.s),n=new ON(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=rw(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),SC(e.i,n),LN(n,r,t)}function nw(e,t){e.na&&SI(e.na,(function(e,n){$N(t,n,e)})),e.h&&YN({},(function(e,n){$N(t,n,e)}))}function rw(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Bb(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=i[s].g;const a=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),o=!1;else try{wC(a,e,"req"+n+"_")}catch(el){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function iw(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;QI||ZI(),JI||(QI(),JI=!0),XI.add(t,e),e.A=0}}function ow(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=_N(Bb(e.Ma,e),dw(e,e.A)),e.A++,!0)}function sw(e){null!=e.B&&(Lb.clearTimeout(e.B),e.B=null)}function aw(e){e.g=new ON(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=QN(e.wa);$N(t,"RID","rpc"),$N(t,"SID",e.K),$N(t,"AID",e.V),$N(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&$N(t,"TO",e.qa),$N(t,"TYPE","xmlhttp"),nw(e,t),e.o&&e.s&&KC(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=eC(QN(t)),n.u=null,n.S=!0,PN(n,e)}function cw(e){null!=e.v&&(Lb.clearTimeout(e.v),e.v=null)}function lw(e,t){var n=null;if(e.g==t){cw(e),sw(e),e.g=null;var r=2}else{if(!EC(e.i,t))return;n=t.F,TC(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;VI(r=pN(),new vN(r,n)),ew(e)}else iw(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(_C(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=_N(Bb(e.Na,e,t),dw(e,e.C)),e.C++,!0))}(e,t)||2==r&&ow(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:uw(e,5);break;case 4:uw(e,10);break;case 3:uw(e,6);break;default:uw(e,2)}}function dw(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function uw(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Bb(e.pb,e);n||(n=new KN("//www.google.com/images/cleardot.gif"),Lb.location&&"http"==Lb.location.protocol||JN(n,"https"),eC(n)),function(e,t){const n=new lN;if(Lb.Image){const r=new Image;r.onload=Gb(RC,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Gb(RC,n,r,"TestLoadImage: error",!1,t),r.onabort=Gb(RC,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Gb(RC,n,r,"TestLoadImage: timeout",!1,t),Lb.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else yN(2);e.H=0,e.h&&e.h.za(t),hw(e),$C(e)}function hw(e){if(e.H=0,e.ma=[],e.h){const t=bC(e.i);0==t.length&&0==e.j.length||(Kb(e.ma,t),Kb(e.ma,e.j),e.i.i.length=0,qb(e.j),e.j.length=0),e.h.ya()}}function pw(e,t,n){var r=n instanceof KN?QN(n):new KN(n);if(""!=r.g)t&&(r.g=t+"."+r.g),XN(r,r.m);else{var i=Lb.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new KN(null);r&&JN(o,r),t&&(o.g=t),i&&XN(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&$N(r,n,t),$N(r,"VER",e.ra),nw(e,r),r}function fw(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new PC(new AC({ob:n})):new PC(e.va)).Oa(e.J),t}function mw(){}function gw(){if(iI&&!(10<=Number(fI)))throw Error("Environmental error: no available transport.")}function yw(e,t){zI.call(this),this.g=new JC(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Xb(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Xb(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ew(this)}function vw(e){wN.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function _w(){RN.call(this),this.status=1}function Ew(e){this.g=e}function Sw(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Tw(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function bw(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(Mb=PC.prototype).Oa=function(e){this.M=e},Mb.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():NN.g(),this.C=this.u?bN(this.u):bN(NN),this.g.onreadystatechange=Bb(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){return void zC(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Lb.FormData&&e instanceof Lb.FormData,!(0<=Yb(FC,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{HC(this),0<this.B&&((this.L=function(e){return iI&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bb(this.ua,this)):this.A=nN(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){zC(this,o)}},Mb.ua=function(){"undefined"!=typeof xb&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,VI(this,"timeout"),this.abort(8))},Mb.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,VI(this,"complete"),VI(this,"abort"),GC(this))},Mb.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),GC(this,!0)),PC.$.N.call(this)},Mb.La=function(){this.s||(this.G||this.v||this.l?BC(this):this.kb())},Mb.kb=function(){BC(this)},Mb.isActive=function(){return!!this.g},Mb.da=function(){try{return 2<WC(this)?this.g.status:-1}catch(IC){return-1}},Mb.ja=function(){try{return this.g?this.g.responseText:""}catch(IC){return""}},Mb.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),LC(t)}},Mb.Ia=function(){return this.m},Mb.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Mb=JC.prototype).ra=8,Mb.H=1,Mb.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new ON(this,this.l,e);let o=this.s;if(this.U&&(o?(o=TI(o),II(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=rw(this,i,t),$N(n=QN(this.I),"RID",e),$N(n,"CVER",22),this.F&&$N(n,"X-HTTP-Session-Id",this.F),nw(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(qC(o)))+"&"+t:this.o&&KC(n,this.o,o)),SC(this.i,i),this.bb&&$N(n,"TYPE","init"),this.P?($N(n,"$req",t),$N(n,"SID","null"),i.aa=!0,LN(i,n,null)):LN(i,n,t),this.H=2}}else 3==this.H&&(e?tw(this,e):0==this.j.length||vC(this.i)||tw(this))},Mb.Ma=function(){if(this.u=null,aw(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=_N(Bb(this.jb,this),e)}},Mb.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,yN(10),ZC(this),aw(this))},Mb.ib=function(){null!=this.v&&(this.v=null,ZC(this),ow(this),yN(19))},Mb.pb=function(e){e?(this.l.info("Successfully pinged google.com"),yN(2)):(this.l.info("Failed to ping google.com"),yN(1))},Mb.isActive=function(){return!!this.h&&this.h.isActive(this)},(Mb=mw.prototype).Ba=function(){},Mb.Aa=function(){},Mb.za=function(){},Mb.ya=function(){},Mb.isActive=function(){return!0},Mb.Va=function(){},gw.prototype.g=function(e,t){return new yw(e,t)},Hb(yw,zI),yw.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;yN(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=pw(e,null,e.Y),ew(e)},yw.prototype.close=function(){XC(this.g)},yw.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=GI(e),e=n);t.j.push(new mC(t.fb++,e)),3==t.H&&ew(t)},yw.prototype.N=function(){this.g.h=null,delete this.j,XC(this.g),delete this.g,yw.$.N.call(this)},Hb(vw,wN),Hb(_w,RN),Hb(Ew,mw),Ew.prototype.Ba=function(){VI(this.g,"a")},Ew.prototype.Aa=function(e){VI(this.g,new vw(e))},Ew.prototype.za=function(e){VI(this.g,new _w)},Ew.prototype.ya=function(){VI(this.g,"b")},Hb(Sw,(function(){this.blockSize=-1})),Sw.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Sw.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)Tw(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){Tw(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){Tw(this,r),i=0;break}}this.h=i,this.i+=t},Sw.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Iw={};function Nw(e){return-128<=e&&128>e?function(e,t){var n=Iw;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new bw([0|e],0>e?-1:0)})):new bw([0|e],0>e?-1:0)}function Cw(e){if(isNaN(e)||!isFinite(e))return Rw;if(0>e)return kw(Cw(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=ww;return new bw(t,0)}var ww=4294967296,Rw=Nw(0),Aw=Nw(1),Ow=Nw(16777216);function Mw(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Dw(e){return-1==e.h}function kw(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new bw(n,~e.h).add(Aw)}function xw(e,t){return e.add(kw(t))}function Lw(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Pw(e,t){this.g=e,this.h=t}function jw(e,t){if(Mw(t))throw Error("division by zero");if(Mw(e))return new Pw(Rw,Rw);if(Dw(e))return t=jw(kw(e),t),new Pw(kw(t.g),kw(t.h));if(Dw(t))return t=jw(e,kw(t)),new Pw(kw(t.g),t.h);if(30<e.g.length){if(Dw(e)||Dw(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Aw,r=t;0>=r.X(e);)n=Uw(n),r=Uw(r);var i=Fw(n,1),o=Fw(r,1);for(r=Fw(r,2),n=Fw(n,2);!Mw(r);){var s=o.add(r);0>=s.X(e)&&(i=i.add(n),o=s),r=Fw(r,1),n=Fw(n,1)}return t=xw(e,i.R(t)),new Pw(i,t)}for(i=Rw;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=Cw(n)).R(t);Dw(s)||0<s.X(e);)s=(o=Cw(n-=r)).R(t);Mw(o)&&(o=Aw),i=i.add(o),e=xw(e,s)}return new Pw(i,e)}function Uw(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new bw(n,e.h)}function Fw(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new bw(i,e.h)}(Mb=bw.prototype).ea=function(){if(Dw(this))return-kw(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:ww+r)*t,t*=ww}return e},Mb.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Mw(this))return"0";if(Dw(this))return"-"+kw(this).toString(e);for(var t=Cw(Math.pow(e,6)),n=this,r="";;){var i=jw(n,t).g,o=((0<(n=xw(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Mw(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},Mb.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Mb.X=function(e){return Dw(e=xw(this,e))?-1:Mw(e)?0:1},Mb.abs=function(){return Dw(this)?kw(this):this},Mb.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new bw(n,-2147483648&n[n.length-1]?-1:0)},Mb.R=function(e){if(Mw(this)||Mw(e))return Rw;if(Dw(this))return Dw(e)?kw(this).R(kw(e)):kw(kw(this).R(e));if(Dw(e))return kw(this.R(kw(e)));if(0>this.X(Ow)&&0>e.X(Ow))return Cw(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=s*c,Lw(n,2*r+2*i),n[2*r+2*i+1]+=o*c,Lw(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Lw(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Lw(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new bw(n,0)},Mb.gb=function(e){return jw(this,e).h},Mb.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new bw(n,this.h&e.h)},Mb.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new bw(n,this.h|e.h)},Mb.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new bw(n,this.h^e.h)},gw.prototype.createWebChannel=gw.prototype.g,yw.prototype.send=yw.prototype.u,yw.prototype.open=yw.prototype.m,yw.prototype.close=yw.prototype.close,EN.NO_ERROR=0,EN.TIMEOUT=8,EN.HTTP_ERROR=6,SN.COMPLETE="complete",IN.EventType=CN,CN.OPEN="a",CN.CLOSE="b",CN.ERROR="c",CN.MESSAGE="d",zI.prototype.listen=zI.prototype.O,PC.prototype.listenOnce=PC.prototype.P,PC.prototype.getLastError=PC.prototype.Sa,PC.prototype.getLastErrorCode=PC.prototype.Ia,PC.prototype.getStatus=PC.prototype.da,PC.prototype.getResponseJson=PC.prototype.Wa,PC.prototype.getResponseText=PC.prototype.ja,PC.prototype.send=PC.prototype.ha,PC.prototype.setWithCredentials=PC.prototype.Oa,Sw.prototype.digest=Sw.prototype.l,Sw.prototype.reset=Sw.prototype.reset,Sw.prototype.update=Sw.prototype.j,bw.prototype.add=bw.prototype.add,bw.prototype.multiply=bw.prototype.R,bw.prototype.modulo=bw.prototype.gb,bw.prototype.compare=bw.prototype.X,bw.prototype.toNumber=bw.prototype.ea,bw.prototype.toString=bw.prototype.toString,bw.prototype.getBits=bw.prototype.D,bw.fromNumber=Cw,bw.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return kw(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Cw(Math.pow(n,8)),i=Rw,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+s),n);8>s?(s=Cw(Math.pow(n,s)),i=i.R(s).add(Cw(a))):i=(i=i.R(r)).add(Cw(a))}return i};kb.createWebChannelTransport=function(){return new gw},kb.getStatEventTarget=function(){return pN()},kb.ErrorCode=EN,kb.EventType=SN,kb.Event=uN,kb.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},kb.FetchXmlHttpFactory=AC,kb.WebChannel=IN,kb.XhrIo=PC,kb.Md5=Sw;var zw=kb.Integer=bw;const Vw="@firebase/firestore";class Bw{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bw.UNAUTHENTICATED=new Bw(null),Bw.GOOGLE_CREDENTIALS=new Bw("google-credentials-uid"),Bw.FIRST_PARTY=new Bw("first-party-uid"),Bw.MOCK_USER=new Bw("mock-user");let Gw="10.9.0";const Hw=new Cp("@firebase/firestore");function Ww(e){if(Hw.logLevel<=Sp.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Kw);Hw.debug("Firestore (".concat(Gw,"): ").concat(e),...i)}}function Yw(e){if(Hw.logLevel<=Sp.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Kw);Hw.error("Firestore (".concat(Gw,"): ").concat(e),...i)}}function qw(e){if(Hw.logLevel<=Sp.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Kw);Hw.warn("Firestore (".concat(Gw,"): ").concat(e),...i)}}function Kw(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Qw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Gw,") INTERNAL ASSERTION FAILED: ")+e;throw Yw(t),new Error(t)}function Jw(e,t){e||Qw()}const Xw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Zw extends Kh{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class $w{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class eR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class tR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Bw.UNAUTHENTICATED)))}shutdown(){}}class nR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class rR{constructor(e){this.t=e,this.currentUser=Bw.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new $w;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new $w,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{Ww("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Ww("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new $w)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ww("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Jw("string"==typeof t.accessToken),new eR(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Jw(null===e||"string"==typeof e),new Bw(e)}}class iR{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Bw.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class oR{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new iR(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Bw.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Ww("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Ww("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Ww("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Ww("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Jw("string"==typeof e.token),this.R=e.token,new sR(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function cR(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class lR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=cR(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function dR(e,t){return e<t?-1:e>t?1:0}class uR{constructor(e,t,n){void 0===t?t=0:t>e.length&&Qw(),void 0===n?n=e.length-t:n>e.length-t&&Qw(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===uR.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof uR?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class hR extends uR{construct(e,t,n){return new hR(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Zw(Xw.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new hR(e)}static emptyPath(){return new hR([])}}class pR{constructor(e){this.path=e}static fromPath(e){return new pR(hR.fromString(e))}static fromName(e){return new pR(hR.fromString(e).popFirst(5))}static empty(){return new pR(hR.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===hR.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return hR.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pR(new hR(e.slice()))}}class fR{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}fR.UNKNOWN_ID=-1;function mR(e){return"IndexedDbTransactionError"===e.name}class gR{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function yR(e){return 0===e&&1/e==-1/0}gR._e=-1;const vR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_R=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ER=_R;class SR{constructor(e,t){this.comparator=e,this.root=t||bR.EMPTY}insert(e,t){return new SR(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bR.BLACK,null,null))}remove(e){return new SR(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bR.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new TR(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new TR(this.root,e,this.comparator,!1)}getReverseIterator(){return new TR(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new TR(this.root,e,this.comparator,!0)}}class TR{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bR{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:bR.RED,this.left=null!=r?r:bR.EMPTY,this.right=null!=i?i:bR.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new bR(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return bR.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return bR.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bR.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bR.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qw();if(this.right.isRed())throw Qw();const e=this.left.check();if(e!==this.right.check())throw Qw();return e+(this.isRed()?0:1)}}bR.EMPTY=null,bR.RED=!0,bR.BLACK=!1,bR.EMPTY=new class{constructor(){this.size=0}get key(){throw Qw()}get value(){throw Qw()}get color(){throw Qw()}get left(){throw Qw()}get right(){throw Qw()}copy(e,t,n,r,i){return this}insert(e,t,n){return new bR(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class IR{constructor(e){this.comparator=e,this.data=new SR(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new NR(this.data.getIterator())}getIteratorFrom(e){return new NR(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof IR))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new IR(this.comparator);return t.data=e,t}}class NR{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class CR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wR{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new CR("Invalid base64 string: "+e):e}}(e);return new wR(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new wR(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dR(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wR.EMPTY_BYTE_STRING=new wR("");new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function RR(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function AR(e){return"string"==typeof e?wR.fromBase64String(e):wR.fromUint8Array(e)}class OR{constructor(e,t,n,r,i,o,s,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=c}}class MR{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new MR("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof MR&&e.projectId===this.projectId&&e.database===this.database}}function DR(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}new SR(pR.comparator);new SR(pR.comparator);new SR(pR.comparator),new IR(pR.comparator);new IR(dR);var kR,xR;(xR=kR||(kR={}))[xR.OK=0]="OK",xR[xR.CANCELLED=1]="CANCELLED",xR[xR.UNKNOWN=2]="UNKNOWN",xR[xR.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xR[xR.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xR[xR.NOT_FOUND=5]="NOT_FOUND",xR[xR.ALREADY_EXISTS=6]="ALREADY_EXISTS",xR[xR.PERMISSION_DENIED=7]="PERMISSION_DENIED",xR[xR.UNAUTHENTICATED=16]="UNAUTHENTICATED",xR[xR.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xR[xR.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xR[xR.ABORTED=10]="ABORTED",xR[xR.OUT_OF_RANGE=11]="OUT_OF_RANGE",xR[xR.UNIMPLEMENTED=12]="UNIMPLEMENTED",xR[xR.INTERNAL=13]="INTERNAL",xR[xR.UNAVAILABLE=14]="UNAVAILABLE",xR[xR.DATA_LOSS=15]="DATA_LOSS";new zw([4294967295,4294967295],0);Error;class LR{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(RR(e.integerValue));else if("doubleValue"in e){const n=RR(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),yR(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(AR(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?DR(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Qw()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),pR.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}LR.bt=new LR;new Uint8Array(0);class PR{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new PR(e,PR.DEFAULT_COLLECTION_PERCENTILE,PR.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}PR.DEFAULT_COLLECTION_PERCENTILE=10,PR.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,PR.DEFAULT=new PR(41943040,PR.DEFAULT_COLLECTION_PERCENTILE,PR.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),PR.DISABLED=new PR(-1,0,0);function jR(){return"undefined"!=typeof document?document:null}class UR{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&Ww("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Lo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class FR{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new $w,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new FR(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Zw(Xw.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zR(e,t){if(Yw("AsyncQueue","".concat(t,": ").concat(e)),mR(e))return new Zw(Xw.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var VR,BR;(BR=VR||(VR={})).j_="default",BR.Cache="cache";class GR{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Bw.UNAUTHENTICATED,this.clientId=lR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Ww("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ww("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Zw(Xw.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $w;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=zR(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}function HR(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const WR=new Map;function YR(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Qw()}function qR(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Zw(Xw.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=YR(e);throw new Zw(Xw.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class KR{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Zw(Xw.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Zw(Xw.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Zw(Xw.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HR(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Zw(Xw.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Zw(Xw.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Zw(Xw.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class QR{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KR({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Zw(Xw.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Zw(Xw.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KR(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new tR;switch(e.type){case"firstParty":return new oR(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Zw(Xw.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=WR.get(e);t&&(Ww("ComponentProvider","Removing Datastore"),WR.delete(e),t.terminate())}(this),Promise.resolve()}}class JR{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new UR(this,"async_queue_retry"),this.cu=()=>{const e=jR();e&&Ww("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=jR();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const t=jR();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise((()=>{}));const t=new $w;return this.hu((()=>this.iu&&this.au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.ru.push(e),this.Pu())))}async Pu(){if(0!==this.ru.length){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!mR(e))throw e;Ww("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo((()=>this.Pu()))}}hu(e){const t=this.nu.then((()=>(this._u=!0,e().catch((e=>{this.ou=e,this._u=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Yw("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this._u=!1,e))))));return this.nu=t,t}enqueueAfterDelay(e,t,n){this.lu(),this.uu.indexOf(e)>-1&&(t=0);const r=FR.createAndSchedule(this,e,t,n,(e=>this.Iu(e)));return this.su.push(r),r}lu(){this.ou&&Qw()}verifyOperationInProgress(){}async Tu(){let e;do{e=this.nu,await e}while(e!==this.nu)}Eu(e){for(const t of this.su)if(t.timerId===e)return!0;return!1}du(e){return this.Tu().then((()=>{this.su.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.su)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tu()}))}Au(e){this.uu.push(e)}Iu(e){const t=this.su.indexOf(e);this.su.splice(t,1)}}class XR extends QR{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new JR,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||ZR(this),this._firestoreClient.terminate()}}function ZR(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new OR(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,HR(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new GR(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}new RegExp("[~\\*/\\[\\]]");new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Gw=e}(Rf),If(new mp("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new XR(new rR(e.getProvider("auth-internal")),new aR(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Zw(Xw.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new MR(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),Mf(Vw,"4.5.0",e),Mf(Vw,"4.5.0","esm2017")}();const $R=Af({apiKey:"AIzaSyAKWIIExMaVrxQ858PYKyLrj271uBSJy9c",authDomain:"dzital-38fcb.firebaseapp.com",databaseURL:"https://dzital-38fcb-default-rtdb.europe-west1.firebasedatabase.app",projectId:"dzital-38fcb",storageBucket:"dzital-38fcb.appspot.com",messagingSenderId:"1037771428251",appId:"1:1037771428251:web:8c6533617d284fb301113e"}),eA=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Of();const t=Nf(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Nf(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(ip(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Jf(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Jy,persistence:[iy,Vg,Gg]}),r=zh("authTokenSyncURL");if(r&&r.match(/^\/[^\/].*/)){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>ev)return;const r=null===t||void 0===t?void 0:t.token;tv!==r&&(tv=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){fp(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,r){fp(e).onIdTokenChanged(t,n,r)}(n,(t=>e(t)))}var i;const o=jh("auth");return o&&lg(n,"http://".concat(o)),n}($R),tA=new wg,nA=new Cg,rA=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Of(),t=arguments.length>1?arguments[1]:void 0;const n=Nf(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=Uh("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=fp(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Tv("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Tv('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new zv(zv.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:Bh(r.mockUserToken,e.app.options.projectId);o=new zv(t)}!function(e,t,n,r){e.repoInfo_=new Yv("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,o)}(n,...e)}return n}($R);!function(e,t){const n="string"==typeof e?e:t||"(default)",r=Nf("object"==typeof e?e:Of(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=Uh("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=qR(e,QR))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&qw("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Bw.MOCK_USER;else{t=Bh(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Zw(Xw.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Bw(o)}e._authCredentials=new nR(new eR(t,n))}}(r,...e)}}($R);function iA(e){return Ys({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(e)}function oA(e){return Ys({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(e)}function sA(e){return Ys({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(e)}function aA(e){return Ys({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(e)}function cA(e){return Ys({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(e)}function lA(e){return Ys({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(e)}function dA(e){return Ys({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 320c-22.608 0-43.387 7.819-59.79 20.895l-102.486-64.054a96.551 96.551 0 0 0 0-41.683l102.486-64.054C308.613 184.181 329.392 192 352 192c53.019 0 96-42.981 96-96S405.019 0 352 0s-96 42.981-96 96c0 7.158.79 14.13 2.276 20.841L155.79 180.895C139.387 167.819 118.608 160 96 160c-53.019 0-96 42.981-96 96s42.981 96 96 96c22.608 0 43.387-7.819 59.79-20.895l102.486 64.054A96.301 96.301 0 0 0 256 416c0 53.019 42.981 96 96 96s96-42.981 96-96-42.981-96-96-96z"},child:[]}]})(e)}function uA(e){return Ys({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 144a110.94 110.94 0 0 0-31.24 5 55.4 55.4 0 0 1 7.24 27 56 56 0 0 1-56 56 55.4 55.4 0 0 1-27-7.24A111.71 111.71 0 1 0 288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z"},child:[]}]})(e)}const hA=()=>{const{LoginUser:e,SocialLoginUser:t}=Kr(),[n,i]=(0,r.useState)(""),[o,s]=(0,r.useState)(""),[a,c]=(0,r.useState)(""),[l,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1);return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{className:"box-form",children:[(0,Me.jsx)("div",{className:"left",style:{background:"url(./assets/images/login-bg.jpg) center bottom"},children:(0,Me.jsxs)("div",{className:"overlay",children:[(0,Me.jsx)("h1",{children:"Success starts here"}),(0,Me.jsxs)("ul",{children:[(0,Me.jsx)("li",{children:"Over 600 categories"}),(0,Me.jsx)("li",{children:"Pay per project, not per hour"}),(0,Me.jsx)("li",{children:"Access to talent and businesses across the globe"})]})]})}),(0,Me.jsxs)("div",{className:"right",children:[(0,Me.jsx)("h3",{children:"Sign in to your account"}),(0,Me.jsxs)("div",{className:"formBx mt-5",children:[(0,Me.jsx)("div",{className:"formBx",children:(0,Me.jsxs)("form",{className:"px-md-1 ",children:[(0,Me.jsxs)("div",{className:"form-outline mb-3",children:[(0,Me.jsx)("label",{htmlFor:"",children:(0,Me.jsx)("b",{children:"Email or username"})}),(0,Me.jsx)("input",{type:"email",value:n,onChange:e=>{i(e.target.value)},className:"form-control",required:!0})]}),(0,Me.jsxs)("div",{className:"form-outline mb-4",children:[(0,Me.jsx)("label",{htmlFor:"",children:(0,Me.jsx)("b",{children:"Password"})}),(0,Me.jsxs)("div",{className:"input-group mb-3",children:[(0,Me.jsx)("input",{type:u?"text":"password",value:o,onChange:e=>{s(e.target.value)},className:"form-control",placeholder:"Password","aria-describedby":"password-toggle",required:!0}),(0,Me.jsx)("span",{className:"input-group-text",id:"password-toggle",onClick:()=>{h(!u)},children:u?(0,Me.jsx)(uA,{}):(0,Me.jsx)(lA,{})})]})]}),(0,Me.jsxs)("div",{className:"row mb-2",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("button",{type:"submit",className:"btn btnTheme width100 mb-1 mt-0",style:{background:"var(--theme-color)"},onClick:t=>{if(t.preventDefault(),!n||!o)return void gl.info("Please fill in all required fields");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)?e(n,o):gl.info("Please input a valid Email")},children:"Continue"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("p",{className:"mt-1",align:"right",children:(0,Me.jsx)(Re,{className:"text14 text-muted",onClick:()=>{d(!l)},to:"#",children:"Forgot Password"})})})]}),l&&(0,Me.jsxs)("div",{className:"form-outline mb-3",children:[(0,Me.jsx)("label",{htmlFor:"",children:(0,Me.jsx)("b",{children:"Recipient's email"})}),(0,Me.jsx)("input",{type:"email",value:a,onChange:e=>c(e.target.value),className:"form-control",required:!0})]}),l&&(0,Me.jsx)("div",{className:"row mb-2",children:(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("button",{type:"button",className:"btn btnTheme width100 mb-1 mt-0",style:{background:"var(--theme-color)"},onClick:e=>{e.preventDefault(),a?async function(e,t,n){const r=tg(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&jg(r,i,n),await cg(r,i,"getOobCode",gg)}(eA,a).then((()=>{gl.success("Password reset email sent. Please check your mail."),c(""),d(!1)})).catch((e=>{gl.error("Error sending password reset email")})):gl.info("Please enter your email")},children:"Send Reset Email"})})})]})}),(0,Me.jsx)("h4",{className:"text-muted mb40 ",align:"center",children:"OR"}),(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-sm-12 col-lg-6",children:(0,Me.jsxs)(Re,{onClick:()=>{my(eA,tA).then((e=>{t(e.user.email,e.user.uid,"google",e.user.displayName,e.user.photoURL)})).catch((e=>{}))},className:"btn btn-light width100 mb20 d-flex gap-1 mb-20 align-items-center justify-content-center",to:"#.",children:[(0,Me.jsx)("img",{src:"./assets/images/google.svg",width:"16",alt:"",className:"google-icon"}),(0,Me.jsx)("span",{children:"Google"})]})}),(0,Me.jsx)("div",{className:"col-sm-12 col-lg-6",children:(0,Me.jsxs)("button",{className:"btn btn-light width100 mb20 d-flex gap-1 mb-20 align-items-center justify-content-center",onClick:()=>{my(eA,nA).then((e=>{t(e.user.email,e.user.uid,"facebook")})).catch((e=>{}))},children:[(0,Me.jsx)("img",{src:"./assets/images/facebook.svg",width:16,alt:""}),(0,Me.jsx)("span",{children:"Facebook"})]})})]}),(0,Me.jsxs)("p",{className:"text text-center",children:["Don't An have Accout ? ",(0,Me.jsx)(Re,{to:"/singup",children:" SignUp"})," "]})]}),(0,Me.jsx)("p",{className:"text14 text-muted",children:"By joining, you agree to the Dzital Terms of Service and to occasionally receive emails from us. Please read our Privacy Policy to learn how we use your personal data."})]})]})}),(0,Me.jsx)(Zs,{})]})})})})},pA=()=>{const{LoginUser:e}=Kr(),[t,n]=(0,r.useState)(""),[i,o]=(0,r.useState)("");return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{className:"box-form",children:[(0,Me.jsx)("div",{className:"left",style:{background:"url(./assets/images/login-bg.jpg) center bottom"},children:(0,Me.jsxs)("div",{className:"overlay",children:[(0,Me.jsx)("h1",{children:"Success starts here"}),(0,Me.jsxs)("ul",{children:[(0,Me.jsx)("li",{children:"Over 600 categories"}),(0,Me.jsx)("li",{children:"Pay per project, not per hour"}),(0,Me.jsx)("li",{children:"Access to talent and businesses across the globe"})]})]})}),(0,Me.jsxs)("div",{className:"right",children:[(0,Me.jsx)("p",{className:"mb5",children:(0,Me.jsxs)(Re,{className:"text-muted",to:"/login",children:[(0,Me.jsx)("i",{className:"fa fa-long-arrow-left"})," Back"]})}),(0,Me.jsxs)("div",{className:"formBx",children:[(0,Me.jsxs)("form",{className:"px-md-1 mt30",children:[(0,Me.jsxs)("div",{className:"form-outline mb-3",children:[(0,Me.jsx)("label",{htmlFor:"",children:(0,Me.jsx)("b",{children:"Email or username"})}),(0,Me.jsx)("input",{type:"email",value:t,onChange:e=>{n(e.target.value)},className:"form-control",required:!0})]}),(0,Me.jsxs)("div",{className:"form-outline mb-4",children:[(0,Me.jsx)("label",{htmlFor:"",children:(0,Me.jsx)("b",{children:"Password"})}),(0,Me.jsx)("input",{type:"password",value:i,onChange:e=>{o(e.target.value)},className:"form-control",required:!0})]}),(0,Me.jsxs)("div",{className:"row mb-2",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("button",{type:"submit",className:"btn btnTheme width100 mb-1 mt-0",style:{background:"var(--theme-color)"},onClick:n=>{if(n.preventDefault(),!t||!i)return void gl.info("Please fill in all required fields");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?e(t,i):gl.info("Please input a valid Email")},children:"Continue"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("p",{className:"mt-1",align:"right",children:(0,Me.jsx)(Re,{className:"text14 text-muted","data-bs-toggle":"collapse",to:"#forgotPassword",children:"Forgot Password"})})})]})]}),(0,Me.jsxs)("div",{className:"input-group collapse",id:"forgotPassword",children:[(0,Me.jsx)("input",{type:"text",className:"form-control",placeholder:"Recipient's username","aria-label":"Recipient's username","aria-describedby":"button-addon2"}),(0,Me.jsx)("button",{className:"btn btnTheme",style:{backgroundColor:"var(--theme-color)"},type:"button",id:"button-addon2",children:"Button"})]})]}),(0,Me.jsx)("p",{className:"text14 text-muted",children:"By joining, you agree to the Dzital Terms of Service and to occasionally receive emails from us. Please read our Privacy Policy to learn how we use your personal data."})]})]})}),(0,Me.jsx)(Zs,{})]})})})})},fA=__webpack_require__.p+"static/media/user.eca20e66104f9ff91cf6.jpg",mA=e=>{let{preview:t}=e;const{userData:n,LogOut:r}=Kr(),{image:i,name:o}=n||{};return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsxs)("div",{className:"profile-sidebar  w-full",children:[(0,Me.jsx)("div",{className:"profile-userpic d-flex justify-content-center align-items-center",children:(0,Me.jsx)("img",{src:t||i||fA,className:"img-fluid rounded-circle",alt:"",style:{maxHeight:"120px",minHeight:"110px",maxWidth:"120px"}})}),(0,Me.jsx)("div",{className:"profile-usertitle",children:(0,Me.jsx)("div",{className:"profile-usertitle-name",children:o})}),(0,Me.jsxs)("div",{className:"profile-userbuttons d-flex ",children:[(0,Me.jsx)(Re,{to:"/account",className:"btn btnTheme small-text",style:{background:"var(--theme-color)"},children:"Personal Info"}),(0,Me.jsx)(Re,{to:"/packages",className:"btn btn-warning small-text",children:"Upgrade to Premium"})]}),(0,Me.jsx)("div",{className:"profile-usermenu",children:(0,Me.jsxs)("ul",{className:"nav",children:[(0,Me.jsx)("li",{children:(0,Me.jsxs)(Re,{to:"/change-password",children:[(0,Me.jsx)("i",{className:"fa fa-lock"})," Password & Security"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Re,{to:"/my-post",children:[(0,Me.jsx)("i",{className:"fa fa-address-card-o"})," My Post"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Re,{to:"/my-Order",children:[(0,Me.jsx)("i",{className:"fa fa-address-card-o"})," My Order"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Re,{to:"/add-post",children:[(0,Me.jsx)("i",{className:"fa fa-address-card-o"})," Add Post"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Re,{to:"/wishlist",children:[(0,Me.jsx)("i",{className:"fa fa-heart-o"})," Wishlist"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Re,{to:"/cart",children:[(0,Me.jsx)("i",{className:"fa-solid fa-cart-shopping"})," Cart"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Re,{to:"#",onClick:()=>r(),children:[(0,Me.jsx)("i",{className:"fa fa-power-off"})," Sign Out"]})})]})})]})})},gA=()=>{const{userData:e,updateProfile:t}=Kr(),[n,i]=(0,r.useState)(""),[o,s]=(0,r.useState)(""),[a,c]=(0,r.useState)(""),[l,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[p,f]=(0,r.useState)(null),[m,g]=(0,r.useState)(""),{email:y,image:v,mobile:_,name:E,bio:S,address:T}=e||{};return(0,r.useEffect)((()=>{s(S)}),[S]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(yl,{title:"Accounts"}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),(0,Me.jsx)("div",{className:"col-md-3",children:(0,Me.jsx)(mA,{preview:m})}),(0,Me.jsxs)("div",{className:"col-md-7",children:[(0,Me.jsx)("div",{className:"card border-0",children:(0,Me.jsxs)("div",{className:"card card-body border-0",children:[(0,Me.jsx)("h2",{className:"titleText",children:"Personal Info"}),(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-9 mt-2",children:[(0,Me.jsx)("label",{className:"mb-1",children:(0,Me.jsx)("b",{children:"Short Bio"})}),(0,Me.jsx)("div",{children:(0,Me.jsx)("textarea",{className:"form-control",rows:3,value:o,onChange:e=>s(e.target.value)})})]}),(0,Me.jsx)("div",{className:"col-md-3 mt-2",children:(0,Me.jsxs)("div",{className:"fileBx",children:[(0,Me.jsx)("input",{type:"file",name:"uploadfile",id:"img",style:{display:"none"},accept:"image/*",onChange:e=>{const t=e.target.files[0];if(!t)return;if(t.size>921600)return gl.error("File size exceeds the limit. Please choose a smaller file."),f(null),void g(null);f(t),g(URL.createObjectURL(t))}}),(0,Me.jsx)("label",{htmlFor:"img",children:"Click me to upload image"})]})})]})]})}),(0,Me.jsxs)("div",{className:"card border-0 mt-4",children:[(0,Me.jsxs)("div",{className:"card card-body border-0 profileBx",children:[(0,Me.jsxs)("div",{className:"item mb20",children:[(0,Me.jsxs)(Re,{className:"nameTag collapsed","data-bs-toggle":"collapse","data-bs-target":"#fullName",children:["Full Name"," ",(0,Me.jsx)("i",{className:"fa fa-pencil-square-o",style:{cursor:"pointer"},title:"Edit"}),(0,Me.jsx)("h5",{className:"mb5",children:E})]}),(0,Me.jsx)("div",{className:"collapse",id:"fullName",children:(0,Me.jsx)("input",{type:"text",className:"form-control",value:n,onChange:e=>i(e.target.value)})})]}),(0,Me.jsxs)("div",{className:"item mb20",children:[(0,Me.jsxs)(Re,{className:"nameTag collapsed","data-bs-toggle":"collapse","data-bs-target":"#emailId",children:["Email ID",(0,Me.jsx)("i",{className:"fa fa-pencil-square-o",style:{cursor:"pointer"},title:"Edit"}),(0,Me.jsx)("h5",{className:"mb5",children:y})]}),(0,Me.jsx)("div",{className:"collapse",id:"emailId",children:(0,Me.jsx)("input",{type:"email",className:"form-control",value:l,onChange:e=>d(e.target.value)})})]}),(0,Me.jsxs)("div",{className:"item mb20",children:[(0,Me.jsxs)(Re,{className:"nameTag collapsed","data-bs-toggle":"collapse","data-bs-target":"#phoneNumber",children:["Phone Number",(0,Me.jsx)("i",{className:"fa fa-pencil-square-o",style:{cursor:"pointer"},title:"Edit"}),(0,Me.jsx)("h5",{className:"mb5",children:_})]}),(0,Me.jsx)("div",{className:"collapse",id:"phoneNumber",children:(0,Me.jsx)("input",{type:"number",className:"form-control",value:u,onChange:e=>h(e.target.value)})})]}),(0,Me.jsxs)("div",{className:"item mb20",children:[(0,Me.jsxs)(Re,{className:"nameTag collapsed","data-bs-toggle":"collapse","data-bs-target":"#address",children:["Address",(0,Me.jsx)("i",{className:"fa fa-pencil-square-o",style:{cursor:"pointer"},title:"Edit"}),(0,Me.jsx)("h5",{className:"mb5",children:T})]}),(0,Me.jsx)("div",{className:"collapse",id:"address",children:(0,Me.jsx)("input",{type:"text",className:"form-control",value:a,onChange:e=>c(e.target.value)})})]})]}),(0,Me.jsx)("button",{className:"btn  mt-2",style:{background:"var(--theme-color)"},onClick:()=>{t(n||E,l||y,p||v,u||_,o||S,a||T)},children:"Update"})]})]}),(0,Me.jsx)(Zs,{})]})})})]})},yA=()=>{const{isLogIn:e}=Kr(),t=ee();return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsxs)("div",{className:"card card-sm",children:[(0,Me.jsx)("div",{className:"card-body p5",children:(0,Me.jsxs)("div",{className:"",children:[(0,Me.jsxs)("button",{onClick:()=>{return n="/message",void(e?t(n):(gl("please Login first"),setTimeout((()=>{t("/login?redirect=".concat(n.split("/")[1]))}),1e3)));var n},className:"btn btn-secondary btn-sm mb5 mt5",children:[(0,Me.jsx)("i",{className:"fa fa-comments"})," Text Chat"]}),(0,Me.jsxs)(Re,{to:"/voice-call",className:"btn btn-success btn-sm  mb5 mt5 mx-1",children:[(0,Me.jsx)("i",{className:"fa fa-phone"})," Voice Call"]}),(0,Me.jsxs)(Re,{to:"/videocall",className:"btn btn-danger btn-sm  mb5 mt5",children:[(0,Me.jsx)("i",{className:"fa fa-video-camera"})," Video Call"]}),(0,Me.jsxs)(Re,{className:"btn btn-primary btn-sm  mb5 mt5 mx-1","data-bs-target":"#supplierModal","data-bs-toggle":"modal",children:[(0,Me.jsx)("i",{className:"fa fa-user-o"})," Contact To Supplier"]})]})}),(0,Me.jsx)("div",{className:"modal fade supplierModal",id:"supplierModal",tabIndex:-1,children:(0,Me.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-scrollable",children:(0,Me.jsxs)("div",{className:"modal-content",children:[(0,Me.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"}),(0,Me.jsx)("div",{className:"modal-body",children:(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-8",children:[(0,Me.jsxs)("h1",{className:"modal-title fs-6",children:[(0,Me.jsx)("b",{children:"Get Latest Price"})," by adding Link few details of your requirement"]}),(0,Me.jsx)("hr",{className:"mt-2"}),(0,Me.jsx)("label",{children:(0,Me.jsx)("b",{children:"Quantity"})}),(0,Me.jsxs)("div",{className:"input-group mt-1 mb-4",style:{maxWidth:200},children:[(0,Me.jsx)("input",{type:"number",className:"form-control"}),(0,Me.jsx)("span",{className:"input-group-text bg-theme",id:"basic-addon2",style:{background:"var(--theme-color)"},children:"Pieces"})]}),(0,Me.jsx)("label",{children:(0,Me.jsx)("b",{children:"Requirement Details"})}),(0,Me.jsx)("div",{className:"input-group mt-1 mb-4",style:{maxWidth:400},children:(0,Me.jsx)("textarea",{className:"form-control",name:"",id:"",cols:30,rows:3,placeholder:"Additional Details About Your Requirement",defaultValue:""})}),(0,Me.jsx)("button",{className:"btn btnTheme btn-sm",type:"button",style:{minWidth:150,background:"var(--theme-color)"},children:"Next"}),(0,Me.jsx)("hr",{className:"mt-4"}),(0,Me.jsxs)("div",{className:"mt-3",children:[(0,Me.jsx)("h5",{children:"Your contact information"}),(0,Me.jsxs)("h6",{children:[(0,Me.jsx)("i",{className:"fa fa-user-o"})," ",(0,Me.jsx)("b",{children:"Mr."})," Ramesh Singh"]}),(0,Me.jsxs)("h6",{children:[(0,Me.jsx)("i",{className:"fa fa-phone"})," ",(0,Me.jsx)("b",{children:"+91"})," 1234567890 \xa0 | \xa0 ",(0,Me.jsx)("i",{className:"fa fa-envelope-o"})," ","ramesh@gmail.com"]})]})]}),(0,Me.jsxs)("div",{className:"col-md-4",children:[(0,Me.jsx)("img",{src:"assets/images/iPhone-1.jpg",alt:"",style:{maxWidth:"100%"}}),(0,Me.jsxs)("div",{className:"",children:[(0,Me.jsx)("h5",{className:"fs-5",children:"Iphone 14 refurbished mobiles,bill and warranty available"}),(0,Me.jsx)("h2",{children:"\u20ac799"}),(0,Me.jsx)("h6",{children:"Highlights"}),(0,Me.jsxs)("ul",{className:"text14",style:{marginLeft:"-10px"},children:[(0,Me.jsx)("li",{children:"128 GB ROM"}),(0,Me.jsx)("li",{children:"6.1 inch Super Retina XDR Display"}),(0,Me.jsx)("li",{children:"12MP + 12MP"}),(0,Me.jsx)("li",{children:"A15 Bionic Chip, 6 Core Processor Processor"})]})]})]})]})})]})})})]})})},vA=e=>{let{isOpen:t,onClose:n,onOpenModal:r}=e;const i=window.location.href,o=encodeURIComponent(document.title),s={facebook:"https://www.facebook.com/sharer/sharer.php?u=".concat(i),twitter:"https://twitter.com/intent/tweet?url=".concat(i),linkedin:"https://www.linkedin.com/sharing/share-offsite/?url=".concat(i,"&title=").concat(o),instagram:"https://www.instagram.com/share?url=".concat(i),whatsapp:"https://api.whatsapp.com/send?text=".concat(i)};return(0,Me.jsxs)("div",{className:"modal ".concat(t?"show":""," "),tabIndex:"-1",role:"dialog",style:{display:t?"block":"none"},children:[(0,Me.jsx)("div",{className:"modal-dialog",role:"document",children:(0,Me.jsxs)("div",{className:"modal-content",children:[(0,Me.jsxs)("div",{className:"modal-header",children:[(0,Me.jsx)("h5",{className:"modal-title",children:"Share Link"}),(0,Me.jsx)("button",{type:"button",className:"close",onClick:n,"aria-label":"Close",children:(0,Me.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,Me.jsxs)("div",{className:"modal-body",children:[(0,Me.jsx)("p",{children:"Share this link:"}),(0,Me.jsx)("input",{type:"text",className:"form-control mb-2",value:window.location.href,readOnly:!0}),(0,Me.jsx)("p",{children:"Share on:"}),(0,Me.jsxs)("div",{className:"social-icons",children:[(0,Me.jsx)("a",{href:s.facebook,target:"_blank",rel:"noopener noreferrer",children:(0,Me.jsx)(iA,{className:"mr-2"})}),(0,Me.jsx)("a",{href:s.twitter,target:"_blank",rel:"noopener noreferrer",children:(0,Me.jsx)(aA,{className:"mr-2"})}),(0,Me.jsx)("a",{href:s.linkedin,target:"_blank",rel:"noopener noreferrer",children:(0,Me.jsx)(sA,{className:"mr-2"})}),(0,Me.jsx)("a",{href:s.instagram,target:"_blank",rel:"noopener noreferrer",children:(0,Me.jsx)(oA,{className:"mr-2"})}),(0,Me.jsx)("a",{href:s.whatsapp,target:"_blank",rel:"noopener noreferrer",children:(0,Me.jsx)(cA,{})})]})]}),(0,Me.jsx)("div",{className:"modal-footer",children:(0,Me.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>{navigator.clipboard.writeText(i).then((()=>{})).catch((e=>{console.error("Failed to copy link to clipboard:",e)}))},children:"Copy Link"})})]})}),(0,Me.jsx)("div",{className:"share-icon",onClick:r,children:(0,Me.jsx)(dA,{})})]})},_A=e=>{let{initialDetail:t}=e;const{id:n}=ne(),{getGoodsProductDetails:i,goodsItems:o,setGoodsItems:s,wishListAdd:a,wishListRemove:c,BidAdd:l,getReletedProduct:d,reletedList:u,cartListAdd:h,userData:p}=Kr(),[f,m]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[v,_]=(0,r.useState)("--:--:--"),[E,S]=(0,r.useState)("--:--:--"),[T,b]=(0,r.useState)(!1),[I,N]=(0,r.useState)(""),[C,w]=(0,r.useState)(1),[R,A]=(0,r.useState)(""),[O,M]=(0,r.useState)(null),{description:D,image_1:k,image_2:x,image_3:L,photo:P,product_id:j,title:U,attribute_values:F,bid_now:z,bid_start_price:V,bid_increament_value:B,bid_entry:G,bid_start_date:H,bid_end_date:W,isWishlist:Y,category_id:q,category_name:K,category_slug:Q,sub_category_id:J,userId:X}=o.data||{};(0,r.useEffect)((()=>{void 0!==Y&&m(Y)}),[Y]);(0,r.useEffect)((()=>{!t&&n&&(async()=>{await i(n)})(),t&&t.data&&t.data._id&&s(t)}),[n,t]),(0,r.useEffect)((()=>{const e=Nb(_b(rA,"bet_entry/"+n),(e=>{M(e.val())}));return()=>{e()}}),[n]);const Z=G||(null===O||void 0===O?void 0:O.bet_entry)||0+B||0,$=e=>{A(e>=Z?(0,Me.jsx)("button",{className:"btn btn-link",children:"Amount is valid. (".concat(e,")")}):(0,Me.jsx)("button",{className:"btn btn-link",children:"Bid must be at least ".concat(Z)}))};(0,r.useEffect)((()=>{const e=new Date(H).getTime(),t=setInterval((()=>{const n=(new Date).getTime(),r=e-n;if(r<=0)clearInterval(t),S("Bid_Start");else{const e=Math.floor(r/36e5),t=Math.floor(r%36e5/6e4),n=Math.floor(r%6e4/1e3),i="".concat(e.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"));S(i)}}),1e3);return()=>clearInterval(t)}),[H]),(0,r.useEffect)((()=>{const e=new Date(W).getTime(),t=setInterval((()=>{const n=(new Date).getTime(),r=e-n;if(r<=0)clearInterval(t),_("Time's up!"),b(!0);else{b(!1);const e=Math.floor(r/36e5),t=Math.floor(r%36e5/6e4),n=Math.floor(r%6e4/1e3),i="".concat(e.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"));_(i)}}),1e3);return()=>clearInterval(t)}),[v]);const ee=[P,k,x,L],te=e=>{if(!Array.isArray(F))return null;const t=F.find((t=>t.attribute===e));return t?t.value:null},re=te("Price"),ie=te("Brand");return(0,r.useEffect)((()=>{j&&q&&d(q,J,j)}),[j,q,J]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsx)("aside",{className:"row",children:(0,Me.jsx)("div",{className:"col-md-12",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/".concat(Q,"?category_id=").concat(q),children:K})}),(0,Me.jsxs)("li",{className:"active",children:[" Detail Page Of ",U]})]})})})})}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),o.isLoad&&(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!o.isLoad&&(0,Me.jsxs)("div",{className:"col-md-10",children:[(0,Me.jsx)("div",{className:"card",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-5",children:(0,Me.jsx)("div",{className:"swiper mainBannerSwiper",children:(0,Me.jsx)(_c,{loop:!0,navigation:!0,modules:[Sc],className:"mySwiper",children:Array.isArray(ee)&&ee.map(((e,t)=>(0,Me.jsx)(Ec,{children:(0,Me.jsx)(Re,{className:"swiper-slide",children:(0,Me.jsx)("img",{src:e,alt:"",loading:"lazy"})})},t)))})})}),(0,Me.jsxs)("div",{className:"col-md-7",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-10 col-sm-12",children:[(0,Me.jsx)("div",{className:"col-md-10 col-sm-12",children:(0,Me.jsx)("h2",{children:ie||""})}),(0,Me.jsx)("div",{className:"col-md-10 col-sm-12",children:(0,Me.jsx)("div",{children:(0,Me.jsx)("h4",{className:"text-muted",children:U})})})]}),(0,Me.jsxs)("div",{className:"col-md-2 col-sm-12",align:"right",children:[(0,Me.jsx)("div",{className:"iconWish",onClick:()=>{y(!0)},children:(0,Me.jsx)("i",{className:"fa fa-share-alt text20"})}),(0,Me.jsx)(vA,{isOpen:g,onClose:()=>{y(!1)}}),p._id===X?"":(0,Me.jsx)("div",{className:"iconWish",onClick:()=>(e=>{f?(c(e),m(!1)):(a(e),m(!0))})(j),children:(0,Me.jsx)("i",{className:!0===f?"fa fa-heart text-danger":"fa fa-heart-o"})})]})]}),(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-5 col-sm-12",children:[(0,Me.jsx)("h5",{className:"text-success",children:"Special price"}),(0,Me.jsx)("h5",{children:(0,Me.jsxs)("span",{className:"text28",children:[(0,Me.jsx)("i",{className:"fa fa-inr",children:" "})," ",z?V:re||"Not Disclosed"]})})]}),p._id===X?"":(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(yA,{}),z&&(0,Me.jsx)(Me.Fragment,{children:"Bid_Start"===E?(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsxs)("ul",{children:[(0,Me.jsx)("li",{children:(0,Me.jsxs)("span",{children:[" ",(0,Me.jsxs)("h5",{children:["Bid Start Price : ",V||0]})]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)("span",{children:[" ",(0,Me.jsxs)("h5",{children:["Highest Bid Price : ",(null===O||void 0===O?void 0:O.bet_entry)||0]})]})}),(0,Me.jsx)("li",{children:(0,Me.jsx)("span",{children:(0,Me.jsxs)("h5",{children:["Bid Ending In(HH:MM:SS) :"," ",(0,Me.jsxs)("span",{className:"text text-success",children:[" ",v]})]})})})]}),(0,Me.jsx)("label",{htmlFor:"bid",children:(0,Me.jsx)("h5",{children:"Bid Your Amount"})}),(0,Me.jsxs)("div",{className:"d-flex justify-content-center item-center",children:[(0,Me.jsxs)("span",{className:"w-50",children:[(0,Me.jsx)("input",{type:"number",id:"bid",style:{width:"150px"},className:"pb-2",value:I,onChange:e=>{const t=parseFloat(e.target.value);N(t),$(t)}}),(0,Me.jsx)("br",{}),(0,Me.jsxs)("span",{children:["Suggestion : ",G||(null===O||void 0===O?void 0:O.bet_entry)||0+B]}),(0,Me.jsx)("br",{}),(0,Me.jsxs)("span",{className:"text text-success",children:["Increment in multipule of : ",B]})]}),(0,Me.jsx)("button",{disabled:T,className:"btn ".concat(T?"btn-dark":"btn-success"),style:{width:"50%",height:"40px"},onClick:async e=>{e.preventDefault();try{if(I>=Z)if(I<=100*Z){const e=await l(parseFloat(I),j);200===(null===e||void 0===e?void 0:e.status)?(await Sb(_b(rA,"bet_entry/"+n),{bet_entry:I}),await i(n),N("")):gl.warning("Entered value must be equal to or greater than ".concat(Z))}else gl.warning("Entered value must be at most 100 times ".concat(100*Z));else gl.warning("Entered value must be equal to or greater than ".concat(Z))}catch(Sv){console.log("Error",Sv)}},children:"Bid"})]}),(0,Me.jsx)("hr",{})]}):(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("span",{children:(0,Me.jsxs)("h5",{children:["Bid start In (HH:MM:SS):"," ",(0,Me.jsxs)("span",{className:"text text-success",children:[" ",E]})]})})})})]})]})]})]}),z?"":(0,Me.jsx)("div",{className:"col-md-7 d-flex gap-5 align-items-center ",children:(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-5",children:(0,Me.jsxs)("div",{className:"input-group",children:[(0,Me.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>{C>1&&w(C-1)},children:"-"}),(0,Me.jsx)("input",{type:"number",className:"form-control",value:C,readOnly:!0}),(0,Me.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>{w(C+1)},children:"+"})]})}),(0,Me.jsx)("div",{className:"col-md-5",children:(0,Me.jsx)("button",{className:"btn btn-primary text-white",onClick:()=>{re?h(j,C,+re):gl.warning("Price is not defined")},children:"Add To Cart"})})]})}),(0,Me.jsx)("h5",{className:"mt30",children:"Product Description"}),(0,Me.jsx)("p",{children:D}),(0,Me.jsx)("hr",{}),Array.isArray(F)&&F.map((e=>(0,Me.jsxs)("p",{children:[(0,Me.jsxs)("b",{children:[e.attribute," : "]}),e.value]},e._id)))]})}),(0,Me.jsx)("h4",{className:"mt20",children:"Related Products"}),(0,Me.jsx)("hr",{className:"mt0"}),(0,Me.jsx)("div",{className:"swiper productSlider",children:(0,Me.jsx)(_c,{loop:!0,slidesPerView:5,spaceBetween:20,keyboard:{enabled:!0},autoplay:{delay:3e3},breakpoints:{320:{slidesPerView:2,spaceBetween:20},640:{slidesPerView:3,spaceBetween:15},768:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:5,spaceBetween:15}},navigation:!0,modules:[Sc],className:"mySwiper",children:u.map((e=>(0,Me.jsx)(Ec,{children:(0,Me.jsx)("div",{className:"swiper-slide proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",children:[(0,Me.jsx)("div",{className:"imgBx",children:(0,Me.jsx)(Re,{to:"/product/related-product/".concat(e._id),children:(0,Me.jsx)("img",{src:e.image,className:"card-img-top",alt:""})})}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h4",{className:"card-title",children:(0,Me.jsx)(Re,{children:e.title})}),(0,Me.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description})]})]})})},e._id)))})})]}),(0,Me.jsx)(Zs,{})]})})})]})};const EA=function(){const e=ee(),{isLogIn:t,loading:n}=Kr();return!0===n?(0,Me.jsx)("div",{className:"d-flex align-items-center justify-content-center vh-100",children:(0,Me.jsx)(Jr,{animation:"border",role:"status",variant:"info",children:(0,Me.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):t?(0,Me.jsx)(ge,{}):(e("/login"),(0,Me.jsx)(hA,{}))},SA=e=>{let{item:t}=e;const{wishListAdd:n,wishListRemove:i,userData:o}=Kr(),[s,a]=(0,r.useState)(t.isWishlist);return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"card mb-3 realestateItem",children:(0,Me.jsxs)("div",{className:"row g-0",children:[(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)(Re,{to:"/realstate-detail/".concat(t._id),children:(0,Me.jsx)("img",{src:t.photo,className:"img-fluid rounded-start allImg",style:{height:"220px"},alt:"...",width:400})})}),(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)(Re,{to:"/realstate-detail/".concat(t._id),children:t.title})}),(0,Me.jsx)("div",{className:"row",children:o._id===t.userId?"":(0,Me.jsx)("div",{className:"iconWish",onClick:()=>(e=>{s?i(e):n(e),a(!s)})(t.product_id),children:(0,Me.jsx)("i",{className:"fa ".concat(s?"fa-heart text-danger":"fa-heart-o")})})}),(0,Me.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:t.description}),(0,Me.jsx)(Re,{className:"btn btnTheme",style:{background:"var(--theme-color)"},to:"/realstate-detail/".concat(t._id),children:"View Property >>"})]})})]},t._id)})})},TA=e=>{let{onFilter:t}=e;const{filterAttributeList:n}=Kr();return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsxs)("nav",{className:"navbar navbar-expand-lg bg-body-tertiary sideBarNav text14",children:[(0,Me.jsxs)("div",{className:"titelBx",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:[(0,Me.jsx)(Re,{className:"navbar-brand",to:"#sideBarCollapse",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:"Short By Filter"}),(0,Me.jsx)("i",{className:"navbar-toggler",children:(0,Me.jsx)("span",{className:"fa fa-chevron-down"})})]}),(0,Me.jsx)("div",{className:"collapse navbar-collapse",id:"sideBarCollapse",children:(0,Me.jsx)("div",{className:"customeSidebar",children:Array.isArray(n)&&n.map((e=>{const n=Array.isArray(e.options)&&e.options.length>0?e.options:Array.isArray(e.attribute_values)&&e.attribute_values.length>0?e.attribute_values:null;return(0,Me.jsxs)("div",{children:[(0,Me.jsx)("div",{className:"headBx",children:e.attribute}),(0,Me.jsx)("div",{className:"listBx",children:(0,Me.jsxs)("select",{name:"status",className:"form-control",title:"Status",onChange:n=>{t(n,e.attribute)},children:[(0,Me.jsx)("option",{value:"any",children:"Any"}),Array.isArray(n)&&n.map((e=>(0,Me.jsx)("option",{value:e.value,children:e.value},e._id)))]})})]},e._id)}))})})]})})},bA=()=>{const{property:e,getAttributeFilterList:t,totalItem:n,getProperty:i,listLoading:o}=Kr(),[s,a]=(0,r.useState)(1),c=Math.ceil((null===n||void 0===n?void 0:n.RealEstate)/12),l=Z(),d=new URLSearchParams(l.search),u=d.get("sub_category"),h=d.get("category_id"),p=d.get("search"),[f,m]=(0,r.useState)([]),g={keyword_search:p,page:s,limit:12};(0,r.useEffect)((()=>{(async()=>{u?await i(g,u,f):await i(g,"",f)})()}),[p,s,u,f]),(0,r.useEffect)((()=>{(async()=>{u&&await t({sub:u}),h&&await t({main:h})})()}),[p,u,h]);return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(yl,{title:"Real Estate List Page",param:"Real Estate"}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),(0,Me.jsx)("div",{className:"col-md-2",children:(0,Me.jsx)(TA,{onFilter:(e,t,n)=>{const r=n||e.target.value||"",i=e.target.checked;if(console.log(r),"any"===r){const e=f.filter((e=>e.attribute!==t));m(e)}else(i||r)&&m([...f,{attribute:t,value:r}])}})}),(0,Me.jsxs)("div",{className:"col-md-8",children:[o.RealEstate?Array.from({length:3}).map(((e,t)=>(0,Me.jsx)(_h,{},t))):0===e.length?(0,Me.jsx)(Eh,{des:"Please check the spelling or try searching for something else. Thank you!."}):e.map(((e,t)=>(0,Me.jsx)(SA,{item:e},t))),(0,Me.jsx)("div",{align:"center",children:(0,Me.jsx)(gh,{spacing:2,children:(0,Me.jsx)(qu,{count:c,page:s,onChange:(e,t)=>a(t),color:"primary",variant:"outlined",shape:"rounded",boundaryCount:2,siblingCount:1})})})]}),(0,Me.jsx)(Zs,{})]})})})]})};var IA=__webpack_require__(1577);const NA=e=>{let{img:t}=e;return(0,Me.jsx)(IA.FN,{infiniteLoop:!0,children:Array.isArray(t)&&t.map(((e,t)=>(0,Me.jsx)("div",{className:"swiper-slide",style:{maxHeight:"600px",maxWidth:"800px"},children:(0,Me.jsx)("img",{height:100,width:200,style:{objectFit:"cover"},src:e,alt:""})},t)))})},CA=e=>{let{initialDetail:t}=e;const{id:n}=ne(),{getPropertyDetail:i,propertyDetail:o,setPropertyDetail:s,wishListAdd:a,wishListRemove:c,reletedList:l,getReletedProduct:d,userData:u}=Kr(),[h,p]=(0,r.useState)(!1),[f,m]=(0,r.useState)(!1);(0,r.useEffect)((()=>{!t&&n&&(async()=>{await i(n)})(),t&&t.data&&t.data._id&&s(t)}),[n,t]);const{description:g,image_1:y,image_2:v,image_3:_,photo:E,title:S,product_id:T,attribute_values:b,isWishlist:I,category_id:N,category_name:C,category_slug:w,sub_category_id:R,userId:A}=o.data||{},O=[E,y,v,_];(0,r.useEffect)((()=>{void 0!==I&&p(I)}),[I]);return(0,r.useEffect)((()=>{T&&N&&d(N,R,T)}),[T,N,R]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsx)("aside",{className:"row",children:(0,Me.jsx)("div",{className:"col-md-12",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/".concat(w,"?category_id=").concat(N),children:C})}),(0,Me.jsxs)("li",{className:"active",children:[" Detail Page Of ",S]})]})})})})}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),o.isLoad&&(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!o.isLoad&&(0,Me.jsxs)("div",{className:"col-md-10",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsx)("div",{className:"card",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"mb20",children:S}),(0,Me.jsx)(NA,{img:O})]})})}),(0,Me.jsxs)("div",{className:"col-md-4",children:[(0,Me.jsx)("div",{className:"card card-sm mb15",children:(0,Me.jsx)("div",{className:"card-body p5",children:(0,Me.jsxs)("ul",{className:"list-group list-group-horizontal list-inline",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)("b",{children:"Share"})}),(0,Me.jsx)("li",{children:"\xa0\xa0\xa0\xa0"}),(0,Me.jsx)("li",{children:(0,Me.jsxs)("div",{className:"iconWish",children:[(0,Me.jsx)("i",{className:"fa fa-share-alt text20 ",onClick:()=>{m(!0)}}),(0,Me.jsx)(vA,{isOpen:f,onClose:()=>{m(!1)}})]})}),(0,Me.jsx)("li",{children:"\xa0\xa0\xa0\xa0"}),(0,Me.jsx)("li",{children:u._id===A?"":(0,Me.jsx)("div",{className:"iconWish",onClick:()=>(e=>{h?(c(e),p(!1)):(a(e),p(!0))})(T),children:(0,Me.jsx)("i",{className:!0===h?"fa fa-heart text-danger":"fa fa-heart-o"})})})]})})}),(0,Me.jsx)("div",{className:"card card-sm mb15",children:(0,Me.jsxs)("div",{className:"card-body p5",children:[(0,Me.jsxs)("h5",{className:"mb0 text16 theme-text",children:[(0,Me.jsx)("i",{className:"fa fa-calendar"})," ",(0,Me.jsx)("b",{children:"Posted On"})," 05 Nov 2023"]}),(0,Me.jsxs)("p",{className:"text-muted mb5",children:[(0,Me.jsx)("b",{children:"Location :"})," Berliner Festspiele, Germany"]}),(0,Me.jsx)("div",{children:(0,Me.jsx)("iframe",{title:S,allowFullScreen:!0,height:"350",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d19429.71981350022!2d13.274301454071658!3d52.50239880695637!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47a850f9c36ee8a5%3A0xe2db0292ab5e1528!2sBerliner%20Festspiele!5e0!3m2!1sen!2sin!4v1699431152474!5m2!1sen!2sin",style:{border:"0"},width:"100%"})})]})}),(0,Me.jsx)("div",{className:"card card-sm",children:u._id===A?"":(0,Me.jsx)(yA,{})})]})]}),(0,Me.jsx)("div",{className:"col-md-12 mt10",children:(0,Me.jsx)("div",{className:"card",children:(0,Me.jsx)("div",{className:"card-body",children:(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)("div",{className:"property-attributes",children:(0,Me.jsxs)("div",{className:"attr-list",children:[(0,Me.jsx)("h4",{children:"Property Specification"}),(0,Me.jsx)("table",{className:"table table-bordered table-striped",children:(0,Me.jsx)("tbody",{children:Array.isArray(b)&&b.map((e=>e.value&&(0,Me.jsxs)("tr",{children:[(0,Me.jsx)("td",{children:(0,Me.jsx)("strong",{children:e.attribute})}),(0,Me.jsx)("td",{children:e.value})]},e._id)))})})]})})}),(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsxs)("div",{className:"property-description",children:[(0,Me.jsx)("h4",{children:S}),(0,Me.jsxs)("div",{className:"mt25",children:[(0,Me.jsx)("h5",{children:"Property Description :"}),(0,Me.jsxs)("p",{children:[g," "]})]})]})})]})})})}),(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-12",children:[(0,Me.jsx)("h5",{className:"mt-3",children:"Related Field"}),(0,Me.jsx)("hr",{className:"mt0"})]}),Array.isArray(l)&&l.map((e=>(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("div",{className:"card mb-3",style:{maxWidth:540},children:(0,Me.jsxs)("div",{className:"row g-0",children:[(0,Me.jsx)(Re,{to:"/product/related-product/".concat(e._id),className:"col-md-4",children:(0,Me.jsx)("img",{src:e.image,className:"img-fluid rounded-start",style:{height:"180px"},alt:"..."})}),(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:e.title}),(0,Me.jsx)("p",{className:"mt10",style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description})]})})]})})},e._id)))]})]}),(0,Me.jsx)(Zs,{})]})})})]})},wA=()=>{const{RegisterUser:e}=Kr(),[t,n]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[s,a]=(0,r.useState)(""),[c,l]=(0,r.useState)(""),[d,u]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),f=ee();return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{className:"box-form",children:[(0,Me.jsx)("div",{className:"left",style:{background:"url(./assets/images/login-bg.jpg) center bottom"},children:(0,Me.jsxs)("div",{className:"overlay",children:[(0,Me.jsx)("h1",{children:"Success starts here"}),(0,Me.jsxs)("ul",{children:[(0,Me.jsx)("li",{children:"Over 600 categories"}),(0,Me.jsx)("li",{children:"Pay per project, not per hour"}),(0,Me.jsx)("li",{children:"Access to talent and businesses across the globe"})]})]})}),(0,Me.jsxs)("div",{className:"right",children:[(0,Me.jsx)("p",{className:"mb5",children:(0,Me.jsxs)(Re,{className:"text-muted",to:"/login",children:[(0,Me.jsx)("i",{className:"fa fa-long-arrow-left"})," Back"]})}),(0,Me.jsx)("h3",{children:"Sign up with Dzital"}),(0,Me.jsx)("div",{className:"formBx",children:(0,Me.jsxs)("form",{className:"px-md-1 mt30",children:[(0,Me.jsxs)("div",{className:"form-outline mb-4",children:[(0,Me.jsxs)("label",{htmlFor:"",children:[(0,Me.jsx)("b",{children:"Name"})," ",(0,Me.jsx)("span",{className:"text text-danger",children:"*"})]}),(0,Me.jsx)("input",{type:"text",value:c,onChange:e=>l(e.target.value),className:"form-control"})]}),(0,Me.jsxs)("div",{className:"form-outline mb-3",children:[(0,Me.jsxs)("label",{htmlFor:"",children:[(0,Me.jsx)("b",{children:"Email"})," ",(0,Me.jsx)("span",{className:"text text-danger",children:"*"})]}),(0,Me.jsx)("input",{type:"email",value:t,onChange:e=>n(e.target.value),className:"form-control",required:!0})]}),(0,Me.jsxs)("div",{className:"form-outline mb-4",children:[(0,Me.jsxs)("label",{htmlFor:"",children:[(0,Me.jsx)("b",{children:"Password"})," ",(0,Me.jsx)("span",{className:"text text-danger",children:"*"})]}),(0,Me.jsxs)("div",{className:"input-group mb-3",children:[(0,Me.jsx)("input",{type:d?"text":"password",value:i,onChange:e=>o(e.target.value),className:"form-control",placeholder:"Password","aria-describedby":"password-toggle",required:!0}),(0,Me.jsx)("span",{className:"input-group-text",id:"password-toggle",onClick:()=>{u(!d)},children:d?(0,Me.jsx)(uA,{}):(0,Me.jsx)(lA,{})})]})]}),(0,Me.jsxs)("div",{className:"form-outline mb-4",children:[(0,Me.jsxs)("label",{htmlFor:"",children:[(0,Me.jsx)("b",{children:"Confirm Password"})," ",(0,Me.jsx)("span",{className:"text text-danger",children:"*"})]}),(0,Me.jsxs)("div",{className:"input-group mb-3",children:[(0,Me.jsx)("input",{type:h?"text":"password",value:s,onChange:e=>a(e.target.value),className:"form-control",placeholder:"Confirm Password","aria-describedby":"password-toggle",required:!0}),(0,Me.jsx)("span",{className:"input-group-text",id:"password-toggle",onClick:()=>{p(!h)},children:h?(0,Me.jsx)(uA,{}):(0,Me.jsx)(lA,{})})]})]}),(0,Me.jsxs)("div",{className:"row mb-2 ",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("button",{type:"button",className:"btn btnTheme width100 mb-1 mt-0",style:{background:"var(--theme-color)"},onClick:r=>{r.preventDefault();t&&i&&s&&c?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?i.length<8||!/^(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{8,}$/.test(i)?gl.info("Password must be at least 8 characters long and contain a special character"):i!==!s?(e(c,t,i),f("/login"),n(""),o(""),a(""),l(""),gl.success("Successfully registered!")):gl.info("password did not match with confirm password"):gl.info("Please input a valid Email"):gl.info("Please fill in all required fields")},children:"Continue"})}),(0,Me.jsxs)("p",{className:"text text-center mt20",children:["Already Have An Account ? ",(0,Me.jsx)(Re,{to:"/login",children:" LogIn"})," "]})]})]})}),(0,Me.jsx)("p",{className:"text14 text-muted",children:"By joining, you agree to the Dzital Terms of Service and to occasionally receive emails from us. Please read our Privacy Policy to learn how we use your personal data."})]})]})}),(0,Me.jsx)(Zs,{})]})})})})},RA={type:Un().string,tooltip:Un().bool,as:Un().elementType},AA=r.forwardRef(((e,t)=>{let{as:n="div",className:r,type:i="valid",tooltip:o=!1,...s}=e;return(0,Me.jsx)(n,{...s,ref:t,className:xe()(r,"".concat(i,"-").concat(o?"tooltip":"feedback"))})}));AA.displayName="Feedback",AA.propTypes=RA;const OA=AA,MA=r.createContext({}),DA=r.forwardRef(((e,t)=>{let{id:n,bsPrefix:i,className:o,type:s="checkbox",isValid:a=!1,isInvalid:c=!1,as:l="input",...d}=e;const{controlId:u}=(0,r.useContext)(MA);return i=Je(i,"form-check-input"),(0,Me.jsx)(l,{...d,ref:t,type:s,id:n||u,className:xe()(o,i,a&&"is-valid",c&&"is-invalid")})}));DA.displayName="FormCheckInput";const kA=DA,xA=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,htmlFor:o,...s}=e;const{controlId:a}=(0,r.useContext)(MA);return n=Je(n,"form-check-label"),(0,Me.jsx)("label",{...s,ref:t,htmlFor:o||a,className:xe()(i,n)})}));xA.displayName="FormCheckLabel";const LA=xA;const PA=r.forwardRef(((e,t)=>{let{id:n,bsPrefix:i,bsSwitchPrefix:o,inline:s=!1,reverse:a=!1,disabled:c=!1,isValid:l=!1,isInvalid:d=!1,feedbackTooltip:u=!1,feedback:h,feedbackType:p,className:f,style:m,title:g="",type:y="checkbox",label:v,children:_,as:E="input",...S}=e;i=Je(i,"form-check"),o=Je(o,"form-switch");const{controlId:T}=(0,r.useContext)(MA),b=(0,r.useMemo)((()=>({controlId:n||T})),[T,n]),I=!_&&null!=v&&!1!==v||function(e,t){return r.Children.toArray(e).some((e=>r.isValidElement(e)&&e.type===t))}(_,LA),N=(0,Me.jsx)(kA,{...S,type:"switch"===y?"checkbox":y,ref:t,isValid:l,isInvalid:d,disabled:c,as:E});return(0,Me.jsx)(MA.Provider,{value:b,children:(0,Me.jsx)("div",{style:m,className:xe()(f,I&&i,s&&"".concat(i,"-inline"),a&&"".concat(i,"-reverse"),"switch"===y&&o),children:_||(0,Me.jsxs)(Me.Fragment,{children:[N,I&&(0,Me.jsx)(LA,{title:g,children:v}),h&&(0,Me.jsx)(OA,{type:p,tooltip:u,children:h})]})})})}));PA.displayName="FormCheck";const jA=Object.assign(PA,{Input:kA,Label:LA}),UA=r.forwardRef(((e,t)=>{let{bsPrefix:n,type:i,size:o,htmlSize:s,id:a,className:c,isValid:l=!1,isInvalid:d=!1,plaintext:u,readOnly:h,as:p="input",...f}=e;const{controlId:m}=(0,r.useContext)(MA);return n=Je(n,"form-control"),(0,Me.jsx)(p,{...f,type:i,size:s,ref:t,readOnly:h,id:a||m,className:xe()(c,u?"".concat(n,"-plaintext"):n,o&&"".concat(n,"-").concat(o),"color"===i&&"".concat(n,"-color"),l&&"is-valid",d&&"is-invalid")})}));UA.displayName="FormControl";const FA=Object.assign(UA,{Feedback:OA}),zA=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=Je(r,"form-floating"),(0,Me.jsx)(i,{ref:t,className:xe()(n,r),...o})}));zA.displayName="FormFloating";const VA=zA,BA=r.forwardRef(((e,t)=>{let{controlId:n,as:i="div",...o}=e;const s=(0,r.useMemo)((()=>({controlId:n})),[n]);return(0,Me.jsx)(MA.Provider,{value:s,children:(0,Me.jsx)(i,{...o,ref:t})})}));BA.displayName="FormGroup";const GA=BA;function HA(e){let{as:t,bsPrefix:n,className:i,...o}=e;n=Je(n,"col");const s=function(){const{breakpoints:e}=(0,r.useContext)(qe);return e}(),a=function(){const{minBreakpoint:e}=(0,r.useContext)(qe);return e}(),c=[],l=[];return s.forEach((e=>{const t=o[e];let r,i,s;delete o[e],"object"===typeof t&&null!=t?({span:r,offset:i,order:s}=t):r=t;const d=e!==a?"-".concat(e):"";r&&c.push(!0===r?"".concat(n).concat(d):"".concat(n).concat(d,"-").concat(r)),null!=s&&l.push("order".concat(d,"-").concat(s)),null!=i&&l.push("offset".concat(d,"-").concat(i))})),[{...o,className:xe()(i,...c,...l)},{as:t,bsPrefix:n,spans:c}]}const WA=r.forwardRef(((e,t)=>{const[{className:n,...r},{as:i="div",bsPrefix:o,spans:s}]=HA(e);return(0,Me.jsx)(i,{...r,ref:t,className:xe()(n,!s.length&&o)})}));WA.displayName="Col";const YA=WA,qA=r.forwardRef(((e,t)=>{let{as:n="label",bsPrefix:i,column:o=!1,visuallyHidden:s=!1,className:a,htmlFor:c,...l}=e;const{controlId:d}=(0,r.useContext)(MA);i=Je(i,"form-label");let u="col-form-label";"string"===typeof o&&(u="".concat(u," ").concat(u,"-").concat(o));const h=xe()(a,i,s&&"visually-hidden",o&&u);return c=c||d,o?(0,Me.jsx)(YA,{ref:t,as:"label",className:h,htmlFor:c,...l}):(0,Me.jsx)(n,{ref:t,className:h,htmlFor:c,...l})}));qA.displayName="FormLabel";const KA=qA,QA=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,id:o,...s}=e;const{controlId:a}=(0,r.useContext)(MA);return n=Je(n,"form-range"),(0,Me.jsx)("input",{...s,type:"range",ref:t,className:xe()(i,n),id:o||a})}));QA.displayName="FormRange";const JA=QA,XA=r.forwardRef(((e,t)=>{let{bsPrefix:n,size:i,htmlSize:o,className:s,isValid:a=!1,isInvalid:c=!1,id:l,...d}=e;const{controlId:u}=(0,r.useContext)(MA);return n=Je(n,"form-select"),(0,Me.jsx)("select",{...d,size:o,ref:t,className:xe()(s,n,i&&"".concat(n,"-").concat(i),a&&"is-valid",c&&"is-invalid"),id:l||u})}));XA.displayName="FormSelect";const ZA=XA,$A=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i="small",muted:o,...s}=e;return n=Je(n,"form-text"),(0,Me.jsx)(i,{...s,ref:t,className:xe()(r,n,o&&"text-muted")})}));$A.displayName="FormText";const eO=$A,tO=r.forwardRef(((e,t)=>(0,Me.jsx)(jA,{...e,ref:t,type:"switch"})));tO.displayName="Switch";const nO=Object.assign(tO,{Input:jA.Input,Label:jA.Label}),rO=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,children:i,controlId:o,label:s,...a}=e;return n=Je(n,"form-floating"),(0,Me.jsxs)(GA,{ref:t,className:xe()(r,n),controlId:o,...a,children:[i,(0,Me.jsx)("label",{htmlFor:o,children:s})]})}));rO.displayName="FloatingLabel";const iO=rO,oO={_ref:Un().any,validated:Un().bool,as:Un().elementType},sO=r.forwardRef(((e,t)=>{let{className:n,validated:r,as:i="form",...o}=e;return(0,Me.jsx)(i,{...o,ref:t,className:xe()(n,r&&"was-validated")})}));sO.displayName="Form",sO.propTypes=oO;const aO=Object.assign(sO,{Group:GA,Control:FA,Floating:VA,Check:jA,Switch:nO,Label:KA,Text:eO,Range:JA,Select:ZA,FloatingLabel:iO}),cO=()=>{const{UserUpdate:e,userData:t}=Kr(),[n,i]=(0,r.useState)(t?t.email:""),[o,s]=(0,r.useState)(t?t.gender:""),[a,c]=(0,r.useState)(t?t.image:""),[l,d]=(0,r.useState)(t?t.mobile:""),[u,h]=(0,r.useState)(t?t.name:"");console.log(t);return(0,r.useEffect)((()=>{t&&(i(t.email),s(t.gender),c(t.image),d(t.mobile),h(t.name))}),[t]),(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{className:"box-form",children:[(0,Me.jsx)("div",{className:"left",style:{background:"url(./assets/images/login-bg.jpg) center bottom"},children:(0,Me.jsxs)("div",{className:"overlay",children:[(0,Me.jsx)("h1",{children:"Success starts here"}),(0,Me.jsxs)("ul",{children:[(0,Me.jsx)("li",{children:"Over 600 categories"}),(0,Me.jsx)("li",{children:"Pay per project, not per hour"}),(0,Me.jsx)("li",{children:"Access to talent and businesses across the globe"})]})]})}),(0,Me.jsxs)("div",{className:"right",children:[(0,Me.jsx)("p",{className:"mb5",children:(0,Me.jsxs)(Re,{className:"text-muted",to:"/account",children:[(0,Me.jsx)("i",{className:"fa fa-long-arrow-left"})," Back"]})}),(0,Me.jsx)("h3",{children:"Update Your Profile"}),(0,Me.jsxs)("div",{className:"formBx",children:[(0,Me.jsxs)("form",{className:"px-md-1 mt30",children:[(0,Me.jsxs)("div",{className:"form-outline mb-3",children:[(0,Me.jsx)("b",{children:"Profile"}),(0,Me.jsxs)("label",{className:"btn btn-outline-secondary col-md-12",children:[a?(0,Me.jsx)("div",{children:(0,Me.jsx)("img",{src:a||URL.createObjectURL(a),alt:"Image 1",height:50,width:50,className:"img img-responsive mr-2"})}):(0,Me.jsxs)("div",{children:[(0,Me.jsx)("i",{class:"fa-regular fa-image"}),(0,Me.jsx)("span",{className:"plus-sign",children:"+"})]}),(0,Me.jsx)("input",{type:"file",name:"image",accept:"image/*",onChange:e=>c(e.target.files[0]),hidden:!0})]})]}),(0,Me.jsxs)("div",{className:"form-outline mb-4",children:[(0,Me.jsx)("label",{htmlFor:"",children:(0,Me.jsx)("b",{children:"Name"})}),(0,Me.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),className:"form-control"})]}),(0,Me.jsx)("div",{className:"form-outline mb-4",children:(0,Me.jsxs)(aO.Group,{controlId:"formGender",children:[(0,Me.jsx)(aO.Label,{children:(0,Me.jsx)("b",{children:"Gender"})}),(0,Me.jsxs)(aO.Select,{value:o,onChange:e=>{s(e.target.value)},children:[(0,Me.jsx)("option",{value:"",children:"Select Gender"}),(0,Me.jsx)("option",{value:"male",children:"Male"}),(0,Me.jsx)("option",{value:"female",children:"Female"}),(0,Me.jsx)("option",{value:"other",children:"Other"})]})]})}),(0,Me.jsxs)("div",{className:"form-outline mb-3",children:[(0,Me.jsx)("label",{htmlFor:"",children:(0,Me.jsx)("b",{children:"Email"})}),(0,Me.jsx)("input",{type:"email",value:n,onChange:e=>i(e.target.value),className:"form-control",required:!0})]}),(0,Me.jsxs)("div",{className:"form-outline mb-4",children:[(0,Me.jsx)("label",{htmlFor:"",children:(0,Me.jsx)("b",{children:"Mobile"})}),(0,Me.jsx)("input",{type:"mobile",value:l,onChange:e=>d(e.target.value),className:"form-control"})]}),(0,Me.jsxs)("div",{className:"row mb-2",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("button",{type:"submit",className:"btn btnTheme width100 mb-1 mt-0",style:{background:"var(--theme-color)"},onClick:t=>{t.preventDefault(),e(u,n,l,a,o)},children:"Continue"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("p",{className:"mt-1",align:"right",children:(0,Me.jsx)(Re,{className:"text14 text-muted","data-bs-toggle":"collapse",to:"#forgotPassword",children:"Forgot Password"})})})]})]}),(0,Me.jsxs)("div",{className:"input-group collapse",id:"forgotPassword",children:[(0,Me.jsx)("input",{type:"text",className:"form-control",placeholder:"Recipient's username","aria-label":"Recipient's username","aria-describedby":"button-addon2"}),(0,Me.jsx)("button",{className:"btn btnTheme",type:"button",id:"button-addon2",children:"Button"})]})]}),(0,Me.jsx)("p",{className:"text14 text-muted",children:"By joining, you agree to the Dzital Terms of Service and to occasionally receive emails from us. Please read our Privacy Policy to learn how we use your personal data."})]})]})}),(0,Me.jsx)(Zs,{})]})})})})},lO=e=>{let{onFilter:t}=e;const{filterAttributeList:n}=Kr();return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsxs)("nav",{className:"navbar navbar-expand-lg bg-body-tertiary sideBarNav text14",children:[(0,Me.jsxs)("div",{className:"titelBx",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:[(0,Me.jsx)(Re,{className:"navbar-brand",to:"#sideBarCollapse","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse",type:"button","aria-controls":"sideBarCollapse",children:"Short By Filter"}),(0,Me.jsx)("i",{className:"navbar-toggler",children:(0,Me.jsx)("span",{className:"fa fa-chevron-down"})})]}),(0,Me.jsx)("div",{className:"collapse navbar-collapse",id:"sideBarCollapse",children:(0,Me.jsx)("div",{className:"customeSidebar",children:Array.isArray(n)&&n.map((e=>{const n=Array.isArray(e.options)&&e.options.length>0?e.options:Array.isArray(e.attribute_values)&&e.attribute_values.length>0?e.attribute_values:null;return(0,Me.jsx)("div",{children:n&&n.length>0&&(0,Me.jsxs)("div",{children:[(0,Me.jsx)("div",{className:"headBx",children:e.attribute},e._id),(0,Me.jsx)("div",{className:"listBx p0",children:n.map((n=>(0,Me.jsx)("ul",{className:"list-group list-group-flush",children:(0,Me.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-start",children:(0,Me.jsxs)("label",{children:[(0,Me.jsx)("input",{type:"checkbox",onChange:r=>{t(r,e.attribute,n.value)}})," ",n.value]})})},n._id)))})]})},e._id)}))})})]})})},dO=e=>{let{item:t}=e;const n=(e=>{const t=new Date-new Date(e),n=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5),i=Math.floor(t%36e5/6e4);return n>1?"".concat(n," days"):"".concat(r," hours, ").concat(i," minutes")})(t.createdAt),r=e=>{if(!Array.isArray(t.attribute_values))return null;const n=t.attribute_values.find((t=>t.attribute===e));return n?n.value:null},i=r("Location"),o=r("Experience"),s=r("Salary");return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)(Re,{className:"jobeItem",to:"/job-detail/".concat(t._id),children:(0,Me.jsx)("div",{className:"card mb20",children:(0,Me.jsxs)("div",{className:"card-body",style:{height:"220px"},children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-9 col-sm-12",children:(0,Me.jsx)("h5",{children:t.title})}),(0,Me.jsx)("div",{className:"col-md-3 col-sm-12 logoBx",children:(0,Me.jsx)("img",{src:"assets/images/g-logo.png",width:44,className:"mt5",alt:""})})]}),(0,Me.jsxs)("ul",{className:"list-inline divider mb5",children:[(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-briefcase"})," ",o||""]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-inr"})," ",s||"Not disclosed"]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," ",i||""]})]}),(0,Me.jsxs)("p",{className:"m0 mb10 mt20",children:[(0,Me.jsx)("i",{className:"fa fa-file-text-o"})," "," ",t.description]}),(0,Me.jsxs)("div",{className:"row footBx mt20",children:[(0,Me.jsx)("div",{className:"col",children:(0,Me.jsxs)("span",{className:"text-muted",children:[n," Ago"]})}),(0,Me.jsxs)("div",{className:"col text14",align:"right",children:[(0,Me.jsx)("i",{className:"fa fa-bookmark-o"})," Save"]})]})]})})})})})},uO=()=>{const{jobList:e,getJobList:t,totalItem:n,listLoading:i,getAttributeFilterList:o}=Kr(),[s,a]=(0,r.useState)(1),c=Z(),l=new URLSearchParams(c.search),d=l.get("sub_category"),u=l.get("category_id"),h=l.get("search"),[p,f]=(0,r.useState)([]),m=Math.ceil((null===n||void 0===n?void 0:n.job)/12),g={keyword_search:h,page:s,limit:12};(0,r.useEffect)((()=>{(async()=>{d?await t(g,d,p):await t(g,"",p)})()}),[h,s,d,p]),(0,r.useEffect)((()=>{(async()=>{d&&await o({sub:d}),u&&await o({main:u})})()}),[h,d,u]);return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(yl,{title:"Jobs List Page",param:"Jobs"}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),(0,Me.jsx)("div",{className:"col-md-2",children:(0,Me.jsx)(lO,{onFilter:(e,t,n)=>{if(!0===e.target.checked){const e=p.findIndex((e=>e.attribute===t));if(-1!==e){const t=[...p];t[e].value.push(n),f(t)}else{const e=[...p,{attribute:t,value:[n]}];f(e)}}else{const e=p.map((e=>(e.attribute===t&&(e.value=e.value.filter((e=>e!==n))),e))).filter((e=>e.value.length>0));f(e)}}})}),(0,Me.jsxs)("div",{className:"col-md-8",children:[(0,Me.jsx)("div",{className:"row",children:i.job?Array.from({length:4}).map(((e,t)=>(0,Me.jsx)(yh,{col:6},t))):0===e.length?(0,Me.jsx)(Eh,{des:"Please check the spelling or try searching for something else. Thank you!."}):Array.isArray(e)&&e.map(((e,t)=>(0,Me.jsx)(dO,{item:e},t)))}),(0,Me.jsx)("div",{align:"center",children:(0,Me.jsx)(gh,{spacing:2,children:(0,Me.jsx)(qu,{count:m,page:s,onChange:e=>a(e),color:"primary",variant:"outlined",shape:"rounded",boundaryCount:2,siblingCount:1})})})]}),(0,Me.jsx)(Zs,{})]})})})]})},hO=e=>{let{showModal:t,title:n,handleCloseModal:i,id:o}=e;const{userData:s,jobApply:a}=Kr(),{email:c,mobile:l,name:d}=s||{},[u,h]=(0,r.useState)(d),[p,f]=(0,r.useState)(c),[m,g]=(0,r.useState)(l),[y,v]=(0,r.useState)(null);return(0,Me.jsx)(Me.Fragment,{children:t&&(0,Me.jsx)("div",{className:"modal fade show",style:{display:"block"},id:"exampleModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,Me.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-centered",role:"document",children:(0,Me.jsxs)("div",{className:"modal-content shadow-lg border-0",children:[(0,Me.jsx)("div",{className:"modal-header bg-primary text-white",children:(0,Me.jsxs)("h5",{className:" modal-titled-flex d-flex justify-content-between align-items-center w-100",id:"exampleModalLabel",children:[(0,Me.jsxs)("span",{className:"font-weight-bold",children:[" Apply for ",n]}),(0,Me.jsx)("span",{className:"font-weight-bold",onClick:i,type:"button",children:(0,Me.jsx)(Ks,{})})]})}),(0,Me.jsx)("div",{className:"modal-body",children:(0,Me.jsx)("div",{className:"container",children:(0,Me.jsx)("div",{className:"row justify-content-center",children:(0,Me.jsx)("div",{className:"col-lg-9",children:(0,Me.jsx)("div",{className:"card border-0",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsxs)("div",{className:"mb-4",children:[(0,Me.jsx)("label",{className:"mb10 ",style:{fontWeight:"bold"},children:" Enter Full Name :"}),(0,Me.jsx)("input",{type:"text",className:"form-control form-control-lg rounded-3",placeholder:"Full Name",value:u,onChange:e=>{h(e.target.value)},required:!0})]}),(0,Me.jsxs)("div",{className:"mb-4",children:[(0,Me.jsx)("label",{className:"mb10 ",style:{fontWeight:"bold"},children:" Email :"}),(0,Me.jsx)("input",{type:"email",className:"form-control form-control-lg rounded-3",placeholder:"Email Address",value:p,onChange:e=>{f(e.target.value)},required:!0})]}),(0,Me.jsxs)("div",{className:"mb-4",children:[(0,Me.jsx)("label",{className:"mb10 ",style:{fontWeight:"bold"},children:" Number :"}),(0,Me.jsx)("input",{type:"number",className:"form-control form-control-lg rounded-3",placeholder:"Number ",value:m,onChange:e=>{g(e.target.value)},required:!0})]}),(0,Me.jsxs)("div",{className:"mb-4",children:[(0,Me.jsx)("label",{className:"mb10 ",style:{fontWeight:"bold"},children:" Upload CV/Resume  :"}),(0,Me.jsx)("input",{className:"form-control form-control-lg rounded-3",id:"formFileLg",type:"file",onChange:e=>{v(e.target.files[0])},required:!0}),(0,Me.jsx)("div",{className:"small text-muted mt-2",children:"Upload your CV/Resume or any other relevant file. Max file size 50 MB"})]}),(0,Me.jsx)("div",{className:"text-center",children:(0,Me.jsx)("button",{type:"submit",onClick:()=>{const e=new FormData;e.append("name",u),e.append("email",p),e.append("mobile",m),e.append("file",y),e.append("job_id",o),a(e),u&&p&&m&&y&&i()},className:"btn btn-primary btn-lg text-white",children:"Send Application"})})]})})})})})})]})})})})},pO=e=>{let{initialDetail:t}=e;const{getJobListDetail:n,jobDetail:i,setJobDetail:o,getJobList:s,getReletedProduct:a,isLogIn:c,reletedList:l,jobList:d,userData:u}=Kr(),{id:h}=ne(),p=Z(),[f,m]=(0,r.useState)(!1),g=ee();(0,r.useEffect)((()=>{!t&&h&&(async()=>{await n(h)})(),t&&t.data&&t.data._id&&o(t)}),[h,t]),(0,r.useEffect)((()=>{(async()=>{await s(h)})()}),[h]);const{description:y,title:v,attribute_values:_,createdAt:E,category_id:S,category_name:T,category_slug:b,product_id:I,sub_category_id:N,userId:C,_id:w}=i.data||{},R=e=>{if(!Array.isArray(_))return null;const t=_.find((t=>t.attribute===e));return t?t.value:null},A=R("Location"),O=R("Experience"),M=R("Salary"),D=R("Company Name"),k=(e=>{const t=new Date-new Date(e),n=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5),i=Math.floor(t%36e5/6e4);return n>1?"".concat(n," days"):"".concat(r," hours, ").concat(i," minutes")})(E);(0,r.useEffect)((()=>{I&&S&&a(S,N,I)}),[I,S,N]);return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsx)("aside",{className:"row",children:(0,Me.jsx)("div",{className:"col-md-12",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/".concat(b,"?category_id=").concat(S),children:T})}),(0,Me.jsxs)("li",{className:"active",children:["Detail Page Of ",v]})]})})})})}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),i.isLoad&&(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!i.isLoad&&(0,Me.jsxs)("div",{className:"col-md-6",children:[(0,Me.jsx)("div",{className:"card jobeItem mb20",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-9 col-sm-12",children:[(0,Me.jsx)("h5",{children:v}),(0,Me.jsx)("h6",{className:"reviewList",children:(0,Me.jsxs)("b",{children:[(0,Me.jsx)("i",{className:"fa-solid fa-location-crosshairs mx-2",children:" "}),D||""]})})]}),(0,Me.jsx)("div",{className:"col-md-3 col-sm-12 logoBx",children:(0,Me.jsx)("img",{src:"assets/images/g-logo.png",width:44,className:"mt5",alt:""})})]}),(0,Me.jsxs)("ul",{className:"list-inline divider mb5",children:[(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-briefcase"})," ",O||""]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-inr"})," ",M||"Not Disclosed"]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," ",A||"Not Mentioned"]})]}),(0,Me.jsx)("hr",{}),(0,Me.jsx)("div",{className:"row",children:(0,Me.jsxs)("div",{className:"col-md-6 d-flex justify-content-between",children:[(0,Me.jsxs)("p",{className:"mt5 mb5 text16",children:[(0,Me.jsx)("b",{children:"Posted :"})," ",k," ago"]}),u._id===C?" ":(0,Me.jsx)("div",{children:c?(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("button",{type:"button",className:"btn btn-primary px-3 text-white",onClick:()=>{m(!0)},children:"Apply"}),(0,Me.jsx)(hO,{showModal:f,title:v,handleCloseModal:()=>{m(!1)},id:w})]}):(0,Me.jsx)("button",{onClick:()=>{return e="/message",void(c?g(e):(gl("please Login first"),setTimeout((()=>{g("/login?redirect=".concat(p.pathname))}),1e3)));var e},className:"btn btn-primary text-white",children:"Login to Apply"})})]})})]})}),(0,Me.jsx)("div",{className:"card mb20",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{children:"Job description"}),(0,Me.jsxs)("p",{children:[y," "]}),(0,Me.jsx)("hr",{}),Array.isArray(_)&&_.map((e=>(0,Me.jsxs)("p",{children:[(0,Me.jsxs)("b",{children:[e.attribute," : "]}),e.value]},e._id)))]})})]}),(0,Me.jsxs)("div",{className:"col-md-4",children:[u._id===C?"":(0,Me.jsx)(yA,{}),(0,Me.jsx)("div",{className:"card",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{children:(0,Me.jsx)("b",{children:"Similar jobs"})}),(0,Me.jsx)("hr",{}),Array.isArray(l)&&l.map((e=>{const t=t=>{if(!Array.isArray(d))return null;const n=null===d||void 0===d?void 0:d.find((t=>(null===t||void 0===t?void 0:t.product_id)===e._id));if(!n)return null;const r=null===n||void 0===n?void 0:n.attribute_values,i=null===r||void 0===r?void 0:r.find((e=>e.attribute===t));return i?null===i||void 0===i?void 0:i.value:null},n=t("Location"),r=t("Salary"),i=t("Company Name"),o=(e=>{const t=new Date-new Date(e),n=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5),i=Math.floor(t%36e5/6e4);return n>1?"".concat(n," days"):"".concat(r," hours, ").concat(i," minutes")})(e.createdAt);return(0,Me.jsxs)(Re,{to:"/product/related-product/".concat(e._id),className:"jobeItem",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-9 col-sm-12",children:[(0,Me.jsx)("h5",{children:e.title}),(0,Me.jsxs)("ul",{className:"reviewList mb5",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)("b",{children:i})}),(0,Me.jsx)("li",{className:"text-muted",children:"|"})]})]}),(0,Me.jsx)("div",{className:"col-md-3 col-sm-12 logoBx",children:(0,Me.jsx)("img",{src:"assets/images/g-logo.png",width:44,className:"mt5",alt:""})})]}),(0,Me.jsxs)("ul",{className:"list-inline divider mb5",children:[(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," ",n]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," ",r]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("b",{children:"Posted : "}),(0,Me.jsxs)("span",{className:"text-muted",children:[o," "]})]})]}),(0,Me.jsx)("hr",{})]},e._id)})),(0,Me.jsx)("div",{align:"center",children:(0,Me.jsx)(Re,{className:"btn btn-primary",to:"/".concat(b,"?category_id=").concat(S),children:"View all"})})]})})]}),(0,Me.jsx)(Zs,{})]})})})]})},fO=e=>{let{onFilter:t}=e;const{filterAttributeList:n}=Kr();return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"col-md-2",children:(0,Me.jsxs)("nav",{className:"navbar navbar-expand-lg bg-body-tertiary sideBarNav",children:[(0,Me.jsxs)("div",{className:"titelBx",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:[(0,Me.jsx)(Re,{className:"navbar-brand",to:"#sideBarCollapse",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:"Short By Filter"}),(0,Me.jsx)("i",{className:"navbar-toggler",children:(0,Me.jsx)("span",{className:"fa fa-chevron-down"})})]}),(0,Me.jsx)("div",{className:"collapse navbar-collapse",id:"sideBarCollapse",children:(0,Me.jsx)("div",{className:"customeSidebar",children:Array.isArray(n)&&n.map((e=>{const n=Array.isArray(e.options)&&e.options.length>0?e.options:Array.isArray(e.attribute_values)&&e.attribute_values.length>0?e.attribute_values:null;return(0,Me.jsx)("div",{children:n&&n.length>0&&(0,Me.jsxs)("div",{children:[(0,Me.jsx)("div",{className:"headBx",children:e.attribute},e._id),(0,Me.jsx)("div",{className:"listBx p0",children:n.map((n=>(0,Me.jsx)("ul",{className:"list-group list-group-flush",children:(0,Me.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-start",children:(0,Me.jsxs)("label",{children:[(0,Me.jsx)("input",{type:"checkbox",onChange:r=>{t(r,e.attribute,n.value)}})," ",n.value]})})},n._id)))})]})},e._id)}))})})]})})})},mO=e=>{let{item:t}=e;const{wishListAdd:n,wishListRemove:i,userData:o}=Kr(),[s,a]=(0,r.useState)(t.isWishlist);return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"col col-lg-4 proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",style:{height:"350px"},children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Re,{to:"/Fashion-Beauty-Details/".concat(t._id),children:(0,Me.jsx)("img",{src:t.photo,className:"card-img-top allImg",alt:""})}),o._id===t.userId?"":(0,Me.jsx)("div",{className:"iconWish",onClick:()=>(e=>{s?i(e):n(e),a(!s)})(t.product_id),children:(0,Me.jsx)("i",{className:"fa ".concat(s?"fa-heart text-danger":"fa-heart-o")})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)(Re,{to:"/Fashion-Beauty-Details/".concat(t._id),children:t.title})}),(0,Me.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:t.description})]})]})})})},gO=()=>{const{fashion:e,getAttributeFilterList:t,getFashionBeauty:n,totalItem:i,listLoading:o}=Kr(),[s,a]=(0,r.useState)(1),c=Math.ceil((null===i||void 0===i?void 0:i.Fashion)/12),l=Z(),d=new URLSearchParams(l.search),u=d.get("sub_category"),h=d.get("category_id"),p=d.get("search"),[f,m]=(0,r.useState)([]),g={keyword_search:p,page:s,limit:12};(0,r.useEffect)((()=>{(async()=>{u?await n(g,u,f):await n(g,"",f)})()}),[p,s,u,f]),(0,r.useEffect)((()=>{(async()=>{u&&await t({sub:u}),h&&await t({main:h})})()}),[p,u,h]);return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(yl,{title:"Fashion & Beauty List Page",param:"Fashion & Beauty"}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),(0,Me.jsx)(fO,{onFilter:(e,t,n)=>{if(!0===e.target.checked){const e=f.findIndex((e=>e.attribute===t));if(-1!==e){const t=[...f];t[e].value.push(n),m(t)}else{const e=[...f,{attribute:t,value:[n]}];m(e)}}else{const e=f.map((e=>(e.attribute===t&&(e.value=e.value.filter((e=>e!==n))),e))).filter((e=>e.value.length>0));m(e)}}}),(0,Me.jsxs)("div",{className:"col-md-8",children:[(0,Me.jsx)("div",{className:"row",children:o.Fashion?Array.from({length:6}).map(((e,t)=>(0,Me.jsx)(vh,{col:4},t))):0===e.length?(0,Me.jsx)(Eh,{des:"Please check the spelling or try searching for something else. Thank you!"}):Array.isArray(e)&&e.map(((e,t)=>(0,Me.jsx)(mO,{item:e},t)))}),(0,Me.jsx)("div",{align:"center",children:(0,Me.jsx)(gh,{spacing:2,children:(0,Me.jsx)(qu,{count:c,page:s,onChange:(e,t)=>a(t),color:"primary",variant:"outlined",shape:"rounded",boundaryCount:2,siblingCount:1})})})]}),(0,Me.jsx)(Zs,{})]})})})]})},yO=e=>{let{onFilter:t}=e;const{filterAttributeList:n}=Kr();return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"col-md-2",children:(0,Me.jsxs)("nav",{className:"navbar navbar-expand-lg bg-body-tertiary sideBarNav text14",children:[(0,Me.jsxs)("div",{className:"titelBx",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:[(0,Me.jsx)(Re,{className:"navbar-brand",to:"#sideBarCollapse","data-bs-toggle":"collapse","aria-controls":"sideBarCollapse",type:"button","data-bs-target":"#sideBarCollapse",children:"Short By Filter"}),(0,Me.jsx)("i",{className:"navbar-toggler",children:(0,Me.jsx)("span",{className:"fa fa-chevron-down"})})]}),(0,Me.jsx)("div",{className:"collapse navbar-collapse",id:"sideBarCollapse",children:(0,Me.jsx)("div",{className:"customeSidebar",children:(0,Me.jsx)("div",{className:"collapse navbar-collapse",id:"sideBarCollapse",children:(0,Me.jsx)("div",{className:"customeSidebar",children:Array.isArray(n)&&n.map((e=>{const n=Array.isArray(e.options)&&e.options.length>0?e.options:Array.isArray(e.attribute_values)&&e.attribute_values.length>0?e.attribute_values:null;return(0,Me.jsx)("div",{children:n&&n.length>0&&(0,Me.jsxs)("div",{children:[(0,Me.jsx)("div",{className:"headBx",children:e.attribute}),(0,Me.jsx)("div",{className:"listBx p0",children:n.map((n=>(0,Me.jsx)("ul",{className:"list-group list-group-flush",children:(0,Me.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-start",children:(0,Me.jsxs)("label",{children:[(0,Me.jsx)("input",{type:"checkbox",onChange:r=>{t(r,e.attribute,n.value)}},n._id)," ",n.value]})})},n._id)))})]})},e._id)}))})})})})]})})})},vO=e=>{let{item:t}=e;const n=(e=>{const t=new Date-new Date(e),n=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5),i=Math.floor(t%36e5/6e4);return n>1?"".concat(n," days"):"".concat(r," hours, ").concat(i," minutes")})(t.createdAt);return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"card mb20",children:(0,Me.jsx)("div",{className:"card-body jobeItemBx",children:(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-9",children:[(0,Me.jsx)("h4",{children:t.title}),(0,Me.jsxs)("p",{className:"text-muted mb5",children:[(0,Me.jsx)("i",{className:"fa fa-clock-o"})," Posted on : ",n," ago"]}),(0,Me.jsx)("p",{className:"mb-4",children:(e=>{const t=e.split(" ");return t.length>20?t.slice(0,20).join(" ")+"...":e})(t.description)})]}),(0,Me.jsx)("div",{className:"col-md-3 viewBx",align:"center",children:(0,Me.jsx)(Re,{className:"btn btn-outline-primary width100",to:"/freelancer-detail/".concat(t._id),children:"View & Apply"})})]})})},t._id)})},_O=()=>{const{freelancerList:e,getAttributeFilterList:t,totalItem:n,getFreelancer:i,listLoading:o}=Kr(),[s,a]=(0,r.useState)(1),c=Z(),l=new URLSearchParams(c.search),d=l.get("sub_category"),u=l.get("category_id"),h=l.get("search"),[p,f]=(0,r.useState)([]),m=Math.ceil((null===n||void 0===n?void 0:n.freelancer)/12),g={keyword_search:h||"",page:s,limit:12};(0,r.useEffect)((()=>{(async()=>{d?await i(g,d,p):await i(g,"",p)})()}),[s,d,p,h]),(0,r.useEffect)((()=>{(async()=>{d&&await t({sub:d}),u&&await t({main:u})})()}),[d,u]);return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(yl,{title:"FreeLancer List Page",param:"FreeLancer"}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),(0,Me.jsx)(yO,{onFilter:(e,t,n)=>{if(!0===e.target.checked){const e=p.findIndex((e=>e.attribute===t));if(-1!==e){const t=[...p];t[e].value.push(n),f(t)}else{const e=[...p,{attribute:t,value:[n]}];f(e)}}else{const e=p.map((e=>(e.attribute===t&&(e.value=e.value.filter((e=>e!==n))),e))).filter((e=>e.value.length>0));f(e)}}}),(0,Me.jsxs)("div",{className:"col-md-8",children:[o.freelancer?Array.from({length:3}).map(((e,t)=>(0,Me.jsx)(yh,{col:10},t))):0===e.length?(0,Me.jsx)(Eh,{des:"Please check the spelling or try searching for something else. Thank you!."}):Array.isArray(e)&&e.map(((e,t)=>(0,Me.jsx)(vO,{item:e},t))),(0,Me.jsx)("div",{align:"center",children:(0,Me.jsx)(gh,{spacing:2,children:(0,Me.jsx)(qu,{count:m,page:s,onChange:(e,t)=>a(t),color:"primary",variant:"outlined",shape:"rounded",boundaryCount:2,siblingCount:1})})})]}),(0,Me.jsx)(Zs,{})]})})})]})},EO=e=>{let{initialDetail:t}=e;const{id:n}=ne(),{getFreelancerDetails:i,freelancerDetail:o,getReletedProduct:s,setFreelancerDetail:a,reletedList:c}=Kr(),[l,d]=(0,r.useState)(!1);(0,r.useEffect)((()=>{!t&&n&&(async()=>{await i(n)})(),t&&t.data&&t.data._id&&a(t)}),[n,t]);const{title:u,description:h,attribute_values:p,product_id:f,createdAt:m,sub_category_id:g,category_name:y,category_id:v,category_slug:_}=o.data||{};(0,r.useEffect)((()=>{f&&v&&s(v,g,f)}),[f,v,g]);const E=e=>{if(!Array.isArray(p))return null;const t=p.find((t=>t.attribute===e));return t?t.value:null},S=E("Salary"),T=E("Location"),b=E("Experience Level"),I=E("Industry Experience"),N=(e=>{const t=new Date-new Date(e),n=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5),i=Math.floor(t%36e5/6e4);return n>1?"".concat(n," days"):"".concat(r," hours, ").concat(i," minutes")})(m);return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsx)("aside",{className:"row",children:(0,Me.jsx)("div",{className:"col-md-12",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/".concat(_,"?category_id=").concat(v),children:y})}),(0,Me.jsxs)("li",{className:"active",children:[" Detail Page of ",u]})]})})})})}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),o.isLoad&&(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!o.isLoad&&(0,Me.jsxs)("div",{className:"col-md-10",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsx)("h2",{className:"mb-3",children:u})}),(0,Me.jsxs)("div",{className:"col-md-4 d-flex gap-3 align-items-center",align:"right",children:[(0,Me.jsxs)(Re,{className:"btn btnTheme ",to:"#.",style:{background:"var(--theme-color)"},children:[(0,Me.jsx)("i",{className:"fa fa-envelope "})," Send Proposal"]}),(0,Me.jsxs)("div",{className:"iconWish",children:[(0,Me.jsx)("i",{className:"fa fa-share-alt text20 ",onClick:()=>{d(!0)}}),(0,Me.jsx)(vA,{isOpen:l,onClose:()=>{d(!1)}})]})]})]}),(0,Me.jsx)("hr",{}),(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-8",children:[(0,Me.jsx)("div",{className:"card jobeItem mb20",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-9 col-sm-12",children:(0,Me.jsx)("h5",{children:u})}),(0,Me.jsx)("div",{className:"col-md-3 col-sm-12 logoBx",children:(0,Me.jsx)("img",{src:"assets/images/g-logo.png",width:44,className:"mt5",alt:""})})]}),(0,Me.jsxs)("ul",{className:"list-inline divider mb5",children:[(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-briefcase"})," ",I||b||""]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-inr"})," ",S||"Not Disclosed"]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," ",T||"Not Mentioned"]})]}),(0,Me.jsx)("hr",{}),(0,Me.jsx)("div",{className:"row",children:(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("p",{className:"mt5 mb5 text16",children:[(0,Me.jsx)("b",{children:"Posted :"})," ",N," ago"]})})})]})}),(0,Me.jsx)("div",{className:"card ",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsxs)("h3",{children:["Description for ",u]}),(0,Me.jsx)("p",{className:"mb0",align:"justify",children:h}),(0,Me.jsx)("hr",{}),Array.isArray(p)&&p.map((e=>(0,Me.jsxs)("p",{children:[(0,Me.jsxs)("b",{children:[e.attribute," : "]}),e.value]},e._id)))]})})]}),(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsxs)("div",{className:"card text-bg-secondery",style:{background:"var(--theme-color-dark)"},children:[(0,Me.jsx)("div",{className:"card-header",children:(0,Me.jsx)("h5",{className:"text-light",children:"About the Client"})}),(0,Me.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,Me.jsxs)("li",{className:"list-group-item",children:[(0,Me.jsx)("i",{className:"fa fa-globe"})," ",(0,Me.jsx)("b",{children:"Country :"})," ",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill float-end",children:"Germany"})]}),(0,Me.jsxs)("li",{className:"list-group-item",children:[(0,Me.jsx)("i",{className:"fa fa-list"})," ",(0,Me.jsx)("b",{children:"Projects Paid :"})," ",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill float-end",children:"0"})]}),(0,Me.jsxs)("li",{className:"list-group-item",children:[(0,Me.jsx)("i",{className:"fa fa-pencil-square-o"})," ",(0,Me.jsx)("b",{children:"Projects Posted :"})," ",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill float-end",children:"1"})]}),(0,Me.jsxs)("li",{className:"list-group-item",children:[(0,Me.jsx)("i",{className:"fa fa-thumbs-o-up"})," ",(0,Me.jsx)("b",{children:"Total Feedbacks :"})," ",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill float-end",children:"1"})]}),(0,Me.jsxs)("li",{className:"list-group-item",children:[(0,Me.jsx)("i",{className:"fa fa-thumbs-o-up"})," ",(0,Me.jsx)("b",{children:"Feedbacks :"})," ",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill float-end",children:"1"})]}),(0,Me.jsxs)("li",{className:"list-group-item",children:[(0,Me.jsx)("i",{className:"fa fa-cubes"})," ",(0,Me.jsx)("b",{children:"Total Spent :"})," ",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill float-end",children:"\u20b9 0"})]}),(0,Me.jsxs)("li",{className:"list-group-item",children:[(0,Me.jsx)("i",{className:"fa fa-users"})," ",(0,Me.jsx)("b",{children:"Client Type"})," ",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill float-end",children:"Company"})]})]}),(0,Me.jsx)("div",{className:"card-footer text-light",children:"Member since 15 Nov, 2023"})]})})]}),(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-12",children:[(0,Me.jsx)("h5",{className:"mt-3",children:"Related Field"}),(0,Me.jsx)("hr",{className:"mt0"})]}),Array.isArray(c)&&c.map((e=>{const t=(e=>{const t=new Date-new Date(e),n=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5),i=Math.floor(t%36e5/6e4);return n>1?"".concat(n," days"):"".concat(r," hours, ").concat(i," minutes")})(e.createdAt);return(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("div",{className:"card mb-3",style:{maxWidth:540},children:(0,Me.jsxs)("div",{className:"row g-0",children:[(0,Me.jsx)(Re,{to:"/product/related-product/".concat(e._id),className:"col-md-4",children:(0,Me.jsx)("img",{src:e.image,className:"img-fluid rounded-start",style:{height:"100%"},alt:"..."})}),(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:e.title}),(0,Me.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.description}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsxs)("small",{className:"text-body-secondary",children:["Posted: ",t]})})]})})]})})},e._id)}))]})]}),(0,Me.jsx)(Zs,{})]})})})]})},SO=e=>{let{onFilter:t}=e;const{filterAttributeList:n}=Kr();return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"col-md-2",children:(0,Me.jsxs)("nav",{className:"navbar navbar-expand-lg bg-body-tertiary sideBarNav text14",children:[(0,Me.jsxs)("div",{className:"titelBx",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:[(0,Me.jsx)(Re,{className:"navbar-brand",to:"#sideBarCollapse",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:"Short By Filter"}),(0,Me.jsx)("i",{className:"navbar-toggler",children:(0,Me.jsx)("span",{className:"fa fa-chevron-down"})})]}),(0,Me.jsx)("div",{className:"collapse navbar-collapse",id:"sideBarCollapse",children:(0,Me.jsx)("div",{className:"customeSidebar",children:Array.isArray(n)&&n.map((e=>{const n=Array.isArray(e.options)&&e.options.length>0?e.options:Array.isArray(e.attribute_values)&&e.attribute_values.length>0?e.attribute_values:null;return(0,Me.jsx)("div",{children:n&&n.length>0&&(0,Me.jsxs)("div",{children:[(0,Me.jsx)("div",{className:"headBx",children:e.attribute},e._id),(0,Me.jsx)("div",{className:"listBx p0",children:n.map((n=>(0,Me.jsx)("ul",{className:"list-group list-group-flush",children:(0,Me.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-start",children:(0,Me.jsxs)("label",{children:[(0,Me.jsx)("input",{type:"checkbox",onChange:r=>{t(r,e.attribute,n.value)}})," ",n.value]})})},n._id)))})]})},e._id)}))})})]})})})},TO=e=>{let{item:t}=e;return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("div",{className:"lCItem",children:(0,Me.jsxs)("div",{className:"innerBx",children:[(0,Me.jsxs)("div",{className:"titelBx",children:[(0,Me.jsx)("i",{className:"fa fa-lightbulb-o"}),(0,Me.jsx)("h4",{children:t.title})]}),(0,Me.jsxs)("div",{className:"textCont",children:[(0,Me.jsx)("h5",{className:"mb-1 text16",children:(0,Me.jsx)("b",{children:t.title})}),(0,Me.jsx)("h6",{className:"mb-3 text14"}),(0,Me.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:t.description}),(0,Me.jsx)(Re,{className:"btn btnTheme width100",to:"/lessons-courses-detail/".concat(t._id),style:{background:"var(--theme-color)"},children:"Start course"})]})]})})})})},bO=()=>{const{lesson:e,getAttributeFilterList:t,getLesson:n,totalItem:i,listLoading:o}=Kr(),[s,a]=(0,r.useState)(1),c=Math.ceil((null===i||void 0===i?void 0:i.Lessons)/8),l=Z(),d=new URLSearchParams(l.search),u=d.get("sub_category"),h=d.get("category_id"),p=d.get("search"),[f,m]=(0,r.useState)([]),g={keyword_search:p,page:s,limit:8};(0,r.useEffect)((()=>{(async()=>{u?await n(g,u,f):await n(g,"",f)})()}),[p,s,u,f]),(0,r.useEffect)((()=>{(async()=>{u&&await t({sub:u}),h&&await t({main:h})})()}),[p,u,h]);return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(yl,{title:"Lessons & Courses List Page",param:"Lessons & Courses"}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),(0,Me.jsx)(SO,{onFilter:(e,t,n)=>{if(!0===e.target.checked){const e=f.findIndex((e=>e.attribute===t));if(-1!==e){const t=[...f];t[e].value.push(n),m(t)}else{const e=[...f,{attribute:t,value:[n]}];m(e)}}else{const e=f.map((e=>(e.attribute===t&&(e.value=e.value.filter((e=>e!==n))),e))).filter((e=>e.value.length>0));m(e)}}}),(0,Me.jsxs)("div",{className:"col-md-8",children:[(0,Me.jsx)("div",{className:"row",children:o.Lessons?Array.from({length:4}).map(((e,t)=>(0,Me.jsx)(yh,{col:6},t))):0===e.length?(0,Me.jsx)(Eh,{des:"Please check the spelling or try searching for something else. Thank you!"}):Array.isArray(e)&&e.map(((e,t)=>(0,Me.jsx)(TO,{item:e},t)))}),(0,Me.jsx)("div",{align:"center",children:(0,Me.jsx)(gh,{spacing:2,children:(0,Me.jsx)(qu,{count:c,page:s,onChange:(e,t)=>a(t),color:"primary",variant:"outlined",shape:"rounded",boundaryCount:2,siblingCount:1})})})]}),(0,Me.jsx)(Zs,{})]})})})]})},IO=e=>{let{item:t}=e;return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"col-md-3",children:(0,Me.jsx)("div",{className:"lCItem",children:(0,Me.jsxs)("div",{className:"innerBx",children:[(0,Me.jsxs)("div",{className:"titelBx",children:[(0,Me.jsx)("i",{className:"fa fa-lightbulb-o"}),(0,Me.jsx)("h5",{children:t.title})]}),(0,Me.jsxs)("div",{className:"textCont",children:[(0,Me.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:t.description}),(0,Me.jsx)(Re,{className:"btn btnTheme width100 mt10",to:"/product/related-product/".concat(t._id),style:{background:"var(--theme-color)"},children:"Start course"})]})]})})})})},NO=e=>{let{initialDetail:t}=e;const{id:n}=ne(),{getLessonDetail:i,lessonDetail:o,getReletedProduct:s,reletedList:a,setlessonDetail:c}=Kr(),[l,d]=(0,r.useState)(!1);(0,r.useEffect)((()=>{!t&&n&&(async()=>{await i(n)})(),t&&t.data&&t.data._id&&c(t)}),[n,t]);const{description:u,title:h,attribute_values:p,category_name:f,category_id:m,category_slug:g,product_id:y,sub_category_id:v}=o.data||{},_=e=>{if(!Array.isArray(p))return null;const t=p.find((t=>t.attribute===e));if(t&&t.value){const e=parseInt(t.value);if(!isNaN(e))return e}return null},E=_("Lessons"),S=_("Videos"),T=_("Quizzes"),b=_("Hours"),I=Array.isArray(p)?p.filter((e=>e.value.startsWith("https://youtu.be"))):[],N=e=>{const t=e.split("/").pop().split("?")[0];return"https://www.youtube.com/embed/".concat(t)};return(0,r.useEffect)((()=>{y&&m&&s(m,v,y)}),[y,m,v]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsx)("aside",{className:"row",children:(0,Me.jsx)("div",{className:"col-md-12",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/".concat(g,"?category_id=").concat(m),children:f})}),(0,Me.jsxs)("li",{className:"active",children:["Detail Page Of ",h]})]})})})})}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),o.isLoad&&(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!o.isLoad&&(0,Me.jsxs)("div",{className:"col-md-10",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsx)("h2",{className:"mb-3",children:h})}),(0,Me.jsx)("div",{className:"col-md-4",align:"right",children:(0,Me.jsxs)("div",{className:"col-md-4",align:"right",children:[(0,Me.jsx)("i",{className:"fa fa-share-alt text20 ",onClick:()=>{d(!0)}}),(0,Me.jsx)(vA,{isOpen:l,onClose:()=>{d(!1)}})]})})]}),(0,Me.jsx)("hr",{className:"mt0"}),(0,Me.jsxs)("div",{className:"row mb-3",children:[(0,Me.jsxs)("div",{className:"col-md-8",children:[(0,Me.jsx)("div",{className:"card freelanceDtls mb-3 ",style:{background:"#feffdb"},children:(0,Me.jsx)("div",{className:"card-body",children:(0,Me.jsxs)("ul",{children:[(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-file-text-o"}),(0,Me.jsx)("h6",{children:(0,Me.jsx)("b",{children:E||"Not Mentioned"})}),(0,Me.jsx)("p",{children:"Lessons"})]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-play"}),(0,Me.jsx)("h6",{children:(0,Me.jsx)("b",{children:S||"Not Mentioned"})}),(0,Me.jsx)("p",{children:"Videos"})]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-question"}),(0,Me.jsx)("h6",{children:(0,Me.jsx)("b",{children:T||"Not Mentioned"})}),(0,Me.jsx)("p",{children:"Quizzes"})]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-clock-o"}),(0,Me.jsx)("h6",{className:"text-success",children:(0,Me.jsx)("b",{children:b?"".concat(b," : 00"):"Not Mentioned"})}),(0,Me.jsx)("p",{children:"Hours"})]})]})})}),(0,Me.jsx)("div",{className:"card mb-3",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsxs)("h3",{className:"card-title",children:["Description for ",h]}),u,(0,Me.jsx)("hr",{})]})})]}),(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)("div",{className:"card",children:(0,Me.jsx)("div",{className:"card-body",children:I.map(((e,t)=>(0,Me.jsx)("div",{className:"video-responsive",children:(0,Me.jsx)("iframe",{width:"100%",height:"100%",src:N(e.value),title:"YouTube video ".concat(t+1),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},t)))})})}),(0,Me.jsxs)("div",{className:"col-md-12",children:[(0,Me.jsx)("h5",{className:"mt-3",children:"Related Courses"}),(0,Me.jsx)("hr",{className:"mt0"}),(0,Me.jsx)("div",{className:"row",children:Array.isArray(a)&&a.map((e=>(0,Me.jsx)(IO,{item:e},e._id)))})]})]})]}),(0,Me.jsx)(Zs,{})]})})})]})},CO=()=>{const{mypost:e,getMyPost:t,totalItem:n,myPostRemove:i,listLoading:o}=Kr(),[s,a]=(0,r.useState)(1),c=Math.ceil((null===n||void 0===n?void 0:n.post)/10),l={page:s,limit:10};(0,r.useEffect)((()=>{(async()=>{await t(l)})()}),[s]);return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"My Post"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"My Post"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),(0,Me.jsx)("div",{className:"col-md-3",children:(0,Me.jsx)(mA,{})}),(0,Me.jsx)("div",{className:"col-md-7",children:(0,Me.jsx)("div",{className:"card border-0",children:(0,Me.jsxs)("div",{className:"card card-body border-0",children:[(0,Me.jsx)("h2",{className:"text24 mb-1",children:"My Post"}),(0,Me.jsx)("p",{className:"text-muted mb-1",children:"Here you can see your post and edit them easily."}),(0,Me.jsx)("hr",{className:"mt0"}),o.Post?Array.from({length:3}).map(((e,t)=>(0,Me.jsx)(_h,{},t))):0===e.length?(0,Me.jsx)(Eh,{des:"Add a post, to See your Post Thank you!."}):Array.isArray(e)&&e.map((e=>(0,Me.jsx)("div",{className:"card mb-3 myPostItem",children:(0,Me.jsxs)("div",{className:"row g-0",children:[(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)(Re,{to:"/product/my-post/".concat(e._id),className:"imgBx",children:(0,Me.jsx)("img",{src:e.image,className:"img-fluid rounded-start",alt:"Dzital"})})}),(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-9",children:(0,Me.jsx)("h5",{className:"card-title mb-1",children:e.title})}),(0,Me.jsx)("div",{className:"col-md-3",align:"right",children:(0,Me.jsx)("h5",{className:"m0",children:(0,Me.jsx)("b",{className:"badge bg-warning text-dark"})})})]}),(0,Me.jsxs)("p",{className:"card-text mb-0",children:[e.description,"..."," "]}),(0,Me.jsx)("hr",{className:"mb-2 mt-1"}),"Approved"===e.status?(0,Me.jsxs)(Re,{className:"btn btn-success btn-sm",style:{marginRight:"3px"},children:[(0,Me.jsx)("i",{className:"fa fa-eye"})," Approved"]}):(0,Me.jsxs)(Re,{className:"btn btn-secondary btn-sm mx-1",style:{marginRight:"3px"},children:[(0,Me.jsx)("i",{className:"fa-regular fa-eye-slash"})," ","Unapproved"]}),(0,Me.jsxs)(Re,{to:"/updateProduct/".concat(e._id),className:"btn btn-dark btn-sm",children:[(0,Me.jsx)("i",{className:"fa-regular fa-pen-to-square "})," ","Edit"]}),(0,Me.jsxs)(Re,{className:"btn btn-danger btn-sm mx-1",onClick:()=>i(e._id),children:[(0,Me.jsx)("i",{className:"fa-sharp fa-solid fa-trash"})," ","Delete"]})]})})]})},e._id))),Array.isArray(e)&&e.length>0?(0,Me.jsx)("div",{align:"center",children:(0,Me.jsx)(gh,{spacing:2,children:(0,Me.jsx)(qu,{count:c,page:s,onChange:e=>{a(e)},color:"primary",variant:"outlined",shape:"rounded",boundaryCount:2,siblingCount:1})})}):""]})})}),(0,Me.jsx)(Zs,{})]})})})]})},wO=()=>{const{getMyPostListDetail:e,myPostDetail:t,updateMyPost:n}=Kr(),{id:i}=ne(),[o,s]=(0,r.useState)(""),[a,c]=(0,r.useState)(""),[l,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[p,f]=(0,r.useState)(""),[m,g]=(0,r.useState)([]),[y,v]=(0,r.useState)(!1),[_,E]=(0,r.useState)([]),[S,T]=(0,r.useState)({title:"",description:"",attribute_values:[],image:"",photo:"",image_1:"",image_2:"",image_3:""}),b=(e,t,n)=>{const{name:r,value:i,files:o}=e.target;if("attribute_value"===r){const e=[...S.attribute_values];e[t].value=i,T((t=>({...t,attribute_values:e})))}if(["photo","image","image_1","image_2","image_3"].includes(r)){const[t]=o;if(t){switch(r){case"photo":c(e.target.files[0]);break;case"image":s(e.target.files[0]);break;case"image_1":d(e.target.files[0]);break;case"image_2":h(e.target.files[0]);break;case"image_3":f(e.target.files[0])}T((e=>({...e,[r]:t}))),E((e=>({...e,[r]:URL.createObjectURL(t)})))}}else T((e=>({...e,[r]:i}))),g({...m,[n]:i})};(0,r.useEffect)((()=>{var e;if((null===(e=S.category_name)||void 0===e?void 0:e.length)>0){const e=S.category_name;null!==e&&void 0!==e&&e.includes("Jobs")||null!==e&&void 0!==e&&e.includes("Freelancer")||null!==e&&void 0!==e&&e.includes("Lessons & Courses")?v(!0):v(!1)}}));return(0,r.useEffect)((()=>{T({title:t.title,description:t.description,attribute_values:t.attribute_values,image:t.image,photo:t.photo,image_1:t.image_1,image_2:t.image_2,image_3:t.image_3})}),[t]),(0,r.useEffect)((()=>{e(i)}),[i]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"SELECTED CATEGORY"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{className:"active",to:"/my-post",children:"My Post"})}),(0,Me.jsx)("li",{className:"active",children:"Update Product"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{className:"card",children:[(0,Me.jsx)("div",{className:"card card-header",children:(0,Me.jsx)("h5",{className:" text-center ",children:"Update Product"})}),(0,Me.jsx)("div",{className:"card card-body border-0",children:(0,Me.jsxs)("form",{onSubmit:e=>{e.preventDefault();const{title:t,description:r,photo:o,image:s,image_1:a,image_2:c,image_3:l}=S,d=new FormData;d.append("title",t),d.append("description",r),!1===y?(d.append("photo",o||""),d.append("image_1",a||""),d.append("image_2",c||""),d.append("image_3",l||"")):d.append("image",s||""),Object.entries(m).forEach(((e,t)=>{let[n,r]=e;d.append("attributeData[".concat(t,"][attribute_id]"),n),d.append("attributeData[".concat(t,"][value]"),r)})),n(i,d)},encType:"multipart/form-data",children:[(0,Me.jsxs)("div",{className:"mb20",style:{maxWidth:"500px"},children:[(0,Me.jsx)("h6",{children:"Title"}),(0,Me.jsx)("input",{type:"text",name:"title",id:"title",value:S.title,onChange:b,className:"form-control"})]}),(0,Me.jsxs)("div",{className:"mb20",children:[(0,Me.jsx)("h6",{children:"Description"}),(0,Me.jsx)("textarea",{type:"text",name:"description",id:"description",value:S.description,onChange:b,className:"form-control min-vh-40"})]}),(0,Me.jsx)("div",{className:"radioBx mb20",children:(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"row",children:Array.isArray(S.attribute_values)&&S.attribute_values.map(((e,t)=>(0,Me.jsxs)("div",{className:"col-md-6 mt30",children:[(0,Me.jsx)("label",{style:{fontWeight:"bold",fontSize:"1em"},children:e.attribute}),(0,Me.jsx)("input",{type:"text",name:"attribute_value",id:"attribute_value_".concat(t),value:e.value,onChange:n=>b(n,t,e.attribute_id),className:"form-control mt-2"})]},e._id)))})})}),!1===y?(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("h5",{className:"m0 text-center mt50",children:"UPLOAD UP TO 4 PHOTOS"}),(0,Me.jsxs)("div",{className:"row mt10",children:[(0,Me.jsx)("div",{className:"col-sm-3",children:(0,Me.jsxs)("div",{className:"fileBx mt-2",children:[(0,Me.jsx)("input",{type:"file",name:"photo",id:"photo",style:{display:"none"},onChange:b}),(0,Me.jsx)("label",{htmlFor:"photo",children:(0,Me.jsx)("img",{src:_.photo||S.photo,height:70,width:100,alt:"photo"})})]})}),(0,Me.jsx)("div",{className:"col-sm-3",children:(0,Me.jsxs)("div",{className:"fileBx mt-2",children:[(0,Me.jsx)("input",{type:"file",name:"image_1",id:"img1",style:{display:"none"},onChange:b}),(0,Me.jsx)("label",{htmlFor:"img1",children:(0,Me.jsx)("img",{height:70,width:100,src:_.image_1||S.image_1,alt:"Img_1"})})]})}),(0,Me.jsx)("div",{className:"col-sm-3",children:(0,Me.jsxs)("div",{className:"fileBx mt-2",children:[(0,Me.jsx)("input",{type:"file",name:"image_2",id:"img2",onChange:b,style:{display:"none"}}),(0,Me.jsx)("label",{htmlFor:"img2",children:(0,Me.jsx)("img",{height:70,width:100,src:_.image_2||S.image_2,alt:"image_2"})})]})}),(0,Me.jsx)("div",{className:"col-sm-3",children:(0,Me.jsxs)("div",{className:"fileBx mt-2",children:[(0,Me.jsx)("input",{type:"file",name:"image_3",id:"img3",style:{display:"none"},onChange:b}),(0,Me.jsx)("label",{htmlFor:"img3",children:(0,Me.jsx)("img",{height:70,width:100,src:_.image_3||S.image_3,alt:"image_3"})})]})})]})]}):(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("h5",{className:"m30 text-center",children:"UPLOAD file"}),(0,Me.jsx)("div",{className:"row justify-content-center ",children:(0,Me.jsx)("div",{className:"col-sm-3",children:(0,Me.jsxs)("div",{className:"fileBx mt-2",children:[(0,Me.jsx)("input",{type:"file",name:"image",id:"img",onChange:b,style:{display:"none"},required:!0}),(0,Me.jsx)("label",{htmlFor:"img",children:(0,Me.jsx)("img",{height:70,width:100,src:_.image||S.image,alt:"photo"})})]})})})]}),(0,Me.jsx)(Ns,{type:"submit",className:"text text-white mt30 ",children:"Submit"})]})})]})}),(0,Me.jsx)(Zs,{})]})})})]})},RO=()=>{const{ChnagePassword:e,userData:t}=Kr(),[n,i]=(0,r.useState)(""),[o,s]=(0,r.useState)(""),[a,c]=(0,r.useState)(""),l=(e,t)=>{t(e.target.value)};return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(yl,{title:"change-password"}),(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),(0,Me.jsx)("div",{className:"col-md-3",children:(0,Me.jsx)(mA,{})}),(0,Me.jsx)("div",{className:"col-md-7",children:(0,Me.jsx)("div",{className:"card border-0",children:(0,Me.jsxs)("div",{className:"card card-body border-0",children:[(0,Me.jsx)("h2",{className:"text24 mb5",children:"Password & Security"}),(0,Me.jsx)("p",{className:"text-muted",children:"Manage your password settings and secure your account."}),t.social_id?(0,Me.jsxs)("form",{onSubmit:t=>{t.preventDefault(),o===a?e(n,o):gl.error("New password and confirm password must be the same")},children:[(0,Me.jsxs)("div",{className:"row mb-4 mt40",children:[(0,Me.jsxs)("div",{className:"col-md-6 mt-4",children:[(0,Me.jsx)("label",{className:"mb-1",children:(0,Me.jsx)("b",{children:"Set Password"})}),(0,Me.jsx)("input",{className:"form-control",type:"password",onChange:e=>l(e,s)})]}),(0,Me.jsxs)("div",{className:"col-md-6 mt-4",children:[(0,Me.jsx)("label",{className:"mb-1",children:(0,Me.jsx)("b",{children:"Confirm Password"})}),(0,Me.jsx)("input",{className:"form-control",type:"password",onChange:e=>l(e,c)})]})]}),(0,Me.jsx)("button",{className:"btn btnTheme",type:"submit",style:{width:"fit-content",background:"var(--theme-color)"},children:"Update Password"})]}):(0,Me.jsxs)("form",{onSubmit:t=>{t.preventDefault(),o===a?e(n,o):gl.error("New password and confirm password must be the same")},children:[(0,Me.jsx)("div",{className:"row",children:(0,Me.jsxs)("div",{className:"col-md-6 mt-2",children:[(0,Me.jsx)("label",{className:"mb-1",children:(0,Me.jsx)("b",{children:"Current Password"})}),(0,Me.jsx)("input",{className:"form-control",type:"password",onChange:e=>l(e,i)})]})}),(0,Me.jsxs)("div",{className:"row mb-4",children:[(0,Me.jsxs)("div",{className:"col-md-6 mt-4",children:[(0,Me.jsx)("label",{className:"mb-1",children:(0,Me.jsx)("b",{children:"New Password"})}),(0,Me.jsx)("input",{className:"form-control",type:"password",onChange:e=>l(e,s)})]}),(0,Me.jsxs)("div",{className:"col-md-6 mt-4",children:[(0,Me.jsx)("label",{className:"mb-1",children:(0,Me.jsx)("b",{children:"Confirm Password"})}),(0,Me.jsx)("input",{className:"form-control",type:"password",onChange:e=>l(e,c)})]})]}),(0,Me.jsx)("button",{className:"btn btnTheme",type:"submit",style:{width:"fit-content",background:"var(--theme-color)"},children:"Update Password"})]})]})})}),(0,Me.jsx)(Zs,{})]})})})]})},AO=()=>{const{serviceList:e,getSubServiceList:t,subServiceList:n,subServiceLoading:r}=Kr(),i=ee();return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"Add Post"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"Add Post"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{className:"card",children:[(0,Me.jsx)("div",{className:"card card-header",children:(0,Me.jsx)("h5",{children:"CHOOSE A CATEGORY"})}),(0,Me.jsx)("div",{className:"card card-body border-0",style:{minHeight:"500px"},children:(0,Me.jsx)("div",{className:"postCategoryBx",children:Array.isArray(e)&&e.map(((e,o)=>(0,Me.jsxs)("div",{className:"dropend",children:[(0,Me.jsx)("button",{type:"button",className:"dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:()=>{return n=e._id,void t(n);var n},children:e.title}),(0,Me.jsx)("ul",{className:"dropdown-menu",style:{maxHeight:"250px"},children:(0,Me.jsx)(Me.Fragment,{children:r?(0,Me.jsx)("div",{className:"spinner-border text-primary text-center",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})}):(0,Me.jsx)(Me.Fragment,{children:Array.isArray(n)&&n.map((t=>(0,Me.jsx)("li",{children:(0,Me.jsx)(Ns,{className:"dropdown-item",onClick:()=>((e,t)=>{try{i("/add-title",{state:{servicecategories:e,subservicecat:t}})}catch(Sv){console.log(Sv)}})(e._id,t._id),children:null===t||void 0===t?void 0:t.title})},t._id)))})})})]},o)))})})]})}),(0,Me.jsx)(Zs,{})]})})})]})};var OO=__webpack_require__(2157),MO=__webpack_require__.n(OO);const DO=()=>{const{wishList:e,wishListRemove:t,listLoading:n}=Kr(),[i,o]=(0,r.useState)(0),s=Math.ceil(e.length/1);return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"Wishlist"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"Wishlist"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-3",children:(0,Me.jsx)(mA,{})}),(0,Me.jsx)("div",{className:"col-md-7",children:(0,Me.jsx)("div",{className:"card border-0",children:(0,Me.jsxs)("div",{className:"card card-body border-0",children:[(0,Me.jsx)("h2",{className:"text24 mb-1",children:"Wishlist"}),(0,Me.jsx)("p",{className:"text-muted mb-1",children:"Here you can see your wishlist items."}),(0,Me.jsx)("hr",{className:"mt0"}),n.WishList?Array.from({length:3}).map(((e,t)=>(0,Me.jsx)(_h,{},t))):0===e.length?(0,Me.jsx)(Eh,{des:"Add a post, to See your Post Thank you!."}):e.map(((e,n)=>(0,Me.jsx)("div",{className:"card mb-3 myPostItem",children:(0,Me.jsxs)("div",{className:"row g-0",children:[(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)(Re,{to:"/product/wishlist/".concat(e._id),className:"imgBx",children:(0,Me.jsx)("img",{src:e.image,className:"img-fluid rounded-start",alt:e.title,style:{height:"200px"}})})}),(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("div",{className:"row",children:(0,Me.jsx)("div",{className:"col-md-9",children:(0,Me.jsx)("h5",{className:"card-title mb-1",children:e.title})})}),(0,Me.jsx)("p",{className:"card-text mb-0",children:e.description}),(0,Me.jsx)("hr",{className:"mb-2 mt-1"}),(0,Me.jsxs)("button",{className:"btn btn-danger btn-sm",onClick:()=>(e=>{t(e)})(e._id),children:[(0,Me.jsx)("i",{className:"fa-sharp fa-solid fa-trash mx-2"}),"Remove"]})]})})]})},n))),(0,Me.jsx)("div",{align:"center",children:(0,Me.jsx)(MO(),{breakLabel:"...",previousLabel:"Previous",nextLabel:"Next",pageCount:s,onPageChange:e=>{let{selected:t}=e;o(t)},containerClassName:"pagination",activeClassName:"active",renderOnZeroPageCount:null})})]})})}),(0,Me.jsx)("div",{className:"col-md-2",children:(0,Me.jsx)(Zs,{})})]})})})]})};var kO;function xO(e){if((!kO&&0!==kO||e)&&_t){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),kO=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return kO}const LO=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=Je(r,"modal-body"),(0,Me.jsx)(i,{ref:t,className:xe()(n,r),...o})}));LO.displayName="ModalBody";const PO=LO,jO=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,contentClassName:i,centered:o,size:s,fullscreen:a,children:c,scrollable:l,...d}=e;n=Je(n,"modal");const u="".concat(n,"-dialog"),h="string"===typeof a?"".concat(n,"-fullscreen-").concat(a):"".concat(n,"-fullscreen");return(0,Me.jsx)("div",{...d,ref:t,className:xe()(u,r,s&&"".concat(n,"-").concat(s),o&&"".concat(u,"-centered"),l&&"".concat(u,"-scrollable"),a&&h),children:(0,Me.jsx)("div",{className:xe()("".concat(n,"-content"),i),children:c})})}));jO.displayName="ModalDialog";const UO=jO,FO=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=Je(r,"modal-footer"),(0,Me.jsx)(i,{ref:t,className:xe()(n,r),...o})}));FO.displayName="ModalFooter";const zO=FO,VO=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:i="Close",closeButton:o=!1,...s}=e;return n=Je(n,"modal-header"),(0,Me.jsx)(Gn,{ref:t,...s,className:xe()(r,n),closeLabel:i,closeButton:o})}));VO.displayName="ModalHeader";const BO=VO,GO=Yn("h4"),HO=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=GO,...o}=e;return r=Je(r,"modal-title"),(0,Me.jsx)(i,{ref:t,className:xe()(n,r),...o})}));HO.displayName="ModalTitle";const WO=HO;function YO(e){return(0,Me.jsx)(On,{...e,timeout:null})}function qO(e){return(0,Me.jsx)(On,{...e,timeout:null})}const KO=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,style:o,dialogClassName:s,contentClassName:a,children:c,dialogAs:l=UO,"data-bs-theme":d,"aria-labelledby":u,"aria-describedby":h,"aria-label":p,show:f=!1,animation:m=!0,backdrop:g=!0,keyboard:y=!0,onEscapeKeyDown:v,onShow:_,onHide:E,container:S,autoFocus:T=!0,enforceFocus:b=!0,restoreFocus:I=!0,restoreFocusOptions:N,onEntered:C,onExit:w,onExiting:R,onEnter:A,onEntering:O,onExited:M,backdropClassName:D,manager:k,...x}=e;const[L,P]=(0,r.useState)({}),[j,U]=(0,r.useState)(!1),F=(0,r.useRef)(!1),z=(0,r.useRef)(!1),V=(0,r.useRef)(null),[B,G]=Fr(),H=kt(t,G),W=Yt(E),Y=Xe();n=Je(n,"modal");const q=(0,r.useMemo)((()=>({onHide:W})),[W]);function K(){return k||ir({isRTL:Y})}function Q(e){if(!_t)return;const t=K().getScrollbarWidth()>0,n=e.scrollHeight>et(e).documentElement.clientHeight;P({paddingRight:t&&!n?xO():void 0,paddingLeft:!t&&n?xO():void 0})}const J=Yt((()=>{B&&Q(B.dialog)}));sn((()=>{It(window,"resize",J),null==V.current||V.current()}));const X=()=>{F.current=!0},Z=e=>{F.current&&B&&e.target===B.dialog&&(z.current=!0),F.current=!1},$=()=>{U(!0),V.current=wt(B.dialog,(()=>{U(!1)}))},ee=e=>{"static"!==g?z.current||e.target!==e.currentTarget?z.current=!1:null==E||E():(e=>{e.target===e.currentTarget&&$()})(e)},te=(0,r.useCallback)((e=>(0,Me.jsx)("div",{...e,className:xe()("".concat(n,"-backdrop"),D,!m&&"show")})),[m,D,n]),ne={...o,...L};ne.display="block";return(0,Me.jsx)(Pn.Provider,{value:q,children:(0,Me.jsx)(wn,{show:f,ref:H,backdrop:g,container:S,keyboard:!0,autoFocus:T,enforceFocus:b,restoreFocus:I,restoreFocusOptions:N,onEscapeKeyDown:e=>{y?null==v||v(e):(e.preventDefault(),"static"===g&&$())},onShow:_,onHide:E,onEnter:(e,t)=>{e&&Q(e),null==A||A(e,t)},onEntering:(e,t)=>{null==O||O(e,t),bt(window,"resize",J)},onEntered:C,onExit:e=>{null==V.current||V.current(),null==w||w(e)},onExiting:R,onExited:e=>{e&&(e.style.display=""),null==M||M(e),It(window,"resize",J)},manager:K(),transition:m?YO:void 0,backdropTransition:m?qO:void 0,renderBackdrop:te,renderDialog:e=>(0,Me.jsx)("div",{role:"dialog",...e,style:ne,className:xe()(i,n,j&&"".concat(n,"-static"),!m&&"show"),onClick:g?ee:void 0,onMouseUp:Z,"data-bs-theme":d,"aria-label":p,"aria-labelledby":u,"aria-describedby":h,children:(0,Me.jsx)(l,{...x,onMouseDown:X,className:s,contentClassName:a,children:c})})})})}));KO.displayName="Modal";const QO=Object.assign(KO,{Body:PO,Header:BO,Title:WO,Footer:zO,Dialog:UO,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});var JO,XO="https://js.stripe.com/v3",ZO=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,$O="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",eM=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(XO).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},tM=null,nM=null,rM=null,iM=function(e){return null!==tM?tM:(tM=new Promise((function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn($O),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(XO,'"]')),t=0;t<e.length;t++){var n=e[t];if(ZO.test(n.src))return n}return null}();if(r&&e)console.warn($O);else if(r){if(r&&null!==rM&&null!==nM){var i;r.removeEventListener("load",rM),r.removeEventListener("error",nM),null===(i=r.parentNode)||void 0===i||i.removeChild(r),r=eM(e)}}else r=eM(e);rM=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),nM=function(e){return function(){e(new Error("Failed to load Stripe.js"))}}(n),r.addEventListener("load",rM),r.addEventListener("error",nM)}catch(Sv){return void n(Sv)}else t(null)})),tM.catch((function(e){return tM=null,Promise.reject(e)})))},oM=!1,sM=function(){return JO||(JO=iM(null).catch((function(e){return JO=null,Promise.reject(e)})),JO)};Promise.resolve().then((function(){return sM()})).catch((function(e){oM||console.warn(e)}));var aM=__webpack_require__(3393);function cM(){const e=(0,aM.useStripe)(),t=(0,aM.useElements)(),[n,i]=(0,r.useState)(null),[o,s]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(!e)return;const t=new URLSearchParams(window.location.search).get("payment_intent_client_secret");t&&e.retrievePaymentIntent(t).then((e=>{let{paymentIntent:t}=e;switch(t.status){case"succeeded":i("Payment succeeded!");break;case"processing":i("Your payment is processing.");break;case"requires_payment_method":i("Your payment was not successful, please try again.");break;default:i("Something went wrong.")}}))}),[e]);return(0,Me.jsxs)("form",{id:"payment-form",onSubmit:async n=>{if(n.preventDefault(),!e||!t)return;s(!0);const r=await e.confirmPayment({elements:t,confirmParams:{return_url:"http://localhost:3000"}});console.log("payment data",r);const{error:o}=r;"card_error"===o.type||"validation_error"===o.type?i(o.message):i("An unexpected error occurred."),s(!1)},children:[(0,Me.jsx)(aM.PaymentElement,{id:"payment-element",options:{layout:"tabs"}}),(0,Me.jsx)("button",{disabled:o||!e||!t,id:"submit",children:(0,Me.jsx)("span",{id:"button-text",children:o?(0,Me.jsx)("div",{className:"spinner",id:"spinner"}):"Pay now"})}),n&&(0,Me.jsx)("div",{id:"payment-message",children:n})]})}const lM=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];oM=!0;var r=Date.now();return sM().then((function(e){return function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"3.3.0",startTime:t})}(r,n),r}(e,t,r)}))}("pk_test_51BTUDGJAJfZb9HEBwDg86TN1KNprHjkfipXmEDMb0gSCassK5T3ZfxsAbcgKVmAIXF7oZ6ItlZZbXO6idTHE67IM007EwQ4uN3");const dM=function(){const[e,t]=(0,r.useState)("");(0,r.useEffect)((()=>{fetch("/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:[{id:"xl-tshirt"}]})}).then((e=>e.json())).then((e=>t(e.clientSecret||"")))}),[]);const n={clientSecret:e,appearance:{theme:"stripe"}};return(0,Me.jsx)("div",{children:e&&(0,Me.jsx)(aM.Elements,{options:n,stripe:lM,children:(0,Me.jsx)(cM,{})})})},uM=()=>{const{getUserplan:e,packagesList:t}=Kr(),[n,i]=(0,r.useState)(0),[o,s]=(0,r.useState)(!1),[a,c]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{s(!0);try{await e()}catch(Sv){console.error("Error fetching data:",Sv)}finally{s(!1)}})()}),[]);const l=()=>{c(!0)};return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(yl,{title:"packages"}),(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),(0,Me.jsx)("div",{className:"col-md-3",children:(0,Me.jsx)(mA,{})}),(0,Me.jsx)("div",{className:"col-md-7",children:(0,Me.jsx)("div",{className:"card border-0",children:(0,Me.jsxs)("div",{className:"card card-body border-0",children:[(0,Me.jsx)("h2",{className:"titleText pb-2",children:"Upgrade your membership to premium"}),!1===o?(0,Me.jsx)("div",{className:"priceTabBx",children:(0,Me.jsxs)("div",{className:"innerBx",children:[(0,Me.jsx)("div",{className:"nav flex-column nav-pills col-md-4",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:Array.isArray(t)&&t.map(((e,t)=>(0,Me.jsxs)("button",{className:"nav-link ".concat(t===n?"active":""),id:"".concat(e.title,"-tab"),onClick:()=>i(t),children:[(0,Me.jsx)("b",{children:e.title}),(0,Me.jsx)("br",{}),(0,Me.jsxs)("small",{children:[e.no_of_months," Months' Access from Date Of Upgrade"]})]},t)))}),(0,Me.jsx)("div",{className:"tab-content col-md-8",id:"v-pills-tabContent",children:Array.isArray(t)&&t.map(((e,t)=>(0,Me.jsxs)("div",{className:"tab-pane fade ".concat(t===n?"show active":""),id:"".concat(e.title),role:"tabpanel","aria-labelledby":"".concat(e.title,"-tab"),children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-9",children:[(0,Me.jsx)("h2",{children:e.title}),(0,Me.jsxs)("p",{className:"text-muted m0",children:[(0,Me.jsxs)("b",{children:[e.no_of_months," Months' Access from Date Of Upgrade"]}),(0,Me.jsx)("br",{}),"You thrive on interactive learning and personalised feedback from Link teacher."," "]})]}),(0,Me.jsx)("div",{className:"col-md-3",children:(0,Me.jsxs)("h1",{className:"theme-text",children:["\u20ac",e.amount]})})]}),(0,Me.jsx)("hr",{className:"mt-2 mb-2"}),(0,Me.jsx)("ul",{children:Array.isArray(e.benefit)&&e.benefit.map(((e,t)=>(0,Me.jsx)("li",{children:e},t)))}),"Free Plan"===e.title?"":(0,Me.jsx)("button",{className:"btn btnTheme",style:{background:"var(--theme-color)"},onClick:l,children:(0,Me.jsx)("b",{children:"Upgrade Packages"})})]},t)))})]})}):(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status"})})]})})}),(0,Me.jsx)(Zs,{})]})})}),(0,Me.jsxs)(QO,{show:a,size:"lg",onHide:()=>c(!1),children:[(0,Me.jsx)(QO.Header,{closeButton:!0,children:(0,Me.jsx)(QO.Title,{children:"Upgrade Modal"})}),(0,Me.jsx)(QO.Body,{children:(0,Me.jsx)(dM,{})}),(0,Me.jsxs)(QO.Footer,{children:[(0,Me.jsx)(Ns,{variant:"secondary",onClick:()=>c(!1),children:"Cancel"}),(0,Me.jsx)(Ns,{variant:"primary",onClick:()=>{c(!1)},children:"Upgrade"})]})]})]})},hM=()=>{const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{setTimeout((()=>{t(!0)}),2e3),t(!1)})()}),[]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"Contact Us"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"Contact Us"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),!1===e?(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,Me.jsxs)("div",{className:"col-md-10",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-sm-6",children:(0,Me.jsxs)("div",{className:"card",children:[(0,Me.jsx)("div",{className:"card-header",children:(0,Me.jsx)("h4",{className:"m0",children:"Get in touch with us"})}),(0,Me.jsxs)("form",{className:"card-body",children:[(0,Me.jsx)("div",{className:"form-group mb-4",children:(0,Me.jsx)("input",{type:"text",className:"form-control",id:"name",name:"nm",placeholder:"Name",required:"",autoFocus:""})}),(0,Me.jsx)("div",{className:"form-group form_left mb-4",children:(0,Me.jsx)("input",{type:"email",className:"form-control",id:"email",name:"em",placeholder:"Email",required:""})}),(0,Me.jsx)("div",{className:"form-group mb-4",children:(0,Me.jsx)("input",{type:"text",className:"form-control",id:"phone",maxLength:10,placeholder:"Mobile No.",required:""})}),(0,Me.jsxs)("div",{className:"form-group mb-4",children:[(0,Me.jsx)("textarea",{className:"form-control textarea-contact",rows:5,id:"comment",name:"FB",placeholder:"Type Your Message/Feedback here...",required:"",defaultValue:""}),(0,Me.jsx)("br",{}),(0,Me.jsxs)("button",{className:"btn btnTheme",type:"submit",style:{background:"var(--theme-color)"},children:[" ","Submit Message ",(0,Me.jsx)("span",{className:"fa fa-send"})," "]})]})]})]})}),(0,Me.jsx)("div",{className:"col-sm-6",children:(0,Me.jsx)("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d5071.152286297458!2d7.677349994282403!3d50.542054854758454!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47be85ab5e065037%3A0x2116fb58113383e5!2s56269%20Dierdorf-Br%C3%BCckrachdorf%2C%20Germany!5e0!3m2!1sen!2sin!4v1702715002839!5m2!1sen!2sin",width:"100%",height:480,style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})})]}),(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)("div",{className:"addIfoBx",children:(0,Me.jsx)("div",{className:"card mt-3",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("i",{className:"fa fa-envelope mb-3"}),(0,Me.jsx)("h5",{className:"card-title",children:"Email Id"}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("a",{to:"mailto:support@dzital.de",children:"ak@dzital.com"})})]})})})}),(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)("div",{className:"addIfoBx",children:(0,Me.jsx)("div",{className:"card mt-3",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("i",{className:"fa fa-phone mb-3"}),(0,Me.jsx)("h5",{className:"card-title",children:"Phone No."}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("a",{to:"tel:+4901728250794",children:"+4901728250794"})})]})})})}),(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)("div",{className:"addIfoBx",children:(0,Me.jsx)("div",{className:"card mt-3",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("i",{className:"fa fa-location-dot mb-3"}),(0,Me.jsx)("h5",{className:"card-title",children:"Office Address"}),(0,Me.jsx)("p",{className:"card-text",children:"P\xf6seldorfer Weg 13, 20148 Hamburg"})]})})})})]})]}),(0,Me.jsx)(Zs,{})]})})})]})},pM=()=>{const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{setTimeout((()=>{t(!0)}),2e3),t(!1)})()}),[]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"Privacy Policy"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"Privacy Policy"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",style:{backgroundColor:"#fff"},children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),!1===e?(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{children:[(0,Me.jsx)("h3",{children:"Privacy Policy"}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."})]})}),(0,Me.jsx)(Zs,{})]})})})]})},fM=()=>{const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{setTimeout((()=>{t(!0)}),1500),t(!1)})()}),[]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"Terms & Conditions"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"Terms & Conditions"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",style:{backgroundColor:"#fff"},children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),!1===e?(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{children:[(0,Me.jsx)("h3",{children:"Terms & Conditions"}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."})]})}),(0,Me.jsx)(Zs,{})]})})})]})},mM=e=>{let{item:t}=e;const{wishListAdd:n,wishListRemove:i,userData:o}=Kr(),[s,a]=(0,r.useState)(t.isWishlist);return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"col col-lg-4 proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",style:{height:"350px"},children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Re,{to:"/Electronics-detail/".concat(t._id),children:(0,Me.jsx)("img",{src:t.photo,className:"card-img-top allImg",alt:""})}),o._id===t.userId?"":(0,Me.jsx)("div",{className:"iconWish",onClick:()=>(e=>{s?i(e):n(e),a(!s)})(t.product_id),children:(0,Me.jsx)("i",{className:"fa ".concat(s?"fa-heart text-danger":"fa-heart-o")})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)(Re,{to:"/Electronics-detail/".concat(t._id),children:t.title})}),(0,Me.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:t.description})]})]})})})},gM=e=>{let{onFilter:t}=e;const{filterAttributeList:n}=Kr();return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsxs)("nav",{className:"navbar navbar-expand-lg bg-body-tertiary sideBarNav text14",children:[(0,Me.jsxs)("div",{className:"titelBx",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:[(0,Me.jsx)(Re,{className:"navbar-brand",to:"#sideBarCollapse",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:"Short By Filter"}),(0,Me.jsx)("i",{className:"navbar-toggler",children:(0,Me.jsx)("span",{className:"fa fa-chevron-down"})})]}),(0,Me.jsx)("div",{className:"collapse navbar-collapse",id:"sideBarCollapse",children:(0,Me.jsx)("div",{className:"customeSidebar",children:Array.isArray(n)&&n.map((e=>{const n=Array.isArray(e.options)&&e.options.length>0?e.options:Array.isArray(e.attribute_values)&&e.attribute_values.length>0?e.attribute_values:null;return(0,Me.jsx)("div",{children:n&&n.length>0&&(0,Me.jsxs)("div",{children:[(0,Me.jsx)("div",{className:"headBx",children:e.attribute},e._id),(0,Me.jsx)("div",{className:"listBx p0",children:n.map((n=>(0,Me.jsx)("ul",{className:"list-group list-group-flush",children:(0,Me.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-start",children:(0,Me.jsxs)("label",{children:[(0,Me.jsx)("input",{type:"checkbox",onChange:r=>{t(r,e.attribute,n.value)}})," ",n.value]})})},n._id)))})]})},e._id)}))})})]})})},yM=()=>{const{electronicsList:e,getAttributeFilterList:t,totalItem:n,getElectronicsProduct:i,listLoading:o}=Kr(),[s,a]=(0,r.useState)(1),c=Math.ceil((null===n||void 0===n?void 0:n.Electronics)/12),l=Z(),d=new URLSearchParams(l.search),u=d.get("sub_category"),h=d.get("category_id"),p=d.get("search"),[f,m]=(0,r.useState)([]),g={keyword_search:p,page:s,limit:12};(0,r.useEffect)((()=>{(async()=>{u?await i(g,u,f):await i(g,"",f)})()}),[p,s,u,f]),(0,r.useEffect)((()=>{(async()=>{u&&await t({sub:u}),h&&await t({main:h})})()}),[p,u,h]);return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(yl,{title:"Electronics List Page",param:"Electronics"}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),(0,Me.jsx)("div",{className:"col-md-2",children:(0,Me.jsx)(gM,{onFilter:(e,t,n)=>{if(!0===e.target.checked){const e=f.findIndex((e=>e.attribute===t));if(-1!==e){const t=[...f];t[e].value.push(n),m(t)}else{const e=[...f,{attribute:t,value:[n]}];m(e)}}else{const e=f.map((e=>(e.attribute===t&&(e.value=e.value.filter((e=>e!==n))),e))).filter((e=>e.value.length>0));m(e)}}})}),(0,Me.jsxs)("div",{className:"col-md-8",children:[(0,Me.jsx)("div",{className:"row ",children:o.Electronics?Array.from({length:6}).map(((e,t)=>(0,Me.jsx)(vh,{col:4},t))):0===e.length?(0,Me.jsx)(Eh,{des:"Please check the spelling or try searching for something else. Thank you!"}):Array.isArray(e)&&e.map(((e,t)=>(0,Me.jsx)(mM,{item:e},t)))}),(0,Me.jsx)("div",{align:"center",children:(0,Me.jsx)(gh,{spacing:2,children:(0,Me.jsx)(qu,{count:c,page:s,onChange:(e,t)=>a(t),color:"primary",variant:"outlined",shape:"rounded",siblingCount:0,boundaryCount:0})})})]}),(0,Me.jsx)(Zs,{})]})})})]})},vM=e=>{let{initialDetail:t}=e;const{id:n}=ne(),{getElectronicsProductDetails:i,electronicsItems:o,wishListAdd:s,wishListRemove:a,cartListAdd:c,getReletedProduct:l,reletedList:d,setElectronicsItems:u,userData:h}=Kr(),[p,f]=(0,r.useState)(!1),[m,g]=(0,r.useState)(1),[y,v]=(0,r.useState)(!1);(0,r.useEffect)((()=>{!t&&n&&(async()=>{await i(n)})(),t&&t.data&&t.data._id&&u(t)}),[n,t]);const{description:_,image_1:E,image_2:S,image_3:T,photo:b,product_id:I,title:N,attribute_values:C,_id:w,isWishlist:R,category_id:A,category_name:O,category_slug:M,sub_category_id:D,userId:k}=o.data||{},x=[b,E,S,T],L=e=>{if(!Array.isArray(C))return null;const t=C.find((t=>t.attribute===e));return t?t.value:null},P=L("Price"),j=L("Brand");(0,r.useEffect)((()=>{void 0!==R&&f(R)}),[R]);return(0,r.useEffect)((()=>{I&&A&&l(A,D,I)}),[I,A,D]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsx)("aside",{className:"row",children:(0,Me.jsx)("div",{className:"col-md-12",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/".concat(M,"?category_id=").concat(A),children:O})}),(0,Me.jsxs)("li",{className:"active",children:["Detail Page Of ",N]})]})})})})}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),o.isLoad&&(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!o.isLoad&&(0,Me.jsxs)("div",{className:"col-md-10",children:[(0,Me.jsx)("div",{className:"card",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-5",children:(0,Me.jsx)("div",{className:"swiper mainBannerSwiper",children:(0,Me.jsx)(_c,{loop:!0,navigation:!0,modules:[Sc],className:"mySwiper",children:Array.isArray(x)&&x.map(((e,t)=>(0,Me.jsx)(Ec,{children:(0,Me.jsx)("div",{className:"swiper-slide",children:(0,Me.jsx)("img",{src:e,alt:""})})},t)))})})}),(0,Me.jsxs)("div",{className:"col-md-7",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-10 col-sm-12",children:(0,Me.jsx)("h2",{children:j||""})}),(0,Me.jsx)("div",{className:"col-md-10 col-sm-12",children:(0,Me.jsx)("h4",{className:"text-muted",children:N})}),(0,Me.jsxs)("div",{className:"col-md-2 flex col-sm-12",align:"right",children:[(0,Me.jsxs)("div",{className:"cursor-pointer",children:[(0,Me.jsx)("i",{className:"fa fa-share-alt text20 ",onClick:()=>{v(!0)}}),(0,Me.jsx)(vA,{isOpen:y,onClose:()=>{v(!1)}})]}),h._id===k?"":(0,Me.jsx)("div",{className:"iconWish",onClick:()=>(e=>{p?(a(e),f(!1)):(s(e),f(!0))})(I),children:(0,Me.jsx)("i",{className:!0===p?"fa fa-heart text-danger":"fa fa-heart-o"})})]})]}),(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-5 col-sm-12",children:[(0,Me.jsx)("h5",{className:"text-success",children:"Special price"}),(0,Me.jsx)("h5",{children:(0,Me.jsxs)("span",{className:"text28",children:[(0,Me.jsx)("i",{className:"fa fa-inr",children:" "})," ",P||"Not Disclosed"]})})]}),h._id===k?"":(0,Me.jsx)(yA,{})]}),(0,Me.jsx)("div",{className:"col-md-7 d-flex gap-5 align-items-center ",children:h._id===k?"":(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-5",children:(0,Me.jsxs)("div",{className:"input-group",children:[(0,Me.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>{m>1&&g(m-1)},children:"-"}),(0,Me.jsx)("input",{type:"number",className:"form-control",value:m,readOnly:!0}),(0,Me.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>{g(m+1)},children:"+"})]})}),(0,Me.jsx)("div",{className:"col-md-5",children:(0,Me.jsx)("button",{className:"btn btn-primary text-white",onClick:()=>{P?c(I,m,+P):gl.warning("Price is not defined")},children:"Add To Cart"})})]})})]})]}),(0,Me.jsx)("h5",{children:"Product Description"}),(0,Me.jsx)("hr",{}),(0,Me.jsx)("p",{children:_}),Array.isArray(C)&&C.map((e=>(0,Me.jsxs)("p",{children:[(0,Me.jsxs)("b",{children:[e.attribute," : "]}),e.value]},e._id)))]},w)}),(0,Me.jsx)("h4",{className:"mt20",children:"Related Products"}),(0,Me.jsx)("hr",{className:"mt0"}),(0,Me.jsx)("div",{className:"swiper productSlider",children:(0,Me.jsx)(_c,{loop:!0,slidesPerView:5,spaceBetween:20,keyboard:{enabled:!0},autoplay:{delay:3e3},breakpoints:{320:{slidesPerView:2,spaceBetween:20},640:{slidesPerView:3,spaceBetween:15},768:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:5,spaceBetween:15}},navigation:!0,modules:[Sc],className:"mySwiper",children:d.map((e=>(0,Me.jsx)(Ec,{children:(0,Me.jsx)("div",{className:"swiper-slide proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",children:[(0,Me.jsx)("div",{className:"imgBx",children:(0,Me.jsx)(Re,{to:"/product/related-product/".concat(e._id),children:(0,Me.jsx)("img",{src:e.image,className:"card-img-top",alt:""})})}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h4",{className:"card-title",children:(0,Me.jsx)(Re,{children:e.title})}),(0,Me.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description})]})]})})},e._id)))})})]}),(0,Me.jsx)(Zs,{})]})})})]})},_M=()=>(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("div",{className:"d-flex justify-content-center item-center",style:{position:"absolute",textAlign:"center",top:"35%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,Me.jsxs)("p",{style:{color:"#77ced9",fontSize:"60px",fontWeight:"bold"},children:[(0,Me.jsx)("img",{src:"assets/images/g-logo.png",alt:"Dzital",style:{width:"50px",height:"50px",marginBottom:"10px"}}),"zital"]})}),(0,Me.jsx)("hr",{}),(0,Me.jsxs)("svg",{style:{left:"50%",top:"50%",position:"absolute",transform:"translate(-50%, -50%) matrix(1, 0, 0, 1, 0, 0)"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 187.3 93.7",height:"300px",width:"400px",children:[(0,Me.jsx)("path",{d:"M93.9,46.4c9.3,9.5,13.8,17.9,23.5,17.9s17.5-7.8,17.5-17.5s-7.8-17.6-17.5-17.5c-9.7,0.1-13.3,7.2-22.1,17.1 \t\t\t\tc-8.9,8.8-15.7,17.9-25.4,17.9s-17.5-7.8-17.5-17.5s7.8-17.5,17.5-17.5S86.2,38.6,93.9,46.4z",strokeMiterlimit:10,strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:4,fill:"none",id:"outline",stroke:"#77ced9"}),(0,Me.jsx)("path",{d:"M93.9,46.4c9.3,9.5,13.8,17.9,23.5,17.9s17.5-7.8,17.5-17.5s-7.8-17.6-17.5-17.5c-9.7,0.1-13.3,7.2-22.1,17.1 \t\t\t\tc-8.9,8.8-15.7,17.9-25.4,17.9s-17.5-7.8-17.5-17.5s7.8-17.5,17.5-17.5S86.2,38.6,93.9,46.4z",strokeMiterlimit:10,strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:4,stroke:"#4E4FEB",fill:"none",opacity:"0.05",id:"outline-bg"})]})]}),EM=e=>{let{img:t}=e;return(0,Me.jsx)(IA.FN,{infiniteLoop:!0,children:Array.isArray(t)&&t.map(((e,t)=>(0,Me.jsx)("div",{className:"swiper-slide",children:(0,Me.jsx)("img",{src:e,alt:""})},t)))})},SM=e=>{let{initialDetail:t}=e;const{id:n}=ne(),{getFashionBeautyDetails:i,fashionDetail:o,wishListAdd:s,wishListRemove:a,getReletedProduct:c,reletedList:l,cartListAdd:d,setFashionDetail:u,userData:h}=Kr(),[p,f]=(0,r.useState)(1),[m,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!1);(0,r.useEffect)((()=>{!t&&n&&(async()=>{await i(n)})(),t&&t.data&&t.data._id&&u(t)}),[n,t]);const{description:_,attribute_values:E,image_1:S,image_2:T,image_3:b,photo:I,userId:N,product_id:C,title:w,isWishlist:R,category_name:A,category_id:O,category_slug:M,sub_category_id:D}=o.data||{},k=[I,S,T,b],x=e=>{if(!Array.isArray(E))return null;const t=E.find((t=>t.attribute===e));return t?t.value:null},L=x("Price"),P=x("Brand");(0,r.useEffect)((()=>{void 0!==R&&g(R)}),[R]);return(0,r.useEffect)((()=>{C&&O&&c(O,D,C)}),[C,O,D]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsx)("aside",{className:"row",children:(0,Me.jsx)("div",{className:"col-md-12",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/".concat(M,"?category_id=").concat(O),children:A})}),(0,Me.jsxs)("li",{className:"active",children:[" Detail Page of ",w]})]})})})})}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),o.isLoad&&(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!o.isLoad&&(0,Me.jsxs)("div",{className:"col-md-10",children:[(0,Me.jsx)("div",{className:"card",children:(0,Me.jsx)("div",{className:"card-body",children:(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-5",children:(0,Me.jsx)("div",{children:(0,Me.jsx)(EM,{img:k})})}),(0,Me.jsxs)("div",{className:"col-md-7",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-10 col-sm-12",children:(0,Me.jsx)("h3",{children:P||""})}),(0,Me.jsxs)("div",{className:"col-md-2 col-sm-12",align:"right",children:[h._id===N?"":(0,Me.jsx)("div",{className:"iconWish",onClick:()=>(e=>{m?(a(e),g(!1)):(s(e),g(!0))})(C),children:(0,Me.jsx)("i",{className:!0===m?"fa fa-heart text-danger":"fa fa-heart-o"})}),(0,Me.jsxs)("div",{className:"iconWish",children:[(0,Me.jsx)("i",{className:"fa fa-share-alt text20 ",onClick:()=>{v(!0)}}),(0,Me.jsx)(vA,{isOpen:y,onClose:()=>{v(!1)}})]})]}),(0,Me.jsx)("h4",{className:"text-muted",children:w}),(0,Me.jsx)("h5",{className:"text-success",children:"Special price"}),(0,Me.jsx)("h5",{children:(0,Me.jsxs)("span",{className:"text28",children:[(0,Me.jsx)("i",{className:"fa fa-inr",children:" "})," ",L||"Not Disclosed"]})})]}),(0,Me.jsx)("div",{className:"row",children:h._id===N?"":(0,Me.jsx)(yA,{})}),(0,Me.jsx)("div",{className:"col-md-7 d-flex gap-5 align-items-center ",children:h._id===N?"":(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-5",children:(0,Me.jsxs)("div",{className:"input-group",children:[(0,Me.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>{p>1&&f(p-1)},children:"-"}),(0,Me.jsx)("input",{type:"number",className:"form-control",value:p,readOnly:!0}),(0,Me.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>{f(p+1)},children:"+"})]})}),(0,Me.jsx)("div",{className:"col-md-5",children:(0,Me.jsx)("button",{className:"btn btn-primary text-white",onClick:()=>{L?d(C,p,+L):gl.warning("Price is not defined")},children:"Add To Cart"})})]})}),(0,Me.jsx)("h4",{className:"mt-3",children:"product description"}),(0,Me.jsx)("p",{align:"justify",children:_}),(0,Me.jsx)("hr",{}),Array.isArray(E)&&E.map((e=>(0,Me.jsxs)("p",{children:[(0,Me.jsxs)("b",{children:[e.attribute," : "]}),e.value]},e._id)))]})]})})}),(0,Me.jsx)("h4",{className:"mt20",children:"Related Products"}),(0,Me.jsx)("hr",{className:"mt0"}),(0,Me.jsx)("div",{className:"swiper productSlider",children:(0,Me.jsx)(_c,{loop:!0,slidesPerView:5,spaceBetween:20,keyboard:{enabled:!0},autoplay:{delay:3e3},breakpoints:{320:{slidesPerView:2,spaceBetween:20},640:{slidesPerView:3,spaceBetween:15},768:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:5,spaceBetween:15}},navigation:!0,modules:[Sc],className:"mySwiper",children:l.map((e=>(0,Me.jsx)(Ec,{children:(0,Me.jsx)("div",{className:"swiper-slide proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",children:[(0,Me.jsx)("div",{className:"imgBx",children:(0,Me.jsx)(Re,{to:"/product/related-product/".concat(e._id),children:(0,Me.jsx)("img",{src:e.image,className:"card-img-top",alt:"",style:{height:"200px"}})})}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h4",{className:"card-title",children:(0,Me.jsx)(Re,{children:e.title})}),(0,Me.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description})]})]})})},e._id)))})})]}),(0,Me.jsx)(Zs,{})]})})})]})},TM=()=>{const{faq:e,getFaq:t}=Kr(),[n,i]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{i(!0),await t(),i(!1)})()}),[]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"FAQ"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"FAQ"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",style:{backgroundColor:"#fff"},children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-1 adBx",children:(0,Me.jsx)("div",{className:"sticky-top",children:(0,Me.jsx)("img",{src:"assets/images/Ad.jpg",alt:""})})}),!0===n?(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-8",children:[(0,Me.jsx)("h3",{className:"mb-3 text-center",children:"Frequently Asked Questions"}),(0,Me.jsx)("div",{className:"accordion mt50",id:"accordionExample",children:Array.isArray(e)&&e.map(((e,t)=>(0,Me.jsxs)("div",{className:"accordion-item",children:[(0,Me.jsx)("h2",{className:"accordion-header",children:(0,Me.jsx)("button",{className:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#accordionItem".concat(t),"aria-expanded":0===t?"true":"false","aria-controls":"accordionItem".concat(t),children:e.question})}),(0,Me.jsx)("div",{id:"accordionItem".concat(t),className:"accordion-collapse collapse ".concat(0===t?"show":""),"aria-labelledby":"accordionItem".concat(t),"data-bs-parent":"#accordionExample",children:(0,Me.jsx)("div",{className:"accordion-body",children:(0,Me.jsxs)("p",{align:"justify",children:[" ",null===e||void 0===e?void 0:e.answer," "]})})})]},e._id)))})]}),(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)("img",{src:"./assets/images/job-search.jpg",width:"100%",alt:""})})]})}),(0,Me.jsx)("div",{className:"col-md-1 adBx mt50",children:(0,Me.jsx)("div",{className:"sticky-top",children:(0,Me.jsx)("img",{src:"assets/images/Ad.jpg",alt:""})})})]})})})]})};const bM=function(){const{pathname:e}=Z();return(0,r.useEffect)((()=>{window.scrollTo(0,0)}),[e]),null};var IM,NM=__webpack_require__(1635),CM=__webpack_require__.n(NM);!function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE"}(IM||(IM={}));var wM=function(e){var t;return function(){return t||(t=CM().createClient(e)),t}};function RM(t,n){var i=null;return function(){var o=(0,r.useState)(!1),s=o[0],a=o[1],c=(0,r.useState)(null),l=c[0],d=c[1],u=(0,r.useRef)(i);return(0,r.useEffect)((function(){return null===u.current?function(){try{return Promise.resolve(CM().createMicrophoneAndCameraTracks(t,n)).then((function(e){return i=e}))}catch(e){return Promise.reject(e)}}().then((function(e){u.current=e,a(!0)}),(function(e){d(e)})):a(!0),function(){i=null}}),[]),{ready:s,tracks:u.current,error:l}}}var AM=function(e){var t=(0,r.useRef)(null),n=e.videoTrack,i=e.config,o=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["videoTrack","config"]);return(0,r.useLayoutEffect)((function(){return null!==t.current&&n.play(t.current,i),function(){n.stop()}}),[n]),r.createElement("div",Object.assign({},o,{ref:t}))};const OM={mode:"rtc",codec:"vp8"};const MM=function(){return[wM(OM),RM()]};var DM=!1;function kM(e,t){var n=t;return n.unshift(void 0),new(Function.prototype.bind.apply(e,n))}function xM(e){var t,n=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(n);var r="ej2"+function(e){for(var t="",n=0;n<5;n++)t+=(n?",":"")+e[parseInt(n.toString(),10)];return t}(n),i=function(n){n.source===window&&"string"===typeof n.data&&n.data.length<=32&&n.data===r&&(e(),t())};return window.addEventListener("message",i,!1),window.postMessage(r,"*"),t=function(){window.removeEventListener("message",i),e=i=r=void 0}}function LM(e,t){for(var n=t,r=e.replace(/\[/g,".").replace(/\]/g,"").split("."),i=0;i<r.length&&!BM(n);i++)n=n[r[parseInt(i.toString(),10)]];return n}function PM(e,t,n){var r,i,o=e.replace(/\[/g,".").replace(/\]/g,"").split("."),s=n||{},a=s,c=o.length;for(r=0;r<c;r++)i=o[parseInt(r.toString(),10)],r+1===c?a[""+i]=void 0===t?{}:t:VM(a[""+i])&&(a[""+i]={}),a=a[""+i];return s}var jM="undefined"!==typeof window?window:{};function UM(e){return!VM(e)&&e.constructor==={}.constructor}function FM(e,t){if(!VM(t))for(var n=e,r=t,i="deepMerge",o=0,s=Object.keys(t);o<s.length;o++){var a=s[o];VM(n[""+i])||-1===n[""+i].indexOf(a)||!UM(r[""+a])&&!Array.isArray(r[""+a])?n[""+a]=r[""+a]:zM(n[""+a],n[""+a],r[""+a],!0)}}function zM(e,t,n,r){var i=e&&"object"===typeof e?e:{},o=arguments.length;r&&(o-=1);for(var s=function(e){if(!a[e])return"continue";var t=a[e];Object.keys(t).forEach((function(e){var n,o=i[""+e],s=t[""+e],a=Array.isArray(s)&&Array.isArray(o)&&s.length!==o.length,c=!YM()||!(o instanceof Event)&&!a;r&&c&&(UM(s)||Array.isArray(s))?UM(s)?(n=o||{},Array.isArray(n)&&n.hasOwnProperty("isComplexArray")?zM(n,{},s,r):i[""+e]=zM(n,{},s,r)):(n=YM()?o&&Object.keys(s).length:o||[],i[""+e]=zM([],n,s,n&&n.length||s&&s.length)):i[""+e]=s}))},a=arguments,c=1;c<o;c++)s(c);return i}function VM(e){return void 0===e||null===e}function BM(e){return"undefined"===typeof e}function GM(e,t){return e===t||!(e===document||!e)&&GM(e.parentNode,t)}function HM(t){try{throw new Error(t)}catch(e){throw e.message+"\n"+e.stack}}function WM(e){var t=e+"";return t.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)?t:t+"px"}function YM(){return DM}var qM,KM={latn:{_digits:"0123456789",_type:"numeric"}},QM={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},JM=[0,1,2,3,4,5,6,7,8,9],XM=function(){function e(){}return e.getMainObject=function(e,t){return LM(YM()?t:"main."+t,e)},e.getNumberingSystem=function(e){return LM("supplemental.numberingSystems",e)||this.numberingSystems},e.reverseObject=function(e,t){for(var n={},r=0,i=t||Object.keys(e);r<i.length;r++){var o=i[r];n.hasOwnProperty(e[o])||(n[e[o]]=o)}return n},e.getSymbolRegex=function(e){var t=e.map((function(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")})).join("|");return new RegExp(t,"g")},e.getSymbolMatch=function(e){for(var t={},n=0,r=Object.keys(QM);n<r.length;n++){var i=r[n];t[e[i]]=QM[i]}return t},e.constructRegex=function(e){for(var t=e.length,n="",r=0;r<t;r++)n+=r!==t-1?e[parseInt(r.toString(),10)]+"|":e[parseInt(r.toString(),10)];return n},e.convertValueParts=function(e,t,n){return e.replace(t,(function(e){return n[e]}))},e.getDefaultNumberingSystem=function(e){var t={};return t.obj=LM("numbers",e),t.nSystem=LM("defaultNumberingSystem",t.obj),t},e.getCurrentNumericOptions=function(e,t,n,r){var i={},o=this.getDefaultNumberingSystem(e);if(!BM(o.nSystem)||r){var s=r?LM("obj.mapperDigits",o):LM(o.nSystem+"._digits",t);BM(s)||(i.numericPair=this.reverseObject(s,JM),i.numberParseRegex=new RegExp(this.constructRegex(s),"g"),i.numericRegex="["+s[0]+"-"+s[9]+"]",n&&(i.numericRegex=s[0]+"-"+s[9],i.symbolNumberSystem=LM(r?"numberSymbols":"symbols-numberSystem-"+o.nSystem,o.obj),i.symbolMatch=this.getSymbolMatch(i.symbolNumberSystem),i.numberSystem=o.nSystem))}return i},e.getNumberMapper=function(e,t,n){var r={mapper:{}},i=this.getDefaultNumberingSystem(e);if(!BM(i.nSystem)){r.numberSystem=i.nSystem,r.numberSymbols=LM("symbols-numberSystem-"+i.nSystem,i.obj),r.timeSeparator=LM("timeSeparator",r.numberSymbols);var o=LM(i.nSystem+"._digits",t);if(!BM(o))for(var s=0,a=JM;s<a.length;s++){var c=a[s];r.mapper[c]=o[c]}}return r},e.nPair="numericPair",e.nRegex="numericRegex",e.numberingSystems=KM,e}(),ZM={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH\u20b5",XDR:"XDR",AED:"\u062f.\u0625.\u200f",BHD:"\u062f.\u0628.\u200f",DZD:"\u062f.\u062c.\u200f",EGP:"\u062c.\u0645.\u200f",ILS:"\u20aa",IQD:"\u062f.\u0639.\u200f",JOD:"\u062f.\u0627.\u200f",KMF:"CF",KWD:"\u062f.\u0643.\u200f",LBP:"\u0644.\u0644.\u200f",LYD:"\u062f.\u0644.\u200f",MAD:"\u062f.\u0645.\u200f",MRU:"\u0623.\u0645.",OMR:"\u0631.\u0639.\u200f",QAR:"\u0631.\u0642.\u200f",SAR:"\u0631.\u0633.\u200f",SDG:"\u062c.\u0633.",SOS:"S",SSP:"\xa3",SYP:"\u0644.\u0633.\u200f",TND:"\u062f.\u062a.\u200f",YER:"\u0631.\u064a.\u200f",CLP:"$",INR:"\u20b9",TZS:"TSh",EUR:"\u20ac",AZN:"\u20bc",RUB:"\u20bd",BYN:"Br",ZMW:"K",BGN:"\u043b\u0432.",NGN:"\u20a6",XOF:"CFA",BDT:"\u09f3",CNY:"\xa5",BAM:"\u041a\u041c",UGX:"USh",USD:"$",CZK:"K\u010d",GBP:"\xa3",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"\u0783.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"\xa3",GIP:"\xa3",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"\u20b1",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"\xa3",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"\u20a1",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"\u20b2",UYU:"$",VES:"Bs.S",IRR:"\u0631\u064a\u0627\u0644",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"\u058f",ISK:"kr",JPY:"\xa5",GEL:"\u20be",CVE:"\u200b",KZT:"\u20b8",KHR:"\u17db",KPW:"\u20a9",KRW:"\u20a9",KGS:"\u0441\u043e\u043c",AOA:"Kz",LAK:"\u20ad",MZN:"MTn",MKD:"\u0434\u0435\u043d",MNT:"\u20ae",BND:"$",MMK:"K",NOK:"kr",NPR:"\u0930\u0941",AWG:"Afl.",SRD:"$",PLN:"z\u0142",AFN:"\u060b",STN:"Db",MDL:"L",RON:"lei",UAH:"\u20b4",LKR:"\u0dbb\u0dd4.",ALL:"Lek\xeb",RSD:"\u0434\u0438\u043d.",TJS:"\u0441\u043c\u043d",THB:"\u0e3f",TMT:"m.",TRY:"\u20ba",UZS:"\u0441\u045e\u043c",VND:"\u20ab",TWD:"NT$"};!function(e){var t=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];e.getHijriDate=function(e){var n=e.getDate(),r=e.getMonth(),i=e.getFullYear(),o=r+1,s=i;o<3&&(s-=1,o+=12);var a=Math.floor(s/100),c=a-Math.floor(a/4)-2,l=Math.floor(365.25*(s+4716))+Math.floor(30.6001*(o+1))+n-c-1524,d=l+(c=(a=Math.floor((l-1867216.25)/36524.25))-Math.floor(a/4)+1)+1524,u=Math.floor((d-122.1)/365.25),h=Math.floor(365.25*u),p=Math.floor((d-h)/30.6001);n=d-h-Math.floor(30.6001*p),(r=Math.floor((d-h)/20.6001))>13&&(u+=1,r-=12),r-=1,i=u-4716;var f=l-24e5,m=10631/30,g=l-1948084,y=Math.floor(g/10631);g-=10631*y;var v=Math.floor((g-.1335)/m),_=30*y+v;g-=Math.floor(v*m+.1335);var E=Math.floor((g+28.5001)/29.5);13===E&&(E=12);for(var S=g-Math.floor(29.5001*E-29),T=0;T<t.length&&!(t[parseInt(T.toString(),10)]>f);T++);var b=T+16260,I=Math.floor((b-1)/12),N=I+1,C=b-12*I,w=f-t[T-1]+1;return(w+"").length>2&&(w=S,C=E,N=_),{year:N,month:C,date:w}},e.toGregorian=function(e,n,r){var i=r+t[12*(e-1)+1+(n-1)-16260-1]-1+24e5,o=Math.floor(i+.5),s=Math.floor((o-1867216.25)/36524.25),a=(s=o+1+s-Math.floor(s/4))+1524,c=Math.floor((a-122.1)/365.25),l=Math.floor(365.25*c),d=Math.floor((a-l)/30.6001),u=a-l-Math.floor(30.6001*d),h=d-(d>13.5?13:1),p=c-(h>2.5?4716:4715);return p<=0&&h--,new Date(p+"/"+h+"/"+u)}}(qM||(qM={}));var $M=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,eD="stand-alone",tD=["sun","mon","tue","wed","thu","fri","sat"],nD={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},rD={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"},iD=function(){function e(){}return e.dateFormat=function(e,t,n){var r=this,i=TD.getDependables(n,e,t.calendar),o=LM("parserObject.numbers",i),s=i.dateObject,a={isIslamic:TD.islamicRegex.test(t.calendar)};YM()&&t.isServerRendered&&(t=TD.compareBlazorDateFormats(t,e));var c=t.format||TD.getResultantPattern(t.skeleton,i.dateObject,t.type,!1,YM()?e:"");if(a.dateSeperator=YM()?LM("dateSeperator",s):TD.getDateSeparator(i.dateObject),BM(c))HM("Format options or type given must be invalid");else{c=TD.ConvertDateToWeekFormat(c),YM()&&(c=c.replace(/tt/,"a")),a.pattern=c,a.numMapper=YM()?zM({},o):XM.getNumberMapper(i.parserObject,XM.getNumberingSystem(n));for(var l=0,d=c.match($M)||[];l<d.length;l++){var u=d[l],h=u.length,p=u[0];switch("K"===p&&(p="h"),p){case"E":case"c":YM()?a.weekday=LM("days."+TD.monthIndex[h],s):a.weekday=i.dateObject[TD.days][eD][TD.monthIndex[h]];break;case"M":case"L":YM()?a.month=LM("months."+TD.monthIndex[h],s):a.month=i.dateObject[TD.month][eD][TD.monthIndex[h]];break;case"a":a.designator=YM()?LM("dayPeriods",s):LM("dayPeriods.format.wide",s);break;case"G":var f=h<=3?"eraAbbr":4===h?"eraNames":"eraNarrow";a.era=YM()?LM("eras",s):LM("eras."+f,i.dateObject);break;case"z":a.timeZone=LM("dates.timeZoneNames",i.parserObject)}}}return function(e){return isNaN(e.getDate())?null:r.intDateFormatter(e,a)}},e.intDateFormatter=function(e,t){for(var n="",r=t.pattern.match(TD.dateParseRegex),i=this.getCurrentDateValue(e,t.isIslamic),o=0,s=r;o<s.length;o++){var a=s[o],c=a.length,l=a[0];"K"===l&&(l="h");var d=void 0,u="",h=void 0,p=void 0,f="";switch(l){case"M":case"L":d=i.month,c>2?n+=t.month[d]:h=!0;break;case"E":case"c":n+=t.weekday[tD[e.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(h=!0,"d"===l)d=i.date;else if("f"===l){h=!1,p=!0;var m=(u=(u=e[nD[l]]().toString()).substring(0,c)).length;if(c!==m){if(c>3)continue;for(var g=0;g<c-m;g++)u="0"+u.toString()}f+=u}else d=e[nD[l]]();"h"===l&&(d=d%12||12);break;case"y":p=!0,f+=i.year,2===c&&(f=f.substr(f.length-2));break;case"a":var y=e.getHours()<12?"am":"pm";n+=t.designator[y];break;case"G":var v=e.getFullYear()<0?0:1,_=t.era[v];VM(_)&&(_=t.era[v?0:1]),n+=_||"";break;case"'":n+="''"===a?"'":a.replace(/'/g,"");break;case"z":var E=e.getTimezoneOffset(),S=c<4?"+H;-H":t.timeZone.hourFormat;S=S.replace(/:/g,t.numMapper.timeSeparator),0===E?n+=t.timeZone.gmtZeroFormat:(p=!0,f=this.getTimeZoneValue(E,S)),f=t.timeZone.gmtFormat.replace(/\{0\}/,f);break;case":":n+=t.numMapper.numberSymbols.timeSeparator;break;case"/":n+=t.dateSeperator;break;case"W":h=!0,d=TD.getWeekOfYear(e);break;default:n+=a}h&&(p=!0,f=this.checkTwodigitNumber(d,c)),p&&(n+=XM.convertValueParts(f,TD.latnParseRegex,t.numMapper.mapper))}return n},e.getCurrentDateValue=function(e,t){return t?qM.getHijriDate(e):{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}},e.checkTwodigitNumber=function(e,t){var n=e+"";return 2===t&&2!==n.length?"0"+n:n},e.getTimeZoneValue=function(e,t){var n=this,r=t.split(";")[e>0?1:0],i=Math.abs(e);return r.replace(/HH?|mm/g,(function(e){var t=e.length,r=-1!==e.indexOf("H");return n.checkTwodigitNumber(Math.floor(r?i/60:i%60),t)}))},e}(),oD={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},sD=["infinity","nan","group","decimal","exponential"],aD=function(){function e(){}return e.numberFormatter=function(e,t,n){var r,i=this,o=zM({},t),s={},a={},c=TD.getDependables(n,e,"",!0),l=c.numericObject;a.numberMapper=YM()?zM({},l):XM.getNumberMapper(c.parserObject,XM.getNumberingSystem(n),!0),a.currencySymbol=YM()?LM("currencySymbol",l):TD.getCurrencySymbol(c.numericObject,o.currency||SD,t.altSymbol),a.percentSymbol=YM()?LM("numberSymbols.percentSign",l):a.numberMapper.numberSymbols.percentSign,a.minusSymbol=YM()?LM("numberSymbols.minusSign",l):a.numberMapper.numberSymbols.minusSign;var d=a.numberMapper.numberSymbols;if(t.format&&!TD.formatRegex.test(t.format))s=TD.customFormat(t.format,a,c.numericObject);else{if(zM(o,TD.getProperNumericSkeleton(t.format||"N")),o.isCurrency="currency"===o.type,o.isPercent="percent"===o.type,YM()||(r=TD.getSymbolPattern(o.type,a.numberMapper.numberSystem,c.numericObject,o.isAccount)),o.groupOne=this.checkValueRange(o.maximumSignificantDigits,o.minimumSignificantDigits,!0),this.checkValueRange(o.maximumFractionDigits,o.minimumFractionDigits,!1,!0),BM(o.fractionDigits)||(o.minimumFractionDigits=o.maximumFractionDigits=o.fractionDigits),BM(o.useGrouping)&&(o.useGrouping=!0),o.isCurrency&&!YM()&&(r=r.replace(/\u00A4/g,TD.defaultCurrency)),YM())s.nData=zM({},{},LM(o.type+"nData",l)),s.pData=zM({},{},LM(o.type+"pData",l)),"currency"===o.type&&t.currency&&TD.replaceBlazorCurrency([s.pData,s.nData],a.currencySymbol,t.currency);else{var u=r.split(";");s.nData=TD.getFormatData(u[1]||"-"+u[0],!0,a.currencySymbol),s.pData=TD.getFormatData(u[0],!1,a.currencySymbol),o.useGrouping&&(o.groupSeparator=d[sD[2]],o.groupData=this.getGroupingDetails(u[0]))}if(BM(o.minimumFractionDigits)&&(o.minimumFractionDigits=s.nData.minimumFraction),BM(o.maximumFractionDigits)){var h=s.nData.maximumFraction;o.maximumFractionDigits=BM(h)&&o.isPercent?0:h}var p=o.minimumFractionDigits,f=o.maximumFractionDigits;BM(p)||BM(f)||p>f&&(o.maximumFractionDigits=p)}return zM(s.nData,o),zM(s.pData,o),function(e){return isNaN(e)?d[sD[1]]:isFinite(e)?i.intNumberFormatter(e,s,a):d[sD[0]]}},e.getGroupingDetails=function(e){var t={},n=e.match(TD.negativeDataRegex);if(n&&n[4]){var r=n[4],i=r.lastIndexOf(",");if(-1!==i){var o=r.split(".")[0];t.primary=o.length-i-1;var s=r.lastIndexOf(",",i-1);-1!==s&&(t.secondary=i-1-s)}}return t},e.checkValueRange=function(e,t,n,r){var i=r?"f":"s",o=0,s=oD["l"+i],a=oD["m"+i];if(BM(e)||(this.checkRange(e,s,r),o++),BM(t)||(this.checkRange(t,a,r),o++),2===o){if(!(e<t))return!0;HM(a+"specified must be less than the"+s)}else n&&1===o&&HM("Both"+a+"and"+a+"must be present");return!1},e.checkRange=function(e,t,n){var r=n?[0,20]:[1,21];(e<r[0]||e>r[1])&&HM(t+"value must be within the range"+r[0]+"to"+r[1])},e.intNumberFormatter=function(e,t,n){var r;if(!BM(t.nData.type)){e<0?(e*=-1,r=t.nData):r=0===e&&t.zeroData||t.pData;var i="";return r.isPercent&&(e*=100),r.groupOne?i=this.processSignificantDigits(e,r.minimumSignificantDigits,r.maximumSignificantDigits):(i=this.processFraction(e,r.minimumFractionDigits,r.maximumFractionDigits),r.minimumIntegerDigits&&(i=this.processMinimumIntegers(i,r.minimumIntegerDigits))),"scientific"===r.type&&(i=(i=e.toExponential(r.maximumFractionDigits)).replace("e",n.numberMapper.numberSymbols[sD[4]])),i=i.replace(".",n.numberMapper.numberSymbols[sD[3]]),i="#,###,,;(#,###,,)"===r.format?this.customPivotFormat(parseInt(i)):i,r.useGrouping&&(i=this.groupNumbers(i,r.groupData.primary,r.groupSeparator||",",n.numberMapper.numberSymbols[sD[3]]||".",r.groupData.secondary)),i=XM.convertValueParts(i,TD.latnParseRegex,n.numberMapper.mapper),"N/A"===r.nlead?r.nlead:r.nlead+i+r.nend}},e.processSignificantDigits=function(e,t,n){var r=e+"";return r.length<t?e.toPrecision(t):+(r=e.toPrecision(n))+""},e.groupNumbers=function(e,t,n,r,i){for(var o=!VM(i)&&0!==i,s=e.split(r),a=s[0],c=a.length,l="";c>t;)l=a.slice(c-t,c)+(l.length?n+l:""),c-=t,o&&(t=i,o=!1);return s[0]=a.slice(0,c)+(l.length?n:"")+l,s.join(r)},e.processFraction=function(e,t,n){var r=(e+"").split(".")[1],i=r?r.length:0;if(t&&i<t){var o="";if(0!==i){o+=e;for(var s=0;s<t-i;s++)o+="0";return o}return o=e.toFixed(t),e.toFixed(t)}return!VM(n)&&(i>n||0===n)?e.toFixed(n):e+""},e.processMinimumIntegers=function(e,t){var n=e.split("."),r=n[0],i=r.length;if(i<t){for(var o=0;o<t-i;o++)r="0"+r;n[0]=r}return n.join(".")},e.customPivotFormat=function(e){if(e>=5e5){var t=(e/=1e6).toString().split("."),n=(t[0],t[1]);return n&&+n.substring(0,1)>=5?Math.ceil(e).toString():Math.floor(e).toString()}return""},e}(),cD="stand-alone",lD=/^[0-9]*$/,dD={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},uD=function(){function e(){}return e.dateParser=function(e,t,n){var r=this,i=TD.getDependables(n,e,t.calendar),o=XM.getCurrentNumericOptions(i.parserObject,XM.getNumberingSystem(n),!1,YM()),s={};YM()&&t.isServerRendered&&(t=TD.compareBlazorDateFormats(t,e));var a,c=t.format||TD.getResultantPattern(t.skeleton,i.dateObject,t.type,!1,YM()?e:""),l="";if(BM(c))HM("Format options or type given must be invalid");else{c=TD.ConvertDateToWeekFormat(c),s={isIslamic:TD.islamicRegex.test(t.calendar),pattern:c,evalposition:{},culture:e};for(var d=c.match(TD.dateParseRegex)||[],u=d.length,h=0,p=0,f=!1,m=o.numericRegex,g=YM()?i.parserObject.numbers:XM.getNumberMapper(i.parserObject,XM.getNumberingSystem(n)),y=0;y<u;y++){var v=d[parseInt(y.toString(),10)],_=v.length,E="K"===v[0]?"h":v[0],S=void 0,T=void 0,b=rD[E],I=2===_?"":"?";switch(f&&(h=p,f=!1),E){case"E":case"c":var N=void 0;N=YM()?LM("days."+TD.monthIndex[_],i.dateObject):i.dateObject[TD.days][cD][TD.monthIndex[_]];var C=XM.reverseObject(N);l+="("+Object.keys(C).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(T=!0,("M"===E||"L"===E)&&_>2){var w=void 0;w=YM()?LM("months."+TD.monthIndex[_],i.dateObject):i.dateObject.months[cD][TD.monthIndex[_]],s[b]=XM.reverseObject(w),l+="("+Object.keys(s[b]).join("|")+")"}else if("f"===E){if(_>3)continue;S=!0,l+="("+m+m+"?"+m+"?)"}else S=!0,l+="("+m+m+I+")";"h"===E&&(s.hour12=!0);break;case"W":l+="("+m+(1===_?"?":"")+m+")";break;case"y":T=S=!0,l+=2===_?"("+m+m+")":"("+m+"{"+_+",})";break;case"a":T=!0;var R=YM()?LM("dayPeriods",i.dateObject):LM("dayPeriods.format.wide",i.dateObject);s[b]=XM.reverseObject(R),l+="("+Object.keys(s[b]).join("|")+")";break;case"G":T=!0;var A=_<=3?"eraAbbr":4===_?"eraNames":"eraNarrow";s[b]=XM.reverseObject(YM()?LM("eras",i.dateObject):LM("eras."+A,i.dateObject)),l+="("+Object.keys(s[b]).join("|")+"?)";break;case"z":T=0!==(new Date).getTimezoneOffset(),s[b]=LM("dates.timeZoneNames",i.parserObject);var O=s[b],M=(a=_<4)?"+H;-H":O.hourFormat;M=M.replace(/:/g,g.timeSeparator),l+="("+this.parseTimeZoneRegx(M,O,m)+")?",f=!0,p=a?6:12;break;case"'":l+="("+v.replace(/'/g,"")+")?";break;default:l+="([\\D])"}T&&(s.evalposition[""+b]={isNumber:S,pos:y+1+h,hourOnly:a}),y!==u-1||VM(l)||(s.parserRegex=new RegExp("^"+l+"$","i"))}}return function(e){var t=r.internalDateParse(e,s,o);if(VM(t)||!Object.keys(t).length)return null;if(s.isIslamic){var n={},i=t.year,a=t.day,c=t.month,l=i?i+"":"",d=2===l.length;i&&c&&a&&!d||(n=qM.getHijriDate(new Date)),d&&(i=parseInt((n.year+"").slice(0,2)+l,10));var u=qM.toGregorian(i||n.year,c||n.month,a||n.date);t.year=u.getFullYear(),t.month=u.getMonth()+1,t.day=u.getDate()}return r.getDateObject(t)}},e.getDateObject=function(e,t){var n=t||new Date;n.setMilliseconds(0);var r=e.year,i=e.designator,o=e.timeZone;if(!BM(r)){if((r+"").length<=2)r+=100*Math.floor(n.getFullYear()/100);n.setFullYear(r)}for(var s=0,a=["hour","minute","second","milliseconds","month","day"];s<a.length;s++){var c=a[s],l=e[c];if(BM(l)&&"day"===c&&n.setDate(1),!BM(l))if("month"===c){if((l-=1)<0||l>11)return new Date("invalid");var d=n.getDate();n.setDate(1),n[dD[c]](l);var u=new Date(n.getFullYear(),l+1,0).getDate();n.setDate(d<u?d:u)}else{if("day"===c){var h=new Date(n.getFullYear(),n.getMonth()+1,0).getDate();if(l<1||l>h)return null}n[dD[c]](l)}}if(!BM(i)){var p=n.getHours();"pm"===i?n.setHours(p+(12===p?0:12)):12===p&&n.setHours(0)}if(!BM(o)){var f=o-n.getTimezoneOffset();0!==f&&n.setMinutes(n.getMinutes()+f)}return n},e.internalDateParse=function(e,t,n){var r=e.match(t.parserRegex),i={hour:0,minute:0,second:0};if(VM(r))return null;for(var o=0,s=Object.keys(t.evalposition);o<s.length;o++){var a=s[o],c=t.evalposition[""+a],l=r[c.pos];if(c.isNumber)i[a]=this.internalNumberParser(l,n);else if("timeZone"!==a||BM(l))l="month"!==a||t.isIslamic||"en"!==t.culture&&"en-GB"!==t.culture&&"en-US"!==t.culture?l:l[0].toUpperCase()+l.substring(1).toLowerCase(),i[a]=t[a][l];else{var d=c.pos,u=void 0,h=r[d+1],p=!BM(h);c.hourOnly?u=60*this.getZoneValue(p,h,r[d+4],n):(u=60*this.getZoneValue(p,h,r[d+7],n),u+=this.getZoneValue(p,r[d+4],r[d+10],n)),VM(u)||(i[""+a]=u)}}return t.hour12&&(i.hour12=!0),i},e.internalNumberParser=function(e,t){return e=XM.convertValueParts(e,t.numberParseRegex,t.numericPair),lD.test(e)?+e:null},e.parseTimeZoneRegx=function(e,t,n){var r,i,o=t.gmtFormat,s="("+n+")("+n+")";return r=e.replace("+","\\+"),i=(r=-1!==e.indexOf("HH")?r.replace(/HH|mm/g,"("+s+")"):r.replace(/H|m/g,"("+s+"?)")).split(";").map((function(e){return o.replace("{0}",e)})),r=i.join("|")+"|"+t.gmtZeroFormat},e.getZoneValue=function(e,t,n,r){var i=e?t:n;if(!i)return 0;var o=this.internalNumberParser(i,r);return e?-o:o},e}(),hD=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,pD=/,/g,fD=["minusSign","infinity"],mD=function(){function e(){}return e.numberParser=function(e,t,n){var r,i=this,o=TD.getDependables(n,e,"",!0),s={custom:!0};TD.formatRegex.test(t.format)||!t.format?(zM(s,TD.getProperNumericSkeleton(t.format||"N")),s.custom=!1,s.fractionDigits||t.maximumFractionDigits&&(s.maximumFractionDigits=t.maximumFractionDigits)):zM(s,TD.customFormat(t.format,null,null));var a,c=LM("numbers",o.parserObject);if(r=XM.getCurrentNumericOptions(o.parserObject,XM.getNumberingSystem(n),!0,YM()),s.symbolRegex=XM.getSymbolRegex(Object.keys(r.symbolMatch)),s.infinity=r.symbolNumberSystem[fD[1]],YM())s.nData=zM({},{},LM(s.type+"nData",c)),s.pData=zM({},{},LM(s.type+"pData",c)),"currency"===s.type&&t.currency&&TD.replaceBlazorCurrency([s.pData,s.nData],LM("currencySymbol",c),t.currency);else if(a=TD.getSymbolPattern(s.type,r.numberSystem,o.numericObject,s.isAccount)){var l=(a=a.replace(/\u00A4/g,TD.defaultCurrency)).split(";");s.nData=TD.getFormatData(l[1]||"-"+l[0],!0,""),s.pData=TD.getFormatData(l[0],!0,"")}return function(e){return i.getParsedNumber(e,s,r)}},e.getParsedNumber=function(e,t,n){var r,i,o,s,a,c;if(-1!==e.indexOf(t.infinity))return 1/0;e=XM.convertValueParts(e,t.symbolRegex,n.symbolMatch),0===(e=-1!==(e=XM.convertValueParts(e,n.numberParseRegex,n.numericPair)).indexOf("-")?e.replace("-.","-0."):e).indexOf(".")&&(e="0"+e);var l=e.match(hD);if(VM(l))return NaN;s=l[1],o=l[2];var d=l[5];return a=l[6],i=(r=t.custom?s===t.nData.nlead&&a===t.nData.nend:-1!==s.indexOf(t.nData.nlead)&&-1!==a.indexOf(t.nData.nend))?t.nData.isPercent:t.pData.isPercent,o=o.replace(pD,""),d&&(o+=d),c=+o,("percent"===t.type||i)&&(c/=100),(t.custom||t.fractionDigits)&&(c=parseFloat(c.toFixed(t.custom?r?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.fractionDigits))),t.maximumFractionDigits&&(c=this.convertMaxFracDigits(o,t,c,r)),r&&(c*=-1),c},e.convertMaxFracDigits=function(e,t,n,r){var i=e.split(".");return i[1]&&i[1].length>t.maximumFractionDigits&&(n=+n.toFixed(t.custom?r?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.maximumFractionDigits)),n},e}(),gD=function(){function t(e){this.ranArray=[],this.boundedEvents={},VM(e)||(this.context=e)}return t.prototype.on=function(e,t,n,r){if(!VM(t)){var i=n||this.context;this.notExist(e)?this.boundedEvents[""+e]=[{handler:t,context:i}]:VM(r)?this.isHandlerPresent(this.boundedEvents[""+e],t)||this.boundedEvents[""+e].push({handler:t,context:i}):-1===this.ranArray.indexOf(r)&&(this.ranArray.push(r),this.boundedEvents[""+e].push({handler:t,context:i,id:r}))}},t.prototype.off=function(e,t,n){if(!this.notExist(e)){var r=LM(e,this.boundedEvents);if(t){for(var i=0;i<r.length;i++)if(n){if(r[parseInt(i.toString(),10)].id===n){r.splice(i,1);var o=this.ranArray.indexOf(n);-1!==o&&this.ranArray.splice(o,1);break}}else if(t===r[parseInt(i.toString(),10)].handler){r.splice(i,1);break}}else delete this.boundedEvents[""+e]}},t.prototype.notify=function(e,t,n,r){if(this.notExist(e))n&&n.call(this,t);else{t&&(t.name=e);var i=LM(e,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(i,t,n,r,0);for(var o=0,s=i;o<s.length;o++){var a=s[o];a.handler.call(a.context,t)}n&&n.call(this,t)}},t.prototype.blazorCallback=function(e,t,n,r,i){var o=this,s=i===e.length-1;if(i<e.length){var a=e[parseInt(i.toString(),10)],c=a.handler.call(a.context,t);if(c&&"function"===typeof c.then){if(!n)return c;c.then((function(c){if(c="string"===typeof c&&o.isJson(c)?JSON.parse(c,o.dateReviver):c,zM(t,t,c,!0),!n||!s)return o.blazorCallback(e,t,n,r,i+1);n.call(a.context,t)})).catch((function(e){r&&r.call(a.context,"string"===typeof e&&o.isJson(e)?JSON.parse(e,o.dateReviver):e)}))}else{if(!n||!s)return this.blazorCallback(e,t,n,r,i+1);n.call(a.context,t)}}},t.prototype.dateReviver=function(e,t){return YM&&"string"===typeof t&&null!==t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(t):t},t.prototype.isJson=function(t){try{JSON.parse(t)}catch(e){return!1}return!0},t.prototype.destroy=function(){this.boundedEvents=this.context=void 0},t.prototype.notExist=function(e){return!1===this.boundedEvents.hasOwnProperty(e)||this.boundedEvents[e].length<=0},t.prototype.isHandlerPresent=function(e,t){for(var n=0,r=e;n<r.length;n++){if(r[n].handler===t)return!0}return!1},t}(),yD=new gD,vD=!1,_D={},ED="en-US",SD="USD";!function(){function e(e){e&&(this.culture=e)}e.prototype.getDateFormat=function(e){return iD.dateFormat(this.getCulture(),e||{type:"date",skeleton:"short"},_D)},e.prototype.getNumberFormat=function(e){return e&&!e.currency&&(e.currency=SD),YM()&&e&&!e.format&&(e.minimumFractionDigits=0),aD.numberFormatter(this.getCulture(),e||{},_D)},e.prototype.getDateParser=function(e){return uD.dateParser(this.getCulture(),e||{skeleton:"short",type:"date"},_D)},e.prototype.getNumberParser=function(e){return YM()&&e&&!e.format&&(e.minimumFractionDigits=0),mD.numberParser(this.getCulture(),e||{format:"N"},_D)},e.prototype.formatNumber=function(e,t){return this.getNumberFormat(t)(e)},e.prototype.formatDate=function(e,t){return this.getDateFormat(t)(e)},e.prototype.parseDate=function(e,t){return this.getDateParser(t)(e)},e.prototype.parseNumber=function(e,t){return this.getNumberParser(t)(e)},e.prototype.getDatePattern=function(e,t){return TD.getActualDateTimeFormat(this.getCulture(),e,_D,t)},e.prototype.getNumberPattern=function(e,t){return TD.getActualNumberFormat(this.getCulture(),e,_D,t)},e.prototype.getFirstDayOfWeek=function(){return TD.getWeekData(this.getCulture(),_D)},e.prototype.getCulture=function(){return this.culture||ED}}();var TD,bD={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(e){e.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0#\ ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var t=/[0-9]/g;e.defaultCurrency="$";var n=["infinity","nan","group","decimal"],r=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,i={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};e.dateConverterMapper=/dddd|ddd/gi;e.islamicRegex=/^islamic/;var o={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};e.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,e.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,e.curWithoutNumberRegex=/(c|a)$/gi;var s={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function a(t,n,r,i,o){var s,a=r||"date";if(o)s=u({skeleton:t},o).format||u({skeleton:"d"},"en-US").format;else{if(-1!==e.basicPatterns.indexOf(t)){if(s=LM(a+"Formats."+t,n),"dateTime"===a){var c=LM("dateFormats."+t,n),l=LM("timeFormats."+t,n);s=s.replace("{1}",c).replace("{0}",l)}}else s=LM("dateTimeFormats.availableFormats."+t,n);BM(s)&&"yMd"===t&&(s="M/d/y")}return s}function c(t,n,r,i){var o={},s=r||"gregorian";if(o.parserObject=XM.getMainObject(t,n)||(YM()?e.blazorDefaultObject:e.defaultObject),i)o.numericObject=LM("numbers",o.parserObject);else{var a=YM()?"dates":"dates.calendars."+s;o.dateObject=LM(a,o.parserObject)}return o}function l(e,t,n,r){return LM(e+"Formats-numberSystem-"+t+(r?".accounting":".standard"),n)||(r?LM(e+"Formats-numberSystem-"+t+".standard",n):"")}function d(t){var n=t.match(e.dateConverterMapper);if(n&&YM()){var r=3===n[0].length?"EEE":"EEEE";return t.replace(e.dateConverterMapper,r)}return t}function u(e,t){var n=e.format||e.skeleton,r=LM((t||"en-US")+"."+n,bD);return r||(r=LM("en-US."+n,bD)),r&&(r=d(r),e.format=r.replace(/tt/,"a")),e}function h(t){var n=t.match(e.formatRegex),r={},i=n[1].toUpperCase();return r.isAccount="A"===i,r.type=e.patternMatcher[i],t.length>1&&(r.fractionDigits=parseInt(n[2],10)),r}function p(n,r,i,o){var s=o?{}:{nlead:"",nend:""},a=n.match(e.customRegex);if(a){o||(s.nlead=f(a[1],i),s.nend=f(a[10],i),s.groupPattern=a[4]);var c=a[7];if(c&&r){var l=c.match(t);VM(l)?s.minimumFraction=0:s.minimumFraction=l.length,s.maximumFraction=c.length-1}}return s}function f(t,n){return t?t.replace(e.defaultCurrency,n):""}function m(e,t,n){return LM("currencies."+t+(n?"."+n:".symbol"),e)||LM("currencies."+t+".symbol-alt-narrow",e)||"$"}function g(t,r,i){var o={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},s=t.match(e.customRegex);if(VM(s)||""===s[5]&&"N/A"!==t)return o.type=void 0,o;o.nlead=s[1],o.nend=s[10];var a=s[6],c=!!a.match(/\ $/g),d=-1!==a.replace(/\ $/g,"").indexOf(" ");o.useGrouping=-1!==a.indexOf(",")||d,a=a.replace(/,/g,"");var u=s[7];if(-1!==a.indexOf("0")&&(o.minimumIntegerDigits=a.length-a.indexOf("0")),VM(u)||(o.minimumFractionDigits=u.lastIndexOf("0"),o.maximumFractionDigits=u.lastIndexOf("#"),-1===o.minimumFractionDigits&&(o.minimumFractionDigits=0),(-1===o.maximumFractionDigits||o.maximumFractionDigits<o.minimumFractionDigits)&&(o.maximumFractionDigits=o.minimumFractionDigits)),VM(r)?zM(o,y([o.nlead,o.nend],"%","%")):(zM(o,y([o.nlead,o.nend],"$",r.currencySymbol)),o.isCurrency||zM(o,y([o.nlead,o.nend],"%",r.percentSymbol))),!VM(i)){var h=l(o.type,r.numberMapper.numberSystem,i,!1);o.useGrouping&&(o.groupSeparator=d?" ":r.numberMapper.numberSymbols[n[2]],o.groupData=aD.getGroupingDetails(h.split(";")[0])),o.nlead=o.nlead.replace(/'/g,""),o.nend=c?" "+o.nend.replace(/'/g,""):o.nend.replace(/'/g,"")}return o}function y(e,t,n){for(var r={nlead:e[0],nend:e[1]},i=0;i<2;i++){var o=e[parseInt(i.toString(),10)],a=o.indexOf(t);if(-1!==a&&(a<o.indexOf("'")||a>o.lastIndexOf("'"))){r[s[i]]=o.substr(0,a)+n+o.substr(a+1),r[s[t]]=!0,r.type=r.isCurrency?"currency":"percent";break}}return r}function v(e,t,n){e+=".";for(var r=0;r<t;r++)e+="0";if(t<n)for(var i=n-t,o=0;o<i;o++)e+="#";return e}function _(e,t){for(var n=e.split("."),r="",i=0;i<t;i++)r+="0";return n[1]?r+"."+n[1]:r}function E(e){var t=e.split("."),n=t[0],r=3-n.length%3;e="";for(var i=(n=(r&&1===r?"#":2===r?"##":"")+n).length-1;i>0;i-=3)e=","+n[i-2]+n[i-1]+n[parseInt(i.toString(),10)]+e;return e=e.slice(1),t[1]?e+"."+t[1]:e}e.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,e.basicPatterns=["short","medium","long","full"],e.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},e.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"\u221e"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},e.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},e.month="months",e.days="days",e.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},e.getResultantPattern=a,e.getDependables=c,e.getSymbolPattern=l,e.ConvertDateToWeekFormat=d,e.compareBlazorDateFormats=u,e.getProperNumericSkeleton=h,e.getFormatData=p,e.changeCurrencySymbol=f,e.getCurrencySymbol=m,e.customFormat=function(e,t,n){for(var r={},i=e.split(";"),o=["pData","nData","zeroData"],s=0;s<i.length;s++)r[o[s]]=g(i[s],t,n);return VM(r.nData)&&(r.nData=zM({},r.pData),r.nData.nlead=VM(t)?"-"+r.nData.nlead:t.minusSymbol+r.nData.nlead),r},e.customNumberFormat=g,e.isCurrencyPercent=y,e.getDateSeparator=function(e){var t=(LM("dateFormats.short",e)||"").match(/[d\u200fM\u200f]([^d\u200fM])[d\u200fM\u200f]/i);return t?t[1]:"/"},e.getActualDateTimeFormat=function(e,t,n,o){var s=c(n,e,t.calendar);YM()&&(t=u(t,e));var l=t.format||a(t.skeleton,s.dateObject,t.type);if(o){if(l=l.replace(r,(function(e){return i[e]})),-1!==l.indexOf("z")){var d=l.match(/z/g).length,h=void 0,p={timeZone:{}};p.numMapper=XM.getNumberMapper(s.parserObject,XM.getNumberingSystem(n)),p.timeZone=LM("dates.timeZoneNames",s.parserObject);var f=(new Date).getTimezoneOffset(),m=d<4?"+H;-H":p.timeZone.hourFormat;m=m.replace(/:/g,p.numMapper.timeSeparator),0===f?h=p.timeZone.gmtZeroFormat:(h=iD.getTimeZoneValue(f,m),h=p.timeZone.gmtFormat.replace(/\{0\}/,h)),l=l.replace(/[z]+/,'"'+h+'"')}l=l.replace(/ $/,"")}return l},e.getActualNumberFormat=function(t,n,r,i){var o,s,a=c(r,t,"",!0),d={custom:!0},u=a.numericObject,f={},g=(n.format||"").match(e.currencyFormatRegex),y=e.formatRegex.test(n.format)?h(n.format||"N"):{},S={};if(g){S.numberMapper=YM()?zM({},a.numericObject):XM.getNumberMapper(a.parserObject,XM.getNumberingSystem(r),!0);var T=YM()?LM("currencySymbol",a.numericObject):m(a.numericObject,n.currency||SD,n.altSymbol),b=l("currency",S.numberMapper.numberSystem,a.numericObject,/a/i.test(n.format)),I=(b=b.replace(/\u00A4/g,T)).split(";");f.hasNegativePattern=!!YM()||I.length>1,f.nData=YM()?LM(y.type+"nData",u):p(I[1]||"-"+I[0],!0,T),f.pData=YM()?LM(y.type+"pData",u):p(I[0],!1,T),g[2]||n.minimumFractionDigits||n.maximumFractionDigits||(o=p(b.split(";")[0],!0,"",!0).minimumFraction)}if(e.formatRegex.test(n.format)||!n.format){if(zM(d,h(n.format||"N")),d.custom=!1,s="###0",d.fractionDigits||n.minimumFractionDigits||n.maximumFractionDigits||o){d.fractionDigits&&(n.minimumFractionDigits=n.maximumFractionDigits=d.fractionDigits),s=v(s,o||d.fractionDigits||n.minimumFractionDigits||0,n.maximumFractionDigits||0)}if(n.minimumIntegerDigits&&(s=_(s,n.minimumIntegerDigits)),n.useGrouping&&(s=E(s)),"currency"===d.type||d.type&&YM()){YM()&&"currency"!==d.type&&(f.pData=LM(d.type+"pData",u),f.nData=LM(d.type+"nData",u));var N=s;s=f.pData.nlead+N+f.pData.nend,(f.hasNegativePattern||YM())&&(s+=";"+f.nData.nlead+N+f.nData.nend)}"percent"!==d.type||YM()||(s+=" %")}else s=n.format.replace(/'/g,'"');return Object.keys(S).length>0&&(s=i?s:function(e,t){if(-1!==e.indexOf(",")){var n=e.split(",");e=n[0]+LM("numberMapper.numberSymbols.group",t)+n[1].replace(".",LM("numberMapper.numberSymbols.decimal",t))}else e=e.replace(".",LM("numberMapper.numberSymbols.decimal",t));return e}(s,S)),s},e.fractionDigitsPattern=v,e.minimumIntegerPattern=_,e.groupingPattern=E,e.getWeekData=function(e,t){var n="sun",r=LM("supplemental.weekData.firstDay",t),i=e;return/en-/.test(i)&&(i=i.slice(3)),i=i.slice(0,2).toUpperCase()+i.substr(2),r&&(n=r[""+i]||r[i.slice(0,2)]||"sun"),o[""+n]},e.replaceBlazorCurrency=function(e,t,n){var r=LM(n||"",ZM);if(t!==r)for(var i=0,o=e;i<o.length;i++){var s=o[i];s.nend=s.nend.replace(t,r),s.nlead=s.nlead.replace(t,r)}},e.getWeekOfYear=function(e){var t,n=new Date(e.getFullYear(),0,1),r=n.getDay();r=r>=0?r:r+7;var i=Math.floor((e.getTime()-n.getTime()-6e4*(e.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)+1;if(r<4){if((t=Math.floor((i+r-1)/7)+1)>52){var o=new Date(e.getFullYear()+1,0,1).getDay();t=(o=o>=0?o:o+7)<4?1:53}}else t=Math.floor((i+r-1)/7);return t}}(TD||(TD={}));var ID=/^(.*?):[ \t]*([^\r\n]*)$/gm,ND=(function(){function e(e,t,n,r){this.mode=!0,this.emitError=!0,this.options={},"string"===typeof e?(this.url=e,this.type=t?t.toUpperCase():"GET",this.mode=!!VM(n)||n):"object"===typeof e&&(this.options=e,FM(this,this.options)),this.type=this.type?this.type.toUpperCase():"GET",this.contentType=void 0!==this.contentType?this.contentType:r}e.prototype.send=function(e){var t=this;this.data=VM(e)?this.data:e;var n={cancel:!1,httpRequest:null};return new Promise((function(e,r){t.httpRequest=new XMLHttpRequest,t.httpRequest.onreadystatechange=function(){t.stateChange(e,r)},VM(t.onLoad)||(t.httpRequest.onload=t.onLoad),VM(t.onProgress)||(t.httpRequest.onprogress=t.onProgress),VM(t.onAbort)||(t.httpRequest.onabort=t.onAbort),VM(t.onError)||(t.httpRequest.onerror=t.onError),VM(t.onUploadProgress)||(t.httpRequest.upload.onprogress=t.onUploadProgress),t.httpRequest.open(t.type,t.url,t.mode),VM(t.data)||null===t.contentType||t.httpRequest.setRequestHeader("Content-Type",t.contentType||"application/json; charset=utf-8"),t.beforeSend&&(n.httpRequest=t.httpRequest,t.beforeSend(n)),n.cancel||t.httpRequest.send(VM(t.data)?null:t.data)}))},e.prototype.successHandler=function(e){return this.onSuccess&&this.onSuccess(e,this),e},e.prototype.failureHandler=function(e){return this.onFailure&&this.onFailure(this.httpRequest),e},e.prototype.stateChange=function(e,t){var n=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===n)n=void 0;else try{n=JSON.parse(n)}catch(Sv){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?e(this.successHandler(n)):this.emitError?t(new Error(this.failureHandler(this.httpRequest.statusText))):e())},e.prototype.getResponseHeader=function(e){var t,n;t={};for(var r=ID.exec(this.httpRequest.getAllResponseHeaders());r;)t[r[1].toLowerCase()]=r[2],r=ID.exec(this.httpRequest.getAllResponseHeaders());return VM(n=t[e.toLowerCase()])?null:n}}(),/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i),CD=/msie|trident/i,wD=/Trident\/7\./,RD=/(ipad|iphone|ipod touch)/i,AD=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,OD=/android/i,MD=/trident|windows phone|edge/i,DD=/(version)[ /]([\w.]+)/i,kD={OPERA:/(opera|opr)(?:.*version|)[ /]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ /]([\w.]+)/i,CHROME:/(chrome|crios)[ /]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ /]([\w.]+)/i,SAFARI:/(safari)[ /]([\w.]+)/i,WEBKIT:/(webkit)[ /]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!==typeof window&&(window.browserDetails=window.browserDetails||{});var xD=function(){function e(){}return e.extractBrowserDetail=function(){for(var t={culture:{}},n=[],r=0,i=Object.keys(kD);r<i.length;r++){var o=i[r];if(n=e.userAgent.match(kD[""+o])){if(t.name="opr"===n[1].toLowerCase()?"opera":n[1].toLowerCase(),t.name="crios"===n[1].toLowerCase()?"chrome":t.name,t.version=n[2],t.culture.name=t.culture.language=navigator.language,e.userAgent.match(wD)){t.name="msie";break}var s=e.userAgent.match(DD);"safari"===t.name&&s&&(t.version=s[2]);break}}return t},e.getEvent=function(t){var n={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return e.isPointer?n[""+t].isPointer:e.isTouch?n[""+t].isTouch+(e.isDevice?"":" "+n[""+t].isDevice):n[""+t].isDevice},e.getTouchStartEvent=function(){return e.getEvent("start")},e.getTouchEndEvent=function(){return e.getEvent("end")},e.getTouchMoveEvent=function(){return e.getEvent("move")},e.getTouchCancelEvent=function(){return e.getEvent("cancel")},e.getValue=function(t,n){var r="undefined"!==typeof window?window.browserDetails:{};return"undefined"!==typeof navigator&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!0===e.isTouch&&(r.isIos=!0,r.isDevice=!0,r.isTouch=!0,r.isPointer=!0),"undefined"===typeof r[""+t]?r[""+t]=n.test(e.userAgent):r[""+t]},Object.defineProperty(e,"userAgent",{get:function(){return e.uA},set:function(t){e.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"info",{get:function(){return BM(window.browserDetails.info)?window.browserDetails.info=e.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIE",{get:function(){return e.getValue("isIE",CD)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isTouch",{get:function(){return BM(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isPointer",{get:function(){return BM(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMSPointer",{get:function(){return BM(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isDevice",{get:function(){return e.getValue("isDevice",ND)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos",{get:function(){return e.getValue("isIos",RD)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos7",{get:function(){return e.getValue("isIos7",AD)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){return e.getValue("isAndroid",OD)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebView",{get:function(){return BM(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(BM(window.cordova)&&BM(window.PhoneGap)&&BM(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWindows",{get:function(){return e.getValue("isWindows",MD)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchStartEvent",{get:function(){return BM(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=e.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchMoveEvent",{get:function(){return BM(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=e.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchEndEvent",{get:function(){return BM(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=e.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchCancelEvent",{get:function(){return BM(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=e.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),e.uA="undefined"!==typeof navigator?navigator.userAgent:"",e}(),LD=function(){function e(){}return e.addOrGetEventData=function(e){return"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[])},e.add=function(t,n,r,i,o){var s,a=e.addOrGetEventData(t);s=o?function(e,t){var n;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout((function(){return n=null,e.apply(r,i)}),t)}}(r,o):r,i&&(s=s.bind(i));for(var c=n.split(" "),l=0;l<c.length;l++)a.push({name:c[parseInt(l.toString(),10)],listener:r,debounce:s}),xD.isIE?t.addEventListener(c[parseInt(l.toString(),10)],s):t.addEventListener(c[parseInt(l.toString(),10)],s,{passive:!1});return s},e.remove=function(t,n,r){for(var i=e.addOrGetEventData(t),o=n.split(" "),s=function(e){var n,s=-1;i&&0!==i.length&&i.some((function(t,i){return t.name===o[parseInt(e.toString(),10)]&&t.listener===r&&(s=i,n=t.debounce,!0)})),-1!==s&&i.splice(s,1),n&&t.removeEventListener(o[parseInt(e.toString(),10)],n)},a=0;a<o.length;a++)s(a)},e.clearEvents=function(t){var n,r;r=zM([],r,n=e.addOrGetEventData(t));for(var i=0;i<r.length;i++)t.removeEventListener(r[parseInt(i.toString(),10)].name,r[parseInt(i.toString(),10)].debounce),n.shift()},e.trigger=function(t,n,r){for(var i=0,o=e.addOrGetEventData(t);i<o.length;i++){var s=o[i];s.name===n&&s.debounce.call(this,r)}},e}(),PD=/^svg|^path|^g/;function jD(e,t){var n=PD.test(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return"undefined"===typeof t||(n.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(n.className=t.className),void 0!==t.id&&(n.id=t.id),void 0!==t.styles&&n.setAttribute("style",t.styles),void 0!==t.attrs&&function(e,t){for(var n=Object.keys(t),r=e,i=0,o=n;i<o.length;i++){var s=o[i];if(UM(r)){var a=s;"tabindex"===s&&(a="tabIndex"),r.attributes[""+a]=t[""+s]}else r.setAttribute(s,t[""+s])}}(n,t.attrs)),n}function UD(e,t){for(var n=zD(t),r=0,i=e;r<i.length;r++)for(var o=i[r],s=0,a=n;s<a.length;s++){var c=a[s];if(UM(o)){var l=LM("attributes.className",o);VM(l)?PM("attributes.className",c,o):new RegExp("\\b"+c+"\\b","i").test(l)||PM("attributes.className",l+" "+c,o)}else o.classList.contains(c)||o.classList.add(c)}return e}function FD(e,t){for(var n=zD(t),r=0,i=e;r<i.length;r++){var o=i[r],s=UM(o);if(s?LM("attributes.className",o):""!==o.className)for(var a=0,c=n;a<c.length;a++){var l=c[a];if(s){var d=LM("attributes.className",o).split(" "),u=d.indexOf(l);-1!==u&&d.splice(u,1),PM("attributes.className",d.join(" "),o)}else o.classList.remove(l)}}return e}function zD(e){var t=[];return"string"===typeof e?t.push(e):t=e,t}function VD(e){var t=e;return""===t.style.visibility&&t.offsetWidth>0}function BD(e){e.querySelectorAll("script").forEach((function(e){var t=document.createElement("script");t.text=e.innerHTML,document.head.appendChild(t),GD(t)}))}function GD(e){var t=e.parentNode;if(t)return t.removeChild(e)}function HD(e,t,n){return void 0===t&&(t=document),e=WD(e),t.querySelector(e)}function WD(e){var t=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(e.match(/#[0-9]/g)||e.match(t)){for(var n=e.split(","),r=0;r<n.length;r++){for(var i=n[parseInt(r.toString(),10)].split(" "),o=0;o<i.length;o++)if(i[parseInt(o.toString(),10)].indexOf("#")>-1&&!i[parseInt(o.toString(),10)].match(/\[.*\]/)){var s=i[parseInt(o.toString(),10)].split("#");if(s[1].match(/^\d/)||s[1].match(t)){var a=i[parseInt(o.toString(),10)].split(".");a[0]=a[0].replace(/#/,"[id='")+"']",i[parseInt(o.toString(),10)]=a.join(".")}}n[parseInt(r.toString(),10)]=i.join(" ")}return n.join(",")}return e}function YD(e,t){var n=e;if("function"===typeof n.closest)return n.closest(t);for(;n&&1===n.nodeType;){if(KD(n,t))return n;n=n.parentNode}return null}function qD(e,t){void 0!==t&&Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}function KD(e,t){var n=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return n?n.call(e,t):-1!==[].indexOf.call(document.querySelectorAll(t),e)}var QD=new RegExp("]"),JD=function(){function e(e,t){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new gD(this),BM(t)||(this.element="string"===typeof t?document.querySelector(t):t,VM(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),BM(e)||this.setProperties(e,!0),this.isDestroyed=!1}return e.prototype.setProperties=function(e,t){var n=this.isProtectedOnChange;this.isProtectedOnChange=!!t,FM(this,e),!0!==t?(FM(this.changedProperties,e),this.dataBind()):YM()&&this.isRendered&&this.serverDataBind(e),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=n},e.callChildDataBind=function(e,t){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if(t[""+i]instanceof Array)for(var o=0,s=t[""+i];o<s.length;o++){var a=s[o];void 0!==a.dataBind&&a.dataBind()}else t[""+i].dataBind()}},e.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},e.prototype.dataBind=function(){if(e.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,n=this.changedProperties,r=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(n,r),this.isProtectedOnChange=t}},e.prototype.serverDataBind=function(e){if(YM()){e=e||{},zM(this.bulkChanges,{},e,!0);var t="sfBlazor";this.allowServerDataBinding&&window[""+t].updateModel&&(window[""+t].updateModel(this),this.bulkChanges={})}},e.prototype.saveChanges=function(e,t,n){if(YM()){var r={};r[""+e]=t,this.serverDataBind(r)}this.isProtectedOnChange||(this.oldProperties[""+e]=n,this.changedProperties[""+e]=t,this.finalUpdate(),this.finalUpdate=xM(this.dataBind.bind(this)))},e.prototype.addEventListener=function(e,t){this.modelObserver.on(e,t)},e.prototype.removeEventListener=function(e,t){this.modelObserver.off(e,t)},e.prototype.trigger=function(e,t,n,r){var i=this;if(!0!==this.isDestroyed){var o=this.isProtectedOnChange;this.isProtectedOnChange=!1;var s=this.modelObserver.notify(e,t,n,r);if(QD.test(e)){var a=LM(e,this);if(a){if(window.Blazor){var c=a.call(this,t);c&&"function"===typeof c.then?n?c.then((function(e){n&&(e="string"===typeof e&&i.modelObserver.isJson(e)?JSON.parse(e):e,n.call(i,e))})).catch((function(e){r&&(e="string"===typeof e&&i.modelObserver.isJson(e)?JSON.parse(e):e,r.call(i,e))})):s=c:n&&n.call(this,t)}else a.call(this,t),n&&n.call(this,t)}else n&&n.call(this,t)}return this.isProtectedOnChange=o,s}},e.prototype.addInstance=function(){var e="e-"+this.getModuleName().toLowerCase();UD([this.element],["e-lib",e]),VM(this.element.ej2_instances)?PM("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},e.prototype.destroy=function(){var e=this;this.element.ej2_instances=this.element.ej2_instances.filter((function(t){return t!==e})),FD([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&FD([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},e}();function XD(e,t,n,r){return e.properties.hasOwnProperty(t)&&e.properties[t]instanceof r||(e.properties[""+t]=kM(r,[e,t,n])),e.properties[""+t]}function ZD(e,t,n,r,i,o){for(var s=[],a=n?n.length:0,c=0;c<a;c++){var l=r;if(o&&(l=r(n[parseInt(c.toString(),10)],e)),i){var d=kM(l,[e,t,{},!0]);d.setProperties(n[parseInt(c.toString(),10)],!0),s.push(d)}else s.push(kM(l,[e,t,n[parseInt(c.toString(),10)],!1]))}return s}function $D(e,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[""+t]=e),this.properties[""+t]}}function ek(e,t){return function(n){if(this.properties[""+t]!==n){var r=this.properties.hasOwnProperty(t)?this.properties[t]:e;this.saveChanges(t,n,r),this.properties[""+t]=n}}}function tk(e,t,n){return function(){return XD(this,t,e,n)}}function nk(e,t,n){return function(r){XD(this,t,e,n).setProperties(r)}}function rk(e,t,n){return function(){var r=this;if(!this.properties.hasOwnProperty(t)){var i=ZD(this,t,e,n,!1);this.properties[""+t]=i}var o=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return this.properties[t].hasOwnProperty("push")||o||["push","pop"].forEach((function(e){var i={value:ok(e,t,n,r.properties[""+t]).bind(r),configurable:!0};Object.defineProperty(r.properties[""+t],e,i)})),this.properties[t].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[""+t],"isComplexArray",{value:!0}),this.properties[""+t]}}function ik(e,t,n){return function(r){this.isComplexArraySetter=!0;var i=ZD(this,t,e,n,!1),o=ZD(this,t,r,n,!0);this.isComplexArraySetter=!1,this.saveChanges(t,o,i),this.properties[""+t]=o}}function ok(e,t,n,r){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=this.propName?this.getParentKey()+"."+t+"-":t+"-";switch(e){case"push":for(var s=0;s<n.length;s++){Array.prototype[""+e].apply(r,[n[parseInt(s.toString(),10)]]);var a=sk(o+(r.length-1),n[parseInt(s.toString(),10)],!this.controlParent,e);this.serverDataBind(a,n[parseInt(s.toString(),10)],!1,e)}break;case"pop":Array.prototype[""+e].apply(r);var c=sk(o+r.length,null,!this.controlParent,e);this.serverDataBind(c,{ejsAction:"pop"},!1,e)}return r}}function sk(e,t,n,r){var i=e;if(n&&((i={})[""+e]=t,t&&"object"===typeof t)){i[""+e].ejsAction=r}return i}function ak(e){return function(t,n){var r={set:ek(e,n),get:$D(e,n),enumerable:!0,configurable:!0};Object.defineProperty(t,n,r),uk(t,n,"prop",e)}}function ck(e,t){return function(n,r){var i={set:nk(e,r,t),get:tk(e,r,t),enumerable:!0,configurable:!0};Object.defineProperty(n,r,i),uk(n,r,"complexProp",e,t)}}function lk(){return function(e,t){var n={set:function(e){var n=this.properties[""+t];if(n!==e){var r=hk(this,t);!1===BM(n)&&r.context.removeEventListener(r.prefix,n),r.context.addEventListener(r.prefix,e),this.properties[""+t]=e}},get:$D(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,n),uk(e,t,"event")}}function dk(e){}function uk(e,t,n,r,i){BM(e.propList)&&(e.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),e.propList[n+"s"].push({propertyName:t,defaultValue:r,type:i}),e.propList[n+"Names"].push(t)}function hk(e,t){if(!1===e.hasOwnProperty("parentObj"))return{context:e,prefix:t};var n=LM("propName",e);return n&&(t=n+"-"+t),hk(LM("parentObj",e),t)}var pk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fk=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};!function(t){function n(e){var n=t.call(this,e,void 0)||this;return n.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},n}var r;pk(n,t),r=n,n.prototype.animate=function(e,t){t=t||{};var n=this.getModel(t);if("string"===typeof e)for(var i=Array.prototype.slice.call(function(e,t,n){return void 0===t&&(t=document),e=WD(e),t.querySelectorAll(e)}(e,document)),o=0,s=i;o<s.length;o++){var a=s[o];n.element=a,r.delayAnimation(n)}else n.element=e,r.delayAnimation(n)},n.stop=function(e,t){e.style.animation="",e.removeAttribute("e-animate");var n=e.getAttribute("e-animation-id");if(n){var r=parseInt(n,10);cancelAnimationFrame(r),e.removeAttribute("e-animation-id")}t&&t.end&&t.end.call(this,t)},n.delayAnimation=function(e){"Disable"===mk?(e.begin&&e.begin.call(this,e),e.end&&e.end.call(this,e)):e.delay?setTimeout((function(){r.applyAnimation(e)}),e.delay):r.applyAnimation(e)},n.applyAnimation=function(t){var n=this;t.timeStamp=0;var r=0,i=0,o=0,s=t.duration;t.element.setAttribute("e-animate","true");var a=function(c){try{if(c){o=0===o?c:o,t.timeStamp=c+t.timeStamp-o,o=c,!r&&t.begin&&t.begin.call(n,t),r+=1;var l=t.timeStamp/r;t.timeStamp<s&&t.timeStamp+l<s&&t.element.getAttribute("e-animate")?(t.element.style.animation=t.name+" "+t.duration+"ms "+t.timingFunction,t.progress&&t.progress.call(n,t),requestAnimationFrame(a)):(cancelAnimationFrame(i),t.element.removeAttribute("e-animation-id"),t.element.removeAttribute("e-animate"),t.element.style.animation="",t.end&&t.end.call(n,t))}else i=requestAnimationFrame(a),t.element.setAttribute("e-animation-id",i.toString())}catch(e){cancelAnimationFrame(i),t.element.removeAttribute("e-animation-id"),t.fail&&t.fail.call(n,e)}};a()},n.prototype.getModel=function(e){return{name:e.name||this.name,delay:e.delay||this.delay,duration:void 0!==e.duration?e.duration:this.duration,begin:e.begin||this.begin,end:e.end||this.end,fail:e.fail||this.fail,progress:e.progress||this.progress,timingFunction:this.easing[e.timingFunction]?this.easing[e.timingFunction]:e.timingFunction||this.easing[this.timingFunction]}},n.prototype.onPropertyChanged=function(e,t){},n.prototype.getModuleName=function(){return"animation"},n.prototype.destroy=function(){},fk([ak("FadeIn")],n.prototype,"name",void 0),fk([ak(400)],n.prototype,"duration",void 0),fk([ak("ease")],n.prototype,"timingFunction",void 0),fk([ak(0)],n.prototype,"delay",void 0),fk([lk()],n.prototype,"progress",void 0),fk([lk()],n.prototype,"begin",void 0),fk([lk()],n.prototype,"end",void 0),fk([lk()],n.prototype,"fail",void 0),n=r=fk([dk],n)}(JD);var mk="";var gk,yk=function(){function e(e){this.loadedModules=[],this.parent=e}return e.prototype.inject=function(e,t){var n=e.length;if(0!==n){this.loadedModules.length&&this.clearUnusedModule(e);for(var r=0;r<n;r++)for(var i=e[parseInt(r.toString(),10)],o=0,s=t;o<s.length;o++){var a=s[o],c=i.member;if(a&&a.prototype.getModuleName()===i.member&&!this.isModuleLoaded(c)){var l=kM(a,i.args),d=this.getMemberName(c);i.isProperty?PM(d,a,this.parent):PM(d,l,this.parent);var u=i;u.member=d,this.loadedModules.push(u)}}}else this.clean()},e.prototype.clean=function(){for(var e=0,t=this.loadedModules;e<t.length;e++){var n=t[e];n.isProperty||LM(n.member,this.parent).destroy()}this.loadedModules=[]},e.prototype.clearUnusedModule=function(e){for(var t,n,r=this,i=e.map((function(e){return r.getMemberName(e.member)})),o=0,s=this.loadedModules.filter((function(e){return-1===i.indexOf(e.member)}));o<s.length;o++){var a=s[o];a.isProperty||LM(a.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(a),1),t=this.parent,n=a.member,delete t[""+n]}},e.prototype.getMemberName=function(e){return e[0].toLowerCase()+e.substring(1)+"Module"},e.prototype.isModuleLoaded=function(e){for(var t=0,n=this.loadedModules;t<n.length;t++){if(n[t].member===this.getMemberName(e))return!0}return!1},e}(),vk=function(){function e(e,t,n,r){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=LM("callChildDataBind",JD),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=t,this.isParentArray=r,this.setProperties(n,!0)}return e.prototype.updateChange=function(e,t){!0===e?this.parentObj.childChangedProperties[""+t]=e:delete this.parentObj.childChangedProperties[""+t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)},e.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(e)}}},e.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},e.prototype.setProperties=function(e,t){!0===t?(FM(this,e),this.updateChange(!1,this.propName),this.clearChanges()):FM(this,e)},e.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(PM(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),PM(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},e.prototype.saveChanges=function(e,t,n,r){this.controlParent.isProtectedOnChange||(r||this.serverDataBind(e,t,!0),this.oldProperties[""+e]=n,this.changedProperties[""+e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},e.prototype.serverDataBind=function(e,t,n,r){if(YM()&&!this.parentObj.isComplexArraySetter){var i,o={},s=n?this.getParentKey(!0)+"."+e:e;if(-1!==s.indexOf(".")){var a=s.split(".");i=o;for(var c=0;c<a.length;c++){var l=c===a.length-1;i[a[parseInt(c.toString(),10)]]=l?t:{},i=l?i:i[a[parseInt(c.toString(),10)]]}}else o[""+s]={},i=o[""+s],o[""+s][""+e]=t;if(this.isParentArray){i.ejsAction=r||"none"}this.controlParent.serverDataBind(o)}},e.prototype.getParentKey=function(e){var t="",n=this.propName;if(this.isParentArray){t=this.parentObj[this.propName].indexOf(this);var r=this.parentObj[this.propName].length;r=e?r:r>0?r-1:0,n+=t=-1!==t?"-"+t:"-"+r}return this.controlParent!==this.parentObj&&(n=this.parentObj.getParentKey()+"."+this.propName+t),n},e}(),_k=["grid","pivotview","treegrid","spreadsheet","rangeNavigator","DocumentEditor","listbox","PdfViewer","richtexteditor","DashboardLayout","chart","stockChart","circulargauge","diagram","heatmap","lineargauge","maps","smithchart","barcode","sparkline","treemap","bulletChart","kanban","daterangepicker","schedule","gantt","signature","query-builder","drop-down-tree","carousel","filemanager","uploader","accordion","tab","treeview"],Ek=[115,121,110,99,102,117,115,105,111,110,46,105,115,76,105,99,86,97,108,105,100,97,116,101,100],Sk=function(){function e(e){this.isValidated=!1,this.isLicensed=!0,this.version="20.4",this.platform=/JavaScript|ASPNET|ASPNETCORE|ASPNETMVC|FileFormats/i,this.errors={noLicense:"<span>This application was built using a trial version of Syncfusion Essential Studio. To remove the license validation message permanently, a valid license key must be included.</span>",trailExpired:"<span>This application was built using a trial version of Syncfusion Essential Studio. To remove the license validation message permanently, a valid license key must be included.</span>",versionMismatched:"<span>The included Syncfusion license key is invalid.</span>",platformMismatched:"<span>The included Syncfusion license key is invalid.</span>",invalidKey:"<span>The included Syncfusion license key is invalid.</span>"},this.manager=function(){var e=null;return{setKey:function(t){e=t},getKey:function(){return e}}}(),this.npxManager={getKey:function(){return"npxKeyReplace"}},this.manager.setKey(e)}return e.prototype.validate=function(){if(!this.isValidated&&jM&&!LM(bk(Ek),jM)&&!LM("Blazor",jM)){var e=void 0,t=void 0;if(this.manager&&this.manager.getKey()||this.npxManager&&"npxKeyReplace"!==this.npxManager.getKey()){var n=this.getInfoFromKey();if(n&&n.length)for(var r=0,i=n;r<i.length;r++){var o=i[r];if(!this.platform.test(o.platform)||o.invalidPlatform)e=this.errors.platformMismatched;else if(-1===o.version.indexOf(this.version))e=(e=(e=this.errors.versionMismatched).replace("##LicenseVersion",o.version)).replace("##Requireversion",this.version+".x");else if(o.expiryDate){var s=new Date(o.expiryDate),a=new Date;if(!(s!==a&&s<a))break;e=this.errors.trailExpired}}else e=this.errors.invalidKey}else{var c=LM(bk([115,121,110,99,102,117,115,105,111,110,46,108,105,99,101,110,115,101,67,111,110,116,101,110,116]),jM);t=LM(bk([115,121,110,99,102,117,115,105,111,110,46,99,108,97,105,109,65,99,99,111,117,110,116,85,82,76]),jM),e=c&&""!==c?c:this.errors.noLicense}if(e&&"undefined"!==typeof document&&!VM(document)){var l=jD("div",{innerHTML:"<img src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzE5OV80KSI+CjxwYXRoIGQ9Ik0xMiAyMUMxNi45NzA2IDIxIDIxIDE2Ljk3MDYgMjEgMTJDMjEgNy4wMjk0NCAxNi45NzA2IDMgMTIgM0M3LjAyOTQ0IDMgMyA3LjAyOTQ0IDMgMTJDMyAxNi45NzA2IDcuMDI5NDQgMjEgMTIgMjFaIiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBmaWxsPSIjNjE2MDYzIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS44MTI1IDlDMTIuNDMzOCA5IDEyLjkzNzUgOC40OTYzMiAxMi45Mzc1IDcuODc1QzEyLjkzNzUgNy4yNTM2OCAxMi40MzM4IDYuNzUgMTEuODEyNSA2Ljc1QzExLjE5MTIgNi43NSAxMC42ODc1IDcuMjUzNjggMTAuNjg3NSA3Ljg3NUMxMC42ODc1IDguNDk2MzIgMTEuMTkxMiA5IDExLjgxMjUgOVoiIGZpbGw9IiM3MzczNzMiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xOTlfNCI+CjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K' style=\"top: 6px;\n                    position: absolute;\n                    left: 16px;\n                    width: 24px;\n                    height: 24px;\"/>"+e+' <a style="text-decoration: none;color: #0D6EFD;font-weight: 500;" href='+(gk=t&&""!==t?t:"https://www.syncfusion.com/account/claim-license-key?pl=SmF2YVNjcmlwdA==&vs=MjAuNA==")+">Claim your free account</a>"});l.setAttribute("style","position: fixed;\n                top: 10px;\n                left: 10px;\n                right: 10px;\n                font-size: 14px;\n                background: #EEF2FF;\n                color: #222222;\n                z-index: 999999999;\n                text-align: left;\n                border: 1px solid #EEEEEE;\n                padding: 10px 11px 10px 50px;\n                border-radius: 8px;\n                font-family: Helvetica Neue, Helvetica, Arial;"),document.body.appendChild(l),this.isLicensed=!1}this.isValidated=!0,PM(bk(Ek),this.isValidated,jM)}return this.isLicensed},e.prototype.getDecryptedData=function(e){try{return atob(e)}catch(Sv){return""}},e.prototype.getInfoFromKey=function(){try{var e="",t=[5439488,7929856,5111808,6488064,4587520,7667712,5439488,6881280,5177344,7208960,4194304,4456448,6619136,7733248,5242880,7077888,6356992,7602176,4587520,7274496,7471104,7143424],n=[],r=[],i=!1,o=!1;this.manager.getKey()?e=this.manager.getKey():(o=!0,e=this.npxManager.getKey().split("npxKeyReplace")[1]);for(var s=e.split(";"),a=0,c=s;a<c.length;a++){var l=c[a],d=this.getDecryptedData(l);if(d){var u=0,h="";if(o){var p=d[d.length-1],f=[];for(m=0;m<d.length;m++)f[parseInt(m.toString(),10)]=d[parseInt(m.toString(),10)].charCodeAt(0)-p.charCodeAt(0);for(m=0;m<f.length;m++)h+=String.fromCharCode(f[parseInt(m.toString(),10)])}else for(var m=0;m<d.length;m++,u++){u===t.length&&(u=0);var g=d.charCodeAt(m);h+=String.fromCharCode(g^t[parseInt(u.toString(),10)]>>16)}this.platform.test(h)?(n=h.split(";"),i=!1,n.length>3&&r.push({platform:n[0],version:n[1],expiryDate:n[2]})):h&&h.split(";").length>3&&(i=!0)}}return i&&!r.length?[{invalidPlatform:i}]:r.length?r:null}catch(Sv){return null}},e}(),Tk=new Sk;function bk(e){for(var t="",n=0,r=e;n<r.length;n++){var i=r[n];t+=String.fromCharCode(i)}return t}var Ik,Nk=function(e){return e&&function(e){Tk=new Sk(e)}(e),Tk.validate()},Ck=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wk=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Rk=0,Ak=0,Ok=0,Mk=!0,Dk=!1,kk=!1;var xk=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.randomId=function(){if("undefined"!==typeof window){var e=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(e)}}(),r.isStringTemplate=!1,r.needsID=!1,r.isReactHybrid=!1,VM(r.enableRtl)&&r.setProperties({enableRtl:vD},!0),VM(r.locale)&&r.setProperties({locale:ED},!0),r.moduleLoader=new yk(r),r.localObserver=new gD(r),yD.on("notifyExternalChange",r.detectFunction,r,r.randomId),"undefined"===typeof window||"undefined"===typeof document||Nk()||-1!==_k.indexOf(r.getModuleName())&&(Ok+=1)>5&&(Mk=!1),BM(n)||r.appendTo(),r}return Ck(t,e),t.prototype.requiredModules=function(){return[]},t.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),this.refreshing||(FD([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),e.prototype.destroy.call(this),this.moduleLoader.clean(),yD.off("notifyExternalChange",this.detectFunction,this.randomId)))},t.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new gD(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},t.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},t.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},t.prototype.getLocalData=function(){var e=this.getModuleName()+this.element.id;return kk?window.localStorage.getItem(e+this.ej2StatePersistenceVersion):window.localStorage.getItem(e)},t.prototype.appendTo=function(t){if(VM(t)||"string"!==typeof t?VM(t)||(this.element=t):this.element=HD(t,document),!VM(this.element)){var n="e-"+this.getModuleName().toLowerCase();UD([this.element],["e-control",n]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var r=LM("ej2_instances",this.element);r&&-1!==r.indexOf(this)||e.prototype.addInstance.call(this),this.preRender(),this.injectModules(),Mk||Dk||(!function(){var e='\n    <div style="\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 99999;\n    ">\n        <div style="\n    background: #FFFFFF;\n    height: 455px;\n    width: 840px;\n    font-family: Helvetica Neue, Helvetica, Arial;\n    color: #000000;\n    box-shadow: 0px 4.8px 14.4px rgb(0 0 0 / 18%), 0px 25.6px 57.6px rgb(0 0 0 / 22%);\n    display: block;\n    margin: 8% auto;\n    border-radius: 20px;\n    ">\n            <div style="\n    position: absolute;\nwidth: 838px;\nheight: 62px;\nbackground-color: #F9F9F9;\nborder: 1px solid #EEEEEE;\nborder-top-left-radius: 20px;\nborder-top-right-radius: 20px;\n">\n                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ2IiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMTQ2IDMyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNNDAuNTk2NSAxNS4wMDc4SDMyLjQyNUMzMS41NTU3IDE1LjAwNzggMzAuOTAzNyAxNS4xODEyIDMwLjUxMjUgMTUuNDg0NkMzMC4xMjEzIDE1LjgzMTQgMjkuOTA0IDE2LjMwODIgMjkuOTA0IDE3LjA0NTFDMjkuOTA0IDE3LjYwODYgMzAuMDc3OCAxOC4wNDIxIDMwLjQyNTYgMTguMzAyMkMzMC43NzMzIDE4LjYwNTYgMzEuMjk0OSAxOC43MzU2IDMxLjk5MDMgMTguNzM1NkgzNi4zMzY5QzM4LjExODkgMTguNzM1NiAzOS40MjI5IDE5LjA4MjQgNDAuMTYxOCAxOS43MzI2QzQwLjk0NDIgMjAuNDI2MiA0MS4yOTE5IDIxLjU1MzIgNDEuMjkxOSAyMy4xMTM3QzQxLjI5MTkgMjQuNzE3NiA0MC44NTcyIDI1Ljg4OCAzOS45ODc5IDI2LjY2ODJDMzkuMTE4NiAyNy40MDUxIDM3LjcyNzcgMjcuNzk1MyAzNS44NTg3IDI3Ljc5NTNIMjcuMDc4N1YyNS4wMjFIMzUuMzM3MkMzNi4yOTM0IDI1LjAyMSAzNi45NDU0IDI0Ljg5MSAzNy4zMzY2IDI0LjYzMDlDMzcuNzI3NyAyNC4zNzA4IDM3LjkwMTYgMjMuODk0IDM3LjkwMTYgMjMuMjg3MUMzNy45MDE2IDIyLjYzNjkgMzcuNzI3NyAyMi4xNjAxIDM3LjM4IDIxLjlDMzcuMDMyMyAyMS42Mzk5IDM2LjQyMzggMjEuNDY2NSAzNS41NTQ1IDIxLjQ2NjVIMzEuNjQyNkMyOS44NjA1IDIxLjQ2NjUgMjguNTEzMSAyMS4xMTk4IDI3LjY4NzMgMjAuMzgyOEMyNi44NjE0IDE5LjY0NTkgMjYuNDI2OCAxOC41MTg5IDI2LjQyNjggMTcuMDAxN0MyNi40MjY4IDE1LjM1NDUgMjYuODYxNCAxNC4xNDA4IDI3LjczMDcgMTMuMzYwNkMyOC42IDEyLjU4MDMgMjkuOTkwOSAxMi4yMzM1IDMxLjkwMzQgMTIuMjMzNUg0MC41OTY1VjE1LjAwNzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik00OC4wNzI3IDI1LjI4MTFINTAuNTA2OFYxNi4zOTQ5SDUzLjU0OTNWMjcuNTM1MkM1My41NDkzIDI5LjA1MjQgNTMuMjAxNiAzMC4xNzk0IDUyLjUwNjIgMzAuOTE2M0M1MS44MTA3IDMxLjY1MzIgNTAuNzI0MSAzMiA0OS4yNDYzIDMySDQzLjMzNVYyOS42NTkySDQ4LjcyNDdDNDkuMjg5NyAyOS42NTkyIDQ5Ljc2NzkgMjkuNTI5MiA1MC4wNzIxIDI5LjIyNThDNTAuMzc2NCAyOC45NjU3IDUwLjU1MDIgMjguNTMyMiA1MC41NTAyIDI4LjAxMlYyNy44Mzg2SDQ3Ljg5ODlDNDYuMjAzNyAyNy44Mzg2IDQ0Ljk0MzIgMjcuNDkxOSA0NC4yNDc4IDI2Ljg0MTZDNDMuNTA4OSAyNi4xNDgxIDQzLjE2MTEgMjUuMDY0NCA0My4xNjExIDIzLjQ2MDVWMTYuMzk0OUg0Ni4xNjAyVjIzLjIwMDVDNDYuMTYwMiAyNC4wNjc0IDQ2LjI5MDYgMjQuNjMwOSA0Ni41NTE0IDI0Ljg5MUM0Ni43MjUzIDI1LjE1MTEgNDcuMjQ2OSAyNS4yODExIDQ4LjA3MjcgMjUuMjgxMVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTU1Ljg5NjUgMTYuMzk0OUg2MS41OTA0QzYzLjMyOTEgMTYuMzk0OSA2NC41NDYxIDE2LjY5ODMgNjUuMjg1IDE3LjM0ODVDNjYuMDIzOSAxNy45OTg4IDY2LjM3MTYgMTkuMDgyNCA2Ni4zNzE2IDIwLjU1NjNWMjcuNzk1M0g2My4zMjkxVjIwLjk0NjRDNjMuMzI5MSAyMC4wNzk0IDYzLjE5ODcgMTkuNTE1OSA2Mi45Mzc5IDE5LjI5OTJDNjIuNjc3MSAxOS4wMzkxIDYyLjE1NTUgMTguOTA5MSA2MS4zMjk3IDE4LjkwOTFINTguODk1NlYyNy44Mzg2SDU1Ljg1M1YxNi4zOTQ5SDU1Ljg5NjVaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03NC45MzQyIDI1LjM2NzhINzguMTUwNlYyNy43OTUySDc0LjAyMTRDNzIuOTc4MiAyNy43OTUyIDcyLjEwODkgMjcuNjY1MiA3MS40NTcgMjcuNDkxOEM3MC44MDUgMjcuMjc1IDcwLjE5NjUgMjYuOTI4MyA2OS43MTgzIDI2LjQ1MTRDNjkuMTk2OCAyNS45MzEzIDY4Ljc2MjEgMjUuMjgxMSA2OC40NTc4IDI0LjU0NDJDNjguMTUzNiAyMy44MDcyIDY4LjAyMzIgMjIuOTgzNiA2OC4wMjMyIDIyLjE2QzY4LjAyMzIgMjEuMjkzMSA2OC4xNTM2IDIwLjQ2OTUgNjguNDU3OCAxOS42ODkyQzY4Ljc2MjEgMTguOTA5IDY5LjE1MzMgMTguMzAyMSA2OS43MTgzIDE3Ljc4MTlDNzAuMjM5OSAxNy4zMDUxIDcwLjgwNSAxNi45NTgzIDcxLjUwMDQgMTYuNzQxNkM3Mi4xOTU5IDE2LjUyNDkgNzMuMDIxNyAxNi40MzgyIDc0LjA2NDkgMTYuNDM4Mkg3OC4xOTQxVjE4LjkwOUg3NC45MzQyQzczLjQ5OTggMTguOTA5IDcyLjU0MzYgMTkuMTY5MSA3MS45Nzg1IDE5LjY0NTlDNzEuNDU2OSAyMC4xMjI3IDcxLjE1MjcgMjAuOTg5NyA3MS4xNTI3IDIyLjIwMzRDNzEuMTUyNyAyMi44OTY5IDcxLjI4MzEgMjMuNDYwNSA3MS41MDA0IDIzLjkzNzNDNzEuNzE3NyAyNC40MTQxIDcyLjA2NTUgMjQuNzYwOSA3Mi41MDAxIDI1LjA2NDNDNzIuNzE3NCAyNS4xOTQ0IDcyLjk3ODIgMjUuMjgxMSA3My4yODI1IDI1LjM2NzhDNzMuNjMwMiAyNS4zMjQ0IDc0LjE1MTggMjUuMzY3OCA3NC45MzQyIDI1LjM2NzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik04MC44NDU2IDE4LjY0ODlINzguNjcyNFYxNi4zNTE1SDgwLjg0NTZWMTUuMTgxMUM4MC44NDU2IDE0LjAxMDggODEuMDYzIDEzLjIzMDUgODEuNDk3NiAxMi44NDA0QzgxLjkzMjMgMTIuNDUwMyA4Mi43NTgxIDEyLjIzMzUgODMuOTc1MSAxMi4yMzM1SDg2Ljg0MzhWMTQuNDAwOUg4NS40MDk1Qzg0Ljg4NzkgMTQuNDAwOSA4NC41NDAyIDE0LjQ4NzYgODQuMzIyOSAxNC42NjFDODQuMTA1NSAxNC44MzQ0IDgzLjk3NTEgMTUuMDk0NSA4My45NzUxIDE1LjQ0MTJWMTYuMzUxNUg4Ni44NDM4VjE4LjY0ODlIODMuOTc1MVYyNy43OTUzSDgwLjg0NTZWMTguNjQ4OVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTk4LjQwNTYgMjcuNzk1M0g5Mi43MTE2QzkxLjAxNjUgMjcuNzk1MyA4OS44NDI5IDI3LjQ0ODUgODkuMDYwNSAyNi43OTgzQzg4LjMyMTYgMjYuMTQ4MSA4Ny45MzA0IDI1LjA2NDQgODcuOTMwNCAyMy41OTA2VjE2LjM5NDlIOTAuOTI5NVYyMy40MTcyQzkwLjkyOTUgMjQuMTk3NCA5MS4wNTk5IDI0LjY3NDMgOTEuMzIwNyAyNC45MzQ0QzkxLjU4MTUgMjUuMTk0NCA5Mi4xMDMxIDI1LjMyNDUgOTIuOTI4OSAyNS4zMjQ1SDk1LjM2M1YxNi4zOTQ5SDk4LjQwNTZWMjcuNzk1M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTEwMC42MjIgMjUuNDExMkgxMDcuMDExQzEwNy41NzcgMjUuNDExMiAxMDguMDExIDI1LjMyNDUgMTA4LjI3MiAyNS4xNTExQzEwOC41MzMgMjQuOTc3NyAxMDguNjYzIDI0LjY3NDMgMTA4LjY2MyAyNC4zMjc1QzEwOC42NjMgMjMuOTM3NCAxMDguNTMzIDIzLjY3NzMgMTA4LjI3MiAyMy40NjA1QzEwOC4wMTEgMjMuMjg3MSAxMDcuNTc3IDIzLjIwMDUgMTA3LjA1NSAyMy4yMDA1SDEwNC40NDdDMTAyLjg4MiAyMy4yMDA1IDEwMS44MzkgMjIuOTgzNyAxMDEuMzE4IDIyLjUwNjlDMTAwLjc1MiAyMi4wMzAxIDEwMC40OTIgMjEuMjA2NSAxMDAuNDkyIDE5Ljk5MjdDMTAwLjQ5MiAxOC43NzkgMTAwLjgzOSAxNy44Njg3IDEwMS40OTEgMTcuMjYxOEMxMDIuMTQzIDE2LjY5ODMgMTAzLjE4NyAxNi4zOTQ5IDEwNC41MzQgMTYuMzk0OUgxMTEuMDU0VjE4Ljc3OUgxMDUuNzA4QzEwNC44MzggMTguNzc5IDEwNC4yNzMgMTguODY1NyAxMDQuMDEyIDE4Ljk5NTdDMTAzLjc1MiAxOS4xNjkxIDEwMy42MjEgMTkuNDI5MiAxMDMuNjIxIDE5LjgxOTRDMTAzLjYyMSAyMC4xNjYxIDEwMy43NTIgMjAuNDI2MiAxMDMuOTY5IDIwLjU5OTZDMTA0LjE4NiAyMC43NzMgMTA0LjU3NyAyMC44NTk3IDEwNS4wNTYgMjAuODU5N0gxMDcuNzk0QzEwOS4wNTQgMjAuODU5NyAxMTAuMDExIDIxLjE2MzEgMTEwLjY2MyAyMS43MjY2QzExMS4zMTUgMjIuMjkwMiAxMTEuNjYyIDIzLjE1NzEgMTExLjY2MiAyNC4yNDA4QzExMS42NjIgMjUuMjgxMSAxMTEuMzU4IDI2LjE0ODEgMTEwLjc5MyAyNi43OTgzQzExMC4yMjggMjcuNDQ4NSAxMDkuNDQ2IDI3Ljc5NTMgMTA4LjUzMyAyNy43OTUzSDEwMC43MDlWMjUuNDExMkgxMDAuNjIyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTE2LjU3NCAxNS4wOTQ0SDExMy40MDFWMTIuMjc2OUgxMTYuNTc0VjE1LjA5NDRaTTExNi41NzQgMjcuNzk1M0gxMTMuNDAxVjE2LjM5NDlIMTE2LjU3NFYyNy43OTUzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMwLjMwOSAyMi4xMTY3QzEzMC4zMDkgMjMuODkzOSAxMjkuNzQ0IDI1LjMyNDQgMTI4LjY1NyAyNi40MDgxQzEyNy41NzEgMjcuNDkxOCAxMjYuMDkzIDI4LjAxMiAxMjQuMjI0IDI4LjAxMkMxMjIuMzU1IDI4LjAxMiAxMjAuODc3IDI3LjQ5MTggMTE5Ljc5IDI2LjQwODFDMTE4LjcwNCAyNS4zMjQ0IDExOC4xMzkgMjMuODkzOSAxMTguMTM5IDIyLjExNjdDMTE4LjEzOSAyMC4zMzk0IDExOC43MDQgMTguOTA5IDExOS43OSAxNy44MjUzQzEyMC44NzcgMTYuNzQxNiAxMjIuMzk4IDE2LjIyMTQgMTI0LjIyNCAxNi4yMjE0QzEyNi4wNDkgMTYuMjIxNCAxMjcuNTI3IDE2Ljc0MTYgMTI4LjY1NyAxNy44MjUzQzEyOS43NDQgMTguODY1NiAxMzAuMzA5IDIwLjI5NjEgMTMwLjMwOSAyMi4xMTY3Wk0xMjEuMjY4IDIyLjExNjdDMTIxLjI2OCAyMy4yMDA0IDEyMS41MjkgMjQuMDY3MyAxMjIuMDUxIDI0LjY3NDJDMTIyLjU3MiAyNS4yODExIDEyMy4yNjggMjUuNTg0NSAxMjQuMTggMjUuNTg0NUMxMjUuMDkzIDI1LjU4NDUgMTI1Ljc4OSAyNS4yODExIDEyNi4zMSAyNC42NzQyQzEyNi44MzIgMjQuMDY3MyAxMjcuMDkzIDIzLjIwMDQgMTI3LjA5MyAyMi4xMTY3QzEyNy4wOTMgMjEuMDMzIDEyNi44MzIgMjAuMTY2MSAxMjYuMzEgMTkuNjAyNUMxMjUuNzg5IDE4Ljk5NTcgMTI1LjA5MyAxOC42OTIyIDEyNC4xMzcgMTguNjkyMkMxMjMuMjI0IDE4LjY5MjIgMTIyLjUyOSAxOC45OTU3IDEyMi4wMDcgMTkuNjAyNUMxMjEuNTI5IDIwLjE2NjEgMTIxLjI2OCAyMS4wMzMgMTIxLjI2OCAyMi4xMTY3WiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMxLjc4NyAxNi4zOTQ5SDEzNy40ODFDMTM5LjIxOSAxNi4zOTQ5IDE0MC40MzYgMTYuNjk4MyAxNDEuMTc1IDE3LjM0ODVDMTQxLjkxNCAxNy45OTg4IDE0Mi4yNjIgMTkuMDgyNCAxNDIuMjYyIDIwLjU1NjNWMjcuNzk1M0gxMzkuMjE5VjIwLjk0NjRDMTM5LjIxOSAyMC4wNzk0IDEzOS4wODkgMTkuNTE1OSAxMzguODI4IDE5LjI5OTJDMTM4LjU2NyAxOS4wMzkxIDEzOC4wNDYgMTguOTA5MSAxMzcuMjIgMTguOTA5MUgxMzQuNzg2VjI3LjgzODZIMTMxLjc0M1YxNi4zOTQ5SDEzMS43ODdaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDMuNzM3NDNIMFYxMC44NDY0SDcuMTI4MzFWMy43Mzc0M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTIzLjI1MTMgLTIuMTU3MjVlLTA1TDE4LjU1MTMgNS41MTY4NUwyNC4wODMxIDEwLjIwNDFMMjguNzgzMSA0LjY4NzI1TDIzLjI1MTMgLTIuMTU3MjVlLTA1WiIgZmlsbD0iI0ZGODYwMCIvPgo8cGF0aCBkPSJNMTUuNjA0MSAzLjczNzQzSDguNDc1ODNWMTAuODQ2NEgxNS42MDQxVjMuNzM3NDNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDEyLjE5MDJIMFYxOS4yOTkySDcuMTI4MzFWMTIuMTkwMloiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMTIuMTkwMkg4LjQ3NTgzVjE5LjI5OTJIMTUuNjA0MVYxMi4xOTAyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMDc5NyAxMi4xOTAySDE2Ljk1MTRWMTkuMjk5MkgyNC4wNzk3VjEyLjE5MDJaIiBmaWxsPSIjRkY4NjAwIi8+CjxwYXRoIGQ9Ik03LjEyODMxIDIwLjY4NjNIMFYyNy43OTUzSDcuMTI4MzFWMjAuNjg2M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMjAuNjg2M0g4LjQ3NTgzVjI3Ljc5NTNIMTUuNjA0MVYyMC42ODYzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMTIzMiAyMC42ODYzSDE2Ljk5NDlWMjcuNzk1M0gyNC4xMjMyVjIwLjY4NjNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik0xNDYgMTUuODMxM0MxNDYgMTYuODcxNyAxNDUuMTc0IDE3LjY5NTMgMTQ0LjEzMSAxNy42OTUzQzE0My4wODggMTcuNjk1MyAxNDIuMjYyIDE2Ljg3MTcgMTQyLjI2MiAxNS44MzEzQzE0Mi4yNjIgMTQuNzkxIDE0My4wODggMTQuMDEwNyAxNDQuMTMxIDE0LjAxMDdDMTQ1LjEzMSAxMy45Njc0IDE0NiAxNC43OTEgMTQ2IDE1LjgzMTNaTTE0Mi45NTcgMTQuNzkxQzE0Mi42OTcgMTUuMDUxMSAxNDIuNTY2IDE1LjQ0MTIgMTQyLjU2NiAxNS44MzEzQzE0Mi41NjYgMTYuNjk4MyAxNDMuMjYyIDE3LjM5MTggMTQ0LjEzMSAxNy4zOTE4QzE0NSAxNy4zOTE4IDE0NS42OTYgMTYuNjk4MyAxNDUuNjk2IDE1LjgzMTNDMTQ1LjY5NiAxNS4wMDc3IDE0NSAxNC4yNzA4IDE0NC4xNzQgMTQuMjcwOEMxNDMuNjUzIDE0LjI3MDggMTQzLjI2MiAxNC40NDQyIDE0Mi45NTcgMTQuNzkxWk0xNDQuODcgMTYuOTE1SDE0NC40NzlMMTQzLjkxNCAxNi4wOTE0VjE2LjkxNUgxNDMuNjA5VjE0Ljc0NzZIMTQzLjk1N0MxNDQuNDM1IDE0Ljc0NzYgMTQ0LjY1MyAxNC45NjQ0IDE0NC42NTMgMTUuMzU0NUMxNDQuNjUzIDE1LjY1NzkgMTQ0LjQ3OSAxNS44NzQ3IDE0NC4xNzQgMTUuOTYxNEwxNDQuODcgMTYuOTE1Wk0xNDQuMDQ0IDE1LjY1NzlDMTQ0LjI2MSAxNS42NTc5IDE0NC4zOTIgMTUuNTI3OSAxNDQuMzkyIDE1LjM1NDVDMTQ0LjM5MiAxNS4xMzc4IDE0NC4yNjEgMTUuMDUxMSAxNDQuMDAxIDE1LjA1MTFIMTQzLjkxNFYxNS42NTc5SDE0NC4wNDRaIiBmaWxsPSIjMzU0M0E4Ii8+Cjwvc3ZnPgo=" style="\n    text-align: left;\n    width: 146px;\n    position: absolute;\n    top: 14px;\n    left: 31px;\n">\n            </div>\n            <div style="\n    position: relative;\n    top: 80px;\n    left: 32px;\n    font-size: 20px;\n    text-align: left;\n    font-weight: 700;\n    letter-spacing: 0.02em;\n    font-style: normal;\n    line-height: 125%;\n    ">Claim your FREE account and get a key in less than a minute</div>\n            <ul style="\n        font-size: 15px;\n        font-weight: 400;\n        color: #333333;\n        letter-spacing: 0.01em;\n        position: relative;\n        left: 32px;\n        top: 88px;\n        line-height: 180%;\n        ">\n                <li><span>Access to a 30-day free trial of any of our products.</span></li>\n                <li><span>Access to 24x5 support by developers via the <a href="https://support.syncfusion.com/create" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">support tickets</a>, <a href="https://www.syncfusion.com/forums" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">forum</a>, <a href="https://www.syncfusion.com/feedback" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">feature &amp; feedback page</a> and chat.</span></li>\n                <li><span>200+ <a href="https://www.syncfusion.com/succinctly-free-ebooks" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">ebooks </a>on the latest technologies, industry trends, and research topics.</span>\n                </li>\n                <li><span>Largest collection of over 7,000 flat and wireframe icons for free with Syncfusion <a href="https://www.syncfusion.com/succinctly-free-ebooks" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">Metro Studio.</a></span></li>\n                <li><span>Free and unlimited access to Syncfusion technical <a href="https://www.syncfusion.com/blogs/" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">blogs</a> and <a href="https://www.syncfusion.com/resources/techportal/whitepapers" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">whitepapers.</a></span></li>\n            </ul>\n            <div style="\n            font-size: 18px;\n            font-weight: 700;\n            position: relative;\n            line-height: 125%;\n            letter-spacing: 0.02em;\n            top: 90px;\n            left: 32px;\n    ">Syncfusion is trusted by 29,000+ businesses worldwide</div>\n            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODIwIiBoZWlnaHQ9IjU2IiB2aWV3Qm94PSIwIDAgODIwIDU2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00MjcuNjE3IDIyLjU2NTlWMjQuNzIyNkM0MjYuNTU4IDI0LjM2MzggNDI1LjM5OCAyNC4xNTQ0IDQyNC40NzQgMjQuMTU0NEM0MjMuMzMzIDI0LjE1NDQgNDIyLjY5OCAyNC40OTEyIDQyMi42OTggMjUuMDk2M0M0MjIuNjk4IDI1LjQ4MjQgNDIyLjk3NiAyNS43MzgzIDQyMy43NzMgMjYuMDg1NEw0MjUuOTE3IDI3LjAxNzRDNDI3LjYzMyAyNy43NjM5IDQyOC40OTcgMjguODUzIDQyOC40OTcgMzAuMjY4MUM0MjguNDk3IDMyLjQ1MjIgNDI2LjU0NiAzMy44MyA0MjMuNDUyIDMzLjgzQzQyMi4zMjQgMzMuODMgNDIxLjAxOCAzMy42NzM2IDQxOS42MzYgMzMuMzcwOVYzMS4xNDE2QzQyMS4wMDYgMzEuNTAyOCA0MjIuMjYyIDMxLjY5NTcgNDIzLjIzOSAzMS42OTU3QzQyNC41MTggMzEuNjk1NyA0MjUuMjAzIDMxLjM1MDYgNDI1LjIwMyAzMC43MDc0QzQyNS4yMDMgMzAuMzIwOCA0MjQuOTM1IDMwLjAzNjcgNDI0LjMyMiAyOS43NzE3TDQyMS45NzUgMjguNzU5M0M0MjAuMjM2IDI4LjAwNzggNDE5LjQzMyAyNi45OTU0IDQxOS40MzMgMjUuNTUyMUM0MTkuNDMzIDIzLjQ4MzcgNDIxLjMxNCAyMi4xNjQ5IDQyNC4yNjUgMjIuMTY0OUM0MjUuMjk4IDIyLjE2NDkgNDI2LjU3IDIyLjMxNzEgNDI3LjYxNyAyMi41NjU5VjIyLjU2NTlaTTQzMC4xNjcgMjIuMzkwOUg0MzMuNjM1VjMzLjYwMzlINDMwLjE2N1YyMi4zOTA5Wk00NDQuOTExIDIyLjM5MDlWMjQuNDQ1MUg0MzkuNjc1VjI2Ljk3NDJINDQ0LjI0OVYyOC44MzIzSDQzOS42NzVWMzEuNDU0M0g0NDQuOTc4VjMzLjYwMzlINDM2LjMwNVYyMi4zOTA5SDQ0NC45MTFaTTQ2MS4yOTQgMjIuMzkwOVYzMy42MDM5SDQ1Ny45MzlWMjYuMjIzNkw0NTQuNjUyIDMzLjY5MTVINDUyLjUzMUw0NDkuMjY2IDI2LjIyMzZWMzMuNjAzOUg0NDYuOTQ5VjIyLjM5MDlINDUxLjE4NEw0NTQuMTc4IDI5LjIxMTRMNDU3LjE1NiAyMi4zOTA5SDQ2MS4yOTRWMjIuMzkwOVpNNDcyLjU3OSAyMi4zOTA5VjI0LjQ0NTFINDY3LjMzNVYyNi45NzQySDQ3MS45MDhWMjguODMyM0g0NjcuMzM1VjMxLjQ1NDNINDcyLjYzOFYzMy42MDM5SDQ2My45NTdWMjIuMzkwOUg0NzIuNTc5Wk00ODQuNzk0IDIyLjM5MDlWMzMuNjAzOUg0ODEuMDkzTDQ3Ni45MjYgMjYuNDEyM1YzMy42MDM5SDQ3NC42MDhWMjIuMzkwOUg0NzguNDA3TDQ4Mi40ODQgMjkuNDg3NlYyMi4zOTA5SDQ4NC43OTRaTTQ5NC44NTggMjIuNTY1OVYyNC43MjI2QzQ5My44MDcgMjQuMzY2MyA0OTIuNjQgMjQuMTU0NCA0OTEuNzMyIDI0LjE1NDRDNDkwLjU3MyAyNC4xNTQ0IDQ4OS45MzkgMjQuNDg1OCA0ODkuOTM5IDI1LjA5M0M0ODkuOTM5IDI1LjQ4ODYgNDkwLjE5OCAyNS43MjUgNDkxLjAyMyAyNi4wODU5TDQ5My4xNTcgMjcuMDE3OEM0OTQuODg1IDI3Ljc3MjIgNDk1LjczOSAyOC44NTE4IDQ5NS43MzkgMzAuMjgzNUM0OTUuNzM5IDMyLjQ1NTkgNDkzLjc4NiAzMy44MzA4IDQ5MC42OTkgMzMuODMwOEM0ODkuNTY5IDMzLjgzMDggNDg4LjI1OSAzMy42NzM2IDQ4Ni44NzggMzMuMzcxN1YzMS4xNDI0QzQ4OC4yNDcgMzEuNTAyOCA0ODkuNDk5IDMxLjY5NjUgNDkwLjQ3IDMxLjY5NjVDNDkxLjc0IDMxLjY5NjUgNDkyLjQ0NCAzMS4zNTE1IDQ5Mi40NDQgMzAuNzI4NUM0OTIuNDQ0IDMwLjMxNjMgNDkyLjE5NyAzMC4wNTA0IDQ5MS41NTUgMjkuNzcyNUw0ODkuMjE4IDI4Ljc2MDFDNDg3LjQ2NyAyOC4wMDI4IDQ4Ni42NzQgMjcuMDAyIDQ4Ni42NzQgMjUuNTUzM0M0ODYuNjc0IDIzLjQ4NjIgNDg4LjU1NiAyMi4xNjY1IDQ5MS41IDIyLjE2NjVDNDkyLjUzNiAyMi4xNjUzIDQ5My44MTMgMjIuMzE3MSA0OTQuODU4IDIyLjU2NTlWMjIuNTY1OVoiIGZpbGw9IiMwMEEwQjAiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMzUyLjQxMyAyNi44MTlDMzUwLjk5MiAyNS4yNzU5IDM0OS42MzggMjMuODMxNSAzNDguMzQ5IDIyLjE1NzRMMzQ3LjkyIDIxLjU5OTVDMzQ5LjQwNiAyMS4zNjkzIDM1MC42OTUgMjAuMzg0OCAzNTAuNjk1IDE4Ljc0MzNDMzUwLjY5NSAxNy4yMzMxIDM0OS41MzkgMTYuMjQ4MiAzNDcuODIxIDE2LjI0ODJDMzQ2LjU5OCAxNi4yNDgyIDM0NS43MDYgMTYuMzEzNyAzNDUuMjQzIDE2LjMxMzdDMzQ0LjcxNSAxNi4zMTM3IDM0NC4yODUgMTYuMzEzNyAzNDMuNzkgMTYuMjgwOEMzNDMuODU2IDE4LjE1MjEgMzQzLjg4OSAxOC4yODM0IDM0My44ODkgMTkuNDMyMlYyMy42MzQzQzM0My44ODkgMjQuNDU1MyAzNDMuODU2IDI1LjI3NTkgMzQzLjc5IDI2LjgxODZDMzQ0LjE1MyAyNi43MjAyIDM0NC41MTcgMjYuNzIwMiAzNDQuNzgxIDI2LjcyMDJDMzQ1LjA0NSAyNi43MjAyIDM0NS40MDkgMjYuNzUzMSAzNDUuNzA2IDI2LjgxODZDMzQ1LjY0IDI1Ljc2NzkgMzQ1LjYwNyAyNC4wMjgzIDM0NS42MDcgMjMuNjM0M1YyMS4yMDUxQzM0Ny4xNiAyMy4yMDc3IDM0OS4yMDkgMjUuNjY5NSAzNTAuMDAxIDI2LjgxODZDMzUwLjM5OCAyNi43MjAyIDM1MC43MjggMjYuNzIwMiAzNTEuMTI0IDI2LjcyMDJDMzUxLjQ1NSAyNi43MjA2IDM1MS45MTggMjYuNzIwNiAzNTIuNDEzIDI2LjgxOVYyNi44MTlaTTM0OC44NzggMTkuMDA2QzM0OC44NzggMjAuMDIzNCAzNDguMzE3IDIxLjIwNTQgMzQ2Ljc5NyAyMS4yMDU0QzM0Ni40IDIxLjIwNTQgMzQ2LjAwMyAyMS4yMDU0IDM0NS42MDcgMjEuMTcyNVYxNy4wNjg4QzM0Ni4wMDMgMTYuOTcwNCAzNDYuNDk5IDE2LjkwNDYgMzQ2Ljc2MyAxNi45MDQ2QzM0OC4wODUgMTYuOTA0OSAzNDguODc4IDE3LjY2IDM0OC44NzggMTkuMDA2VjE5LjAwNlpNMzgyLjM4IDI2Ljg4NDVDMzgxLjgxOSAyNi4yOTM2IDM4MC45NiAyNS4zNDE3IDM4MC4xMzQgMjQuNDIyM0MzODAuODI4IDIzLjY2NzIgMzgxLjU1NSAyMi41NTEgMzgxLjk4NCAyMS41OTkxQzM4MS43MTkgMjEuNDY3OCAzODEuMzU2IDIxLjIwNTEgMzgxLjA5MiAyMC45NzUzQzM4MC45OTMgMjEuNzk1OSAzODAuNDMyIDIyLjg3OTIgMzc5LjYzOSAyMy44MzE1QzM3OC41MTUgMjIuNTE4NSAzNzguMjE4IDIyLjE1NzQgMzc3LjE5MyAyMC43Nzg1QzM3OC41ODEgMTkuODkyMSAzNzkuMjQyIDE4Ljg3NDMgMzc5LjI0MiAxOC4wNTM3QzM3OS4yNDIgMTcuMTAxNyAzNzguNTgxIDE2LjExNjkgMzc2Ljk2MiAxNi4xMTY5QzM3NS4yMTEgMTYuMTE2OSAzNzQuMzUyIDE3LjIwMDIgMzc0LjM1MiAxOC40ODAzQzM3NC4zNTIgMTkuMjM1NCAzNzQuNTUgMTkuODkxNyAzNzUuMzc2IDIwLjk3NTNDMzc0LjA1NCAyMS42OTc1IDM3Mi43NjYgMjIuNzQ3OSAzNzIuNzY2IDI0LjQyMjNDMzcyLjc2NiAyNi4wNjM5IDM3NC4wODcgMjYuOTE3NCAzNzUuNzA3IDI2LjkxNzRDMzc3LjE5MyAyNi45MTc0IDM3OC4xNTEgMjYuMzI2NiAzNzguOTEyIDI1LjYzNjlMMzc5LjkwMiAyNi44MTlDMzgwLjIgMjYuNzg2MSAzODAuNTMxIDI2LjcyMDYgMzgwLjg2MSAyNi43MjA2QzM4MS4zMjQgMjYuNzIwNiAzODEuODUyIDI2Ljc4NjEgMzgyLjM4IDI2Ljg4NDVWMjYuODg0NVpNMzgzLjM3MiA0MC4wMTU4QzM4MS45MTggMzguNDczIDM4MC41OTcgMzcuMDYxMiAzNzkuMzA4IDM1LjM4NzFMMzc4Ljg3OCAzNC44Mjg4QzM4MC4zMzIgMzQuNTk5MSAzODEuNjU0IDMzLjYxNSAzODEuNjU0IDMxLjk0MDFDMzgxLjY1NCAzMC40NjMyIDM4MC40OTggMjkuNDQ1NCAzNzguNzc5IDI5LjQ0NTRDMzc3LjU1NyAyOS40NDU0IDM3Ni42MzIgMjkuNTQzNSAzNzYuMTY5IDI5LjU0MzVDMzc1LjY3MyAyOS41NDM1IDM3NS4yNDQgMjkuNTQzNSAzNzQuNzQ4IDI5LjQ3NzZDMzc0LjgxNCAzMS4zODIyIDM3NC44NDggMzEuNDgwMiAzNzQuODQ4IDMyLjYyOTRWMzYuODMxMUMzNzQuODQ4IDM3LjY1MjQgMzc0LjgxNCAzOC41MDUyIDM3NC43NDggNDAuMDE1NEMzNzUuMTEyIDM5Ljk0OTYgMzc1LjQ3NSAzOS45NDk2IDM3NS43MDcgMzkuOTQ5NkMzNzYuMDA0IDM5Ljk0OTYgMzc2LjM2OCAzOS45NDk2IDM3Ni42MzIgNDAuMDE1NEMzNzYuNTY1IDM4Ljk5OCAzNzYuNTMzIDM3LjI1ODEgMzc2LjUzMyAzNi44MzExVjM0LjQzNDhDMzc4LjExOSAzNi40MDQyIDM4MC4xNjcgMzguODk5NiAzODAuOTYgNDAuMDE1NEMzODEuMzU2IDM5Ljk0OTYgMzgxLjY4NyAzOS45NDk2IDM4Mi4wODMgMzkuOTQ5NkMzODIuMzggMzkuOTUgMzgyLjg3NiAzOS45NSAzODMuMzcyIDQwLjAxNThaTTM2Mi4xNiAyNi44MTlDMzYwLjk3MSAyNS41NzE1IDM1OC44ODkgMjIuOTc4IDM1OC4wNjMgMjEuOTkzNUwzNTcuMjM3IDIwLjk3NTdDMzU4LjA5NiAxOS45NTgzIDM1OC42OSAxOS4zMzQxIDM1OS4zMTkgMTguNTc5QzM2MC4wNDUgMTcuNzkxIDM2MC43MDYgMTYuOTcwNCAzNjEuNDk5IDE2LjI0ODJDMzYxLjEzNiAxNi4zMTM3IDM2MC45MzcgMTYuMzEzNyAzNjAuNzM5IDE2LjMxMzdDMzYwLjU0MSAxNi4zMTM3IDM2MC4zNDMgMTYuMzEzNyAzNjAuMTQ0IDE2LjI0ODJDMzU5LjkxMyAxNi42MDkzIDM1OS41NSAxNy4wNjg4IDM1OS4xNTMgMTcuNTI4N0MzNTguNzU2IDE3Ljk1NTYgMzU4LjM2IDE4LjM4MjIgMzU4LjA2MyAxOC43NDMzQzM1Ny4yMzYgMTkuNjk1MiAzNTYuNzc0IDIwLjE1NDcgMzU1LjU4NSAyMS4yNzA5VjE5LjQ2NTVDMzU1LjU4NSAxOC40MTUxIDM1NS41ODUgMTcuNzI1NSAzNTUuNjUxIDE2LjI0ODJDMzU1LjMyMSAxNi4zMTM3IDM1NC45NTcgMTYuMzEzNyAzNTQuNzI2IDE2LjMxMzdDMzU0LjQ2MSAxNi4zMTM3IDM1NC4wMzIgMTYuMzEzNyAzNTMuNzY4IDE2LjI0ODJDMzUzLjgzMyAxNy44MjM5IDM1My44NjcgMTguMjgzNCAzNTMuODY3IDE5LjQzMjVWMjMuNjM0N0MzNTMuODY3IDI0LjY4NSAzNTMuODMzIDI1LjMwODggMzUzLjc2OCAyNi44MTlDMzU0LjE2NCAyNi43MjA2IDM1NC40OTUgMjYuNzIwNiAzNTQuNzI2IDI2LjcyMDZDMzU0Ljk1NyAyNi43MjA2IDM1NS4zNTMgMjYuNzUzNSAzNTUuNjUxIDI2LjgxOUMzNTUuNTg1IDI1LjE0NDkgMzU1LjU4NSAyNC4xNTk3IDM1NS41ODUgMjMuNjM0N1YyMS40MzUyQzM1Ni44MDcgMjIuODc5NiAzNTguNjkgMjUuMjQzMyAzNTkuNzQ4IDI2LjgxOUMzNjAuMTMgMjYuNzU2MyAzNjAuNTE3IDI2LjcyMzQgMzYwLjkwNSAyNi43MjA2QzM2MS4yMDIgMjYuNzIwNiAzNjEuNjY1IDI2LjcyMDYgMzYyLjE2IDI2LjgxOVYyNi44MTlaTTM3Mi42MDEgNDAuMDE1OEMzNzIuNTY4IDM5Ljg1MTkgMzcyLjUzNSAzOS43MjA2IDM3Mi41MzUgMzkuNTIzNEMzNzIuNTM1IDM5LjM5MjggMzcyLjU2OCAzOS4yMjgxIDM3Mi42MDEgMzkuMDk2NEMzNzEuMjggMzkuMTI5NyAzNjguOTAxIDM5LjE5NTIgMzY4LjM3MiAzOS4xOTUyVjM0LjY2NDlDMzY5LjY5NCAzNC42NjQ5IDM3MC45ODIgMzQuNjY0OSAzNzIuMjcgMzQuNzk2M0MzNzIuMjM4IDM0LjYzMjQgMzcyLjIwNCAzNC40Njc3IDM3Mi4yMDQgMzQuMzM2NEMzNzIuMjA0IDM0LjIwNTggMzcyLjIwNCAzNC4wNDE5IDM3Mi4yNyAzMy44NDQ3QzM3MS4zNDYgMzMuOTQyOCAzNjkuMTk4IDMzLjk3NiAzNjguMzcyIDMzLjk3NlYzMC4yNjZDMzY5LjgyNiAzMC4yNjYgMzcwLjY4NSAzMC4yNjYgMzcxLjE4IDMwLjI5OTNMMzcyLjUwMiAzMC4zNjUxQzM3Mi40MzYgMzAuMTY3OSAzNzIuNDM2IDMwLjA2OTIgMzcyLjQzNiAyOS45MDUzQzM3Mi40MzYgMjkuNzQxNCAzNzIuNDM2IDI5LjcwODEgMzcyLjUwMiAyOS40NDU4QzM3MS40MTEgMjkuNDc4MyAzNjkuOTI1IDI5LjU0MzggMzY5LjI2NCAyOS41NDM4QzM2OC44MDIgMjkuNTQzOCAzNjcuMzQ4IDI5LjUxMTMgMzY2LjU4NyAyOS40NDU4QzM2Ni42NTQgMzAuMjY2NCAzNjYuNjg2IDMxLjYxMjMgMzY2LjY4NiAzMi41NjQyVjM2Ljg2NTFDMzY2LjY4NiAzNy40ODg1IDM2Ni42MiAzOC43MzU3IDM2Ni41ODcgNDAuMDE2MkMzNjcuNTEzIDM5Ljk1MDMgMzY4LjgwMiAzOS45NTAzIDM2OS4yNjQgMzkuOTUwM0MzNzAuMDI0IDM5Ljk1IDM3MS42NDMgMzkuOTUgMzcyLjYwMSA0MC4wMTU4Wk0zNjQuNjA1IDM5LjEyOTRDMzY0LjQ0IDM4LjgwMDggMzY0LjM0MSAzOC4zMDg4IDM2NC4yNzUgMzguMDQ2MUMzNjIuOTIgMzkuMTYxOSAzNjEuOTk1IDM5LjM5MjQgMzYwLjkzOCAzOS4zOTI0QzM1OC41OTIgMzkuMzkyNCAzNTcuMzM3IDM3LjI5MTMgMzU3LjMzNyAzNC42NjQ5QzM1Ny4zMzcgMzEuNzQzNiAzNTguNzU3IDMwLjAzNjIgMzYxLjE2OSAzMC4wMzYyQzM2Mi40MjUgMzAuMDM2MiAzNjMuNjE0IDMwLjU5NDUgMzY0LjE3NiAzMS4xNTI4QzM2NC4yMDggMzAuODg5OCAzNjQuMzA4IDMwLjM2NDggMzY0LjQ3MyAzMC4wNjg4QzM2My4zMTYgMjkuNTExMyAzNjIuMjU5IDI5LjM0NjYgMzYxLjEwMiAyOS4zNDY2QzM1Ny4yMzcgMjkuMzQ2NiAzNTUuNDUzIDMxLjc0MzYgMzU1LjQ1MyAzNC44Mjg4QzM1NS40NTMgMzguMzA5MSAzNTcuNzk4IDQwLjE0NzEgMzYwLjczOSA0MC4xNDcxQzM2Mi40MjUgNDAuMTQ3MSAzNjMuODEyIDM5LjYyMjIgMzY0LjYwNSAzOS4xMjk0VjM5LjEyOTRaTTM0Mi4zMDMgMjYuODE5QzM0MC41MTkgMjMuNDA0OSAzMzguOCAxOS4xMzczIDMzNy41NzggMTYuMTE2OUgzMzcuMzhDMzM2LjU4NyAxOC4wMjA3IDMzNS4xMzMgMjEuMjcwOSAzMzQuNzM3IDIyLjE4OTlDMzM0LjI3NCAyMy4zMDYxIDMzMy4yNSAyNS41MDU2IDMzMi41ODkgMjYuODE4NkMzMzIuODAzIDI2Ljc1MzggMzMzLjAyNiAyNi43MjA2IDMzMy4yNSAyNi43MjAyQzMzMy40NDggMjYuNzIwMiAzMzMuNjEzIDI2Ljc1MzEgMzMzLjg0NSAyNi44MTg2QzMzNC4xNzUgMjUuOTMyMiAzMzQuNjM4IDI0LjgxNiAzMzUuMTMzIDIzLjYzNDNDMzM1Ljc5NCAyMy42MDE0IDMzNi4zODkgMjMuNTY4OCAzMzYuOTg0IDIzLjU2ODhDMzM3LjYxMiAyMy41Njg4IDMzOC4yNzIgMjMuNjAxNCAzMzguOTMzIDIzLjYzNDNMMzM5LjU5NCAyNS4yMUwzNDAuMjU1IDI2LjgxODZDMzQwLjcxNyAyNi43MjAyIDM0MS4wOCAyNi43MjAyIDM0MS4zMTIgMjYuNzIwMkMzNDEuNjA5IDI2LjcyMDYgMzQxLjg3MyAyNi43MjA2IDM0Mi4zMDMgMjYuODE5VjI2LjgxOVpNMzUzLjYzNiAyOS40NDU0QzM1My40MzggMjkuNTExMyAzNTMuMjczIDI5LjU0MzUgMzUzLjEwNyAyOS41NDM1QzM1Mi45MDkgMjkuNTQzNSAzNTIuNzQ0IDI5LjUxMDkgMzUyLjU0NiAyOS40NDU0QzM1Mi42NDQgMzAuNzU4NCAzNTIuNjc4IDMyLjA3MTQgMzUyLjY3OCAzMy4zNTE5VjM2LjczMzRDMzUyLjE0OSAzNi4yNzM2IDM1MC44NiAzNS4wOTE5IDM0OS4zNzQgMzMuNzEzQzM0Ny44NiAzMi4zMDc0IDM0Ni4zOTQgMzAuODUxMSAzNDQuOTc5IDI5LjM0NjZIMzQ0Ljc0OEMzNDQuNzgxIDMwLjgyNDMgMzQ0LjgxNCAzMi40IDM0NC44MTQgMzMuODExNFYzNS44Nzk5QzM0NC44MTQgMzcuNjUyOCAzNDQuODE0IDM4LjYwNDcgMzQ0LjcxNSA0MC4wMTYyQzM0NC45OCAzOS45NTAzIDM0NS4xMTIgMzkuOTUwMyAzNDUuMzEgMzkuOTUwM0MzNDUuNDQyIDM5Ljk1MDMgMzQ1LjU3NSAzOS45NTAzIDM0NS44MDYgNDAuMDE2MkMzNDUuNzQgMzguNjcwNiAzNDUuNzA3IDM2LjQ3MDggMzQ1LjcwNyAzNS44Nzk5VjMyLjU5NjhDMzQ4LjE4NSAzNC44NjI1IDM1MS4yMjQgMzcuODgyNiAzNTMuNDcxIDQwLjE0NzVIMzUzLjYwM0MzNTMuNjAzIDM4LjkzMjkgMzUzLjUzNyAzNy43MTc5IDM1My41MzcgMzYuNTA0VjM0LjYzMjdDMzUzLjUzNiAzMi40MzI1IDM1My41MzYgMzEuMzQ5MyAzNTMuNjM2IDI5LjQ0NTRaTTM0Mi41NjcgNDAuMDE1OEMzNDIuNTM0IDM5Ljg1MTkgMzQyLjUwMSAzOS43MjA2IDM0Mi41MDEgMzkuNTIzNEMzNDIuNTAxIDM5LjM5MjggMzQyLjUzNCAzOS4yMjgxIDM0Mi41NjcgMzkuMDk2NEMzNDEuMjQ2IDM5LjEyOTcgMzM4Ljg2NyAzOS4xOTUyIDMzOC4zNzEgMzkuMTk1MlYzNC42NjQ5QzMzOS42NiAzNC42NjQ5IDM0MC45NDggMzQuNjY0OSAzNDIuMjM3IDM0Ljc5NjNDMzQyLjIwNCAzNC42MzI0IDM0Mi4xNzEgMzQuNDY3NyAzNDIuMTcxIDM0LjMzNjRDMzQyLjE3MSAzNC4yMDU4IDM0Mi4xNzEgMzQuMDQxOSAzNDIuMjM3IDMzLjg0NDdDMzQxLjMxMiAzMy45NDI4IDMzOS4xOTcgMzMuOTc2IDMzOC4zNzEgMzMuOTc2VjMwLjI2NkMzMzkuNzkyIDMwLjI2NiAzNDAuNjUxIDMwLjI2NiAzNDEuMTc5IDMwLjI5OTNMMzQyLjQ2OCAzMC4zNjUxQzM0Mi40MzUgMzAuMTY3OSAzNDIuNDM1IDMwLjA2OTIgMzQyLjQzNSAyOS45MDUzQzM0Mi40MzUgMjkuNzQxNCAzNDIuNDM1IDI5LjY3NTUgMzQyLjQ2OCAyOS40NDU4QzM0MS4zNzggMjkuNDc4MyAzMzkuODkxIDI5LjU0MzggMzM5LjIzIDI5LjU0MzhDMzM4Ljc2NyAyOS41NDM4IDMzNy4zMTQgMjkuNTExMyAzMzYuNTU0IDI5LjQ0NThDMzM2LjYyIDMwLjI2NjQgMzM2LjY1MyAzMS42MTIzIDMzNi42NTMgMzIuNTY0MlYzNi44NjUxQzMzNi42NTMgMzcuNDg4NSAzMzYuNTg3IDM4LjczNTcgMzM2LjU1NCA0MC4wMTYyQzMzNy41MTIgMzkuOTUwMyAzMzguNzY3IDM5Ljk1MDMgMzM5LjIzIDM5Ljk1MDNDMzM5Ljk5IDM5Ljk1IDM0MS42NDIgMzkuOTUgMzQyLjU2NyA0MC4wMTU4VjQwLjAxNThaTTMzMS4yMDEgMjYuODE5QzMzMC42NzMgMjMuMjQwNiAzMzAuMjEgMTkuNDk4NCAzMjkuODQ3IDE2LjExNjlDMzI5Ljc0OCAxNi4xNDk4IDMyOS43MTQgMTYuMTQ5OCAzMjkuNjQ5IDE2LjExNjlDMzI4Ljk1NSAxNy4zMzE1IDMyOC4xNjIgMTguNjQ0NSAzMjcuNTY3IDE5LjU2MzlDMzI3LjAwNiAyMC40NTAzIDMyNi4zNDUgMjEuNTAwNyAzMjUuNTg1IDIyLjYxNjlDMzIzLjk5OSAyMC41ODE3IDMyMi4zNDcgMTguMDIxMSAzMjEuMjU2IDE2LjExNjlDMzIxLjE5IDE2LjE0OTggMzIxLjE1NyAxNi4xMTY5IDMyMS4wOTEgMTYuMTE2OUMzMjAuNzI4IDE5LjQ5OCAzMjAuMjMyIDIzLjI3MzIgMzE5LjczNiAyNi44MTlDMzIwLjAwMSAyNi43MjA2IDMyMC4xNjYgMjYuNzIwNiAzMjAuMjk4IDI2LjcyMDZDMzIwLjQ5NiAyNi43MjA2IDMyMC42MjggMjYuNzUzNSAzMjAuODU5IDI2LjgxOUMzMjAuOTkyIDI0LjQ1NTMgMzIxLjI1NiAyMi4xMjQ0IDMyMS41NTMgMTkuNjYyM0MzMjIuODQyIDIxLjUzMzYgMzIzLjk2NSAyMy4xNDIyIDMyNS4yMjEgMjQuODQ5M0MzMjYuMjc4IDIzLjIwNzcgMzI3LjM2OCAyMS40MzQ4IDMyOC41NTggMTkuNjI5NEMzMjguODg4IDIyLjE1NyAzMjkuMTg2IDI0LjQ1NTMgMzI5LjM1MSAyNi44MTlDMzI5Ljc4IDI2LjcyMDYgMzMwLjA3OCAyNi43MjA2IDMzMC4yNzYgMjYuNzIwNkMzMzAuNTQgMjYuNzIwNiAzMzAuODA1IDI2LjcyMDYgMzMxLjIwMSAyNi44MTlWMjYuODE5Wk0zMzQuOTY4IDMyLjIwMjhDMzM0Ljk2OCAzMC4yOTg5IDMzMy40NDggMjkuNDQ1NCAzMzEuNTk4IDI5LjQ0NTRDMzMwLjc3MiAyOS40NDU0IDMyOS44OCAyOS41NDM1IDMyOS4yNTIgMjkuNTQzNUMzMjkuMDIxIDI5LjU0MzUgMzI4LjUyNSAyOS41NDM1IDMyNy45OTcgMjkuNDc3NkMzMjguMDMgMzAuNTI4MyAzMjguMDk2IDMxLjQxNDggMzI4LjA5NiAzMi40MzIyVjM2LjkyOTVDMzI4LjA5NiAzNy45MTQ4IDMyOC4wMyAzOC45OTggMzI3Ljk5NyA0MC4wMTU0QzMyOC40MjYgMzkuOTQ5NiAzMjguNzI0IDM5Ljk0OTYgMzI4LjkyMiAzOS45NDk2QzMyOS4xNTMgMzkuOTQ5NiAzMjkuNDg0IDM5Ljk0OTYgMzI5Ljg4IDQwLjAxNTRDMzI5LjgxNSAzOS4wMzE5IDMyOS43ODIgMzguMDQ2NSAzMjkuNzgxIDM3LjA2MDlWMzUuNDJDMzMwLjE0NSAzNS40NTI2IDMzMC41MDggMzUuNDUyNiAzMzAuOTA1IDM1LjQ1MjZDMzMyLjgyIDM1LjQ1MjYgMzM0Ljk2OCAzNC43MzA0IDMzNC45NjggMzIuMjAyOFYzMi4yMDI4Wk0zMjYuMDE0IDM2Ljg5NzNDMzI2LjAxNCAzNS4yNTU4IDMyNC45MjQgMzQuNTMzNiAzMjMuMDQgMzMuNzQ1NkMzMjEuNjg2IDMzLjE4OCAzMjAuOTkyIDMyLjY5NTYgMzIwLjk5MiAzMS42NDQ1QzMyMC45OTIgMzAuNjYgMzIxLjc1MiAzMC4wMzYyIDMyMy4wMDggMzAuMDM2MkMzMjMuODM0IDMwLjAzNjIgMzI0LjU2MSAzMC4zMzE1IDMyNS4yMjIgMzAuODU2OEMzMjUuMjg3IDMwLjQ5NTcgMzI1LjQ1MyAzMC4xMzQ3IDMyNS42NTEgMjkuODM5NEMzMjQuODU4IDI5LjQ3ODMgMzIzLjk5OSAyOS4zNDcgMzIzLjA3NCAyOS4zNDdDMzIwLjM2NSAyOS4zNDcgMzE5LjUwNSAzMC44OTA1IDMxOS41MDUgMzIuMjAzNUMzMTkuNTA1IDMzLjgxMTggMzIwLjI5OSAzNC41NjcyIDMyMi4zNDcgMzUuMzU1M0MzMjMuNjM2IDM1Ljg0NyAzMjQuMjk2IDM2LjQ3MTEgMzI0LjI5NiAzNy41NTQ0QzMyNC4yOTYgMzguNzAzNSAzMjMuNDM3IDM5LjQyNTcgMzIyLjI0OCAzOS40MjU3QzMyMS41NTQgMzkuNDI1NyAzMjAuMzY1IDM5LjA2NDYgMzE5LjUzOSAzOC4zMDk5QzMxOS41MDUgMzguNzM2MSAzMTkuNTA1IDM5LjEzMDQgMzE5LjM3MyAzOS40OTE1QzMxOS45MDIgMzkuNzU0NiAzMjEuMTI1IDQwLjE0NzkgMzIyLjIxNSA0MC4xNDc5QzMyNC45OSA0MC4xNDcxIDMyNi4wMTQgMzguNDM5NyAzMjYuMDE0IDM2Ljg5NzNWMzYuODk3M1pNMzc4LjE1MiAxNy45ODgyQzM3OC4xNTIgMTguOTczIDM3Ny40NTggMTkuNjYyMyAzNzYuNzY0IDIwLjIyMDJDMzc2LjMwMSAxOS41NjM5IDM3NS43NCAxOC42NzcxIDM3NS43NCAxNy45ODgyQzM3NS43NCAxNy4yMzMxIDM3Ni4yNjggMTYuODA2MSAzNzYuOTk1IDE2LjgwNjFDMzc3Ljk4NyAxNi44MDY1IDM3OC4xNTIgMTcuNjkyNiAzNzguMTUyIDE3Ljk4ODJWMTcuOTg4MlpNMzc4LjQ4MiAyNS4wMTMyQzM3OC4xMTkgMjUuMzQxNyAzNzcuMjYgMjUuOTY1NSAzNzYuNTMzIDI1Ljk2NTVDMzc1LjU3NCAyNS45NjU1IDM3NC40MTggMjUuMjc1OSAzNzQuNDE4IDIzLjc5ODZDMzc0LjQxOCAyMi40ODU1IDM3NS4yNzcgMjEuODk0NyAzNzUuODA2IDIxLjU2NjVDMzc3LjAyOCAyMy4yNDA2IDM3Ny4wOTUgMjMuMzM5MSAzNzguNDgyIDI1LjAxMzJaTTM3OS44MDQgMzIuMjAyOEMzNzkuODA0IDMzLjI1MzUgMzc5LjI3NSAzNC40MDI2IDM3Ny43NTUgMzQuNDAyNkMzNzcuMzI2IDM0LjQwMjYgMzc2LjkyOSAzNC40MDI2IDM3Ni41MzMgMzQuMzY5M1YzMC4yNjU2QzM3Ni45MjkgMzAuMTY3NiAzNzcuNDI1IDMwLjEzNDMgMzc3LjcyMiAzMC4xMzQzQzM3OS4wMTEgMzAuMTM0MyAzNzkuODA0IDMwLjg4OTggMzc5LjgwNCAzMi4yMDI4Wk0zMzguNjAyIDIyLjgxNDFDMzM3LjkwOSAyMi44NDY2IDMzNy41NDUgMjIuODQ2NiAzMzcuMDgyIDIyLjg0NjZDMzM2LjUyMSAyMi44NDY2IDMzNi4xOSAyMi44NDY2IDMzNS40NjMgMjIuODE0MUwzMzcuMDgyIDE5LjAwNkwzMzguNjAyIDIyLjgxNDFaTTMzMy4xNTEgMzIuMzAwOEMzMzMuMTUxIDMzLjgxMTEgMzMyLjI1OCAzNC43OTU5IDMzMC44MDUgMzQuNzk1OUMzMzAuNTA3IDM0Ljc5NTkgMzMwLjE3NyAzNC43OTU5IDMyOS43OCAzNC43MzAxVjMwLjIzMjdDMzMwLjI0MyAzMC4xNjY5IDMzMC42MzkgMzAuMTMzOSAzMzEuMDM2IDMwLjEzMzlDMzMyLjQyNCAzMC4xMzQzIDMzMy4xNTEgMzEuMDIxMSAzMzMuMTUxIDMyLjMwMDhaTTM2OS41MjggMjMuNjY3NkMzNjkuNTI4IDIyLjAyNiAzNjguNDM4IDIxLjMwMzkgMzY2LjU1NSAyMC41MTYyQzM2NS4yIDE5Ljk1ODMgMzY0LjUwNiAxOS40OTg4IDM2NC41MDYgMTguNDE1MUMzNjQuNTA2IDE3LjQ2MzIgMzY1LjI2NiAxNi44MDY1IDM2Ni41MjEgMTYuODA2NUMzNjcuMzQ4IDE2LjgwNjUgMzY4LjA3NSAxNy4xMDE3IDM2OC43MzUgMTcuNjI3NUMzNjguODAyIDE3LjI2NjQgMzY4Ljk2NyAxNi45MDQ5IDM2OS4xMzEgMTYuNjQyMkMzNjguMzcyIDE2LjI4MTEgMzY3LjQ3OSAxNi4xMTcyIDM2Ni41ODcgMTYuMTE3MkMzNjMuOTQ0IDE2LjExNzIgMzYyLjk4NiAxNy42NiAzNjIuOTg2IDE5LjAwNkMzNjIuOTg2IDIwLjU4MTcgMzYzLjgxMiAyMS4zMzY4IDM2NS44NjEgMjIuMTI0NEMzNjcuMTQ5IDIyLjYxNjkgMzY3LjgxIDIzLjI0MDYgMzY3LjgxIDI0LjM1NjhDMzY3LjgxIDI1LjQ3MyAzNjYuOTUxIDI2LjE5NTIgMzY1Ljc2MiAyNi4xOTUyQzM2NS4wMzUgMjYuMTk1MiAzNjMuODc5IDI1LjgzNDEgMzYzLjA1MiAyNS4xMTE5QzM2My4wMiAyNS41Mzg5IDM2Mi45ODYgMjUuOSAzNjIuODg3IDI2LjI2MTFDMzYzLjM4MyAyNi41MjM4IDM2NC42MDYgMjYuOTE3NCAzNjUuNzI5IDI2LjkxNzRDMzY4LjUwNCAyNi45MTc0IDM2OS41MjggMjUuMjQzMyAzNjkuNTI4IDIzLjY2NzZWMjMuNjY3NloiIGZpbGw9IiMwMzY1NTUiLz4NCjxwYXRoIGQ9Ik02NDAuNDE2IDIwLjU1NzNDNjM4LjY3MSAxOS44MzU0IDYzNy42MzEgMTkuNTU1MSA2MzYuNTk4IDE5LjU1NTFDNjM1LjUxNCAxOS41NTUxIDYzNC44MTkgMTkuOTE3IDYzNC44MTkgMjAuNDc2NUM2MzQuODE5IDIyLjE2NDUgNjQwLjk2MiAyMS42ODkzIDY0MC45NjIgMjUuNTkzNkM2NDAuOTYyIDI3Ljc0NjQgNjM5LjAyNCAyOC45OTc0IDYzNi4zMzIgMjguOTk3NEM2MzQuMjIgMjguOTk3NCA2MzMuMTggMjguNDg4IDYzMS45ODMgMjcuOTExNlYyNS40OTYyQzYzMy43MSAyNi41NjM1IDYzNC43NjggMjYuOTQwMSA2MzYuMTAxIDI2Ljk0MDFDNjM3LjI1NiAyNi45NDAxIDYzNy44NzkgMjYuNTYzNSA2MzcuODc5IDI1LjkwNjNDNjM3Ljg3OSAyNC4wNjg1IDYzMS43MzcgMjQuNzQxNSA2MzEuNzM3IDIwLjcyMTNDNjMxLjczNyAxOC43ODI3IDYzMy41MzQgMTcuNDk5IDYzNi4zMzIgMTcuNDk5QzYzNy42ODIgMTcuNDk5IDYzOC45MDEgMTcuNzYzNSA2NDAuNDE2IDE4LjM3MDdWMjAuNTU3M1pNNjQ5LjAxNiAyOC40ODQxQzY0Ny45OTIgMjguODMwNiA2NDcuMTI2IDI4Ljk5NTQgNjQ2LjI2MiAyOC45OTU0QzY0My40MDIgMjguOTk1NCA2NDEuNTUyIDI3LjQ0MjIgNjQxLjU1MiAyNS4wNzkyQzY0MS41NTIgMjIuNzU5NCA2NDMuNDczIDIxLjEyMDIgNjQ2LjE1NiAyMS4xMjAyQzY0Ni45ODUgMjEuMTIwMiA2NDguMDQ0IDIxLjMxODIgNjQ4Ljg5MSAyMS42MTIzVjIzLjM4ODFDNjQ4LjIyMSAyMy4wNTYyIDY0Ny40NDQgMjIuODc0MSA2NDYuODA5IDIyLjg3NDFDNjQ1LjI3MyAyMi44NzQxIDY0NC4yODYgMjMuNzM0MyA2NDQuMjg2IDI1LjA2MTlDNjQ0LjI4NiAyNi40MDggNjQ1LjI1NiAyNy4yOTQgNjQ2LjcyIDI3LjI5NEM2NDcuMzM3IDI3LjI5NCA2NDcuODg2IDI3LjE2MjMgNjQ5LjAxNiAyNi43NjhMNjQ5LjAxNiAyOC40ODQxWk02NzEuMzIgMjQuMjA5QzY3MS40MjUgMjMuMTU0OCA2NzIuMDgxIDIyLjU0NTcgNjczLjA4NyAyMi41NDU3QzY3NC4wNzYgMjIuNTQ1NyA2NzQuNzQ2IDIzLjE3MjEgNjc0Ljg1MiAyNC4yMDlINjcxLjMyWk02NzIuOTEgMjEuMTIyOUM2NzAuNCAyMS4xMjI5IDY2OC42MTQgMjIuNzc1NSA2NjguNjE0IDI1LjEwMTJDNjY4LjYxNCAyNy40NDQxIDY3MC40NzEgMjguOTk1NCA2NzMuMzM1IDI4Ljk5NTRDNjczLjk3IDI4Ljk5NTQgNjc1LjUwNCAyOC45OTU0IDY3Ni45NjYgMjcuOTg3VjI2LjUwNDJDNjc1Ljc2OSAyNy4yOTkzIDY3NC45NzcgMjcuNTczMSA2NzMuOTU1IDI3LjU3MzFDNjcyLjM0MSAyNy41NzMxIDY3MS4zNTQgMjYuNzk0OSA2NzEuMjY1IDI1LjQ2NjZINjc3LjExQzY3Ny4yMzIgMjIuNjkzOSA2NzUuMjc5IDIxLjEyMjkgNjcyLjkxIDIxLjEyMjlWMjEuMTIyOVpNNjc4LjA5OSAyOC44NTcySDY4MC42NTRWMjEuMjYyN0g2NzguMDk5VjI4Ljg1NzJaTTY4Ny43NjcgMjYuNzgxNUM2ODcuMjM0IDI3LjIyODEgNjg2Ljc5MiAyNy40MDcyIDY4Ni4yNDYgMjcuNDA3MkM2ODUuMDQzIDI3LjQwNzIgNjg0LjI4MSAyNi40ODM4IDY4NC4yODEgMjUuMTAwNEM2ODQuMjgxIDIzLjU4NDEgNjg1LjA0MyAyMi43MTAxIDY4Ni4zMzEgMjIuNzEwMUM2ODYuNzkyIDIyLjcxMDEgNjg3LjM5NCAyMi45MDggNjg3Ljc2NyAyMy4xNTU5VjI2Ljc4MTVaTTY4Ny43NjcgMTcuNjM5MVYyMS41OTU4QzY4Ny4wNzYgMjEuMjg0NyA2ODYuMzg4IDIxLjEyMDIgNjg1LjY0NCAyMS4xMjAyQzY4My4zMTMgMjEuMTIwMiA2ODEuNyAyMi43MjY2IDY4MS43IDI1LjA1MDdDNjgxLjcgMjcuMzI0OCA2ODMuMzEzIDI4Ljk5NzQgNjg1LjUgMjguOTk3NEM2ODYuMzY3IDI4Ljk5NzQgNjg3LjAzNyAyOC43ODU2IDY4Ny43NjcgMjguMjQzNVYyOC44NTQ5SDY5MC4zMjJWMTcuNjM5MUg2ODcuNzY3Wk02OTQuMTA1IDI0LjIwOUM2OTQuMjExIDIzLjE1NDggNjk0Ljg2NCAyMi41NDU3IDY5NS44NjggMjIuNTQ1N0M2OTYuODU4IDIyLjU0NTcgNjk3LjUzNSAyMy4xNzIxIDY5Ny42NDEgMjQuMjA5SDY5NC4xMDVaTTY5NS42OTQgMjEuMTIyOUM2OTMuMTg0IDIxLjEyMjkgNjkxLjQgMjIuNzc1NSA2OTEuNCAyNS4xMDEyQzY5MS40IDI3LjQ0NDEgNjkzLjI1OSAyOC45OTU0IDY5Ni4xMTkgMjguOTk1NEM2OTYuNzUzIDI4Ljk5NTQgNjk4LjI5IDI4Ljk5NTQgNjk5Ljc1NSAyNy45ODdWMjYuNTA0MkM2OTguNTU3IDI3LjI5OTMgNjk3Ljc2MyAyNy41NzMxIDY5Ni43MzYgMjcuNTczMUM2OTUuMTMxIDI3LjU3MzEgNjk0LjE0IDI2Ljc5NDkgNjk0LjA1MSAyNS40NjY2SDY5OS44OTRDNzAwLjAxNSAyMi42OTM5IDY5OC4wNjEgMjEuMTIyOSA2OTUuNjk0IDIxLjEyMjkiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik03MDMuNzIxIDIzLjQzNjhINzAzLjc1OEM3MDQuNTE3IDIxLjg1NjIgNzA1LjM2NiAyMS4xMTUgNzA2LjM1MiAyMS4xMTVDNzA2Ljg2MiAyMS4xMTUgNzA3LjMwMyAyMS4yOTY0IDcwOC4wNDQgMjEuODA3Nkw3MDcuMzQxIDIzLjkxMzNDNzA2LjY3IDIzLjUxODYgNzA2LjIyOSAyMy4zNTM1IDcwNS44MjMgMjMuMzUzNUM3MDQuODg2IDIzLjM1MzUgNzA0LjI4NiAyNC4xNzc1IDcwMy43MjEgMjUuNTcwNFYyOC44NDY2SDcwMS4xNjJWMjEuMjU0MUg3MDMuNzIxVjIzLjQzNjhaTTY4MC43NzUgMTguMDY3NEM2ODEuMDE1IDE4LjY1NzUgNjgwLjU4MyAxOS40ODA1IDY3OS44MTQgMTkuOTA0QzY3OS4wNDEgMjAuMzI3MSA2NzguMjI0IDIwLjE5MjggNjc3Ljk4NiAxOS42MDI3QzY3Ny43NDMgMTkuMDExNyA2NzguMTczIDE4LjE4NzcgNjc4Ljk0NSAxNy43NjY2QzY3OS43MTYgMTcuMzQxMSA2ODAuNTMzIDE3LjQ3NTkgNjgwLjc3NSAxOC4wNjc0WiIgZmlsbD0iIzAwOUU0RCIvPg0KPHBhdGggZD0iTTY1OC4yMiAyNC4wMjMxQzY1OC4yMiAyMS45NjUxIDY1Ni43MTkgMjEuMTIyNiA2NTUuMjM5IDIxLjEyMjZDNjU0LjIzMiAyMS4xMjI2IDY1My40MDQgMjEuNTE4NCA2NTIuNjY0IDIyLjM5MjFINjUyLjYyOVYxNy42MzkySDY1MC4wNzFWMjguODM1M0g2NTIuNjI5VjI0LjAyMzFDNjUzLjIyOCAyMy4yMTYxIDY1My43MzggMjIuODcxMSA2NTQuMzM4IDIyLjg3MTFDNjU1LjEzNCAyMi44NzExIDY1NS42NjIgMjMuMzk4NiA2NTUuNjYyIDI0LjUzMjlWMjcuMjAwOEM2NTYuNTIgMjYuNzg5NiA2NTcuMzkzIDI2LjUzNzQgNjU4LjIyIDI2LjQ0MzhWMjQuMDIzMVpNNjY0LjYzNiAyMS4xMTk5QzY2My41OTQgMjEuMTE5OSA2NjIuNzk5IDIxLjQ4MTEgNjYxLjk4NCAyMi4zNDkzVjIxLjI2MjRINjU5LjQyOFYyNi40MjM0QzY2MC4zMTMgMjYuNTA1OCA2NjEuNDQzIDI2Ljg4NDcgNjYxLjk4NCAyNy41MTA0VjIzLjk2MzRDNjYyLjY1NyAyMy4wMjMyIDY2My4xMzQgMjIuNzA5NyA2NjMuNzcgMjIuNzA5N0M2NjQuNDk0IDIyLjcwOTcgNjY1LjA0NSAyMy4xNTU2IDY2NS4wNDUgMjQuMjI2NFYyOC44MzcySDY2Ny42MDJWMjQuMDI4OUM2NjcuNjAyIDIxLjc5MjYgNjY1LjkwOCAyMS4xMTk5IDY2NC42MzYgMjEuMTE5OVYyMS4xMTk5Wk02NjkuMDE1IDMxLjAxODFINjY2LjA0M1YzMi45ODY0SDY2OC45MDlWMzMuODMxMkg2NjYuMDQzVjM1Ljg2MTlINjY5LjEwM1YzNi43MDU1SDY2NS4wNDZWMzAuMTc1Mkg2NjkuMDE1TDY2OS4wMTUgMzEuMDE4MVpNNjcxLjQ0MiAzNi43MDkzSDY3Mi4zNTJWMzAuMTczM0g2NzEuNDQyVjM2LjcwOTNaTTY3Ni44NTkgMzMuMDQ4NEM2NzcuNTA0IDMzLjA0ODQgNjc3LjkwNCAzMy40NjMxIDY3Ny45MzUgMzQuMTE0Mkg2NzUuNjE2QzY3NS43NDIgMzMuNDM0MiA2NzYuMTYxIDMzLjA0ODQgNjc2Ljg1OSAzMy4wNDg0Wk02NzUuNiAzNC42ODFINjc4Ljg0MkM2NzguODQyIDMzLjA4NjkgNjc4LjA2MiAzMi4zMTggNjc2LjgzOCAzMi4zMThDNjc1LjU2OSAzMi4zMTggNjc0LjY4OCAzMy4xOTI0IDY3NC42ODggMzQuNDk2OUM2NzQuNjg4IDM1LjY4OSA2NzUuNDg0IDM2Ljc4OTggNjc2LjkxNyAzNi43ODk4QzY3Ny42OTggMzYuNzg5OCA2NzguMjAzIDM2LjYyODEgNjc4Ljc2MyAzNi4yODJWMzUuNDU2QzY3OC4yMjIgMzUuNzg1NiA2NzcuNjk4IDM1Ljk3NTggNjc3LjE0NyAzNS45NzU4QzY3Ni4yNjUgMzUuOTc1OCA2NzUuNzQyIDM1LjUzNSA2NzUuNiAzNC42ODA2VjM0LjY4MVpNNjg0Ljc4NiAzMy41MzA5QzY4NC4yNjMgMzMuMTk2NiA2ODMuOTE0IDMzLjA5ODUgNjgzLjUxNSAzMy4wOTg1QzY4Mi42ODIgMzMuMDk4NSA2ODIuMTA1IDMzLjY5NDUgNjgyLjEwNSAzNC41NjdDNjgyLjEwNSAzNS40NTYgNjgyLjcxOSAzNS45OTE2IDY4My42NjggMzUuOTkxNkM2ODQuMDU4IDM1Ljk5MTYgNjg0LjQzIDM1Ljg5NzMgNjg0Ljg4OCAzNS43MDU5VjM2LjU0MjZDNjg0LjU4MiAzNi42Nzc0IDY4My45OTcgMzYuNzg5OCA2ODMuNTE1IDM2Ljc4OThDNjgyLjEzNiAzNi43ODk4IDY4MS4xOCAzNS45MDYyIDY4MS4xOCAzNC42NDMyQzY4MS4xOCAzMy4yMTc4IDY4Mi4wNTQgMzIuMzE4IDY4My40NTMgMzIuMzE4QzY4My45ODcgMzIuMzE4IDY4NC4zNDYgMzIuNDMzOSA2ODQuNzg3IDMyLjYxNDVMNjg0Ljc4NiAzMy41MzA5Wk02ODguOTM0IDMyLjQwMDRINjkwLjM5NVYzMy4xNjUxSDY4OC45MzRWMzUuMzc1MkM2ODguOTM0IDM1Ljg4MTEgNjg5LjMyNyAzNi4wMjc0IDY4OS41OTMgMzYuMDI3NEM2ODkuOTIyIDM2LjAyNzQgNjkwLjI2MiAzNS45MiA2OTAuNjMgMzUuNzA3OVYzNi41MDM3QzY5MC4zMSAzNi42Njc4IDY4OS44MiAzNi43ODk4IDY4OS41MTkgMzYuNzg5OEM2ODguNTI4IDM2Ljc4OTggNjg4LjAyNyAzNi4yMTYxIDY4OC4wMjcgMzUuNDM5MVYzMy4xNjUxSDY4Ny4yMjRWMzMuMDcwM0w2ODguOTM0IDMxLjUxMDJWMzIuNDAwNFpNNjkzLjg3NiAzMi40MDA0VjMzLjM5NjlINjkzLjg5NUM2OTQuMzU5IDMyLjYzNDUgNjk0LjggMzIuMzE4IDY5NS4yMyAzMi4zMThDNjk1LjYwMSAzMi4zMTggNjk1Ljk0NyAzMi40ODAxIDY5Ni4zMjkgMzIuODE2Nkw2OTUuODQ3IDMzLjU2NDRDNjk1LjU3IDMzLjMwOTEgNjk1LjIxMSAzMy4xMzMxIDY5NC45OTUgMzMuMTMzMUM2OTQuMzY4IDMzLjEzMzEgNjkzLjg3NiAzMy43MjY4IDY5My44NzYgMzQuNDYyNlYzNi43MDkzSDY5Mi45NjdWMzIuNDAwNEg2OTMuODc2Wk03MDUuNjU3IDMzLjUzMDlDNzA1LjEzMSAzMy4xOTY2IDcwNC43ODIgMzMuMDk4NSA3MDQuMzgxIDMzLjA5ODVDNzAzLjU0OSAzMy4wOTg1IDcwMi45NzcgMzMuNjk0NSA3MDIuOTc3IDM0LjU2N0M3MDIuOTc3IDM1LjQ1NiA3MDMuNTkyIDM1Ljk5MTYgNzA0LjUzNSAzNS45OTE2QzcwNC45MjUgMzUuOTkxNiA3MDUuMjk1IDM1Ljg5NzMgNzA1Ljc2IDM1LjcwNTlWMzYuNTQyNkM3MDUuNDQ3IDM2LjY3NzQgNzA0Ljg2MiAzNi43ODk4IDcwNC4zOCAzNi43ODk4QzcwMy4wMDQgMzYuNzg5OCA3MDIuMDQ0IDM1LjkwNjIgNzAyLjA0NCAzNC42NDMyQzcwMi4wNDQgMzMuMjE3OCA3MDIuOTIyIDMyLjMxOCA3MDQuMzIgMzIuMzE4QzcwNC44NTUgMzIuMzE4IDcwNS4yMTIgMzIuNDMzOSA3MDUuNjU3IDMyLjYxNDVMNzA1LjY1NyAzMy41MzA5Wk02OTguNzQyIDM2LjcwOTNINjk5LjY1MlYzMi40MDA4SDY5OC43NDJWMzYuNzA5M1oiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik02OTkuNjg0IDMwLjg1MjVDNjk5Ljc3MyAzMS4wNjA0IDY5OS42MTggMzEuMzU0NCA2OTkuMzQ0IDMxLjUwNDFDNjk5LjA2OCAzMS42NTQzIDY5OC43NzYgMzEuNjA2MiA2OTguNjkzIDMxLjM5NzhDNjk4LjYxIDMxLjE4NzQgNjk4Ljc2MSAzMC44OTU4IDY5OS4wMzggMzAuNzQ1NkM2OTkuMzExIDMwLjU5MzUgNjk5LjYwMSAzMC42NDIxIDY5OS42ODQgMzAuODUyNVYzMC44NTI1Wk02NTguOTQgMzEuMjAwOUM2NTguNzc5IDMxLjIwMDkgNjU4LjcxMSAzMS4yMjU1IDY1OC42NDYgMzEuMjkzOEM2NTguNjIgMzEuMzIwMyA2NTguNjEgMzEuMzQ3MiA2NTguNiAzMS40MDExTDY1Ny43ODQgMzQuMjg3QzY1Ny41OTMgMzUuMjk5MiA2NTYuMjU5IDM2LjMwOTkgNjU0LjUyMSAzNi4zMDk5SDY1Mi4xMDRMNjUyLjUyMyAzNC44MjdINjU0LjA3NkM2NTQuMjM0IDM0LjgyNyA2NTQuMzU4IDM0Ljc3MjEgNjU0LjQ2MiAzNC42NjQzQzY1NC41IDM0LjYyMjUgNjU0LjU1IDM0LjU1NyA2NTQuNTU2IDM0LjQ4OTZMNjU1LjIwMSAzMS45NjgxQzY1NS4zOTEgMzAuOTU1NSA2NTYuNTM4IDI5LjgzNjkgNjU4LjI3NiAyOS44MzY5SDY2MC43NTFMNjYwLjQzNSAzMS4yMDA5SDY1OC45NFpNNjU5LjQ5NyAzMi45NTk2TDY1OS43NzMgMzIuMDI1OUg2NjIuMjg4QzY2Mi41OTggMzAuNjcyIDY2Mi4zNTQgMjkuNDE3NyA2NjEuNDczIDI4LjU5NjFDNjU5LjY4OSAyNi45MzMyIDY1NS45NTcgMjcuNDk4MyA2NTMuMTc3IDI5Ljk3NzlDNjUyLjc0MyAzMC4zNjMgNjUyLjM3NiAzMC43NzkzIDY1Mi4wNDIgMzEuMjA0OEg2NTMuNTU2TDY1My4yMDQgMzIuMTQwNEg2NTEuMzk1QzY1MS4yMjIgMzIuNDM1NCA2NTEuMDYgMzIuNzI4MSA2NTAuOTM2IDMzLjAyNUg2NTMuMDgxTDY1Mi43MzcgMzMuOTYwN0g2NTAuNjNDNjUwLjI2OSAzNS4zOTAxIDY1MC40OTkgMzYuNzIzMyA2NTEuNDA2IDM3LjU2OTlDNjUzLjE2NyAzOS4yMTE2IDY1Ni44ODggMzguNjM0NiA2NTkuNjY3IDM2LjE1NTRDNjYwLjE1MyAzNS43MjQyIDY2MC41NTUgMzUuMjU4NyA2NjAuOTE4IDM0Ljc4MDhINjU4Ljk3M0w2NTkuMjY5IDMzLjg0NzFINjYxLjU0M0M2NjEuNzEgMzMuNTUwMSA2NjEuODYzIDMzLjI1NjUgNjYxLjk4MyAzMi45NTk2SDY1OS40OTdaIiBmaWxsPSIjMDA5RTREIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNThfMTExKSI+DQo8cGF0aCBkPSJNNzc1LjA2OCA0MS4yMjc0Qzc2Ni4yODUgNDIuMDQ2MyA3NTcuMTMxIDQwLjc1NjQgNzU1Ljg0OCAzMy44MTlDNzU1LjIyMSAzMC4zOTkgNzU2Ljc2NSAyNi43NzI1IDc1OC44MSAyNC41MTg0VjIzLjMxNDhDNzU1LjEyNiAyNi41OCA3NTMuMTMgMzAuNzExNSA3NTQuMjggMzUuNTkyQzc1NS43NDggNDEuODUxOCA3NjMuNjAzIDQ1LjM5NjcgNzc1LjU5NSA0NC4yMTk1Qzc4MC4zNDIgNDMuNzU0NSA3ODYuNTUgNDIuMjEyIDc5MC44NjkgMzkuODE0NFYzNi40MTA5Qzc4Ni45NDkgMzguNzcxMyA3ODAuNDY4IDQwLjcyMTEgNzc1LjA2OCA0MS4yMjc0VjQxLjIyNzRaTTc5OC4yMDUgMjMuMjMzNUM3OTYuMTIyIDEyLjk1MzMgNzc2LjM3MyAxMi4zMDE2IDc2My42NDMgMjAuMTMzOFYyMC45OTg5Qzc3Ni4zNTkgMTQuMzkxNSA3OTQuMzk1IDE0LjQzMTcgNzk2LjAzNyAyMy45MDE2Qzc5Ni41ODkgMjcuMDM0MiA3OTQuODQzIDMwLjI5NzggNzkxLjcyMyAzMi4xNzdWMzQuNjM0MkM3OTUuNDc2IDMzLjI0MzIgNzk5LjMyNCAyOC43NDQyIDc5OC4yMDUgMjMuMjMzNVYyMy4yMzM1WiIgZmlsbD0iIzBFN0RDMiIvPg0KPHBhdGggZD0iTTc5MC4xNTkgMjEuNzM2OEg3ODcuODU2VjMyLjEwM0M3ODcuODU2IDMzLjMxNzkgNzg4LjQzNyAzNC4zNzQ0IDc5MC4xNTkgMzQuNTQzMlYyMS43MzY4Wk03NjIuNzM5IDI1LjUyMTdINzYwLjQzMkw3NjAuNDMxIDMyLjI5NDNDNzYwLjQzMSAzMy41MTM0IDc2MS4wMTMgMzQuNTY4OCA3NjIuNzM5IDM0LjczNDRWMjUuNTIxN1YyNS41MjE3Wk03NjAuNDMyIDIyLjA1MjFINzYyLjczMlYyNC4yNTg0SDc2MC40MzJWMjIuMDUyMVpNNzc2LjUzIDM0LjYyNzJDNzc0LjY2NiAzNC42MjcyIDc3My44NzcgMzMuMzE3NyA3NzMuODc3IDMyLjAyOFYyMy4wMzU1SDc3Ni4xNlYyNS41MjE3SDc3Ny44NzlWMjcuMzg1M0g3NzYuMTZWMzEuODg1NEM3NzYuMTYgMzIuNDExMyA3NzYuNDA3IDMyLjcwNDQgNzc2Ljk1IDMyLjcwNDRINzc3Ljg3OVYzNC42MjcyTDc3Ni41MyAzNC42MjcyVjM0LjYyNzJaTTc4MC43MzEgMzAuNzk2MUM3ODAuNzMxIDMxLjk3NjggNzgxLjQ2MSAzMi44NDQ2IDc4Mi43NTQgMzIuODQ0NkM3ODMuNzY2IDMyLjg0NDYgNzg0LjI2NiAzMi41NjA1IDc4NC44NSAzMS45NzY4TDc4Ni4yNjEgMzMuMzM0OUM3ODUuMzU3IDM0LjIzNzkgNzg0LjQwOSAzNC43ODcgNzgyLjczNyAzNC43ODdDNzgwLjU1MiAzNC43ODcgNzc4LjQ1OSAzMy41ODE5IDc3OC40NTkgMzAuMDY4NkM3NzguNDU5IDI3LjA2NTEgNzgwLjI4OCAyNS4zNjczIDc4Mi42ODYgMjUuMzY3M0M3ODUuMTI0IDI1LjM2NzMgNzg2LjUyNSAyNy4zNTQ5IDc4Ni41MjUgMjkuOTYzOVYzMC43OTYzSDc4MC43MzFWMzAuNzk2MVpNNzgyLjU4NiAyNy4yNzU2Qzc4MS44MDUgMjcuMjc1NiA3ODEuMjA0IDI3LjY4MjMgNzgwLjk1IDI4LjIzMDlDNzgwLjgwMiAyOC41NjA3IDc4MC43NDcgMjguODE3NyA3ODAuNzMxIDI5LjIyMjlINzg0LjI0OUM3ODQuMjA0IDI4LjIzMDkgNzgzLjc1OSAyNy4yNzU2IDc4Mi41ODYgMjcuMjc1NlpNNzY4LjkzOSAyNy4zODUzQzc2OS42MDggMjcuMzg1MyA3NjkuODg3IDI3LjcxOTggNzY5Ljg4NyAyOC4yNjI2VjM0LjY0MDZINzcyLjE3VjI4LjI0OTJDNzcyLjE3IDI2Ljk1NDIgNzcxLjQ4NyAyNS41MjQxIDc2OS40ODIgMjUuNTI0MUw3NjQuNzY2IDI1LjUyMTdWMzQuNjQwNkg3NjcuMDVWMjcuMzg1M0g3NjguOTM5VjI3LjM4NTNaTTc5Mi42MzcgMjMuNTg5MUM3OTIuMTI5IDIzLjU4OTEgNzkxLjcyNCAyMy4xNzU0IDc5MS43MjQgMjIuNjYyOUM3OTEuNzI0IDIyLjE1MjkgNzkyLjEyOSAyMS43MzY4IDc5Mi42MzcgMjEuNzM2OEM3OTMuMTQyIDIxLjczNjggNzkzLjU1NiAyMi4xNTI5IDc5My41NTYgMjIuNjYyOUM3OTMuNTU2IDIzLjE3NTQgNzkzLjE0MiAyMy41ODkxIDc5Mi42MzcgMjMuNTg5MVpNNzkyLjYzNyAyMS44OTEyQzc5Mi4yMTggMjEuODkxMiA3OTEuODgyIDIyLjI0MDcgNzkxLjg4MiAyMi42NjI5Qzc5MS44ODIgMjMuMDg3NiA3OTIuMjE4IDIzLjQzMDkgNzkyLjYzNyAyMy40MzA5Qzc5My4wNTUgMjMuNDMwOSA3OTMuNDAyIDIzLjA4NzYgNzkzLjQwMiAyMi42NjI5Qzc5My40MDIgMjIuMjQwNyA3OTMuMDU1IDIxLjg5MTIgNzkyLjYzNyAyMS44OTEyWk03OTMuMDQzIDIzLjIxOEg3OTIuODcyQzc5Mi44NjQgMjMuMjE3OSA3OTIuODU3IDIzLjIxNTcgNzkyLjg1MSAyMy4yMTE2Qzc5Mi44NDUgMjMuMjA3NSA3OTIuODQgMjMuMjAxNyA3OTIuODM3IDIzLjE5NDlMNzkyLjYwNSAyMi43OTdDNzkyLjU5OCAyMi43ODg1IDc5Mi41NzkgMjIuNzc4OCA3OTIuNTczIDIyLjc3ODhINzkyLjQ2N1YyMy4xNzU0Qzc5Mi40NjcgMjMuMTk1IDc5Mi40NTMgMjMuMjE4MSA3OTIuNDI4IDIzLjIxODFINzkyLjI3NEM3OTIuMjUxIDIzLjIxODEgNzkyLjIzNSAyMy4xOTUgNzkyLjIzNSAyMy4xNzU0VjIyLjE3NDlDNzkyLjIzNSAyMi4xMTY0IDc5Mi4yNTQgMjIuMDkyNCA3OTIuMzA1IDIyLjA4NUM3OTIuMzYxIDIyLjA3OSA3OTIuNTA1IDIyLjA3MTYgNzkyLjU4NiAyMi4wNzE2Qzc5Mi44NzIgMjIuMDcxNiA3OTMuMDM5IDIyLjE1NjYgNzkzLjAzOSAyMi40MjQ0VjIyLjQ0NEM3OTMuMDM5IDIyLjYwOTQgNzkyLjk1OSAyMi42OTk1IDc5Mi44MzMgMjIuNzM5N0w3OTMuMDc0IDIzLjE1NDdDNzkzLjA3OCAyMy4xNjQgNzkzLjA4IDIzLjE3MzkgNzkzLjA4IDIzLjE4NEM3OTMuMDggMjMuMTk5NyA3OTMuMDcyIDIzLjIxOCA3OTMuMDQzIDIzLjIxOFYyMy4yMThaTTc5Mi44MjEgMjIuNDI0NEM3OTIuODIxIDIyLjMxMjcgNzkyLjc1MiAyMi4yNzczIDc5Mi42MDUgMjIuMjc3M0g3OTIuNDU5VjIyLjU5NDdDNzkyLjQ4MiAyMi41OTQ3IDc5Mi41ODYgMjIuNTk5NiA3OTIuNjA1IDIyLjU5OTZDNzkyLjc1MiAyMi41OTk2IDc5Mi44MjEgMjIuNTUgNzkyLjgyMSAyMi40NDRWMjIuNDI0NFoiIGZpbGw9IiMwRTdEQzIiLz4NCjwvZz4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMV81OF8xMTEpIj4NCjxwYXRoIGQ9Ik01MzMuNzczIDIwLjk5MTFDNTI5LjI2MyAyMC45OTExIDUyNS41OTkgMjQuNjU0NyA1MjUuNTk5IDI5LjE2NDRDNTI1LjU5OSAzMy42NzQxIDUyOS4yNjMgMzcuMzM3NyA1MzMuNzczIDM3LjMzNzdDNTM4LjI4MiAzNy4zMzc3IDU0MS45NDYgMzMuNjc0MSA1NDEuOTQ2IDI5LjE2NDRDNTQxLjk0NiAyNC42NTQ3IDUzOC4yODIgMjAuOTkxMSA1MzMuNzczIDIwLjk5MTFaTTUzMy43NzMgMzYuNTE4NkM1MjkuNzEzIDM2LjUxODYgNTI2LjQxOSAzMy4yMTUgNTI2LjQxOSAyOS4xNjQ0QzUyNi40MTkgMjUuMTEzNyA1MjkuNzEzIDIxLjgxMDIgNTMzLjc3MyAyMS44MTAyQzUzNy44MzIgMjEuODEwMiA1NDEuMTI3IDI1LjExMzcgNTQxLjEyNyAyOS4xNjQ0QzU0MS4xMjcgMzMuMjE1IDUzNy44MzIgMzYuNTE4NiA1MzMuNzczIDM2LjUxODZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTUzNi42OSAyMy45MjUyQzUzNi42NjMgMjMuOTA3MiA1MzYuNjI3IDIzLjg5ODIgNTM2LjU5MSAyMy44OTgyQzUzNi40ODMgMjMuODk4MiA1MzYuNDAyIDIzLjk3OTIgNTM2LjQwMiAyNC4wODczVjI2LjY0MzdDNTM2LjQwMiAyNi43MzM3IDUzNi4zMyAyNi44MDU3IDUzNi4yNCAyNi44MDU3SDUzMS4yOUM1MzEuMiAyNi44MDU3IDUzMS4xMzcgMjYuNzMzNyA1MzEuMTI4IDI2LjY0MzdWMjQuMDg3M0M1MzEuMTI4IDI0LjA1MTMgNTMxLjExOSAyNC4wMjQyIDUzMS4xMDEgMjMuOTg4MkM1MzEuMDQ3IDIzLjg5ODIgNTMwLjkzIDIzLjg3MTIgNTMwLjgzOSAyMy45MjUyQzUyOS4wMTIgMjUuMDUwNCA1MjcuOTA1IDI3LjAwMzcgNTI3LjkwNSAyOS4xNjQxQzUyNy45MDUgMzEuMzI0NCA1MjkuMDEyIDMzLjI3NzcgNTMwLjg1NyAzNC40MDI5QzUzMC44ODUgMzQuNDIwOSA1MzAuOTIxIDM0LjQyOTkgNTMwLjk1NyAzNC40Mjk5QzUzMS4wNjUgMzQuNDI5OSA1MzEuMTQ2IDM0LjM0ODkgNTMxLjE0NiAzNC4yNDA5VjMxLjY4NDVDNTMxLjE0NiAzMS41OTQ0IDUzMS4yMTggMzEuNTMxNCA1MzEuMzA4IDMxLjUyMjRINTM2LjI1OEM1MzYuMzQ4IDMxLjUyMjQgNTM2LjQyIDMxLjU5NDQgNTM2LjQyIDMxLjY4NDVWMzQuMjQwOUM1MzYuNDIgMzQuMjc2OSA1MzYuNDI5IDM0LjMwMzkgNTM2LjQ0NyAzNC4zMzk5QzUzNi41MDEgMzQuNDI5OSA1MzYuNjE4IDM0LjQ1NjkgNTM2LjcwOCAzNC40MDI5QzUzOC41NTQgMzMuMjc3NyA1MzkuNjYxIDMxLjMyNDQgNTM5LjY2MSAyOS4xNjQxQzUzOS42NjEgMjcuMDAzNyA1MzguNTM2IDI1LjA1MDQgNTM2LjY5IDIzLjkyNTJWMjMuOTI1MlpNNTMwLjE5MSAzMi4zNjg2TDUzMC4yMTggMzIuNjc0Nkw1MzAuMDIgMzIuNDMxNkM1MjguNDk5IDMwLjUxNDMgNTI4LjQ5OSAyNy44MDQ4IDUzMC4wMiAyNS44ODc1TDUzMC4xOTEgMjUuNjcxNUw1MzAuMjE4IDI1LjY0NDVMNTMwLjE5MSAyNS45NTk2QzUzMC4xNjQgMjYuMjExNiA1MzAuMTU1IDI2LjQ3MjYgNTMwLjE1NSAyNi43MzM3VjMxLjU4NTRDNTMwLjE1NSAzMS44NDY1IDUzMC4xNzMgMzIuMTA3NSA1MzAuMTkxIDMyLjM2ODZaTTUzNi40MDIgMzAuMzg4M0M1MzYuNDAyIDMwLjQ3ODMgNTM2LjMzIDMwLjU1MDMgNTM2LjI0IDMwLjU1MDNINTMxLjI5QzUzMS4yIDMwLjU1MDMgNTMxLjEzNyAzMC40NzgzIDUzMS4xMjggMzAuMzg4M1YyNy45Mzk5QzUzMS4xMjggMjcuODQ5OSA1MzEuMiAyNy43Nzc4IDUzMS4yOSAyNy43Nzc4SDUzNi4yNEM1MzYuMzMgMjcuNzc3OCA1MzYuNDAyIDI3Ljg0OTkgNTM2LjQwMiAyNy45Mzk5VjMwLjM4ODNaTTUzNy41MTkgMzIuNDMxNkw1MzcuMzIxIDMyLjY3NDZMNTM3LjM0OCAzMi4zNjg2QzUzNy4zNzUgMzIuMTE2NSA1MzcuMzg0IDMxLjg1NTUgNTM3LjM4NCAzMS41OTQ0VjI2LjczMzdDNTM3LjM4NCAyNi40NzI2IDUzNy4zNzUgMjYuMjExNiA1MzcuMzQ4IDI1Ljk1OTZMNTM3LjMzOSAyNS44MjQ1TDUzNy4zMyAyNS42ODA1VjI1LjY0NDVMNTM3LjUxOSAyNS44ODc1QzUzOC4yNTcgMjYuODA1NyA1MzguNjYyIDI3Ljk3NTkgNTM4LjY2MiAyOS4xNTUxQzUzOC42NjIgMzAuMzM0MiA1MzguMjU3IDMxLjUxMzQgNTM3LjUxOSAzMi40MzE2VjMyLjQzMTZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTU1NC4yNzYgMjkuMDIwMkM1NTQuMjMxIDI5LjAwMjIgNTU0LjE3NyAyOC45ODQyIDU1NC4xNzcgMjguOTMwMkM1NTQuMTc3IDI4Ljg5NDIgNTU0LjE5NSAyOC44NjcyIDU1NC4yMzEgMjguODQ5MkM1NTQuMjk0IDI4LjgyMjIgNTU1Ljg1MSAyOC4yNjQxIDU1NS44NTEgMjYuNDI3OEM1NTUuODUxIDI0LjM4NDUgNTU0LjQ3NCAyMy4xNjkzIDU1Mi4xNTIgMjMuMTY5M0g1NDYuNTI2VjM1LjE3NzJINTUyLjY2NUM1NTQuNDU2IDM1LjE3NzIgNTU2LjM4MiAzMy45MDggNTU2LjM4MiAzMS44NjQ2QzU1Ni4zODIgMjkuOTExMyA1NTQuOTA2IDI5LjIyNzIgNTU0LjI3NiAyOS4wMjAyVjI5LjAyMDJaTTU0OS4zNjEgMjUuNjI2N0M1NDkuMzYxIDI1LjU4MTcgNTQ5LjM5NyAyNS41NDU2IDU0OS40NDIgMjUuNTQ1Nkg1NTEuNjc1QzU1Mi40MTMgMjUuNTQ1NiA1NTIuOTE3IDI2LjA0MDcgNTUyLjkxNyAyNi43Nzg4QzU1Mi45MTcgMjcuMzU0OSA1NTIuNDY3IDI3Ljk3NiA1NTEuNjIxIDI3Ljk3Nkg1NDkuNDQyQzU0OS4zOTcgMjcuOTc2IDU0OS4zNjEgMjcuOTQgNTQ5LjM2MSAyNy44OTVWMjUuNjI2N1pNNTUxLjY3NSAzMi44MDk4SDU0OS40NDJDNTQ5LjM5NyAzMi44MDk4IDU0OS4zNjEgMzIuNzczOCA1NDkuMzYxIDMyLjcyODhWMzAuMzM0NEM1NDkuMzYxIDMwLjI4OTQgNTQ5LjM5NyAzMC4yNTM0IDU0OS40NDIgMzAuMjUzNEg1NTEuNjIxQzU1Mi42OTIgMzAuMjUzNCA1NTMuMzA0IDMwLjcxMjUgNTUzLjMwNCAzMS41MjI2QzU1My4zMDQgMzIuMzU5NyA1NTIuNzM3IDMyLjgwOTggNTUxLjY3NSAzMi44MDk4VjMyLjgwOThaTTU3NS4zODQgMjcuOTQ5TDU3NC45NTIgMjcuODU5QzU3My45OCAyNy42NTIgNTczLjAzNSAyNy4zOTA5IDU3My4wMzUgMjYuNTUzOEM1NzMuMDM1IDI1LjcxNjcgNTczLjgxOCAyNS4zMzg2IDU3NC41OTIgMjUuMzM4NkM1NzUuNTAxIDI1LjMzODYgNTc2LjQwMSAyNS43NDM3IDU3Ny4wODYgMjYuNDQ1OEw1NzguODY4IDI0LjY4MTVDNTc4LjEwMyAyMy44MzU0IDU3Ni43NDQgMjIuODYzMiA1NzQuNTQ3IDIyLjg2MzJDNTcxLjkwMSAyMi44NjMyIDU3MC4xMTggMjQuMzY2NSA1NzAuMTE4IDI2LjYwNzhDNTcwLjExOCAyOC45NzUyIDU3MS45ODIgMjkuODY2MyA1NzMuNTQ4IDMwLjE5OTRMNTczLjk3MSAzMC4yODk0QzU3NS40OTIgMzAuNjEzNSA1NzYuMjEyIDMwLjg1NjUgNTc2LjIxMiAzMS43MjA2QzU3Ni4yMTIgMzIuNDk0NyA1NzUuNTE5IDMzLjAwNzggNTc0LjQ5MyAzMy4wMDc4QzU3My4yODcgMzMuMDA3OCA1NzIuMjE2IDMyLjQ3NjcgNTcxLjQwNiAzMS40Nzc2TDU2OS41NzggMzMuMjY4OUM1NzAuNTUxIDM0LjQyMTEgNTcxLjgzOCAzNS40NjUyIDU3NC41MjkgMzUuNDY1MkM1NzYuODI1IDM1LjQ2NTIgNTc5LjE1NiAzNC4xMzMgNTc5LjE1NiAzMS41NzY2QzU3OS4xNDcgMjguOTU3MiA1NzcuMzY1IDI4LjM2MzEgNTc1LjM4NCAyNy45NDlWMjcuOTQ5Wk01OTkuMTAzIDIzLjE2OTNWMjcuNTYyQzU5OS4xMDMgMjcuNjA3IDU5OS4wNjcgMjcuNjQzIDU5OS4wMjIgMjcuNjQzSDU5NS4zMzFDNTk1LjI4NiAyNy42NDMgNTk1LjI1IDI3LjYwNyA1OTUuMjUgMjcuNTYyVjIzLjE2OTNINTkyLjIyNlYzNS4xNzcySDU5NS4yNVYzMC40NjA0QzU5NS4yNSAzMC40MTU0IDU5NS4yODYgMzAuMzc5NCA1OTUuMzMxIDMwLjM3OTRINTk5LjAyMkM1OTkuMDY3IDMwLjM3OTQgNTk5LjEwMyAzMC40MTU0IDU5OS4xMDMgMzAuNDYwNFYzNS4xNzcySDYwMi4xNDZWMjMuMTY5M0g1OTkuMTAzWk01ODYuMTQxIDMyLjcxOThDNTg0Ljc4MiAzMi43MTk4IDU4My4zMTUgMzEuNTg1NiA1ODMuMzE1IDI5LjA5MjJDNTgzLjMxNSAyNi44MTQ4IDU4NC42OTIgMjUuNjI2NyA1ODYuMDUxIDI1LjYyNjdDNTg3LjA0MSAyNS42MjY3IDU4Ny43MzQgMjYuMDQwNyA1ODguMjgzIDI2Ljk1ODlMNTkwLjYwNiAyNS40MTk2QzU4OS40MTggMjMuNjczMyA1ODguMDA0IDIyLjg4MTIgNTg2LjAzMyAyMi44ODEyQzU4Mi4xNzEgMjIuODgxMiA1ODAuNDQzIDI2LjAwNDcgNTgwLjQ0MyAyOS4wOTIyQzU4MC40NDMgMzIuODQ1OCA1ODIuNzI5IDM1LjQ2NTIgNTg1Ljk5NyAzNS40NjUyQzU4OC40MjcgMzUuNDY1MiA1ODkuNTM1IDM0LjU3NDEgNTkwLjY5NiAzMi45MjY4TDU4OC4zNTUgMzEuMzUxNkM1ODcuODMzIDMyLjE5NzcgNTg3LjI2NiAzMi43MTk4IDU4Ni4xNDEgMzIuNzE5OFpNNTYzLjE3OCAyMi44NjMyQzU1OS44NzUgMjIuODYzMiA1NTcuNjYxIDI1LjM5MjYgNTU3LjY2MSAyOS4xNjQyQzU1Ny42NjEgMzIuOTM1OCA1NTkuODc1IDM1LjQ2NTIgNTYzLjE3OCAzNS40NjUyQzU2Ni40ODIgMzUuNDY1MiA1NjguNjk2IDMyLjkzNTggNTY4LjY5NiAyOS4xNjQyQzU2OC42OTYgMjUuMzkyNiA1NjYuNDgyIDIyLjg2MzIgNTYzLjE3OCAyMi44NjMyVjIyLjg2MzJaTTU2My4xNzggMzIuNzE5OEM1NjEuNTU4IDMyLjcxOTggNTYwLjUxNCAzMS4zMjQ2IDU2MC41MTQgMjkuMTY0MkM1NjAuNTE0IDI3LjAxMjkgNTYxLjU1OCAyNS42MjY3IDU2My4xNzggMjUuNjI2N0M1NjQuODA4IDI1LjYyNjcgNTY1Ljg2MSAyNy4wMTI5IDU2NS44NjEgMjkuMTY0MkM1NjUuODYxIDMxLjMyNDYgNTY0LjgwOCAzMi43MTk4IDU2My4xNzggMzIuNzE5OFoiIGZpbGw9IiNGODAwMDAiLz4NCjwvZz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTQ2LjM0NCAyMi4xODExQzE0Ny41OTUgMjIuMjg1NCAxNDguODQ1IDIxLjU1NTMgMTQ5LjYyNyAyMC42Mjk4QzE1MC4zOTUgMTkuNjc4MSAxNTAuOTAzIDE4LjQwMDUgMTUwLjc3MyAxNy4wOTY5QzE0OS42NjYgMTcuMTQ5MSAxNDguMjk4IDE3LjgyNjkgMTQ3LjUxNyAxOC43Nzg2QzE0Ni44IDE5LjU5OTkgMTQ2LjE4OCAyMC45Mjk2IDE0Ni4zNDQgMjIuMTgxMVpNMTQ3Ljg0MSAyMy4wNzk3QzE0OC42NTMgMjIuNzYwNiAxNDkuNjU4IDIyLjM2NTYgMTUwLjc2IDIyLjQyOTFDMTUxLjQ2MyAyMi40ODEyIDE1My40OTUgMjIuNjg5OCAxNTQuNzk4IDI0LjYxOTJDMTU0Ljc5MiAyNC42MjM3IDE1NC43NzggMjQuNjMyMyAxNTQuNzU5IDI0LjY0NUMxNTQuNDM2IDI0Ljg1NDggMTUyLjM5IDI2LjE4NzEgMTUyLjQxNCAyOC44MTY5QzE1Mi40MzkgMzEuOTQ5OSAxNTQuOTg4IDMzLjExODMgMTU1LjMyMiAzMy4yNzExQzE1NS4zNDQgMzMuMjgxMSAxNTUuMzU2IDMzLjI4NjcgMTU1LjM1OCAzMy4yODgzQzE1NS4zNTYgMzMuMjkyNiAxNTUuMzU0IDMzLjMwMSAxNTUuMzUgMzMuMzEzM0MxNTUuMjgzIDMzLjUyODggMTU0Ljg0NSAzNC45NDg5IDE1My44NDcgMzYuNDA0QzE1Mi45MjIgMzcuNzU5OCAxNTEuOTcxIDM5LjA4OTUgMTUwLjQ2IDM5LjExNTZDMTQ5Ljc0OSAzOS4xMjgzIDE0OS4yNyAzOC45MjExIDE0OC43NzIgMzguNzA1NEMxNDguMjQ3IDM4LjQ3ODUgMTQ3LjcwMSAzOC4yNDIyIDE0Ni44NCAzOC4yNDIyQzE0NS45NDcgMzguMjQyMiAxNDUuMzc2IDM4LjQ4NDggMTQ0LjgyNiAzOC43MTg0QzE0NC4zNDggMzguOTIxNCAxNDMuODg3IDM5LjExNzQgMTQzLjI0NSAzOS4xNDE3QzE0MS43ODYgMzkuMTkzOCAxNDAuNjc5IDM3LjcwNzcgMTM5Ljc1NCAzNi4zNTE5QzEzNy44NjYgMzMuNjE0MyAxMzYuNDIgMjguNjM0NCAxMzguMzc0IDI1LjI3MUMxMzkuMzI1IDIzLjU4OTMgMTQxLjA1NyAyMi41MzM0IDE0Mi45MTkgMjIuNTA3M0MxNDMuNzMyIDIyLjQ5MjUgMTQ0LjUwNyAyMi44MDA2IDE0NS4xODQgMjMuMDcwMUMxNDUuNzAyIDIzLjI3NTggMTQ2LjE2MiAyMy40NTg5IDE0Ni41NCAyMy40NTg5QzE0Ni44NzcgMjMuNDU4OSAxNDcuMzE5IDIzLjI4NTEgMTQ3Ljg0MSAyMy4wNzk3WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik0zNi44NTg3IDM3LjUyNDFIMzEuOTg3NEwzNS4wMzQyIDE5LjY2NjhIMzkuOTA1MkwzNi44NTg3IDM3LjUyNDFaIiBmaWxsPSIjMDA1NzlGIi8+DQo8cGF0aCBkPSJNNTQuNTE1NyAyMC4xMDQxQzUzLjU1NDkgMTkuNzQyOCA1Mi4wMzA5IDE5LjM0MzggNTAuMTQ2NiAxOS4zNDM4QzQ1LjMzNjEgMTkuMzQzOCA0MS45NDg2IDIxLjc3NTMgNDEuOTI3OCAyNS4yNTE2QzQxLjg4NzggMjcuODE2NSA0NC4zNTMxIDI5LjI0MSA0Ni4xOTcgMzAuMDk2MkM0OC4wODE2IDMwLjk3MDEgNDguNzIyMyAzMS41NDA1IDQ4LjcyMjMgMzIuMzE5NEM0OC43MDMxIDMzLjUxNTcgNDcuMTk5NCAzNC4wNjcyIDQ1Ljc5NjkgMzQuMDY3MkM0My44NTIxIDM0LjA2NzIgNDIuODEgMzMuNzgyOSA0MS4yMjY0IDMzLjExNzNMNDAuNTg1IDMyLjgzMkwzOS45MDMzIDM2Ljg0MDZDNDEuMDQ1OCAzNy4zMzM5IDQzLjE1MDcgMzcuNzcxNyA0NS4zMzYxIDM3Ljc5MDlDNTAuNDQ3MyAzNy43OTA5IDUzLjc3NDkgMzUuMzk3MSA1My44MTQzIDMxLjY5MjVDNTMuODMzOCAyOS42NTk3IDUyLjUzMiAyOC4xMDIgNDkuNzI1NCAyNi44MjkyQzQ4LjAyMTcgMjYuMDEyMSA0Ni45NzgzIDI1LjQ2MTIgNDYuOTc4MyAyNC42MjUyQzQ2Ljk5ODMgMjMuODY1MiA0Ny44NjA4IDIzLjA4NjggNDkuNzg0IDIzLjA4NjhDNTEuMzY3NyAyMy4wNDg2IDUyLjUzMTIgMjMuNDA5NCA1My40MTI2IDIzLjc3MDVMNTMuODUzMiAyMy45NjAxTDU0LjUxNTcgMjAuMTA0MVoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik02MC45OTI0IDMxLjE5NzlDNjEuMzkzNiAzMC4xNzIgNjIuOTM3MiAyNi4yMDE2IDYyLjkzNzIgMjYuMjAxNkM2Mi45MTcgMjYuMjM5NyA2My4zMzc2IDI1LjE1NjggNjMuNTc4MSAyNC40OTE5TDYzLjkxODYgMjYuMDMwNkM2My45MTg2IDI2LjAzMDYgNjQuODQxIDMwLjMwNTEgNjUuMDQxNCAzMS4xOTc5QzY0LjI4IDMxLjE5NzkgNjEuOTU0NiAzMS4xOTc5IDYwLjk5MjQgMzEuMTk3OVpNNjcuMDA1NCAxOS42NjY4SDYzLjIzNzRDNjIuMDc1NSAxOS42NjY4IDYxLjE5MjcgMTkuOTg5NSA2MC42OTE0IDIxLjE0ODRMNTMuNDU1OCAzNy41MjM5SDU4LjU2NzFDNTguNTY3MSAzNy41MjM5IDU5LjQwODUgMzUuMzE5OSA1OS41ODk0IDM0Ljg0NTJDNjAuMTUwMSAzNC44NDUyIDY1LjEyMjMgMzQuODQ1MiA2NS44NDM3IDM0Ljg0NTJDNjUuOTgzNSAzNS40NzIxIDY2LjQyNDkgMzcuNTIzOSA2Ni40MjQ5IDM3LjUyMzlINzAuOTM1Mkw2Ny4wMDU0IDE5LjY2NjhWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0yNy45MTggMTkuNjY2OEwyMy4xNDc1IDMxLjg0MzhMMjIuNjI2MiAyOS4zNzQxQzIxLjc0NDIgMjYuNTI0NSAxOC45NzgxIDIzLjQyODQgMTUuODkxNCAyMS44ODlMMjAuMjYxIDM3LjUwNTJIMjUuNDEyMkwzMy4wNjkgMTkuNjY2OEgyNy45MThWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0xOC43MTg0IDE5LjY2NjhIMTAuODgxMUwxMC44MDA5IDIwLjAyNzZDMTYuOTE0NSAyMS41MDk1IDIwLjk2MzUgMjUuMDgxNSAyMi42MjcgMjkuMzc0OUwyMC45MjMyIDIxLjE2NzlDMjAuNjQyNyAyMC4wMjc0IDE5Ljc4MDcgMTkuNzA0NCAxOC43MTg0IDE5LjY2NjhaIiBmaWxsPSIjRkFBNjFBIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDJfNThfMTExKSI+DQo8cGF0aCBkPSJNMjIxLjE1OCAxNy40OTlWMTguOTM1NkgyMzEuMzA2VjE3LjQ5OUgyMjEuMTU4Wk0yMzIuNzQ0IDE3LjQ5OVYxOC45MzU2SDI0Ny4yMDZDMjQ3LjIwNiAxOC45MzU2IDI0NS43MjkgMTcuNDk5IDI0My43NzMgMTcuNDk5SDIzMi43NDRaTTI1MC4wNDMgMTcuNDk5VjE4LjkzNTZIMjU4Ljc5M0wyNTguMjczIDE3LjQ5OUgyNTAuMDQzWk0yNjUuMDY1IDE3LjQ5OUwyNjQuNTQ2IDE4LjkzNTZIMjczLjIxNlYxNy40OTlIMjY1LjA2NVpNMjIxLjE1OCAyMC4yOTI5VjIxLjcyOTZIMjMxLjMwNlYyMC4yOTI5SDIyMS4xNThaTTIzMi43NDQgMjAuMjk1VjIxLjcyOTdIMjQ4Ljg4NEMyNDguODg0IDIxLjcyOTcgMjQ4LjY5NiAyMC42MjM5IDI0OC4zNjcgMjAuMjk1SDIzMi43NDRaTTI1MC4wNDMgMjAuMjk1VjIxLjcyOTdIMjU5Ljc1MkwyNTkuMjcxIDIwLjI5NUgyNTAuMDQzWk0yNjQuMDI3IDIwLjI5NUwyNjMuNTQ2IDIxLjcyOTdIMjczLjIxNlYyMC4yOTVIMjY0LjAyN1YyMC4yOTVaTTIyNC4wNzQgMjMuMDg2OVYyNC41MjU3SDIyOC40NjlWMjMuMDg2OUgyMjQuMDc0VjIzLjA4NjlaTTIzNS42NjEgMjMuMDg2OVYyNC41MjU3SDI0MC4wNTZWMjMuMDg2OUgyMzUuNjYxVjIzLjA4NjlaTTI0NC4zMzEgMjMuMDg2OVYyNC41MjU3SDI0OC43MjZDMjQ4LjcyNiAyNC41MjU3IDI0OS4wMDUgMjMuNzY1OSAyNDkuMDA1IDIzLjA4NjlIMjQ0LjMzMVYyMy4wODY5Wk0yNTIuOTYgMjMuMDg2OVYyNC41MjU3SDI2MC43NTJMMjYwLjIzMiAyMy4wODY5SDI1Mi45NlYyMy4wODY5Wk0yNjMuMDY5IDIzLjA4NjlMMjYyLjU0OCAyNC41MjU3SDI3MC4zNzlWMjMuMDg2OUgyNjMuMDY5VjIzLjA4NjlaTTIyNC4wNzQgMjUuODgzVjI3LjMxOTdIMjI4LjQ2OVYyNS44ODNIMjI0LjA3NFYyNS44ODNaTTIzNS42NjEgMjUuODgzVjI3LjMxOTdIMjQ2Ljg4N0MyNDYuODg3IDI3LjMxOTcgMjQ3LjgyNiAyNi41ODI1IDI0OC4xMjUgMjUuODgzSDIzNS42NjFaTTI1Mi45NiAyNS44ODNWMjcuMzE5N0gyNTcuMzU1VjI2LjUyTDI1Ny42MzQgMjcuMzE5N0gyNjUuNjg0TDI2NS45ODQgMjYuNTJWMjcuMzE5N0gyNzAuMzc5VjI1Ljg4M0gyNjIuMTI5TDI2MS42OTEgMjcuMDk5OUwyNjEuMjUxIDI1Ljg4M0gyNTIuOTZaTTIyNC4wNzQgMjguNjc3VjMwLjExMzdIMjI4LjQ2OVYyOC42NzdIMjI0LjA3NFpNMjM1LjY2MSAyOC42NzdWMzAuMTEzN0gyNDguMTI1QzI0Ny44MjYgMjkuNDE2NSAyNDYuODg3IDI4LjY3NyAyNDYuODg3IDI4LjY3N0gyMzUuNjYxWk0yNTIuOTYgMjguNjc3VjMwLjExMzdIMjU3LjM1NVYyOC42NzdIMjUyLjk2Wk0yNTguMTUzIDI4LjY3N0wyNTguNjg1IDMwLjExMzdIMjY0LjcyMUwyNjUuMjI2IDI4LjY3N0gyNTguMTUzWk0yNjUuOTg0IDI4LjY3N1YzMC4xMTM3SDI3MC4zNzlWMjguNjc3SDI2NS45ODRaTTIyNC4wNzQgMzEuNDcxVjMyLjkwNzZIMjI4LjQ2OVYzMS40NzFIMjI0LjA3NFpNMjM1LjY2MSAzMS40NzFWMzIuOTA3NkgyNDAuMDU2VjMxLjQ3MUgyMzUuNjYxWk0yNDQuMzMxIDMxLjQ3MVYzMi45MDc2SDI0OS4wMDVDMjQ5LjAwNSAzMi4yMjk2IDI0OC43MjYgMzEuNDcxIDI0OC43MjYgMzEuNDcxSDI0NC4zMzFWMzEuNDcxWk0yNTIuOTYgMzEuNDcxVjMyLjkwNzZIMjU3LjM1NVYzMS40NzFIMjUyLjk2Wk0yNTkuMTUxIDMxLjQ3MUwyNTkuNjY2IDMyLjkwNzZIMjYzLjcxM0wyNjQuMjMyIDMxLjQ3MUgyNTkuMTUxWk0yNjUuOTg0IDMxLjQ3MVYzMi45MDc2SDI3MC4zNzlWMzEuNDcxSDI2NS45ODRaTTIyMS4yMzcgMzQuMjY1VjM1LjcwMzdIMjMxLjM4NlYzNC4yNjVIMjIxLjIzN1pNMjMyLjc0NCAzNC4yNjVWMzUuNzAzN0gyNDguMzY3QzI0OC42OTYgMzUuMzc0MyAyNDguODg0IDM0LjI2NSAyNDguODg0IDM0LjI2NUgyMzIuNzQ0VjM0LjI2NVpNMjUwLjEyMyAzNC4yNjVWMzUuNzAzN0gyNTcuMzU1VjM0LjI2NUgyNTAuMTIzWk0yNjAuMTUxIDM0LjI2NUwyNjAuNjggMzUuNzAzN0gyNjIuNzM5TDI2My4yMzYgMzQuMjY1SDI2MC4xNTFaTTI2NS45ODQgMzQuMjY1VjM1LjcwMzdIMjczLjI5NVYzNC4yNjVIMjY1Ljk4NFpNMjIxLjIzNyAzNy4wNjFWMzguNDk3N0gyMzEuMzg2VjM3LjA2MUgyMjEuMjM3Wk0yMzIuNzQ0IDM3LjA2MVYzOC40OTU2SDI0My43NzNDMjQ1LjcyOSAzOC40OTU2IDI0Ny4yMDYgMzcuMDYxIDI0Ny4yMDYgMzcuMDYxSDIzMi43NDRaTTI1MC4xMjMgMzcuMDYxVjM4LjQ5NzdIMjU3LjM1NVYzNy4wNjFIMjUwLjEyM1pNMjYxLjE1NSAzNy4wNjFMMjYxLjY2NCAzOC40OTM2TDI2MS43NTIgMzguNDk1NkwyNjIuMjY5IDM3LjA2MUgyNjEuMTU1VjM3LjA2MVpNMjY1Ljk4NCAzNy4wNjFWMzguNDk3N0gyNzMuMjk1VjM3LjA2MUgyNjUuOTg0WiIgZmlsbD0iIzFGNzBDMSIvPg0KPC9nPg0KPGRlZnM+DQo8Y2xpcFBhdGggaWQ9ImNsaXAwXzU4XzExMSI+DQo8cmVjdCB3aWR0aD0iNDQuNDQ3MyIgaGVpZ2h0PSIyOS42MzE1IiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzUzLjk1NSAxNC44MTU1KSIvPg0KPC9jbGlwUGF0aD4NCjxjbGlwUGF0aCBpZD0iY2xpcDFfNThfMTExIj4NCjxyZWN0IHdpZHRoPSI3Ni41NDgxIiBoZWlnaHQ9IjE2LjM1MDciIGZpbGw9IndoaXRlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MjUuNTk5IDIwLjk4ODkpIi8+DQo8L2NsaXBQYXRoPg0KPGNsaXBQYXRoIGlkPSJjbGlwMl81OF8xMTEiPg0KPHJlY3Qgd2lkdGg9IjUyLjEzNzIiIGhlaWdodD0iMjAuOTk4NyIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyMS4xNTggMTcuNDk5KSIvPg0KPC9jbGlwUGF0aD4NCjwvZGVmcz4NCjwvc3ZnPg0K" style="\n            width: 742.5px;\n            position: relative;\n            top: 107px;\n            left: 32px;\n            ">\n            <a href='+gk+' style="\n        float: left;\n        border-radius: 56px;\n        background: #0D6EFD;\n        padding-top: 8px;\n        width: 280px;\n        height: 38px;\n        text-align: center;\n        position: relative;\n        top: 127px;\n        left: 274px;\n        font-size: 16px;\n        color: white;\n        text-decoration: none;\n        letter-spacing: 0.02em;\n    ">Claim your FREE account</a>\n            <div style="\n    font-size: 14px;\n    position: relative;\n    top: 180px;\n    left: 19px;\n    letter-spacing: 0.02em;\n    font-weight: 500;\n    line-height: 125%;\n">have a Syncfusion account? <a href="https://www.syncfusion.com/account/login?ReturnUrl=/account/login" style="text-decoration: none;\ncolor: #0D6EFD;\nfont-weight: 500;">Sign In</a></div>\n        </div>\n    </div>';if("undefined"!==typeof document&&!VM(document)){var t=jD("div",{innerHTML:e});document.body.appendChild(t)}}(),Dk=!0),this.render(),this.mount?this.accessMount():this.trigger("created")}},t.prototype.renderComplete=function(e){if(YM()){window.sfBlazor.renderComplete(this.element,e)}this.isRendered=!0},t.prototype.dataBind=function(){this.injectModules(),e.prototype.dataBind.call(this)},t.prototype.on=function(e,t,n){if("string"===typeof e)this.localObserver.on(e,t,n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];this.localObserver.on(o.event,o.handler,o.context)}},t.prototype.off=function(e,t){if("string"===typeof e)this.localObserver.off(e,t);else for(var n=0,r=e;n<r.length;n++){var i=r[n];this.localObserver.off(i.event,i.handler)}},t.prototype.notify=function(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)},t.prototype.getInjectedModules=function(){return this.injectedModules},t.Inject=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var n=0;n<e.length;n++)-1===this.prototype.injectedModules.indexOf(e[parseInt(n.toString(),10)])&&this.prototype.injectedModules.push(e[parseInt(n.toString(),10)])},t.prototype.createElement=function(e,t,n){return jD(e,t)},t.prototype.triggerStateChange=function(e,t){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:t})},t.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},t.prototype.detectFunction=function(e){var t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])},t.prototype.mergePersistData=function(){var e;VM(e=kk?window.localStorage.getItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion):window.localStorage.getItem(this.getModuleName()+this.element.id))||""===e||this.setProperties(JSON.parse(e),!0)},t.prototype.setPersistData=function(){this.isDestroyed||(kk?window.localStorage.setItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion,this.getPersistData()):window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData()))},t.prototype.renderReactTemplates=function(e){VM(e)||e()},t.prototype.clearTemplate=function(e,t){},t.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(Rk=0),Ik=this.pageID(location.href),Ak=history.length,e+"_"+Ik+"_"+Rk++},t.prototype.pageID=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t|=0}return Math.abs(t)},t.prototype.isHistoryChanged=function(){return Ik!==this.pageID(location.href)||Ak!==history.length},t.prototype.addOnPersist=function(e){for(var t=this,n={},r=0,i=e;r<i.length;r++){var o,s=i[r];BM(o=LM(s,this))||PM(s,this.getActualProperties(o),n)}return JSON.stringify(n,(function(e,n){return t.getActualProperties(n)}))},t.prototype.getActualProperties=function(e){return e instanceof vk?LM("properties",e):e},t.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},t.prototype.iterateJsonProperties=function(e,t){for(var n={},r=function(r){if(-1===t.indexOf(r)){var o=e[r];if("object"!==typeof o||o instanceof Array)n[""+r]=o;else{var s=t.filter((function(e){return new RegExp(r+".").test(e)})).map((function(e){return e.replace(r+".","")}));n[""+r]=i.iterateJsonProperties(i.getActualProperties(o),s)}}},i=this,o=0,s=Object.keys(e);o<s.length;o++){r(s[o])}return n},wk([ak(!1)],t.prototype,"enablePersistence",void 0),wk([ak()],t.prototype,"enableRtl",void 0),wk([ak()],t.prototype,"locale",void 0),t=wk([dk],t)}(JD);"undefined"!==typeof window&&window.addEventListener("popstate",(function(){Rk=0}));var Lk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pk=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},jk={left:0,top:0,bottom:0,right:0},Uk={isDragged:!1},Fk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lk(t,e),Pk([ak(0)],t.prototype,"left",void 0),Pk([ak(0)],t.prototype,"top",void 0),t}(vk),zk=function(e){function t(t,r){var i=e.call(this,r,t)||this;return i.dragLimit=n.getDefaultPosition(),i.borderWidth=n.getDefaultPosition(),i.padding=n.getDefaultPosition(),i.diffX=0,i.prevLeft=0,i.prevTop=0,i.dragProcessStarted=!1,i.eleTop=0,i.tapHoldTimer=0,i.externalInitialize=!1,i.diffY=0,i.parentScrollX=0,i.parentScrollY=0,i.droppables={},i.bind(),i}var n;return Lk(t,e),n=t,t.prototype.bind=function(){this.toggleEvents(),xD.isIE&&UD([this.element],"e-block-touch"),this.droppables[this.scope]={}},t.getDefaultPosition=function(){return zM({},jk)},t.prototype.toggleEvents=function(e){var t;BM(this.handle)||(t=HD(this.handle,this.element));var n=this.enableTapHold&&xD.isDevice&&xD.isTouch?this.mobileInitialize:this.initialize;e?LD.remove(t||this.element,xD.touchStartEvent,n):LD.add(t||this.element,xD.touchStartEvent,n,this)},t.prototype.mobileInitialize=function(e){var t=this,n=e.currentTarget;this.tapHoldTimer=setTimeout((function(){t.externalInitialize=!0,t.removeTapholdTimer(),t.initialize(e,n)}),this.tapHoldThreshold),LD.add(document,xD.touchMoveEvent,this.removeTapholdTimer,this),LD.add(document,xD.touchEndEvent,this.removeTapholdTimer,this)},t.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),LD.remove(document,xD.touchMoveEvent,this.removeTapholdTimer),LD.remove(document,xD.touchEndEvent,this.removeTapholdTimer)},t.prototype.getScrollableParent=function(e,t){return VM(e)?null:e[{vertical:"scrollHeight",horizontal:"scrollWidth"}[""+t]]>e[{vertical:"clientHeight",horizontal:"clientWidth"}[""+t]]&&("vertical"===t?e.scrollTop>0:e.scrollLeft>0)?("vertical"===t?(this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?e.scrollTop:e.scrollTop-this.parentScrollY),this.tempScrollHeight=e.scrollHeight):(this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?e.scrollLeft:e.scrollLeft-this.parentScrollX),this.tempScrollWidth=e.scrollWidth),VM(e)?e:this.getScrollableParent(e.parentNode,t)):this.getScrollableParent(e.parentNode,t)},t.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0;this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")},t.prototype.initialize=function(e,t){if(this.currentStateTarget=e.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=e.currentTarget||t,this.dragProcessStarted=!1,this.abort){var n=this.abort;"string"===typeof n&&(n=[n]);for(var r=0;r<n.length;r++)if(!VM(YD(e.target,n[parseInt(r.toString(),10)])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!BM(e.changedTouches)&&"touchstart"!==e.type&&e.preventDefault(),this.element.setAttribute("aria-grabbed","true");var i=this.getCoordinates(e);if(this.initialPosition={x:i.pageX,y:i.pageY},!this.clone){var o=this.element.getBoundingClientRect();this.getScrollableValues(),e.clientX===e.pageX&&(this.parentScrollX=0),e.clientY===e.pageY&&(this.parentScrollY=0),this.relativeXPosition=i.pageX-(o.left+this.parentScrollX),this.relativeYPosition=i.pageY-(o.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(e):(LD.add(document,xD.touchMoveEvent,this.intDragStart,this),LD.add(document,xD.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),"touchstart"!==e.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,LD.trigger(document.documentElement,xD.touchStartEvent,e)}},t.prototype.intDragStart=function(e){this.removeTapholdTimer();var t=!BM(e.changedTouches);if(!t||1===e.changedTouches.length){var n,r=this.getCoordinates(e),i=getComputedStyle(this.element);this.margin={left:parseInt(i.marginLeft,10),top:parseInt(i.marginTop,10),right:parseInt(i.marginRight,10),bottom:parseInt(i.marginBottom,10)};var o=this.element;if(this.clone&&this.dragTarget){var s=YD(e.target,this.dragTarget);VM(s)||(o=s)}this.isReplaceDragEle&&(o=this.currentStateCheck(e.target,o)),this.offset=this.calculateParentPosition(o),this.position=this.getMousePosition(e,this.isDragScroll);var a=this.initialPosition.x-r.pageX,c=this.initialPosition.y-r.pageY;if(Math.sqrt(a*a+c*c)>=this.distance||this.externalInitialize){var l=this.getHelperElement(e);if(!l||VM(l))return;t&&e.preventDefault();var d=this.helperElement=l;if(this.parentClientRect=this.calculateParentPosition(d.offsetParent),this.dragStart){var u={event:e,element:o,target:this.getProperTargetElement(e),bindEvents:YM()?this.bindDragEvents.bind(this):null,dragElement:d};this.trigger("dragStart",u)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),n={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var h=getComputedStyle(o),p=parseFloat(h.marginTop);this.clone&&0!==p&&(n.top+=p),this.eleTop=isNaN(parseFloat(h.top))?0:parseFloat(h.top)-this.offset.top,this.enableScrollHandler&&!this.clone&&(n.top-=this.parentScrollY,n.left-=this.parentScrollX);var f=this.getProcessedPositionValue({top:n.top-this.diffY+"px",left:n.left-this.diffX+"px"});this.dragArea&&"string"!==typeof this.dragArea&&this.dragArea.classList.contains("e-kanban-content")&&"relative"===this.dragArea.style.position&&(n.top+=this.dragArea.scrollTop),this.dragElePosition={top:n.top,left:n.left},qD(d,this.getDragPosition({position:"absolute",left:f.left,top:f.top})),LD.remove(document,xD.touchMoveEvent,this.intDragStart),LD.remove(document,xD.touchEndEvent,this.intDestroy),YM()||this.bindDragEvents(d)}}},t.prototype.bindDragEvents=function(e){VD(e)?(LD.add(document,xD.touchMoveEvent,this.intDrag,this),LD.add(document,xD.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,e)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},t.prototype.elementInViewport=function(e){for(this.top=e.offsetTop,this.left=e.offsetLeft,this.width=e.offsetWidth,this.height=e.offsetHeight;e.offsetParent;)e=e.offsetParent,this.top+=e.offsetTop,this.left+=e.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},t.prototype.getProcessedPositionValue=function(e){return this.queryPositionInfo?this.queryPositionInfo(e):e},t.prototype.calculateParentPosition=function(e){if(VM(e))return{left:0,top:0};var t=e.getBoundingClientRect(),n=getComputedStyle(e);return{left:t.left+window.pageXOffset-parseInt(n.marginLeft,10),top:t.top+window.pageYOffset-parseInt(n.marginTop,10)}},t.prototype.intDrag=function(e){if(BM(e.changedTouches)||1===e.changedTouches.length){var t,n;this.clone&&e.changedTouches&&xD.isDevice&&xD.isTouch&&e.preventDefault(),this.position=this.getMousePosition(e,this.isDragScroll);var r=this.getDocumentWidthHeight("Height");r<this.position.top&&(this.position.top=r);var i=this.getDocumentWidthHeight("Width");if(i<this.position.left&&(this.position.left=i),this.drag){var o=this.getProperTargetElement(e);this.trigger("drag",{event:e,element:this.element,target:o})}var s=this.checkTargetElement(e);if(s.target&&s.instance){var a=!0;this.hoverObject&&(this.hoverObject.instance!==s.instance?this.triggerOutFunction(e,s):a=!1),a&&(s.instance.dragData[this.scope]=this.droppables[this.scope],s.instance.intOver(e,s.target),this.hoverObject=s)}else this.hoverObject&&this.triggerOutFunction(e,s);var c=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var l=this.parentClientRect.left,d=this.parentClientRect.top,u=this.getCoordinates(e),h=u.pageX,p=u.pageY,f=this.position.left-this.diffX,m=this.position.top-this.diffY,g=getComputedStyle(c);if(this.dragArea){if(this.pageX!==h||this.skipDistanceCheck){var y=c.offsetWidth+(parseFloat(g.marginLeft)+parseFloat(g.marginRight));t=this.dragLimit.left>f&&f>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<f+y&&f>0?f-(f-this.dragLimit.right)+window.pageXOffset-y:f<0?this.dragLimit.left:f}if(this.pageY!==p||this.skipDistanceCheck){var v=c.offsetHeight+(parseFloat(g.marginTop)+parseFloat(g.marginBottom));n=this.dragLimit.top>m&&m>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<m+v&&m>0?m-(m-this.dragLimit.bottom)+window.pageYOffset-v:m<0?this.dragLimit.top:m}}else t=f,n=m;var _,E,S=d+this.borderWidth.top,T=l+this.borderWidth.left;this.dragProcessStarted&&(VM(n)&&(n=this.prevTop),VM(t)&&(t=this.prevLeft)),this.helperElement.classList.contains("e-treeview")?this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,_=n-S<0?this.dragLimit.top:n-this.borderWidth.top,E=t-T<0?this.dragLimit.left:t-this.borderWidth.left):(_=n-this.borderWidth.top,E=t-this.borderWidth.left):this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,_=n-S<0?this.dragLimit.top:n-S,E=t-T<0?this.dragElePosition.left:t-T):(_=n-S,E=t-T);var b=parseFloat(getComputedStyle(this.element).marginTop);if(b>0&&(this.clone&&(_+=b,m<0&&(b+m>=0?_=b+m:_-=b),_=this.dragLimit.bottom<_?this.dragLimit.bottom:_),n-S<0))if(m+b+(c.offsetHeight-S)>=0){var I=this.dragLimit.top+m-S;I+b+S<0?_-=b+S:_=I}else _-=b+S;if(this.dragArea&&this.helperElement.classList.contains("e-treeview"))_=_+(v=c.offsetHeight+(parseFloat(g.marginTop)+parseFloat(g.marginBottom)))>this.dragLimit.bottom?this.dragLimit.bottom-v:_;this.enableScrollHandler&&!this.clone&&(_-=this.parentScrollY,E-=this.parentScrollX),this.dragArea&&"string"!==typeof this.dragArea&&this.dragArea.classList.contains("e-kanban-content")&&"relative"===this.dragArea.style.position&&(_+=this.dragArea.scrollTop);var N=this.getProcessedPositionValue({top:_+"px",left:E+"px"});qD(c,this.getDragPosition(N)),this.elementInViewport(c)||!this.enableAutoScroll||this.helperElement.classList.contains("e-treeview")||this.helperElement.scrollIntoView();var C=document.querySelectorAll(":hover");if(this.enableAutoScroll&&this.helperElement.classList.contains("e-treeview")){0===C.length&&(C=this.getPathElements(e));var w=this.getScrollParent(C,!1);this.elementInViewport(this.helperElement)?this.getScrollPosition(w,_):this.elementInViewport(this.helperElement)||(0===(C=[].slice.call(document.querySelectorAll(":hover"))).length&&(C=this.getPathElements(e)),w=this.getScrollParent(C,!0),this.getScrollPosition(w,_))}this.dragProcessStarted=!0,this.prevLeft=t,this.prevTop=n,this.position.left=t,this.position.top=n,this.pageX=h,this.pageY=p}},t.prototype.getScrollParent=function(e,t){for(var n,r=t?e.reverse():e,i=r.length-1;i>=0;i--)if(("auto"===(n=window.getComputedStyle(r[parseInt(i.toString(),10)])["overflow-y"])||"scroll"===n)&&r[parseInt(i.toString(),10)].scrollHeight>r[parseInt(i.toString(),10)].clientHeight)return r[parseInt(i.toString(),10)];if("visible"===(n=window.getComputedStyle(document.scrollingElement)["overflow-y"]))return document.scrollingElement.style.overflow="auto",document.scrollingElement},t.prototype.getScrollPosition=function(e,t){e&&e===document.scrollingElement?e.clientHeight+document.scrollingElement.scrollTop-this.helperElement.clientHeight<t&&e.getBoundingClientRect().height+this.parentClientRect.top>t?e.scrollTop+=this.helperElement.clientHeight:e.scrollTop>t-this.helperElement.clientHeight&&(e.scrollTop-=this.helperElement.clientHeight):e&&e!==document.scrollingElement&&(e.clientHeight+e.getBoundingClientRect().top-this.helperElement.clientHeight+document.scrollingElement.scrollTop<t?e.scrollTop+=this.helperElement.clientHeight:e.getBoundingClientRect().top>t-this.helperElement.clientHeight-document.scrollingElement.scrollTop&&(e.scrollTop-=this.helperElement.clientHeight))},t.prototype.getPathElements=function(e){var t=e.clientX>0?e.clientX:0,n=e.clientY>0?e.clientY:0;return document.elementsFromPoint(t,n)},t.prototype.triggerOutFunction=function(e,t){this.hoverObject.instance.intOut(e,t.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null},t.prototype.getDragPosition=function(e){var t=zM({},e);return this.axis&&("x"===this.axis?delete t.top:"y"===this.axis&&delete t.left),t},t.prototype.getDocumentWidthHeight=function(e){var t=document.body,n=document.documentElement;return Math.max(t["scroll"+e],n["scroll"+e],t["offset"+e],n["offset"+e],n["client"+e])},t.prototype.intDragStop=function(e){if(this.dragProcessStarted=!1,BM(e.changedTouches)||1===e.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(e.type)){if(this.dragStop){var t=this.getProperTargetElement(e);this.trigger("dragStop",{event:e,element:this.element,target:t,helper:this.helperElement})}this.intDestroy(e)}else this.element.setAttribute("aria-grabbed","false");var n=this.checkTargetElement(e);n.target&&n.instance&&(n.instance.dragStopCalled=!0,n.instance.dragData[this.scope]=this.droppables[this.scope],n.instance.intDrop(e,n.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},t.prototype.intDestroy=function(e){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),LD.remove(document,xD.touchMoveEvent,this.intDragStart),LD.remove(document,xD.touchEndEvent,this.intDragStop),LD.remove(document,xD.touchEndEvent,this.intDestroy),LD.remove(document,xD.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"draggable"},t.prototype.isDragStarted=function(e){return e&&(Uk.isDragged=!Uk.isDragged),Uk.isDragged},t.prototype.setDragArea=function(){var e,t,n,r=0,i=0;if(n="string"===typeof this.dragArea?HD(this.dragArea):this.dragArea){var o=n.getBoundingClientRect();e=n.scrollWidth?n.scrollWidth:o.right-o.left,t=n.scrollHeight?this.dragArea&&!VM(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?n.clientHeight:n.scrollHeight:o.bottom-o.top;for(var s=["Top","Left","Bottom","Right"],a=getComputedStyle(n),c=0;c<s.length;c++){var l=s[parseInt(c.toString(),10)],d=a["border"+l+"Width"],u=a["padding"+l],h=l.toLowerCase();this.borderWidth[""+h]=isNaN(parseFloat(d))?0:parseFloat(d),this.padding[""+h]=isNaN(parseFloat(u))?0:parseFloat(u)}r=this.dragArea&&!VM(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?o.top+document.scrollingElement.scrollTop:o.top,i=o.left,this.dragLimit.left=i+this.borderWidth.left+this.padding.left,this.dragLimit.top=n.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=i+e-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=r+t-(this.borderWidth.bottom+this.padding.bottom)}},t.prototype.getProperTargetElement=function(e){var t,n=this.getCoordinates(e),r=this.helperElement.style.pointerEvents||"",i=-1!==e.type.indexOf("pointer")&&"safari"===xD.info.name&&parseInt(xD.info.version)>12;return GM(e.target,this.helperElement)||-1!==e.type.indexOf("touch")||i?(this.helperElement.style.pointerEvents="none",t=document.elementFromPoint(n.clientX,n.clientY),this.helperElement.style.pointerEvents=r):t=e.target,t},t.prototype.currentStateCheck=function(e,t){return VM(this.currentStateTarget)||this.currentStateTarget===e?VM(t)?e:t:this.currentStateTarget},t.prototype.getMousePosition=function(e,t){var n,r,i=void 0!==e.srcElement?e.srcElement:e.target,o=this.getCoordinates(e),s=VM(i.offsetParent);if(t?(n=this.clone?o.pageX:o.pageX+(s?0:i.offsetParent.scrollLeft)-this.relativeXPosition,r=this.clone?o.pageY:o.pageY+(s?0:i.offsetParent.scrollTop)-this.relativeYPosition):(n=this.clone?o.pageX:o.pageX+window.pageXOffset-this.relativeXPosition,r=this.clone?o.pageY:o.pageY+window.pageYOffset-this.relativeYPosition),this.element&&this.element.classList.length>0&&-1===this.element.classList.value.indexOf("e-dialog")&&document.scrollingElement){var a=document.scrollingElement.scrollHeight>0&&document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight&&document.scrollingElement.scrollTop>0;n=document.scrollingElement.scrollWidth>0&&document.scrollingElement.scrollWidth>document.scrollingElement.clientWidth&&document.scrollingElement.scrollLeft>0?n-document.scrollingElement.scrollLeft:n,r=a?r-document.scrollingElement.scrollTop:r}return{left:n-(this.margin.left+this.cursorAt.left),top:r-(this.margin.top+this.cursorAt.top)}},t.prototype.getCoordinates=function(e){return e.type.indexOf("touch")>-1?e.changedTouches[0]:e},t.prototype.getHelperElement=function(e){var t;return this.clone?this.helper?t=this.helper({sender:e,element:this.target}):(t=jD("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(t)):t=this.element,t},t.prototype.setGlobalDroppables=function(e,t,n){this.droppables[this.scope]=e?null:{draggable:t,helper:n,draggedElement:this.element}},t.prototype.checkTargetElement=function(e){var t=this.getProperTargetElement(e),n=this.getDropInstance(t);if(!n&&t&&!VM(t.parentNode)){var r=YD(t.parentNode,".e-droppable")||t.parentElement;r&&(n=this.getDropInstance(r))}return{target:t,instance:n}},t.prototype.getDropInstance=function(e){var t,n=e&&e.ej2_instances;if(n)for(var r=0,i=n;r<i.length;r++){var o=i[r];if("droppable"===o.getModuleName()){t=o;break}}return t},t.prototype.destroy=function(){this.toggleEvents(!0),e.prototype.destroy.call(this)},Pk([ck({},Fk)],t.prototype,"cursorAt",void 0),Pk([ak(!0)],t.prototype,"clone",void 0),Pk([ak()],t.prototype,"dragArea",void 0),Pk([ak()],t.prototype,"isDragScroll",void 0),Pk([ak()],t.prototype,"isReplaceDragEle",void 0),Pk([ak(!0)],t.prototype,"isPreventSelect",void 0),Pk([lk()],t.prototype,"drag",void 0),Pk([lk()],t.prototype,"dragStart",void 0),Pk([lk()],t.prototype,"dragStop",void 0),Pk([ak(1)],t.prototype,"distance",void 0),Pk([ak()],t.prototype,"handle",void 0),Pk([ak()],t.prototype,"abort",void 0),Pk([ak()],t.prototype,"helper",void 0),Pk([ak("default")],t.prototype,"scope",void 0),Pk([ak("")],t.prototype,"dragTarget",void 0),Pk([ak()],t.prototype,"axis",void 0),Pk([ak()],t.prototype,"queryPositionInfo",void 0),Pk([ak(!1)],t.prototype,"enableTailMode",void 0),Pk([ak(!1)],t.prototype,"skipDistanceCheck",void 0),Pk([ak(!0)],t.prototype,"preventDefault",void 0),Pk([ak(!1)],t.prototype,"enableAutoScroll",void 0),Pk([ak(!1)],t.prototype,"enableTapHold",void 0),Pk([ak(750)],t.prototype,"tapHoldThreshold",void 0),Pk([ak(!1)],t.prototype,"enableScrollHandler",void 0),t=n=Pk([dk],t)}(JD),Vk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bk=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Gk=(function(e){function t(t,n){var r=e.call(this,n,t)||this;return r.mouseOver=!1,r.dragData={},r.dragStopCalled=!1,r.bind(),r}Vk(t,e),t.prototype.bind=function(){this.wireEvents()},t.prototype.wireEvents=function(){LD.add(this.element,xD.touchEndEvent,this.intDrop,this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"droppable"},t.prototype.intOver=function(e,t){if(!this.mouseOver){var n=this.dragData[this.scope];this.trigger("over",{event:e,target:t,dragData:n}),this.mouseOver=!0}},t.prototype.intOut=function(e,t){this.mouseOver&&(this.trigger("out",{evt:e,target:t}),this.mouseOver=!1)},t.prototype.intDrop=function(e,t){if(this.dragStopCalled){this.dragStopCalled=!1;var n,r=!0,i=this.dragData[this.scope],o=!!i&&(i.helper&&VD(i.helper));o&&(n=this.isDropArea(e,i.helper,t),this.accept&&(r=KD(i.helper,this.accept))),o&&this.drop&&n.canDrop&&r&&this.trigger("drop",{event:e,target:n.target,droppedElement:i.helper,dragData:i}),this.mouseOver=!1}},t.prototype.isDropArea=function(e,t,n){var r={canDrop:!0,target:n||e.target},i="touchend"===e.type;if(i||r.target===t){t.style.display="none";var o=i?e.changedTouches[0]:e,s=document.elementFromPoint(o.clientX,o.clientY);r.canDrop=!1,r.canDrop=GM(s,this.element),r.canDrop&&(r.target=s),t.style.display=""}return r},t.prototype.destroy=function(){LD.remove(this.element,xD.touchEndEvent,this.intDrop),e.prototype.destroy.call(this)},Bk([ak()],t.prototype,"accept",void 0),Bk([ak("default")],t.prototype,"scope",void 0),Bk([lk()],t.prototype,"drop",void 0),Bk([lk()],t.prototype,"over",void 0),Bk([lk()],t.prototype,"out",void 0),t=Bk([dk],t)}(JD),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),Hk=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Wk={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},Yk=(function(e){function t(t,r){var i=e.call(this,r,t)||this;return i.keyPressHandler=function(e){for(var t=e.altKey,r=e.ctrlKey,o=e.shiftKey,s=e.which,a=0,c=Object.keys(i.keyConfigs);a<c.length;a++)for(var l=c[a],d=0,u=i.keyConfigs[""+l].split(",");d<u.length;d++){var h=u[d],p=n.getKeyConfigData(h.trim());t===p.altKey&&r===p.ctrlKey&&o===p.shiftKey&&s===p.keyCode&&(e.action=l,i.keyAction&&i.keyAction(e))}},i.bind(),i}var n;Gk(t,e),n=t,t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(e){if(e in this.configCache)return this.configCache[""+e];var t=e.toLowerCase().split("+"),r={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return t[t.length-1].length>1&&Number(t[t.length-1])?r.keyCode=Number(t[t.length-1]):r.keyCode=n.getKeyCode(t[t.length-1]),n.configCache[""+e]=r,r},t.getKeyCode=function(e){return Wk[""+e]||e.toUpperCase().charCodeAt(0)},t.configCache={},Hk([ak({})],t.prototype,"keyConfigs",void 0),Hk([ak("keyup")],t.prototype,"eventName",void 0),Hk([lk()],t.prototype,"keyAction",void 0),t=n=Hk([dk],t)}(JD),function(){function e(e,t,n){this.controlName=e,this.localeStrings=t,this.setLocale(n||ED)}e.prototype.setLocale=function(t){var n=this.intGetControlConstant(e.locale,t);this.currentLocale=n||this.localeStrings},e.load=function(e){this.locale=zM(this.locale,e,{},!0)},e.prototype.getConstant=function(e){return VM(this.currentLocale[""+e])?this.localeStrings[""+e]||"":this.currentLocale[""+e]},e.prototype.intGetControlConstant=function(e,t){return e[""+t]?e[""+t][this.controlName]:null},e.locale={}}(),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),qk=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Kk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yk(t,e),qk([ak(50)],t.prototype,"swipeThresholdDistance",void 0),t}(vk),Qk=/(Up|Down)/,Jk=(function(e){function t(t,n){var r=e.call(this,n,t)||this;return r.touchAction=!0,r.tapCount=0,r.startEvent=function(e){if(!0===r.touchAction){var t=r.updateChangeTouches(e);void 0!==e.changedTouches&&(r.touchAction=!1),r.isTouchMoved=!1,r.movedDirection="",r.startPoint=r.lastMovedPoint={clientX:t.clientX,clientY:t.clientY},r.startEventData=t,r.hScrollLocked=r.vScrollLocked=!1,r.tStampStart=Date.now(),r.timeOutTapHold=setTimeout((function(){r.tapHoldEvent(e)}),r.tapHoldThreshold),LD.add(r.element,xD.touchMoveEvent,r.moveEvent,r),LD.add(r.element,xD.touchEndEvent,r.endEvent,r),LD.add(r.element,xD.touchCancelEvent,r.cancelEvent,r)}},r.moveEvent=function(e){var t=r.updateChangeTouches(e);r.movedPoint=t,r.isTouchMoved=!(t.clientX===r.startPoint.clientX&&t.clientY===r.startPoint.clientY);var n={};r.isTouchMoved&&(clearTimeout(r.timeOutTapHold),r.calcScrollPoints(e),n=zM(n,{},{startEvents:r.startEventData,originalEvent:e,startX:r.startPoint.clientX,startY:r.startPoint.clientY,distanceX:r.distanceX,distanceY:r.distanceY,scrollDirection:r.scrollDirection,velocity:r.getVelocity(t)}),r.trigger("scroll",n),r.lastMovedPoint={clientX:t.clientX,clientY:t.clientY})},r.cancelEvent=function(e){clearTimeout(r.timeOutTapHold),clearTimeout(r.timeOutTap),r.tapCount=0,r.swipeFn(e),LD.remove(r.element,xD.touchCancelEvent,r.cancelEvent)},r.endEvent=function(e){r.swipeFn(e),r.isTouchMoved||"function"===typeof r.tap&&(r.trigger("tap",{originalEvent:e,tapCount:++r.tapCount}),r.timeOutTap=setTimeout((function(){r.tapCount=0}),r.tapThreshold)),r.modeclear()},r.swipeFn=function(e){clearTimeout(r.timeOutTapHold),clearTimeout(r.timeOutTap);var t=r.updateChangeTouches(e),n=t.clientX-r.startPoint.clientX,i=t.clientY-r.startPoint.clientY;n=Math.floor(n<0?-1*n:n),i=Math.floor(i<0?-1*i:n),r.isTouchMoved=n>1||i>1,/Firefox/.test(xD.userAgent)&&0===t.clientX&&0===t.clientY&&"mouseup"===e.type&&(r.isTouchMoved=!1),r.endPoint=t,r.calcPoints(e);var o={originalEvent:e,startEvents:r.startEventData,startX:r.startPoint.clientX,startY:r.startPoint.clientY,distanceX:r.distanceX,distanceY:r.distanceY,swipeDirection:r.movedDirection,velocity:r.getVelocity(t)};if(r.isTouchMoved){var s=void 0,a=r.swipeSettings.swipeThresholdDistance;s=zM(s,r.defaultArgs,o);var c=!1,l=r.element,d=r.isScrollable(l),u=Qk.test(r.movedDirection);(a<r.distanceX&&!u||a<r.distanceY&&u)&&(c=!d||r.checkSwipe(l,u)),c&&r.trigger("swipe",s)}r.modeclear()},r.modeclear=function(){r.modeClear=setTimeout((function(){r.touchAction=!0}),"function"!==typeof r.tap?0:20),r.lastTapTime=(new Date).getTime(),LD.remove(r.element,xD.touchMoveEvent,r.moveEvent),LD.remove(r.element,xD.touchEndEvent,r.endEvent),LD.remove(r.element,xD.touchCancelEvent,r.cancelEvent)},r.bind(),r}Yk(t,e),t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents(),xD.isIE&&this.element.classList.add("e-block-touch")},t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.wireEvents=function(){LD.add(this.element,xD.touchStartEvent,this.startEvent,this)},t.prototype.unwireEvents=function(){LD.remove(this.element,xD.touchStartEvent,this.startEvent)},t.prototype.getModuleName=function(){return"touch"},t.prototype.isScrollable=function(e){var t=getComputedStyle(e),n=t.overflow+t.overflowX+t.overflowY;return!!/(auto|scroll)/.test(n)},t.prototype.tapHoldEvent=function(e){var t;this.tapCount=0,this.touchAction=!0,LD.remove(this.element,xD.touchMoveEvent,this.moveEvent),LD.remove(this.element,xD.touchEndEvent,this.endEvent),t={originalEvent:e},this.trigger("tapHold",t),LD.remove(this.element,xD.touchCancelEvent,this.cancelEvent)},t.prototype.calcPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.startPoint.clientY)),this.distanceX>this.distanceY?this.movedDirection=t.clientX>this.startPoint.clientX?"Right":"Left":this.movedDirection=t.clientY<this.startPoint.clientY?"Up":"Down"},t.prototype.calcScrollPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=t.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=t.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},t.prototype.getVelocity=function(e){var t=e.clientX,n=e.clientY,r=Date.now(),i=t-this.startPoint.clientX,o=n-this.startPoint.clientX,s=r-this.tStampStart;return Math.sqrt(i*i+o*o)/s},t.prototype.checkSwipe=function(e,t){var n=["scroll","offset"],r=t?["Height","Top"]:["Width","Left"];return e[n[0]+r[0]]<=e[n[1]+r[0]]||(0===e[n[0]+r[1]]||e[n[1]+r[0]]+e[n[0]+r[1]]>=e[n[0]+r[0]])},t.prototype.updateChangeTouches=function(e){return e.changedTouches&&0!==e.changedTouches.length?e.changedTouches[0]:e},qk([lk()],t.prototype,"tap",void 0),qk([lk()],t.prototype,"tapHold",void 0),qk([lk()],t.prototype,"swipe",void 0),qk([lk()],t.prototype,"scroll",void 0),qk([ak(350)],t.prototype,"tapThreshold",void 0),qk([ak(750)],t.prototype,"tapHoldThreshold",void 0),qk([ck({},Kk)],t.prototype,"swipeSettings",void 0),t=qk([dk],t)}(JD),new RegExp("\\n|\\r|\\s\\s+","g")),Xk=new RegExp(/'|"/g),Zk=new RegExp("if ?\\("),$k=new RegExp("else if ?\\("),ex=new RegExp("else"),tx=new RegExp("for ?\\("),nx=new RegExp("(/if|/for)"),rx=new RegExp("\\((.*)\\)",""),ix=new RegExp("^[0-9]+$","g"),ox=new RegExp("[\\w\"'.\\s+]+","g"),sx=new RegExp('"(.*?)"',"g"),ax=new RegExp("[\\w\"'@#$.\\s-+]+","g"),cx=new RegExp("\\${([^}]*)}","g"),lx=/^\..*/gm,dx=/\\/gi,ux=/\\\\/gi,hx=new RegExp("[\\w\"'@#$.\\s+]+","g"),px=/\window\./gm;function fx(e,t,n){var r="data",i=function(e,t,n,r){var i=0,o=[],s=e.match(/class="([^"]+|)\s{2}/g),a="";s&&s.forEach((function(t){a=t.replace(/\s\s+/g," "),e=e.replace(t,a)}));return e.replace(Jk,"").replace(sx,"'$1'").replace(cx,(function(e,s,a,c){var l=/@|#|\$/gm,d=s.match(rx);if(d){var u=d[1];if($k.test(s))s='";} '+s.replace(d[1],u.replace(ox,(function(e){return mx(e=e.trim(),!Xk.test(e)&&-1===o.indexOf(e),t,o,r)})))+'{ \n str = str + "';else if(Zk.test(s))s='"; '+s.replace(d[1],u.replace(ax,(function(e){return vx(e,t,o,r)})))+'{ \n str = str + "';else if(tx.test(s)){var h=d[1].split(" of ");s='"; '+s.replace(d[1],(function(e){return o.push(h[0]),o.push(h[0]+"Index"),"var i"+(i+=1)+"=0; i"+i+" < "+mx(h[1],!0,t,o,r)+".length; i"+i+"++"}))+"{ \n "+h[0]+"= "+mx(h[1],!0,t,o,r)+"[i"+i+"]; \n var "+h[0]+"Index=i"+i+'; \n str = str + "'}else{var p=s.split("("),f=n&&n.hasOwnProperty(p[0])?"this.":"global";f=/\./.test(p[0])?"":f;var m=d[1].split(",");0===d[1].length||/data/.test(m[0])||/window./.test(m[0])||(d[1]="global"===f?t+"."+d[1]:d[1]);var g=/@|\$|#/gm,y=/\]\./gm;if(px.test(s)&&y.test(s)||g.test(s))/@|\$|#|\]\./gm.test(s)&&(s='"+ '+("global"===f?"":f)+s.replace(d[1],u.replace(hx,(function(e){return vx(e,t,o,r)})))+'+ "');else s='" + '+("global"===f?"":f)+s.replace(u,mx(d[1].replace(/,( |)data.|,/gi,","+t+".").replace(/,( |)data.window/gi,",window"),"global"!==f,t,o,r))+'+"'}}else ex.test(s)?s='"; '+s.replace(ex,'} else { \n str = str + "'):s.match(nx)?s=s.replace(nx,'"; \n } \n str = str + "'):l.test(s)?(s.match(dx)&&(s=yx(s)),s='"+'+gx(s,-1===o.indexOf(s),t,o)+'"]+"'):s=s.match(dx)?'"+'+gx(s=yx(s),-1===o.indexOf(s),t,o)+'"]+"':""!==s?'"+'+mx(s.replace(/,/gi,"+"+t+"."),-1===o.indexOf(s),t,o,r)+'+"':" ";return s}))}(e,r,t,n);return new Function(r,'var str="'+i+"\";var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-\u25a0\\s]+)['])/g);\n    var hrefRegex = (/(?:href)([\\s='\"./]+)([\\w-./?=&\\\\#\"]+)((.)([\\w)(!-;/?-\u25a0\\s]+)['])/g);\n    if(str.match(valueRegEx)){\n        var check = str.match(valueRegEx);\n        var str1 = str;\n        for (var i=0; i < check.length; i++) {\n            var check1 = str.match(valueRegEx)[i].split('value=')[1];\n            var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n            change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n            str1 = str1.replace(check1, change);\n        }\n        str = str.replace(str, str1);\n    }\n    else if (str.match(/(?:href='')/) === null) {\n        if(str.match(hrefRegex)) {\n            var check = str.match(hrefRegex);\n            var str1 = str;\n            for (var i=0; i < check.length; i++) {\n                var check1 = str.match(hrefRegex)[i].split('href=')[1];\n                if (check1) {\n                    var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                    change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                    str1 = str1.replace(check1, change);\n                }\n            }\n            str = str.replace(str, str1);\n        }\n    }\n     return str;").bind(t)}function mx(e,t,n,r,i){return!t||ix.test(e)||-1!==r.indexOf(e.split(".")[0])||i?e:n+"."+e}function gx(e,t,n,r){return t&&!ix.test(e)&&-1===r.indexOf(e.split(".")[0])?n+'["'+e:e}function yx(e){return e.match(ux)||(e=e.replace(dx,"\\\\")),e}function vx(e,t,n,r){e=e.trim();if(/\window\./gm.test(e))return e;var i=/'|"/gm;return/@|\$|#/gm.test(e)&&(e=gx(e,-1===n.indexOf(e),t,n)+'"]'),lx.test(e)?function(e,t,n,r){return!t||ix.test(e)||-1!==r.indexOf(e.split(".")[0])||/^\..*/gm.test(e)?e:n+"."+e}(e,!i.test(e)&&-1===n.indexOf(e),t,n):mx(e,!i.test(e)&&-1===n.indexOf(e),t,n,r)}var _x=/^[\n\r.]+<tr|^<tr/,Ex=/^[\n\r.]+<svg|^<path|^<g/,Sx={};function Tx(e,t,n){var r=bx.compile(e,t,n);return function(e,t,n,i,o,s,a,c){var l=r(e,t,n,a,c),d="BlazorTemplateId";if(YM()&&!o){var u=i+("-"+Math.random().toString(36).substr(2,5));if(Sx[""+i]||(Sx[""+i]=[]),VM(s))e[""+d]=u,Sx[""+i].push(e);else for(var h=0,p=Object.keys(Sx[""+i][parseInt(s.toString(),10)]);h<p.length;h++){var f=p[h];f!==d&&e[""+f]&&(Sx[""+i][parseInt(s.toString(),10)][""+f]=e[""+f]),f===d&&(u=Sx[""+i][parseInt(s.toString(),10)][""+f])}return"rowTemplate"===n?[jD("tr",{id:u,className:"e-blazor-template"})]:[jD("div",{id:u,className:"e-blazor-template"})]}return"string"===typeof l?Ex.test(l)?jD("svg",{innerHTML:l}).childNodes:jD(_x.test(l)?"table":"div",{innerHTML:l}).childNodes:l}}var bx={compile:(new(function(){function e(){}return e.prototype.compile=function(e,t,n){return void 0===t&&(t={}),fx(e,t)},e}())).compile},Ix=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],Nx=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],Cx=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"],wx=function(){function e(){}return e.beforeSanitize=function(){return{selectors:{tags:Ix,attributes:Nx}}},e.sanitize=function(e){var t=this.beforeSanitize();return this.serializeValue(t,e)},e.serializeValue=function(e,t){this.removeAttrs=e.selectors.attributes,this.removeTags=e.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=t,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var n=this.wrapElement.innerHTML;return this.removeElement(),n.replace("&amp;","&")},e.removeElement=function(){for(var e=this.wrapElement.children,t=0;t<e.length;t++)for(var n=e[parseInt(t.toString(),10)].attributes,r=0;r<n.length;r++)this.wrapElement.children[parseInt(t.toString(),10)].removeAttribute(n[parseInt(r.toString(),10)].localName)},e.removeXssTags=function(){var e=this.wrapElement.querySelectorAll(this.removeTags.join(","));e.length>0&&e.forEach((function(e){GD(e)}))},e.removeJsEvents=function(){var e=this.wrapElement.querySelectorAll("["+Cx.join("],[")+"]");e.length>0&&e.forEach((function(e){Cx.forEach((function(t){e.hasAttribute(t)&&e.removeAttribute(t)}))}))},e.removeXssAttrs=function(){var e=this;this.removeAttrs.forEach((function(t,n){var r=e.wrapElement.querySelectorAll(t.selector);r.length>0&&r.forEach((function(e){e.removeAttribute(t.attribute)}))}))},e}(),Rx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ax=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Ox="e-prevent",Mx="e-dragging",Dx="e-drag",kx="e-responsive",xx="e-panel-content",Lx="e-panel-container",Px="e-panel-header",jx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Rx(t,e),Ax([ak("")],t.prototype,"id",void 0),Ax([ak("")],t.prototype,"cssClass",void 0),Ax([ak("")],t.prototype,"header",void 0),Ax([ak("")],t.prototype,"content",void 0),Ax([ak(!0)],t.prototype,"enabled",void 0),Ax([ak(0)],t.prototype,"row",void 0),Ax([ak(0)],t.prototype,"col",void 0),Ax([ak(1)],t.prototype,"sizeX",void 0),Ax([ak(1)],t.prototype,"sizeY",void 0),Ax([ak(1)],t.prototype,"minSizeY",void 0),Ax([ak(1)],t.prototype,"minSizeX",void 0),Ax([ak(null)],t.prototype,"maxSizeY",void 0),Ax([ak(null)],t.prototype,"maxSizeX",void 0),Ax([ak(1e3)],t.prototype,"zIndex",void 0),t}(vk),Ux=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.rows=1,r.panelID=0,r.movePanelCalled=!1,r.resizeCalled=!1,r.mOffX=0,r.mOffY=0,r.maxTop=9999,r.maxRows=100,r.mouseX=0,r.mouseY=0,r.minTop=0,r.minLeft=0,r.isInlineRendering=!1,r.removeAllCalled=!1,r.isPanelRemoved=!1,r.panelsSizeY=0,r.resizeHeight=!1,r.eventVar=!1,PM("mergePersistData",r.mergePersistPanelData,r),r}var n,r;return Rx(t,e),t.prototype.preRender=function(){this.panelCollection=[],this.sortedArray=[],this.gridPanelCollection=[],this.overlapElement=[],this.overlapElementClone=[],this.overlapSubElementClone=[],this.collisionChecker={},this.dragCollection=[],this.elementRef={top:"",left:"",height:"",width:""},this.dimensions=[],this.allItems=[],this.oldRowCol={},this.availableClasses=[],this.setOldRowCol(),this.calculateCellSize(),this.contentTemplateChild=[].slice.call(this.element.children)},t.prototype.setOldRowCol=function(){for(var e=0;e<this.panels.length;e++)this.panels[e].id||(this.panelPropertyChange(this.panels[e],{id:"layout_"+this.panelID.toString()}),this.panelID=this.panelID+1),this.oldRowCol[this.panels[e].id]={row:this.panels[e].row,col:this.panels[e].col}},t.prototype.createPanelElement=function(e,t){var n=this.createElement("div");return e&&e.length>0&&UD([n],e),t&&n.setAttribute("id",t),n},t.prototype.render=function(){this.initialize(),this.isRenderComplete=!0,this.showGridLines&&!this.checkMediaQuery()&&this.initGridLines(),this.updateDragArea(),this.renderComplete(),this.renderReactTemplates()},t.prototype.initGridLines=function(){this.table=document.createElement("table");var e=document.createElement("tbody");this.table.classList.add("e-dashboard-gridline-table");for(var t=0;t<this.maxRow();t++){for(var n=document.createElement("tr"),r=0;r<this.columns;r++){var i=document.createElement("td");i.classList.add("e-dashboard-gridline"),this.setAttributes({value:{row:t.toString(),col:r.toString(),sizeX:"1",sizeY:"1"}},i),this.setPanelPosition(i,t,r),this.setHeightAndWidth(i,{row:t,col:r,sizeX:1,sizeY:1}),n.appendChild(i)}e.appendChild(n)}this.table.appendChild(e),this.element.appendChild(this.table),this.renderReactTemplates()},t.prototype.initialize=function(){if(this.updateRowHeight(),this.element.childElementCount>0&&this.element.querySelectorAll(".e-panel").length>0){var e=[];this.setProperties({panels:[]},!0),this.isInlineRendering=!0;for(var t=0;t<this.element.querySelectorAll(".e-panel").length;t++)e.push(this.element.querySelectorAll(".e-panel")[t]);for(t=0;t<e.length;t++){var n=e[t];this.enableRtl&&UD([n],"e-rtl"),this.getInlinePanels(n),this.maxCol(),this.maxRow()}for(t=0;t<this.panels.length;t++){n=this.element.querySelector("#"+this.panels[t].id);if(this.setMinMaxValues(this.panels[t]),this.maxColumnValue<this.panels[t].col||this.maxColumnValue<this.panels[t].col+this.panels[t].sizeX){var r=this.maxColumnValue-this.panels[t].sizeX;this.panelPropertyChange(this.panels[t],{col:r<0?0:r})}this.setXYAttributes(n,this.panels[t]);var i=this.renderPanels(n,this.panels[t],this.panels[t].id,!1);this.panelCollection.push(i),this.setHeightAndWidth(n,this.panels[t]),this.tempObject=this,this.mediaQuery&&!window.matchMedia("("+this.mediaQuery+")").matches&&(this.setPanelPosition(n,this.panels[t].row,this.panels[t].col),this.mainElement=n,this.updatePanelLayout(n,this.panels[t]),this.mainElement=null),this.setClasses([n])}this.updateOldRowColumn(),this.checkMediaQuery()&&this.checkMediaQuerySizing()}else this.renderDashBoardCells(this.panels);!this.allowDragging||this.mediaQuery&&window.matchMedia("("+this.mediaQuery+")").matches||this.enableDraggingContent(this.panelCollection),this.sortedPanel(),this.bindEvents(),this.updatePanels(),this.updateCloneArrayObject(),this.checkColumnValue=this.maxColumnValue,this.checkMediaQuery()||this.panelResponsiveUpdate(),this.setEnableRtl()},t.prototype.checkMediaQuery=function(){return this.mediaQuery&&window.matchMedia("("+this.mediaQuery+")").matches},t.prototype.calculateCellSize=function(){this.cellSize=[],this.checkMediaQuery()?this.cellSize[1]=this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio:(this.cellSize[0]=this.element.parentElement&&this.element.parentElement.offsetWidth,this.cellSize[0]=this.element.parentElement&&(this.element.parentElement.offsetWidth-(this.maxCol()-1)*this.cellSpacing[0])/this.maxCol(),this.cellSize[1]=this.cellSize[0]/this.cellAspectRatio)},t.prototype.maxRow=function(e){var t=1;if(this.rows>1&&VM(e))return t=this.rows;for(var n=0;n<this.panels.length;n++)this.panels[n].sizeY+this.panels[n].row>t&&(t=this.panels[n].sizeY+this.panels[n].row);return 0===this.panels.length&&(t=this.columns),t},t.prototype.maxCol=function(){var e;return e=this.columns,this.maxColumnValue=e,e},t.prototype.updateOldRowColumn=function(){for(var e=0;e<this.panels.length;e++){var t=this.panels[e].id;if(document.getElementById(t)){var n=parseInt(document.getElementById(t).getAttribute("data-row"),10),r=parseInt(document.getElementById(t).getAttribute("data-col"),10);this.oldRowCol[this.panels[e].id]={row:n,col:r}}}},t.prototype.createSubElement=function(e,t,n){var r=this.createElement("div");return n&&UD([r],[n]),e&&e.length>0&&UD([r],e),t&&r.setAttribute("id",t),r},t.prototype.templateParser=function(e){if(e)try{return document.querySelectorAll(e).length?Tx(document.querySelector(e).innerHTML.trim()):Tx(e)}catch(Sv){var t=wx.sanitize(e);return Tx(this.enableHtmlSanitizer&&"string"===typeof e?t:e)}},t.prototype.renderTemplate=function(e,t,n,r,i){var o=this.templateParser(e),s=[];if("."!==e[0]&&"#"!==e[0]||"SCRIPT"===document.querySelector(e).tagName){var a=o({},this,i,n,r,null,t);if(a){for(var c=0,l=a;c<l.length;c++){var d=l[c];s.push(d)}!function(e,t,n){for(var r=document.createDocumentFragment(),i=0,o=e;i<o.length;i++){var s=o[i];r.appendChild(s)}t.appendChild(r),n&&BD(t)}([].slice.call(s),t)}}else{var u=document.querySelector(e);if(!VM(u))return"none"===u.style.display&&u.style.removeProperty("display"),""===u.getAttribute("style")&&u.removeAttribute("style"),void t.appendChild(u);e=e.trim()}},t.prototype.renderPanels=function(e,t,n,r){UD([e],["e-panel","e-panel-transition"]);var i=t.cssClass?t.cssClass.split(" "):null;if(this.panelContent=e.querySelector(".e-panel-container")?e.querySelector(".e-panel-container"):this.createSubElement(i,e.id+"_content",Lx),e.appendChild(this.panelContent),t.enabled||this.disablePanel(e),t.header){var o=e.querySelector(".e-panel-header")?e.querySelector(".e-panel-header"):this.createSubElement([],e.id+"template","");if(UD([o],[Px]),!e.querySelector(".e-panel-header")){var s=this.element.id+"HeaderTemplate"+n;this.renderTemplate(t.header,o,s,r,"header"),this.panelContent.appendChild(o),this.renderReactTemplates()}}if(t.content){var a=t.cssClass?t.cssClass.split(" "):null;this.panelBody=e.querySelector(".e-panel-content")?e.querySelector(".e-panel-content"):this.createSubElement(a,e.id+"_body",xx);var c="calc( 100% - "+(this.panelContent.querySelector(".e-panel-header")?window.getComputedStyle(this.panelContent.querySelector(".e-panel-header")).height:"0px")+")";if(qD(this.panelBody,{height:c}),!e.querySelector(".e-panel-content")){s=this.element.id+"ContentTemplate"+n;this.renderTemplate(t.content,this.panelBody,s,r,"content"),this.panelContent.appendChild(this.panelBody),this.renderReactTemplates()}}return e},t.prototype.disablePanel=function(e){UD([e],["e-disabled"])},t.prototype.getInlinePanels=function(e){var t={sizeX:e.hasAttribute("data-sizex")?parseInt(e.getAttribute("data-sizex"),10):1,sizeY:e.hasAttribute("data-sizey")?parseInt(e.getAttribute("data-sizey"),10):1,minSizeX:e.hasAttribute("data-minsizex")?parseInt(e.getAttribute("data-minsizex"),10):1,minSizeY:e.hasAttribute("data-minsizey")?parseInt(e.getAttribute("data-minsizey"),10):1,maxSizeX:e.hasAttribute("data-maxsizex")?parseInt(e.getAttribute("data-maxsizex"),10):null,maxSizeY:e.hasAttribute("data-maxsizey")?parseInt(e.getAttribute("data-maxsizey"),10):null,row:e.hasAttribute("data-row")?parseInt(e.getAttribute("data-row"),10):0,col:e.hasAttribute("data-col")?parseInt(e.getAttribute("data-col"),10):0,id:e.getAttribute("id"),zIndex:e.hasAttribute("data-zindex")?parseInt(e.getAttribute("data-zIndex"),10):1e3,header:e.querySelector(".e-panel-header")&&".e-panel-header",content:e.querySelector(".e-panel-content")&&".e-panel-content"};t.id||(t.id="layout_"+this.panelID.toString(),e.setAttribute("id",t.id),this.panelID=this.panelID+1),BM(t.enabled)&&(t.enabled=!0),e.style.zIndex=""+t.zIndex;var n=new jx(this,"panels",t,!0);this.panels.push(n)},t.prototype.resizeEvents=function(){if(this.allowResizing)for(var e=this.element.querySelectorAll(".e-panel .e-panel-container .e-resize"),t=0;t<e.length;t++){var n="msie"===xD.info.name?"mousedown pointerdown":"mousedown";LD.add(e[t],n,this.downResizeHandler,this),"msie"!==xD.info.name&&LD.add(e[t],"touchstart",this.touchDownResizeHandler,this)}},t.prototype.bindEvents=function(){this.refreshListener=this.refresh.bind(this),LD.add(window,"resize",this.refreshListener),this.resizeEvents()},t.prototype.downResizeHandler=function(e){this.downHandler(e),this.lastMouseX=e.pageX,this.lastMouseY=e.pageY;var t="msie"===xD.info.name?"mousemove pointermove":"mousemove",n="msie"===xD.info.name?"mouseup pointerup":"mouseup";this.isMouseMoveBound||(LD.add(document,t,this.moveResizeHandler,this),this.isMouseMoveBound=!0),this.isMouseUpBound||(LD.add(document,n,this.upResizeHandler,this),this.isMouseUpBound=!0)},t.prototype.downHandler=function(e){this.resizeCalled=!1,this.panelsInitialModel=this.cloneModels(this.panels);var t=YD(e.currentTarget,".e-panel"),n={event:e,element:t,isInteracted:!0};this.trigger("resizeStart",n),this.downTarget=e.currentTarget,this.shadowEle=document.createElement("div"),this.shadowEle.classList.add("e-holder"),UD([this.element],[Ox]),this.element.appendChild(this.shadowEle),this.renderReactTemplates(),this.elementX=parseFloat(t.style.left),this.elementY=parseFloat(t.style.top),this.elementWidth=t.offsetWidth,this.elementHeight=t.offsetHeight,this.originalWidth=this.getCellInstance(t.id).sizeX,this.originalHeight=this.getCellInstance(t.id).sizeY,this.previousRow=this.getCellInstance(t.id).row},t.prototype.touchDownResizeHandler=function(e){this.downHandler(e),this.lastMouseX=e.changedTouches[0].pageX,this.lastMouseY=e.changedTouches[0].pageY,this.isMouseMoveBound||(LD.add(document,"touchmove",this.touchMoveResizeHandler,this),this.isMouseMoveBound=!0),this.isMouseUpBound||(LD.add(document,"touchend",this.upResizeHandler,this),this.isMouseUpBound=!0)},t.prototype.getCellSize=function(){return[this.cellSize[0],this.cellSize[1]]},t.prototype.updateMaxTopLeft=function(e){this.moveTarget=this.downTarget;var t={event:e,element:YD(this.moveTarget,".e-panel"),isInteracted:!0};this.trigger("resize",t)},t.prototype.updateResizeElement=function(e){this.maxLeft=this.element.offsetWidth-1,this.maxTop=this.cellSize[1]*this.maxRows-1,FD([e],"e-panel-transition"),UD([e],[Mx]);for(var t=["e-east","e-west","e-north","e-south","e-south-east","e-north-east","e-north-west","e-south-west"],n=0;n<this.moveTarget.classList.length;n++)-1!==t.indexOf(this.moveTarget.classList[n])&&(this.handleClass=this.moveTarget.classList[n])},t.prototype.moveResizeHandler=function(e){this.updateMaxTopLeft(e);var t=YD(this.moveTarget,".e-panel");if(this.lastMouseX!==e.pageX&&this.lastMouseY!==e.pageY){this.updateResizeElement(t);var n=this.getCellInstance(t.getAttribute("id"));this.mouseX=e.pageX,this.mouseY=e.pageY;var r=this.mouseY-this.lastMouseY+this.mOffY,i=this.mouseX-this.lastMouseX+this.mOffX;this.mOffX=this.mOffY=0,this.lastMouseY=this.mouseY,this.lastMouseX=this.mouseX,this.resizingPanel(t,n,i,r)}},t.prototype.touchMoveResizeHandler=function(e){this.updateMaxTopLeft(e);var t=YD(this.moveTarget,".e-panel");if(this.lastMouseX!==e.changedTouches[0].pageX&&this.lastMouseY!==e.changedTouches[0].pageY){this.updateResizeElement(t);var n=this.getCellInstance(t.getAttribute("id"));this.mouseX=e.changedTouches[0].pageX,this.mouseY=e.changedTouches[0].pageY;var r=this.mouseX-this.lastMouseX+this.mOffX,i=this.mouseY-this.lastMouseY+this.mOffY;this.mOffX=this.mOffY=0,this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,this.resizingPanel(t,n,r,i)}},t.prototype.resizingPanel=function(e,t,n,r){var i=this.getCellInstance(e.id).sizeX,o=this.getCellInstance(e.id).sizeY,s=r,a=n;if(this.handleClass.indexOf("north")>=0&&(this.elementHeight-s<this.getMinHeight(t)?(r=this.elementHeight-this.getMinHeight(t),this.mOffY=s-r):t.maxSizeY&&this.elementHeight-s>this.getMaxHeight(t)?(r=this.elementHeight-this.getMaxHeight(t),this.mOffY=s-r):this.elementY+s<this.minTop&&(r=this.minTop-this.elementY,this.mOffY=s-r),this.elementY+=r,this.elementHeight-=r),this.handleClass.indexOf("south")>=0&&(this.elementHeight+s<this.getMinHeight(t)?(r=this.getMinHeight(t)-this.elementHeight,this.mOffY=s-r):t.maxSizeY&&this.elementHeight+s>this.getMaxHeight(t)&&(r=this.getMaxHeight(t)-this.elementHeight,this.mOffY=s-r),this.elementHeight+=r),this.handleClass.indexOf("west")>=0&&(this.elementWidth-a<this.getMinWidth(t)?(n=this.elementWidth-this.getMinWidth(t),this.mOffX=a-n):t.maxSizeX&&this.elementWidth-a>this.getMaxWidth(t)?(n=this.elementWidth-this.getMaxWidth(t),this.mOffX=a-n):this.elementX+a<this.minLeft&&(n=this.minLeft-this.elementX,this.mOffX=a-n),this.elementX+=n,this.elementWidth-=n),this.handleClass.indexOf("east")>=0){this.elementWidth+a<this.getMinWidth(t)?(n=this.getMinWidth(t)-this.elementWidth,this.mOffX=a-n):t.maxSizeX&&this.elementWidth+a>this.getMaxWidth(t)&&(n=this.getMaxWidth(t)-this.elementWidth,this.mOffX=a-n);var c=this.elementWidth;this.elementWidth+=n;var l=this.pixelsToColumns(this.elementWidth-t.sizeX*this.cellSpacing[1],!0);this.columns<t.col+l&&(this.elementWidth=c)}e.style.top=this.elementY+"px",e.style.left=this.elementX+"px",e.style.width=this.elementWidth+"px",e.style.height=this.elementHeight+"px";var d=this.getResizeRowColumn(t);if(d.col+d.sizeX>this.columns&&this.panelPropertyChange(d,{sizeX:d.sizeX-1}),this.shadowEle.style.top=d.row*this.getCellSize()[1]+d.row*this.cellSpacing[1]+"px",this.shadowEle.style.left=d.col*this.getCellSize()[0]+d.col*this.cellSpacing[0]+"px",this.shadowEle.style.height=d.sizeY*(this.getCellSize()[1]+this.cellSpacing[1])+"px",this.shadowEle.style.width=d.sizeX*(this.getCellSize()[0]+this.cellSpacing[0])+"px",i!==d.sizeX||o!==d.sizeY){i=d.sizeX,o=d.sizeY;var u=this.getCellInstance(e.id),h={attributes:{row:u.row.toString(),col:u.col.toString(),sizeX:u.sizeX.toString(),sizeY:u.sizeY.toString()}};this.setAttributes(h,e),this.mainElement=e,this.updatePanelLayout(e,this.getCellInstance(e.id)),this.updateOldRowColumn(),this.sortedPanel()}},t.prototype.upResizeHandler=function(e){if(!VM(this.downTarget)){this.upTarget=this.downTarget;var t=YD(this.upTarget,".e-panel"),n={event:e,element:t,isInteracted:!0};if(t){UD([t],"e-panel-transition");var r="msie"===xD.info.name?"mousemove pointermove":"mousemove",i="msie"===xD.info.name?"mouseup pointerup":"mouseup";LD.remove(document,r,this.moveResizeHandler),LD.remove(document,i,this.upResizeHandler),"msie"!==xD.info.name&&(LD.remove(document,"touchmove",this.touchMoveResizeHandler),LD.remove(document,"touchend",this.upResizeHandler)),this.isMouseUpBound=!1,this.isMouseMoveBound=!1,this.shadowEle&&GD(this.shadowEle),this.shadowEle=null;var o=this.getCellInstance(t.getAttribute("id"));this.setPanelPosition(t,o.row,o.col),this.setHeightAndWidth(t,o)}FD([t],[Mx]),this.trigger("resizeStop",n),this.resizeCalled=!1,this.lastMouseX=this.lastMouseY=void 0,this.mOffX=this.mOffY=0,this.mainElement=null,this.allowFloating&&this.moveItemsUpwards(),this.updatePanels(),this.updateCloneArrayObject(),this.checkForChanges(!0)}},t.prototype.getResizeRowColumn=function(e){var t=!1,n=e.col;-1!==["e-west","e-south-west"].indexOf(this.handleClass)&&(n=this.pixelsToColumns(this.elementX,!1));var r=e.row;-1!==["e-north"].indexOf(this.handleClass)&&(r=this.pixelsToRows(this.elementY,!1),this.previousRow!==r&&(this.previousRow=r,t=!0));var i=e.sizeX;-1===["e-north","e-south"].indexOf(this.handleClass)&&(i=this.pixelsToColumns(this.elementWidth-i*this.cellSpacing[1],!0));var o=e.sizeY;return-1===["e-east","e-west"].indexOf(this.handleClass)&&("e-north"!==this.handleClass||t)&&(o=this.pixelsToRows(this.elementHeight-o*this.cellSpacing[0],!0)),e.col+i>this.columns&&(e.sizeX=i-1),(r>-1&&n>-1&&i+n<=this.maxCol()&&o+r<=this.maxRow()&&0===this.collisions(r,n,i,o,this.getPanelBase(e.id)).length||!1!==this.allowPushing)&&this.panelPropertyChange(e,{row:r,col:n,sizeX:i,sizeY:o}),e},t.prototype.pixelsToColumns=function(e,t){var n=this.cellSize[0];return t?Math.ceil(e/n):Math.floor(e/n)},t.prototype.pixelsToRows=function(e,t){return t?Math.round(e/this.cellSize[1]):Math.round(e/(this.cellSize[1]+this.cellSpacing[0]))},t.prototype.getMinWidth=function(e){return e.minSizeX*this.getCellSize()[0]+(e.minSizeX-1)*this.cellSpacing[0]},t.prototype.getMaxWidth=function(e){return e.maxSizeX*this.getCellSize()[0]},t.prototype.getMinHeight=function(e){return e.minSizeY*this.getCellSize()[1]+(e.minSizeY-1)*this.cellSpacing[1]},t.prototype.getMaxHeight=function(e){return e.maxSizeY*this.getCellSize()[1]},t.prototype.sortedPanel=function(){this.sortedArray=[];for(var e=0,t=this.panelCollection.length;e<t;++e)this.sortItem(this.panelCollection[e])},t.prototype.moveItemsUpwards=function(){if(!1!==this.allowFloating){for(var e=0,t=this.sortedArray.length;e<t;++e){var n=this.sortedArray[e];if(n)for(var r=0,i=n.length;r<i;++r){var o=n[r];o&&this.moveItemUpwards(o)}}this.updateGridLines()}},t.prototype.moveItemUpwards=function(e){if(!1!==this.allowFloating&&e!==this.mainElement){for(var t=this.getCellInstance(e.id).col,n=parseInt(e.getAttribute("data-sizeY"),10),r=parseInt(e.getAttribute("data-sizeX"),10),i=null,o=null,s=parseInt(e.getAttribute("data-row"),10)-1;s>-1;){if(0!==this.collisions(s,t,r,n,e).length)break;i=s,o=t,--s}null!==i&&this.sortItem(e,i,o)}},t.prototype.sortItem=function(e,t,n){this.overlapElement=[];var r=parseInt(e.getAttribute("data-col"),10),i=parseInt(e.getAttribute("data-row"),10);if(this.sortedArray[i]||(this.sortedArray[i]=[]),this.sortedArray[i][r]=e,void 0!==e&&void 0!==t&&void 0!==n){if(void 0!==this.oldRowCol[e.id]&&null!==this.oldRowCol[e.id].row&&"undefined"!==typeof this.oldRowCol[e.id].col){var o=this.sortedArray[this.oldRowCol[e.id].row];this.oldRowCol[e.id]&&o[this.oldRowCol[e.id].col]===e&&(delete o[this.oldRowCol[e.id].col],this.updateOldRowColumn(),this.sortedPanel())}this.oldRowCol[e.id].row=t,this.oldRowCol[e.id].row=n,this.sortedArray[i]||(this.sortedArray[i]=[]),this.sortedArray[i][r]=e,-1===this.allItems.indexOf(e)&&this.allItems.push(e),this.panelPropertyChange(this.getCellInstance(e.id),{row:t,col:n});var s=this.getCellInstance(e.id);this.setAttributes({value:{col:s.col.toString(),row:s.row.toString()}},e),this.updateLayout(e,this.getCellInstance(e.id))}},t.prototype.updateLayout=function(e,t){this.setPanelPosition(e,t.row,t.col),this.setHeightAndWidth(e,t),this.updateRowHeight(),this.sortedPanel()},t.prototype.refresh=function(){if(this.panelsSizeY=0,this.updateDragArea(),this.checkMediaQuery())this.checkMediaQuerySizing();else{if(this.element.classList.contains(kx)){FD([this.element],[kx]);for(var e=this.element.querySelectorAll((this.element.id?"#"+this.element.id+" > ":"")+".e-panel"),t=0;t<e.length;t++){var n=e[t],r=this.getCellInstance(n.id),i=parseInt(n.getAttribute("data-row"),10),o=parseInt(n.getAttribute("data-col"),10);this.panelPropertyChange(r,{row:i,col:o}),this.setHeightAndWidth(n,this.getCellInstance(n.id)),this.setPanelPosition(n,i,o),this.updateRowHeight()}}this.panelResponsiveUpdate(),this.updateGridLines()}this.removeResizeClasses(this.panelCollection),this.setClasses(this.panelCollection),this.resizeEvents(),this.checkDragging(this.dragCollection)},t.prototype.updateGridLines=function(){this.element.querySelector(".e-dashboard-gridline-table")&&(this.table&&GD(this.table),this.initGridLines())},t.prototype.checkDragging=function(e){if(this.checkMediaQuery()||!this.allowDragging)for(var t=0;t<e.length;t++)e[t].destroy();else{for(t=0;t<e.length;t++)e[t].destroy();this.enableDraggingContent(this.panelCollection)}},t.prototype.sortPanels=function(){for(var e=[],t=function(t){for(var r=function(r){n.panels.filter((function(n){n.row===t&&n.col===r&&e.push(n)}))},i=0;i<n.columns;i++)r(i)},n=this,r=0;r<=this.rows;r++)t(r);return e},t.prototype.checkMediaQuerySizing=function(){var e;UD([this.element],[kx]),e=this.isPanelRemoved&&this.panels?this.panels:this.sortPanels(),this.updatedRows=e.length;for(var t=0;t<e.length;t++){var n=document.getElementById(e[t].id),r=void 0;n&&(qD(n,{width:"100%"}),n.style.height=" "+(this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio)*e[t].sizeY+"px",e[t].sizeY>1&&(r=(this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio)*e[t].sizeY+parseInt((Math.round(e[t].sizeY/2)*this.cellSpacing[1]).toString(),0),n.style.height=r+"px"),this.resizeHeight=!0,this.panelPropertyChange(e[t],{row:t,col:0}),this.setPanelPosition(n,e[t].row,e[t].col),this.panelsSizeY=this.panelsSizeY+e[t].sizeY,this.setClasses(this.panelCollection),this.checkDragging(this.dragCollection),this.removeResizeClasses(this.panelCollection))}this.updateRowHeight()},t.prototype.panelResponsiveUpdate=function(){this.element.classList.add("e-responsive"),this.calculateCellSize();for(var e=0;e<this.element.querySelectorAll(".e-panel").length;e++){var t=this.element.querySelectorAll(".e-panel")[e],n=this.getCellInstance(t.id);this.setHeightAndWidth(t,n)}for(e=0;e<this.panels.length;e++)this.setPanelPosition(document.getElementById(this.panels[e].id),this.panels[e].row,this.panels[e].col);this.updateRowHeight()},t.prototype.updateRowHeight=function(){this.getRowColumn(),this.setHeightWidth()},t.prototype.setHeightWidth=function(){var e,t;if(this.checkMediaQuery()){for(var n=0,r=0;r<this.panels.length;r++)this.panels[r].sizeY&&(n+=this.panels[r].sizeY);e=n*(this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio)+(n-1)*this.cellSpacing[1]+"px"}else e=this.maxRow()*(this.cellSize[0]/this.cellAspectRatio)+(this.maxRow()-1)*this.cellSpacing[1]+"px";qD(this.element,{height:e}),t=window.getComputedStyle(this.element).width,qD(this.element,{width:t})},t.prototype.setHeightAndWidth=function(e,t){qD(e,{height:WM(this.setXYDimensions(t)[0])}),qD(e,{width:WM(this.setXYDimensions(t)[1])})},t.prototype.renderCell=function(e,t,n){var r;this.dimensions=this.setXYDimensions(e),BM(e.enabled)&&(e.enabled=!0),this.contentTemplateChild.length>0&&!VM(n)?(r=this.contentTemplateChild[n],e.cssClass&&UD([r],[e.cssClass]),e.id&&r.setAttribute("id",e.id)):r=this.createPanelElement(e.cssClass?e.cssClass.split(" "):null,e.id),r.style.zIndex=""+e.zIndex,this.element.appendChild(r),this.renderReactTemplates();var i=this.renderPanels(r,e,e.id,t);return this.panelCollection.push(i),this.setXYAttributes(r,e),this.setHeightAndWidth(r,e),r},t.prototype.setPanelPosition=function(e,t,n){if(e){this.checkMediaQuery()&&this.calculateCellSize();var r=this.getCellSize()[1],i=this.getCellSize()[0],o=0===n?0:n*(i+this.cellSpacing[0]),s=0===t?0:t*(r+this.cellSpacing[1]);this.checkMediaQuery()&&(s=0===t?0:this.panelsSizeY*(r+this.cellSpacing[1])),qD(e,{left:o+"px",top:s+"px"})}},t.prototype.getRowColumn=function(){if(this.rows=null,this.element.querySelectorAll(".e-panel").length>0&&!this.updatedRows)for(var e=this.element.querySelectorAll(".e-panel"),t=0;t<e.length;t++){var n=e[t],r=parseInt(n.getAttribute("data-row"),10),i=parseInt(n.getAttribute("data-sizeY"),10);this.rows=Math.max(this.rows,r+i)}else{this.updatedRows&&(this.rows=this.updatedRows,this.updatedRows=null);for(t=0;t<this.panels.length;t++)this.rows=Math.max(this.rows,this.panels[t].row)}},t.prototype.setMinMaxValues=function(e){!e.sizeX||e.sizeX<e.minSizeX?this.panelPropertyChange(e,{sizeX:e.minSizeX}):e.maxSizeX&&e.sizeX>e.maxSizeX?this.panelPropertyChange(e,{sizeX:e.maxSizeX}):e.sizeX>this.columns?this.panelPropertyChange(e,{sizeX:this.columns}):this.panelPropertyChange(e,{sizeX:e.sizeX}),!e.sizeY||e.sizeY<e.minSizeY?this.panelPropertyChange(e,{sizeY:e.minSizeY}):e.maxSizeY&&e.sizeY>e.maxSizeY?this.panelPropertyChange(e,{sizeY:e.maxSizeY}):this.panelPropertyChange(e,{sizeY:e.sizeY})},t.prototype.checkMinMaxValues=function(e){e.col+e.sizeX>this.columns&&this.panelPropertyChange(e,{sizeX:e.sizeX+(this.columns-(e.col+e.sizeX))})},t.prototype.panelPropertyChange=function(e,t){e.setProperties(t,!0)},t.prototype.renderDashBoardCells=function(e){if(this.element.querySelectorAll(".e-panel").length>0||this.panels.length>0)for(var t=0;t<e.length;t++){this.gridPanelCollection.push(e[t]),this.setMinMaxValues(e[t]),(this.maxColumnValue<e[t].col||this.maxColumnValue<e[t].col+e[t].sizeX)&&this.panelPropertyChange(e[t],{col:this.maxColumnValue-e[t].sizeX});var n=this.renderCell(e[t],!1,t);this.enableRtl&&UD([n],"e-rtl"),this.element.appendChild(n),this.renderReactTemplates(),this.checkMediaQuery()&&t===e.length-1?this.checkMediaQuerySizing():(this.setPanelPosition(n,e[t].row,e[t].col),this.mainElement=n,this.updatePanelLayout(n,e[t]),this.mainElement=null)}this.setClasses(this.panelCollection)},t.prototype.collisions=function(e,t,n,r,i){var o,s=[];n&&r||(n=r=1),!i||i instanceof Array||(i=[i]);for(var a=0;a<r;++a)for(var c=0;c<n;++c)!(o=this.getPanel(e+a,t+c,i))||i&&-1!==i.indexOf(document.getElementById(o.id))||-1!==s.indexOf(document.getElementById(o.id))||s.push(document.getElementById(o.id));return s},t.prototype.rightWardsSpaceChecking=function(e,t,n){var r=this,i=[],o=[];if(e.forEach((function(e){var n=parseInt(e.getAttribute("data-col"),10),o=parseInt(e.getAttribute("data-sizeX"),10);if(t<r.columns&&n>=t)if(o>1)for(var s=n;s<n+o;s++)i.push(s);else i.push(n)})),i.length>0)for(var s=t+1;s<=this.columns-1;s++)-1===i.indexOf(s)&&s!==t&&-1===o.indexOf(s)&&o.push(s);var a=this.getOccupiedColumns(n);return a.forEach((function(e){e>t&&-1!==o.indexOf(e)&&o.splice(o.indexOf(e),1)})),this.getOccupiedColumns(this.checkingElement).forEach((function(e){e>parseInt(n.getAttribute("data-col"),10)&&-1===a.indexOf(e)&&-1===o.indexOf(e)&&o.push(e)})),o=o.sort((function(e,t){return e-t}))},t.prototype.getOccupiedColumns=function(e){for(var t=[],n=parseInt(e.getAttribute("data-sizeX"),10),r=parseInt(e.getAttribute("data-col"),10),i=r;i<r+n&&i<=this.columns;i++)t.push(i);return t},t.prototype.leftWardsSpaceChecking=function(e,t,n){var r=this,i=[],o=[];if(e.forEach((function(e){var n=parseInt(e.getAttribute("data-col"),10),i=parseInt(e.getAttribute("data-sizeX"),10);if(t<=r.columns&&n<=t)if(i>1)for(var s=n;s<n+i;s++)o.push(s);else o.push(n)})),o.length>0)for(var s=0;s<=t;s++)-1===o.indexOf(s)&&s!==t&&-1===i.indexOf(s)&&i.push(s);var a=this.getOccupiedColumns(n);return a.forEach((function(e){e<t&&-1!==i.indexOf(e)&&i.splice(i.indexOf(e),1)})),this.getOccupiedColumns(this.checkingElement).forEach((function(e){e<parseInt(n.getAttribute("data-col"),10)&&-1===a.indexOf(e)&&-1===i.indexOf(e)&&i.push(e)})),i=(i=i.sort((function(e,t){return e-t}))).reverse()},t.prototype.adjustmentAvailable=function(e,t,n,r,i){this.leftAdjustable=void 0,this.rightAdjustable=void 0;var o,s=!1,a=[];this.topAdjustable=void 0;var c=parseInt(i.getAttribute("data-sizeX"),10),l=parseInt(i.getAttribute("data-col"),10);-1===(a=this.getRowElements(this.collisions(e,0,this.columns,n,[]))).indexOf(i)&&a.push(i);var d=this.leftWardsSpaceChecking(a,t,i);if(d.length>0?(this.leftAdjustable=this.isLeftAdjustable(d,i,e,t,r,n),this.spacedColumnValue!==l-this.getCellInstance(this.checkingElement.id).sizeX&&(this.leftAdjustable=!1),this.leftAdjustable?this.rightAdjustable=!1:(this.leftAdjustable=!1,o=this.rightWardsSpaceChecking(a,t,i),this.rightAdjustable=o.length>0&&this.isRightAdjustable(o,i,e,t,r,n),this.spacedColumnValue!==c+l&&(this.rightAdjustable=!1),this.rightAdjustable||(this.rightAdjustable=!1))):(o=this.rightWardsSpaceChecking(a,t,i),this.rightAdjustable=o.length>0&&this.isRightAdjustable(o,i,e,t,r,n),this.spacedColumnValue!==c+l&&(this.rightAdjustable=!1),this.rightAdjustable&&(this.leftAdjustable=!1)),!this.rightAdjustable&&!this.leftAdjustable&&e>0){var u=this.getCellInstance(i.id).row,h=!1;this.startRow!==u&&(h=!0);for(var p=e;p>=0;p--){var f=this.getCellInstance(i.id).sizeY>1&&h?this.checkingElement:i;p!==u&&p===u-n&&0===this.collisions(p,t,r,n,f).length&&(h=!1,this.topAdjustable=!0,this.spacedRowValue=VM(this.spacedRowValue)?p:this.spacedRowValue,this.spacedColumnValue=t)}}return(this.rightAdjustable||this.leftAdjustable||this.topAdjustable)&&(s=!0,VM(this.spacedRowValue)&&(this.spacedRowValue=e)),s},t.prototype.isXSpacingAvailable=function(e,t){for(var n=!1,r=[],i=0;i<e.length;i++)if(e[i+1]-e[i]===1||e[i+1]-e[i]===-1){if(r.push(e[i]),2===t&&r.push(e[i+1]),i===e.length-2&&(r.push(e[i+1]),r.length>t&&r.splice(-1)),r.length===t)return n=!0,this.spacedColumnValue=r.sort((function(e,t){return e-t}))[0],this.spacedColumnValue<0&&(this.spacedColumnValue=1),n}else r=[];return n},t.prototype.getRowElements=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},t.prototype.isLeftAdjustable=function(e,t,n,r,i,o){var s;if(1===i&&1===o&&e.length>0)this.spacedColumnValue=e[0],s=!0;else if(i>1&&1===o)s=this.isXSpacingAvailable(e,i);else if(o>1)if(1===i){var a=void 0;if(e.length>=1&&(a=!0),a)for(var c=0;c<e.length;c++){if(0===this.collisions(n,e[c],i,o,this.checkingElement).length)return this.spacedColumnValue=e[c],s=!0;s=!1}}else s=this.replacable(e,i,n,o,t);return s},t.prototype.isRightAdjustable=function(e,t,n,r,i,o){var s;if(1===i&&1===o&&e.length>0)this.spacedColumnValue=e[0],s=!0;else if(i>1&&1===o)s=this.isXSpacingAvailable(e,i);else if(o>1)if(1===i){var a=void 0;if(e.length>=1&&(a=!0),a)for(var c=0;c<e.length;c++){for(var l=this.collisions(n,e[c],i,o,this.checkingElement),d=0;d<l.length;d++)parseInt(t.getAttribute("data-col"),10)!==e[c]&&l.splice(l.indexOf(l[d]),1);if(0===l.length)return s=!0,this.spacedColumnValue=e[c],s;s=!1}}else s=this.replacable(e,i,n,o,t);return s},t.prototype.replacable=function(e,t,n,r,i){for(var o,s=[],a=0;a<e.length;a++){if(this.isXSpacingAvailable(e,t)){var c=[];if(c.push(this.checkingElement),c.push(i),0===s.length)return o=!0,this.spacedColumnValue=this.spacedColumnValue,o;o=!1}}return o},t.prototype.sortCollisionItems=function(e){for(var t,n=[],r=function(r){t=[],e.forEach((function(e){e&&e.getAttribute("data-row")===r.toString()&&t.push(e)}));for(var o=function(e){t.forEach((function(t){t&&t.getAttribute("data-col")===e.toString()&&n.push(t)}))},s=i.columns-1;s>=0;s--)o(s)},i=this,o=this.rows-1;o>=0;o--)r(o);return n},t.prototype.updatedModels=function(e,t,n){var r=this,i=[];return this.mainElement||this.sortedPanel(),e.forEach((function(o){r.checkingElement=o;var s=r.getCellInstance(o.id),a=!r.adjustmentAvailable(s.row,s.col,s.sizeY,s.sizeX,n);if(s.sizeX>1&&a)for(var c=s.row;c<t.row+t.sizeY;c++){r.collisions(c,s.col,s.sizeX,s.sizeY,o).forEach((function(t){e.indexOf(t)>=0&&-1===i.indexOf(t)&&i.push(t)}))}})),i.forEach((function(t){i.indexOf(t)>=0&&e.splice(e.indexOf(t),1)})),e},t.prototype.resetLayout=function(e){var t=this.collisions(e.row,e.col,e.sizeX,e.sizeY,this.mainElement);if(!this.mainElement||this.addPanelCalled||this.resizeCalled||this.movePanelCalled)return t;if(this.mainElement&&this.oldRowCol!==this.cloneObject)for(var n=0;n<this.panels.length;n++){var r=document.getElementById(this.panels[n].id);if(r!==this.mainElement){var i=this.cloneObject[r.id].row,o=this.cloneObject[r.id].col;this.setPanelPosition(r,i,o),this.panelPropertyChange(this.getCellInstance(r.id),{row:i,col:o}),this.setAttributes({value:{col:o.toString(),row:i.toString()}},r),this.updateOldRowColumn()}}return this.sortedArray=this.cloneArray,t=this.collisions(e.row,e.col,e.sizeX,e.sizeY,this.mainElement),this.sortedPanel(),this.updateOldRowColumn(),this.checkCollision&&this.checkCollision.length>0&&-1===t.indexOf(this.checkCollision[0])&&this.cloneObject[this.checkCollision[0].id].row===e.row&&t.push(this.checkCollision[0]),t},t.prototype.swapAvailability=function(e,t){for(var n=!0,r=this.getCellInstance(t.id),i=0;i<e.length;i++)for(var o=this.getCellInstance(e[i].id),s=1;s<r.sizeY;s++){var a=[];if(a.push(t),a.push(e[i]),this.collisions(r.row+s,o.col,o.sizeX,o.sizeY,a).length>0)return n=!1,!1}return n},t.prototype.checkForSwapping=function(e,t){if(!this.mainElement||0===e.length)return!1;var n,r=parseInt(e[0].getAttribute("data-row"),10);if(this.startRow<r?n=1:this.startRow>r&&(n=0),!this.swapAvailability(e,t))return!1;for(var i=!1,o=0;o<e.length;o++)if(e.length>=1&&this.cloneObject[this.mainElement.id]&&this.cloneObject[this.mainElement.id].row===this.oldRowCol[this.mainElement.id].row)return!1;for(var s=0===n?this.getCellInstance(this.mainElement.id).row+this.getCellInstance(this.mainElement.id).sizeY:this.startRow,a=0;a<e.length;a++){var c=this.getCellInstance(e[a].id),l=this.getCellInstance(t.id),d=[];if(1===c.sizeY&&-1===d.indexOf(e[a]))d.push(e[a]);else if(c.sizeY>1&&-1===d.indexOf(e[a]))if(1===n&&l.row===this.cloneObject[c.id].row+c.sizeY-1)d.push(e[a]);else{if(0!==n||l.row!==this.cloneObject[c.id].row)return!1;d.push(e[a])}if(c.sizeY<=l.sizeY&&-1===d.indexOf(e[a])&&d.push(e[a]),d.push(this.mainElement),this.collisions(s,c.col,c.sizeX,c.sizeY,d).length>0)return i=!1;a===e.length-1&&(i=!0)}return i},t.prototype.swapItems=function(e,t,n){var r,i=this,o=[];o.push(t);var s=parseInt(e[0].getAttribute("data-row"),10);this.startRow<s?r=1:this.startRow>s&&(r=0);var a=0===r?s+n.sizeY:this.startRow;if(!this.movePanelCalled){var c=this.getCellInstance(e[0].id);this.panelPropertyChange(n,{row:0===r?s:a+c.sizeY})}for(var l=0;l<e.length;l++)o.push(e[l]),this.setPanelPosition(e[l],a,this.getCellInstance(e[l].id).col),this.panelPropertyChange(this.getCellInstance(e[l].id),{row:a}),e[l].setAttribute("data-row",a.toString());t.setAttribute("data-row",n.row.toString()),this.setPanelPosition(this.shadowEle,n.row,n.col);for(var d=0;d<this.panels.length;d++)this.oldRowCol[this.panels[d].id]={row:this.panels[d].row,col:this.panels[d].col};this.startRow=n.row,this.updateOldRowColumn(),o.forEach((function(e){i.cloneObject[e.id]=i.oldRowCol[e.id];for(var t=i.getCellInstance(e.id),n=0;n<i.sortedArray.length;n++)if(i.sortedArray[n])for(var r=0;r<i.sortedArray[n].length;r++)i.sortedArray[n][r]===e&&(i.sortedArray[n][r]=void 0);i.sortedArray[t.row]||(i.sortedArray[t.row]=[]),i.sortedArray[t.row][t.col]=e,i.cloneArray=i.sortedArray}))},t.prototype.updatePanelLayout=function(e,t){this.collisionChecker={};var n=[],r=[];if((n=this.mainElement&&this.isRenderComplete?this.resetLayout(t):this.collisions(t.row,t.col,t.sizeX,t.sizeY,e)).length>0)if(n=this.sortCollisionItems(n),n=this.updatedModels(n,t,e),!VM(this.startRow)&&this.checkForSwapping(n,e))this.swapItems(n,e,t);else for(var i=0;i<n.length;i++){var o=this.getCellInstance(n[i].id);if(this.checkingElement=n[i],this.spacedRowValue=null,this.spacedColumnValue=null,this.adjustmentAvailable(o.row,o.col,o.sizeY,o.sizeX,e)&&!VM(this.spacedColumnValue)){this.setPanelPosition(n[i],this.spacedRowValue,this.spacedColumnValue),this.oldRowCol[n[i].id]={row:this.spacedRowValue,col:this.spacedColumnValue};var s={attributes:{row:this.spacedRowValue.toString(),col:this.spacedColumnValue.toString()}};if(this.setAttributes(s,n[i]),this.panelPropertyChange(o,{col:this.spacedColumnValue,row:this.spacedRowValue}),this.topAdjustable&&this.allowFloating&&(this.updatePanels(),this.updateCloneArrayObject()),this.spacedRowValue=null,i<n.length)continue}else r.push(n[i])}if(r.length>0){var a=this;r.forEach((function(e){-1===a.overlapElement.indexOf(e)&&a.overlapElement.push(e)})),this.overlapElement&&-1!==this.overlapElement.indexOf(e)&&this.overlapElement.splice(this.overlapElement.indexOf(e),1),r.length>0&&(this.updateRowColumn(t.row,this.overlapElement,e),this.checkForCompletePushing())}this.isSubValue||this.sortedPanel(),this.updateRowHeight(),this.updateGridLines()},t.prototype.checkForCompletePushing=function(){for(var e=0;e<this.panels.length;e++)if(this.collisionChecker[this.panels[e].id]&&null!==this.collisionChecker[this.panels[e].id]){this.overlapElement=[this.collisionChecker[this.panels[e].id].ele];var t=this.panels[e].id;this.updateRowColumn(this.collisionChecker[""+t].row,this.overlapElement,this.collisionChecker[""+t].srcEle)}},t.prototype.updateCollisionChecked=function(e){for(var t=0;t<Object.keys(this.collisionChecker).length;t++)this.collisionChecker[e.id]=null},t.prototype.updateRowColumn=function(e,t,n){if(n){var r=parseInt(n.getAttribute("data-sizeY"),10),i=parseInt(n.getAttribute("data-row"),10);this.overlapElementClone=(this.overlapElement&&this.shouldRestrict,this.overlapElement);for(var o=0;o<this.overlapElementClone.length;o++){if(0===this.overlapElementClone.length)return;for(var s=0;s<this.overlapElementClone.length;s++)this.collisionChecker[this.overlapElementClone[s].id]={ele:this.overlapElementClone[s],row:e,srcEle:n};var a=i+r,c=parseInt(this.overlapElementClone[o].getAttribute("data-sizeY"),10),l=parseInt(this.overlapElementClone[o].getAttribute("data-col"),10),d=parseInt(this.overlapElementClone[o].getAttribute("data-sizeX"),10),u=void 0,h=void 0;if(-1===this.overlapSubElementClone.indexOf(n)&&this.overlapSubElementClone.push(n),-1===this.overlapSubElementClone.indexOf(this.overlapElementClone[o])&&this.overlapSubElementClone.push(this.overlapElementClone[o]),c>1||d>1){var p=this.getCellInstance(this.overlapElementClone[o].id);u=p.col;for(var f=document.getElementById(p.id),m=p.row;m<i+r;m++){this.isSubValue=!0,this.panelPropertyChange(p,{row:p.row+1}),f.setAttribute("data-row",p.row.toString()),this.setPanelPosition(f,p.row,u),this.updateCollisionChecked(f),this.oldRowCol[f.id]={row:p.row,col:u};var g=this.getCellInstance(f.id);this.panelPropertyChange(g,{col:u,row:p.row});var y=parseInt(f.getAttribute("data-row"),10),v=parseInt(f.getAttribute("data-col"),10),_=parseInt(f.getAttribute("data-sizeX"),10),E=parseInt(f.getAttribute("data-sizeY"),10),S=[];S.push(f),S.push(n),h=this.collisions(y,v,_,E,S),this.mainElement&&-1!==h.indexOf(this.mainElement)&&h.splice(h.indexOf(this.mainElement),1),this.collisionPanel(h,v,y,f)}this.isSubValue=!1}else{this.addPanelCalled&&(this.addPanelCalled=!1),this.overlapElementClone[o].setAttribute("data-row",a.toString());var T=[];T.push(this.overlapElementClone[o]),T.push(n),h=this.collisions(a,l,d,c,T),this.mainElement&&-1!==h.indexOf(this.mainElement)&&h.splice(h.indexOf(this.mainElement),1),u=parseInt(this.overlapElementClone[o].getAttribute("data-col"),10),this.setPanelPosition(this.overlapElementClone[o],a,u),this.updateCollisionChecked(this.overlapElementClone[o]),this.oldRowCol[this.overlapElementClone[o].id]={row:a,col:u};g=this.getCellInstance(this.overlapElementClone[o].id);this.panelPropertyChange(g,{col:u,row:a}),this.collisionPanel(h,u,a,this.overlapElementClone[o])}}}},t.prototype.collisionPanel=function(e,t,n,r){var i=this.getCellInstance(r.id);if(this.panelPropertyChange(i,{row:n,col:t}),e.length>0){var o=this;this.overlapElement=[],this.shouldRestrict=!0,e.forEach((function(e){o.overlapElement.push(e)}));for(var s=parseInt(r.getAttribute("data-row"),10),a=0;a<this.overlapElement.length;a++)this.updateRowColumn(s,this.overlapElement,r);this.shouldRestrict=!1}else{if(this.addPanelCalled||this.sortedPanel(),this.overlapSubElementClone.length>0)for(var c=function(e){var t=parseInt(l.overlapSubElementClone[e].getAttribute("data-row"),10),n=parseInt(l.overlapSubElementClone[e].getAttribute("data-col"),10),r=parseInt(l.overlapSubElementClone[e].getAttribute("data-sizeX"),10),i=parseInt(l.overlapSubElementClone[e].getAttribute("data-sizeY"),10),o=l.collisions(t,n,r,i,l.overlapSubElementClone);l.mainElement&&-1!==o.indexOf(l.mainElement)&&o.splice(o.indexOf(l.mainElement),1);var s=l;o.forEach((function(e){s.overlapElement.push(e)})),o.length>0&&l.updateRowColumn(t,l.overlapElement,l.overlapSubElementClone[e])},l=this,d=0;d<this.overlapSubElementClone.length;d++)c(d);this.overlapSubElementClone=[]}},t.prototype.removeResizeClasses=function(e){for(var t=0;t<e.length;t++)for(var n=e[t].querySelectorAll(".e-resize"),r=0;r<n.length;r++)GD(n[r])},t.prototype.ensureDrag=function(){this.checkDragging(this.dragCollection),FD(this.element.querySelectorAll("."+Dx),[Dx]),this.setClasses(this.panelCollection)},t.prototype.setClasses=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=e[t].querySelector(".e-panel-container");this.allowDragging&&(this.draggableHandle&&n.querySelectorAll(this.draggableHandle)[0]?UD([n.querySelectorAll(this.draggableHandle)[0]],[Dx]):UD([n],[Dx])),this.allowResizing&&this.mediaQuery&&!this.checkMediaQuery()&&this.setResizingClass(n,r)}},t.prototype.setResizingClass=function(e,t){if(this.availableClasses=this.resizableHandles,!e.querySelector(".e-resize"))for(var n=0;n<this.availableClasses.length;n++){var r=this.createElement("span");t.appendChild(r),UD([r],["e-east"===this.availableClasses[n]||"e-west"===this.availableClasses[n]||"e-north"===this.availableClasses[n]||"e-south"===this.availableClasses[n]?"e-single":"e-double",this.availableClasses[n],"e-resize","e-dl-icon"])}},t.prototype.setXYAttributes=function(e,t){var n={value:{sizeX:t.sizeX.toString(),sizeY:t.sizeY.toString(),minSizeX:t.minSizeX.toString(),minSizeY:t.minSizeY.toString(),maxSizeX:VM(t.maxSizeX)?void 0:t.maxSizeX.toString(),maxSizeY:VM(t.maxSizeY)?void 0:t.maxSizeY.toString(),row:t.row.toString(),col:t.col.toString()}};this.setAttributes(n,e)},t.prototype.setXYDimensions=function(e){var t,n=this.getCellSize()[1],r=this.getCellSize()[0];return t=e&&"number"===typeof r&&"number"===typeof e.sizeX&&e.sizeX>1?e.sizeX*r+(e.sizeX-1)*this.cellSpacing[0]:r,[e&&"number"===typeof n&&e.sizeY>1&&"number"===typeof e.sizeY?e.sizeY*n+(e.sizeY-1)*this.cellSpacing[1]:WM(n),t]},t.prototype.getRowColumnDragValues=function(e){var t=parseFloat(e.element.style.top),n=parseFloat(e.element.style.left);return[Math.round(t/(this.getCellSize()[1]+this.cellSpacing[1])),Math.round(n/(this.getCellSize()[0]+ +this.cellSpacing[0]))]},t.prototype.checkForChanges=function(e,t,n){var r=[];if(this.removeAllCalled)r=[];else for(var i=0;i<this.panels.length;i++)!VM(t)&&this.panels[i].id===t[0].id||!VM(n)&&this.panels[i].id===n[0].id||this.panels[i].row===this.panelsInitialModel[i].row&&this.panels[i].col===this.panelsInitialModel[i].col||r.push(this.panels[i]);if(r.length>0||this.removeAllCalled){var o={changedPanels:r,isInteracted:e,addedPanels:VM(t)?[]:t,removedPanels:VM(n)?[]:n};this.trigger("change",o)}},t.prototype.enableDraggingContent=function(e){for(var t,n=this,r=function(r){var o=[".e-resize",".e-drag-restrict"],s=e[r];i.dragobj=new zk(s,{preventDefault:!1,clone:!1,dragArea:i.element,isDragScroll:!0,handle:i.draggableHandle?i.draggableHandle:".e-panel",abort:o,dragStart:i.onDraggingStart.bind(i),dragStop:function(e){if(n.trigger("dragStop",e),VM(e.cancel)&&(e.cancel=!1),e.cancel){var t=n.getCellInstance(n.mainElement.id);for(r=0;r<n.panels.length;r++)n.panels[r].id===t.id&&(e.element.setAttribute("data-col",n.panelsInitialModel[r].col.toString()),e.element.setAttribute("data-row",n.panelsInitialModel[r].row.toString()),t.col=n.panelsInitialModel[r].col,t.row=n.panelsInitialModel[r].row,n.setPanelPosition(n.mainElement,n.panelsInitialModel[r].row,n.panelsInitialModel[r].col),n.updatePanelLayout(n.mainElement,t));n.shadowEle&&GD(n.shadowEle)}else{var i=n.getCellInstance(n.mainElement.id);n.allowPushing&&n.collisions(i.row,i.col,i.sizeX,i.sizeY,n.mainElement).length>0?(n.setHolderPosition(e),n.setPanelPosition(n.mainElement,i.row,i.col),n.updatePanelLayout(n.mainElement,i)):n.setPanelPosition(n.mainElement,i.row,i.col),n.mainElement=null;var o=n.getPanelBase(e);n.shadowEle&&GD(n.shadowEle),FD([n.element],[Ox]),FD([e.element],[Mx]),n.shadowEle=null,e.element.classList.remove("e-dragging");var s=n.getRowColumnDragValues(e)[0],a=n.getRowColumnDragValues(e)[1],c=n.getCellInstance(e.element.id);n.allowPushing&&0===n.collisions(s,a,c.sizeX,c.sizeY,document.getElementById(o.id)).length?(n.panelPropertyChange(n.getCellInstance(e.element.id),{row:s,col:a}),n.oldRowCol[e.element.id].row=s,n.oldRowCol[e.element.id].col=a,n.setAttributes({value:{col:a.toString(),row:s.toString()}},e.element),n.sortedPanel()):(n.panelPropertyChange(n.getCellInstance(e.element.id),{row:n.oldRowCol[e.element.id].row,col:n.oldRowCol[e.element.id].col}),e.element.setAttribute("data-col",n.getCellInstance(e.element.id).col.toString()),e.element.setAttribute("data-row",n.getCellInstance(e.element.id).row.toString()),n.sortedPanel());var l=n.getCellInstance(e.element.id);n.setPanelPosition(e.element,l.row,l.col),n.updatePanels(),n.updateCloneArrayObject(),n.checkForChanges(!0),n.dragStopEventArgs={event:e.event,element:e.element},n.resizeEvents(),n.rows=n.maxRow(!0),n.setHeightWidth(),n.updateDragArea()}},drag:function(e){n.draggedEventArgs={event:e.event,element:e.element,target:YD(e.target,".e-panel")},n.trigger("drag",n.draggedEventArgs),n.onDragStart(e)}}),-1===i.dragCollection.indexOf(i.dragobj)&&i.dragCollection.push(i.dragobj),t=r},i=this,o=0;o<e.length;o++)r(o),o=t},t.prototype.updatePanels=function(){this.moveItemsUpwards(),this.updateOldRowColumn(),this.sortedPanel()},t.prototype.updateDragArea=function(){this.dragCollection.forEach((function(e){e.setDragArea()}))},t.prototype.updateRowsHeight=function(e,t,n){e+t>=this.rows&&(this.rows=this.rows+n,this.setHeightWidth())},t.prototype.onDraggingStart=function(e){var t=e;if(this.trigger("dragStart",t,(function(t){VM(e.cancel)&&(e.cancel=!1)})),this.eventVar=e.cancel,e.cancel)FD([this.element],[Ox]),FD([e.element],[Mx]);else{this.panelsInitialModel=this.cloneModels(this.panels),this.mainElement=e.element,this.cloneObject=JSON.parse(JSON.stringify(this.cloneObject));var n=this.startRow=parseInt(e.element.getAttribute("data-row"),10);this.startCol=parseInt(e.element.getAttribute("data-col"),10);var r=parseInt(e.element.getAttribute("data-sizeY"),10);this.updateRowsHeight(n,r,r),this.updateDragArea(),this.shadowEle=document.createElement("div"),this.shadowEle.classList.add("e-holder"),this.shadowEle.classList.add("e-holder-transition"),qD(this.shadowEle,{position:"absolute"}),UD([this.element],[Ox]),UD([e.element],[Mx]),this.element.appendChild(this.shadowEle),this.renderReactTemplates(),this.shadowEle=document.querySelector(".e-holder"),this.shadowEle.style.height=this.getCellInstance(e.element.id).sizeY*this.cellSize[1]+"px",this.shadowEle.style.width=this.getCellInstance(e.element.id).sizeX*this.cellSize[0]+"px";var i=this.getCellInstance(e.element.id);this.setPanelPosition(this.shadowEle,i.row,i.col)}},t.prototype.cloneModels=function(e,t){void 0===t&&(t=[]);for(var n=0;n<e.length;n++)for(var r in t[n]||(t[n]={}),e[n])t[n][""+r]=e[n][""+r];return t},t.prototype.onDragStart=function(e){var t,n,r;if(this.eventVar)this.dragobj.intDestroy(e.event),FD([this.element],[Ox]),FD([e.element],[Mx]);else{var i=r=this.getRowColumnDragValues(e)[1],o=this.getRowColumnDragValues(e)[0];if(i<0||o<0)return;this.panelPropertyChange(this.getCellInstance(e.element.id),{row:o,col:i});var s=this.getCellInstance(e.element.id);if(this.updateRowsHeight(s.row,s.sizeY,1),this.updateDragArea(),this.allowPushing&&(this.setAttributes({value:{col:i.toString(),row:o.toString()}},e.element),this.panelPropertyChange(this.getCellInstance(e.element.id),{row:o,col:i}),t=this.oldRowCol[e.element.id].col,n=this.oldRowCol[e.element.id].row,this.oldRowCol[e.element.id]={row:o,col:i},this.updateOldRowColumn(),(this.startCol!==t||this.startRow!==n)&&(this.setHolderPosition(e),this.startCol!==t&&(this.startRow=n),this.startRow!==n&&(this.startCol=t),this.allowPushing))){this.mainElement=e.element;var a=s;this.checkCollision=this.collisions(a.row,a.col,a.sizeX,a.sizeY,e.element),s.col>=this.checkColumnValue&&(this.checkCollision=[]),this.updatePanelLayout(e.element,s),this.moveItemsUpwards()}if(!1!==this.allowPushing&&this.panelPropertyChange(this.getCellInstance(e.element.id),{row:o,col:i}),this.oldRowCol[e.element.id].row===o&&this.oldRowCol[e.element.id].col===i||(this.panelPropertyChange(this.getCellInstance(e.element.id),{row:o,col:i}),this.setAttributes({value:{col:i.toString(),row:o.toString()}},e.element)),this.startCol!==r&&(this.startCol=t,this.moveItemsUpwards()),this.allowPushing||this.setHolderPosition(e),this.removeResizeClasses(this.panelCollection),this.setClasses(this.panelCollection),!1===this.allowPushing)return}},t.prototype.getPanelBase=function(e){for(var t,n=0;n<this.panelCollection.length;n++)this.panelCollection[n].id===(e.element&&e.element.id||e)&&(t=this.panelCollection[n]);return t},t.prototype.getPanel=function(e,t,n){!n||n instanceof Array||(n=[n]);for(var r=1;e>-1;){for(var i=1,o=t;o>-1;){var s=this.sortedArray[e];if(s){var a=s[o];if(a&&(!n||-1===n.indexOf(a))&&parseInt(a.getAttribute("data-sizeX"),10)>=i&&parseInt(a.getAttribute("data-sizeY"),10)>=r)return a}++i,--o}--e,++r}return null},t.prototype.setHolderPosition=function(e){var t=parseInt(e.element.getAttribute("data-sizeY"),10),n=parseInt(e.element.getAttribute("data-col"),10),r=parseInt(e.element.getAttribute("data-row"),10),i=parseInt(e.element.getAttribute("data-sizeX"),10),o=this.getCellSize()[0],s=this.getCellSize()[1],a=0===r?0:r*(s+this.cellSpacing[1]),c=0===n?0:n*(o+this.cellSpacing[0]),l=this.getCellSize()[1],d=this.getCellSize()[0];this.elementRef.top=this.shadowEle.style.top=a+"px",this.elementRef.left=this.shadowEle.style.left=c+"px",this.elementRef.height=this.shadowEle.style.height=t*l+(t-1)*this.cellSpacing[1]+"px",this.elementRef.width=this.shadowEle.style.width=i*d+(i-1)*this.cellSpacing[0]+"px"},t.prototype.getCellInstance=function(e){for(var t,n=0;n<this.panels.length;n++)this.panels[n].id===e&&(t=this.panels[n]);return t},t.prototype.addPanel=function(e){this.panelsSizeY=0,this.maxCol(),e.minSizeX||(e.minSizeX=1),e.minSizeY||(e.minSizeY=1),e.id||(e.id="layout_"+this.panelID.toString(),this.panelID=this.panelID+1);var t=new jx(this,"panels",e,!0);this.panels.push(t),this.panelsInitialModel=this.cloneModels(this.panels),this.setMinMaxValues(t),(this.maxColumnValue<t.col||this.maxColumnValue<t.col+t.sizeX)&&this.panelPropertyChange(t,{col:this.maxColumnValue-t.sizeX});var n=this.renderCell(t,!0,null);if(this.oldRowCol[t.id]={row:t.row,col:t.col},this.cloneObject[t.id]={row:t.row,col:t.col},this.updateOldRowColumn(),this.element.insertAdjacentElement("afterbegin",n),this.addPanelCalled=!0,this.checkMediaQuery()?(this.checkMediaQuerySizing(),this.removeResizeClasses(this.panelCollection)):(this.mainElement=n,this.checkCollision||(this.checkCollision=[]),this.setPanelPosition(n,t.row,t.col),this.updatePanelLayout(n,t)),this.addPanelCalled=!1,this.allowDragging&&this.mediaQuery&&!this.checkMediaQuery()&&this.enableDraggingContent([document.getElementById(t.id)]),this.setClasses([n]),this.allowFloating&&(this.mainElement=null,this.moveItemsUpwards()),this.updateOldRowColumn(),this.sortedPanel(),this.updateCloneArrayObject(),this.allowResizing)for(var r=0;r<n.querySelectorAll(".e-resize").length;r++){var i="msie"===xD.info.name?"mousedown pointerdown":"mousedown";LD.add(n.querySelectorAll(".e-resize")[r],i,this.downResizeHandler,this),"msie"!==xD.info.name&&LD.add(n.querySelectorAll(".e-resize")[r],"touchstart",this.touchDownResizeHandler,this)}this.checkForChanges(!1,[t])},t.prototype.updatePanel=function(e){if(this.panelsSizeY=0,e.id){var t=this.getCellInstance(e.id);if(t){this.maxCol(),e.col=e.col<1?0:e.col>this.columns?this.columns-1:e.col,VM(e.col)&&(e.col=t.col),this.panelPropertyChange(t,e),this.setMinMaxValues(t);var n=document.getElementById(e.id);this.mainElement=n;var r=t.cssClass?t.cssClass.split(" "):null;if(this.panelContent=n.querySelector(".e-panel-container")?n.querySelector(".e-panel-container"):this.createSubElement(r,n.id+"_content",Lx),n.appendChild(this.panelContent),t.header){var i=n.querySelector(".e-panel-header")?n.querySelector(".e-panel-header"):this.createSubElement([],n.id+"template","");UD([i],[Px]),i.innerHTML="";var o=this.element.id+"HeaderTemplate"+t.id;this.renderTemplate(t.header,i,o,!0,"header"),this.panelContent.appendChild(i),this.renderReactTemplates()}else n.querySelector(".e-panel-header")&&GD(n.querySelector(".e-panel-header"));if(t.content){var s=t.cssClass?t.cssClass.split(" "):null;this.panelBody=n.querySelector(".e-panel-content")?n.querySelector(".e-panel-content"):this.createSubElement(s,n.id+"_body",xx),this.panelBody.innerHTML="";var a="calc( 100% - "+(this.panelContent.querySelector(".e-panel-header")?window.getComputedStyle(this.panelContent.querySelector(".e-panel-header")).height:"0px")+")";qD(this.panelBody,{height:a});o=this.element.id+"ContentTemplate"+t.id;this.renderTemplate(t.content,this.panelBody,o,!0,"content"),this.panelContent.appendChild(this.panelBody),this.renderReactTemplates()}else n.querySelector(".e-panel-content")&&GD(n.querySelector(".e-panel-content"));this.setXYAttributes(n,t),this.setHeightAndWidth(n,t),this.setPanelPosition(n,t.row,t.col),this.updatePanelLayout(n,t),this.checkMediaQuery()&&this.checkMediaQuerySizing(),this.mainElement=null,this.updatePanels(),this.updateCloneArrayObject()}}},t.prototype.updateCloneArrayObject=function(){this.cloneArray=this.sortedArray,this.cloneObject=JSON.parse(JSON.stringify(this.oldRowCol))},t.prototype.serialize=function(){for(var e=this.cloneModels(this.panels),t=[],n=0;n<e.length;n++)t.push({id:e[n].id,row:e[n].row,col:e[n].col,sizeX:e[n].sizeX,sizeY:e[n].sizeY,minSizeX:e[n].minSizeX,minSizeY:e[n].minSizeY,maxSizeX:e[n].maxSizeX,maxSizeY:e[n].maxSizeY});return t},t.prototype.removeAll=function(){this.removeAllCalled=!0;for(var e=0;e<this.panelCollection.length;e++)GD(this.panelCollection[e]),this.clearTemplate();this.removeAllPanel(),this.rows=0,this.gridPanelCollection=[],this.setHeightWidth(),this.sortedPanel(),this.sortedArray=[],this.overlapElementClone=[],this.overlapElement=[],this.overlapSubElementClone=[],this.panelCollection=[],this.oldRowCol={},this.cloneObject={};var t=this.cloneModels(this.panels);this.setProperties({panels:[]},!0),this.updatePanels(),this.updateCloneArrayObject(),this.checkForChanges(!1,null,t),this.removeAllCalled=!1},t.prototype.removePanel=function(e){var t,n=this;this.panelsSizeY=0,this.panelsInitialModel=this.cloneModels(this.panels);for(var r=0;r<this.panelCollection.length;r++)this.panelCollection[r].id===e&&(GD(this.panelCollection[r]),this.panelCollection.splice(r,1)),this.panels[r].id===e&&(t=this.panels[r],this.panels.splice(r,1),this.panelsInitialModel.splice(r,1),this.updateOldRowColumn(),this.sortedPanel());this.updatePanels(),this.checkMediaQuery()&&(this.isPanelRemoved=!0,this.checkMediaQuerySizing(),this.isPanelRemoved=!1),this.gridPanelCollection.forEach((function(t){t.id===e&&n.gridPanelCollection.splice(n.gridPanelCollection.indexOf(t),1)})),this.updateCloneArrayObject(),this.checkForChanges(!1,null,[t])},t.prototype.movePanel=function(e,t,n){this.movePanelCalled=!0,this.panelsInitialModel=this.cloneModels(this.panels);var r=this.getCellInstance(e);if(!isNaN(t)&&null!==t&&!isNaN(n)&&null!==n&&r){n<0?n=0:n>this.columns&&(n=this.columns-r.sizeX),this.panelPropertyChange(r,{row:t,col:n});var i=document.getElementById(e);this.mainElement=i,this.startRow=parseInt(i.getAttribute("data-row"),10),this.startCol=parseInt(i.getAttribute("data-col"),10),this.setAttributes({value:{col:n.toString(),row:t.toString()}},i),this.updateOldRowColumn(),this.setPanelPosition(i,t,n),this.updatePanelLayout(i,r),this.updateRowHeight(),this.updatePanels(),this.updateCloneArrayObject(),this.mainElement=null,this.allowFloating&&this.moveItemsUpwards(),this.movePanelCalled=!1,this.checkForChanges(!1)}},t.prototype.setAttributes=function(e,t){for(var n=0;n<Object.keys(e).length;n++)Object.keys(e)&&(e[Object.keys(e)[n]].col&&t.setAttribute("data-col",e[Object.keys(e)[n]].col.toString()),e[Object.keys(e)[n]].row&&t.setAttribute("data-row",e[Object.keys(e)[n]].row.toString()),e[Object.keys(e)[n]].sizeX&&t.setAttribute("data-sizeX",e[Object.keys(e)[n]].sizeX.toString()),e[Object.keys(e)[n]].sizeY&&t.setAttribute("data-sizeY",e[Object.keys(e)[n]].sizeY.toString()),e[Object.keys(e)[n]].minSizeX&&t.setAttribute("data-minSizeX",e[Object.keys(e)[n]].minSizeX.toString()),e[Object.keys(e)[n]].minSizeY&&t.setAttribute("data-minSizeY",e[Object.keys(e)[n]].minSizeY.toString()),e[Object.keys(e)[n]].maxSizeX&&t.setAttribute("data-maxSizeY",e[Object.keys(e)[n]].maxSizeX.toString()),e[Object.keys(e)[n]].maxSizeY&&t.setAttribute("data-maxSizeY",e[Object.keys(e)[n]].maxSizeY.toString()))},t.prototype.resizePanel=function(e,t,n){this.panelsInitialModel=this.cloneModels(this.panels);var r=this.getCellInstance(e);this.resizeCalled=!0;var i=document.getElementById(e),o={event:null,element:i,isInteracted:!1};this.trigger("resizeStart",o),this.panelPropertyChange(r,{sizeX:t,sizeY:n}),this.setMinMaxValues(r),this.checkMinMaxValues(r),this.mainElement=i,this.setAttributes({value:{sizeX:r.sizeX.toString(),sizeY:r.sizeY.toString()}},i),this.setHeightAndWidth(i,r),this.updatePanelLayout(i,r),this.updatePanels(),this.updateRowHeight(),this.resizeCalled=!1,this.trigger("resizeStop",o),this.checkForChanges(!1)},t.prototype.destroy=function(){LD.remove(window,"resize",this.refreshListener),FD([this.element],["e-dashboardlayout","e-lib","e-responsive","e-control"]),this.element.removeAttribute("style");for(var t=0;t<this.dragCollection.length;t++)this.dragCollection[t].destroy();this.removeAllPanel(),e.prototype.destroy.call(this),this.clearTemplate(),this.renderReactTemplates()},t.prototype.removeAllPanel=function(){for(;this.element.firstElementChild;)GD(this.element.firstElementChild),this.clearTemplate()},t.prototype.setEnableRtl=function(){!0===this.enableRtl?UD([this.element],"e-rtl"):FD([this.element],"e-rtl")},t.prototype.updateCellSizeAndSpacing=function(){this.panelResponsiveUpdate(),this.setHeightWidth(),this.getRowColumn();for(var e=0;e<this.element.querySelectorAll(".e-panel").length;e++){var t=this.element.querySelectorAll(".e-panel")[e],n=this.getCellInstance(t.id);this.setHeightAndWidth(t,n),this.setPanelPosition(t,n.row,n.col)}},t.prototype.updatePanelsDynamically=function(e){this.removeAll(),this.setProperties({panels:e},!0),this.setOldRowCol(),this.table&&this.table.remove(),this.initialize(),this.checkMediaQuery()&&this.refresh(),this.showGridLines&&this.initGridLines()},t.prototype.checkForIDValues=function(e){var t=this;!VM(e)&&e.length>0?(this.panelID=0,e.forEach((function(e){e.id||(t.panelPropertyChange(e,{id:"layout_"+t.panelID.toString()}),t.panelID=t.panelID+1)}))):this.restrictDynamicUpdate=!0},t.prototype.onPropertyChanged=function(e,t){var n=this;e.panels&&e.panels.length>0&&e.panels[0]instanceof jx&&this.checkForIDValues(e.panels);for(var r=0,i=Object.keys(e);r<i.length;r++){switch(i[r]){case"enableRtl":this.setProperties({enableRtl:e.enableRtl},!0),this.setEnableRtl();break;case"mediaQuery":this.setProperties({mediaQuery:e.mediaQuery},!0),this.checkMediaQuery()&&this.checkMediaQuerySizing();break;case"allowDragging":this.setProperties({allowDragging:e.allowDragging},!0),this.ensureDrag();break;case"allowResizing":if(this.setProperties({allowResizing:e.allowResizing},!0),this.allowResizing)this.setClasses(this.panelCollection),this.resizeEvents();else{for(var o=this.element.querySelectorAll(".e-panel .e-panel-container .e-resize"),s=0;s<o.length;s++){var a="msie"===xD.info.name?"mousedown pointerdown":"mousedown",c=o[s];LD.remove(c,a,this.downResizeHandler),"msie"!==xD.info.name&&LD.remove(c,"touchstart",this.touchDownResizeHandler)}this.removeResizeClasses(this.panelCollection)}break;case"cellSpacing":this.setProperties({cellSpacing:e.cellSpacing},!0),this.updateCellSizeAndSpacing(),this.updateGridLines();break;case"draggableHandle":this.setProperties({draggableHandle:e.draggableHandle},!0),this.ensureDrag();break;case"allowFloating":this.setProperties({allowFloating:e.allowFloating},!0),this.moveItemsUpwards();break;case"showGridLines":this.showGridLines?(this.setProperties({showGridLines:e.showGridLines},!0),this.initGridLines()):this.table&&GD(this.table);break;case"allowPushing":this.setProperties({allowPushing:e.allowPushing},!0);break;case"panels":!e.columns&&!this.restrictDynamicUpdate&&e.panels[0]&&e.panels.length>0?(this.isRenderComplete=!1,this.updatePanelsDynamically(e.panels),this.isRenderComplete=!0):e.panels[0]&&e.panels.length?this.restrictDynamicUpdate=!1:(this.isRenderComplete=!1,this.updatePanelsDynamically(this.panels),this.isRenderComplete=!0);break;case"columns":this.isRenderComplete=!1,e.panels&&this.updatePanelsDynamically(e.panels),this.setProperties({columns:e.columns},!0),this.panelCollection=[],this.maxColumnValue=this.columns,this.calculateCellSize(),this.panels.forEach((function(e){if(n.setMinMaxValues(e),n.maxColumnValue<e.col||n.maxColumnValue<e.col+e.sizeX){var t=n.maxColumnValue-e.sizeX;n.panelPropertyChange(e,{col:t<0?0:t}),n.setXYAttributes(document.getElementById(e.id),e)}n.setHeightAndWidth(document.getElementById(e.id),e),n.panelCollection.push(document.getElementById(e.id)),n.setPanelPosition(document.getElementById(e.id),e.row,e.col),n.mainElement=document.getElementById(e.id),n.updatePanelLayout(document.getElementById(e.id),e),n.mainElement=null})),this.updatePanels(),this.updateCloneArrayObject(),this.isRenderComplete=!0,this.updateGridLines()}}},t.prototype.getPersistData=function(){return this.addOnPersist(["panels"])},t.prototype.mergePersistPanelData=function(e){var t=window.localStorage.getItem(this.getModuleName()+this.element.id);if(!VM(t)&&""!==t||!VM(e)){var n=VM(e)?JSON.parse(t):e,r=Object.keys(n);this.isProtectedOnChange=!0;for(var i=0,o=r;i<o.length;i++){var s=o[i];"object"!==typeof LM(s,this)||VM(LM(s,this))||Array.isArray(LM(s,this))&&"panels"===s&&this.mergePanels(n[s],this[s])}this.isProtectedOnChange=!1}},t.prototype.mergePanels=function(e,t){for(var n=e,r=function(e){i.checkForIDValues(t);var r=t.filter((function(t){return t.id===n[e].id}))[0];VM(r)||(n[e]=zM(r,n[e],{},!0))},i=this,o=0;o<n.length;o++)r(o)},t.prototype.getModuleName=function(){return"DashboardLayout"},Ax([ak(!0)],t.prototype,"allowDragging",void 0),Ax([ak(!1)],t.prototype,"allowResizing",void 0),Ax([ak(!0)],t.prototype,"allowPushing",void 0),Ax([ak(!0)],t.prototype,"enableHtmlSanitizer",void 0),Ax([ak(!0)],t.prototype,"allowFloating",void 0),Ax([ak(1)],t.prototype,"cellAspectRatio",void 0),Ax([ak([5,5])],t.prototype,"cellSpacing",void 0),Ax([ak(1)],t.prototype,"columns",void 0),Ax([ak(!1)],t.prototype,"showGridLines",void 0),Ax([ak(null)],t.prototype,"draggableHandle",void 0),Ax([ak("en-US")],t.prototype,"locale",void 0),Ax([ak("max-width: 600px")],t.prototype,"mediaQuery",void 0),Ax([(n=[],r=jx,function(e,t){var i={set:ik(n,t,r),get:rk(n,t,r),enumerable:!0,configurable:!0};Object.defineProperty(e,t,i),uk(e,t,"colProp",n,r)})],t.prototype,"panels",void 0),Ax([ak(["e-south-east"])],t.prototype,"resizableHandles",void 0),Ax([lk()],t.prototype,"change",void 0),Ax([lk()],t.prototype,"dragStart",void 0),Ax([lk()],t.prototype,"drag",void 0),Ax([lk()],t.prototype,"dragStop",void 0),Ax([lk()],t.prototype,"resizeStart",void 0),Ax([lk()],t.prototype,"resize",void 0),Ax([lk()],t.prototype,"resizeStop",void 0),Ax([lk()],t.prototype,"created",void 0),Ax([lk()],t.prototype,"destroyed",void 0),t=Ax([dk],t)}(xk),Fx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zx=["alt","className","disabled","form","id","readOnly","style","tabIndex","title","type","name","onClick","onFocus","onBlur"],Vx=["accordion","tab","splitter"],Bx=new RegExp("]"),Gx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mountingState=!1,t.attrKeys=[],t.cachedTimeOut=0,t.isAppendCalled=!1,t.initRenderCalled=!1,t.isReactForeceUpdate=!1,t.isReact=!0,t.isshouldComponentUpdateCalled=!1,t.isCreated=!1,t}return Fx(t,e),t.prototype.componentDidMount=function(){this.refreshChild(!0),this.canDelayUpdate=-1!==Vx.indexOf(this.getModuleName()),this.renderReactComponent(),this.portals&&this.portals.length&&(this.mountingState=!0,this.renderReactTemplates(),this.mountingState=!1)},t.prototype.componentDidUpdate=function(e){this.isshouldComponentUpdateCalled||!this.initRenderCalled||this.isReactForeceUpdate||(this.isshouldComponentUpdateCalled=!0,e!==this.props&&this.refreshProperties(this.props,!0))},t.prototype.renderReactComponent=function(){var e=this.reactElement;e&&!this.isAppendCalled&&(this.isAppendCalled=!0,this.appendTo(e))},t.prototype.shouldComponentUpdate=function(e){return this.isshouldComponentUpdateCalled=!0,this.initRenderCalled?(this.isAppendCalled||(clearTimeout(this.cachedTimeOut),this.isAppendCalled=!0,this.appendTo(this.reactElement)),this.updateProperties(e),!0):(this.updateProperties(e,!0),!0)},t.prototype.updateProperties=function(e,t){for(var n=this,r=zM({},e),i=Object.keys(e),o=VM(this.props.statelessTemplates)?["valueTemplate","itemTemplate","headerTemplate","content"]:this.props.statelessTemplates,s=0,a=i;s<a.length;s++){var c=a[s],l="className"===c;if("children"!==c)if(l||VM(this.htmlattributes[""+c])||this.htmlattributes[""+c]===r[""+c]||(this.htmlattributes[""+c]=r[""+c]),this.compareValues(this.props[""+c],e[""+c]))delete r[""+c];else if(-1!==this.attrKeys.indexOf(c))if(l){this.clsName=!0;for(var d=this.props[""+c].split(" "),u=0;u<d.length;u++)this.element.classList.remove(d[parseInt(u.toString(),10)]);for(var h=r[""+c].split(" "),p=0;p<h.length;p++)this.element.classList.add(h[parseInt(p.toString(),10)])}else"disabled"!==c&&delete r[""+c];else("value"===c&&e[""+c]===this[""+c]||o.indexOf(c)>-1&&("content"===c&&"function"===typeof r[""+c]||e[""+c].toString()===this[""+c].toString()))&&delete r[""+c]}r.children&&delete r.children,this.initRenderCalled&&(this.canDelayUpdate||this.props.delayUpdate)?setTimeout((function(){n.refreshProperties(r,e,t)})):this.refreshProperties(r,e,t)},t.prototype.refreshProperties=function(e,t,n){var r=VM(this.props.statelessTemplates)?[]:this.props.statelessTemplates;Object.keys(e).length&&(n||this.processComplexTemplate(e,this),this.setProperties(e,n)),-1===r.indexOf("directiveTemplates")&&this.refreshChild(n,t)},t.prototype.processComplexTemplate=function(e,t){var n=t.complexTemplate;if(n)for(var r in n){var i=n[""+r];e[""+r]&&PM(i,LM(r,e),e)}},t.prototype.getDefaultAttributes=function(){var e=this;this.isReact=!0;var n=Object.keys(this.props);this.htmlattributes||(this.htmlattributes={}),this.attrKeys=zx.concat(this.controlAttributes||[]);for(var r=0,i=n;r<i.length;r++){var o=i[r];-1===o.indexOf("data-")&&-1===o.indexOf("aria-")&&-1===this.attrKeys.indexOf(o)||this.htmlattributes[""+o]!==this.props[""+o]&&(this.htmlattributes[""+o]=this.props[""+o])}if(!this.htmlattributes.ref){this.htmlattributes.ref=function(t){e.reactElement=t};-1!==["autocomplete","combobox","dropdownlist","dropdowntree","multiselect","listbox","colorpicker","numerictextbox","textbox","uploader","maskedtextbox","slider","datepicker","datetimepicker","daterangepicker","timepicker","checkbox","switch","radio"].indexOf(this.getModuleName())&&(this.htmlattributes.key=""+t.reactUid,t.reactUid++)}if(this.clsName){for(var s=this.element.classList,a=this.htmlattributes.className,c=0;c<s.length;c++)-1===a.indexOf(s[parseInt(c.toString(),10)])&&(this.htmlattributes.className=this.htmlattributes.className+" "+s[parseInt(c.toString(),10)]);this.clsName=!1}return this.htmlattributes},t.prototype.trigger=function(e,t,n){var r=this;if(!0!==this.isDestroyed&&this.modelObserver){if(Bx.test(e)){var i=LM(e,this);i?(i.call(this,t),n&&n.call(this,t)):n&&n.call(this,t)}"change"!==e&&"input"!==e||this.props.onChange&&t.event&&this.props.onChange.call(void 0,{syntheticEvent:t.event,nativeEvent:{text:t.value},value:t.value,target:this});var o=this.isProtectedOnChange;this.isProtectedOnChange=!1,"created"===e?setTimeout((function(){r.isCreated=!0,r.isDestroyed||r.modelObserver.notify(e,t,n)}),10):this.modelObserver.notify(e,t,n),this.isProtectedOnChange=o}},t.prototype.compareValues=function(e,t){if(typeof e===typeof t){if(e===t)return!0;if((!VM(e)&&e.constructor)!==(!VM(t)&&t.constructor))return!1;if(e instanceof Date||e instanceof RegExp||e instanceof String||e instanceof Number)return e.toString()===t.toString();if(UM(e)||Array.isArray(e)){var n=e,r=t;return UM(n)&&(n=[e],r=[t]),this.compareObjects(n,r).status}}return!1},t.prototype.compareObjects=function(e,t,n){var r=!0,i=[];if(e.length===t.length)for(var o=0,s=t.length;o<s;o++){var a={},c=e[parseInt(o.toString(),10)],l=t[parseInt(o.toString(),10)],d=Object.keys(l);if(0!==d.length)for(var u=0,h=d;u<h.length;u++){var p=h[u],f=c[""+p],m=l[""+p];if("items"===p)for(var g=0;g<m.length;g++)if("richtexteditor"===this.getModuleName()&&"object"===typeof m[parseInt(g.toString(),10)])return{status:!0};if("grid"===this.getModuleName()&&"field"===p&&(a[""+p]=m),!c.hasOwnProperty(p)||!this.compareValues(f,m)){if(!n)return{status:!1};r=!1,a[""+p]=m}}else if(t[parseInt(o.toString(),10)]===e[parseInt(o.toString(),10)])r=!0;else{if(!n)return{status:!1};r=!1}Object.keys(a).length&&i.push({index:o,value:a,key:n})}else r=!1;return{status:r,changedProperties:i}},t.prototype.refreshChild=function(e,t){if(this.checkInjectedModules){for(var n=this.getInjectedModules()||[],r=0,i=this.getInjectedServices()||[];r<i.length;r++){var o=i[r];-1===n.indexOf(o)&&n.push(o)}this.injectedModules=n}if(this.directivekeys){var s=[],a=this.validateChildren({},this.directivekeys,t||this.props);if(a&&Object.keys(a).length){if(!e&&this.skipRefresh)for(var c=0,l=this.skipRefresh;c<l.length;c++){delete a[""+l[c]]}if(this.prevProperties)for(var d=Object.keys(this.prevProperties),u=0;u<d.length;u++){var h=d[parseInt(u.toString(),10)];if(a.hasOwnProperty(h)){var p=this.compareObjects(this.prevProperties[""+h],a[""+h],h);if(p.status)delete a[""+h];else{p.changedProperties.length&&(s=s.concat(p.changedProperties));var f={};f[""+h]=a[""+h],this.prevProperties=zM(this.prevProperties,f)}}}else this.prevProperties=zM({},a,{},!0);if(s.length)if("grid"===this.getModuleName()&&"columns"===h)for(var m=0,g=this.columns;m<g.length;m++){if(LM("field",g[parseInt(m.toString(),10)])===LM(m+".value.field",s)){var y=LM(s[parseInt(m.toString(),10)].key+"."+s[parseInt(m.toString(),10)].index,this);y&&y.setProperties?y.setProperties(s[parseInt(m.toString(),10)].value):zM(y,s[parseInt(m.toString(),10)].value)}else this.setProperties(a,e)}else for(var v=0,_=s;v<_.length;v++){var E=_[v],S=LM(E.key+"."+E.index,this);S&&S.setProperties?S.setProperties(E.value):zM(S,E.value)}else this.setProperties(a,e)}}},t.prototype.componentWillUnmount=function(){clearTimeout(this.cachedTimeOut);this.initRenderCalled&&this.isAppendCalled&&this.element&&(["dropdowntree","checkbox"].indexOf(this.getModuleName())||document.body.contains(this.element))&&!this.isDestroyed&&this.isCreated&&this.destroy()},t.prototype.appendReactElement=function(e,t){var n=s.createPortal(e,t);this.portals?this.portals.push(n):this.portals=[n]},t.prototype.renderReactTemplates=function(e){this.isReactForeceUpdate=!0,e?this.forceUpdate(e):this.forceUpdate(),this.isReactForeceUpdate=!1},t.prototype.clearTemplate=function(e,t,n){var r=this,i=[];e&&e.length?Array.prototype.forEach.call(e,(function(e){var n=0,o=0;if(r.portals.forEach((function(t){t.propName===e&&(i.push(o),o++)})),VM(t)||r.portals[i[(""+t)[parseInt(n.toString(),10)]]].propName!==e)for(var s=0;s<r.portals.length;s++)r.portals[parseInt(s.toString(),10)].propName===e&&(r.portals.splice(s,1),s--);else r.portals.splice(t,1),n++})):this.portals=[],this.renderReactTemplates(n)},t.prototype.validateChildren=function(e,t,n){for(var i=!1,o=0,s=r.Children.toArray(n.children);o<s.length;o++){var a=s[o],c=this.getChildType(a),l=t[""+c];if(c&&t){var d=this.getChildProps(r.Children.toArray(a.props.children),l);d.length&&(i=!0,e[a.type.propertyName||c]=d)}}return i?e:null},t.prototype.getChildType=function(e){return e.type&&e.type.isDirective&&e.type.moduleName||""},t.prototype.getChildProps=function(e,t){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r],s=!1,a=void 0;"string"===typeof t?(s=!0,a=t):a=Object.keys(t)[0];var c=o.props;if(this.getChildType(o)===a)if(s||!c.children){var l=zM({},c,{},!0);this.processComplexTemplate(l,o.type),n.push(l)}else{var d=this.validateChildren(zM({},c),t[""+a],c)||c;d.children&&delete d.children,this.processComplexTemplate(d,o.type),n.push(d)}}return n},t.prototype.getInjectedServices=function(){for(var e=0,t=r.Children.toArray(this.props.children);e<t.length;e++){var n=t[e];if(n.type.isService)return n.props.services}return[]},t.reactUid=1,t}(r.Component);var Hx,Wx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yx=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wx(t,e),t.prototype.render=function(){return null},t.isDirective=!0}(r.PureComponent),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),qx=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Yx(t,e),t.prototype.render=function(){return null},t.isService=!0}(r.PureComponent),bx.compile);Hx={compile:function(e,t){return"string"===typeof e?qx(e,t):function(t,n,i,o){var a,c=e,l=t;"object"===typeof c&&(c=e.template,l=zM({},t,e.data||{})),a=o||document.createElement("div");var d=r.createElement(c,l),u=s.createPortal(d,a);if(u.propName=i,n.portals?n.portals.push(u):n.portals=[u],!o)return[a]}}},bx.compile=Hx.compile;var Kx,Qx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jx=function(e){function t(t){var n=e.call(this,t)||this;return n.initRenderCalled=!1,n.checkInjectedModules=!1,n.directivekeys={panels:"panel"},n.immediateRender=!1,n.portals=[],n}return Qx(t,e),t.prototype.render=function(){if(!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return r.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));e.prototype.render.call(this),this.initRenderCalled=!0},t}(Ux);Kx=Jx,[Gx,r.Component].forEach((function(e){Object.getOwnPropertyNames(e.prototype).forEach((function(t){"isMounted"!==t&&"replaceState"!==t&&(Kx.prototype[""+t]=e.prototype[""+t])}))}));const Xx=e=>{const{users:t,tracks:n}=e,r=new Array(t.length<6?6:t.length).fill(0);return(0,Me.jsx)("div",{className:"control-section",id:"predefine_control",children:(0,Me.jsx)("div",{className:"content-wrapper",style:{maxWidth:"95%",margin:"10px auto"},children:(0,Me.jsxs)(Jx,{created:()=>{},columns:6,id:"predefine_dashboard",cellSpacing:[5,5],resizeStop:e=>{if(e.element&&e.element.querySelector(".e-panel-container .e-panel-content div div div")){let t=e.element.querySelector(".e-panel-container .e-panel-content div div div").ej2_instances[0];const n=e.element.querySelector(".e-panel-container .e-panel-content").clientHeight;t.height="".concat(n-20),t.width="100%",t.refresh()}},allowResizing:!0,allowDragging:!0,children:[(0,Me.jsxs)("div",{id:"one",className:"e-panel","data-row":"0","data-col":"0","data-sizex":"6","data-sizey":"2",children:[(0,Me.jsx)("span",{id:"close",className:"e-template-icon e-clear-icon"}),(0,Me.jsx)("div",{className:"e-panel-container",children:(0,Me.jsx)(AM,{className:"vid",videoTrack:n[0],style:{height:"95%",width:"570px",margin:"8px auto"}})})]}),r.map(((e,n)=>{var r;return(0,Me.jsxs)("div",{id:"user-".concat(n),className:"e-panel","data-row":"2","data-col":n,"data-sizex":"1","data-sizey":"1",children:[(0,Me.jsx)("span",{id:"close",className:"e-template-icon e-clear-icon"}),(0,Me.jsx)("div",{className:"e-panel-container",children:(null===(r=t[n])||void 0===r?void 0:r.videoTrack)&&(0,Me.jsx)(AM,{className:"vid",videoTrack:t[n].videoTrack,style:{height:"100%",width:"100%"}},t[n].uid)})]},"user-".concat(n))}))]})})})},Zx=e=>{const{setInCall:t,channelName:n}=e,[i,o]=MM(),[s,a]=(0,r.useState)([]),[c,l]=(0,r.useState)(!1),d=i(),{ready:u,tracks:h}=o();return(0,r.useEffect)((()=>{u&&h&&(console.log("init ready"),(async e=>{d.on("user-published",(async(e,t)=>{var n;await d.subscribe(e,t),console.log("subscribe success"),"audio"===t&&(null===(n=e.audioTrack)||void 0===n||n.play())})),d.on("user-unpublished",((e,t)=>{var n;console.log("unpublished",e,t),"audio"===t&&(null===(n=e.audioTrack)||void 0===n||n.stop()),"video"===t&&a((t=>t.filter((t=>t.uid!==e.uid))))})),d.on("user-left",(e=>{console.log("leaving",e),a((t=>t.filter((t=>t.uid!==e.uid))))})),await d.join("5524bffbadca4a1698c527eb676b5b74",e,"007eJxTYHBROWS472v8Lz+Vkqp5HPoGc+69St7gkpSdOfvN1L0Ju2YoMJiaGpkkpaUlJaYkJ5okGppZWiSbGpmnJpmZmyWZJpmb5B88mdoQyMiQJ6bNwsgAgSA+O0NyRmJeXmoOAwMA6nUhRw==",null),h&&await d.publish([h[0],h[1]]),l(!0)})(n))}),[n,u,h]),(0,Me.jsx)("div",{className:"App",children:c&&h&&(0,Me.jsx)(Xx,{users:s,tracks:h})})},$x=e=>{const{setInCall:t,setChannelName:n}=e;return(0,Me.jsx)("div",{className:"e-card wrapper",children:(0,Me.jsxs)("div",{className:"wrapper-inner",children:[(0,Me.jsx)("h1",{className:"heading",children:"Join a Meeting"}),(0,Me.jsxs)("form",{className:"join",children:[(0,Me.jsx)("input",{type:"text",placeholder:"Enter Channel Name",floatLabelType:"Auto",onChange:e=>n(e.target.value)}),(0,Me.jsx)("button",{type:"submit",onClick:e=>{e.preventDefault(),t(!0)},children:"Join"})]})]})})},eL=()=>{const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)("");return(0,Me.jsx)("div",{children:e?(0,Me.jsx)(Zx,{setInCall:t,channelName:n}):(0,Me.jsx)($x,{setInCall:t,setChannelName:i})})};var tL=__webpack_require__(1604),nL=__webpack_require__.n(tL);function rL(){const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)(null),[o,s]=(0,r.useState)(null);return(0,Me.jsxs)("div",{className:"App",children:[(0,Me.jsx)("button",{onClick:()=>{let n=nL().createClient({mode:"rtc",codec:"h264"});n.init("5524bffbadca4a1698c527eb676b5b74",(()=>{n.join(null,"abc",null,(t=>{let r=nL().createStream({streamID:t,audio:!0,video:!1,screen:!1});s(r),r.init((()=>{n.publish(r),r.play("local_stream")})),n.on("stream-added",(t=>{let n=t.stream;n.getId();e.subscribed(n)})),n.on("stream-subscribed",(e=>{e.stream.play("remote_stream")}))}))})),t(n)},children:"JOIN CALL"}),(0,Me.jsx)("div",{id:"local_stream"}),(0,Me.jsx)("div",{id:"remote_stream"})]})}var iL=__webpack_require__(9472),oL=__webpack_require__.n(iL);const sL=()=>{const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)([]),[o,s]=(0,r.useState)([]);(0,r.useEffect)((()=>{const e=new(oL().connection)({appKey:"611099035#1281065"});return e.addEventHandler("connection&message",{onConnected:()=>{console.log("Connect success !")},onDisconnected:()=>{console.log("Logout success !")},onTextMessage:e=>{console.log(e),i((t=>[...t,e]))},onTokenWillExpire:e=>{console.log("Token is about to expire")},onTokenExpired:e=>{console.log("The token has expired")},onError:e=>{console.error("Error:",e)}}),t(e),()=>{e&&e.close()}}),[]);return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("link",{href:"https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css",rel:"stylesheet"}),(0,Me.jsx)("div",{className:"container",children:(0,Me.jsx)("div",{className:"row clearfix",children:(0,Me.jsx)("div",{className:"col-lg-12",children:(0,Me.jsx)("div",{className:"card chat-app",children:(0,Me.jsxs)("div",{className:"chat",children:[(0,Me.jsx)("div",{className:"chat-header clearfix",children:(0,Me.jsx)("div",{className:"row",children:(0,Me.jsxs)("div",{className:"col-lg-6",children:[(0,Me.jsx)("a",{"data-toggle":"modal","data-target":"#view_info",children:(0,Me.jsx)("img",{src:"https://bootdey.com/img/Content/avatar/avatar2.png",alt:"avatar"})}),(0,Me.jsxs)("div",{className:"chat-about",children:[(0,Me.jsx)("h6",{className:"m-b-0",children:"Aiden Chavez"}),(0,Me.jsx)("small",{children:"Last seen: 2 hours ago"})]})]})})}),(0,Me.jsx)("div",{className:"chat-history",children:(0,Me.jsxs)("ul",{className:"m-b-0",children:[(0,Me.jsxs)("li",{className:"clearfix",children:[(0,Me.jsxs)("div",{className:"message-data text-right",children:[(0,Me.jsx)("span",{className:"message-data-time",children:"10:10 AM, Today"}),(0,Me.jsx)("img",{src:"https://bootdey.com/img/Content/avatar/avatar7.png",alt:"avatar"})]}),(0,Me.jsx)("div",{className:"message other-message float-right",children:" Hi Aiden, how are you? How is the project coming along? "})]}),(0,Me.jsxs)("li",{className:"clearfix",children:[(0,Me.jsx)("div",{className:"message-data",children:(0,Me.jsx)("span",{className:"message-data-time",children:"10:12 AM, Today"})}),(0,Me.jsx)("div",{className:"message my-message",children:"Are we meeting today?"})]}),(0,Me.jsxs)("li",{className:"clearfix",children:[(0,Me.jsx)("div",{className:"message-data",children:(0,Me.jsx)("span",{className:"message-data-time",children:"10:15 AM, Today"})}),(0,Me.jsx)("div",{className:"message my-message",children:"Project has been already finished and I have results to show you."})]})]})}),(0,Me.jsx)("div",{className:"chat-message clearfix",children:(0,Me.jsxs)("div",{className:"input-group mb-0",children:[(0,Me.jsx)("div",{className:"input-group-prepend",children:(0,Me.jsx)("span",{className:"input-group-text",children:(0,Me.jsx)("i",{className:"fa fa-send"})})}),(0,Me.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter text here..."})]})})]})})})})})]})};var aL=e=>"checkbox"===e.type,cL=e=>e instanceof Date,lL=e=>null==e;const dL=e=>"object"===typeof e;var uL=e=>!lL(e)&&!Array.isArray(e)&&dL(e)&&!cL(e),hL=e=>uL(e)&&e.target?aL(e.target)?e.target.checked:e.target.value:e,pL=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),fL=e=>{const t=e.constructor&&e.constructor.prototype;return uL(t)&&t.hasOwnProperty("isPrototypeOf")},mL="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function gL(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(mL&&(e instanceof Blob||e instanceof FileList)||!n&&!uL(e))return e;if(t=n?[]:{},n||fL(e))for(const n in e)e.hasOwnProperty(n)&&(t[n]=gL(e[n]));else t=e}return t}var yL=e=>Array.isArray(e)?e.filter(Boolean):[],vL=e=>void 0===e,_L=(e,t,n)=>{if(!t||!uL(e))return n;const r=yL(t.split(/[,[\].]+?/)).reduce(((e,t)=>lL(e)?e:e[t]),e);return vL(r)||r===e?vL(e[t])?n:e[t]:r},EL=e=>"boolean"===typeof e;const SL={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},TL={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},bL="max",IL="min",NL="maxLength",CL="minLength",wL="pattern",RL="required",AL="validate";r.createContext(null);var OL=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(i,o,{get:()=>{const i=o;return t._proxyFormState[i]!==TL.all&&(t._proxyFormState[i]=!r||TL.all),n&&(n[i]=!0),e[i]}});return i},ML=e=>uL(e)&&!Object.keys(e).length,DL=(e,t,n,r)=>{n(e);const{name:i,...o}=e;return ML(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find((e=>t[e]===(!r||TL.all)))},kL=e=>Array.isArray(e)?e:[e];function xL(e){const t=r.useRef(e);t.current=e,r.useEffect((()=>{const n=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}}),[e.disabled])}var LL=e=>"string"===typeof e,PL=(e,t,n,r,i)=>LL(e)?(r&&t.watch.add(e),_L(n,e,i)):Array.isArray(e)?e.map((e=>(r&&t.watch.add(e),_L(n,e)))):(r&&(t.watchAll=!0),n);var jL=e=>/^\w*$/.test(e),UL=e=>yL(e.replace(/["|']|\]/g,"").split(/\.|\[/)),FL=(e,t,n)=>{let r=-1;const i=jL(t)?[t]:UL(t),o=i.length,s=o-1;for(;++r<o;){const t=i[r];let o=n;if(r!==s){const n=e[t];o=uL(n)||Array.isArray(n)?n:isNaN(+i[r+1])?{}:[]}e[t]=o,e=e[t]}return e};var zL=(e,t,n,r,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:i||!0}}:{},VL=e=>({isOnSubmit:!e||e===TL.onSubmit,isOnBlur:e===TL.onBlur,isOnChange:e===TL.onChange,isOnAll:e===TL.all,isOnTouch:e===TL.onTouched}),BL=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length)))));const GL=(e,t,n,r)=>{for(const i of n||Object.keys(e)){const n=_L(e,i);if(n){const{_f:e,...o}=n;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],i)&&!r)break;if(e.ref&&t(e.ref,e.name)&&!r)break;GL(o,t)}else uL(o)&&GL(o,t)}}};var HL=(e,t,n)=>{const r=yL(_L(e,n));return FL(r,"root",t[n]),FL(e,n,r),e},WL=e=>"file"===e.type,YL=e=>"function"===typeof e,qL=e=>{if(!mL)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},KL=e=>LL(e),QL=e=>"radio"===e.type,JL=e=>e instanceof RegExp;const XL={value:!1,isValid:!1},ZL={value:!0,isValid:!0};var $L=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!vL(e[0].attributes.value)?vL(e[0].value)||""===e[0].value?ZL:{value:e[0].value,isValid:!0}:ZL:XL}return XL};const eP={isValid:!1,value:null};var tP=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),eP):eP;function nP(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(KL(e)||Array.isArray(e)&&e.every(KL)||EL(e)&&!e)return{type:n,message:KL(e)?e:"",ref:t}}var rP=e=>uL(e)&&!JL(e)?e:{value:e,message:""},iP=async(e,t,n,r,i)=>{const{ref:o,refs:s,required:a,maxLength:c,minLength:l,min:d,max:u,pattern:h,validate:p,name:f,valueAsNumber:m,mount:g,disabled:y}=e._f,v=_L(t,f);if(!g||y)return{};const _=s?s[0]:o,E=e=>{r&&_.reportValidity&&(_.setCustomValidity(EL(e)?"":e||""),_.reportValidity())},S={},T=QL(o),b=aL(o),I=T||b,N=(m||WL(o))&&vL(o.value)&&vL(v)||qL(o)&&""===o.value||""===v||Array.isArray(v)&&!v.length,C=zL.bind(null,f,n,S),w=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NL,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:CL;const s=e?t:n;S[f]={type:e?r:i,message:s,ref:o,...C(e?r:i,s)}};if(i?!Array.isArray(v)||!v.length:a&&(!I&&(N||lL(v))||EL(v)&&!v||b&&!$L(s).isValid||T&&!tP(s).isValid)){const{value:e,message:t}=KL(a)?{value:!!a,message:a}:rP(a);if(e&&(S[f]={type:RL,message:t,ref:_,...C(RL,t)},!n))return E(t),S}if(!N&&(!lL(d)||!lL(u))){let e,t;const r=rP(u),i=rP(d);if(lL(v)||isNaN(v)){const n=o.valueAsDate||new Date(v),s=e=>new Date((new Date).toDateString()+" "+e),a="time"==o.type,c="week"==o.type;LL(r.value)&&v&&(e=a?s(v)>s(r.value):c?v>r.value:n>new Date(r.value)),LL(i.value)&&v&&(t=a?s(v)<s(i.value):c?v<i.value:n<new Date(i.value))}else{const n=o.valueAsNumber||(v?+v:v);lL(r.value)||(e=n>r.value),lL(i.value)||(t=n<i.value)}if((e||t)&&(w(!!e,r.message,i.message,bL,IL),!n))return E(S[f].message),S}if((c||l)&&!N&&(LL(v)||i&&Array.isArray(v))){const e=rP(c),t=rP(l),r=!lL(e.value)&&v.length>+e.value,i=!lL(t.value)&&v.length<+t.value;if((r||i)&&(w(r,e.message,t.message),!n))return E(S[f].message),S}if(h&&!N&&LL(v)){const{value:e,message:t}=rP(h);if(JL(e)&&!v.match(e)&&(S[f]={type:wL,message:t,ref:o,...C(wL,t)},!n))return E(t),S}if(p)if(YL(p)){const e=nP(await p(v,t),_);if(e&&(S[f]={...e,...C(AL,e.message)},!n))return E(e.message),S}else if(uL(p)){let e={};for(const r in p){if(!ML(e)&&!n)break;const i=nP(await p[r](v,t),_,r);i&&(e={...i,...C(r,i.message)},E(i.message),n&&(S[f]=e))}if(!ML(e)&&(S[f]={ref:_,...e},!n))return S}return E(!0),S};function oP(e,t){const n=Array.isArray(t)?t:jL(t)?[t]:UL(t),r=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=vL(e)?r++:e[t[r++]];return e}(e,n),i=n.length-1,o=n[i];return r&&delete r[o],0!==i&&(uL(r)&&ML(r)||Array.isArray(r)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!vL(e[t]))return!1;return!0}(r))&&oP(e,n.slice(0,-1)),e}var sP=()=>{let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}},aP=e=>lL(e)||!dL(e);function cP(e,t){if(aP(e)||aP(t))return e===t;if(cL(e)&&cL(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){const n=e[i];if(!r.includes(i))return!1;if("ref"!==i){const e=t[i];if(cL(n)&&cL(e)||uL(n)&&uL(e)||Array.isArray(n)&&Array.isArray(e)?!cP(n,e):n!==e)return!1}}return!0}var lP=e=>"select-multiple"===e.type,dP=e=>QL(e)||aL(e),uP=e=>qL(e)&&e.isConnected,hP=e=>{for(const t in e)if(YL(e[t]))return!0;return!1};function pP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Array.isArray(e);if(uL(e)||n)for(const r in e)Array.isArray(e[r])||uL(e[r])&&!hP(e[r])?(t[r]=Array.isArray(e[r])?[]:{},pP(e[r],t[r])):lL(e[r])||(t[r]=!0);return t}function fP(e,t,n){const r=Array.isArray(e);if(uL(e)||r)for(const i in e)Array.isArray(e[i])||uL(e[i])&&!hP(e[i])?vL(t)||aP(n[i])?n[i]=Array.isArray(e[i])?pP(e[i],[]):{...pP(e[i])}:fP(e[i],lL(t)?{}:t[i],n[i]):n[i]=!cP(e[i],t[i]);return n}var mP=(e,t)=>fP(e,t,pP(t)),gP=(e,t)=>{let{valueAsNumber:n,valueAsDate:r,setValueAs:i}=t;return vL(e)?e:n?""===e?NaN:e?+e:e:r&&LL(e)?new Date(e):i?i(e):e};function yP(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return WL(t)?t.files:QL(t)?tP(e.refs).value:lP(t)?[...t.selectedOptions].map((e=>{let{value:t}=e;return t})):aL(t)?$L(e.refs).value:gP(vL(t.value)?e.ref.value:t.value,e)}var vP=(e,t,n,r)=>{const i={};for(const o of e){const e=_L(t,o);e&&FL(i,o,e._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}},_P=e=>vL(e)?e:JL(e)?e.source:uL(e)?JL(e.value)?e.value.source:e.value:e,EP=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function SP(e,t,n){const r=_L(e,n);if(r||jL(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const r=i.join("."),o=_L(t,r),s=_L(e,r);if(o&&!Array.isArray(o)&&n!==r)return{name:n};if(s&&s.type)return{name:r,error:s};i.pop()}return{name:n}}var TP=(e,t,n,r,i)=>!i.isOnAll&&(!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:!(n?r.isOnChange:i.isOnChange)||e),bP=(e,t)=>!yL(_L(e,t)).length&&oP(e,t);const IP={mode:TL.onSubmit,reValidateMode:TL.onChange,shouldFocusError:!0};function NP(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={...IP,...t},r={submitCount:0,isDirty:!1,isLoading:YL(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},i={},o=(uL(n.defaultValues)||uL(n.values))&&gL(n.defaultValues||n.values)||{},s=n.shouldUnregister?{}:gL(o),a={action:!1,mount:!1,watch:!1},c={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},u={values:sP(),array:sP(),state:sP()},h=VL(n.mode),p=VL(n.reValidateMode),f=n.criteriaMode===TL.all,m=async e=>{if(d.isValid||e){const e=n.resolver?ML((await E()).errors):await S(i,!0);e!==r.isValid&&u.state.next({isValid:e})}},g=(e,t)=>{(d.isValidating||d.validatingFields)&&((e||Array.from(c.mount)).forEach((e=>e&&FL(r.validatingFields,e,!!t))),r.isValidating=Object.values(r.validatingFields).some((e=>e)),u.state.next({validatingFields:r.validatingFields,isValidating:r.isValidating}))},y=(e,t,n,r)=>{const c=_L(i,e);if(c){const i=_L(s,e,vL(n)?_L(o,e):n);vL(i)||r&&r.defaultChecked||t?FL(s,e,t?i:yP(c._f)):I(e,i),a.mount&&m()}},v=(e,t,n,s,a)=>{let c=!1,l=!1;const h={name:e},p=!(!_L(i,e)||!_L(i,e)._f.disabled);if(!n||s){d.isDirty&&(l=r.isDirty,r.isDirty=h.isDirty=T(),c=l!==h.isDirty);const n=p||cP(_L(o,e),t);l=!(p||!_L(r.dirtyFields,e)),n||p?oP(r.dirtyFields,e):FL(r.dirtyFields,e,!0),h.dirtyFields=r.dirtyFields,c=c||d.dirtyFields&&l!==!n}if(n){const t=_L(r.touchedFields,e);t||(FL(r.touchedFields,e,n),h.touchedFields=r.touchedFields,c=c||d.touchedFields&&t!==n)}return c&&a&&u.state.next(h),c?h:{}},_=(n,i,o,s)=>{const a=_L(r.errors,n),c=d.isValid&&EL(i)&&r.isValid!==i;if(t.delayError&&o?(e=(e=>t=>{clearTimeout(l),l=setTimeout(e,t)})((()=>((e,t)=>{FL(r.errors,e,t),u.state.next({errors:r.errors})})(n,o))),e(t.delayError)):(clearTimeout(l),e=null,o?FL(r.errors,n,o):oP(r.errors,n)),(o?!cP(a,o):a)||!ML(s)||c){const e={...s,...c&&EL(i)?{isValid:i}:{},errors:r.errors,name:n};r={...r,...e},u.state.next(e)}},E=async e=>{g(e,!0);const t=await n.resolver(s,n.context,vP(e||c.mount,i,n.criteriaMode,n.shouldUseNativeValidation));return g(e),t},S=async function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{valid:!0};for(const o in e){const a=e[o];if(a){const{_f:e,...l}=a;if(e){const l=c.array.has(e.name);g([o],!0);const d=await iP(a,s,f,n.shouldUseNativeValidation&&!t,l);if(g([o]),d[e.name]&&(i.valid=!1,t))break;!t&&(_L(d,e.name)?l?HL(r.errors,d,e.name):FL(r.errors,e.name,d[e.name]):oP(r.errors,e.name))}l&&await S(l,t,i)}}return i.valid},T=(e,t)=>(e&&t&&FL(s,e,t),!cP(O(),o)),b=(e,t,n)=>PL(e,c,{...a.mount?s:vL(t)?o:LL(e)?{[e]:t}:t},n,t),I=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=_L(i,e);let o=t;if(r){const n=r._f;n&&(!n.disabled&&FL(s,e,gP(t,n)),o=qL(n.ref)&&lL(t)?"":t,lP(n.ref)?[...n.ref.options].forEach((e=>e.selected=o.includes(e.value))):n.refs?aL(n.ref)?n.refs.length>1?n.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(o)?!!o.find((t=>t===e.value)):o===e.value))):n.refs[0]&&(n.refs[0].checked=!!o):n.refs.forEach((e=>e.checked=e.value===o)):WL(n.ref)?n.ref.value="":(n.ref.value=o,n.ref.type||u.values.next({name:e,values:{...s}})))}(n.shouldDirty||n.shouldTouch)&&v(e,o,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&A(e)},N=(e,t,n)=>{for(const r in t){const o=t[r],s="".concat(e,".").concat(r),a=_L(i,s);!c.array.has(e)&&aP(o)&&(!a||a._f)||cL(o)?I(s,o,n):N(s,o,n)}},C=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l=_L(i,e),h=c.array.has(e),p=gL(t);FL(s,e,p),h?(u.array.next({name:e,values:{...s}}),(d.isDirty||d.dirtyFields)&&n.shouldDirty&&u.state.next({name:e,dirtyFields:mP(o,s),isDirty:T(e,p)})):!l||l._f||lL(p)?I(e,p,n):N(e,p,n),BL(e,c)&&u.state.next({...r}),u.values.next({name:a.mount?e:void 0,values:{...s}})},w=async t=>{const o=t.target;let a=o.name,l=!0;const y=_L(i,a),T=e=>{l=Number.isNaN(e)||e===_L(s,a,e)};if(y){let b,I;const N=o.type?yP(y._f):hL(t),C=t.type===SL.BLUR||t.type===SL.FOCUS_OUT,w=!EP(y._f)&&!n.resolver&&!_L(r.errors,a)&&!y._f.deps||TP(C,_L(r.touchedFields,a),r.isSubmitted,p,h),R=BL(a,c,C);FL(s,a,N),C?(y._f.onBlur&&y._f.onBlur(t),e&&e(0)):y._f.onChange&&y._f.onChange(t);const O=v(a,N,C,!1),M=!ML(O)||R;if(!C&&u.values.next({name:a,type:t.type,values:{...s}}),w)return d.isValid&&m(),M&&u.state.next({name:a,...R?{}:O});if(!C&&R&&u.state.next({...r}),n.resolver){const{errors:e}=await E([a]);if(T(N),l){const t=SP(r.errors,i,a),n=SP(e,i,t.name||a);b=n.error,a=n.name,I=ML(e)}}else g([a],!0),b=(await iP(y,s,f,n.shouldUseNativeValidation))[a],g([a]),T(N),l&&(b?I=!1:d.isValid&&(I=await S(i,!0)));l&&(y._f.deps&&A(y._f.deps),_(a,I,b,O))}},R=(e,t)=>{if(_L(r.errors,t)&&e.focus)return e.focus(),1},A=async function(e){let t,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=kL(e);if(n.resolver){const n=await(async e=>{const{errors:t}=await E(e);if(e)for(const n of e){const e=_L(t,n);e?FL(r.errors,n,e):oP(r.errors,n)}else r.errors=t;return t})(vL(e)?e:a);t=ML(n),o=e?!a.some((e=>_L(n,e))):t}else e?(o=(await Promise.all(a.map((async e=>{const t=_L(i,e);return await S(t&&t._f?{[e]:t}:t)})))).every(Boolean),(o||r.isValid)&&m()):o=t=await S(i);return u.state.next({...!LL(e)||d.isValid&&t!==r.isValid?{}:{name:e},...n.resolver||!e?{isValid:t}:{},errors:r.errors}),s.shouldFocus&&!o&&GL(i,R,e?a:c.mount),o},O=e=>{const t={...o,...a.mount?s:{}};return vL(e)?t:LL(e)?_L(t,e):e.map((e=>_L(t,e)))},M=(e,t)=>({invalid:!!_L((t||r).errors,e),isDirty:!!_L((t||r).dirtyFields,e),isTouched:!!_L((t||r).touchedFields,e),isValidating:!!_L((t||r).validatingFields,e),error:_L((t||r).errors,e)}),D=(e,t,n)=>{const o=(_L(i,e,{_f:{}})._f||{}).ref;FL(r.errors,e,{...t,ref:o}),u.state.next({name:e,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&o&&o.focus&&o.focus()},k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const a of e?kL(e):c.mount)c.mount.delete(a),c.array.delete(a),t.keepValue||(oP(i,a),oP(s,a)),!t.keepError&&oP(r.errors,a),!t.keepDirty&&oP(r.dirtyFields,a),!t.keepTouched&&oP(r.touchedFields,a),!t.keepIsValidating&&oP(r.validatingFields,a),!n.shouldUnregister&&!t.keepDefaultValue&&oP(o,a);u.values.next({values:{...s}}),u.state.next({...r,...t.keepDirty?{isDirty:T()}:{}}),!t.keepIsValid&&m()},x=e=>{let{disabled:t,name:n,field:r,fields:i,value:o}=e;if(EL(t)){const e=t?void 0:vL(o)?yP(r?r._f:_L(i,n)._f):o;FL(s,n,e),v(n,e,!1,!1,!0)}},L=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=_L(i,e);const s=EL(t.disabled);return FL(i,e,{...r||{},_f:{...r&&r._f?r._f:{ref:{name:e}},name:e,mount:!0,...t}}),c.mount.add(e),r?x({field:r,disabled:t.disabled,name:e,value:t.value}):y(e,!0,t.value),{...s?{disabled:t.disabled}:{},...n.progressive?{required:!!t.required,min:_P(t.min),max:_P(t.max),minLength:_P(t.minLength),maxLength:_P(t.maxLength),pattern:_P(t.pattern)}:{},name:e,onChange:w,onBlur:w,ref:s=>{if(s){L(e,t),r=_L(i,e);const n=vL(s.value)&&s.querySelectorAll&&s.querySelectorAll("input,select,textarea")[0]||s,a=dP(n),c=r._f.refs||[];if(a?c.find((e=>e===n)):n===r._f.ref)return;FL(i,e,{_f:{...r._f,...a?{refs:[...c.filter(uP),n,...Array.isArray(_L(o,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n}}}),y(e,!1,void 0,n)}else r=_L(i,e,{}),r._f&&(r._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!pL(c.array,e)||!a.action)&&c.unMount.add(e)}}},P=()=>n.shouldFocusError&&GL(i,R,c.mount),j=(e,t)=>async o=>{let a;o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let c=gL(s);if(u.state.next({isSubmitting:!0}),n.resolver){const{errors:e,values:t}=await E();r.errors=e,c=t}else await S(i);if(oP(r.errors,"root"),ML(r.errors)){u.state.next({errors:{}});try{await e(c,o)}catch(Sv){a=Sv}}else t&&await t({...r.errors},o),P(),setTimeout(P);if(u.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ML(r.errors)&&!a,submitCount:r.submitCount+1,errors:r.errors}),a)throw a},U=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l=e?gL(e):o,h=gL(l),p=ML(e),f=p?o:h;if(n.keepDefaultValues||(o=l),!n.keepValues){if(n.keepDirtyValues)for(const e of c.mount)_L(r.dirtyFields,e)?FL(f,e,_L(s,e)):C(e,_L(f,e));else{if(mL&&vL(e))for(const e of c.mount){const t=_L(i,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(qL(e)){const t=e.closest("form");if(t){t.reset();break}}}}i={}}s=t.shouldUnregister?n.keepDefaultValues?gL(o):{}:gL(f),u.array.next({values:{...f}}),u.values.next({values:{...f}})}c={mount:n.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!d.isValid||!!n.keepIsValid||!!n.keepDirtyValues,a.watch=!!t.shouldUnregister,u.state.next({submitCount:n.keepSubmitCount?r.submitCount:0,isDirty:!p&&(n.keepDirty?r.isDirty:!(!n.keepDefaultValues||cP(e,o))),isSubmitted:!!n.keepIsSubmitted&&r.isSubmitted,dirtyFields:p?[]:n.keepDirtyValues?n.keepDefaultValues&&s?mP(o,s):r.dirtyFields:n.keepDefaultValues&&e?mP(o,e):{},touchedFields:n.keepTouched?r.touchedFields:{},errors:n.keepErrors?r.errors:{},isSubmitSuccessful:!!n.keepIsSubmitSuccessful&&r.isSubmitSuccessful,isSubmitting:!1})},F=(e,t)=>U(YL(e)?e(s):e,t);return{control:{register:L,unregister:k,getFieldState:M,handleSubmit:j,setError:D,_executeSchema:E,_getWatch:b,_getDirty:T,_updateValid:m,_removeUnmounted:()=>{for(const e of c.unMount){const t=_L(i,e);t&&(t._f.refs?t._f.refs.every((e=>!uP(e))):!uP(t._f.ref))&&k(e)}c.unMount=new Set},_updateFieldArray:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],h=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(c&&n){if(a.action=!0,h&&Array.isArray(_L(i,e))){const t=n(_L(i,e),c.argA,c.argB);l&&FL(i,e,t)}if(h&&Array.isArray(_L(r.errors,e))){const t=n(_L(r.errors,e),c.argA,c.argB);l&&FL(r.errors,e,t),bP(r.errors,e)}if(d.touchedFields&&h&&Array.isArray(_L(r.touchedFields,e))){const t=n(_L(r.touchedFields,e),c.argA,c.argB);l&&FL(r.touchedFields,e,t)}d.dirtyFields&&(r.dirtyFields=mP(o,s)),u.state.next({name:e,isDirty:T(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else FL(s,e,t)},_updateDisabledField:x,_getFieldArray:e=>yL(_L(a.mount?s:o,e,t.shouldUnregister?_L(o,e,[]):[])),_reset:U,_resetDefaultValues:()=>YL(n.defaultValues)&&n.defaultValues().then((e=>{F(e,n.resetOptions),u.state.next({isLoading:!1})})),_updateFormState:e=>{r={...r,...e}},_disableForm:e=>{EL(e)&&(u.state.next({disabled:e}),GL(i,((t,n)=>{let r=e;const o=_L(i,n);o&&EL(o._f.disabled)&&(r||(r=o._f.disabled)),t.disabled=r}),0,!1))},_subjects:u,_proxyFormState:d,_setErrors:e=>{r.errors=e,u.state.next({errors:r.errors,isValid:!1})},get _fields(){return i},get _formValues(){return s},get _state(){return a},set _state(e){a=e},get _defaultValues(){return o},get _names(){return c},set _names(e){c=e},get _formState(){return r},set _formState(e){r=e},get _options(){return n},set _options(e){n={...n,...e}}},trigger:A,register:L,handleSubmit:j,watch:(e,t)=>YL(e)?u.values.subscribe({next:n=>e(b(void 0,t),n)}):b(e,t,!0),setValue:C,getValues:O,reset:F,resetField:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_L(i,e)&&(vL(t.defaultValue)?C(e,gL(_L(o,e))):(C(e,t.defaultValue),FL(o,e,gL(t.defaultValue))),t.keepTouched||oP(r.touchedFields,e),t.keepDirty||(oP(r.dirtyFields,e),r.isDirty=t.defaultValue?T(e,gL(_L(o,e))):T()),t.keepError||(oP(r.errors,e),d.isValid&&m()),u.state.next({...r}))},clearErrors:e=>{e&&kL(e).forEach((e=>oP(r.errors,e))),u.state.next({errors:e?r.errors:{}})},unregister:k,setError:D,setFocus:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=_L(i,e),r=n&&n._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:M}}function CP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=r.useRef(),n=r.useRef(),[i,o]=r.useState({isDirty:!1,isValidating:!1,isLoading:YL(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:YL(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...NP(e),formState:i});const s=t.current.control;return s._options=e,xL({subject:s._subjects.state,next:e=>{DL(e,s._proxyFormState,s._updateFormState,!0)&&o({...s._formState})}}),r.useEffect((()=>s._disableForm(e.disabled)),[s,e.disabled]),r.useEffect((()=>{if(s._proxyFormState.isDirty){const e=s._getDirty();e!==i.isDirty&&s._subjects.state.next({isDirty:e})}}),[s,i.isDirty]),r.useEffect((()=>{e.values&&!cP(e.values,n.current)?(s._reset(e.values,s._options.resetOptions),n.current=e.values,o((e=>({...e})))):s._resetDefaultValues()}),[e.values,s]),r.useEffect((()=>{e.errors&&s._setErrors(e.errors)}),[e.errors,s]),r.useEffect((()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()})),r.useEffect((()=>{e.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})}),[e.shouldUnregister,s]),t.current.formState=OL(i,s),t.current}var wP=__webpack_require__(5429),RP=__webpack_require__.n(wP);const AP=()=>{const e=Z(),t=ee(),{AddRealEstate:n,AddJob:i,AddFashionProduct:o,getAttributeList:s,attributeList:a,productId:c,AddFreelancer:l,AddElectronics:d,AddCourse:u,AddGoodsProduct:h}=Kr(),{handleSubmit:p}=CP(),[f,m]=(0,r.useState)(!1),[g,y]=(0,r.useState)({}),[v,_]=(0,r.useState)({}),[E,S]=(0,r.useState)(!1),[T,b]=(0,r.useState)({bid_start_price:"",bid_entry:"",bid_increament_value:"",bid_start_date:new Date,bid_end_date:new Date}),I=(e,t,n)=>{y((n=>({...n,[e]:t}))),_((e=>({...e,[n]:t})))};(0,r.useEffect)((()=>{const e=new Date(T.bid_start_date);e.setHours(e.getHours()+1),b({...T,bid_end_date:e})}),[]),(0,r.useEffect)((()=>{null===e.state&&(gl.error("add Title first"),t(-1))}),[e.state,t]),(0,r.useEffect)((()=>{var t,n;const r={category_id:(null===e||void 0===e||null===(t=e.state)||void 0===t?void 0:t.category_id)||"",sub_category_id:(null===e||void 0===e||null===(n=e.state)||void 0===n?void 0:n.sub_category_id)||""};(async()=>{await s(r)})()}),[]),(0,r.useEffect)((()=>{if((null===a||void 0===a?void 0:a.length)>0){const e=Array.isArray(a)&&(null===a||void 0===a?void 0:a.map((e=>null===e||void 0===e?void 0:e.category_name)));null!==e&&void 0!==e&&e.includes("Jobs")||null!==e&&void 0!==e&&e.includes("Freelancer")||null!==e&&void 0!==e&&e.includes("Lessons & Courses")?m(!0):m(!1)}}),[a]);const N=e=>{switch(e){case"Salary Expectation":case"Typing Speed":case"Salary to":case"Salary from":case"Salary":case"Land Area":case"Price Range":case"Number of Rooms":case"Number of Bathrooms":case"Year Built":case"Square Footage":case"Rent":case"Quizzes":case"Lessons":case"Videos":case"Hours":case"Course Duration":case"Duration":case"Pack of":case"Price":case"  Model Number":case"Release Year":case"Number of Pieces":return"number";default:return"text"}},C=Array.isArray(a)&&a.map((e=>e.sub_category_name)),w=Array.isArray(a)&&a.map((e=>e.category_name));return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"SELECTED CATEGORY"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Re,{className:"active",to:"/add-post",children:["Add Product"," "]})}),(0,Me.jsx)("li",{className:"active",children:w[0]}),(0,Me.jsx)("li",{className:"active",children:C[0]})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{className:"card",children:[(0,Me.jsx)("div",{className:"card-header",children:(0,Me.jsx)("h5",{children:"INCLUDE SOME DETAILS"})}),(0,Me.jsx)("div",{className:"card-body border-0",children:(0,Me.jsxs)("form",{onSubmit:p((async()=>{if(E){if(!T.bid_start_price||!T.bid_increament_value||!T.bid_start_date||!T.bid_end_date)return void gl.warning("Please fill all bid related fields.");if(T.bid_start_date>=T.bid_end_date)return void gl.warning("Bid end date should be greater than bid start date.")}if(!g.photo&&!g.image)return void gl.warning("Please upload at least one photo.");const t={title:e.state.title,description:e.state.description,product_id:c,category_id:e.state.category_id,sub_category_id:e.state.sub_category_id},r=new FormData;if(Object.keys(t).forEach((e=>{r.append(e,t[e])})),Object.entries(v).forEach(((e,t)=>{let[n,i]=e;r.append("attributeData[".concat(t,"][attribute_id]"),n),r.append("attributeData[".concat(t,"][value]"),i)})),!0===E){r.append("bid_now",!0),r.append("bid_start_price",T.bid_start_price||""),r.append("bid_increament_value",T.bid_increament_value||"");const e=T.bid_start_date?T.bid_start_date.toISOString():"";r.append("bid_start_date",e);const t=T.bid_end_date?T.bid_end_date.toISOString():"";r.append("bid_end_date",t)}switch(!1===f?(r.append("photo",g.photo||""),r.append("image_1",g.image_1||""),r.append("image_2",g.image_2||""),r.append("image_3",g.image_3||"")):r.append("image",g.image||""),a[0].category_name){case"Goods of all kinds":return h(r);case"Fashion & Beauty":return o(r);case"Lessons & Courses":return u(r);case"Jobs":return i(r);case"Freelancer":return l(r);case"Real Estate":return n(r);case"Electronics":return d(r);default:return null}})),encType:"multipart/form-data",children:[Array.isArray(a)&&a.map((e=>{var t;return(0,Me.jsxs)("div",{className:"radioBx mb20",children:[(0,Me.jsx)("h6",{children:e.attribute}),(0,Me.jsx)(Me.Fragment,{children:e.options.length>0?Array.isArray(e.options)&&(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.map(((t,n)=>(0,Me.jsxs)(r.Fragment,{children:[(0,Me.jsx)("input",{type:"radio",className:"btn-check",name:e.attribute,id:"radio_".concat(e.attribute,"_").concat(t._id),value:t.option,onChange:t=>I(e.attribute,t.target.value,e._id)},n),(0,Me.jsxs)("label",{className:"btn btn-outline-primary",htmlFor:"radio_".concat(e.attribute,"_").concat(t._id),children:[" ",t.option," "]})]},t._id)))):(0,Me.jsx)("div",{className:"row",children:(0,Me.jsx)("div",{className:"",children:(0,Me.jsx)("input",{type:N(e.attribute),name:e.attribute,className:"form-control",onChange:t=>I(e.attribute,t.target.value,e._id)})},e._id)})})]},e._id)})),!1===f?(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsxs)("div",{className:"col-sm-3",children:[(0,Me.jsx)("label",{htmlFor:"bid",children:(0,Me.jsx)("h5",{style:{marginRight:"10px",marginBottom:"6px",color:"#77ced9"},children:"Enable Bid"})}),(0,Me.jsx)("input",{type:"checkbox",name:"bid",onChange:e=>{S(e.target.checked)}})]}),E&&(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-sm-3",children:[(0,Me.jsx)("label",{htmlFor:"bid_start_price",children:"Bid Start Price"}),(0,Me.jsx)("input",{className:"form-control",type:"number",name:"bid_start_price",onChange:e=>b({...T,bid_start_price:e.target.value})})]}),(0,Me.jsxs)("div",{className:"col-sm-3",children:[(0,Me.jsx)("label",{htmlFor:"bid_increament_value",children:"Bid Increament Value"}),(0,Me.jsx)("input",{className:"form-control",type:"number",name:"bid_increament_value",onChange:e=>b({...T,bid_increament_value:e.target.value})})]}),(0,Me.jsxs)("div",{className:"col-sm-3",children:[(0,Me.jsx)("label",{htmlFor:"bid_start_date",children:"Bid Start Date"}),(0,Me.jsx)(RP(),{value:T.bid_start_date,onChange:e=>{b({...T,bid_start_date:e})},name:"bid_start_date"})]}),(0,Me.jsxs)("div",{className:"col-sm-3",children:[(0,Me.jsx)("label",{htmlFor:"bid_end_date",children:"Bid End Date"}),(0,Me.jsx)(RP(),{value:T.bid_end_date,onChange:e=>{e>T.bid_start_date?b({...T,bid_end_date:e}):gl.warning("End date must be after start date")},name:"bid_end_date",inputProps:{readOnly:!0},isValidDate:e=>e.isAfter(T.bid_start_date)})]})]})}),(0,Me.jsx)("h5",{className:"m0",children:"UPLOAD UP TO 4 PHOTOS"}),(0,Me.jsxs)("div",{className:"row",style:{maxWidth:"700px"},children:[(0,Me.jsx)("div",{className:"col-sm-3",children:(0,Me.jsxs)("div",{className:"fileBx mt-2",children:[(0,Me.jsx)("input",{type:"file",name:"photo",id:"photo",style:{display:"none"},onChange:e=>(e=>{const t=e.target.files[0];y({...g,photo:t})})(e)}),(0,Me.jsx)("label",{htmlFor:"photo",children:g.photo?(0,Me.jsx)("img",{height:70,width:100,src:URL.createObjectURL(g.photo),alt:""}):"Upload Img"})]})}),(0,Me.jsx)("div",{className:"col-sm-3",children:(0,Me.jsxs)("div",{className:"fileBx mt-2",children:[(0,Me.jsx)("input",{type:"file",name:"img1",id:"img1",style:{display:"none"},onChange:e=>(e=>{const t=e.target.files[0];y({...g,image_1:t})})(e)}),(0,Me.jsx)("label",{htmlFor:"img1",children:g.image_1?(0,Me.jsx)("img",{height:70,width:100,src:URL.createObjectURL(g.image_1),alt:"Img_1"}):"Upload Img"})]})}),(0,Me.jsx)("div",{className:"col-sm-3",children:(0,Me.jsxs)("div",{className:"fileBx mt-2",children:[(0,Me.jsx)("input",{type:"file",name:"img2",id:"img2",onChange:e=>(e=>{const t=e.target.files[0];y({...g,image_2:t})})(e),style:{display:"none"}}),(0,Me.jsx)("label",{htmlFor:"img2",children:g.image_2?(0,Me.jsx)("img",{height:70,width:100,src:URL.createObjectURL(g.image_2),alt:"image_2"}):"Upload Img"})]})}),(0,Me.jsx)("div",{className:"col-sm-3",children:(0,Me.jsxs)("div",{className:"fileBx mt-2",children:[(0,Me.jsx)("input",{type:"file",name:"img3",id:"img3",style:{display:"none"},onChange:e=>(e=>{const t=e.target.files[0];y({...g,image_3:t})})(e)}),(0,Me.jsx)("label",{htmlFor:"img3",children:g.image_3?(0,Me.jsx)("img",{height:70,width:100,src:URL.createObjectURL(g.image_3),alt:"image_3"}):"Upload Img"})]})})]})]}):(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("h5",{className:"m0",children:"UPLOAD file"}),(0,Me.jsx)("div",{className:"row",style:{maxWidth:"700px"},children:(0,Me.jsx)("div",{className:"col-sm-3",children:(0,Me.jsxs)("div",{className:"fileBx mt-2",children:[(0,Me.jsx)("input",{type:"file",name:"uploadfile",id:"img",onChange:e=>(e=>{const t=e.target.files[0];y({...g,image:t})})(e),style:{display:"none"},required:!0}),(0,Me.jsx)("label",{htmlFor:"img",children:g.image?(0,Me.jsx)("img",{height:70,width:100,src:URL.createObjectURL(g.image),alt:""}):"Upload Img"})]})})})]}),(0,Me.jsx)(Ns,{type:"submit",className:"text text-white mt-2",children:"Submit"})]})})]})}),(0,Me.jsx)(Zs,{})]})})})]})},OP=()=>{const{AddTitleDes:e}=Kr(),t=Z(),n=ee(),{servicecategories:r,subservicecat:i}=(null===t||void 0===t?void 0:t.state)||{},{register:o,handleSubmit:s,formState:{errors:a}}=CP();return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"SELECTED CATEGORY"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"Add Product"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{className:"card",children:[(0,Me.jsx)("div",{className:"card card-header",children:(0,Me.jsx)("h5",{children:"INCLUDE SOME DETAILS"})}),(0,Me.jsx)("div",{className:"card card-body border-0",children:(0,Me.jsxs)("form",{className:"",onSubmit:s((async t=>{try{const o={title:t.title,description:t.description,category_id:r,sub_category_id:i},s=await e(o);200===s.status&&n("/add-product",{state:{id:s.data._id,...o}})}catch(Sv){console.error(Sv)}})),children:[(0,Me.jsxs)("div",{className:"mb20",style:{maxWidth:"500px"},children:[(0,Me.jsx)("h6",{children:"Title"}),(0,Me.jsx)("input",{type:"text",className:"form-control",...o("title",{required:"Title is required",minLength:{value:10,message:"A minimum length of 10 characters is required. Please edit the field"},maxLength:{value:100,message:"Title cannot exceed 50 characters"}})}),a.title&&(0,Me.jsx)("span",{className:"text text-danger",children:a.title.message})]}),(0,Me.jsxs)("div",{className:"mb20",style:{maxWidth:"500px"},children:[(0,Me.jsx)("h6",{children:"Description"}),(0,Me.jsx)("textarea",{type:"text",className:"form-control",...o("description",{required:"Description is required",minLength:{value:150,message:"A minimum length of 150 characters is required. Please edit the field"},maxLength:{value:5500,message:"Title cannot exceed 5500 characters"}})}),a.description&&(0,Me.jsx)("span",{className:"text text-danger",children:a.description.message})]}),(0,Me.jsx)(Ns,{className:"text text-white",type:"submit",children:"Next"})]})})]})}),(0,Me.jsx)(Zs,{})]})})})]})},MP=()=>{const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{setTimeout((()=>{t(!0)}),1500),t(!1)})()}),[]),(0,Me.jsxs)("div",{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"Disclaimer"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)("a",{href:"index.php",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"Disclaimer"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),!1===e?(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{children:[(0,Me.jsx)("h3",{children:"Disclaimer"}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."})]})}),(0,Me.jsx)(Zs,{})]})})})]})},DP=()=>{const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{setTimeout((()=>{t(!0)}),1500),t(!1)})()}),[]),(0,Me.jsxs)("div",{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"Customer Support"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)("a",{href:"index.php",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"Customer Support"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",style:{backgroundColor:"#fff"},children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),!1===e?(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{children:[(0,Me.jsx)("h3",{children:"Customer Support"}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."})]})}),(0,Me.jsx)(Zs,{})]})})})]})};function kP(e){var t,n,r="";if("string"===typeof e||"number"===typeof e)r+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=kP(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function xP(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=kP(e))&&(r&&(r+=" "),r+=t);return r}!function(){try{if("undefined"!=typeof document){var e=document.createElement("style");e.appendChild(document.createTextNode(".dropdown-menu .active:not(.form-control){color:#16181b;background-color:#eee}.dropdown-menu [data-active=true] a.dropdown-item,.dropdown-menu .dropdown-item:focus,.dropdown-menu li:focus .dropdown-item :not(.disabled){color:#16181b;background-color:#eee}.dropdown-menu li:focus{outline:none}.dropdown-menu.dropdown-menu-dark [data-active=true] a.dropdown-item,.dropdown-menu.dropdown-menu-dark .dropdown-item:focus,.dropdown-menu.dropdown-menu-dark li:focus .dropdown-item{color:#fff;background-color:#1266f1}.btn-group.dropstart>.dropdown-menu{right:0!important}")),document.head.appendChild(e)}}catch(Vc){console.error("vite-plugin-css-injected-by-js",Vc)}}();const LP=r.forwardRef(((e,t)=>{let{breakpoint:n,fluid:r,children:i,className:o,tag:s="div",...a}=e;const c=xP("".concat(r?"container-fluid":"container".concat(n?"-"+n:"")),o);return(0,Me.jsx)(s,{className:c,...a,ref:t,children:i})}));LP.displayName="MDBContainer";const PP=r.forwardRef(((e,t)=>{let{center:n,children:r,className:i,end:o,lg:s,md:a,offsetLg:c,offsetMd:l,offsetSm:d,order:u,size:h,sm:p,start:f,tag:m="div",xl:g,xxl:y,xs:v,..._}=e;const E=xP(h&&"col-".concat(h),v&&"col-xs-".concat(v),p&&"col-sm-".concat(p),a&&"col-md-".concat(a),s&&"col-lg-".concat(s),g&&"col-xl-".concat(g),y&&"col-xxl-".concat(y),h||v||p||a||s||g||y?"":"col",u&&"order-".concat(u),f&&"align-self-start",n&&"align-self-center",o&&"align-self-end",d&&"offset-sm-".concat(d),l&&"offset-md-".concat(l),c&&"offset-lg-".concat(c),i);return(0,Me.jsx)(m,{className:E,ref:t,..._,children:r})}));PP.displayName="MDBCol";const jP=r.forwardRef(((e,t)=>{let{className:n,color:r="primary",pill:i,light:o,dot:s,tag:a="span",children:c,notification:l,...d}=e;const u=xP("badge",o?r&&"badge-".concat(r):r&&"bg-".concat(r),s&&"badge-dot",i&&"rounded-pill",l&&"badge-notification",n);return(0,Me.jsx)(a,{className:u,ref:t,...d,children:c})}));jP.displayName="MDBBadge";const UP=e=>{let{...t}=e;const[n,i]=(0,r.useState)(!1),o=xP("ripple-wave",n&&"active");return(0,r.useEffect)((()=>{const e=setTimeout((()=>{i(!0)}),50);return()=>{clearTimeout(e)}}),[]),(0,Me.jsx)("div",{className:o,...t})},FP=r.forwardRef(((e,t)=>{let{className:n,rippleTag:i="div",rippleCentered:o,rippleDuration:s=500,rippleUnbound:a,rippleRadius:c=0,rippleColor:l="dark",children:d,onMouseDown:u,...h}=e;const p=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=r.useRef();return r.useEffect((()=>{t.forEach((e=>{e&&("function"==typeof e?e(i.current):e.current=i.current)}))}),[t]),i}(t,(0,r.useRef)(null)),f=[0,0,0],m=["primary","secondary","success","danger","warning","info","light","dark"],[g,y]=(0,r.useState)([]),[v,_]=(0,r.useState)(!1),E=xP("ripple","ripple-surface",a&&"ripple-surface-unbound",v&&"ripple-surface-".concat(l),n),S=()=>{if(m.find((e=>e===(null==l?void 0:l.toLowerCase()))))return _(!0);{const e=T(l).join(",");return"radial-gradient(circle, ".concat("rgba({{color}}, 0.2) 0, rgba({{color}}, 0.3) 40%, rgba({{color}}, 0.4) 50%, rgba({{color}}, 0.5) 60%, rgba({{color}}, 0) 70%".split("{{color}}").join("".concat(e)),")")}},T=e=>"transparent"===e.toLowerCase()?f:"#"===e[0]?(e=>(e.length<7&&(e="#".concat(e[1]).concat(e[1]).concat(e[2]).concat(e[2]).concat(e[3]).concat(e[3])),[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]))(e):(-1===e.indexOf("rgb")&&(e=(e=>{const t=document.body.appendChild(document.createElement("fictum")),n="rgb(1, 2, 3)";return t.style.color=n,t.style.color!==n||(t.style.color=e,t.style.color===n||""===t.style.color)?f:(e=getComputedStyle(t).color,document.body.removeChild(t),e)})(e)),0===e.indexOf("rgb")?(e=>(e=e.match(/[.\d]+/g).map((e=>+Number(e))),e.length=3,e))(e):f),b=e=>{var t;const n=null==(t=p.current)?void 0:t.getBoundingClientRect(),r=e.clientX-n.left,i=e.clientY-n.top,a=n.height,l=n.width,d={delay:s&&.5*s,duration:s&&s-.5*s},u=(e=>{const{offsetX:t,offsetY:n,height:r,width:i}=e,o=n<=r/2,s=t<=i/2,a=(e,t)=>Math.sqrt(e**2+t**2),c=n===r/2&&t===i/2,l=!0===o&&!1===s,d=!0===o&&!0===s,u=!1===o&&!0===s,h=!1===o&&!1===s,p={topLeft:a(t,n),topRight:a(i-t,n),bottomLeft:a(t,r-n),bottomRight:a(i-t,r-n)};let f=0;return c||h?f=p.topLeft:u?f=p.topRight:d?f=p.bottomRight:l&&(f=p.bottomLeft),2*f})({offsetX:o?a/2:r,offsetY:o?l/2:i,height:a,width:l}),h=c||u/2,f={left:"".concat(o?l/2-h:r-h,"px"),top:"".concat(o?a/2-h:i-h,"px"),height:"".concat(c?2*c:u,"px"),width:"".concat(c?2*c:u,"px"),transitionDelay:"0s, ".concat(d.delay,"ms"),transitionDuration:"".concat(s,"ms, ").concat(d.duration,"ms")};return v?f:{...f,backgroundImage:"".concat(S())}};return(0,r.useEffect)((()=>{const e=setTimeout((()=>{g.length>0&&y(g.splice(1,g.length-1))}),s);return()=>{clearTimeout(e)}}),[s,g]),(0,Me.jsxs)(i,{className:E,onMouseDown:e=>(e=>{const t=b(e),n=g.concat(t);y(n),u&&u(e)})(e),ref:p,...h,children:[d,g.map(((e,t)=>(0,Me.jsx)(UP,{style:e},t)))]})}));FP.displayName="MDBRipple";const zP=r.forwardRef(((e,t)=>{let{className:n,color:i="primary",outline:o,children:s,rounded:a,disabled:c,floating:l,size:d,href:u,block:h,active:p,toggle:f,noRipple:m,tag:g="button",role:y="button",...v}=e;const[_,E]=(0,r.useState)(p||!1);let S;const T=i&&["light","link"].includes(i)||o?"dark":"light";S="none"!==i?o?i?"btn-outline-".concat(i):"btn-outline-primary":i?"btn-".concat(i):"btn-primary":"";const b=xP("none"!==i&&"btn",S,a&&"btn-rounded",l&&"btn-floating",d&&"btn-".concat(d),"".concat((u||"button"!==g)&&c?"disabled":""),h&&"btn-block",_&&"active",n);return u&&"a"!==g&&(g="a"),["hr","img","input"].includes(g)||m?(0,Me.jsx)(g,{className:b,onClick:f?()=>{E(!_)}:void 0,disabled:!(!c||"button"!==g)||void 0,href:u,ref:t,role:y,...v,children:s}):(0,Me.jsx)(FP,{rippleTag:g,rippleColor:T,className:b,onClick:f?()=>{E(!_)}:void 0,disabled:!(!c||"button"!==g)||void 0,href:u,ref:t,role:y,...v,children:s})}));zP.displayName="MDBBtn";const VP=r.forwardRef(((e,t)=>{let n,{className:r,children:i,shadow:o,toolbar:s,size:a,vertical:c,tag:l="div",role:d="group",...u}=e;n=s?"btn-toolbar":c?"btn-group-vertical":"btn-group";const h=xP(n,o&&"shadow-".concat(o),a&&"btn-group-".concat(a),r);return(0,Me.jsx)(l,{className:h,ref:t,role:d,...u,children:i})}));VP.displayName="MDBBtnGroup";const BP=r.forwardRef(((e,t)=>{let{className:n,children:r,tag:i="div",color:o,grow:s,size:a,...c}=e;const l=xP("".concat(s?"spinner-grow":"spinner-border"),o&&"text-".concat(o),"".concat(a?s?"spinner-grow-"+a:"spinner-border-"+a:""),n);return(0,Me.jsx)(i,{className:l,ref:t,...c,children:r})}));BP.displayName="MDBSpinner";const GP=r.forwardRef(((e,t)=>{let{className:n,children:r,border:i,background:o,tag:s="div",shadow:a,alignment:c,...l}=e;const d=xP("card",i&&"border border-".concat(i),o&&"bg-".concat(o),a&&"shadow-".concat(a),c&&"text-".concat(c),n);return(0,Me.jsx)(s,{className:d,ref:t,...l,children:r})}));GP.displayName="MDBCard";const HP=r.forwardRef(((e,t)=>{let{className:n,children:r,border:i,background:o,tag:s="div",...a}=e;const c=xP("card-header",i&&"border-".concat(i),o&&"bg-".concat(o),n);return(0,Me.jsx)(s,{className:c,...a,ref:t,children:r})}));HP.displayName="MDBCardHeader";const WP=r.forwardRef(((e,t)=>{let{className:n,children:r,tag:i="p",...o}=e;const s=xP("card-subtitle",n);return(0,Me.jsx)(i,{className:s,...o,ref:t,children:r})}));WP.displayName="MDBCardSubTitle";const YP=r.forwardRef(((e,t)=>{let{className:n,children:r,tag:i="h5",...o}=e;const s=xP("card-title",n);return(0,Me.jsx)(i,{className:s,...o,ref:t,children:r})}));YP.displayName="MDBCardTitle";const qP=r.forwardRef(((e,t)=>{let{className:n,children:r,tag:i="p",...o}=e;const s=xP("card-text",n);return(0,Me.jsx)(i,{className:s,...o,ref:t,children:r})}));qP.displayName="MDBCardText";const KP=r.forwardRef(((e,t)=>{let{className:n,children:r,tag:i="div",...o}=e;const s=xP("card-body",n);return(0,Me.jsx)(i,{className:s,...o,ref:t,children:r})}));KP.displayName="MDBCardBody";const QP=r.forwardRef(((e,t)=>{let{className:n,children:r,border:i,background:o,tag:s="div",...a}=e;const c=xP("card-footer",i&&"border-".concat(i),o&&"bg-".concat(o),n);return(0,Me.jsx)(s,{className:c,...a,ref:t,children:r})}));QP.displayName="MDBCardFooter";const JP=e=>{let{className:t,children:n,overlay:r,position:i,fluid:o,...s}=e;const a=xP(i&&"card-img-".concat(i),o&&"img-fluid",r&&"card-img",t);return(0,Me.jsx)("img",{className:a,...s,children:n})},XP=r.forwardRef(((e,t)=>{let{className:n,children:r,tag:i="div",...o}=e;const s=xP("card-img-overlay",n);return(0,Me.jsx)(i,{className:s,...o,ref:t,children:r})}));XP.displayName="MDBCardOverlay";const ZP=r.forwardRef(((e,t)=>{let{className:n,children:r,tag:i="div",...o}=e;const s=xP("card-group",n);return(0,Me.jsx)(i,{className:s,...o,ref:t,children:r})}));ZP.displayName="MDBCardGroup";const $P=r.forwardRef(((e,t)=>{let{className:n,tag:r="ul",horizontal:i,horizontalSize:o,light:s,numbered:a,children:c,small:l,...d}=e;const u=xP("list-group",i&&(o?"list-group-horizontal-".concat(o):"list-group-horizontal"),s&&"list-group-light",a&&"list-group-numbered",l&&"list-group-small",n);return(0,Me.jsx)(r,{className:u,ref:t,...d,children:c})}));$P.displayName="MDBListGroup";const ej=r.forwardRef(((e,t)=>{let{className:n,tag:r="li",active:i,disabled:o,action:s,color:a,children:c,noBorders:l,...d}=e;const u="button"===r,h=xP("list-group-item",i&&"active",o&&!u&&"disabled",s&&"list-group-item-action",a&&"list-group-item-".concat(a),l&&"border-0",n);return(0,Me.jsx)(r,{className:h,disabled:u&&o,ref:t,...d,children:c})}));ej.displayName="MDBListGroupItem";const tj=r.forwardRef(((e,t)=>{let{around:n,between:r,bottom:i,center:o,children:s,className:a,evenly:c,end:l,middle:d,start:u,tag:h="div",top:p,...f}=e;const m=xP("row",n&&"justify-content-around",r&&"justify-content-between",i&&"align-self-end",o&&"justify-content-center",c&&"justifty-content-evenly",l&&"justify-content-end",d&&"align-self-center",u&&"justify-content-start",p&&"align-self-start",a);return(0,Me.jsx)(h,{className:m,...f,ref:t,children:s})}));tj.displayName="MDBRow";const nj=e=>{let t,{animate:n,className:r,icon:i,fab:o,fas:s,fal:a,far:c,flag:l,spin:d,fixed:u,flip:h,list:p,size:f,pull:m,pulse:g,color:y,border:v,rotate:_,inverse:E,stack:S,iconType:T,children:b,...I}=e;t=l?"flag":o?"fab":s?"fas":c?"far":a?"fal":"fa";const N=xP(T?"fa-".concat(T):t,n&&"fa-".concat(n),l?"flag-".concat(l):i&&"fa-".concat(i),f&&"fa-".concat(f),y&&"text-".concat(y),v&&"fa-border",_&&"fa-rotate-".concat(_),m&&"fa-pull-".concat(m),d&&!n&&"fa-spin",p&&"fa-li",u&&"fa-fw",g&&!n&&"fa-pulse",E&&"fa-inverse",h&&"fa-flip-".concat(h),S&&"fa-stack-".concat(S),r);return(0,Me.jsx)("i",{className:N,...I,children:b})},rj=r.forwardRef(((e,t)=>{let{className:n,children:r,tag:i="p",variant:o,color:s,blockquote:a,note:c,noteColor:l,listUnStyled:d,listInLine:u,...h}=e;const p=xP(o&&o,a&&"blockquote",c&&"note",s&&"text-".concat(s),l&&"note-".concat(l),d&&"list-unstyled",u&&"list-inline",n);return a&&(i="blockquote"),(d||u)&&(i="ul"),(0,Me.jsx)(i,{className:p,ref:t,...h,children:r})}));rj.displayName="MDBTypography";const ij=r.forwardRef(((e,t)=>{let{className:n,color:r,uppercase:i,bold:o,children:s,...a}=e;const c=xP("breadcrumb",o&&"font-weight-bold",r&&"text-".concat(r),i&&"text-uppercase",n);return(0,Me.jsx)("nav",{"aria-label":"breadcrumb",children:(0,Me.jsx)("ol",{className:c,ref:t,...a,children:s})})}));ij.displayName="MDBBreadcrumb";const oj=r.forwardRef(((e,t)=>{let{className:n,active:r,current:i="page",children:o,...s}=e;const a=xP("breadcrumb-item",r&&"active",n);return(0,Me.jsx)("li",{className:a,ref:t,"aria-current":r&&i,...s,children:o})}));oj.displayName="MDBBreadcrumbItem";const sj=r.forwardRef(((e,t)=>{let{className:n,children:i,light:o,dark:s,scrolling:a,fixed:c,sticky:l,scrollingNavbarOffset:d,color:u,transparent:h,expand:p,tag:f="nav",bgColor:m,...g}=e;const[y,v]=(0,r.useState)(!1),_=xP({"navbar-light":o,"navbar-dark":s,"scrolling-navbar":a||d,"top-nav-collapse":y,["text-".concat(u)]:u&&h?y:u},c&&"fixed-".concat(c),l&&"sticky-top","navbar",p&&(e=>{if(!1!==e)return"navbar-expand-".concat(e)})(p),m&&"bg-".concat(m),n),E=(0,r.useCallback)((()=>{d&&window.pageYOffset>d?v(!0):v(!1)}),[d]);return(0,r.useEffect)((()=>((a||d)&&window.addEventListener("scroll",E),()=>{window.removeEventListener("scroll",E)})),[E,a,d]),(0,Me.jsx)(f,{className:_,role:"navigation",...g,ref:t,children:i})}));sj.displayName="MDBNavbar";const aj=r.forwardRef(((e,t)=>{let{children:n,className:r="",disabled:i=!1,active:o=!1,tag:s="a",...a}=e;const c=xP("nav-link",i?"disabled":o?"active":"",r);return(0,Me.jsx)(s,{"data-test":"nav-link",className:c,style:{cursor:"pointer"},ref:t,...a,children:n})}));aj.displayName="MDBNavbarLink";const cj=r.forwardRef(((e,t)=>{let{className:n,children:r,tag:i="a",...o}=e;const s=xP("navbar-brand",n);return(0,Me.jsx)(i,{className:s,ref:t,...o,children:r})}));cj.displayName="MDBNavbarBrand";const lj=r.forwardRef(((e,t)=>{let{children:n,className:r,active:i,text:o,tag:s="li",...a}=e;const c=xP("nav-item",i&&"active",o&&"navbar-text",r);return(0,Me.jsx)(s,{...a,className:c,ref:t,children:n})}));lj.displayName="MDBNavbarItem";const dj=r.forwardRef(((e,t)=>{let{children:n,className:r,right:i,fullWidth:o=!0,left:s,tag:a="ul",...c}=e;const l=xP("navbar-nav",o&&"w-100",i&&"ms-auto",s&&"me-auto",r);return(0,Me.jsx)(a,{className:l,ref:t,...c,children:n})}));dj.displayName="MDBNavbarNav";const uj=r.forwardRef(((e,t)=>{let{children:n,className:r,tag:i="button",...o}=e;const s=xP("navbar-toggler",r);return(0,Me.jsx)(i,{...o,className:s,ref:t,children:n})}));uj.displayName="MDBNavbarToggler";const hj=r.forwardRef(((e,t)=>{let{children:n,bgColor:r,color:i,className:o,...s}=e;const a=xP(r&&"bg-".concat(r),i&&"text-".concat(i),o);return(0,Me.jsx)("footer",{className:a,...s,ref:t,children:n})}));hj.displayName="MDBFooter";const pj=r.forwardRef(((e,t)=>{let{children:n,size:r,circle:i,center:o,end:s,start:a,className:c,...l}=e;const d=xP("pagination",o&&"justify-content-center",i&&"pagination-circle",s&&"justify-content-end",r&&"pagination-".concat(r),a&&"justify-content-start",c);return(0,Me.jsx)("ul",{className:d,...l,ref:t,children:n})}));pj.displayName="MDBPagination";const fj=r.forwardRef(((e,t)=>{let{children:n,className:r,tag:i="a",...o}=e;const s=xP("page-link",r);return(0,Me.jsx)(i,{className:s,...o,ref:t,children:n})}));fj.displayName="MDBPaginationLink";const mj=r.forwardRef(((e,t)=>{let{children:n,className:r,active:i,disabled:o,...s}=e;const a=xP("page-item",i&&"active",o&&"disabled",r);return(0,Me.jsx)("li",{className:a,...s,ref:t,children:n})}));mj.displayName="MDBPaginationItem";const gj=r.forwardRef(((e,t)=>{var n;let{animated:r,children:i,className:o,style:s,tag:a="div",valuenow:c,valuemax:l,striped:d,bgColor:u,valuemin:h,width:p,...f}=e;const m=xP("progress-bar",u&&"bg-".concat(u),d&&"progress-bar-striped",r&&"progress-bar-animated",o),g={width:"".concat(p,"%"),...s};return(0,Me.jsx)(a,{className:m,style:g,ref:t,role:"progressbar",...f,"aria-valuenow":null!==(n=Number(p))&&void 0!==n?n:c,"aria-valuemin":Number(h),"aria-valuemax":Number(l),children:i})}));gj.displayName="MDBProgressBar";const yj=r.forwardRef(((e,t)=>{let{className:n,children:i,tag:o="div",height:s,style:a,...c}=e;const l=xP("progress",n),d={height:"".concat(s,"px"),...a};return(0,Me.jsx)(o,{className:l,ref:t,style:d,...c,children:r.Children.map(i,(e=>r.isValidElement(e)&&e.type===gj?e:void console.error("Progress component only allows ProgressBar as child")))})}));yj.displayName="MDBProgress";const vj=r.forwardRef(((e,t)=>{let{className:n,size:i,contrast:o,value:s,defaultValue:a,id:c,labelClass:l,wrapperClass:d,wrapperStyle:u,wrapperTag:h="div",label:p,onChange:f,children:m,labelRef:g,labelStyle:y,type:v,onBlur:_,readonly:E=!1,showCounter:S=!1,...T}=e;var b;const[I,N]=(0,r.useState)(a),C=(0,r.useMemo)((()=>void 0!==s?s:I),[s,I]),[w,R]=(0,r.useState)(0),[A,O]=(0,r.useState)(!1),[M,D]=(0,r.useState)(0),k=(0,r.useRef)(null),x=(e=>{const[t,n]=(0,r.useState)(!1),[i,o]=(0,r.useState)(null);return(0,r.useEffect)((()=>{o((()=>new IntersectionObserver((e=>{let[t]=e;n(t.isIntersecting)}))))}),[]),(0,r.useEffect)((()=>{if(e.current&&i)return i.observe(e.current),()=>i.disconnect()}),[i,e]),t})(k),L=(0,r.useRef)(null),P=g||L;(0,r.useImperativeHandle)(t,(()=>k.current));const j=xP("form-outline",o&&"form-white",d),U=xP("form-control",A&&"active","date"===v&&"active",i&&"form-control-".concat(i),n),F=xP("form-label",l),z=(0,r.useCallback)((()=>{var e;null!=(e=P.current)&&e.clientWidth&&R(.8*P.current.clientWidth+8)}),[P]),V=(0,r.useCallback)((e=>{k.current&&(O(!!C),_&&_(e))}),[C,_]);return(0,r.useEffect)((()=>{z()}),[null==(b=P.current)?void 0:b.clientWidth,z,x]),(0,r.useEffect)((()=>{if(C)return O(!0);O(!1)}),[C]),(0,Me.jsxs)(h,{className:j,style:u,children:[(0,Me.jsx)("input",{type:v,readOnly:E,className:U,onBlur:V,onChange:e=>{N(e.target.value),S&&D(e.target.value.length),null==f||f(e)},onFocus:z,value:s,defaultValue:a,id:c,ref:k,...T}),p&&(0,Me.jsx)("label",{className:F,style:y,htmlFor:c,ref:P,children:p}),(0,Me.jsxs)("div",{className:"form-notch",children:[(0,Me.jsx)("div",{className:"form-notch-leading"}),(0,Me.jsx)("div",{className:"form-notch-middle",style:{width:w}}),(0,Me.jsx)("div",{className:"form-notch-trailing"})]}),m,S&&T.maxLength&&(0,Me.jsx)("div",{className:"form-helper",children:(0,Me.jsx)("div",{className:"form-counter",children:"".concat(M,"/").concat(T.maxLength)})})]})}));vj.displayName="MDBInput";const _j=(0,r.forwardRef)(((e,t)=>{let{className:n,inputRef:r,labelClass:i,wrapperClass:o,labelStyle:s,wrapperTag:a="div",wrapperStyle:c,label:l,inline:d,btn:u,id:h,btnColor:p,disableWrapper:f,toggleSwitch:m,...g}=e,y="form-check-input",v="form-check-label";u&&(y="btn-check",v=p?"btn btn-".concat(p):"btn btn-primary");const _=xP(l&&!u&&"form-check",d&&!u&&"form-check-inline",m&&"form-switch",o),E=xP(y,n),S=xP(v,i),T=(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("input",{className:E,id:h,ref:r,...g}),l&&(0,Me.jsx)("label",{className:S,style:s,htmlFor:h,children:l})]});return(0,Me.jsx)(Me.Fragment,{children:f?T:(0,Me.jsx)(a,{style:c,className:_,ref:t,children:T})})}));_j.displayName="InputTemplate";const Ej=e=>{let{className:t,children:n,open:i=!1,id:o,navbar:s,tag:a="div",collapseRef:c,style:l,onOpen:d,onClose:u,...h}=e;const[p,f]=(0,r.useState)(!1),[m,g]=(0,r.useState)(void 0),[y,v]=(0,r.useState)(!1),_=xP(y?"collapsing":"collapse",!y&&p&&"show",s&&"navbar-collapse",t),E=(0,r.useRef)(null),S=null!==c&&void 0!==c?c:E,T=(0,r.useCallback)((()=>{p&&g(void 0)}),[p]);return(0,r.useEffect)((()=>{var e;void 0===m&&p&&g(null==(e=null==S?void 0:S.current)?void 0:e.scrollHeight)}),[m,p,S]),(0,r.useEffect)((()=>{p!==i&&(i?null==d||d():null==u||u(),f(i)),p&&v(!0);const e=setTimeout((()=>{v(!1)}),350);return()=>{clearTimeout(e)}}),[i,p,d,u]),(0,r.useEffect)((()=>{var e;g(p?null==(e=null==S?void 0:S.current)?void 0:e.scrollHeight:0)}),[p,S,n]),(0,r.useEffect)((()=>(window.addEventListener("resize",T),()=>{window.removeEventListener("resize",T)})),[T]),(0,Me.jsx)(a,{style:{height:m,...l},id:o,className:_,...h,ref:S,children:n})},Sj=((0,r.createContext)(null),r.forwardRef(((e,t)=>{let{className:n,centered:r,children:i,size:o,scrollable:s,tag:a="div",...c}=e;const l=xP("modal-dialog",s&&"modal-dialog-scrollable",r&&"modal-dialog-centered",o&&"modal-".concat(o),n);return(0,Me.jsx)(a,{className:l,...c,ref:t,children:i})})));Sj.displayName="MDBModalDialog";const Tj=r.forwardRef(((e,t)=>{let{className:n,children:r,tag:i="div",...o}=e;const s=xP("modal-content",n);return(0,Me.jsx)(i,{className:s,...o,ref:t,children:r})}));Tj.displayName="MDBModalContent";const bj=r.forwardRef(((e,t)=>{let{className:n,children:r,tag:i="div",...o}=e;const s=xP("modal-header",n);return(0,Me.jsx)(i,{className:s,...o,ref:t,children:r})}));bj.displayName="MDBModalHeader";const Ij=r.forwardRef(((e,t)=>{let{className:n,children:r,tag:i="h5",...o}=e;const s=xP("modal-title",n);return(0,Me.jsx)(i,{className:s,...o,ref:t,children:r})}));Ij.displayName="MDBModalTitle";const Nj=r.forwardRef(((e,t)=>{let{className:n,children:r,tag:i="div",...o}=e;const s=xP("modal-body",n);return(0,Me.jsx)(i,{className:s,...o,ref:t,children:r})}));Nj.displayName="MDBModalBody";const Cj=r.forwardRef(((e,t)=>{let{className:n,children:r,tag:i="div",...o}=e;const s=xP("modal-footer",n);return(0,Me.jsx)(i,{className:s,...o,ref:t,children:r})}));Cj.displayName="MDBModalFooter";r.createContext({activeElement:null,setTargets:null});const wj=(0,r.forwardRef)(((e,t)=>{let{className:n,labelClass:i,labelStyle:o,inputRef:s,size:a,label:c,id:l,...d}=e;const u=xP("form-control","form-control-".concat(a),n),h=xP("form-label",i),p=(0,r.useRef)(null);return(0,r.useImperativeHandle)(t,(()=>p.current||(null==s?void 0:s.current))),(0,Me.jsxs)(Me.Fragment,{children:[c&&(0,Me.jsx)("label",{className:h,style:o,htmlFor:l,children:c}),(0,Me.jsx)("input",{className:u,type:"file",id:l,ref:p,...d})]})}));wj.displayName="MDBFile";const Rj=r.forwardRef(((e,t)=>{let{className:n,children:r,noBorder:i,textBefore:o,textAfter:s,noWrap:a,tag:c="div",textTag:l="span",textClass:d,size:u,textProps:h,...p}=e;const f=xP("input-group",a&&"flex-nowrap",u&&"input-group-".concat(u),n),m=xP("input-group-text",i&&"border-0",d),g=e=>(0,Me.jsx)(Me.Fragment,{children:e&&Array.isArray(e)?e.map(((e,t)=>(0,Me.jsx)(l,{className:m,...h,children:e},t))):(0,Me.jsx)(l,{className:m,...h,children:e})});return(0,Me.jsxs)(c,{className:f,ref:t,...p,children:[o&&g(o),r,s&&g(s)]})}));Rj.displayName="MDBInputGroup";const Aj=r.forwardRef(((e,t)=>{let{className:n,children:i,isValidated:o=!1,onReset:s,onSubmit:a,noValidate:c=!0,...l}=e;const[d,u]=(0,r.useState)(o),h=xP("needs-validation",d&&"was-validated",n);return(0,r.useEffect)((()=>{u(o)}),[o]),(0,Me.jsx)("form",{className:h,onSubmit:e=>{e.preventDefault(),u(!0),a&&a(e)},onReset:e=>{e.preventDefault(),u(!1),s&&s(e)},ref:t,noValidate:c,...l,children:i})}));Aj.displayName="MDBValidation";const Oj=r.forwardRef(((e,t)=>{let{className:n,fill:r,pills:i,justify:o,children:s,...a}=e;const c=xP("nav",i?"nav-pills":"nav-tabs",r&&"nav-fill",o&&"nav-justified",n);return(0,Me.jsx)("ul",{className:c,ref:t,...a,children:s})}));Oj.displayName="MDBTabs";const Mj=r.forwardRef(((e,t)=>{let{className:n,children:r,style:i,tag:o="li",...s}=e;const a=xP("nav-item",n);return(0,Me.jsx)(o,{className:a,style:{cursor:"pointer",...i},role:"presentation",ref:t,...s,children:r})}));Mj.displayName="MDBTabsItem";const Dj=r.forwardRef(((e,t)=>{let{className:n,color:i,active:o,onOpen:s,onClose:a,children:c,...l}=e;const d=xP("nav-link",o&&"active",i&&"bg-".concat(i),n);return(0,r.useEffect)((()=>{o?null==s||s():null==a||a()}),[o]),(0,Me.jsx)("a",{className:d,ref:t,...l,children:c})}));Dj.displayName="MDBTabsLink";const kj=r.forwardRef(((e,t)=>{let{className:n,tag:r="div",children:i,...o}=e;const s=xP("tab-content",n);return(0,Me.jsx)(r,{className:s,ref:t,...o,children:i})}));kj.displayName="MDBTabsContent";const xj=r.forwardRef(((e,t)=>{let{className:n,tag:i="div",open:o,children:s,...a}=e;const[c,l]=(0,r.useState)(!1),d=xP("tab-pane","fade",c&&"show",o&&"active",n);return(0,r.useEffect)((()=>{let e;return o?e=setTimeout((()=>{l(!0)}),100):l(!1),()=>{clearTimeout(e)}}),[o]),(0,Me.jsx)(i,{className:d,role:"tabpanel",ref:t,...a,children:s})}));xj.displayName="MDBTabsPane";(0,r.createContext)({active:0});const Lj=r.createContext({activeItem:0,setActiveItem:null,alwaysOpen:!1,initialActive:0}),Pj=r.forwardRef(((e,t)=>{let{alwaysOpen:n,borderless:i,className:o,flush:s,active:a,initialActive:c=0,tag:l="div",children:d,onChange:u,...h}=e;const p=(0,r.useMemo)((()=>typeof a<"u"),[a]),f=xP("accordion",s&&"accordion-flush",i&&"accordion-borderless",o),[m,g]=(0,r.useState)(c);return(0,Me.jsx)(l,{className:f,ref:t,...h,children:(0,Me.jsx)(Lj.Provider,{value:{activeItem:p?a:m,setActiveItem:g,alwaysOpen:n,initialActive:c,onChange:u},children:d})})}));Pj.displayName="MDBAccordion";const jj=r.forwardRef(((e,t)=>{let{className:n,bodyClassName:i,bodyStyle:o,headerClassName:s,collapseId:a,headerTitle:c,headerStyle:l,btnClassName:d,tag:u="div",children:h,...p}=e;const{activeItem:f,setActiveItem:m,alwaysOpen:g,onChange:y}=(0,r.useContext)(Lj),v=(0,r.useMemo)((()=>Array.isArray(f)?f.includes(a):f===a),[f,a]),_=xP("accordion-item",n),E=xP("accordion-header",s),S=xP("accordion-body",i),T=xP("accordion-button",!v&&"collapsed",d),b=(0,r.useCallback)((e=>{let t=e;Array.isArray(f)?t=f.includes(e)?f.filter((t=>t!==e)):g?[...f,e]:[e]:(t=f===e?0:e,g&&(t=[t])),null==y||y(t),m(t)}),[y,f,m,g]);return(0,Me.jsxs)(u,{className:_,ref:t,...p,children:[(0,Me.jsx)("h2",{className:E,style:l,children:(0,Me.jsx)("button",{onClick:()=>b(a),className:T,type:"button",children:c})}),(0,Me.jsx)(Ej,{id:a.toString(),open:v,children:(0,Me.jsx)("div",{className:S,style:o,children:h})})]})}));jj.displayName="MDBAccordionItem";const Uj=()=>{const{cartList:e,getCartList:t,cartListRemove:n,cartListUpdate:i,totalprice:o,orderCheckOut:s}=Kr(),[a,c]=(0,r.useState)({});(0,r.useEffect)((()=>{(async()=>{await t()})()}),[]),(0,r.useEffect)((()=>{const t=e.reduce(((e,t)=>(e[t.item_details._id]=t.quantity,e)),{});c(t)}),[e]);return(0,Me.jsx)("section",{className:"h-100",style:{backgroundColor:"#eee"},children:(0,Me.jsx)(LP,{className:"py-5 h-100",children:(0,Me.jsx)(tj,{className:"justify-content-center align-items-center h-100",children:(0,Me.jsxs)(PP,{md:"10",children:[(0,Me.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:(0,Me.jsx)(rj,{tag:"h3",className:"fw-normal mb-0 text-black",children:"Shopping Cart"})}),0===e.length?(0,Me.jsx)(Eh,{des:"Kindly add the product to your checkout. Thank you!"}):Array.isArray(e)&&e.map((e=>{const t=e.total_price/e.quantity;return(0,Me.jsx)(GP,{className:"rounded-3 mb-4",children:(0,Me.jsx)(KP,{className:"p-4",children:(0,Me.jsxs)(tj,{className:"justify-content-between align-items-center",children:[(0,Me.jsx)(PP,{md:"2",lg:"2",xl:"2",children:(0,Me.jsx)(Re,{to:"/product/related-product/".concat(e.item_details._id),children:(0,Me.jsx)(JP,{className:"rounded-3",fluid:!0,src:e.item_details.image,style:{height:"170px",width:"200px"}})})}),(0,Me.jsx)(PP,{md:"3",lg:"3",xl:"3",children:(0,Me.jsx)("p",{className:"lead fw-normal mb-2",children:e.item_details.title})}),(0,Me.jsx)(PP,{children:(0,Me.jsx)("p",{className:" fw-normal mb-2",children:t})}),(0,Me.jsxs)(PP,{md:"3",lg:"3",xl:"2",className:"d-flex align-items-center justify-content-around",children:[(0,Me.jsx)("button",{onClick:()=>(e=>{if(a[e]>0){const t=a[e]-1;c((n=>({...n,[e]:t}))),i(e,t)}})(e.item_details._id),className:"px-2 border-1 border-primary",children:(0,Me.jsx)(nj,{fas:!0,icon:"minus"})}),(0,Me.jsx)(vj,{value:a[e.item_details._id]||"",type:"number",size:"sm",onChange:()=>{}}),(0,Me.jsx)("button",{color:"link",className:"px-2",onClick:()=>(e=>{const t=(a[e]||0)+1;c((n=>({...n,[e]:t}))),i(e,t)})(e.item_details._id),children:(0,Me.jsx)(nj,{fas:!0,icon:"plus"})})]}),(0,Me.jsx)(PP,{md:"3",lg:"2",xl:"2",className:"offset-lg-1",children:(0,Me.jsxs)(rj,{tag:"h5",className:"mb-0",children:["\u20b9"," ",a[e.item_details._id]*t||e.total_price]})}),(0,Me.jsx)(PP,{md:"1",lg:"1",xl:"1",className:"text-end",onClick:()=>(e=>{n(e)})(e.item_details._id),children:(0,Me.jsx)(Re,{className:"text-danger",children:(0,Me.jsx)(nj,{fas:!0,icon:"trash text-danger",size:"lg"})})})]})})},e.item_details._id)})),e.length?(0,Me.jsx)(PP,{md:"12",lg:"4",children:(0,Me.jsxs)("div",{className:"summary bg-light p-3 ",children:[(0,Me.jsx)("h3",{className:"mb-4",children:"Summary"}),(0,Me.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,Me.jsx)("span",{children:"Total"}),(0,Me.jsxs)("span",{className:"price",children:[" \u20b9 ",o]})]}),(0,Me.jsx)("button",{type:"button",className:"btn btn-primary btn-lg btn-block mt-3 text-white",onClick:async()=>{const t=e.map((e=>{var t;return{product_id:null===(t=e.item_details)||void 0===t?void 0:t._id,quantity:e.quantity,total_price:e.total_price}})),n={total_price:o,items:t};await s(n,t.product_id)},children:"Checkout"})]})}):""]})})})})},Fj=()=>{const{orderList:e,getMyOrderList:t,listLoading:n}=Kr();return(0,r.useEffect)((()=>{(async()=>{await t()})()}),[]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"My Order"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Re,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"My Order"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(Zs,{}),(0,Me.jsx)("div",{className:"col-md-3",children:(0,Me.jsx)(mA,{})}),(0,Me.jsx)("div",{className:"col-md-7",children:(0,Me.jsx)("div",{className:"card border-0",children:(0,Me.jsxs)("div",{className:"card card-body border-0",children:[(0,Me.jsx)("h2",{className:"text24 mb-1",children:"My Order"}),(0,Me.jsx)("p",{className:"text-muted mb-1",children:"Here you can see your Orders."}),(0,Me.jsx)("hr",{className:"mt0"}),n.Post?Array.from({length:3}).map(((e,t)=>(0,Me.jsx)(_h,{},t))):Array.isArray(e)&&0===e.length?(0,Me.jsx)(Eh,{des:"Place An Order, to See your Orders Thank you!."}):Array.isArray(e)&&e.map(((e,t)=>(0,Me.jsx)("div",{className:"card mb-3 myPostItem",children:null===e||void 0===e?void 0:e.items.map(((e,t)=>(0,Me.jsxs)("div",{className:"row g-0",children:[(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)("div",{className:"imgBx",children:(0,Me.jsx)("img",{src:e.image,className:"img-fluid rounded-start",alt:"Dzital"})})}),(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-9",children:(0,Me.jsx)("h5",{className:"card-title mb-1",children:e.title})}),(0,Me.jsx)("div",{className:"col-md-3",align:"right",children:(0,Me.jsx)("h5",{className:"m0",children:(0,Me.jsx)("b",{className:"badge bg-warning text-dark"})})})]}),(0,Me.jsxs)("p",{className:"card-text mb-0",children:["Quantity : ",e.quantity]}),(0,Me.jsxs)("p",{className:"card-text mb-0",children:["Total Price : ",e.total_price]}),(0,Me.jsx)("hr",{className:"mb-2 mt-1"})]})})]})))},t)))]})})}),(0,Me.jsx)(Zs,{})]})})})]})},zj=()=>{var e,t,n,i,o,s,a;const{getAllProductDetails:c,getAllUnAuthProductDetails:l,allPDetails:d,isLogIn:u}=Kr(),h=ne();return(0,r.useEffect)((()=>{h.id&&(async()=>{u?await c(h.id):await l(h.id)})()}),[h.id]),d&&d.data?(0,Me.jsxs)("div",{children:["Real Estate"===(null===(e=d.data)||void 0===e?void 0:e.category_name)&&(0,Me.jsx)(CA,{initialDetail:d}),"Jobs"===(null===(t=d.data)||void 0===t?void 0:t.category_name)&&(0,Me.jsx)(pO,{initialDetail:d}),"Freelancer"===(null===(n=d.data)||void 0===n?void 0:n.category_name)&&(0,Me.jsx)(EO,{initialDetail:d}),"Lessons & Courses"===(null===(i=d.data)||void 0===i?void 0:i.category_name)&&(0,Me.jsx)(NO,{initialDetail:d}),"Fashion & Beauty"===(null===(o=d.data)||void 0===o?void 0:o.category_name)&&(0,Me.jsx)(SM,{initialDetail:d}),"Electronics"===(null===(s=d.data)||void 0===s?void 0:s.category_name)&&(0,Me.jsx)(vM,{initialDetail:d}),"Goods of all kinds"===(null===(a=d.data)||void 0===a?void 0:a.category_name)&&(0,Me.jsx)(_A,{initialDetail:d})]}):null};const Vj=function(){const{mainscreenLoading:e}=Kr();return(0,Me.jsx)("div",{className:"App ",children:e?(0,Me.jsx)(_M,{}):(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(Js,{}),(0,Me.jsx)(bM,{}),(0,Me.jsx)(sl,{position:"top-center",autoClose:2e3,closeOnClick:!0,transition:ol}),(0,Me.jsxs)(_e,{children:[(0,Me.jsx)(ye,{exact:!0,path:"/",element:(0,Me.jsx)(jc,{})}),(0,Me.jsx)(ye,{path:"/about-us",element:(0,Me.jsx)($s,{})}),(0,Me.jsx)(ye,{path:"/contact-us",element:(0,Me.jsx)(hM,{})}),(0,Me.jsx)(ye,{path:"/privacy-policy",element:(0,Me.jsx)(pM,{})}),(0,Me.jsx)(ye,{path:"/terms-and-conditions",element:(0,Me.jsx)(fM,{})}),(0,Me.jsx)(ye,{path:"/goods_of_all_kinds",element:(0,Me.jsx)(Sh,{})}),(0,Me.jsx)(ye,{path:"/electronics",element:(0,Me.jsx)(yM,{})}),(0,Me.jsx)(ye,{path:"/Electronics-detail/:id",element:(0,Me.jsx)(vM,{})}),(0,Me.jsx)(ye,{path:"/Login",element:(0,Me.jsx)(hA,{})}),(0,Me.jsx)(ye,{path:"/Login-with-email",element:(0,Me.jsx)(pA,{})}),(0,Me.jsx)(ye,{path:"/product-detail/:id",element:(0,Me.jsx)(_A,{})}),(0,Me.jsx)(ye,{path:"/real_estate",element:(0,Me.jsx)(bA,{})}),(0,Me.jsx)(ye,{path:"/realstate-detail/:id",element:(0,Me.jsx)(CA,{})}),(0,Me.jsx)(ye,{path:"/singup",element:(0,Me.jsx)(wA,{})}),(0,Me.jsx)(ye,{path:"/jobs",element:(0,Me.jsx)(uO,{})}),(0,Me.jsx)(ye,{path:"/product/:slug/:id",element:(0,Me.jsx)(zj,{})}),(0,Me.jsx)(ye,{path:"/job-detail/:id",element:(0,Me.jsx)(pO,{})}),(0,Me.jsx)(ye,{path:"/fashion_beauty",element:(0,Me.jsx)(gO,{})}),(0,Me.jsx)(ye,{path:"/Fashion-Beauty-Details/:id",element:(0,Me.jsx)(SM,{})}),(0,Me.jsx)(ye,{path:"/freelancer",element:(0,Me.jsx)(_O,{})}),(0,Me.jsx)(ye,{path:"/freelancer-detail/:id",element:(0,Me.jsx)(EO,{})}),(0,Me.jsx)(ye,{path:"/lesson_courses",element:(0,Me.jsx)(bO,{})}),(0,Me.jsx)(ye,{path:"/lessons-courses-detail/:id",element:(0,Me.jsx)(NO,{})}),(0,Me.jsx)(ye,{path:"/faq",element:(0,Me.jsx)(TM,{})}),(0,Me.jsx)(ye,{path:"/videocall",element:(0,Me.jsx)(eL,{})}),(0,Me.jsx)(ye,{path:"/voice-call",element:(0,Me.jsx)(rL,{})}),(0,Me.jsx)(ye,{path:"/disclaimer",element:(0,Me.jsx)(MP,{})}),(0,Me.jsx)(ye,{path:"/customer_support",element:(0,Me.jsx)(DP,{})}),(0,Me.jsx)(ye,{path:"*",element:(0,Me.jsx)("div",{children:"page not found"})}),(0,Me.jsx)(ye,{path:"/message",element:(0,Me.jsx)(EA,{}),children:(0,Me.jsx)(ye,{index:!0,element:(0,Me.jsx)(sL,{})})}),(0,Me.jsx)(ye,{path:"/account",element:(0,Me.jsx)(EA,{}),children:(0,Me.jsx)(ye,{index:!0,element:(0,Me.jsx)(gA,{})})}),(0,Me.jsx)(ye,{path:"/my-post",element:(0,Me.jsx)(EA,{}),children:(0,Me.jsx)(ye,{index:!0,element:(0,Me.jsx)(CO,{})})}),(0,Me.jsx)(ye,{path:"/updateProduct/:id",element:(0,Me.jsx)(EA,{}),children:(0,Me.jsx)(ye,{index:!0,element:(0,Me.jsx)(wO,{})})}),(0,Me.jsx)(ye,{path:"/add-post",element:(0,Me.jsx)(EA,{}),children:(0,Me.jsx)(ye,{index:!0,element:(0,Me.jsx)(AO,{})})}),(0,Me.jsx)(ye,{path:"/add-title",element:(0,Me.jsx)(EA,{}),children:(0,Me.jsx)(ye,{index:!0,element:(0,Me.jsx)(OP,{})})}),(0,Me.jsx)(ye,{path:"/add-product",element:(0,Me.jsx)(EA,{}),children:(0,Me.jsx)(ye,{index:!0,element:(0,Me.jsx)(AP,{})})}),(0,Me.jsx)(ye,{path:"/wishlist",element:(0,Me.jsx)(EA,{}),children:(0,Me.jsx)(ye,{index:!0,element:(0,Me.jsx)(DO,{})})}),(0,Me.jsx)(ye,{path:"/cart",element:(0,Me.jsx)(EA,{}),children:(0,Me.jsx)(ye,{index:!0,element:(0,Me.jsx)(Uj,{})})}),(0,Me.jsx)(ye,{path:"/my-Order",element:(0,Me.jsx)(EA,{}),children:(0,Me.jsx)(ye,{index:!0,element:(0,Me.jsx)(Fj,{})})}),(0,Me.jsx)(ye,{path:"/packages",element:(0,Me.jsx)(EA,{}),children:(0,Me.jsx)(ye,{index:!0,element:(0,Me.jsx)(uM,{})})}),(0,Me.jsx)(ye,{path:"/change-password",element:(0,Me.jsx)(EA,{}),children:(0,Me.jsx)(ye,{index:!0,element:(0,Me.jsx)(RO,{})})}),(0,Me.jsx)(ye,{path:"/user-update",element:(0,Me.jsx)(EA,{}),children:(0,Me.jsx)(ye,{index:!0,element:(0,Me.jsx)(cO,{})})})]}),(0,Me.jsx)(De,{})]})})};function Bj(e,t){return function(){return e.apply(t,arguments)}}const{toString:Gj}=Object.prototype,{getPrototypeOf:Hj}=Object,Wj=(Yj=Object.create(null),e=>{const t=Gj.call(e);return Yj[t]||(Yj[t]=t.slice(8,-1).toLowerCase())});var Yj;const qj=e=>(e=e.toLowerCase(),t=>Wj(t)===e),Kj=e=>t=>typeof t===e,{isArray:Qj}=Array,Jj=Kj("undefined");const Xj=qj("ArrayBuffer");const Zj=Kj("string"),$j=Kj("function"),eU=Kj("number"),tU=e=>null!==e&&"object"===typeof e,nU=e=>{if("object"!==Wj(e))return!1;const t=Hj(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},rU=qj("Date"),iU=qj("File"),oU=qj("Blob"),sU=qj("FileList"),aU=qj("URLSearchParams");function cU(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Qj(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let s;for(n=0;n<o;n++)s=r[n],t.call(null,e[s],s,e)}}function lU(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const dU="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,uU=e=>!Jj(e)&&e!==dU;const hU=(pU="undefined"!==typeof Uint8Array&&Hj(Uint8Array),e=>pU&&e instanceof pU);var pU;const fU=qj("HTMLFormElement"),mU=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),gU=qj("RegExp"),yU=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};cU(n,((n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)},vU="abcdefghijklmnopqrstuvwxyz",_U="0123456789",EU={DIGIT:_U,ALPHA:vU,ALPHA_DIGIT:vU+vU.toUpperCase()+_U};const SU=qj("AsyncFunction"),TU={isArray:Qj,isArrayBuffer:Xj,isBuffer:function(e){return null!==e&&!Jj(e)&&null!==e.constructor&&!Jj(e.constructor)&&$j(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||$j(e.append)&&("formdata"===(t=Wj(e))||"object"===t&&$j(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Xj(e.buffer),t},isString:Zj,isNumber:eU,isBoolean:e=>!0===e||!1===e,isObject:tU,isPlainObject:nU,isUndefined:Jj,isDate:rU,isFile:iU,isBlob:oU,isRegExp:gU,isFunction:$j,isStream:e=>tU(e)&&$j(e.pipe),isURLSearchParams:aU,isTypedArray:hU,isFileList:sU,forEach:cU,merge:function e(){const{caseless:t}=uU(this)&&this||{},n={},r=(r,i)=>{const o=t&&lU(n,i)||i;nU(n[o])&&nU(r)?n[o]=e(n[o],r):nU(r)?n[o]=e({},r):Qj(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&cU(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return cU(t,((t,r)=>{n&&$j(t)?e[r]=Bj(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,s;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)s=i[o],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&Hj(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Wj,kindOfTest:qj,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Qj(e))return e;let t=e.length;if(!eU(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:fU,hasOwnProperty:mU,hasOwnProp:mU,reduceDescriptors:yU,freezeMethods:e=>{yU(e,((t,n)=>{if($j(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];$j(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return Qj(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:lU,global:dU,isContextDefined:uU,ALPHABET:EU,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:EU.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&$j(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(tU(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=Qj(e)?[]:{};return cU(e,((e,t)=>{const o=n(e,r+1);!Jj(o)&&(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:SU,isThenable:e=>e&&(tU(e)||$j(e))&&$j(e.then)&&$j(e.catch)};function bU(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}TU.inherits(bU,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:TU.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const IU=bU.prototype,NU={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{NU[e]={value:e}})),Object.defineProperties(bU,NU),Object.defineProperty(IU,"isAxiosError",{value:!0}),bU.from=(e,t,n,r,i,o)=>{const s=Object.create(IU);return TU.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),bU.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const CU=bU;function wU(e){return TU.isPlainObject(e)||TU.isArray(e)}function RU(e){return TU.endsWith(e,"[]")?e.slice(0,-2):e}function AU(e,t,n){return e?e.concat(t).map((function(e,t){return e=RU(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const OU=TU.toFlatObject(TU,{},null,(function(e){return/^is[A-Z]/.test(e)}));const MU=function(e,t,n){if(!TU.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=TU.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!TU.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&TU.isSpecCompliantForm(t);if(!TU.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(TU.isDate(e))return e.toISOString();if(!a&&TU.isBlob(e))throw new CU("Blob is not supported. Use a Buffer instead.");return TU.isArrayBuffer(e)||TU.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(TU.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(TU.isArray(e)&&function(e){return TU.isArray(e)&&!e.some(wU)}(e)||(TU.isFileList(e)||TU.endsWith(n,"[]"))&&(a=TU.toArray(e)))return n=RU(n),a.forEach((function(e,r){!TU.isUndefined(e)&&null!==e&&t.append(!0===s?AU([n],r,o):null===s?n:n+"[]",c(e))})),!1;return!!wU(e)||(t.append(AU(i,n,o),c(e)),!1)}const d=[],u=Object.assign(OU,{defaultVisitor:l,convertValue:c,isVisitable:wU});if(!TU.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!TU.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+r.join("."));d.push(n),TU.forEach(n,(function(n,o){!0===(!(TU.isUndefined(n)||null===n)&&i.call(t,n,TU.isString(o)?o.trim():o,r,u))&&e(n,r?r.concat(o):[o])})),d.pop()}}(e),t};function DU(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function kU(e,t){this._pairs=[],e&&MU(e,this,t)}const xU=kU.prototype;xU.append=function(e,t){this._pairs.push([e,t])},xU.toString=function(e){const t=e?function(t){return e.call(this,t,DU)}:DU;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const LU=kU;function PU(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function jU(e,t,n){if(!t)return e;const r=n&&n.encode||PU,i=n&&n.serialize;let o;if(o=i?i(t,n):TU.isURLSearchParams(t)?t.toString():new LU(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const UU=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){TU.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},FU={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zU={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:LU,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},VU="undefined"!==typeof window&&"undefined"!==typeof document,BU=(GU="undefined"!==typeof navigator&&navigator.product,VU&&["ReactNative","NativeScript","NS"].indexOf(GU)<0);var GU;const HU="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,WU={...t,...zU};const YU=function(e){function t(e,n,r,i){let o=e[i++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=i>=e.length;if(o=!o&&TU.isArray(r)?r.length:o,a)return TU.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s;r[o]&&TU.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],i)&&TU.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!s}if(TU.isFormData(e)&&TU.isFunction(e.entries)){const n={};return TU.forEachEntry(e,((e,r)=>{t(function(e){return TU.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const qU={transitional:FU,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=TU.isObject(t);o&&TU.isHTMLForm(t)&&(t=new FormData(t));if(TU.isFormData(t))return i?JSON.stringify(YU(t)):t;if(TU.isArrayBuffer(t)||TU.isBuffer(t)||TU.isStream(t)||TU.isFile(t)||TU.isBlob(t))return t;if(TU.isArrayBufferView(t))return t.buffer;if(TU.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return MU(e,new WU.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return WU.isNode&&TU.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(t,this.formSerializer).toString();if((s=TU.isFileList(t))||r.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return MU(s?{"files[]":t}:t,e&&new e,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),function(t,n,r){if(TU.isString(t))try{return(n||JSON.parse)(t),TU.trim(t)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const n=this.transitional||qU.transitional,r=n&&n.forcedJSONParsing,i="json"===this.responseType;if(t&&TU.isString(t)&&(r&&!this.responseType||i)){const r=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(e){if(r){if("SyntaxError"===e.name)throw CU.from(e,CU.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:WU.classes.FormData,Blob:WU.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};TU.forEach(["delete","get","head","post","put","patch"],(e=>{qU.headers[e]={}}));const KU=qU,QU=TU.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),JU=Symbol("internals");function XU(e){return e&&String(e).trim().toLowerCase()}function ZU(e){return!1===e||null==e?e:TU.isArray(e)?e.map(ZU):String(e)}function $U(e,t,n,r,i){return TU.isFunction(r)?r.call(this,t,n):(i&&(t=n),TU.isString(t)?TU.isString(r)?-1!==t.indexOf(r):TU.isRegExp(r)?r.test(t):void 0:void 0)}class eF{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=XU(t);if(!i)throw new Error("header name must be a non-empty string");const o=TU.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=ZU(e))}const o=(e,t)=>TU.forEach(e,((e,n)=>i(e,n,t)));return TU.isPlainObject(e)||e instanceof this.constructor?o(e,t):TU.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&QU[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=XU(e)){const n=TU.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(TU.isFunction(t))return t.call(this,e,n);if(TU.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=XU(e)){const n=TU.findKey(this,e);return!(!n||void 0===this[n]||t&&!$U(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=XU(e)){const i=TU.findKey(n,e);!i||t&&!$U(0,n[i],i,t)||(delete n[i],r=!0)}}return TU.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!$U(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return TU.forEach(this,((r,i)=>{const o=TU.findKey(n,i);if(o)return t[o]=ZU(r),void delete t[i];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();s!==i&&delete t[i],t[s]=ZU(r),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return TU.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&TU.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[JU]=this[JU]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=XU(e);t[r]||(!function(e,t){const n=TU.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return TU.isArray(e)?e.forEach(r):r(e),this}}eF.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),TU.reduceDescriptors(eF.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),TU.freezeMethods(eF);const tF=eF;function nF(e,t){const n=this||KU,r=t||n,i=tF.from(r.headers);let o=r.data;return TU.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function rF(e){return!(!e||!e.__CANCEL__)}function iF(e,t,n){CU.call(this,null==e?"canceled":e,CU.ERR_CANCELED,t,n),this.name="CanceledError"}TU.inherits(iF,CU,{__CANCEL__:!0});const oF=iF;const sF=WU.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const s=[e+"="+encodeURIComponent(t)];TU.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),TU.isString(r)&&s.push("path="+r),TU.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function aF(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const cF=WU.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=TU.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};const lF=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=r[s];i||(i=c),n[o]=a,r[o]=c;let d=s,u=0;for(;d!==o;)u+=n[d++],d%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),c-i<t)return;const h=l&&c-l;return h?Math.round(1e3*u/h):void 0}};function dF(e,t){let n=0;const r=lF(50,250);return i=>{const o=i.loaded,s=i.lengthComputable?i.total:void 0,a=o-n,c=r(a);n=o;const l={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&o<=s?(s-o)/c:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}const uF="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const i=tF.from(e.headers).normalize();let o,s,{responseType:a,withXSRFToken:c}=e;function l(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}if(TU.isFormData(r))if(WU.hasStandardBrowserEnv||WU.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(s=i.getContentType())){const[e,...t]=s?s.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let d=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const u=aF(e.baseURL,e.url);function h(){if(!d)return;const r=tF.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new CU("Request failed with status code "+n.status,[CU.ERR_BAD_REQUEST,CU.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),l()}),(function(e){n(e),l()}),{data:a&&"text"!==a&&"json"!==a?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:r,config:e,request:d}),d=null}if(d.open(e.method.toUpperCase(),jU(u,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,"onloadend"in d?d.onloadend=h:d.onreadystatechange=function(){d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))&&setTimeout(h)},d.onabort=function(){d&&(n(new CU("Request aborted",CU.ECONNABORTED,e,d)),d=null)},d.onerror=function(){n(new CU("Network Error",CU.ERR_NETWORK,e,d)),d=null},d.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||FU;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new CU(t,r.clarifyTimeoutError?CU.ETIMEDOUT:CU.ECONNABORTED,e,d)),d=null},WU.hasStandardBrowserEnv&&(c&&TU.isFunction(c)&&(c=c(e)),c||!1!==c&&cF(u))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&sF.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in d&&TU.forEach(i.toJSON(),(function(e,t){d.setRequestHeader(t,e)})),TU.isUndefined(e.withCredentials)||(d.withCredentials=!!e.withCredentials),a&&"json"!==a&&(d.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&d.addEventListener("progress",dF(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",dF(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=t=>{d&&(n(!t||t.type?new oF(null,e,d):t),d.abort(),d=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const p=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(u);p&&-1===WU.protocols.indexOf(p)?n(new CU("Unsupported protocol "+p+":",CU.ERR_BAD_REQUEST,e)):d.send(r||null)}))},hF={http:null,xhr:uF};TU.forEach(hF,((t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch(e){}Object.defineProperty(t,"adapterName",{value:n})}}));const pF=e=>"- ".concat(e),fF=e=>TU.isFunction(e)||null===e||!1===e,mF=e=>{e=TU.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!fF(n)&&(r=hF[(t=String(n)).toLowerCase()],void 0===r))throw new CU("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+o]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(pF).join("\n"):" "+pF(e[0]):"as no adapter specified";throw new CU("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function gF(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new oF(null,e)}function yF(e){gF(e),e.headers=tF.from(e.headers),e.data=nF.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return mF(e.adapter||KU.adapter)(e).then((function(t){return gF(e),t.data=nF.call(e,e.transformResponse,t),t.headers=tF.from(t.headers),t}),(function(t){return rF(t)||(gF(e),t&&t.response&&(t.response.data=nF.call(e,e.transformResponse,t.response),t.response.headers=tF.from(t.response.headers))),Promise.reject(t)}))}const vF=e=>e instanceof tF?{...e}:e;function _F(e,t){t=t||{};const n={};function r(e,t,n){return TU.isPlainObject(e)&&TU.isPlainObject(t)?TU.merge.call({caseless:n},e,t):TU.isPlainObject(t)?TU.merge({},t):TU.isArray(t)?t.slice():t}function i(e,t,n){return TU.isUndefined(t)?TU.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!TU.isUndefined(t))return r(void 0,t)}function s(e,t){return TU.isUndefined(t)?TU.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t)=>i(vF(e),vF(t),!0)};return TU.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=c[r]||i,s=o(e[r],t[r],r);TU.isUndefined(s)&&o!==a||(n[r]=s)})),n}const EF="1.6.8",SF={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{SF[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const TF={};SF.transitional=function(e,t,n){function r(e,t){return"[Axios v1.6.8] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new CU(r(i," has been removed"+(t?" in "+t:"")),CU.ERR_DEPRECATED);return t&&!TF[i]&&(TF[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};const bF={assertOptions:function(e,t,n){if("object"!==typeof e)throw new CU("options must be an object",CU.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const t=e[o],n=void 0===t||s(t,o,e);if(!0!==n)throw new CU("option "+o+" must be "+n,CU.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new CU("Unknown option "+o,CU.ERR_BAD_OPTION)}},validators:SF},IF=bF.validators;class NF{constructor(e){this.defaults=e,this.interceptors={request:new UU,response:new UU}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=_F(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&bF.assertOptions(n,{silentJSONParsing:IF.transitional(IF.boolean),forcedJSONParsing:IF.transitional(IF.boolean),clarifyTimeoutError:IF.transitional(IF.boolean)},!1),null!=r&&(TU.isFunction(r)?t.paramsSerializer={serialize:r}:bF.assertOptions(r,{encode:IF.function,serialize:IF.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&TU.merge(i.common,i[t.method]);i&&TU.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=tF.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let d,u=0;if(!a){const e=[yF.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,c),d=e.length,l=Promise.resolve(t);u<d;)l=l.then(e[u++],e[u++]);return l}d=s.length;let h=t;for(u=0;u<d;){const e=s[u++],t=s[u++];try{h=e(h)}catch(Sv){t.call(this,Sv);break}}try{l=yF.call(this,h)}catch(Sv){return Promise.reject(Sv)}for(u=0,d=c.length;u<d;)l=l.then(c[u++],c[u++]);return l}getUri(e){return jU(aF((e=_F(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}TU.forEach(["delete","get","head","options"],(function(e){NF.prototype[e]=function(t,n){return this.request(_F(n||{},{method:e,url:t,data:(n||{}).data}))}})),TU.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(_F(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}NF.prototype[e]=t(),NF.prototype[e+"Form"]=t(!0)}));const CF=NF;class wF{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new oF(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new wF((function(t){e=t})),cancel:e}}}const RF=wF;const AF={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(AF).forEach((e=>{let[t,n]=e;AF[n]=t}));const OF=AF;const MF=function e(t){const n=new CF(t),r=Bj(CF.prototype.request,n);return TU.extend(r,CF.prototype,n,{allOwnKeys:!0}),TU.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(_F(t,n))},r}(KU);MF.Axios=CF,MF.CanceledError=oF,MF.CancelToken=RF,MF.isCancel=rF,MF.VERSION=EF,MF.toFormData=MU,MF.AxiosError=CU,MF.Cancel=MF.CanceledError,MF.all=function(e){return Promise.all(e)},MF.spread=function(e){return function(t){return e.apply(null,t)}},MF.isAxiosError=function(e){return TU.isObject(e)&&!0===e.isAxiosError},MF.mergeConfig=_F,MF.AxiosHeaders=tF,MF.formToJSON=e=>YU(TU.isHTMLForm(e)?new FormData(e):e),MF.getAdapter=mF,MF.HttpStatusCode=OF,MF.default=MF;const DF=MF,kF="http://13.201.212.185:4200",xF=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)({}),[a,c]=(0,r.useState)([]),[l,d]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[p,f]=(0,r.useState)(!1),[m,g]=(0,r.useState)([]),[y,v]=(0,r.useState)([]),[_,E]=(0,r.useState)({isLoad:!1,data:{}}),[S,T]=(0,r.useState)({data:{},isLoad:!1}),[b,I]=(0,r.useState)([]),[N,C]=(0,r.useState)(""),[w,R]=(0,r.useState)(!1),[A,O]=(0,r.useState)(!1),[M,D]=(0,r.useState)({data:{},isLoad:!1}),[k,x]=(0,r.useState)({data:{},isLoad:!1}),[L,P]=(0,r.useState)([]),[j,U]=(0,r.useState)({data:{},isLoad:!1}),[F,z]=(0,r.useState)([]),[V,B]=(0,r.useState)({data:{},isLoad:!1}),[G,H]=(0,r.useState)([]),[W,Y]=(0,r.useState)([]),[q,K]=(0,r.useState)({data:[],isLoad:!1}),[Q,J]=(0,r.useState)([]),[X,$]=(0,r.useState)([]),[te,ne]=(0,r.useState)([]),[re,ie]=(0,r.useState)([]),[oe,se]=(0,r.useState)(),[ae,ce]=(0,r.useState)([]),[le,de]=(0,r.useState)(!1),[ue,he]=(0,r.useState)([]),[pe,fe]=(0,r.useState)([]),[me,ge]=(0,r.useState)([]),[ye,ve]=(0,r.useState)([]),[_e,Ee]=(0,r.useState)({}),[Se,Te]=(0,r.useState)({}),[be,Ie]=(0,r.useState)({goods:0,job:0,freelancer:0,RealEstate:0,Lessons:0,Fashion:0,Electronics:0,post:0}),[Ne,Ce]=(0,r.useState)({goods:!1,job:!1,freelancer:!1,RealEstate:!1,Lessons:!1,Fashion:!1,Electronics:!1,WishList:!1,Post:!1,cartList:!1}),we=ee(),Re=Z(),Ae=localStorage.getItem("token"),[Oe,De]=(0,r.useState)([]),ke=async()=>{const e=localStorage.getItem("token");if(R(!0),N||e)try{const t=await fetch("".concat(kF,"/api/profile/details"),{method:"GET",headers:{"Content-Type":"application/json",token:N||e}}),n=await t.json();t.ok?(s(n.data),i(!0)):i(!1)}catch(Sv){i(!1)}else i(!1);R(!1)},xe=async(e,t)=>{const n=new URLSearchParams(Re.search).get("redirect");C(e),localStorage.setItem("token",e),await ke(),gl.success(t),we(n?"".concat(n):"/account")},Le=async()=>{await ke()},Pe=async(e,t,r)=>{try{Ce({...Ne,goods:!0});const{keyword_search:i,page:s,limit:a}=e,c=await fetch("".concat(kF,"/api/product/goods/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword_search:i||"",page:s,limit:a,sub_category_id:t||"",filter:Array.isArray(r)&&r.length>0?r:null,...n&&{userId:o._id}})}),l=await c.json();c.ok&&(de(!0),g(l.data),Ie({...be,goods:l.total}))}catch(Sv){console.log(Sv)}finally{de(!1),Ce({...Ne,goods:!1})}},je=async(e,t,r)=>{try{Ce({...Ne,Electronics:!0});const{keyword_search:i,page:s,limit:a}=e,c=await fetch("".concat(kF,"/api/product/electronics/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword_search:i||"",page:s,limit:a,sub_category_id:t||"",filter:Array.isArray(r)&&r.length>0?r:null,...n&&{userId:o._id}})}),l=await c.json();c.ok&&(I(l.data),Ie({...be,Electronics:l.total}))}catch(Sv){console.log(Sv)}finally{Ce({...Ne,Electronics:!1})}},Ue=async(e,t,r)=>{try{Ce({...Ne,freelancer:!0});const{keyword_search:i,page:s,limit:a}=e,c=await fetch("".concat(kF,"/api/product/freelancer/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword_search:i||"",page:s,limit:a,sub_category_id:t||"",filter:Array.isArray(r)&&r.length>0?r:null,...n&&{userId:o._id}})}),l=await c.json();c.ok&&(P(l.data),Ie({...be,freelancer:l.total}))}catch(Sv){console.log(Sv)}finally{Ce({...Ne,freelancer:!1})}},Fe=async(e,t,r)=>{try{Ce({...Ne,Fashion:!0});const{keyword_search:i,page:s,limit:a}=e,c=await fetch("".concat(kF,"/api/product/fashion/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword_search:i||"",page:s,limit:a,sub_category_id:t,filter:Array.isArray(r)&&r.length>0?r:null,...n&&{userId:o._id}})}),l=await c.json();c.ok&&(z(l.data),Ie({...be,Fashion:l.total}))}catch(Sv){console.log(Sv)}finally{Ce({...Ne,Fashion:!1})}},ze=async(e,t,r)=>{try{Ce({...Ne,RealEstate:!0});const{keyword_search:i,page:s,limit:a}=e,c=await fetch("".concat(kF,"/api/property/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword_search:i||"",page:s,limit:a,sub_category_id:t,filter:Array.isArray(r)&&r.length>0?r:null,...n&&{userId:o._id}})}),l=await c.json();c.ok&&(Y(l.data),Ie({...be,RealEstate:l.total}))}catch(Sv){console.log(Sv)}finally{Ce({...Ne,RealEstate:!1})}},Ve=async(e,t,r)=>{try{Ce({...Ne,Lessons:!0});const{keyword_search:i,page:s,limit:a}=e,c=await fetch("".concat(kF,"/api/product/lesson-courses/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword_search:i||"",page:s,limit:a,sub_category_id:t,filter:Array.isArray(r)&&r.length>0?r:null,...n&&{userId:o._id}})}),l=await c.json();c.ok&&(H(l.data),Ie({...be,Lessons:l.total}))}catch(Sv){console.log(Sv)}finally{Ce({...Ne,Lessons:!1})}},Be=async(e,t,r)=>{try{Ce({...Ne,job:!0});const{keyword_search:i,page:s,limit:a}=e,c=await fetch("".concat(kF,"/api/product/job/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword_search:i||"",page:s,limit:a,sub_category_id:t||"",filter:Array.isArray(r)&&r.length>0?r:null,...n&&{userId:o._id}})}),l=await c.json();c.ok&&(J(l.data),Ie({...be,job:l.total}))}catch(Sv){console.log(Sv)}finally{Ce({...Ne,job:!1})}},Ge=async e=>{try{Ce({...Ne,Post:!0});const{keyword_search:t,page:n,limit:r}=e,i=await fetch("".concat(kF,"/api/user/product/list"),{method:"Post",headers:{"Content-Type":"application/json",token:Ae},body:JSON.stringify({keyword_search:t||"",page:n,limit:r})}),o=await i.json();i.ok&&(ve(o.data),Ie({...be,post:o.total}))}catch(Sv){console.log(Sv)}finally{Ce({...Ne,Post:!1})}},He=async()=>{try{Ce({...Ne,WishList:!0});const e=await fetch("".concat(kF,"/api/user/product/wishlist"),{method:"GET",headers:{"Content-Type":"application/json",token:Ae}}),t=await e.json();e.ok&&$(t.data.wishlist)}catch(Sv){gl.error("Server Down")}finally{Ce({...Ne,WishList:!1})}},We=async()=>{try{Ce({...Ne,cartList:!0});const t=await fetch("".concat(kF,"/api/user/product/cart"),{method:"GET",headers:{"Content-Type":"application/json",token:Ae}}),n=await t.json();var e;if(t.ok)ne((null===(e=n.data)||void 0===e?void 0:e.items)||[]),se(n.data.total_price)}catch(Sv){gl.error("Server Down")}finally{Ce({...Ne,cartList:!1})}};(0,r.useEffect)((()=>{(async()=>{O(!0);try{await Le(),await(async()=>{R(!0);try{const e=await fetch("".concat(kF,"/api/service/list"),{method:"GET",headers:{"Content-Type":"application/json"}}),t=await e.json();e.ok&&d(t.data)}catch(Sv){console.log(Sv)}R(!1)})()}catch(Sv){}finally{O(!1)}})()}),[]),(0,r.useEffect)((()=>{"/"!==Re.pathname||w||(je({}),Pe({}),Ue({}),Fe({}),ze({}),Ve({}),Be({}),(async()=>{try{const e=await fetch("".concat(kF,"/api/cms/getAll"),{method:"POST",headers:{"Content-Type":"application/json"}}),t=await e.json();e.ok&&c(t.data)}catch(Sv){gl.error("Server Down")}})()),"/wishlist"===Re.pathname&&He()}),[Re.pathname,w]);const Ye={RegisterUser:async(e,t,n)=>{try{const r=new FormData;r.append("name",e),r.append("email",t),r.append("password",n);const o=await DF.post("".concat(kF,"/api/register"),r,{headers:{"Content-Type":"multipart/form-data"}}),s=o.data;200===o.status?(xe(s.token,s.message),i(!0)):(i(!1),gl.error(s.message))}catch(Sv){i(!1)}},LoginUser:async(e,t)=>{try{R(!0);const n=await fetch("".concat(kF,"/api/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),r=await n.json();n.ok?(xe(r.token,r.message),i(!0)):(i(!1),gl.error(r.message))}catch(Sv){i(!1),gl.error("Server Down")}finally{R(!1)}},isLogIn:n,LogOut:async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat(kF,"/api/logout"),{method:"GET",headers:{"Content-Type":"application/json",token:e}}),n=await t.json();t.ok&&(localStorage.removeItem("token"),s({}),i(!1),function(e){fp(e).signOut()}(eA),gl.success(n.message),C(""))}catch(Sv){gl.error("Server Down")}},userData:o,cmsData:a,checkTokenValidity:ke,loading:w,SocialLoginUser:async(e,t,n,r,o)=>{try{R(!0);const s=await fetch("".concat(kF,"/api/social-login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,social_id:t,register_type:n,image:o,name:r})}),a=await s.json();s.ok?(xe(a.token,a.message),i(!0)):(i(!1),gl.error(a.message))}catch(Sv){gl.error("Server Down")}finally{R(!1)}},serviceList:l,goodsList:m,electronicsList:b,getGoodsProductDetails:async e=>{try{E({data:{},isLoad:!0});const t=await fetch("".concat(kF,"/api/product/goods/details/").concat(e).concat(n?"?userId=".concat(o._id):""),{method:"GET",headers:{"Content-Type":"application/json"}}),r=await t.json();t.ok?E({data:r.data,isLoad:!1}):E({data:{},isLoad:!1})}catch(Sv){E({data:{},isLoad:!1}),console.log(Sv)}},goodsItems:_,setGoodsItems:E,getElectronicsProductDetails:async e=>{try{T({data:{},isLoad:!0});const t=await fetch("".concat(kF,"/api/product/electronics/details/").concat(e).concat(n?"?userId=".concat(o._id):""),{method:"GET",headers:{"Content-Type":"application/json"}}),r=await t.json();t.ok?T({data:r.data,isLoad:!1}):T({data:{},isLoad:!1})}catch(Sv){T({data:{},isLoad:!1}),console.log(Sv)}},electronicsItems:S,setElectronicsItems:T,getUserplan:async()=>{try{const e=await fetch("".concat(kF,"/api/user/membership/plan/list"),{method:"POST",headers:{"Content-Type":"application/json",token:Ae}}),t=await e.json();e.ok&&v(t.data)}catch(Sv){gl.error("Server Down")}},packagesList:y,ChnagePassword:async(e,t)=>{try{const n=await fetch("".concat(kF,"/api/change-password"),{method:"POST",headers:{"Content-Type":"application/json",token:Ae},body:JSON.stringify({currentPassword:e,newPassword:t})}),r=await n.json();console.log("data",r),n.ok?(gl.success(r.message),we("/account")):gl.error(r.message)}catch(Sv){gl.error("Server Down")}},mainscreenLoading:A,updateProfile:async(e,t,n,r,i,o)=>{const s=new FormData;s.append("name",e),s.append("email",t),s.append("image",n),s.append("mobile",r),s.append("bio",i),s.append("address",o);try{const e=await DF.post("".concat(kF,"/api/profile/update"),s,{headers:{"Content-Type":"multipart/form-data",token:Ae}});gl(e.data.message),Le()}catch(Sv){console.error("Error updating profile:",Sv)}},setMainscreenLoading:O,getFreelancer:Ue,freelancerList:L,freelancerDetail:j,setFreelancerDetail:U,getFreelancerDetails:async e=>{try{U({data:{},isLoad:!0});const t=await fetch("".concat(kF,"/api/product/freelancer/details/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();t.ok?U({data:n.data,isLoad:!1}):U({data:{},isLoad:!1})}catch(Sv){U({data:{},isLoad:!1}),console.log(Sv)}},fashion:F,wishListAdd:async e=>{try{if(!n)return gl.info("Login first"),void we("/login");{const t=await fetch("".concat(kF,"/api/user/product/wishlist/add"),{method:"POST",headers:{"Content-Type":"application/json",token:Ae},body:JSON.stringify({product_id:e})}),n=await t.json();t.ok?(gl.success(n.message),He()):gl.error(t.message)}}catch(Sv){console.log(Sv)}},wishListRemove:async e=>{try{if(!n)return gl.info("Login first"),void we("/login");{const t=await fetch("".concat(kF,"/api/user/product/wishlist/remove"),{method:"POST",headers:{"Content-Type":"application/json",token:Ae},body:JSON.stringify({product_id:e})}),n=await t.json();t.ok?(gl.success(n.message),He()):gl.error(t.message)}}catch(Sv){console.log(Sv)}},wishList:X,faq:ae,getFaq:async()=>{try{const e=await fetch("".concat(kF,"/api/all-faq"),{method:"POST",headers:{"Content-Type":"application/json",token:Ae}}),t=await e.json();e.ok&&ce(t.data)}catch(Sv){console.log(Sv)}},skeleton:le,property:W,getPropertyDetail:async e=>{try{K({data:[],isLoad:!0});const t=await fetch("".concat(kF,"/api/property/details/").concat(e).concat(n?"?userId=".concat(o._id):""),{method:"GET",headers:{"Content-Type":"application/json"}}),r=await t.json();t.ok?K({data:r.data,isLoad:!1}):K({data:[],isLoad:!1})}catch(Sv){K({data:[],isLoad:!1}),console.log(Sv)}},propertyDetail:q,lesson:G,jobList:Q,getGoodsProduct:Pe,totalItem:be,getJobList:Be,getLesson:Ve,getElectronicsProduct:je,getFashionBeauty:Fe,getProperty:ze,setPropertyDetail:K,listLoading:Ne,jobDetail:M,setJobDetail:D,getJobListDetail:async e=>{try{D({data:{},isLoad:!0});const t=await fetch("".concat(kF,"/api/job/details/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();t.ok?D({data:n.data,isLoad:!1}):D({data:{},isLoad:!1})}catch(Sv){D({data:{},isLoad:!1}),console.log(Sv)}},lessonDetail:k,setlessonDetail:x,getLessonDetail:async e=>{try{x({data:{},isLoad:!0});const t=await fetch("".concat(kF,"/api/product/lesson-course/detail/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();t.ok?x({data:n.data,isLoad:!1}):x({data:{},isLoad:!1})}catch(Sv){x({data:{},isLoad:!1}),console.log(Sv)}},fashionDetail:V,setFashionDetail:B,getFashionBeautyDetails:async e=>{try{B({data:{},isLoad:!0});const t=await fetch("".concat(kF,"/api/product/fashion/details/").concat(e).concat(n?"?userId=".concat(o._id):""),{method:"GET",headers:{"Content-Type":"application/json"}}),r=await t.json();t.ok?B({data:r.data,isLoad:!1}):B({data:{},isLoad:!1})}catch(Sv){B({data:{},isLoad:!1}),console.log(Sv)}},getSubServiceList:async e=>{try{f(!0);const t=await fetch("".concat(kF,"/api/service/sub-category/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parentId:e})}),n=await t.json();t.ok&&h(n.data)}catch(Sv){console.log(Sv)}finally{f(!1)}},subServiceList:u,subServiceLoading:p,AddTitleDes:async e=>{try{const t=await fetch("".concat(kF,"/api/user/product/add"),{method:"POST",headers:{"Content-Type":"application/json",token:Ae},body:JSON.stringify({...e})}),n=await t.json();return t.ok&&(gl.success(n.message),ge(n.data._id)),n}catch(Sv){gl.error(Sv),console.log(Sv)}},AddRealEstate:async e=>{try{const t=await DF.post("".concat(kF,"/api/property/add"),e,{headers:{"Content-Type":"multipart/form-data",token:Ae}});return gl.success(t.message||"Success"),we("/my-post"),t}catch(Sv){gl.error(Sv),console.log(Sv)}},getAttributeList:async e=>{try{const t=await DF.post("".concat(kF,"/api/attribute/list"),{category_id:e.category_id||"",sub_category_id:e.sub_category_id||""},{headers:{"Content-Type":"application/json",token:Ae}});return he(t.data.data),t}catch(Sv){}},attributeList:ue,productId:me,AddJob:async e=>{try{const t=await DF.post("".concat(kF,"/api/job/post"),e,{headers:{"Content-Type":"multipart/form-data",token:Ae}});return gl.success(t.message||"Success"),we("/my-post"),t}catch(Sv){gl.error(Sv)}},AddFashionProduct:async e=>{try{const t=await DF.post("".concat(kF,"/api/product/fashion/add"),e,{headers:{"Content-Type":"multipart/form-data",token:Ae}});return gl.success(t.message||"Success"),we("/my-post"),t}catch(Sv){gl.error(Sv)}},AddFreelancer:async e=>{try{const t=await DF.post("".concat(kF,"/api/product/freelancer/add"),e,{headers:{"Content-Type":"multipart/form-data",token:Ae}});return gl.success(t.message||"Success"),we("/my-post"),t}catch(Sv){gl.error(Sv)}},AddElectronics:async e=>{try{const t=await DF.post("".concat(kF,"/api/product/electronics/add"),e,{headers:{"Content-Type":"multipart/form-data",token:Ae}});return gl.success(t.message||"Success"),we("/my-post"),t}catch(Sv){gl.error(Sv)}},AddCourse:async e=>{try{const t=await DF.post("".concat(kF,"/api/product/lesson-course/add"),e,{headers:{"Content-Type":"multipart/form-data",token:Ae}});return gl.success(t.message||"Success"),we("/my-post"),t}catch(Sv){gl.error(Sv)}},AddGoodsProduct:async e=>{try{const t=await DF.post("".concat(kF,"/api/product/goods/add"),e,{headers:{"Content-Type":"multipart/form-data",token:Ae}});return gl.success(t.message||"Success"),we("/my-post"),t}catch(Sv){gl.error(Sv)}},getMyPost:Ge,mypost:ye,myPostRemove:async e=>{try{const t=await fetch("".concat(kF,"/api/user/product/delete/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",token:Ae}}),n=await t.json();t.ok?(gl.success(n.message),Ge(e)):gl.error(t.message)}catch(Sv){console.log(Sv)}},getMyPostListDetail:async e=>{try{const t=await fetch("".concat(kF,"/api/user/product/detail/").concat(e),{method:"GET",headers:{"Content-Type":"application/json",token:Ae}}),n=await t.json();t.ok?Ee(n.data):console.log("")}catch(Sv){console.log(Sv)}},myPostDetail:_e,updateMyPost:async(e,t)=>{try{const n=await DF.post("".concat(kF,"/api/user/product/update/").concat(e),t,{headers:{"Content-Type":"multipart/form-data",token:Ae}});return gl.success(n.message||"Success"),we("/my-post"),n}catch(Sv){gl.error(Sv.message)}},getAttributeFilterList:async e=>{try{const t=e.main?{category_id:e.main}:e.sub?{sub_category_id:e.sub}:{},{data:n}=await DF.post("".concat(kF,"/api/attribute/filter/list"),t,{headers:{"Content-Type":"application/json"}});return fe(n.data),n}catch(Sv){}},filterAttributeList:pe,BidAdd:async(e,t)=>{try{f(!0);const n=await fetch("".concat(kF,"/api/product/bid/add"),{method:"POST",headers:{"Content-Type":"application/json",token:Ae},body:JSON.stringify({bid_amount:e,productId:t})}),r=await n.json();return n.ok?gl.success(r.message):gl.error(r.message),r}catch(Sv){console.log(Sv)}},cartListAdd:async(e,t,r)=>{try{if(!n)return gl.info("Login first"),void we("/login");{const n=await fetch("".concat(kF,"/api/user/product/cart/add"),{method:"POST",headers:{"Content-Type":"application/json",token:Ae},body:JSON.stringify({product_id:e,quantity:t,price:r})}),i=await n.json();n.ok?(gl.success(i.message),We()):gl.error(n.message)}}catch(Sv){console.log(Sv)}},getCartList:We,cartList:te,cartListRemove:async e=>{try{if(!n)return gl.info("Login first"),void we("/login");{const t=await fetch("".concat(kF,"/api/user/product/cart/remove"),{method:"POST",headers:{"Content-Type":"application/json",token:Ae},body:JSON.stringify({product_id:e})}),n=await t.json();t.ok?(gl.success(n.message),We()):gl.error(t.message)}}catch(Sv){console.log(Sv)}},cartListUpdate:async(e,t)=>{try{if(!n)return gl.info("Login first"),void we("/login");{const n=await fetch("".concat(kF,"/api/user/product/cart/quantity"),{method:"POST",headers:{"Content-Type":"application/json",token:Ae},body:JSON.stringify({product_id:e,quantity:t})}),r=await n.json();n.ok?(gl.success(r.message),We()):gl.error(n.message)}}catch(Sv){console.log(Sv)}},getReletedProduct:async(e,t,n)=>{try{const t=await fetch("".concat(kF,"/api/product/related/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category_id:e,product_id:n})}),r=await t.json();t.ok&&De(r.data)}catch(Sv){console.log(Sv)}finally{Ce({...Ne,Fashion:!1})}},reletedList:Oe,totalprice:oe,orderCheckOut:async e=>{try{if(!n)return gl.info("Login first"),void we("/login");{const t=await fetch("".concat(kF,"/api/order-add"),{method:"POST",headers:{"Content-Type":"application/json",token:Ae},body:JSON.stringify(e)}),r=await t.json();t.ok?(gl.success(r.message),(async()=>{try{if(!n)return gl.info("Login first"),void we("/login");{const e=await fetch("".concat(kF,"/api/user/product/cart/clear"),{method:"POST",headers:{"Content-Type":"application/json",token:Ae}});e.ok?We():gl.error(e.message)}}catch(Sv){console.log(Sv)}})()):gl.error(t.message)}}catch(Sv){console.log(Sv)}},getMyOrderList:async()=>{try{Ce({...Ne,cartList:!0});const e=await fetch("".concat(kF,"/api/order-list"),{method:"POST",headers:{"Content-Type":"application/json",token:Ae}}),t=await e.json();e.ok&&ie(t.data)}catch(Sv){gl.error("Server Down")}finally{Ce({...Ne,cartList:!1})}},orderList:re,getAllProductDetails:async e=>{try{Te({data:{},isLoad:!0});const t=await fetch("".concat(kF,"/api/wishlist/product/details/").concat(e),{method:"GET",headers:{"Content-Type":"application/json",token:Ae}}),n=await t.json();t.ok&&200===n.status?Te({data:n.data,isLoad:!1}):Te({data:{},isLoad:!1})}catch(Sv){Te({data:{},isLoad:!1}),console.log(Sv)}},allPDetails:Se,getAllUnAuthProductDetails:async e=>{try{Te({data:{},isLoad:!0});const t=await fetch("".concat(kF,"/api/common/product/detail/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();t.ok&&200===n.status?Te({data:n.data,isLoad:!1}):Te({data:{},isLoad:!1})}catch(Sv){Te({data:{},isLoad:!1}),console.log(Sv)}},jobApply:async e=>{try{const t=await DF.post("".concat(kF,"/api/job/application"),e,{headers:{"Content-Type":"multipart/form-data",token:Ae}});200===t.status?gl.success(t.data.message):400===t.status&&gl.error(t.data.message)}catch(Sv){var t,n;gl.error((null===Sv||void 0===Sv||null===(t=Sv.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"An error occurred while submitting the application.")}}};return(0,Me.jsx)(qr.Provider,{value:Ye,children:t})};__webpack_require__(8885);o.createRoot(document.getElementById("root")).render((0,Me.jsx)(r.StrictMode,{children:(0,Me.jsx)(Ne,{children:(0,Me.jsx)(xF,{children:(0,Me.jsx)(Vj,{})})})}))})()})();
//# sourceMappingURL=main.dfb09854.js.map